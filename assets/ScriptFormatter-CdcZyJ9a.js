import{ai as a,aj as c,ak as m,al as d,am as u}from"./inspector-CyOA7R9n.js";function s(o,n,t){return(n?o[n-1]+1:0)+t}function g(o,n){const t=m(o,n-1,d);let i;return t?i=n-o[t-1]-1:i=n,[t,i]}async function S(o,n,t,i=c.instance().moduleSetting("text-editor-indent").get()){return o.isDocumentOrScriptOrStyleSheet()?h(n,t,i):{formattedContent:t,formattedMapping:new L}}async function h(o,n,t=c.instance().moduleSetting("text-editor-indent").get()){const i=n.replace(/\r\n?|[\n\u2028\u2029]/g,`
`).replace(/^\uFEFF/,""),r=await u().format(o,i,t),l=a(i),p=a(r.content),f=new E(l,p,r.mapping);return{formattedContent:r.content,formattedMapping:f}}class L{originalToFormatted(n,t=0){return[n,t]}formattedToOriginal(n,t=0){return[n,t]}}class E{originalLineEndings;formattedLineEndings;mapping;constructor(n,t,i){this.originalLineEndings=n,this.formattedLineEndings=t,this.mapping=i}originalToFormatted(n,t){const i=s(this.originalLineEndings,n,t||0),e=this.convertPosition(this.mapping.original,this.mapping.formatted,i);return g(this.formattedLineEndings,e)}formattedToOriginal(n,t){const i=s(this.formattedLineEndings,n,t||0),e=this.convertPosition(this.mapping.formatted,this.mapping.original,i);return g(this.originalLineEndings,e)}convertPosition(n,t,i){const e=m(n,i,d)-1;let r=t[e]+i-n[e];return e<t.length-1&&r>t[e+1]&&(r=t[e+1]),r}}export{h as a,S as f};
//# sourceMappingURL=ScriptFormatter-CdcZyJ9a.js.map
