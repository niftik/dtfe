{"version":3,"file":"DropTarget-DDkHhLsd.js","sources":["../../ui/legacy/dropTarget.css.legacy.js","../../ui/legacy/DropTarget.js"],"sourcesContent":["// Copyright 2024 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n// IMPORTANT: this file is auto generated. Please do not edit this file.\n/* istanbul ignore file */\nexport default {\n  cssContent: `/*\n * Copyright (c) 2015 The Chromium Authors. All rights reserved.\n * Use of this source code is governed by a BSD-style license that can be\n * found in the LICENSE file.\n */\n\n:host {\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  display: flex;\n  background-color: var(--color-background-opacity-80);\n  z-index: 1000;\n}\n\n.drop-target-message {\n  flex: auto;\n  font-size: 30px;\n  color: var(--sys-color-token-subtle);\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  margin: 20px;\n  border: 4px dashed var(--sys-color-neutral-outline);\n  pointer-events: none;\n}\n\n/*# sourceURL=dropTarget.css */\n`\n};\n","// Copyright (c) 2015 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\nimport dropTargetStyles from './dropTarget.css.legacy.js';\nimport { createShadowRootWithCoreStyles } from './UIUtils.js';\nexport class DropTarget {\n    element;\n    transferTypes;\n    messageText;\n    handleDrop;\n    enabled;\n    dragMaskElement;\n    constructor(element, transferTypes, messageText, handleDrop) {\n        element.addEventListener('dragenter', this.onDragEnter.bind(this), true);\n        element.addEventListener('dragover', this.onDragOver.bind(this), true);\n        this.element = element;\n        this.transferTypes = transferTypes;\n        this.messageText = messageText;\n        this.handleDrop = handleDrop;\n        this.enabled = true;\n        this.dragMaskElement = null;\n    }\n    setEnabled(enabled) {\n        this.enabled = enabled;\n    }\n    onDragEnter(event) {\n        if (this.enabled && this.hasMatchingType(event)) {\n            event.consume(true);\n        }\n    }\n    hasMatchingType(ev) {\n        const event = ev;\n        if (!event.dataTransfer) {\n            return false;\n        }\n        for (const transferType of this.transferTypes) {\n            const found = Array.from(event.dataTransfer.items).find(item => {\n                return transferType.kind === item.kind && Boolean(transferType.type.exec(item.type));\n            });\n            if (found) {\n                return true;\n            }\n        }\n        return false;\n    }\n    onDragOver(ev) {\n        const event = ev;\n        if (!this.enabled || !this.hasMatchingType(event)) {\n            return;\n        }\n        if (event.dataTransfer) {\n            event.dataTransfer.dropEffect = 'copy';\n        }\n        event.consume(true);\n        if (this.dragMaskElement) {\n            return;\n        }\n        this.dragMaskElement = this.element.createChild('div', '');\n        const shadowRoot = createShadowRootWithCoreStyles(this.dragMaskElement, { cssFile: dropTargetStyles, delegatesFocus: undefined });\n        shadowRoot.createChild('div', 'drop-target-message').textContent = this.messageText;\n        this.dragMaskElement.addEventListener('drop', this.onDrop.bind(this), true);\n        this.dragMaskElement.addEventListener('dragleave', this.onDragLeave.bind(this), true);\n    }\n    onDrop(ev) {\n        const event = ev;\n        event.consume(true);\n        this.removeMask();\n        if (this.enabled && event.dataTransfer) {\n            this.handleDrop(event.dataTransfer);\n        }\n    }\n    onDragLeave(event) {\n        event.consume(true);\n        this.removeMask();\n    }\n    removeMask() {\n        if (this.dragMaskElement) {\n            this.dragMaskElement.remove();\n            this.dragMaskElement = null;\n        }\n    }\n}\nexport const Type = {\n    URI: { kind: 'string', type: /text\\/uri-list/ },\n    Folder: { kind: 'file', type: /$^/ },\n    File: { kind: 'file', type: /.*/ },\n    WebFile: { kind: 'file', type: /[\\w]+/ },\n    ImageFile: { kind: 'file', type: /image\\/.*/ },\n};\n//# sourceMappingURL=DropTarget.js.map"],"names":["dropTargetStyles","DropTarget","element","transferTypes","messageText","handleDrop","enabled","event","ev","transferType","item","shadowRoot","createShadowRootWithCoreStyles","Type"],"mappings":"6CAKA,MAAeA,EAAA,CACb,WAAY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,CA+Bd,EChCO,MAAMC,CAAW,CACpB,QACA,cACA,YACA,WACA,QACA,gBACA,YAAYC,EAASC,EAAeC,EAAaC,EAAY,CACzDH,EAAQ,iBAAiB,YAAa,KAAK,YAAY,KAAK,IAAI,EAAG,EAAI,EACvEA,EAAQ,iBAAiB,WAAY,KAAK,WAAW,KAAK,IAAI,EAAG,EAAI,EACrE,KAAK,QAAUA,EACf,KAAK,cAAgBC,EACrB,KAAK,YAAcC,EACnB,KAAK,WAAaC,EAClB,KAAK,QAAU,GACf,KAAK,gBAAkB,IAC1B,CACD,WAAWC,EAAS,CAChB,KAAK,QAAUA,CAClB,CACD,YAAYC,EAAO,CACX,KAAK,SAAW,KAAK,gBAAgBA,CAAK,GAC1CA,EAAM,QAAQ,EAAI,CAEzB,CACD,gBAAgBC,EAAI,CAChB,MAAMD,EAAQC,EACd,GAAI,CAACD,EAAM,aACP,MAAO,GAEX,UAAWE,KAAgB,KAAK,cAI5B,GAHc,MAAM,KAAKF,EAAM,aAAa,KAAK,EAAE,KAAKG,GAC7CD,EAAa,OAASC,EAAK,MAAQ,EAAQD,EAAa,KAAK,KAAKC,EAAK,IAAI,CACrF,EAEG,MAAO,GAGf,MAAO,EACV,CACD,WAAWF,EAAI,CACX,MAAMD,EAAQC,EAQd,GAPI,CAAC,KAAK,SAAW,CAAC,KAAK,gBAAgBD,CAAK,IAG5CA,EAAM,eACNA,EAAM,aAAa,WAAa,QAEpCA,EAAM,QAAQ,EAAI,EACd,KAAK,iBACL,OAEJ,KAAK,gBAAkB,KAAK,QAAQ,YAAY,MAAO,EAAE,EACzD,MAAMI,EAAaC,EAA+B,KAAK,gBAAiB,CAAE,QAASZ,EAAkB,eAAgB,MAAS,CAAE,EAChIW,EAAW,YAAY,MAAO,qBAAqB,EAAE,YAAc,KAAK,YACxE,KAAK,gBAAgB,iBAAiB,OAAQ,KAAK,OAAO,KAAK,IAAI,EAAG,EAAI,EAC1E,KAAK,gBAAgB,iBAAiB,YAAa,KAAK,YAAY,KAAK,IAAI,EAAG,EAAI,CACvF,CACD,OAAOH,EAAI,CACP,MAAMD,EAAQC,EACdD,EAAM,QAAQ,EAAI,EAClB,KAAK,WAAU,EACX,KAAK,SAAWA,EAAM,cACtB,KAAK,WAAWA,EAAM,YAAY,CAEzC,CACD,YAAYA,EAAO,CACfA,EAAM,QAAQ,EAAI,EAClB,KAAK,WAAU,CAClB,CACD,YAAa,CACL,KAAK,kBACL,KAAK,gBAAgB,SACrB,KAAK,gBAAkB,KAE9B,CACL,CACY,MAACM,EAAO,CAChB,IAAK,CAAE,KAAM,SAAU,KAAM,gBAAkB,EAC/C,OAAQ,CAAE,KAAM,OAAQ,KAAM,IAAM,EACpC,KAAM,CAAE,KAAM,OAAQ,KAAM,IAAM,EAClC,QAAS,CAAE,KAAM,OAAQ,KAAM,OAAS,EACxC,UAAW,CAAE,KAAM,OAAQ,KAAM,WAAa,CAClD"}