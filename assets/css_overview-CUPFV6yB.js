import{aq as w,i as t,bd as S,u,A as C}from"./inspector-CyOA7R9n.js";import{C as p,a as g,b as m,c as f,s as O}from"./cssOverview.css-C_I9lWrq.js";import{d as I,e as T,f as _,g as k,h as q}from"./cssOverview.css-C_I9lWrq.js";import"./PanelIntroductionSteps-BeLT2-qM.js";import"./PreviewToggle-D6BBIbZ3.js";class b extends w{currentUrl;constructor(){super(),this.currentUrl=t.instance().inspectedURL(),t.instance().addEventListener("InspectedURLChanged",this.#e,this)}#e(){this.currentUrl!==t.instance().inspectedURL()&&(this.currentUrl=t.instance().inspectedURL(),this.dispatchEventToListeners("Reset"))}}const x=Object.freeze(Object.defineProperty({__proto__:null,OverviewController:b},Symbol.toStringTag,{value:"Module"}));class M extends S{#e;#t;#i;#s;#r;#n;#o;#a;#h;#l;#d;#v;#c;#w;#S;constructor(e){super("css-overview"),this.element.classList.add("css-overview-panel"),this.#e=e,this.#t=new p,this.#t.addEventListener("overviewstartrequested",()=>this.#e.dispatchEventToListeners("RequestOverviewStart")),this.#i=new g(this.#e),this.#s=new m(this.#e),t.instance().observeTargets(this),this.#e.addEventListener("RequestOverviewStart",s=>{u.actionTaken(C.CaptureCssOverviewClicked),this.#O()},this),this.#e.addEventListener("OverviewCompleted",this.#b,this),this.#e.addEventListener("Reset",this.#C,this),this.#e.addEventListener("RequestNodeHighlight",this.#p,this),this.#C()}targetAdded(e){if(e!==t.instance().primaryPageTarget())return;this.#s.initializeModels(e);const s=e.model(f);this.#r=s}targetRemoved(){}#u(){if(!this.#r)throw new Error("Did not retrieve model information yet.");return this.#r}#C(){this.#n=new Map,this.#o=new Map,this.#a=new Map,this.#h=new Map,this.#l=new Map,this.#d=new Map,this.#v=new Map,this.#c=0,this.#w={styleRules:0,inlineStyles:0,externalSheets:0,stats:{type:0,class:0,id:0,universal:0,attribute:0,nonSimple:0}},this.#S=new Map,this.#g()}#p(e){this.#u().highlightNode(e.data)}#g(){this.#i.hideWidget(),this.#s.hideWidget(),this.contentElement.append(this.#t),this.#t.show()}#m(){this.#t.hide(),this.#s.hideWidget(),this.#i.show(this.contentElement)}#f(){this.#t.hide(),this.#i.hideWidget(),this.#s.show(this.contentElement),this.#s.setOverviewData({backgroundColors:this.#n,textColors:this.#o,textColorContrastIssues:this.#S,fillColors:this.#a,borderColors:this.#h,globalStyleStats:this.#w,fontInfo:this.#l,elementCount:this.#c,mediaQueries:this.#d,unusedDeclarations:this.#v})}async#O(){this.#m();const e=this.#u(),[s,{elementCount:i,backgroundColors:r,textColors:n,textColorContrastIssues:o,fillColors:a,borderColors:h,fontInfo:l,unusedDeclarations:d},v]=await Promise.all([e.getGlobalStylesheetStats(),e.getNodeStyleStats(),e.getMediaQueries()]);i&&(this.#c=i),s&&(this.#w=s),v&&(this.#d=v),r&&(this.#n=r),n&&(this.#o=n),o&&(this.#S=o),a&&(this.#a=a),h&&(this.#h=h),l&&(this.#l=l),d&&(this.#v=d),this.#e.dispatchEventToListeners("OverviewCompleted")}#b(){this.#f()}wasShown(){super.wasShown(),this.registerCSSFiles([O])}}const P=Object.freeze(Object.defineProperty({__proto__:null,CSSOverviewPanel:M},Symbol.toStringTag,{value:"Module"}));export{I as CSSOverviewCompletedView,x as CSSOverviewController,T as CSSOverviewModel,P as CSSOverviewPanel,_ as CSSOverviewProcessingView,k as CSSOverviewSidebarPanel,q as CSSOverviewUnusedDeclarations};
//# sourceMappingURL=css_overview-CUPFV6yB.js.map
