import{B as L,C as _,F as I,a as k,b as y,N as E,O,P as F,T as G}from"./timelineOverviewInfo.css-BT4HnMd6.js";import{i as s,aQ as n,aj as m,aR as c,aS as f,aT as g}from"./inspector-CyOA7R9n.js";import{M as a}from"./LineLevelProfile-C_ytZbMi.js";import{L as x}from"./LineLevelProfile-C_ytZbMi.js";import{T as H,a as N}from"./TimelineOverviewPane-DjPkTYph.js";import"./PreviewFactory-7rWtg079.js";import"./DropTarget-DDkHhLsd.js";import"./ScriptFormatter-CdcZyJ9a.js";class h{handleAction(e,i){for(const o of s.instance().models(n))o.collectGarbage();return!0}}const C=Object.freeze(Object.defineProperty({__proto__:null,GCActionDelegate:h},Symbol.toStringTag,{value:"Module"}));let r;class l{running;sessionId;loadEventCallback;setting;constructor(){this.running=!1,this.sessionId=0,this.loadEventCallback=()=>{},this.setting=m.instance().moduleSetting("memory-live-heap-profile"),this.setting.addChangeListener(e=>e.data?this.startProfiling():this.stopProfiling()),this.setting.get()&&this.startProfiling()}static instance(e={forceNew:null}){const{forceNew:i}=e;return(!r||i)&&(r=new l),r}async run(){}modelAdded(e){e.startSampling(1e4)}modelRemoved(e){}async startProfiling(){if(this.running)return;this.running=!0;const e=this.sessionId;s.instance().observeModels(n,this),s.instance().addModelListener(c,f.Load,this.loadEventFired,this);do{const i=s.instance().models(n),o=await Promise.all(i.map(t=>t.getSamplingProfile()));if(e!==this.sessionId)break;a.instance().reset();for(let t=0;t<o.length;++t){const d=o[t];d&&a.instance().appendHeapProfile(d,i[t].target())}await Promise.race([new Promise(t=>window.setTimeout(t,g()?10:5e3)),new Promise(t=>{this.loadEventCallback=t})])}while(e===this.sessionId);s.instance().unobserveModels(n,this),s.instance().removeModelListener(c,f.Load,this.loadEventFired,this);for(const i of s.instance().models(n))i.stopSampling();a.instance().reset()}stopProfiling(){this.running&&(this.running=!1,this.sessionId++)}loadEventFired(){this.loadEventCallback()}}const M=Object.freeze(Object.defineProperty({__proto__:null,LiveHeapProfile:l},Symbol.toStringTag,{value:"Module"}));export{L as BrickBreaker,_ as ChartViewport,I as FilmStripView,k as FlameChart,y as Font,C as GCActionDelegate,x as LineLevelProfile,M as LiveHeapProfile,E as NetworkPriorities,O as OverviewGrid,F as PieChart,G as TimelineGrid,H as TimelineOverviewCalculator,N as TimelineOverviewPane};
//# sourceMappingURL=perf_ui-CRtvnQOi.js.map
