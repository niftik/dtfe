{"version":3,"file":"webauthn-Cf8Oc58W.js","sources":["../../panels/webauthn/webauthnPane.css.js","../../panels/webauthn/WebauthnPane.js"],"sourcesContent":["// Copyright 2024 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n// IMPORTANT: this file is auto generated. Please do not edit this file.\n/* istanbul ignore file */\nconst styles = new CSSStyleSheet();\nstyles.replaceSync(\n`/*\n * Copyright (c) 2020 The Chromium Authors. All rights reserved.\n * Use of this source code is governed by a BSD-style license that can be\n * found in the LICENSE file.\n */\n\n.webauthn-pane {\n  overflow: auto;\n  min-width: 500px;\n}\n\n.webauthn-toolbar-container {\n  display: flex;\n  background-color: var(--sys-color-cdt-base-container);\n  border-bottom: 1px solid var(--sys-color-divider);\n  flex: 0 0 auto;\n}\n\n.webauthn-toolbar {\n  display: inline-block;\n}\n\n.authenticators-view {\n  margin: 0 10px;\n  min-height: auto;\n  display: none;\n}\n\n.webauthn-pane.enabled .authenticators-view {\n  display: block;\n}\n/* New Authenticator Section */\n.new-authenticator-title {\n  line-height: 24px;\n  font-weight: bold;\n  display: block;\n}\n\n.new-authenticator-container {\n  display: none;\n  margin: 10px;\n}\n\n.webauthn-pane.enabled .new-authenticator-container {\n  display: block;\n}\n\n.new-authenticator-form {\n  border: none;\n  padding: 10px 0;\n  flex: 0 0 auto;\n  margin: 0;\n}\n\n.webauthn-pane .chrome-select {\n  width: 120px;\n}\n/* Active Authenticator Section */\n.authenticator-section {\n  display: block;\n  padding: 16px 0;\n  border-bottom: 1px solid var(--sys-color-divider);\n}\n\n.authenticator-fields {\n  border: none;\n  padding: 10px 0;\n  flex: 0 0 auto;\n  margin: 0;\n}\n\n.authenticator-field {\n  display: flex;\n  margin: auto;\n}\n\n.authenticator-section-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: flex-end;\n}\n\n.authenticator-section-title {\n  line-height: 24px;\n  display: inline-block;\n}\n\n.authenticator-section-title .authenticator-name-field {\n  display: inline-block;\n  font-weight: bold;\n  border: none;\n  animation: save-flash 0.2s;\n  text-overflow: ellipsis;\n}\n\n.authenticator-section-title.editing-name .authenticator-name-field {\n  border-bottom: 1px solid var(--sys-color-neutral-outline);\n  font-weight: normal;\n  animation: none;\n}\n\n.authenticator-field-value {\n  padding: 5px 0;\n  display: inline-block;\n  font-family: monospace;\n}\n\n.authenticator-option-checkbox {\n  position: relative;\n  top: 2px;\n}\n\n.authenticator-option {\n  display: flex;\n  padding-bottom: 10px;\n  align-items: center;\n  margin: auto;\n\n  &:has(span[is=\"dt-checkbox\"]) {\n    padding-bottom: 4px;\n  }\n}\n\n.authenticator-option-label {\n  text-align: right;\n  width: 200px;\n  display: inline-block;\n  padding: 0 10px 0 0;\n}\n\ntd .text-button {\n  min-width: 20px;\n  margin: auto;\n}\n\n.active-button-container {\n  display: inline-block;\n  min-width: 28px;\n}\n\n.edit-name-toolbar {\n  display: inline-block;\n  vertical-align: middle;\n}\n\n@keyframes save-flash {\n  from { opacity: 0%; }\n  to { opacity: 100%; }\n}\n/* Credentials Table */\n\n.data-grid-data-grid-node.centered {\n  text-align: center;\n}\n\n.data-grid td {\n  vertical-align: middle;\n}\n\n.credentials-title {\n  display: block;\n  font-weight: bold;\n  margin: 8px 0;\n}\n\n.code {\n  font-family: monospace;\n}\n\n.learn-more {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 100%;\n  text-align: center;\n  overflow: hidden;\n}\n\n.webauthn-pane.enabled .learn-more {\n  display: none;\n}\n\n/*# sourceURL=webauthnPane.css */\n`);\n\nexport default styles;\n","// Copyright 2020 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\nimport * as Common from '../../core/common/common.js';\nimport * as Host from '../../core/host/host.js';\nimport * as i18n from '../../core/i18n/i18n.js';\nimport * as SDK from '../../core/sdk/sdk.js';\nimport * as DataGrid from '../../ui/legacy/components/data_grid/data_grid.js';\nimport * as UI from '../../ui/legacy/legacy.js';\nimport * as VisualLogging from '../../ui/visual_logging/visual_logging.js';\nimport webauthnPaneStyles from './webauthnPane.css.js';\nconst UIStrings = {\n    /**\n     *@description Label for button that allows user to download the private key related to a credential.\n     */\n    export: 'Export',\n    /**\n     *@description Label for an item to remove something\n     */\n    remove: 'Remove',\n    /**\n     *@description Label for empty credentials table.\n     *@example {navigator.credentials.create()} PH1\n     */\n    noCredentialsTryCallingSFromYour: 'No credentials. Try calling {PH1} from your website.',\n    /**\n     *@description Label for checkbox to toggle the virtual authenticator environment allowing user to interact with software-based virtual authenticators.\n     */\n    enableVirtualAuthenticator: 'Enable virtual authenticator environment',\n    /**\n     *@description Label for ID field for credentials.\n     */\n    id: 'ID',\n    /**\n     *@description Label for field that describes whether a credential is a resident credential.\n     */\n    isResident: 'Is Resident',\n    /**\n     *@description Label for credential field that represents the Relying Party ID that the credential is scoped to.\n     */\n    rpId: 'RP ID',\n    /**\n     *@description Label for a column in a table. A field/unique ID that represents the user a credential is mapped to.\n     */\n    userHandle: 'User Handle',\n    /**\n     *@description Label for signature counter field for credentials which represents the number of successful assertions.\n     * See https://w3c.github.io/webauthn/#signature-counter.\n     */\n    signCount: 'Signature Count',\n    /**\n     *@description Label for column with actions for credentials.\n     */\n    actions: 'Actions',\n    /**\n     *@description Title for the table that holds the credentials that a authenticator has registered.\n     */\n    credentials: 'Credentials',\n    /**\n     *@description Label for the learn more link that is shown before the virtual environment is enabled.\n     */\n    useWebauthnForPhishingresistant: 'Use WebAuthn for phishing-resistant authentication',\n    /**\n     *@description Text that is usually a hyperlink to more documentation\n     */\n    learnMore: 'Learn more',\n    /**\n     *@description Title for section of interface that allows user to add a new virtual authenticator.\n     */\n    newAuthenticator: 'New authenticator',\n    /**\n     *@description Text for security or network protocol\n     */\n    protocol: 'Protocol',\n    /**\n     *@description Label for input to select which transport option to use on virtual authenticators, e.g. USB or Bluetooth.\n     */\n    transport: 'Transport',\n    /**\n     *@description Label for checkbox that toggles resident key support on virtual authenticators.\n     */\n    supportsResidentKeys: 'Supports resident keys',\n    /**\n     *@description Label for checkbox that toggles large blob support on virtual authenticators. Large blobs are opaque data associated\n     * with a WebAuthn credential that a website can store, like an SSH certificate or a symmetric encryption key.\n     * See https://w3c.github.io/webauthn/#sctn-large-blob-extension\n     */\n    supportsLargeBlob: 'Supports large blob',\n    /**\n     *@description Text to add something\n     */\n    add: 'Add',\n    /**\n     *@description Label for button to add a new virtual authenticator.\n     */\n    addAuthenticator: 'Add authenticator',\n    /**\n     *@description Label for radio button that toggles whether an authenticator is active.\n     */\n    active: 'Active',\n    /**\n     *@description Title for button that enables user to customize name of authenticator.\n     */\n    editName: 'Edit name',\n    /**\n     *@description Placeholder for the input box to customize name of authenticator.\n     */\n    enterNewName: 'Enter new name',\n    /**\n     *@description Title for button that enables user to save name of authenticator after editing it.\n     */\n    saveName: 'Save name',\n    /**\n     *@description Title for a user-added virtual authenticator which is uniquely identified with its AUTHENTICATORID.\n     *@example {8c7873be-0b13-4996-a794-1521331bbd96} PH1\n     */\n    authenticatorS: 'Authenticator {PH1}',\n    /**\n     *@description Name for generated file which user can download. A private key is a secret code which enables encoding and decoding of a credential. .pem is the file extension.\n     */\n    privateKeypem: 'Private key.pem',\n    /**\n     *@description Label for field that holds an authenticator's universally unique identifier (UUID).\n     */\n    uuid: 'UUID',\n    /**\n     *@description Label for checkbox that toggles user verification support on virtual authenticators.\n     */\n    supportsUserVerification: 'Supports user verification',\n    /**\n     *@description Text in Timeline indicating that input has happened recently\n     */\n    yes: 'Yes',\n    /**\n     *@description Text in Timeline indicating that input has not happened recently\n     */\n    no: 'No',\n    /**\n     *@description Title of radio button that sets an authenticator as active.\n     *@example {Authenticator ABCDEF} PH1\n     */\n    setSAsTheActiveAuthenticator: 'Set {PH1} as the active authenticator',\n};\nconst str_ = i18n.i18n.registerUIStrings('panels/webauthn/WebauthnPane.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\nclass DataGridNode extends DataGrid.DataGrid.DataGridNode {\n    credential;\n    constructor(credential) {\n        super(credential);\n        this.credential = credential;\n    }\n    nodeSelfHeight() {\n        return 24;\n    }\n    createCell(columnId) {\n        const cell = super.createCell(columnId);\n        UI.Tooltip.Tooltip.install(cell, cell.textContent || '');\n        if (columnId !== 'actions') {\n            return cell;\n        }\n        const exportButton = UI.UIUtils.createTextButton(i18nString(UIStrings.export), () => {\n            if (this.dataGrid) {\n                this.dataGrid.dispatchEventToListeners(\"ExportCredential\" /* Events.EXPORT_CREDENTIAL */, this.credential);\n            }\n        }, { jslogContext: 'webauthn.export-credential' });\n        cell.appendChild(exportButton);\n        const removeButton = UI.UIUtils.createTextButton(i18nString(UIStrings.remove), () => {\n            if (this.dataGrid) {\n                this.dataGrid.dispatchEventToListeners(\"RemoveCredential\" /* Events.REMOVE_CREDENTIAL */, this.credential);\n            }\n        }, { jslogContext: 'webauthn.remove-credential' });\n        cell.appendChild(removeButton);\n        return cell;\n    }\n}\nclass WebauthnDataGridBase extends DataGrid.DataGrid.DataGridImpl {\n}\nclass WebauthnDataGrid extends Common.ObjectWrapper.eventMixin(WebauthnDataGridBase) {\n}\nclass EmptyDataGridNode extends DataGrid.DataGrid.DataGridNode {\n    createCells(element) {\n        element.removeChildren();\n        const td = this.createTDWithClass(\"center\" /* DataGrid.DataGrid.Align.CENTER */);\n        if (this.dataGrid) {\n            td.colSpan = this.dataGrid.visibleColumnsArray.length;\n        }\n        const code = document.createElement('span', { is: 'source-code' });\n        code.textContent = 'navigator.credentials.create()';\n        code.classList.add('code');\n        const message = i18n.i18n.getFormatLocalizedString(str_, UIStrings.noCredentialsTryCallingSFromYour, { PH1: code });\n        td.appendChild(message);\n        element.appendChild(td);\n    }\n}\n// We extrapolate this variable as otherwise git detects a private key, even though we\n// perform string manipulation. If we extract the name, then the regex doesn't match\n// and we can upload as expected.\nconst PRIVATE_NAME = 'PRIVATE';\nconst PRIVATE_KEY_HEADER = `-----BEGIN ${PRIVATE_NAME} KEY-----\n`;\nconst PRIVATE_KEY_FOOTER = `-----END ${PRIVATE_NAME} KEY-----`;\nconst PROTOCOL_AUTHENTICATOR_VALUES = {\n    Ctap2: \"ctap2\" /* Protocol.WebAuthn.AuthenticatorProtocol.Ctap2 */,\n    U2f: \"u2f\" /* Protocol.WebAuthn.AuthenticatorProtocol.U2f */,\n};\nexport class WebauthnPaneImpl extends UI.Widget.VBox {\n    #activeAuthId = null;\n    #hasBeenEnabled = false;\n    dataGrids = new Map();\n    #enableCheckbox;\n    #availableAuthenticatorSetting;\n    #model;\n    #authenticatorsView;\n    #topToolbarContainer;\n    #topToolbar;\n    #learnMoreView;\n    #newAuthenticatorSection;\n    #newAuthenticatorForm;\n    #protocolSelect;\n    #transportSelect;\n    #residentKeyCheckboxLabel;\n    residentKeyCheckbox;\n    #userVerificationCheckboxLabel;\n    #userVerificationCheckbox;\n    #largeBlobCheckboxLabel;\n    largeBlobCheckbox;\n    addAuthenticatorButton;\n    #isEnabling;\n    constructor() {\n        super(true);\n        this.element.setAttribute('jslog', `${VisualLogging.panel('webauthn').track({ resize: true })}`);\n        SDK.TargetManager.TargetManager.instance().observeModels(SDK.WebAuthnModel.WebAuthnModel, this, { scoped: true });\n        this.contentElement.classList.add('webauthn-pane');\n        this.#availableAuthenticatorSetting =\n            Common.Settings.Settings.instance().createSetting('webauthn-authenticators', []);\n        this.#createToolbar();\n        this.#authenticatorsView = this.contentElement.createChild('div', 'authenticators-view');\n        this.#createNewAuthenticatorSection();\n        this.#updateVisibility(false);\n    }\n    modelAdded(model) {\n        if (model.target() === model.target().outermostTarget()) {\n            this.#model = model;\n        }\n    }\n    modelRemoved(model) {\n        if (model.target() === model.target().outermostTarget()) {\n            this.#model = undefined;\n        }\n    }\n    async #loadInitialAuthenticators() {\n        let activeAuthenticatorId = null;\n        const availableAuthenticators = this.#availableAuthenticatorSetting.get();\n        for (const options of availableAuthenticators) {\n            if (!this.#model) {\n                continue;\n            }\n            const authenticatorId = await this.#model.addAuthenticator(options);\n            void this.#addAuthenticatorSection(authenticatorId, options);\n            // Update the authenticatorIds in the options.\n            options.authenticatorId = authenticatorId;\n            if (options.active) {\n                activeAuthenticatorId = authenticatorId;\n            }\n        }\n        // Update the settings to reflect the new authenticatorIds.\n        this.#availableAuthenticatorSetting.set(availableAuthenticators);\n        if (activeAuthenticatorId) {\n            void this.#setActiveAuthenticator(activeAuthenticatorId);\n        }\n    }\n    async ownerViewDisposed() {\n        if (this.#enableCheckbox) {\n            this.#enableCheckbox.setChecked(false);\n        }\n        await this.#setVirtualAuthEnvEnabled(false);\n    }\n    #createToolbar() {\n        this.#topToolbarContainer = this.contentElement.createChild('div', 'webauthn-toolbar-container');\n        this.#topToolbarContainer.setAttribute('jslog', `${VisualLogging.toolbar()}`);\n        this.#topToolbar = new UI.Toolbar.Toolbar('webauthn-toolbar', this.#topToolbarContainer);\n        const enableCheckboxTitle = i18nString(UIStrings.enableVirtualAuthenticator);\n        this.#enableCheckbox =\n            new UI.Toolbar.ToolbarCheckbox(enableCheckboxTitle, enableCheckboxTitle, this.#handleCheckboxToggle.bind(this));\n        this.#enableCheckbox.inputElement.setAttribute('jslog', `${VisualLogging.toggle('virtual-authenticators').track({ click: true })}`);\n        this.#topToolbar.appendToolbarItem(this.#enableCheckbox);\n    }\n    #createCredentialsDataGrid(authenticatorId) {\n        const columns = [\n            {\n                id: 'credentialId',\n                title: i18nString(UIStrings.id),\n                longText: true,\n                weight: 24,\n            },\n            {\n                id: 'isResidentCredential',\n                title: i18nString(UIStrings.isResident),\n                dataType: \"Boolean\" /* DataGrid.DataGrid.DataType.BOOLEAN */,\n                weight: 10,\n            },\n            {\n                id: 'rpId',\n                title: i18nString(UIStrings.rpId),\n            },\n            {\n                id: 'userHandle',\n                title: i18nString(UIStrings.userHandle),\n            },\n            {\n                id: 'signCount',\n                title: i18nString(UIStrings.signCount),\n            },\n            { id: 'actions', title: i18nString(UIStrings.actions) },\n        ];\n        const dataGridConfig = {\n            displayName: i18nString(UIStrings.credentials),\n            columns,\n            editCallback: undefined,\n            deleteCallback: undefined,\n            refreshCallback: undefined,\n        };\n        const dataGrid = new WebauthnDataGrid(dataGridConfig);\n        dataGrid.renderInline();\n        dataGrid.setStriped(true);\n        dataGrid.addEventListener(\"ExportCredential\" /* Events.EXPORT_CREDENTIAL */, this.#handleExportCredential, this);\n        dataGrid.addEventListener(\"RemoveCredential\" /* Events.REMOVE_CREDENTIAL */, this.#handleRemoveCredential.bind(this, authenticatorId));\n        dataGrid.rootNode().appendChild(new EmptyDataGridNode());\n        this.dataGrids.set(authenticatorId, dataGrid);\n        return dataGrid;\n    }\n    #handleExportCredential({ data: credential }) {\n        this.#exportCredential(credential);\n    }\n    #handleRemoveCredential(authenticatorId, { data: credential, }) {\n        void this.#removeCredential(authenticatorId, credential.credentialId);\n    }\n    #addCredential(authenticatorId, { data: event, }) {\n        const dataGrid = this.dataGrids.get(authenticatorId);\n        if (!dataGrid) {\n            return;\n        }\n        const emptyNode = dataGrid.rootNode().children.find(node => !Object.keys(node.data).length);\n        if (emptyNode) {\n            dataGrid.rootNode().removeChild(emptyNode);\n        }\n        const node = new DataGridNode(event.credential);\n        dataGrid.rootNode().appendChild(node);\n    }\n    #updateCredential(authenticatorId, { data: event, }) {\n        const dataGrid = this.dataGrids.get(authenticatorId);\n        if (!dataGrid) {\n            return;\n        }\n        const node = dataGrid.rootNode().children.find(node => node.data?.credentialId === event.credential.credentialId);\n        if (!node) {\n            return;\n        }\n        node.data = event.credential;\n    }\n    #deleteCredential(authenticatorId, { data: event, }) {\n        const dataGrid = this.dataGrids.get(authenticatorId);\n        if (!dataGrid) {\n            return;\n        }\n        const node = dataGrid.rootNode().children.find(node => node.data?.credentialId === event.credentialId);\n        if (!node) {\n            return;\n        }\n        node.remove();\n    }\n    async #setVirtualAuthEnvEnabled(enable) {\n        await this.#isEnabling;\n        this.#isEnabling = new Promise(async (resolve) => {\n            if (enable && !this.#hasBeenEnabled) {\n                // Ensures metric is only tracked once per session.\n                Host.userMetrics.actionTaken(Host.UserMetrics.Action.VirtualAuthenticatorEnvironmentEnabled);\n                this.#hasBeenEnabled = true;\n            }\n            if (this.#model) {\n                await this.#model.setVirtualAuthEnvEnabled(enable);\n            }\n            if (enable) {\n                await this.#loadInitialAuthenticators();\n            }\n            else {\n                this.#removeAuthenticatorSections();\n            }\n            this.#updateVisibility(enable);\n            this.#isEnabling = undefined;\n            resolve();\n        });\n    }\n    #updateVisibility(enabled) {\n        this.contentElement.classList.toggle('enabled', enabled);\n    }\n    #removeAuthenticatorSections() {\n        this.#authenticatorsView.innerHTML = '';\n        for (const dataGrid of this.dataGrids.values()) {\n            dataGrid.asWidget().detach();\n        }\n        this.dataGrids.clear();\n    }\n    #handleCheckboxToggle(e) {\n        void this.#setVirtualAuthEnvEnabled(e.target.checked);\n    }\n    #updateEnabledTransportOptions(enabledOptions) {\n        if (!this.#transportSelect) {\n            return;\n        }\n        const prevValue = this.#transportSelect.value;\n        this.#transportSelect.removeChildren();\n        for (const option of enabledOptions) {\n            this.#transportSelect.appendChild(UI.UIUtils.createOption(option, option, option));\n        }\n        // Make sure the currently selected value stays the same.\n        this.#transportSelect.value = prevValue;\n        // If the new set does not include the previous value.\n        if (!this.#transportSelect.value) {\n            // Select the first available value.\n            this.#transportSelect.selectedIndex = 0;\n        }\n    }\n    #updateNewAuthenticatorSectionOptions() {\n        if (!this.#protocolSelect || !this.residentKeyCheckbox || !this.#userVerificationCheckbox ||\n            !this.largeBlobCheckbox) {\n            return;\n        }\n        if (this.#protocolSelect.value === \"ctap2\" /* Protocol.WebAuthn.AuthenticatorProtocol.Ctap2 */) {\n            this.residentKeyCheckbox.disabled = false;\n            this.#userVerificationCheckbox.disabled = false;\n            this.largeBlobCheckbox.disabled = !this.residentKeyCheckbox.checked;\n            if (this.largeBlobCheckbox.disabled) {\n                this.largeBlobCheckbox.checked = false;\n            }\n            this.#updateEnabledTransportOptions([\n                \"usb\" /* Protocol.WebAuthn.AuthenticatorTransport.Usb */,\n                \"ble\" /* Protocol.WebAuthn.AuthenticatorTransport.Ble */,\n                \"nfc\" /* Protocol.WebAuthn.AuthenticatorTransport.Nfc */,\n                \"internal\" /* Protocol.WebAuthn.AuthenticatorTransport.Internal */,\n            ]);\n        }\n        else {\n            this.residentKeyCheckbox.checked = false;\n            this.residentKeyCheckbox.disabled = true;\n            this.#userVerificationCheckbox.checked = false;\n            this.#userVerificationCheckbox.disabled = true;\n            this.largeBlobCheckbox.checked = false;\n            this.largeBlobCheckbox.disabled = true;\n            this.#updateEnabledTransportOptions([\n                \"usb\" /* Protocol.WebAuthn.AuthenticatorTransport.Usb */,\n                \"ble\" /* Protocol.WebAuthn.AuthenticatorTransport.Ble */,\n                \"nfc\" /* Protocol.WebAuthn.AuthenticatorTransport.Nfc */,\n            ]);\n        }\n    }\n    #createNewAuthenticatorSection() {\n        const learnMoreLink = UI.XLink.XLink.create('https://developers.google.com/web/updates/2018/05/webauthn', i18nString(UIStrings.learnMore), undefined, undefined, 'learn-more');\n        this.#learnMoreView = this.contentElement.createChild('div', 'learn-more');\n        this.#learnMoreView.appendChild(UI.Fragment.html `\n  <div>\n  ${i18nString(UIStrings.useWebauthnForPhishingresistant)}<br /><br />\n  ${learnMoreLink}\n  </div>\n  `);\n        this.#newAuthenticatorSection = this.contentElement.createChild('div', 'new-authenticator-container');\n        const newAuthenticatorTitle = UI.UIUtils.createLabel(i18nString(UIStrings.newAuthenticator), 'new-authenticator-title');\n        this.#newAuthenticatorSection.appendChild(newAuthenticatorTitle);\n        this.#newAuthenticatorForm = this.#newAuthenticatorSection.createChild('div', 'new-authenticator-form');\n        this.#newAuthenticatorForm.setAttribute('jslog', `${VisualLogging.section('new-authenticator')}`);\n        const protocolGroup = this.#newAuthenticatorForm.createChild('div', 'authenticator-option');\n        const transportGroup = this.#newAuthenticatorForm.createChild('div', 'authenticator-option');\n        const residentKeyGroup = this.#newAuthenticatorForm.createChild('div', 'authenticator-option');\n        const userVerificationGroup = this.#newAuthenticatorForm.createChild('div', 'authenticator-option');\n        const largeBlobGroup = this.#newAuthenticatorForm.createChild('div', 'authenticator-option');\n        const addButtonGroup = this.#newAuthenticatorForm.createChild('div', 'authenticator-option');\n        const protocolSelectTitle = UI.UIUtils.createLabel(i18nString(UIStrings.protocol), 'authenticator-option-label');\n        protocolGroup.appendChild(protocolSelectTitle);\n        this.#protocolSelect = protocolGroup.createChild('select', 'chrome-select');\n        this.#protocolSelect.setAttribute('jslog', `${VisualLogging.dropDown('protocol').track({ change: true })}`);\n        UI.ARIAUtils.bindLabelToControl(protocolSelectTitle, this.#protocolSelect);\n        Object.values(PROTOCOL_AUTHENTICATOR_VALUES).sort().forEach((option) => {\n            if (this.#protocolSelect) {\n                this.#protocolSelect.appendChild(UI.UIUtils.createOption(option, option, option));\n            }\n        });\n        if (this.#protocolSelect) {\n            this.#protocolSelect.value = \"ctap2\" /* Protocol.WebAuthn.AuthenticatorProtocol.Ctap2 */;\n        }\n        const transportSelectTitle = UI.UIUtils.createLabel(i18nString(UIStrings.transport), 'authenticator-option-label');\n        transportGroup.appendChild(transportSelectTitle);\n        this.#transportSelect = transportGroup.createChild('select', 'chrome-select');\n        this.#transportSelect.setAttribute('jslog', `${VisualLogging.dropDown('transport').track({ change: true })}`);\n        UI.ARIAUtils.bindLabelToControl(transportSelectTitle, this.#transportSelect);\n        // transportSelect will be populated in updateNewAuthenticatorSectionOptions.\n        this.#residentKeyCheckboxLabel =\n            UI.UIUtils.CheckboxLabel.create(i18nString(UIStrings.supportsResidentKeys), false, undefined, 'resident-key');\n        this.#residentKeyCheckboxLabel.textElement.classList.add('authenticator-option-label');\n        residentKeyGroup.appendChild(this.#residentKeyCheckboxLabel.textElement);\n        this.residentKeyCheckbox = this.#residentKeyCheckboxLabel.checkboxElement;\n        this.residentKeyCheckbox.checked = false;\n        this.residentKeyCheckbox.classList.add('authenticator-option-checkbox');\n        residentKeyGroup.appendChild(this.#residentKeyCheckboxLabel);\n        this.#userVerificationCheckboxLabel = UI.UIUtils.CheckboxLabel.create(i18nString(UIStrings.supportsUserVerification), false, undefined, 'user-verification');\n        this.#userVerificationCheckboxLabel.textElement.classList.add('authenticator-option-label');\n        userVerificationGroup.appendChild(this.#userVerificationCheckboxLabel.textElement);\n        this.#userVerificationCheckbox = this.#userVerificationCheckboxLabel.checkboxElement;\n        this.#userVerificationCheckbox.checked = false;\n        this.#userVerificationCheckbox.classList.add('authenticator-option-checkbox');\n        userVerificationGroup.appendChild(this.#userVerificationCheckboxLabel);\n        this.#largeBlobCheckboxLabel =\n            UI.UIUtils.CheckboxLabel.create(i18nString(UIStrings.supportsLargeBlob), false, undefined, 'large-blob');\n        this.#largeBlobCheckboxLabel.textElement.classList.add('authenticator-option-label');\n        largeBlobGroup.appendChild(this.#largeBlobCheckboxLabel.textElement);\n        this.largeBlobCheckbox = this.#largeBlobCheckboxLabel.checkboxElement;\n        this.largeBlobCheckbox.checked = false;\n        this.largeBlobCheckbox.classList.add('authenticator-option-checkbox');\n        this.largeBlobCheckbox.name = 'large-blob-checkbox';\n        largeBlobGroup.appendChild(this.#largeBlobCheckboxLabel);\n        this.addAuthenticatorButton = UI.UIUtils.createTextButton(i18nString(UIStrings.add), this.#handleAddAuthenticatorButton.bind(this), { jslogContext: 'webauthn.add-authenticator' });\n        addButtonGroup.createChild('div', 'authenticator-option-label');\n        addButtonGroup.appendChild(this.addAuthenticatorButton);\n        const addAuthenticatorTitle = UI.UIUtils.createLabel(i18nString(UIStrings.addAuthenticator), '');\n        UI.ARIAUtils.bindLabelToControl(addAuthenticatorTitle, this.addAuthenticatorButton);\n        this.#updateNewAuthenticatorSectionOptions();\n        if (this.#protocolSelect) {\n            this.#protocolSelect.addEventListener('change', this.#updateNewAuthenticatorSectionOptions.bind(this));\n        }\n        if (this.residentKeyCheckbox) {\n            this.residentKeyCheckbox.addEventListener('change', this.#updateNewAuthenticatorSectionOptions.bind(this));\n        }\n    }\n    async #handleAddAuthenticatorButton() {\n        const options = this.#createOptionsFromCurrentInputs();\n        if (this.#model) {\n            const authenticatorId = await this.#model.addAuthenticator(options);\n            const availableAuthenticators = this.#availableAuthenticatorSetting.get();\n            availableAuthenticators.push({ authenticatorId, active: true, ...options });\n            this.#availableAuthenticatorSetting.set(availableAuthenticators.map(a => ({ ...a, active: a.authenticatorId === authenticatorId })));\n            const section = await this.#addAuthenticatorSection(authenticatorId, options);\n            const mediaQueryList = window.matchMedia('(prefers-reduced-motion: reduce)');\n            const prefersReducedMotion = mediaQueryList.matches;\n            section.scrollIntoView({ block: 'start', behavior: prefersReducedMotion ? 'auto' : 'smooth' });\n        }\n    }\n    async #addAuthenticatorSection(authenticatorId, options) {\n        const section = document.createElement('div');\n        section.classList.add('authenticator-section');\n        section.setAttribute('data-authenticator-id', authenticatorId);\n        section.setAttribute('jslog', `${VisualLogging.section('authenticator')}`);\n        this.#authenticatorsView.appendChild(section);\n        const headerElement = section.createChild('div', 'authenticator-section-header');\n        const titleElement = headerElement.createChild('div', 'authenticator-section-title');\n        UI.ARIAUtils.markAsHeading(titleElement, 2);\n        await this.#clearActiveAuthenticator();\n        const activeButtonContainer = headerElement.createChild('div', 'active-button-container');\n        const activeLabel = UI.UIUtils.createRadioLabel(`active-authenticator-${authenticatorId}`, i18nString(UIStrings.active));\n        activeLabel.radioElement.addEventListener('change', this.#setActiveAuthenticator.bind(this, authenticatorId));\n        activeButtonContainer.appendChild(activeLabel);\n        activeLabel.radioElement.checked = true;\n        this.#activeAuthId = authenticatorId; // Newly added authenticator is automatically set as active.\n        const removeButton = headerElement.createChild('button', 'text-button');\n        removeButton.textContent = i18nString(UIStrings.remove);\n        removeButton.addEventListener('click', this.#removeAuthenticator.bind(this, authenticatorId));\n        removeButton.setAttribute('jslog', `${VisualLogging.action('webauthn.remove-authenticator').track({ click: true })}`);\n        const toolbar = new UI.Toolbar.Toolbar('edit-name-toolbar', titleElement);\n        const editName = new UI.Toolbar.ToolbarButton(i18nString(UIStrings.editName), 'edit', undefined, 'edit-name');\n        const saveName = new UI.Toolbar.ToolbarButton(i18nString(UIStrings.saveName), 'checkmark', undefined, 'save-name');\n        saveName.setVisible(false);\n        const nameField = titleElement.createChild('input', 'authenticator-name-field');\n        nameField.placeholder = i18nString(UIStrings.enterNewName);\n        nameField.disabled = true;\n        nameField.setAttribute('jslog', `${VisualLogging.textField('name').track({ keydown: 'Enter', change: true })}`);\n        const userFriendlyName = authenticatorId.slice(-5); // User friendly name defaults to last 5 chars of UUID.\n        nameField.value = i18nString(UIStrings.authenticatorS, { PH1: userFriendlyName });\n        this.#updateActiveLabelTitle(activeLabel, nameField.value);\n        editName.addEventListener(\"Click\" /* UI.Toolbar.ToolbarButton.Events.CLICK */, () => this.#handleEditNameButton(titleElement, nameField, editName, saveName));\n        saveName.addEventListener(\"Click\" /* UI.Toolbar.ToolbarButton.Events.CLICK */, () => this.#handleSaveNameButton(titleElement, nameField, editName, saveName, activeLabel));\n        nameField.addEventListener('focusout', () => this.#handleSaveNameButton(titleElement, nameField, editName, saveName, activeLabel));\n        nameField.addEventListener('keydown', (event) => {\n            if (event.key === 'Enter') {\n                this.#handleSaveNameButton(titleElement, nameField, editName, saveName, activeLabel);\n            }\n        });\n        toolbar.appendToolbarItem(editName);\n        toolbar.appendToolbarItem(saveName);\n        this.#createAuthenticatorFields(section, authenticatorId, options);\n        const label = document.createElement('div');\n        label.classList.add('credentials-title');\n        label.textContent = i18nString(UIStrings.credentials);\n        section.appendChild(label);\n        const dataGrid = this.#createCredentialsDataGrid(authenticatorId);\n        dataGrid.asWidget().show(section);\n        if (this.#model) {\n            this.#model.addEventListener(\"CredentialAdded\" /* SDK.WebAuthnModel.Events.CREDENTIAL_ADDED */, this.#addCredential.bind(this, authenticatorId));\n            this.#model.addEventListener(\"CredentialAsserted\" /* SDK.WebAuthnModel.Events.CREDENTIAL_ASSERTED */, this.#updateCredential.bind(this, authenticatorId));\n            this.#model.addEventListener(\"CredentialUpdated\" /* SDK.WebAuthnModel.Events.CREDENTIAL_UPDATED */, this.#updateCredential.bind(this, authenticatorId));\n            this.#model.addEventListener(\"CredentialDeleted\" /* SDK.WebAuthnModel.Events.CREDENTIAL_DELETED */, this.#deleteCredential.bind(this, authenticatorId));\n        }\n        return section;\n    }\n    #exportCredential(credential) {\n        let pem = PRIVATE_KEY_HEADER;\n        for (let i = 0; i < credential.privateKey.length; i += 64) {\n            pem += credential.privateKey.substring(i, i + 64) + '\\n';\n        }\n        pem += PRIVATE_KEY_FOOTER;\n        const link = document.createElement('a');\n        link.download = i18nString(UIStrings.privateKeypem);\n        link.href = 'data:application/x-pem-file,' + encodeURIComponent(pem);\n        link.click();\n    }\n    async #removeCredential(authenticatorId, credentialId) {\n        const dataGrid = this.dataGrids.get(authenticatorId);\n        if (!dataGrid) {\n            return;\n        }\n        // @ts-ignore dataGrid node type is indeterminate.\n        dataGrid.rootNode()\n            .children.find((n) => n.data.credentialId === credentialId)\n            .remove();\n        if (!dataGrid.rootNode().children.length) {\n            dataGrid.rootNode().appendChild(new EmptyDataGridNode());\n        }\n        if (this.#model) {\n            await this.#model.removeCredential(authenticatorId, credentialId);\n        }\n    }\n    /**\n     * Creates the fields describing the authenticator in the front end.\n     */\n    #createAuthenticatorFields(section, authenticatorId, options) {\n        const sectionFields = section.createChild('div', 'authenticator-fields');\n        const uuidField = sectionFields.createChild('div', 'authenticator-field');\n        const protocolField = sectionFields.createChild('div', 'authenticator-field');\n        const transportField = sectionFields.createChild('div', 'authenticator-field');\n        const srkField = sectionFields.createChild('div', 'authenticator-field');\n        const slbField = sectionFields.createChild('div', 'authenticator-field');\n        const suvField = sectionFields.createChild('div', 'authenticator-field');\n        uuidField.appendChild(UI.UIUtils.createLabel(i18nString(UIStrings.uuid), 'authenticator-option-label'));\n        protocolField.appendChild(UI.UIUtils.createLabel(i18nString(UIStrings.protocol), 'authenticator-option-label'));\n        transportField.appendChild(UI.UIUtils.createLabel(i18nString(UIStrings.transport), 'authenticator-option-label'));\n        srkField.appendChild(UI.UIUtils.createLabel(i18nString(UIStrings.supportsResidentKeys), 'authenticator-option-label'));\n        slbField.appendChild(UI.UIUtils.createLabel(i18nString(UIStrings.supportsLargeBlob), 'authenticator-option-label'));\n        suvField.appendChild(UI.UIUtils.createLabel(i18nString(UIStrings.supportsUserVerification), 'authenticator-option-label'));\n        uuidField.createChild('div', 'authenticator-field-value').textContent = authenticatorId;\n        protocolField.createChild('div', 'authenticator-field-value').textContent = options.protocol;\n        transportField.createChild('div', 'authenticator-field-value').textContent = options.transport;\n        srkField.createChild('div', 'authenticator-field-value').textContent =\n            options.hasResidentKey ? i18nString(UIStrings.yes) : i18nString(UIStrings.no);\n        slbField.createChild('div', 'authenticator-field-value').textContent =\n            options.hasLargeBlob ? i18nString(UIStrings.yes) : i18nString(UIStrings.no);\n        suvField.createChild('div', 'authenticator-field-value').textContent =\n            options.hasUserVerification ? i18nString(UIStrings.yes) : i18nString(UIStrings.no);\n    }\n    #handleEditNameButton(titleElement, nameField, editName, saveName) {\n        nameField.disabled = false;\n        titleElement.classList.add('editing-name');\n        nameField.focus();\n        saveName.setVisible(true);\n        editName.setVisible(false);\n    }\n    #handleSaveNameButton(titleElement, nameField, editName, saveName, activeLabel) {\n        const name = nameField.value;\n        if (!name) {\n            return;\n        }\n        nameField.disabled = true;\n        titleElement.classList.remove('editing-name');\n        editName.setVisible(true);\n        saveName.setVisible(false);\n        this.#updateActiveLabelTitle(activeLabel, name);\n    }\n    #updateActiveLabelTitle(activeLabel, authenticatorName) {\n        UI.Tooltip.Tooltip.install(activeLabel.radioElement, i18nString(UIStrings.setSAsTheActiveAuthenticator, { PH1: authenticatorName }));\n    }\n    /**\n     * Removes both the authenticator and its respective UI element.\n     */\n    #removeAuthenticator(authenticatorId) {\n        if (this.#authenticatorsView) {\n            const child = this.#authenticatorsView.querySelector(`[data-authenticator-id=${CSS.escape(authenticatorId)}]`);\n            if (child) {\n                child.remove();\n            }\n        }\n        const dataGrid = this.dataGrids.get(authenticatorId);\n        if (dataGrid) {\n            dataGrid.asWidget().detach();\n            this.dataGrids.delete(authenticatorId);\n        }\n        if (this.#model) {\n            void this.#model.removeAuthenticator(authenticatorId);\n        }\n        // Update available authenticator setting.\n        const prevAvailableAuthenticators = this.#availableAuthenticatorSetting.get();\n        const newAvailableAuthenticators = prevAvailableAuthenticators.filter(a => a.authenticatorId !== authenticatorId);\n        this.#availableAuthenticatorSetting.set(newAvailableAuthenticators);\n        if (this.#activeAuthId === authenticatorId) {\n            const availableAuthenticatorIds = Array.from(this.dataGrids.keys());\n            if (availableAuthenticatorIds.length) {\n                void this.#setActiveAuthenticator(availableAuthenticatorIds[0]);\n            }\n            else {\n                this.#activeAuthId = null;\n            }\n        }\n    }\n    #createOptionsFromCurrentInputs() {\n        // TODO(crbug.com/1034663): Add optionality for isUserVerified param.\n        if (!this.#protocolSelect || !this.#transportSelect || !this.residentKeyCheckbox ||\n            !this.#userVerificationCheckbox || !this.largeBlobCheckbox) {\n            throw new Error('Unable to create options from current inputs');\n        }\n        return {\n            protocol: this.#protocolSelect.options[this.#protocolSelect.selectedIndex].value,\n            ctap2Version: \"ctap2_1\" /* Protocol.WebAuthn.Ctap2Version.Ctap2_1 */,\n            transport: this.#transportSelect.options[this.#transportSelect.selectedIndex].value,\n            hasResidentKey: this.residentKeyCheckbox.checked,\n            hasUserVerification: this.#userVerificationCheckbox.checked,\n            hasLargeBlob: this.largeBlobCheckbox.checked,\n            automaticPresenceSimulation: true,\n            isUserVerified: true,\n        };\n    }\n    /**\n     * Sets the given authenticator as active.\n     * Note that a newly added authenticator will automatically be set as active.\n     */\n    async #setActiveAuthenticator(authenticatorId) {\n        await this.#clearActiveAuthenticator();\n        if (this.#model) {\n            await this.#model.setAutomaticPresenceSimulation(authenticatorId, true);\n        }\n        this.#activeAuthId = authenticatorId;\n        const prevAvailableAuthenticators = this.#availableAuthenticatorSetting.get();\n        const newAvailableAuthenticators = prevAvailableAuthenticators.map(a => ({ ...a, active: a.authenticatorId === authenticatorId }));\n        this.#availableAuthenticatorSetting.set(newAvailableAuthenticators);\n        this.#updateActiveButtons();\n    }\n    #updateActiveButtons() {\n        const authenticators = this.#authenticatorsView.getElementsByClassName('authenticator-section');\n        Array.from(authenticators).forEach((authenticator) => {\n            const button = authenticator.querySelector('input.dt-radio-button');\n            if (!button) {\n                return;\n            }\n            button.checked = authenticator.dataset.authenticatorId === this.#activeAuthId;\n        });\n    }\n    async #clearActiveAuthenticator() {\n        if (this.#activeAuthId && this.#model) {\n            await this.#model.setAutomaticPresenceSimulation(this.#activeAuthId, false);\n        }\n        this.#activeAuthId = null;\n        this.#updateActiveButtons();\n    }\n    wasShown() {\n        super.wasShown();\n        this.registerCSSFiles([webauthnPaneStyles]);\n    }\n}\n//# sourceMappingURL=WebauthnPane.js.map"],"names":["styles","UIStrings","str_","i18n.i18n.registerUIStrings","i18nString","i18n.i18n.getLocalizedString","DataGridNode","DataGrid.DataGrid.DataGridNode","credential","columnId","cell","UI.Tooltip.Tooltip","exportButton","UI.UIUtils.createTextButton","removeButton","WebauthnDataGridBase","DataGrid.DataGrid.DataGridImpl","WebauthnDataGrid","Common.ObjectWrapper.eventMixin","EmptyDataGridNode","element","td","code","message","i18n.i18n.getFormatLocalizedString","PRIVATE_NAME","PRIVATE_KEY_HEADER","PRIVATE_KEY_FOOTER","PROTOCOL_AUTHENTICATOR_VALUES","WebauthnPaneImpl","UI.Widget.VBox","#activeAuthId","#hasBeenEnabled","#enableCheckbox","#availableAuthenticatorSetting","#model","#authenticatorsView","#topToolbarContainer","#topToolbar","#learnMoreView","#newAuthenticatorSection","#newAuthenticatorForm","#protocolSelect","#transportSelect","#residentKeyCheckboxLabel","#userVerificationCheckboxLabel","#userVerificationCheckbox","#largeBlobCheckboxLabel","#isEnabling","VisualLogging.panel","SDK.TargetManager.TargetManager","SDK.WebAuthnModel.WebAuthnModel","Common.Settings.Settings","#createToolbar","#createNewAuthenticatorSection","#updateVisibility","model","#loadInitialAuthenticators","activeAuthenticatorId","availableAuthenticators","options","authenticatorId","#addAuthenticatorSection","#setActiveAuthenticator","#setVirtualAuthEnvEnabled","VisualLogging.toolbar","UI.Toolbar.Toolbar","enableCheckboxTitle","UI.Toolbar.ToolbarCheckbox","#handleCheckboxToggle","VisualLogging.toggle","#createCredentialsDataGrid","columns","dataGridConfig","dataGrid","#handleExportCredential","#handleRemoveCredential","#exportCredential","#removeCredential","#addCredential","event","emptyNode","node","#updateCredential","#deleteCredential","enable","resolve","Host.userMetrics","Host.UserMetrics.Action","#removeAuthenticatorSections","enabled","e","#updateEnabledTransportOptions","enabledOptions","prevValue","option","UI.UIUtils.createOption","#updateNewAuthenticatorSectionOptions","learnMoreLink","UI.XLink.XLink","UI.Fragment.html","newAuthenticatorTitle","UI.UIUtils.createLabel","VisualLogging.section","protocolGroup","transportGroup","residentKeyGroup","userVerificationGroup","largeBlobGroup","addButtonGroup","protocolSelectTitle","VisualLogging.dropDown","UI.ARIAUtils.bindLabelToControl","transportSelectTitle","UI.UIUtils.CheckboxLabel","#handleAddAuthenticatorButton","addAuthenticatorTitle","#createOptionsFromCurrentInputs","a","section","prefersReducedMotion","headerElement","titleElement","UI.ARIAUtils.markAsHeading","#clearActiveAuthenticator","activeButtonContainer","activeLabel","UI.UIUtils.createRadioLabel","#removeAuthenticator","VisualLogging.action","toolbar","editName","UI.Toolbar.ToolbarButton","saveName","nameField","VisualLogging.textField","userFriendlyName","#updateActiveLabelTitle","#handleEditNameButton","#handleSaveNameButton","#createAuthenticatorFields","label","pem","i","link","credentialId","n","sectionFields","uuidField","protocolField","transportField","srkField","slbField","suvField","name","authenticatorName","child","newAvailableAuthenticators","availableAuthenticatorIds","#updateActiveButtons","authenticators","authenticator","button","webauthnPaneStyles"],"mappings":"+RAKA,MAAMA,EAAS,IAAI,cACnBA,EAAO,YACP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,CAuLC,ECnLD,MAAMC,EAAY,CAId,OAAQ,SAIR,OAAQ,SAKR,iCAAkC,uDAIlC,2BAA4B,2CAI5B,GAAI,KAIJ,WAAY,cAIZ,KAAM,QAIN,WAAY,cAKZ,UAAW,kBAIX,QAAS,UAIT,YAAa,cAIb,gCAAiC,qDAIjC,UAAW,aAIX,iBAAkB,oBAIlB,SAAU,WAIV,UAAW,YAIX,qBAAsB,yBAMtB,kBAAmB,sBAInB,IAAK,MAIL,iBAAkB,oBAIlB,OAAQ,SAIR,SAAU,YAIV,aAAc,iBAId,SAAU,YAKV,eAAgB,sBAIhB,cAAe,kBAIf,KAAM,OAIN,yBAA0B,6BAI1B,IAAK,MAIL,GAAI,KAKJ,6BAA8B,uCAClC,EACMC,EAAOC,EAA4B,kCAAmCF,CAAS,EAC/EG,EAAaC,EAA6B,KAAK,OAAWH,CAAI,EACpE,MAAMI,WAAqBC,CAA+B,CACtD,WACA,YAAYC,EAAY,CACpB,MAAMA,CAAU,EAChB,KAAK,WAAaA,CACrB,CACD,gBAAiB,CACb,MAAO,GACV,CACD,WAAWC,EAAU,CACjB,MAAMC,EAAO,MAAM,WAAWD,CAAQ,EAEtC,GADAE,EAAmB,QAAQD,EAAMA,EAAK,aAAe,EAAE,EACnDD,IAAa,UACb,OAAOC,EAEX,MAAME,EAAeC,EAA4BT,EAAWH,EAAU,MAAM,EAAG,IAAM,CAC7E,KAAK,UACL,KAAK,SAAS,yBAAyB,mBAAmD,KAAK,UAAU,CAEzH,EAAW,CAAE,aAAc,4BAA4B,CAAE,EACjDS,EAAK,YAAYE,CAAY,EAC7B,MAAME,EAAeD,EAA4BT,EAAWH,EAAU,MAAM,EAAG,IAAM,CAC7E,KAAK,UACL,KAAK,SAAS,yBAAyB,mBAAmD,KAAK,UAAU,CAEzH,EAAW,CAAE,aAAc,4BAA4B,CAAE,EACjD,OAAAS,EAAK,YAAYI,CAAY,EACtBJ,CACV,CACL,CACA,MAAMK,WAA6BC,CAA+B,CAClE,CACA,MAAMC,WAAyBC,EAAgCH,EAAoB,CAAE,CACrF,CACA,MAAMI,UAA0BZ,CAA+B,CAC3D,YAAYa,EAAS,CACjBA,EAAQ,eAAc,EACtB,MAAMC,EAAK,KAAK,kBAAkB,QAAQ,EACtC,KAAK,WACLA,EAAG,QAAU,KAAK,SAAS,oBAAoB,QAEnD,MAAMC,EAAO,SAAS,cAAc,OAAQ,CAAE,GAAI,aAAa,CAAE,EACjEA,EAAK,YAAc,iCACnBA,EAAK,UAAU,IAAI,MAAM,EACzB,MAAMC,EAAUC,EAAmCtB,EAAMD,EAAU,iCAAkC,CAAE,IAAKqB,CAAI,CAAE,EAClHD,EAAG,YAAYE,CAAO,EACtBH,EAAQ,YAAYC,CAAE,CACzB,CACL,CAIA,MAAMI,EAAe,UACfC,GAAqB,cAAcD,CAAY;AAAA,EAE/CE,GAAqB,YAAYF,CAAY,YAC7CG,GAAgC,CAClC,MAAO,QACP,IAAK,KACT,EACO,MAAMC,WAAyBC,CAAe,CACjDC,GAAgB,KAChBC,GAAkB,GAClB,UAAY,IAAI,IAChBC,GACAC,GACAC,GACAC,GACAC,GACAC,GACAC,GACAC,GACAC,GACAC,GACAC,GACAC,GACA,oBACAC,GACAC,GACAC,GACA,kBACA,uBACAC,GACA,aAAc,CACV,MAAM,EAAI,EACV,KAAK,QAAQ,aAAa,QAAS,GAAGC,EAAoB,UAAU,EAAE,MAAM,CAAE,OAAQ,EAAI,CAAE,CAAC,EAAE,EAC/FC,EAAgC,SAAU,EAAC,cAAcC,EAAiC,KAAM,CAAE,OAAQ,EAAI,CAAE,EAChH,KAAK,eAAe,UAAU,IAAI,eAAe,EACjD,KAAKjB,GACDkB,EAAyB,SAAU,EAAC,cAAc,0BAA2B,CAAE,CAAA,EACnF,KAAKC,GAAc,EACnB,KAAKjB,GAAsB,KAAK,eAAe,YAAY,MAAO,qBAAqB,EACvF,KAAKkB,GAA8B,EACnC,KAAKC,GAAkB,EAAK,CAC/B,CACD,WAAWC,EAAO,CACVA,EAAM,OAAQ,IAAKA,EAAM,OAAM,EAAG,oBAClC,KAAKrB,GAASqB,EAErB,CACD,aAAaA,EAAO,CACZA,EAAM,OAAQ,IAAKA,EAAM,OAAM,EAAG,oBAClC,KAAKrB,GAAS,OAErB,CACD,KAAMsB,IAA6B,CAC/B,IAAIC,EAAwB,KAC5B,MAAMC,EAA0B,KAAKzB,GAA+B,IAAG,EACvE,UAAW0B,KAAWD,EAAyB,CAC3C,GAAI,CAAC,KAAKxB,GACN,SAEJ,MAAM0B,EAAkB,MAAM,KAAK1B,GAAO,iBAAiByB,CAAO,EAC7D,KAAKE,GAAyBD,EAAiBD,CAAO,EAE3DA,EAAQ,gBAAkBC,EACtBD,EAAQ,SACRF,EAAwBG,EAE/B,CAED,KAAK3B,GAA+B,IAAIyB,CAAuB,EAC3DD,GACK,KAAKK,GAAwBL,CAAqB,CAE9D,CACD,MAAM,mBAAoB,CAClB,KAAKzB,IACL,KAAKA,GAAgB,WAAW,EAAK,EAEzC,MAAM,KAAK+B,GAA0B,EAAK,CAC7C,CACDX,IAAiB,CACb,KAAKhB,GAAuB,KAAK,eAAe,YAAY,MAAO,4BAA4B,EAC/F,KAAKA,GAAqB,aAAa,QAAS,GAAG4B,EAAqB,CAAE,EAAE,EAC5E,KAAK3B,GAAc,IAAI4B,EAAmB,mBAAoB,KAAK7B,EAAoB,EACvF,MAAM8B,EAAsB/D,EAAWH,EAAU,0BAA0B,EAC3E,KAAKgC,GACD,IAAImC,EAA2BD,EAAqBA,EAAqB,KAAKE,GAAsB,KAAK,IAAI,CAAC,EAClH,KAAKpC,GAAgB,aAAa,aAAa,QAAS,GAAGqC,EAAqB,wBAAwB,EAAE,MAAM,CAAE,MAAO,EAAI,CAAE,CAAC,EAAE,EAClI,KAAKhC,GAAY,kBAAkB,KAAKL,EAAe,CAC1D,CACDsC,GAA2BV,EAAiB,CACxC,MAAMW,EAAU,CACZ,CACI,GAAI,eACJ,MAAOpE,EAAWH,EAAU,EAAE,EAC9B,SAAU,GACV,OAAQ,EACX,EACD,CACI,GAAI,uBACJ,MAAOG,EAAWH,EAAU,UAAU,EACtC,SAAU,UACV,OAAQ,EACX,EACD,CACI,GAAI,OACJ,MAAOG,EAAWH,EAAU,IAAI,CACnC,EACD,CACI,GAAI,aACJ,MAAOG,EAAWH,EAAU,UAAU,CACzC,EACD,CACI,GAAI,YACJ,MAAOG,EAAWH,EAAU,SAAS,CACxC,EACD,CAAE,GAAI,UAAW,MAAOG,EAAWH,EAAU,OAAO,CAAG,CACnE,EACcwE,EAAiB,CACnB,YAAarE,EAAWH,EAAU,WAAW,EAC7C,QAAAuE,EACA,aAAc,OACd,eAAgB,OAChB,gBAAiB,MAC7B,EACcE,EAAW,IAAIzD,GAAiBwD,CAAc,EACpD,OAAAC,EAAS,aAAY,EACrBA,EAAS,WAAW,EAAI,EACxBA,EAAS,iBAAiB,mBAAmD,KAAKC,GAAyB,IAAI,EAC/GD,EAAS,iBAAiB,mBAAmD,KAAKE,GAAwB,KAAK,KAAMf,CAAe,CAAC,EACrIa,EAAS,SAAU,EAAC,YAAY,IAAIvD,CAAmB,EACvD,KAAK,UAAU,IAAI0C,EAAiBa,CAAQ,EACrCA,CACV,CACDC,GAAwB,CAAE,KAAMnE,GAAc,CAC1C,KAAKqE,GAAkBrE,CAAU,CACpC,CACDoE,GAAwBf,EAAiB,CAAE,KAAMrD,CAAU,EAAK,CACvD,KAAKsE,GAAkBjB,EAAiBrD,EAAW,YAAY,CACvE,CACDuE,GAAelB,EAAiB,CAAE,KAAMmB,CAAK,EAAK,CAC9C,MAAMN,EAAW,KAAK,UAAU,IAAIb,CAAe,EACnD,GAAI,CAACa,EACD,OAEJ,MAAMO,EAAYP,EAAS,SAAQ,EAAG,SAAS,KAAKQ,GAAQ,CAAC,OAAO,KAAKA,EAAK,IAAI,EAAE,MAAM,EACtFD,GACAP,EAAS,SAAQ,EAAG,YAAYO,CAAS,EAE7C,MAAMC,EAAO,IAAI5E,GAAa0E,EAAM,UAAU,EAC9CN,EAAS,SAAQ,EAAG,YAAYQ,CAAI,CACvC,CACDC,GAAkBtB,EAAiB,CAAE,KAAMmB,CAAK,EAAK,CACjD,MAAMN,EAAW,KAAK,UAAU,IAAIb,CAAe,EACnD,GAAI,CAACa,EACD,OAEJ,MAAMQ,EAAOR,EAAS,SAAQ,EAAG,SAAS,KAAKQ,GAAQA,EAAK,MAAM,eAAiBF,EAAM,WAAW,YAAY,EAC3GE,IAGLA,EAAK,KAAOF,EAAM,WACrB,CACDI,GAAkBvB,EAAiB,CAAE,KAAMmB,CAAK,EAAK,CACjD,MAAMN,EAAW,KAAK,UAAU,IAAIb,CAAe,EACnD,GAAI,CAACa,EACD,OAEJ,MAAMQ,EAAOR,EAAS,SAAU,EAAC,SAAS,KAAKQ,GAAQA,EAAK,MAAM,eAAiBF,EAAM,YAAY,EAChGE,GAGLA,EAAK,OAAM,CACd,CACD,KAAMlB,GAA0BqB,EAAQ,CACpC,MAAM,KAAKrC,GACX,KAAKA,GAAc,IAAI,QAAQ,MAAOsC,GAAY,CAC1CD,GAAU,CAAC,KAAKrD,KAEhBuD,EAAiB,YAAYC,EAAwB,sCAAsC,EAC3F,KAAKxD,GAAkB,IAEvB,KAAKG,IACL,MAAM,KAAKA,GAAO,yBAAyBkD,CAAM,EAEjDA,EACA,MAAM,KAAK5B,KAGX,KAAKgC,GAA4B,EAErC,KAAKlC,GAAkB8B,CAAM,EAC7B,KAAKrC,GAAc,OACnBsC,GACZ,CAAS,CACJ,CACD/B,GAAkBmC,EAAS,CACvB,KAAK,eAAe,UAAU,OAAO,UAAWA,CAAO,CAC1D,CACDD,IAA+B,CAC3B,KAAKrD,GAAoB,UAAY,GACrC,UAAWsC,KAAY,KAAK,UAAU,OAAM,EACxCA,EAAS,WAAW,SAExB,KAAK,UAAU,OAClB,CACDL,GAAsBsB,EAAG,CAChB,KAAK3B,GAA0B2B,EAAE,OAAO,OAAO,CACvD,CACDC,GAA+BC,EAAgB,CAC3C,GAAI,CAAC,KAAKlD,GACN,OAEJ,MAAMmD,EAAY,KAAKnD,GAAiB,MACxC,KAAKA,GAAiB,iBACtB,UAAWoD,KAAUF,EACjB,KAAKlD,GAAiB,YAAYqD,EAAwBD,EAAQA,EAAQA,CAAM,CAAC,EAGrF,KAAKpD,GAAiB,MAAQmD,EAEzB,KAAKnD,GAAiB,QAEvB,KAAKA,GAAiB,cAAgB,EAE7C,CACDsD,IAAwC,CAChC,CAAC,KAAKvD,IAAmB,CAAC,KAAK,qBAAuB,CAAC,KAAKI,IAC5D,CAAC,KAAK,oBAGN,KAAKJ,GAAgB,QAAU,SAC/B,KAAK,oBAAoB,SAAW,GACpC,KAAKI,GAA0B,SAAW,GAC1C,KAAK,kBAAkB,SAAW,CAAC,KAAK,oBAAoB,QACxD,KAAK,kBAAkB,WACvB,KAAK,kBAAkB,QAAU,IAErC,KAAK8C,GAA+B,CAChC,MACA,MACA,MACA,UAChB,CAAa,IAGD,KAAK,oBAAoB,QAAU,GACnC,KAAK,oBAAoB,SAAW,GACpC,KAAK9C,GAA0B,QAAU,GACzC,KAAKA,GAA0B,SAAW,GAC1C,KAAK,kBAAkB,QAAU,GACjC,KAAK,kBAAkB,SAAW,GAClC,KAAK8C,GAA+B,CAChC,MACA,MACA,KAChB,CAAa,GAER,CACDtC,IAAiC,CAC7B,MAAM4C,EAAgBC,EAAe,OAAO,6DAA8D/F,EAAWH,EAAU,SAAS,EAAG,OAAW,OAAW,YAAY,EAC7K,KAAKsC,GAAiB,KAAK,eAAe,YAAY,MAAO,YAAY,EACzE,KAAKA,GAAe,YAAY6D;AAAAA;AAAAA,IAEpChG,EAAWH,EAAU,+BAA+B,CAAC;AAAA,IACrDiG,CAAa;AAAA;AAAA,GAEd,EACK,KAAK1D,GAA2B,KAAK,eAAe,YAAY,MAAO,6BAA6B,EACpG,MAAM6D,EAAwBC,EAAuBlG,EAAWH,EAAU,gBAAgB,EAAG,yBAAyB,EACtH,KAAKuC,GAAyB,YAAY6D,CAAqB,EAC/D,KAAK5D,GAAwB,KAAKD,GAAyB,YAAY,MAAO,wBAAwB,EACtG,KAAKC,GAAsB,aAAa,QAAS,GAAG8D,EAAsB,mBAAmB,CAAC,EAAE,EAChG,MAAMC,EAAgB,KAAK/D,GAAsB,YAAY,MAAO,sBAAsB,EACpFgE,EAAiB,KAAKhE,GAAsB,YAAY,MAAO,sBAAsB,EACrFiE,EAAmB,KAAKjE,GAAsB,YAAY,MAAO,sBAAsB,EACvFkE,EAAwB,KAAKlE,GAAsB,YAAY,MAAO,sBAAsB,EAC5FmE,EAAiB,KAAKnE,GAAsB,YAAY,MAAO,sBAAsB,EACrFoE,EAAiB,KAAKpE,GAAsB,YAAY,MAAO,sBAAsB,EACrFqE,EAAsBR,EAAuBlG,EAAWH,EAAU,QAAQ,EAAG,4BAA4B,EAC/GuG,EAAc,YAAYM,CAAmB,EAC7C,KAAKpE,GAAkB8D,EAAc,YAAY,SAAU,eAAe,EAC1E,KAAK9D,GAAgB,aAAa,QAAS,GAAGqE,EAAuB,UAAU,EAAE,MAAM,CAAE,OAAQ,EAAI,CAAE,CAAC,EAAE,EAC1GC,EAAgCF,EAAqB,KAAKpE,EAAe,EACzE,OAAO,OAAOd,EAA6B,EAAE,KAAI,EAAG,QAASmE,GAAW,CAChE,KAAKrD,IACL,KAAKA,GAAgB,YAAYsD,EAAwBD,EAAQA,EAAQA,CAAM,CAAC,CAEhG,CAAS,EACG,KAAKrD,KACL,KAAKA,GAAgB,MAAQ,SAEjC,MAAMuE,EAAuBX,EAAuBlG,EAAWH,EAAU,SAAS,EAAG,4BAA4B,EACjHwG,EAAe,YAAYQ,CAAoB,EAC/C,KAAKtE,GAAmB8D,EAAe,YAAY,SAAU,eAAe,EAC5E,KAAK9D,GAAiB,aAAa,QAAS,GAAGoE,EAAuB,WAAW,EAAE,MAAM,CAAE,OAAQ,EAAI,CAAE,CAAC,EAAE,EAC5GC,EAAgCC,EAAsB,KAAKtE,EAAgB,EAE3E,KAAKC,GACDsE,EAAyB,OAAO9G,EAAWH,EAAU,oBAAoB,EAAG,GAAO,OAAW,cAAc,EAChH,KAAK2C,GAA0B,YAAY,UAAU,IAAI,4BAA4B,EACrF8D,EAAiB,YAAY,KAAK9D,GAA0B,WAAW,EACvE,KAAK,oBAAsB,KAAKA,GAA0B,gBAC1D,KAAK,oBAAoB,QAAU,GACnC,KAAK,oBAAoB,UAAU,IAAI,+BAA+B,EACtE8D,EAAiB,YAAY,KAAK9D,EAAyB,EAC3D,KAAKC,GAAiCqE,EAAyB,OAAO9G,EAAWH,EAAU,wBAAwB,EAAG,GAAO,OAAW,mBAAmB,EAC3J,KAAK4C,GAA+B,YAAY,UAAU,IAAI,4BAA4B,EAC1F8D,EAAsB,YAAY,KAAK9D,GAA+B,WAAW,EACjF,KAAKC,GAA4B,KAAKD,GAA+B,gBACrE,KAAKC,GAA0B,QAAU,GACzC,KAAKA,GAA0B,UAAU,IAAI,+BAA+B,EAC5E6D,EAAsB,YAAY,KAAK9D,EAA8B,EACrE,KAAKE,GACDmE,EAAyB,OAAO9G,EAAWH,EAAU,iBAAiB,EAAG,GAAO,OAAW,YAAY,EAC3G,KAAK8C,GAAwB,YAAY,UAAU,IAAI,4BAA4B,EACnF6D,EAAe,YAAY,KAAK7D,GAAwB,WAAW,EACnE,KAAK,kBAAoB,KAAKA,GAAwB,gBACtD,KAAK,kBAAkB,QAAU,GACjC,KAAK,kBAAkB,UAAU,IAAI,+BAA+B,EACpE,KAAK,kBAAkB,KAAO,sBAC9B6D,EAAe,YAAY,KAAK7D,EAAuB,EACvD,KAAK,uBAAyBlC,EAA4BT,EAAWH,EAAU,GAAG,EAAG,KAAKkH,GAA8B,KAAK,IAAI,EAAG,CAAE,aAAc,4BAA8B,CAAA,EAClLN,EAAe,YAAY,MAAO,4BAA4B,EAC9DA,EAAe,YAAY,KAAK,sBAAsB,EACtD,MAAMO,EAAwBd,EAAuBlG,EAAWH,EAAU,gBAAgB,EAAG,EAAE,EAC/F+G,EAAgCI,EAAuB,KAAK,sBAAsB,EAClF,KAAKnB,GAAqC,EACtC,KAAKvD,IACL,KAAKA,GAAgB,iBAAiB,SAAU,KAAKuD,GAAsC,KAAK,IAAI,CAAC,EAErG,KAAK,qBACL,KAAK,oBAAoB,iBAAiB,SAAU,KAAKA,GAAsC,KAAK,IAAI,CAAC,CAEhH,CACD,KAAMkB,IAAgC,CAClC,MAAMvD,EAAU,KAAKyD,KACrB,GAAI,KAAKlF,GAAQ,CACb,MAAM0B,EAAkB,MAAM,KAAK1B,GAAO,iBAAiByB,CAAO,EAC5DD,EAA0B,KAAKzB,GAA+B,IAAG,EACvEyB,EAAwB,KAAK,CAAE,gBAAAE,EAAiB,OAAQ,GAAM,GAAGD,CAAO,CAAE,EAC1E,KAAK1B,GAA+B,IAAIyB,EAAwB,IAAI2D,IAAM,CAAE,GAAGA,EAAG,OAAQA,EAAE,kBAAoBzD,CAAiB,EAAC,CAAC,EACnI,MAAM0D,EAAU,MAAM,KAAKzD,GAAyBD,EAAiBD,CAAO,EAEtE4D,EADiB,OAAO,WAAW,kCAAkC,EAC/B,QAC5CD,EAAQ,eAAe,CAAE,MAAO,QAAS,SAAUC,EAAuB,OAAS,QAAQ,CAAE,CAChG,CACJ,CACD,KAAM1D,GAAyBD,EAAiBD,EAAS,CACrD,MAAM2D,EAAU,SAAS,cAAc,KAAK,EAC5CA,EAAQ,UAAU,IAAI,uBAAuB,EAC7CA,EAAQ,aAAa,wBAAyB1D,CAAe,EAC7D0D,EAAQ,aAAa,QAAS,GAAGhB,EAAsB,eAAe,CAAC,EAAE,EACzE,KAAKnE,GAAoB,YAAYmF,CAAO,EAC5C,MAAME,EAAgBF,EAAQ,YAAY,MAAO,8BAA8B,EACzEG,EAAeD,EAAc,YAAY,MAAO,6BAA6B,EACnFE,EAA2BD,EAAc,CAAC,EAC1C,MAAM,KAAKE,KACX,MAAMC,EAAwBJ,EAAc,YAAY,MAAO,yBAAyB,EAClFK,EAAcC,EAA4B,wBAAwBlE,CAAe,GAAIzD,EAAWH,EAAU,MAAM,CAAC,EACvH6H,EAAY,aAAa,iBAAiB,SAAU,KAAK/D,GAAwB,KAAK,KAAMF,CAAe,CAAC,EAC5GgE,EAAsB,YAAYC,CAAW,EAC7CA,EAAY,aAAa,QAAU,GACnC,KAAK/F,GAAgB8B,EACrB,MAAM/C,EAAe2G,EAAc,YAAY,SAAU,aAAa,EACtE3G,EAAa,YAAcV,EAAWH,EAAU,MAAM,EACtDa,EAAa,iBAAiB,QAAS,KAAKkH,GAAqB,KAAK,KAAMnE,CAAe,CAAC,EAC5F/C,EAAa,aAAa,QAAS,GAAGmH,EAAqB,+BAA+B,EAAE,MAAM,CAAE,MAAO,GAAM,CAAC,EAAE,EACpH,MAAMC,EAAU,IAAIhE,EAAmB,oBAAqBwD,CAAY,EAClES,EAAW,IAAIC,EAAyBhI,EAAWH,EAAU,QAAQ,EAAG,OAAQ,OAAW,WAAW,EACtGoI,EAAW,IAAID,EAAyBhI,EAAWH,EAAU,QAAQ,EAAG,YAAa,OAAW,WAAW,EACjHoI,EAAS,WAAW,EAAK,EACzB,MAAMC,EAAYZ,EAAa,YAAY,QAAS,0BAA0B,EAC9EY,EAAU,YAAclI,EAAWH,EAAU,YAAY,EACzDqI,EAAU,SAAW,GACrBA,EAAU,aAAa,QAAS,GAAGC,EAAwB,MAAM,EAAE,MAAM,CAAE,QAAS,QAAS,OAAQ,EAAI,CAAE,CAAC,EAAE,EAC9G,MAAMC,EAAmB3E,EAAgB,MAAM,EAAE,EACjDyE,EAAU,MAAQlI,EAAWH,EAAU,eAAgB,CAAE,IAAKuI,CAAgB,CAAE,EAChF,KAAKC,GAAwBX,EAAaQ,EAAU,KAAK,EACzDH,EAAS,iBAAiB,QAAqD,IAAM,KAAKO,GAAsBhB,EAAcY,EAAWH,EAAUE,CAAQ,CAAC,EAC5JA,EAAS,iBAAiB,QAAqD,IAAM,KAAKM,GAAsBjB,EAAcY,EAAWH,EAAUE,EAAUP,CAAW,CAAC,EACzKQ,EAAU,iBAAiB,WAAY,IAAM,KAAKK,GAAsBjB,EAAcY,EAAWH,EAAUE,EAAUP,CAAW,CAAC,EACjIQ,EAAU,iBAAiB,UAAYtD,GAAU,CACzCA,EAAM,MAAQ,SACd,KAAK2D,GAAsBjB,EAAcY,EAAWH,EAAUE,EAAUP,CAAW,CAEnG,CAAS,EACDI,EAAQ,kBAAkBC,CAAQ,EAClCD,EAAQ,kBAAkBG,CAAQ,EAClC,KAAKO,GAA2BrB,EAAS1D,EAAiBD,CAAO,EACjE,MAAMiF,EAAQ,SAAS,cAAc,KAAK,EAC1C,OAAAA,EAAM,UAAU,IAAI,mBAAmB,EACvCA,EAAM,YAAczI,EAAWH,EAAU,WAAW,EACpDsH,EAAQ,YAAYsB,CAAK,EACR,KAAKtE,GAA2BV,CAAe,EACvD,SAAQ,EAAG,KAAK0D,CAAO,EAC5B,KAAKpF,KACL,KAAKA,GAAO,iBAAiB,kBAAmE,KAAK4C,GAAe,KAAK,KAAMlB,CAAe,CAAC,EAC/I,KAAK1B,GAAO,iBAAiB,qBAAyE,KAAKgD,GAAkB,KAAK,KAAMtB,CAAe,CAAC,EACxJ,KAAK1B,GAAO,iBAAiB,oBAAuE,KAAKgD,GAAkB,KAAK,KAAMtB,CAAe,CAAC,EACtJ,KAAK1B,GAAO,iBAAiB,oBAAuE,KAAKiD,GAAkB,KAAK,KAAMvB,CAAe,CAAC,GAEnJ0D,CACV,CACD1C,GAAkBrE,EAAY,CAC1B,IAAIsI,EAAMpH,GACV,QAASqH,EAAI,EAAGA,EAAIvI,EAAW,WAAW,OAAQuI,GAAK,GACnDD,GAAOtI,EAAW,WAAW,UAAUuI,EAAGA,EAAI,EAAE,EAAI;AAAA,EAExDD,GAAOnH,GACP,MAAMqH,EAAO,SAAS,cAAc,GAAG,EACvCA,EAAK,SAAW5I,EAAWH,EAAU,aAAa,EAClD+I,EAAK,KAAO,+BAAiC,mBAAmBF,CAAG,EACnEE,EAAK,MAAK,CACb,CACD,KAAMlE,GAAkBjB,EAAiBoF,EAAc,CACnD,MAAMvE,EAAW,KAAK,UAAU,IAAIb,CAAe,EAC9Ca,IAILA,EAAS,SAAU,EACd,SAAS,KAAMwE,GAAMA,EAAE,KAAK,eAAiBD,CAAY,EACzD,SACAvE,EAAS,WAAW,SAAS,QAC9BA,EAAS,SAAU,EAAC,YAAY,IAAIvD,CAAmB,EAEvD,KAAKgB,IACL,MAAM,KAAKA,GAAO,iBAAiB0B,EAAiBoF,CAAY,EAEvE,CAIDL,GAA2BrB,EAAS1D,EAAiBD,EAAS,CAC1D,MAAMuF,EAAgB5B,EAAQ,YAAY,MAAO,sBAAsB,EACjE6B,EAAYD,EAAc,YAAY,MAAO,qBAAqB,EAClEE,EAAgBF,EAAc,YAAY,MAAO,qBAAqB,EACtEG,EAAiBH,EAAc,YAAY,MAAO,qBAAqB,EACvEI,EAAWJ,EAAc,YAAY,MAAO,qBAAqB,EACjEK,EAAWL,EAAc,YAAY,MAAO,qBAAqB,EACjEM,EAAWN,EAAc,YAAY,MAAO,qBAAqB,EACvEC,EAAU,YAAY9C,EAAuBlG,EAAWH,EAAU,IAAI,EAAG,4BAA4B,CAAC,EACtGoJ,EAAc,YAAY/C,EAAuBlG,EAAWH,EAAU,QAAQ,EAAG,4BAA4B,CAAC,EAC9GqJ,EAAe,YAAYhD,EAAuBlG,EAAWH,EAAU,SAAS,EAAG,4BAA4B,CAAC,EAChHsJ,EAAS,YAAYjD,EAAuBlG,EAAWH,EAAU,oBAAoB,EAAG,4BAA4B,CAAC,EACrHuJ,EAAS,YAAYlD,EAAuBlG,EAAWH,EAAU,iBAAiB,EAAG,4BAA4B,CAAC,EAClHwJ,EAAS,YAAYnD,EAAuBlG,EAAWH,EAAU,wBAAwB,EAAG,4BAA4B,CAAC,EACzHmJ,EAAU,YAAY,MAAO,2BAA2B,EAAE,YAAcvF,EACxEwF,EAAc,YAAY,MAAO,2BAA2B,EAAE,YAAczF,EAAQ,SACpF0F,EAAe,YAAY,MAAO,2BAA2B,EAAE,YAAc1F,EAAQ,UACrF2F,EAAS,YAAY,MAAO,2BAA2B,EAAE,YACrD3F,EAAQ,eAAiBxD,EAAWH,EAAU,GAAG,EAAIG,EAAWH,EAAU,EAAE,EAChFuJ,EAAS,YAAY,MAAO,2BAA2B,EAAE,YACrD5F,EAAQ,aAAexD,EAAWH,EAAU,GAAG,EAAIG,EAAWH,EAAU,EAAE,EAC9EwJ,EAAS,YAAY,MAAO,2BAA2B,EAAE,YACrD7F,EAAQ,oBAAsBxD,EAAWH,EAAU,GAAG,EAAIG,EAAWH,EAAU,EAAE,CACxF,CACDyI,GAAsBhB,EAAcY,EAAWH,EAAUE,EAAU,CAC/DC,EAAU,SAAW,GACrBZ,EAAa,UAAU,IAAI,cAAc,EACzCY,EAAU,MAAK,EACfD,EAAS,WAAW,EAAI,EACxBF,EAAS,WAAW,EAAK,CAC5B,CACDQ,GAAsBjB,EAAcY,EAAWH,EAAUE,EAAUP,EAAa,CAC5E,MAAM4B,EAAOpB,EAAU,MAClBoB,IAGLpB,EAAU,SAAW,GACrBZ,EAAa,UAAU,OAAO,cAAc,EAC5CS,EAAS,WAAW,EAAI,EACxBE,EAAS,WAAW,EAAK,EACzB,KAAKI,GAAwBX,EAAa4B,CAAI,EACjD,CACDjB,GAAwBX,EAAa6B,EAAmB,CACpDhJ,EAAmB,QAAQmH,EAAY,aAAc1H,EAAWH,EAAU,6BAA8B,CAAE,IAAK0J,CAAiB,CAAE,CAAC,CACtI,CAID3B,GAAqBnE,EAAiB,CAClC,GAAI,KAAKzB,GAAqB,CAC1B,MAAMwH,EAAQ,KAAKxH,GAAoB,cAAc,0BAA0B,IAAI,OAAOyB,CAAe,CAAC,GAAG,EACzG+F,GACAA,EAAM,OAAM,CAEnB,CACD,MAAMlF,EAAW,KAAK,UAAU,IAAIb,CAAe,EAC/Ca,IACAA,EAAS,WAAW,SACpB,KAAK,UAAU,OAAOb,CAAe,GAErC,KAAK1B,IACA,KAAKA,GAAO,oBAAoB0B,CAAe,EAIxD,MAAMgG,EAD8B,KAAK3H,GAA+B,IAAG,EACZ,OAAOoF,GAAKA,EAAE,kBAAoBzD,CAAe,EAEhH,GADA,KAAK3B,GAA+B,IAAI2H,CAA0B,EAC9D,KAAK9H,KAAkB8B,EAAiB,CACxC,MAAMiG,EAA4B,MAAM,KAAK,KAAK,UAAU,KAAI,CAAE,EAC9DA,EAA0B,OACrB,KAAK/F,GAAwB+F,EAA0B,CAAC,CAAC,EAG9D,KAAK/H,GAAgB,IAE5B,CACJ,CACDsF,IAAkC,CAE9B,GAAI,CAAC,KAAK3E,IAAmB,CAAC,KAAKC,IAAoB,CAAC,KAAK,qBACzD,CAAC,KAAKG,IAA6B,CAAC,KAAK,kBACzC,MAAM,IAAI,MAAM,8CAA8C,EAElE,MAAO,CACH,SAAU,KAAKJ,GAAgB,QAAQ,KAAKA,GAAgB,aAAa,EAAE,MAC3E,aAAc,UACd,UAAW,KAAKC,GAAiB,QAAQ,KAAKA,GAAiB,aAAa,EAAE,MAC9E,eAAgB,KAAK,oBAAoB,QACzC,oBAAqB,KAAKG,GAA0B,QACpD,aAAc,KAAK,kBAAkB,QACrC,4BAA6B,GAC7B,eAAgB,EAC5B,CACK,CAKD,KAAMiB,GAAwBF,EAAiB,CAC3C,MAAM,KAAK+D,KACP,KAAKzF,IACL,MAAM,KAAKA,GAAO,+BAA+B0B,EAAiB,EAAI,EAE1E,KAAK9B,GAAgB8B,EAErB,MAAMgG,EAD8B,KAAK3H,GAA+B,IAAG,EACZ,IAAI,IAAM,CAAE,GAAG,EAAG,OAAQ,EAAE,kBAAoB2B,CAAe,EAAG,EACjI,KAAK3B,GAA+B,IAAI2H,CAA0B,EAClE,KAAKE,GAAoB,CAC5B,CACDA,IAAuB,CACnB,MAAMC,EAAiB,KAAK5H,GAAoB,uBAAuB,uBAAuB,EAC9F,MAAM,KAAK4H,CAAc,EAAE,QAASC,GAAkB,CAClD,MAAMC,EAASD,EAAc,cAAc,uBAAuB,EAC7DC,IAGLA,EAAO,QAAUD,EAAc,QAAQ,kBAAoB,KAAKlI,GAC5E,CAAS,CACJ,CACD,KAAM6F,IAA4B,CAC1B,KAAK7F,IAAiB,KAAKI,IAC3B,MAAM,KAAKA,GAAO,+BAA+B,KAAKJ,GAAe,EAAK,EAE9E,KAAKA,GAAgB,KACrB,KAAKgI,GAAoB,CAC5B,CACD,UAAW,CACP,MAAM,SAAQ,EACd,KAAK,iBAAiB,CAACI,CAAkB,CAAC,CAC7C,CACL"}