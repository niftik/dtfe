{"version":3,"file":"EventListenersView-ZykD45RN.js","sources":["../../panels/event_listeners/EventListenersUtils.js","../../panels/event_listeners/eventListenersView.css.js","../../panels/event_listeners/EventListenersView.js"],"sourcesContent":["// Copyright 2015 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\nimport * as Common from '../../core/common/common.js';\nimport * as SDK from '../../core/sdk/sdk.js';\nexport async function frameworkEventListeners(object) {\n    const domDebuggerModel = object.runtimeModel().target().model(SDK.DOMDebuggerModel.DOMDebuggerModel);\n    if (!domDebuggerModel) {\n        return { eventListeners: [], internalHandlers: null };\n    }\n    const listenersResult = { internalHandlers: null, eventListeners: [] };\n    return object.callFunction(frameworkEventListenersImpl, undefined)\n        .then(assertCallFunctionResult)\n        .then(getOwnProperties)\n        .then(createEventListeners)\n        .then(returnResult)\n        .catch(error => {\n        console.error(error);\n        return listenersResult;\n    });\n    function getOwnProperties(object) {\n        return object.getOwnProperties(false /* generatePreview */);\n    }\n    async function createEventListeners(result) {\n        if (!result.properties) {\n            throw new Error('Object properties is empty');\n        }\n        const promises = [];\n        for (const property of result.properties) {\n            if (property.name === 'eventListeners' && property.value) {\n                promises.push(convertToEventListeners(property.value).then(storeEventListeners));\n            }\n            if (property.name === 'internalHandlers' && property.value) {\n                promises.push(convertToInternalHandlers(property.value).then(storeInternalHandlers));\n            }\n            if (property.name === 'errorString' && property.value) {\n                printErrorString(property.value);\n            }\n        }\n        await Promise.all(promises);\n    }\n    function convertToEventListeners(pageEventListenersObject) {\n        return SDK.RemoteObject.RemoteArray.objectAsArray(pageEventListenersObject)\n            .map(toEventListener)\n            .then(filterOutEmptyObjects);\n        function toEventListener(listenerObject) {\n            let type;\n            let useCapture;\n            let passive;\n            let once;\n            let handler = null;\n            let originalHandler = null;\n            let location = null;\n            let removeFunctionObject = null;\n            const promises = [];\n            promises.push(listenerObject\n                .callFunctionJSON(truncatePageEventListener, undefined)\n                .then(storeTruncatedListener));\n            function truncatePageEventListener() {\n                return { type: this.type, useCapture: this.useCapture, passive: this.passive, once: this.once };\n            }\n            function storeTruncatedListener(truncatedListener) {\n                if (truncatedListener.type !== undefined) {\n                    type = truncatedListener.type;\n                }\n                if (truncatedListener.useCapture !== undefined) {\n                    useCapture = truncatedListener.useCapture;\n                }\n                if (truncatedListener.passive !== undefined) {\n                    passive = truncatedListener.passive;\n                }\n                if (truncatedListener.once !== undefined) {\n                    once = truncatedListener.once;\n                }\n            }\n            promises.push(listenerObject.callFunction(handlerFunction)\n                .then(assertCallFunctionResult)\n                .then(storeOriginalHandler)\n                .then(toTargetFunction)\n                .then(storeFunctionWithDetails));\n            function handlerFunction() {\n                return this.handler || null;\n            }\n            function storeOriginalHandler(functionObject) {\n                originalHandler = functionObject;\n                return originalHandler;\n            }\n            function storeFunctionWithDetails(functionObject) {\n                handler = functionObject;\n                return functionObject.debuggerModel().functionDetailsPromise(functionObject).then(storeFunctionDetails);\n            }\n            function storeFunctionDetails(functionDetails) {\n                location = functionDetails ? functionDetails.location : null;\n            }\n            promises.push(listenerObject.callFunction(getRemoveFunction)\n                .then(assertCallFunctionResult)\n                .then(storeRemoveFunction));\n            function getRemoveFunction() {\n                return this.remove || null;\n            }\n            function storeRemoveFunction(functionObject) {\n                if (functionObject.type !== 'function') {\n                    return;\n                }\n                removeFunctionObject = functionObject;\n            }\n            return Promise.all(promises).then(createEventListener).catch(error => {\n                console.error(error);\n                return null;\n            });\n            function createEventListener() {\n                if (!location) {\n                    throw new Error('Empty event listener\\'s location');\n                }\n                return new SDK.DOMDebuggerModel.EventListener(domDebuggerModel, object, type, useCapture, passive, once, handler, originalHandler, location, removeFunctionObject, \"FrameworkUser\" /* SDK.DOMDebuggerModel.EventListener.Origin.FRAMEWORK_USER */);\n            }\n        }\n    }\n    function convertToInternalHandlers(pageInternalHandlersObject) {\n        return SDK.RemoteObject.RemoteArray.objectAsArray(pageInternalHandlersObject)\n            .map(toTargetFunction)\n            .then(SDK.RemoteObject.RemoteArray.createFromRemoteObjects.bind(null));\n    }\n    function toTargetFunction(functionObject) {\n        return SDK.RemoteObject.RemoteFunction.objectAsFunction(functionObject).targetFunction();\n    }\n    function storeEventListeners(eventListeners) {\n        listenersResult.eventListeners = eventListeners;\n    }\n    function storeInternalHandlers(internalHandlers) {\n        listenersResult.internalHandlers = internalHandlers;\n    }\n    function printErrorString(errorString) {\n        Common.Console.Console.instance().error(String(errorString.value));\n    }\n    function returnResult() {\n        return listenersResult;\n    }\n    function assertCallFunctionResult(result) {\n        if (result.wasThrown || !result.object) {\n            throw new Error('Exception in callFunction or empty result');\n        }\n        return result.object;\n    }\n    function filterOutEmptyObjects(objects) {\n        return objects.filter(filterOutEmpty);\n        function filterOutEmpty(object) {\n            return Boolean(object);\n        }\n    }\n    /*\n      frameworkEventListeners fetcher functions should produce following output:\n          {\n            // framework event listeners\n            \"eventListeners\": [\n              {\n                \"handler\": function(),\n                \"useCapture\": true,\n                \"passive\": false,\n                \"once\": false,\n                \"type\": \"change\",\n                \"remove\": function(type, handler, useCapture, passive)\n              },\n              ...\n            ],\n            // internal framework event handlers\n            \"internalHandlers\": [\n              function(),\n              function(),\n              ...\n            ]\n          }\n      */\n    function frameworkEventListenersImpl() {\n        const errorLines = [];\n        let eventListeners = [];\n        let internalHandlers = [];\n        let fetchers = [jQueryFetcher];\n        try {\n            // @ts-ignore Here because of layout tests.\n            if (self.devtoolsFrameworkEventListeners && isArrayLike(self.devtoolsFrameworkEventListeners)) {\n                // @ts-ignore Here because of layout tests.\n                fetchers = fetchers.concat(self.devtoolsFrameworkEventListeners);\n            }\n        }\n        catch (e) {\n            errorLines.push('devtoolsFrameworkEventListeners call produced error: ' + toString(e));\n        }\n        for (let i = 0; i < fetchers.length; ++i) {\n            try {\n                const fetcherResult = fetchers[i](this);\n                if (fetcherResult.eventListeners && isArrayLike(fetcherResult.eventListeners)) {\n                    const fetcherResultEventListeners = fetcherResult.eventListeners;\n                    const nonEmptyEventListeners = fetcherResultEventListeners\n                        .map(eventListener => {\n                        return checkEventListener(eventListener);\n                    })\n                        .filter(nonEmptyObject);\n                    eventListeners = eventListeners.concat(nonEmptyEventListeners);\n                }\n                if (fetcherResult.internalHandlers && isArrayLike(fetcherResult.internalHandlers)) {\n                    const fetcherResultInternalHandlers = fetcherResult.internalHandlers;\n                    const nonEmptyInternalHandlers = fetcherResultInternalHandlers\n                        .map(handler => {\n                        return checkInternalHandler(handler);\n                    })\n                        .filter(nonEmptyObject);\n                    internalHandlers = internalHandlers.concat(nonEmptyInternalHandlers);\n                }\n            }\n            catch (e) {\n                errorLines.push('fetcher call produced error: ' + toString(e));\n            }\n        }\n        const result = {\n            eventListeners,\n            internalHandlers: internalHandlers.length ? internalHandlers : undefined,\n            errorString: undefined,\n        };\n        // The logic further up seems to expect that if the internalHandlers is set,\n        // that it should have a non-empty Array, but TS / Closure also expect the\n        // property to exist, so we always add it above, but then remove it again\n        // here if there's no value set.\n        if (!result.internalHandlers) {\n            delete result.internalHandlers;\n        }\n        if (errorLines.length) {\n            let errorString = 'Framework Event Listeners API Errors:\\n\\t' + errorLines.join('\\n\\t');\n            errorString = errorString.substr(0, errorString.length - 1);\n            result.errorString = errorString;\n        }\n        // Remove the errorString if it's not set.\n        if (result.errorString === '' || result.errorString === undefined) {\n            delete result.errorString;\n        }\n        return result;\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        function isArrayLike(obj) {\n            if (!obj || typeof obj !== 'object') {\n                return false;\n            }\n            try {\n                if (typeof obj.splice === 'function') {\n                    const len = obj.length;\n                    return typeof len === 'number' && (len >>> 0 === len && (len > 0 || 1 / len > 0));\n                }\n            }\n            catch (e) {\n            }\n            return false;\n        }\n        function checkEventListener(eventListener) {\n            try {\n                let errorString = '';\n                if (!eventListener) {\n                    errorString += 'empty event listener, ';\n                }\n                else {\n                    const type = eventListener.type;\n                    if (!type || (typeof type !== 'string')) {\n                        errorString += 'event listener\\'s type isn\\'t string or empty, ';\n                    }\n                    const useCapture = eventListener.useCapture;\n                    if (typeof useCapture !== 'boolean') {\n                        errorString += 'event listener\\'s useCapture isn\\'t boolean or undefined, ';\n                    }\n                    const passive = eventListener.passive;\n                    if (typeof passive !== 'boolean') {\n                        errorString += 'event listener\\'s passive isn\\'t boolean or undefined, ';\n                    }\n                    const once = eventListener.once;\n                    if (typeof once !== 'boolean') {\n                        errorString += 'event listener\\'s once isn\\'t boolean or undefined, ';\n                    }\n                    const handler = eventListener.handler;\n                    if (!handler || (typeof handler !== 'function')) {\n                        errorString += 'event listener\\'s handler isn\\'t a function or empty, ';\n                    }\n                    const remove = eventListener.remove;\n                    if (remove && (typeof remove !== 'function')) {\n                        errorString += 'event listener\\'s remove isn\\'t a function, ';\n                    }\n                    if (!errorString) {\n                        return {\n                            type,\n                            useCapture,\n                            passive,\n                            once,\n                            handler,\n                            remove,\n                        };\n                    }\n                }\n                errorLines.push(errorString.substr(0, errorString.length - 2));\n                return null;\n            }\n            catch (error) {\n                errorLines.push(toString(error));\n                return null;\n            }\n        }\n        // TODO(crbug.com/1172300) Ignored during the jsdoc to ts migration\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        function checkInternalHandler(handler) {\n            if (handler && (typeof handler === 'function')) {\n                return handler;\n            }\n            errorLines.push('internal handler isn\\'t a function or empty');\n            return null;\n        }\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        function toString(obj) {\n            try {\n                return String(obj);\n            }\n            catch (e) {\n                return '<error>';\n            }\n        }\n        function nonEmptyObject(obj) {\n            return Boolean(obj);\n        }\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        function jQueryFetcher(node) {\n            if (!node || !(node instanceof Node)) {\n                return { eventListeners: [] };\n            }\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            const jQuery = window['jQuery'];\n            if (!jQuery || !jQuery.fn) {\n                return { eventListeners: [] };\n            }\n            const jQueryFunction = jQuery;\n            const data = jQuery._data || jQuery.data;\n            const eventListeners = [];\n            const internalHandlers = [];\n            if (typeof data === 'function') {\n                const events = data(node, 'events');\n                for (const type in events) {\n                    for (const key in events[type]) {\n                        const frameworkListener = events[type][key];\n                        if (typeof frameworkListener === 'object' || typeof frameworkListener === 'function') {\n                            const listener = {\n                                handler: frameworkListener.handler || frameworkListener,\n                                useCapture: true,\n                                passive: false,\n                                once: false,\n                                type,\n                                remove: jQueryRemove.bind(node, frameworkListener.selector),\n                            };\n                            eventListeners.push(listener);\n                        }\n                    }\n                }\n                const nodeData = data(node);\n                if (nodeData && typeof nodeData.handle === 'function') {\n                    internalHandlers.push(nodeData.handle);\n                }\n            }\n            const entry = jQueryFunction(node)[0];\n            if (entry) {\n                const entryEvents = entry['$events'];\n                for (const type in entryEvents) {\n                    const events = entryEvents[type];\n                    for (const key in events) {\n                        if (typeof events[key] === 'function') {\n                            const listener = { handler: events[key], useCapture: true, passive: false, once: false, type };\n                            // We don't support removing for old version < 1.4 of jQuery because it doesn't provide API for getting \"selector\".\n                            eventListeners.push(listener);\n                        }\n                    }\n                }\n                if (entry && entry['$handle']) {\n                    internalHandlers.push(entry['$handle']);\n                }\n            }\n            return { eventListeners, internalHandlers };\n        }\n        function jQueryRemove(selector, type, handler) {\n            if (!this || !(this instanceof Node)) {\n                return;\n            }\n            const node = this;\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            const jQuery = window['jQuery'];\n            if (!jQuery || !jQuery.fn) {\n                return;\n            }\n            const jQueryFunction = jQuery;\n            jQueryFunction(node).off(type, selector, handler);\n        }\n    }\n}\n//# sourceMappingURL=EventListenersUtils.js.map","// Copyright 2024 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n// IMPORTANT: this file is auto generated. Please do not edit this file.\n/* istanbul ignore file */\nconst styles = new CSSStyleSheet();\nstyles.replaceSync(\n`/*\n * Copyright 2015 The Chromium Authors. All rights reserved.\n * Use of this source code is governed by a BSD-style license that can be\n * found in the LICENSE file.\n */\n\n.tree-outline-disclosure li {\n  padding: 0 0 0 5px;\n  overflow: hidden;\n  display: flex;\n  min-height: 18px;\n  align-items: center;\n}\n\n.tree-outline-disclosure {\n  padding-left: 0 !important; /* stylelint-disable-line declaration-no-important */\n  padding-right: 3px;\n}\n\n.tree-outline-disclosure li.parent::before {\n  top: 0 !important; /* stylelint-disable-line declaration-no-important */\n}\n\n.tree-outline-disclosure .name {\n  color: var(--sys-color-token-tag);\n}\n\n.tree-outline-disclosure .object-value-node,\n.tree-outline-disclosure .object-value-object {\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n.event-listener-details {\n  display: flex;\n  min-height: 18px;\n  align-items: center;\n\n  devtools-button {\n    height: 18px;\n  }\n}\n\n.event-listener-tree-subtitle {\n  float: right;\n  margin-left: 5px;\n  flex-shrink: 0;\n}\n\n.event-listener-button {\n  padding: 0 5px;\n  color: var(--sys-color-primary);\n  background-color: var(--sys-color-cdt-base-container);\n  border-radius: 7px;\n  border: 1px solid var(--sys-color-tonal-outline);\n  margin-left: 5px;\n  display: block;\n  flex-shrink: 0;\n\n  &:hover {\n    background-color: var(--sys-color-state-hover-on-subtle);\n  }\n\n  &:active {\n    background-color: var(--sys-color-state-ripple-neutral-on-subtle);\n  }\n}\n\n.tree-outline-disclosure li:hover .event-listener-button {\n  display: inline;\n}\n\n@media (forced-colors: active) {\n  .event-listener-details .event-listener-button {\n    forced-color-adjust: none;\n    opacity: 100%;\n    background: ButtonFace;\n    color: ButtonText;\n    border-color: ButtonText;\n  }\n\n  .event-listener-button:hover {\n    background-color: Highlight !important; /* stylelint-disable-line declaration-no-important */\n    color: HighlightText;\n    border-color: ButtonText;\n  }\n\n  .tree-outline.hide-selection-when-blurred .selected:focus-visible .event-listener-button,\n  .tree-outline-disclosure li:focus-visible .gray-info-message {\n    background-color: Highlight;\n    color: HighlightText;\n    border-color: HighlightText;\n  }\n}\n\n/*# sourceURL=eventListenersView.css */\n`);\n\nexport default styles;\n","// Copyright 2015 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\nimport * as Common from '../../core/common/common.js';\nimport * as i18n from '../../core/i18n/i18n.js';\nimport * as SDK from '../../core/sdk/sdk.js';\nimport * as Buttons from '../../ui/components/buttons/buttons.js';\nimport * as ObjectUI from '../../ui/legacy/components/object_ui/object_ui.js';\n/* eslint-disable rulesdir/es_modules_import */\nimport objectValueStyles from '../../ui/legacy/components/object_ui/objectValue.css.js';\nimport * as Components from '../../ui/legacy/components/utils/utils.js';\nimport * as UI from '../../ui/legacy/legacy.js';\nimport * as VisualLogging from '../../ui/visual_logging/visual_logging.js';\nimport { frameworkEventListeners } from './EventListenersUtils.js';\nimport eventListenersViewStyles from './eventListenersView.css.js';\nconst UIStrings = {\n    /**\n     *@description Empty holder text content in Event Listeners View of the Event Listener Debugging pane in the Sources panel\n     */\n    noEventListeners: 'No event listeners',\n    /**\n     *@description Delete button title in Event Listeners View of the Event Listener Debugging pane in the Sources panel\n     */\n    deleteEventListener: 'Delete event listener',\n    /**\n     *@description Passive button text content in Event Listeners View of the Event Listener Debugging pane in the Sources panel\n     */\n    togglePassive: 'Toggle Passive',\n    /**\n     *@description Passive button title in Event Listeners View of the Event Listener Debugging pane in the Sources panel\n     */\n    toggleWhetherEventListenerIs: 'Toggle whether event listener is passive or blocking',\n    /**\n     *@description A context menu item to reveal a node in the DOM tree of the Elements Panel\n     */\n    revealInElementsPanel: 'Reveal in Elements panel',\n    /**\n     *@description Text in Event Listeners Widget of the Elements panel\n     */\n    passive: 'Passive',\n};\nconst str_ = i18n.i18n.registerUIStrings('panels/event_listeners/EventListenersView.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\nexport class EventListenersView extends UI.Widget.VBox {\n    changeCallback;\n    enableDefaultTreeFocus;\n    treeOutline;\n    emptyHolder;\n    linkifier;\n    treeItemMap;\n    constructor(changeCallback, enableDefaultTreeFocus = false) {\n        super();\n        this.changeCallback = changeCallback;\n        this.enableDefaultTreeFocus = enableDefaultTreeFocus;\n        this.treeOutline = new UI.TreeOutline.TreeOutlineInShadow();\n        this.treeOutline.setComparator(EventListenersTreeElement.comparator);\n        this.treeOutline.element.classList.add('monospace');\n        this.treeOutline.setShowSelectionOnKeyboardFocus(true);\n        this.treeOutline.setFocusable(true);\n        this.element.appendChild(this.treeOutline.element);\n        this.emptyHolder = document.createElement('div');\n        this.emptyHolder.classList.add('gray-info-message');\n        this.emptyHolder.textContent = i18nString(UIStrings.noEventListeners);\n        this.emptyHolder.tabIndex = -1;\n        this.linkifier = new Components.Linkifier.Linkifier();\n        this.treeItemMap = new Map();\n    }\n    focus() {\n        if (!this.enableDefaultTreeFocus) {\n            return;\n        }\n        if (!this.emptyHolder.parentNode) {\n            this.treeOutline.forceSelect();\n        }\n        else {\n            this.emptyHolder.focus();\n        }\n    }\n    async addObjects(objects) {\n        this.reset();\n        await Promise.all(objects.map(obj => obj ? this.addObject(obj) : Promise.resolve()));\n        this.addEmptyHolderIfNeeded();\n        this.eventListenersArrivedForTest();\n    }\n    addObject(object) {\n        let eventListeners;\n        let frameworkEventListenersObject = null;\n        const promises = [];\n        const domDebuggerModel = object.runtimeModel().target().model(SDK.DOMDebuggerModel.DOMDebuggerModel);\n        // TODO(kozyatinskiy): figure out how this should work for |window| when there is no DOMDebugger.\n        if (domDebuggerModel) {\n            promises.push(domDebuggerModel.eventListeners(object).then(storeEventListeners));\n        }\n        promises.push(frameworkEventListeners(object).then(storeFrameworkEventListenersObject));\n        return Promise.all(promises).then(markInternalEventListeners).then(addEventListeners.bind(this));\n        function storeEventListeners(result) {\n            eventListeners = result;\n        }\n        function storeFrameworkEventListenersObject(result) {\n            frameworkEventListenersObject = result;\n        }\n        async function markInternalEventListeners() {\n            if (!frameworkEventListenersObject) {\n                return;\n            }\n            if (!frameworkEventListenersObject.internalHandlers) {\n                return;\n            }\n            return frameworkEventListenersObject.internalHandlers.object()\n                .callFunctionJSON(isInternalEventListener, eventListeners.map(handlerArgument))\n                .then(setIsInternal);\n            function handlerArgument(listener) {\n                return SDK.RemoteObject.RemoteObject.toCallArgument(listener.handler());\n            }\n            function isInternalEventListener() {\n                const isInternal = [];\n                const internalHandlersSet = new Set(this);\n                for (const handler of arguments) {\n                    isInternal.push(internalHandlersSet.has(handler));\n                }\n                return isInternal;\n            }\n            function setIsInternal(isInternal) {\n                for (let i = 0; i < eventListeners.length; ++i) {\n                    if (isInternal[i]) {\n                        eventListeners[i].markAsFramework();\n                    }\n                }\n            }\n        }\n        function addEventListeners() {\n            this.addObjectEventListeners(object, eventListeners);\n            if (frameworkEventListenersObject) {\n                this.addObjectEventListeners(object, frameworkEventListenersObject.eventListeners);\n            }\n        }\n    }\n    addObjectEventListeners(object, eventListeners) {\n        if (!eventListeners) {\n            return;\n        }\n        for (const eventListener of eventListeners) {\n            const treeItem = this.getOrCreateTreeElementForType(eventListener.type());\n            treeItem.addObjectEventListener(eventListener, object);\n        }\n    }\n    showFrameworkListeners(showFramework, showPassive, showBlocking) {\n        const eventTypes = this.treeOutline.rootElement().children();\n        for (const eventType of eventTypes) {\n            let hiddenEventType = true;\n            for (const listenerElement of eventType.children()) {\n                const objectListenerElement = listenerElement;\n                const listenerOrigin = objectListenerElement.eventListener().origin();\n                let hidden = false;\n                if (listenerOrigin === \"FrameworkUser\" /* SDK.DOMDebuggerModel.EventListener.Origin.FRAMEWORK_USER */ && !showFramework) {\n                    hidden = true;\n                }\n                if (listenerOrigin === \"Framework\" /* SDK.DOMDebuggerModel.EventListener.Origin.FRAMEWORK */ && showFramework) {\n                    hidden = true;\n                }\n                if (!showPassive && objectListenerElement.eventListener().passive()) {\n                    hidden = true;\n                }\n                if (!showBlocking && !objectListenerElement.eventListener().passive()) {\n                    hidden = true;\n                }\n                objectListenerElement.hidden = hidden;\n                hiddenEventType = hiddenEventType && hidden;\n            }\n            eventType.hidden = hiddenEventType;\n        }\n    }\n    getOrCreateTreeElementForType(type) {\n        let treeItem = this.treeItemMap.get(type);\n        if (!treeItem) {\n            treeItem = new EventListenersTreeElement(type, this.linkifier, this.changeCallback);\n            this.treeItemMap.set(type, treeItem);\n            treeItem.hidden = true;\n            this.treeOutline.appendChild(treeItem);\n        }\n        this.emptyHolder.remove();\n        return treeItem;\n    }\n    addEmptyHolderIfNeeded() {\n        let allHidden = true;\n        let firstVisibleChild = null;\n        for (const eventType of this.treeOutline.rootElement().children()) {\n            eventType.hidden = !eventType.firstChild();\n            allHidden = allHidden && eventType.hidden;\n            if (!firstVisibleChild && !eventType.hidden) {\n                firstVisibleChild = eventType;\n            }\n        }\n        if (allHidden && !this.emptyHolder.parentNode) {\n            this.element.appendChild(this.emptyHolder);\n        }\n        if (firstVisibleChild) {\n            firstVisibleChild.select(true /* omitFocus */);\n        }\n        this.treeOutline.setFocusable(Boolean(firstVisibleChild));\n    }\n    reset() {\n        const eventTypes = this.treeOutline.rootElement().children();\n        for (const eventType of eventTypes) {\n            eventType.removeChildren();\n        }\n        this.linkifier.reset();\n    }\n    eventListenersArrivedForTest() {\n    }\n    wasShown() {\n        super.wasShown();\n        this.treeOutline.registerCSSFiles([eventListenersViewStyles, objectValueStyles]);\n    }\n}\nexport class EventListenersTreeElement extends UI.TreeOutline.TreeElement {\n    toggleOnClick;\n    linkifier;\n    changeCallback;\n    constructor(type, linkifier, changeCallback) {\n        super(type);\n        this.toggleOnClick = true;\n        this.linkifier = linkifier;\n        this.changeCallback = changeCallback;\n        UI.ARIAUtils.setLabel(this.listItemElement, `${type}, event listener`);\n    }\n    static comparator(element1, element2) {\n        if (element1.title === element2.title) {\n            return 0;\n        }\n        return element1.title > element2.title ? 1 : -1;\n    }\n    addObjectEventListener(eventListener, object) {\n        const treeElement = new ObjectEventListenerBar(eventListener, object, this.linkifier, this.changeCallback);\n        this.appendChild(treeElement);\n    }\n}\nexport class ObjectEventListenerBar extends UI.TreeOutline.TreeElement {\n    eventListenerInternal;\n    editable;\n    changeCallback;\n    valueTitle;\n    constructor(eventListener, object, linkifier, changeCallback) {\n        super('', true);\n        this.eventListenerInternal = eventListener;\n        this.editable = false;\n        this.setTitle(object, linkifier);\n        this.changeCallback = changeCallback;\n    }\n    async onpopulate() {\n        const properties = [];\n        const eventListener = this.eventListenerInternal;\n        const runtimeModel = eventListener.domDebuggerModel().runtimeModel();\n        properties.push(runtimeModel.createRemotePropertyFromPrimitiveValue('useCapture', eventListener.useCapture()));\n        properties.push(runtimeModel.createRemotePropertyFromPrimitiveValue('passive', eventListener.passive()));\n        properties.push(runtimeModel.createRemotePropertyFromPrimitiveValue('once', eventListener.once()));\n        if (typeof eventListener.handler() !== 'undefined') {\n            properties.push(new SDK.RemoteObject.RemoteObjectProperty('handler', eventListener.handler()));\n        }\n        ObjectUI.ObjectPropertiesSection.ObjectPropertyTreeElement.populateWithProperties(this, properties, [], true, true, null);\n    }\n    setTitle(object, linkifier) {\n        const title = this.listItemElement.createChild('span', 'event-listener-details');\n        const propertyValue = ObjectUI.ObjectPropertiesSection.ObjectPropertiesSection.createPropertyValue(object, /* wasThrown */ false, /* showPreview */ false);\n        this.valueTitle = propertyValue.element;\n        title.appendChild(this.valueTitle);\n        if (this.eventListenerInternal.canRemove()) {\n            const deleteButton = new Buttons.Button.Button();\n            deleteButton.data = {\n                variant: \"icon\" /* Buttons.Button.Variant.ICON */,\n                size: \"SMALL\" /* Buttons.Button.Size.SMALL */,\n                iconName: 'bin',\n                jslogContext: 'delete-event-listener',\n            };\n            UI.Tooltip.Tooltip.install(deleteButton, i18nString(UIStrings.deleteEventListener));\n            deleteButton.addEventListener('click', event => {\n                this.removeListener();\n                event.consume();\n            }, false);\n            title.appendChild(deleteButton);\n        }\n        if (this.eventListenerInternal.isScrollBlockingType() && this.eventListenerInternal.canTogglePassive()) {\n            const passiveButton = title.createChild('button', 'event-listener-button');\n            passiveButton.textContent = i18nString(UIStrings.togglePassive);\n            passiveButton.setAttribute('jslog', `${VisualLogging.action('passive').track({ click: true })}`);\n            UI.Tooltip.Tooltip.install(passiveButton, i18nString(UIStrings.toggleWhetherEventListenerIs));\n            passiveButton.addEventListener('click', event => {\n                this.togglePassiveListener();\n                event.consume();\n            }, false);\n            title.appendChild(passiveButton);\n        }\n        const subtitle = title.createChild('span', 'event-listener-tree-subtitle');\n        const linkElement = linkifier.linkifyRawLocation(this.eventListenerInternal.location(), this.eventListenerInternal.sourceURL());\n        subtitle.appendChild(linkElement);\n        this.listItemElement.addEventListener('contextmenu', event => {\n            const menu = new UI.ContextMenu.ContextMenu(event);\n            if (event.target !== linkElement) {\n                menu.appendApplicableItems(linkElement);\n            }\n            if (object.subtype === 'node') {\n                menu.defaultSection().appendItem(i18nString(UIStrings.revealInElementsPanel), () => Common.Revealer.reveal(object), { jslogContext: 'reveal-in-elements' });\n            }\n            menu.defaultSection().appendItem(i18nString(UIStrings.deleteEventListener), this.removeListener.bind(this), { disabled: !this.eventListenerInternal.canRemove(), jslogContext: 'delete-event-listener' });\n            menu.defaultSection().appendCheckboxItem(i18nString(UIStrings.passive), this.togglePassiveListener.bind(this), {\n                checked: this.eventListenerInternal.passive(),\n                disabled: !this.eventListenerInternal.canTogglePassive(),\n                jslogContext: 'passive',\n            });\n            void menu.show();\n        });\n    }\n    removeListener() {\n        this.removeListenerBar();\n        void this.eventListenerInternal.remove();\n    }\n    togglePassiveListener() {\n        void this.eventListenerInternal.togglePassive().then(() => this.changeCallback());\n    }\n    removeListenerBar() {\n        const parent = this.parent;\n        if (!parent) {\n            return;\n        }\n        parent.removeChild(this);\n        if (!parent.childCount()) {\n            parent.collapse();\n        }\n        let allHidden = true;\n        for (const child of parent.children()) {\n            if (!child.hidden) {\n                allHidden = false;\n            }\n        }\n        parent.hidden = allHidden;\n    }\n    eventListener() {\n        return this.eventListenerInternal;\n    }\n    onenter() {\n        if (this.valueTitle) {\n            this.valueTitle.click();\n            return true;\n        }\n        return false;\n    }\n    ondelete() {\n        if (this.eventListenerInternal.canRemove()) {\n            this.removeListener();\n            return true;\n        }\n        return false;\n    }\n}\n//# sourceMappingURL=EventListenersView.js.map"],"names":["frameworkEventListeners","object","domDebuggerModel","SDK.DOMDebuggerModel.DOMDebuggerModel","listenersResult","frameworkEventListenersImpl","assertCallFunctionResult","getOwnProperties","createEventListeners","returnResult","error","result","promises","property","convertToEventListeners","storeEventListeners","convertToInternalHandlers","storeInternalHandlers","printErrorString","pageEventListenersObject","SDK.RemoteObject.RemoteArray","toEventListener","filterOutEmptyObjects","listenerObject","type","useCapture","passive","once","handler","originalHandler","location","removeFunctionObject","truncatePageEventListener","storeTruncatedListener","truncatedListener","handlerFunction","storeOriginalHandler","toTargetFunction","storeFunctionWithDetails","functionObject","storeFunctionDetails","functionDetails","getRemoveFunction","storeRemoveFunction","createEventListener","SDK.DOMDebuggerModel.EventListener","pageInternalHandlersObject","SDK.RemoteObject.RemoteFunction","eventListeners","internalHandlers","errorString","Common.Console.Console","objects","filterOutEmpty","errorLines","fetchers","jQueryFetcher","isArrayLike","e","toString","i","fetcherResult","nonEmptyEventListeners","eventListener","checkEventListener","nonEmptyObject","nonEmptyInternalHandlers","checkInternalHandler","obj","len","remove","node","jQuery","jQueryFunction","data","events","key","frameworkListener","listener","jQueryRemove","nodeData","entry","entryEvents","selector","styles","UIStrings","str_","i18n.i18n.registerUIStrings","i18nString","i18n.i18n.getLocalizedString","EventListenersView","UI.Widget.VBox","changeCallback","enableDefaultTreeFocus","UI.TreeOutline.TreeOutlineInShadow","EventListenersTreeElement","Components.Linkifier.Linkifier","frameworkEventListenersObject","storeFrameworkEventListenersObject","markInternalEventListeners","addEventListeners","isInternalEventListener","handlerArgument","setIsInternal","SDK.RemoteObject.RemoteObject","isInternal","internalHandlersSet","showFramework","showPassive","showBlocking","eventTypes","eventType","hiddenEventType","listenerElement","objectListenerElement","listenerOrigin","hidden","treeItem","allHidden","firstVisibleChild","eventListenersViewStyles","objectValueStyles","UI.TreeOutline.TreeElement","linkifier","UI.ARIAUtils.setLabel","element1","element2","treeElement","ObjectEventListenerBar","properties","runtimeModel","SDK.RemoteObject.RemoteObjectProperty","ObjectUI.ObjectPropertiesSection.ObjectPropertyTreeElement","title","propertyValue","ObjectUI.ObjectPropertiesSection.ObjectPropertiesSection","deleteButton","Buttons.Button.Button","UI.Tooltip.Tooltip","event","passiveButton","VisualLogging.action","subtitle","linkElement","menu","UI.ContextMenu.ContextMenu","Common.Revealer.reveal","parent","child"],"mappings":"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"}