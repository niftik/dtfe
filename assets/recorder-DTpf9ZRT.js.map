{"version":3,"mappings":"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AAU,IAAK,IAAK,GAAK,EAC5D,KAAM,CAAE,QAAS,GAAI,KAAM,OAAQ,SAAU,IAAK,IAAK,GAAK,EAC5D,KAAM,CAAE,QAAS,GAAI,KAAM,OAAQ,SAAU,IAAK,IAAK,GAAK,EAC5D,KAAM,CAAE,QAAS,GAAI,KAAM,OAAQ,SAAU,IAAK,IAAK,GAAK,EAC5D,KAAM,CAAE,QAAS,GAAI,KAAM,OAAQ,SAAU,IAAK,IAAK,GAAK,EAC5D,KAAM,CAAE,QAAS,GAAI,KAAM,OAAQ,SAAU,IAAK,IAAK,GAAK,EAC5D,KAAM,CAAE,QAAS,GAAI,KAAM,OAAQ,SAAU,IAAK,IAAK,GAAK,EAC5D,KAAM,CAAE,QAAS,GAAI,KAAM,OAAQ,SAAU,IAAK,IAAK,GAAK,EAC5D,KAAM,CAAE,QAAS,GAAI,KAAM,OAAQ,SAAU,IAAK,IAAK,GAAK,EAC5D,KAAM,CAAE,QAAS,GAAI,KAAM,OAAQ,SAAU,IAAK,IAAK,GAAK,EAC5D,KAAM,CAAE,QAAS,GAAI,KAAM,OAAQ,SAAU,IAAK,IAAK,GAAK,EAC5D,KAAM,CAAE,QAAS,GAAI,KAAM,OAAQ,SAAU,IAAK,IAAK,GAAK,EAC5D,KAAM,CAAE,QAAS,GAAI,KAAM,OAAQ,SAAU,IAAK,IAAK,GAAK,EAC5D,KAAM,CAAE,QAAS,GAAI,KAAM,OAAQ,SAAU,IAAK,IAAK,GAAK,EAC5D,KAAM,CAAE,QAAS,GAAI,KAAM,OAAQ,SAAU,IAAK,IAAK,GAAK,EAC5D,KAAM,CAAE,QAAS,GAAI,KAAM,OAAQ,SAAU,IAAK,IAAK,GAAK,EAC5D,KAAM,CAAE,QAAS,GAAI,KAAM,OAAQ,SAAU,IAAK,IAAK,GAAK,EAC5D,KAAM,CAAE,QAAS,GAAI,KAAM,OAAQ,SAAU,IAAK,IAAK,GAAK,EAC5D,KAAM,CAAE,QAAS,GAAI,KAAM,OAAQ,SAAU,IAAK,IAAK,GAAK,EAC5D,KAAM,CAAE,QAAS,GAAI,KAAM,OAAQ,SAAU,IAAK,IAAK,GAAK,EAC5D,KAAM,CAAE,QAAS,GAAI,KAAM,OAAQ,SAAU,IAAK,IAAK,GAAK,EAC5D,KAAM,CAAE,QAAS,GAAI,KAAM,OAAQ,SAAU,IAAK,IAAK,GAAK,EAC5D,KAAM,CAAE,QAAS,GAAI,KAAM,OAAQ,SAAU,IAAK,IAAK,GAAK,EAC5D,KAAM,CAAE,QAAS,GAAI,KAAM,OAAQ,SAAU,IAAK,IAAK,GAAK,EAC5D,SAAU,CAAE,QAAS,GAAI,KAAM,WAAY,IAAK,OAAQ,SAAU,CAAG,EACrE,UAAW,CAAE,QAAS,GAAI,KAAM,YAAa,IAAK,OAAQ,SAAU,CAAG,EACvE,YAAa,CAAE,QAAS,GAAI,KAAM,cAAe,IAAK,aAAe,EACrE,eAAgB,CACZ,QAAS,IACT,KAAM,iBACN,IAAK,IACL,SAAU,CACb,EACD,UAAW,CAAE,QAAS,IAAK,KAAM,YAAa,IAAK,IAAK,SAAU,CAAG,EACrE,eAAgB,CACZ,QAAS,IACT,KAAM,iBACN,IAAK,IACL,SAAU,CACb,EACD,aAAc,CAAE,QAAS,IAAK,KAAM,eAAgB,IAAK,IAAK,SAAU,CAAG,EAC3E,GAAI,CAAE,QAAS,IAAK,KAAM,KAAM,IAAK,IAAM,EAC3C,GAAI,CAAE,QAAS,IAAK,KAAM,KAAM,IAAK,IAAM,EAC3C,GAAI,CAAE,QAAS,IAAK,KAAM,KAAM,IAAK,IAAM,EAC3C,GAAI,CAAE,QAAS,IAAK,KAAM,KAAM,IAAK,IAAM,EAC3C,GAAI,CAAE,QAAS,IAAK,KAAM,KAAM,IAAK,IAAM,EAC3C,GAAI,CAAE,QAAS,IAAK,KAAM,KAAM,IAAK,IAAM,EAC3C,GAAI,CAAE,QAAS,IAAK,KAAM,KAAM,IAAK,IAAM,EAC3C,GAAI,CAAE,QAAS,IAAK,KAAM,KAAM,IAAK,IAAM,EAC3C,GAAI,CAAE,QAAS,IAAK,KAAM,KAAM,IAAK,IAAM,EAC3C,IAAK,CAAE,QAAS,IAAK,KAAM,MAAO,IAAK,KAAO,EAC9C,IAAK,CAAE,QAAS,IAAK,KAAM,MAAO,IAAK,KAAO,EAC9C,IAAK,CAAE,QAAS,IAAK,KAAM,MAAO,IAAK,KAAO,EAC9C,IAAK,CAAE,QAAS,IAAK,KAAM,MAAO,IAAK,KAAO,EAC9C,IAAK,CAAE,QAAS,IAAK,KAAM,MAAO,IAAK,KAAO,EAC9C,IAAK,CAAE,QAAS,IAAK,KAAM,MAAO,IAAK,KAAO,EAC9C,IAAK,CAAE,QAAS,IAAK,KAAM,MAAO,IAAK,KAAO,EAC9C,IAAK,CAAE,QAAS,IAAK,KAAM,MAAO,IAAK,KAAO,EAC9C,IAAK,CAAE,QAAS,IAAK,KAAM,MAAO,IAAK,KAAO,EAC9C,IAAK,CAAE,QAAS,IAAK,KAAM,MAAO,IAAK,KAAO,EAC9C,IAAK,CAAE,QAAS,IAAK,KAAM,MAAO,IAAK,KAAO,EAC9C,IAAK,CAAE,QAAS,IAAK,KAAM,MAAO,IAAK,KAAO,EAC9C,IAAK,CAAE,QAAS,IAAK,KAAM,MAAO,IAAK,KAAO,EAC9C,IAAK,CAAE,QAAS,IAAK,KAAM,MAAO,IAAK,KAAO,EAC9C,IAAK,CAAE,QAAS,IAAK,KAAM,MAAO,IAAK,KAAO,EAC9C,QAAS,CAAE,QAAS,IAAK,KAAM,UAAW,IAAK,SAAW,EAC1D,WAAY,CAAE,QAAS,IAAK,KAAM,aAAc,IAAK,YAAc,EACnE,gBAAiB,CACb,QAAS,IACT,KAAM,kBACN,IAAK,iBACR,EACD,gBAAiB,CACb,QAAS,IACT,KAAM,kBACN,IAAK,iBACR,EACD,cAAe,CAAE,QAAS,IAAK,KAAM,gBAAiB,IAAK,eAAiB,EAC5E,eAAgB,CACZ,QAAS,IACT,KAAM,iBACN,IAAK,gBACR,EACD,mBAAoB,CAChB,QAAS,IACT,KAAM,qBACN,IAAK,oBACR,EACD,UAAW,CAAE,QAAS,IAAK,KAAM,YAAa,IAAK,WAAa,EAChE,eAAgB,CACZ,QAAS,IACT,KAAM,iBACN,IAAK,gBACR,EACD,UAAW,CAAE,QAAS,IAAK,KAAM,YAAa,SAAU,IAAK,IAAK,GAAK,EACvE,MAAO,CAAE,QAAS,IAAK,KAAM,QAAS,SAAU,IAAK,IAAK,GAAK,EAC/D,YAAa,CAAE,QAAS,IAAK,KAAM,cAAe,IAAK,IAAK,SAAU,CAAG,EACzE,MAAO,CAAE,QAAS,IAAK,KAAM,QAAS,SAAU,IAAK,IAAK,GAAK,EAC/D,MAAO,CAAE,QAAS,IAAK,KAAM,QAAS,SAAU,IAAK,IAAK,GAAK,EAC/D,OAAQ,CAAE,QAAS,IAAK,KAAM,SAAU,SAAU,IAAK,IAAK,GAAK,EACjE,MAAO,CAAE,QAAS,IAAK,KAAM,QAAS,SAAU,IAAK,IAAK,GAAK,EAC/D,UAAW,CAAE,QAAS,IAAK,KAAM,YAAa,SAAU,IAAK,IAAK,GAAK,EACvE,YAAa,CAAE,QAAS,IAAK,KAAM,cAAe,SAAU,IAAK,IAAK,GAAK,EAC3E,UAAW,CAAE,QAAS,IAAK,KAAM,YAAa,SAAU,IAAK,IAAK,IAAM,EACxE,aAAc,CAAE,QAAS,IAAK,KAAM,eAAgB,SAAU,IAAK,IAAK,GAAK,EAC7E,MAAO,CAAE,QAAS,IAAK,KAAM,QAAS,SAAU,IAAK,IAAK,GAAK,EAC/D,SAAU,CAAE,QAAS,IAAK,KAAM,WAAY,IAAK,UAAY,EAC7D,MAAO,CAAE,QAAS,IAAK,KAAM,QAAS,IAAK,OAAS,EACpD,OAAQ,CAAE,QAAS,EAAG,IAAK,SAAU,KAAM,OAAS,EACpD,MAAO,CAAE,QAAS,GAAI,IAAK,QAAS,KAAM,UAAW,SAAU,CAAG,EAClE,MAAO,CAAE,QAAS,GAAI,IAAK,QAAS,KAAM,YAAa,SAAU,CAAG,EACpE,QAAS,CAAE,QAAS,GAAI,IAAK,UAAW,KAAM,cAAe,SAAU,CAAG,EAC1E,IAAK,CAAE,QAAS,GAAI,IAAK,MAAO,KAAM,UAAW,SAAU,CAAG,EAC9D,OAAQ,CAAE,QAAS,GAAI,IAAK,QAAU,EACtC,WAAY,CAAE,QAAS,GAAI,IAAK,YAAc,EAC9C,IAAK,CAAE,QAAS,GAAI,IAAK,IAAK,KAAM,OAAS,EAC7C,MAAO,CAAE,QAAS,GAAI,IAAK,OAAS,EACpC,QAAS,CAAE,QAAS,GAAI,IAAK,UAAW,KAAM,MAAQ,EACtD,KAAU,CAAE,QAAS,GAAI,IAAK,KAAU,KAAM,gBAAiB,SAAU,CAAG,EAC5E,EAAG,CAAE,QAAS,GAAI,IAAK,IAAK,KAAM,MAAQ,EAC1C,EAAG,CAAE,QAAS,GAAI,IAAK,IAAK,KAAM,MAAQ,EAC1C,EAAG,CAAE,QAAS,GAAI,IAAK,IAAK,KAAM,MAAQ,EAC1C,EAAG,CAAE,QAAS,GAAI,IAAK,IAAK,KAAM,MAAQ,EAC1C,EAAG,CAAE,QAAS,GAAI,IAAK,IAAK,KAAM,MAAQ,EAC1C,EAAG,CAAE,QAAS,GAAI,IAAK,IAAK,KAAM,MAAQ,EAC1C,EAAG,CAAE,QAAS,GAAI,IAAK,IAAK,KAAM,MAAQ,EAC1C,EAAG,CAAE,QAAS,GAAI,IAAK,IAAK,KAAM,MAAQ,EAC1C,EAAG,CAAE,QAAS,GAAI,IAAK,IAAK,KAAM,MAAQ,EAC1C,EAAG,CAAE,QAAS,GAAI,IAAK,IAAK,KAAM,MAAQ,EAC1C,EAAG,CAAE,QAAS,GAAI,IAAK,IAAK,KAAM,MAAQ,EAC1C,EAAG,CAAE,QAAS,GAAI,IAAK,IAAK,KAAM,MAAQ,EAC1C,EAAG,CAAE,QAAS,GAAI,IAAK,IAAK,KAAM,MAAQ,EAC1C,EAAG,CAAE,QAAS,GAAI,IAAK,IAAK,KAAM,MAAQ,EAC1C,EAAG,CAAE,QAAS,GAAI,IAAK,IAAK,KAAM,MAAQ,EAC1C,EAAG,CAAE,QAAS,GAAI,IAAK,IAAK,KAAM,MAAQ,EAC1C,EAAG,CAAE,QAAS,GAAI,IAAK,IAAK,KAAM,MAAQ,EAC1C,EAAG,CAAE,QAAS,GAAI,IAAK,IAAK,KAAM,MAAQ,EAC1C,EAAG,CAAE,QAAS,GAAI,IAAK,IAAK,KAAM,MAAQ,EAC1C,EAAG,CAAE,QAAS,GAAI,IAAK,IAAK,KAAM,MAAQ,EAC1C,EAAG,CAAE,QAAS,GAAI,IAAK,IAAK,KAAM,MAAQ,EAC1C,EAAG,CAAE,QAAS,GAAI,IAAK,IAAK,KAAM,MAAQ,EAC1C,EAAG,CAAE,QAAS,GAAI,IAAK,IAAK,KAAM,MAAQ,EAC1C,EAAG,CAAE,QAAS,GAAI,IAAK,IAAK,KAAM,MAAQ,EAC1C,EAAG,CAAE,QAAS,GAAI,IAAK,IAAK,KAAM,MAAQ,EAC1C,EAAG,CAAE,QAAS,GAAI,IAAK,IAAK,KAAM,MAAQ,EAC1C,KAAM,CAAE,QAAS,GAAI,IAAK,OAAQ,KAAM,WAAY,SAAU,CAAG,EACjE,IAAK,CAAE,QAAS,IAAK,IAAK,IAAK,KAAM,iBAAkB,SAAU,CAAG,EACpE,IAAK,CAAE,QAAS,IAAK,IAAK,IAAK,KAAM,YAAa,SAAU,CAAG,EAC/D,IAAK,CAAE,QAAS,IAAK,IAAK,IAAK,KAAM,iBAAkB,SAAU,CAAG,EACpE,IAAK,CAAE,QAAS,IAAK,IAAK,IAAK,KAAM,eAAgB,SAAU,CAAG,EAClE,IAAK,CAAE,QAAS,IAAK,IAAK,IAAK,KAAM,WAAa,EAClD,IAAK,CAAE,QAAS,IAAK,IAAK,IAAK,KAAM,OAAS,EAC9C,IAAK,CAAE,QAAS,IAAK,IAAK,IAAK,KAAM,OAAS,EAC9C,IAAK,CAAE,QAAS,IAAK,IAAK,IAAK,KAAM,QAAU,EAC/C,IAAK,CAAE,QAAS,IAAK,IAAK,IAAK,KAAM,WAAa,EAClD,IAAK,CAAE,QAAS,IAAK,IAAK,IAAK,KAAM,aAAe,EACpD,KAAM,CAAE,QAAS,IAAK,IAAK,KAAM,KAAM,WAAa,EACpD,IAAK,CAAE,QAAS,IAAK,IAAK,IAAK,KAAM,cAAgB,EACrD,IAAK,CAAE,QAAS,IAAK,IAAK,IAAK,KAAM,OAAS,EAC9C,KAAM,CAAE,QAAS,IAAK,IAAK,MAAQ,EACnC,MAAO,CAAE,QAAS,IAAK,IAAK,QAAS,KAAM,OAAS,EACpD,MAAO,CAAE,QAAS,IAAK,IAAK,OAAS,EACrC,SAAU,CAAE,QAAS,IAAK,IAAK,UAAY,EAC3C,KAAM,CAAE,QAAS,IAAK,IAAK,MAAQ,EACnC,QAAS,CAAE,QAAS,IAAK,IAAK,SAAW,EACzC,IAAK,CAAE,QAAS,GAAI,IAAK,IAAK,KAAM,QAAU,EAC9C,IAAK,CAAE,QAAS,GAAI,IAAK,IAAK,KAAM,QAAU,EAC9C,IAAK,CAAE,QAAS,GAAI,IAAK,IAAK,KAAM,QAAU,EAC9C,IAAK,CAAE,QAAS,GAAI,IAAK,IAAK,KAAM,QAAU,EAC9C,EAAG,CAAE,QAAS,GAAI,IAAK,IAAK,KAAM,QAAU,EAC5C,IAAK,CAAE,QAAS,GAAI,IAAK,IAAK,KAAM,QAAU,EAC9C,IAAK,CAAE,QAAS,GAAI,IAAK,IAAK,KAAM,QAAU,EAC9C,IAAK,CAAE,QAAS,GAAI,IAAK,IAAK,KAAM,QAAU,EAC9C,IAAK,CAAE,QAAS,GAAI,IAAK,IAAK,KAAM,QAAU,EAC9C,EAAG,CAAE,QAAS,GAAI,IAAK,IAAK,KAAM,MAAQ,EAC1C,EAAG,CAAE,QAAS,GAAI,IAAK,IAAK,KAAM,MAAQ,EAC1C,EAAG,CAAE,QAAS,GAAI,IAAK,IAAK,KAAM,MAAQ,EAC1C,EAAG,CAAE,QAAS,GAAI,IAAK,IAAK,KAAM,MAAQ,EAC1C,EAAG,CAAE,QAAS,GAAI,IAAK,IAAK,KAAM,MAAQ,EAC1C,EAAG,CAAE,QAAS,GAAI,IAAK,IAAK,KAAM,MAAQ,EAC1C,EAAG,CAAE,QAAS,GAAI,IAAK,IAAK,KAAM,MAAQ,EAC1C,EAAG,CAAE,QAAS,GAAI,IAAK,IAAK,KAAM,MAAQ,EAC1C,EAAG,CAAE,QAAS,GAAI,IAAK,IAAK,KAAM,MAAQ,EAC1C,EAAG,CAAE,QAAS,GAAI,IAAK,IAAK,KAAM,MAAQ,EAC1C,EAAG,CAAE,QAAS,GAAI,IAAK,IAAK,KAAM,MAAQ,EAC1C,EAAG,CAAE,QAAS,GAAI,IAAK,IAAK,KAAM,MAAQ,EAC1C,EAAG,CAAE,QAAS,GAAI,IAAK,IAAK,KAAM,MAAQ,EAC1C,EAAG,CAAE,QAAS,GAAI,IAAK,IAAK,KAAM,MAAQ,EAC1C,EAAG,CAAE,QAAS,GAAI,IAAK,IAAK,KAAM,MAAQ,EAC1C,EAAG,CAAE,QAAS,GAAI,IAAK,IAAK,KAAM,MAAQ,EAC1C,EAAG,CAAE,QAAS,GAAI,IAAK,IAAK,KAAM,MAAQ,EAC1C,EAAG,CAAE,QAAS,GAAI,IAAK,IAAK,KAAM,MAAQ,EAC1C,EAAG,CAAE,QAAS,GAAI,IAAK,IAAK,KAAM,MAAQ,EAC1C,EAAG,CAAE,QAAS,GAAI,IAAK,IAAK,KAAM,MAAQ,EAC1C,EAAG,CAAE,QAAS,GAAI,IAAK,IAAK,KAAM,MAAQ,EAC1C,EAAG,CAAE,QAAS,GAAI,IAAK,IAAK,KAAM,MAAQ,EAC1C,EAAG,CAAE,QAAS,GAAI,IAAK,IAAK,KAAM,MAAQ,EAC1C,EAAG,CAAE,QAAS,GAAI,IAAK,IAAK,KAAM,MAAQ,EAC1C,EAAG,CAAE,QAAS,GAAI,IAAK,IAAK,KAAM,MAAQ,EAC1C,EAAG,CAAE,QAAS,GAAI,IAAK,IAAK,KAAM,MAAQ,EAC1C,IAAK,CAAE,QAAS,IAAK,IAAK,IAAK,KAAM,WAAa,EAClD,IAAK,CAAE,QAAS,IAAK,IAAK,IAAK,KAAM,OAAS,EAC9C,EAAG,CAAE,QAAS,IAAK,IAAK,IAAK,KAAM,OAAS,EAC5C,IAAK,CAAE,QAAS,IAAK,IAAK,IAAK,KAAM,QAAU,EAC/C,IAAK,CAAE,QAAS,IAAK,IAAK,IAAK,KAAM,OAAS,EAC9C,IAAK,CAAE,QAAS,IAAK,IAAK,IAAK,KAAM,WAAa,EAClD,IAAK,CAAE,QAAS,IAAK,IAAK,IAAK,KAAM,aAAe,EACpD,IAAK,CAAE,QAAS,IAAK,IAAK,IAAK,KAAM,WAAa,EAClD,IAAK,CAAE,QAAS,IAAK,IAAK,IAAK,KAAM,cAAgB,EACrD,IAAK,CAAE,QAAS,IAAK,IAAK,IAAK,KAAM,OAAS,EAC9C,SAAU,CAAE,IAAK,WAAY,KAAM,WAAY,SAAU,CAAG,EAC5D,UAAW,CAAE,IAAK,YAAa,KAAM,YAAa,SAAU,CAAG,EAC/D,OAAQ,CAAE,QAAS,GAAI,IAAK,SAAU,KAAM,SAAU,SAAU,CAAG,EACnE,KAAM,CAAE,IAAK,OAAQ,KAAM,OAAQ,SAAU,CAAG,EAChD,QAAS,CAAE,QAAS,GAAI,IAAK,UAAW,KAAM,UAAW,SAAU,CAAG,EACtE,WAAY,CACR,QAAS,IACT,IAAK,aACL,KAAM,aACN,SAAU,CACb,EACD,SAAU,CAAE,QAAS,IAAK,IAAK,WAAY,KAAM,WAAY,SAAU,CAAG,CAC9E,ECxYA;AAAA;AAAA;AAAA;AAAA,GAWO,MAAMC,WAAoBL,EAAS,CACtC/qB,GACAqrB,GAAe,IAAI,IACnB,WAAa,EACb,YAAY58B,EAAQ,CAChB,QACA,KAAKuR,GAAUvR,CAClB,CACD,aAAaA,EAAQ,CACjB,KAAKuR,GAAUvR,CAClB,CACD,MAAM,KAAKzrB,EAAK8iB,EAAU,CACtB,KAAM,OACN,SAAU,CAAE,CACpB,EAAO,CACC,MAAMwlC,EAAc,KAAKC,GAAyBvoD,CAAG,EAC/CwoD,EAAa,KAAKH,GAAa,IAAIC,EAAY,IAAI,EACzD,KAAKD,GAAa,IAAIC,EAAY,IAAI,EACtC,KAAK,YAAc,KAAKG,GAAaH,EAAY,GAAG,EACpD,MAAM18C,EAAOkX,EAAQ,OAAS,OAAYwlC,EAAY,KAAOxlC,EAAQ,KACrE,MAAM,KAAKka,GAAQ,KAAK,yBAA0B,CAC9C,KAAMpxB,EAAO,UAAY,aACzB,UAAW,KAAK,WAChB,sBAAuB08C,EAAY,QACnC,KAAMA,EAAY,KAClB,IAAKA,EAAY,IACjB,KAAM18C,EACN,eAAgBA,EAChB,WAAA48C,EACA,SAAUF,EAAY,SACtB,SAAUA,EAAY,WAAa,EACnC,SAAUxlC,EAAQ,QAC9B,CAAS,CACJ,CACD2lC,GAAazoD,EAAK,CACd,OAAIA,IAAQ,MACD,EAEPA,IAAQ,UACD,EAEPA,IAAQ,OACD,EAEPA,IAAQ,QACD,EAEJ,CACV,CACDuoD,GAAyBG,EAAW,CAChC,MAAM19C,EAAQ,KAAK,WAAa,EAC1Bs9C,EAAc,CAChB,IAAK,GACL,QAAS,EACT,KAAM,GACN,KAAM,GACN,SAAU,CACtB,EACcK,EAAaR,GAAgBO,CAAS,EAC5CxgC,SAAOygC,EAAY,iBAAiBD,CAAS,GAAG,EAC5CC,EAAW,MACXL,EAAY,IAAMK,EAAW,KAE7B39C,GAAS29C,EAAW,WACpBL,EAAY,IAAMK,EAAW,UAE7BA,EAAW,UACXL,EAAY,QAAUK,EAAW,SAEjC39C,GAAS29C,EAAW,eACpBL,EAAY,QAAUK,EAAW,cAEjCA,EAAW,OACXL,EAAY,KAAOK,EAAW,MAE9BA,EAAW,WACXL,EAAY,SAAWK,EAAW,UAElCL,EAAY,IAAI,SAAW,IAC3BA,EAAY,KAAOA,EAAY,KAE/BK,EAAW,OACXL,EAAY,KAAOK,EAAW,MAE9B39C,GAAS29C,EAAW,YACpBL,EAAY,KAAOK,EAAW,WAG9B,KAAK,WAAa,KAClBL,EAAY,KAAO,IAEhBA,CACV,CACD,MAAM,GAAGtoD,EAAK,CACV,MAAMsoD,EAAc,KAAKC,GAAyBvoD,CAAG,EACrD,KAAK,YAAc,CAAC,KAAKyoD,GAAaH,EAAY,GAAG,EACrD,KAAKD,GAAa,OAAOC,EAAY,IAAI,EACzC,MAAM,KAAKtrB,GAAQ,KAAK,yBAA0B,CAC9C,KAAM,QACN,UAAW,KAAK,WAChB,IAAKsrB,EAAY,IACjB,sBAAuBA,EAAY,QACnC,KAAMA,EAAY,KAClB,SAAUA,EAAY,QAClC,CAAS,CACJ,CACD,MAAM,cAAcp+C,EAAM,CACtB,MAAM,KAAK8yB,GAAQ,KAAK,mBAAoB,CAAE,KAAM9yB,CAAI,CAAE,CAC7D,CACD,UAAUA,EAAM,CACZ,MAAO,CAAC,CAACi+C,GAAgBj+C,CAAI,CAChC,CACD,MAAM,KAAK0B,EAAMkX,EAAU,GAAI,CAC3B,MAAMoZ,EAAQpZ,EAAQ,OAAS,OAC/B,UAAW5Y,KAAQ0B,EACX,KAAK,UAAU1B,CAAI,EACnB,MAAM,KAAK,MAAMA,EAAM,CAAE,MAAAgyB,CAAO,IAG5BA,GACA,MAAM,IAAI,QAAQlpB,GACP,WAAWA,EAAGkpB,CAAK,CAC7B,EAEL,MAAM,KAAK,cAAchyB,CAAI,EAGxC,CACD,MAAM,MAAMlK,EAAK8iB,EAAU,GAAI,CAC3B,KAAM,CAAE,MAAAoZ,EAAQ,IAAM,EAAGpZ,EACzB,MAAM,KAAK,KAAK9iB,EAAK8iB,CAAO,EACxBoZ,GACA,MAAM,IAAI,QAAQlpB,GACP,WAAWA,EAAG8P,EAAQ,KAAK,CACrC,EAEL,MAAM,KAAK,GAAG9iB,CAAG,CACpB,CACL,CACA,MAAM4oD,GAAW9kD,GAAW,CACxB,OAAQA,EAAM,CACV,KAAKkkD,GAAY,KACb,MAAO,GACX,KAAKA,GAAY,MACb,MAAO,GACX,KAAKA,GAAY,OACb,MAAO,GACX,KAAKA,GAAY,KACb,MAAO,GACX,KAAKA,GAAY,QACb,MAAO,GACd,CACL,EAKMa,GAA+BC,GAC7BA,EAAU,EACHd,GAAY,KAEdc,EAAU,EACRd,GAAY,MAEdc,EAAU,EACRd,GAAY,OAEdc,EAAU,EACRd,GAAY,KAEdc,EAAU,GACRd,GAAY,QAEhB,OAKJ,MAAMe,WAAiBd,EAAM,CAChCjrB,GACAgsB,GACA,YAAYv9B,EAAQw9B,EAAU,CAC1B,QACA,KAAKjsB,GAAUvR,EACf,KAAKu9B,GAAYC,CACpB,CACD,aAAax9B,EAAQ,CACjB,KAAKuR,GAAUvR,CAClB,CACDy9B,GAAU,CACN,SAAU,CAAE,EAAG,EAAG,EAAG,CAAG,EACxB,QAAS,CACjB,EACI,GAAIrpB,IAAS,CACT,OAAO,OAAO,OAAO,CAAE,GAAG,KAAKqpB,IAAW,GAAG,KAAKC,EAAa,CAClE,CAEDA,GAAgB,GAChBC,IAAqB,CACjB,MAAMC,EAAc,GACpB,KAAKF,GAAc,KAAKE,CAAW,EACnC,MAAMC,EAAiB,IAAM,CACzB,KAAKH,GAAc,OAAO,KAAKA,GAAc,QAAQE,CAAW,EAAG,CAAC,CAChF,EACQ,MAAO,CACH,OAASE,GAAY,CACjB,OAAO,OAAOF,EAAaE,CAAO,CACrC,EACD,OAAQ,IAAM,CACV,KAAKL,GAAU,CAAE,GAAG,KAAKA,GAAS,GAAGG,GACrCC,GACH,EACD,SAAUA,CACtB,CACK,CAKD,KAAME,GAAiBvgD,EAAQ,CAC3B,KAAM,CAAE,OAAAwgD,EAAQ,OAAAC,EAAQ,SAAAC,CAAQ,EAAK,KAAKP,KAC1C,GAAI,CACA,MAAMngD,EAAOwgD,CAAM,EACnBC,GACH,OACM/1C,EAAO,CACV,MAAAg2C,IACMh2C,CACT,CACJ,CACD,MAAM,OAAQ,CACV,MAAMiJ,EAAU,GAChB,SAAW,CAACgtC,EAAM9lD,CAAM,GAAK,CACzB,CAAC,EAA8BkkD,GAAY,IAAI,EAC/C,CAAC,EAAgCA,GAAY,MAAM,EACnD,CAAC,EAA+BA,GAAY,KAAK,EACjD,CAAC,GAAkCA,GAAY,OAAO,EACtD,CAAC,EAA8BA,GAAY,IAAI,CAC3D,EACgB,KAAKnoB,GAAO,QAAU+pB,GACtBhtC,EAAQ,KAAK,KAAK,GAAG,CAAE,OAAQ9Y,CAAQ,EAAC,GAG5C,KAAK+7B,GAAO,SAAS,IAAM,GAAK,KAAKA,GAAO,SAAS,IAAM,IAC3DjjB,EAAQ,KAAK,KAAK,KAAK,EAAG,CAAC,CAAC,EAEhC,MAAM,QAAQ,IAAIA,CAAO,CAC5B,CACD,MAAM,KAAKxP,EAAGC,EAAGyV,EAAU,GAAI,CAC3B,KAAM,CAAE,MAAA5d,EAAQ,CAAG,EAAG4d,EAChBtC,EAAO,KAAKqf,GAAO,SACnBhsB,EAAK,CAAE,EAAAzG,EAAG,EAAAC,GAChB,QAAShN,EAAI,EAAGA,GAAK6E,EAAO7E,IACxB,MAAM,KAAKmpD,GAAiBK,GAAe,CACvCA,EAAY,CACR,SAAU,CACN,EAAGrpC,EAAK,GAAK3M,EAAG,EAAI2M,EAAK,IAAMngB,EAAI6E,GACnC,EAAGsb,EAAK,GAAK3M,EAAG,EAAI2M,EAAK,IAAMngB,EAAI6E,EACtC,CACrB,CAAiB,EACD,KAAM,CAAE,QAAA4jD,EAAS,SAAAgB,GAAa,KAAKjqB,GACnC,OAAO,KAAK7C,GAAQ,KAAK,2BAA4B,CACjD,KAAM,aACN,UAAW,KAAKgsB,GAAU,WAC1B,QAAAF,EACA,OAAQD,GAA4BC,CAAO,EAC3C,GAAGgB,CACvB,CAAiB,CACjB,CAAa,CAER,CACD,MAAM,KAAKhnC,EAAU,GAAI,CACrB,KAAM,CAAE,OAAAhf,EAASkkD,GAAY,KAAM,WAAA+B,EAAa,CAAG,EAAGjnC,EAChD8mC,EAAOhB,GAAQ9kD,CAAM,EAC3B,GAAI,CAAC8lD,EACD,MAAM,IAAI,MAAM,6BAA6B9lD,CAAM,EAAE,EAEzD,GAAI,KAAK+7B,GAAO,QAAU+pB,EACtB,MAAM,IAAI,MAAM,IAAI9lD,CAAM,uBAAuB,EAErD,MAAM,KAAK0lD,GAAiBK,GAAe,CACvCA,EAAY,CACR,QAAS,KAAKhqB,GAAO,QAAU+pB,CAC/C,CAAa,EACD,KAAM,CAAE,QAAAd,EAAS,SAAAgB,GAAa,KAAKjqB,GACnC,OAAO,KAAK7C,GAAQ,KAAK,2BAA4B,CACjD,KAAM,eACN,UAAW,KAAKgsB,GAAU,WAC1B,WAAAe,EACA,QAAAjB,EACA,OAAAhlD,EACA,GAAGgmD,CACnB,CAAa,CACb,CAAS,CACJ,CACD,MAAM,GAAGhnC,EAAU,GAAI,CACnB,KAAM,CAAE,OAAAhf,EAASkkD,GAAY,KAAM,WAAA+B,EAAa,CAAG,EAAGjnC,EAChD8mC,EAAOhB,GAAQ9kD,CAAM,EAC3B,GAAI,CAAC8lD,EACD,MAAM,IAAI,MAAM,6BAA6B9lD,CAAM,EAAE,EAEzD,GAAI,EAAE,KAAK+7B,GAAO,QAAU+pB,GACxB,MAAM,IAAI,MAAM,IAAI9lD,CAAM,mBAAmB,EAEjD,MAAM,KAAK0lD,GAAiBK,GAAe,CACvCA,EAAY,CACR,QAAS,KAAKhqB,GAAO,QAAU,CAAC+pB,CAChD,CAAa,EACD,KAAM,CAAE,QAAAd,EAAS,SAAAgB,GAAa,KAAKjqB,GACnC,OAAO,KAAK7C,GAAQ,KAAK,2BAA4B,CACjD,KAAM,gBACN,UAAW,KAAKgsB,GAAU,WAC1B,WAAAe,EACA,QAAAjB,EACA,OAAAhlD,EACA,GAAGgmD,CACnB,CAAa,CACb,CAAS,CACJ,CACD,MAAM,MAAM18C,EAAGC,EAAGyV,EAAU,GAAI,CAC5B,KAAM,CAAE,MAAAoZ,EAAO,MAAAtuB,EAAQ,EAAG,WAAAm8C,EAAan8C,CAAO,EAAGkV,EACjD,GAAIlV,EAAQ,EACR,MAAM,IAAI,MAAM,8CAA8C,EAElE,MAAMgP,EAAU,CAAC,KAAK,KAAKxP,EAAGC,CAAC,CAAC,EAChC,GAAI08C,IAAen8C,EACf,QAASvN,EAAI,EAAGA,EAAIuN,EAAO,EAAEvN,EACzBuc,EAAQ,KAAK,KAAK,KAAK,CAAE,GAAGkG,EAAS,WAAYziB,CAAC,CAAE,EAAG,KAAK,GAAG,CAAE,GAAGyiB,EAAS,WAAYziB,CAAG,EAAC,EAGrGuc,EAAQ,KAAK,KAAK,KAAK,CAAE,GAAGkG,EAAS,WAAAinC,CAAY,EAAC,EAC9C,OAAO7tB,GAAU,WACjB,MAAM,QAAQ,IAAItf,CAAO,EACzBA,EAAQ,OAAS,EACjB,MAAM,IAAI,QAAQzQ,GAAW,CACzB,WAAWA,EAAS+vB,CAAK,CACzC,CAAa,GAELtf,EAAQ,KAAK,KAAK,GAAG,CAAE,GAAGkG,EAAS,WAAAinC,CAAY,EAAC,EAChD,MAAM,QAAQ,IAAIntC,CAAO,CAC5B,CACD,MAAM,MAAMkG,EAAU,GAAI,CACtB,KAAM,CAAE,OAAAknC,EAAS,EAAG,OAAAC,EAAS,CAAC,EAAKnnC,EAC7B,CAAE,SAAAgnC,EAAU,QAAAhB,GAAY,KAAKjpB,GACnC,MAAM,KAAK7C,GAAQ,KAAK,2BAA4B,CAChD,KAAM,aACN,YAAa,QACb,UAAW,KAAKgsB,GAAU,WAC1B,OAAAiB,EACA,OAAAD,EACA,QAAAlB,EACA,GAAGgB,CACf,CAAS,CACJ,CACD,MAAM,KAAKI,EAAO5qD,EAAQ,CACtB,MAAM4f,EAAU,IAAI,QAAQ/S,GAAW,CACnC,KAAK6wB,GAAQ,KAAK,wBAAyBj8B,GAChCoL,EAAQpL,EAAM,IAAI,CAC5B,CACb,CAAS,EACD,aAAM,KAAK,KAAKmpD,EAAM,EAAGA,EAAM,CAAC,EAChC,MAAM,KAAK,OACX,MAAM,KAAK,KAAK5qD,EAAO,EAAGA,EAAO,CAAC,EAC3B,MAAM4f,CAChB,CACD,MAAM,UAAU5f,EAAQkC,EAAM,CAC1B,MAAM,KAAKw7B,GAAQ,KAAK,0BAA2B,CAC/C,KAAM,YACN,EAAG19B,EAAO,EACV,EAAGA,EAAO,EACV,UAAW,KAAK0pD,GAAU,WAC1B,KAAAxnD,CACZ,CAAS,CACJ,CACD,MAAM,SAASlC,EAAQkC,EAAM,CACzB,MAAM,KAAKw7B,GAAQ,KAAK,0BAA2B,CAC/C,KAAM,WACN,EAAG19B,EAAO,EACV,EAAGA,EAAO,EACV,UAAW,KAAK0pD,GAAU,WAC1B,KAAAxnD,CACZ,CAAS,CACJ,CACD,MAAM,KAAKlC,EAAQkC,EAAM,CACrB,MAAM,KAAKw7B,GAAQ,KAAK,0BAA2B,CAC/C,KAAM,OACN,EAAG19B,EAAO,EACV,EAAGA,EAAO,EACV,UAAW,KAAK0pD,GAAU,WAC1B,KAAAxnD,CACZ,CAAS,CACJ,CACD,MAAM,YAAY0oD,EAAO5qD,EAAQwjB,EAAU,GAAI,CAC3C,KAAM,CAAE,MAAAoZ,EAAQ,IAAM,EAAGpZ,EACnBthB,EAAO,MAAM,KAAK,KAAK0oD,EAAO5qD,CAAM,EAC1C,MAAM,KAAK,UAAUA,EAAQkC,CAAI,EACjC,MAAM,KAAK,SAASlC,EAAQkC,CAAI,EAC5B06B,GACA,MAAM,IAAI,QAAQ/vB,GACP,WAAWA,EAAS+vB,CAAK,CACnC,EAEL,MAAM,KAAK,KAAK58B,EAAQkC,CAAI,EAC5B,MAAM,KAAK,IACd,CACL,CAIO,MAAM2oD,WAAuBjC,EAAY,CAC5ClrB,GACAgsB,GACA,YAAYv9B,EAAQw9B,EAAU,CAC1B,QACA,KAAKjsB,GAAUvR,EACf,KAAKu9B,GAAYC,CACpB,CACD,aAAax9B,EAAQ,CACjB,KAAKuR,GAAUvR,CAClB,CACD,MAAM,WAAWre,EAAGC,EAAG,CACnB,MAAM,KAAK2vB,GAAQ,KAAK,2BAA4B,CAChD,KAAM,aACN,YAAa,CACT,CACI,EAAG,KAAK,MAAM5vB,CAAC,EACf,EAAG,KAAK,MAAMC,CAAC,EACf,QAAS,GACT,QAAS,GACT,MAAO,EACV,CACJ,EACD,UAAW,KAAK27C,GAAU,UACtC,CAAS,CACJ,CACD,MAAM,UAAU57C,EAAGC,EAAG,CAClB,MAAM,KAAK2vB,GAAQ,KAAK,2BAA4B,CAChD,KAAM,YACN,YAAa,CACT,CACI,EAAG,KAAK,MAAM5vB,CAAC,EACf,EAAG,KAAK,MAAMC,CAAC,EACf,QAAS,GACT,QAAS,GACT,MAAO,EACV,CACJ,EACD,UAAW,KAAK27C,GAAU,UACtC,CAAS,CACJ,CACD,MAAM,UAAW,CACb,MAAM,KAAKhsB,GAAQ,KAAK,2BAA4B,CAChD,KAAM,WACN,YAAa,CAAE,EACf,UAAW,KAAKgsB,GAAU,UACtC,CAAS,CACJ,CACL,CChcO,MAAMoB,EAAQ,CACjBptB,GACAqtB,GAAa,GACbC,GAIA,YAAY7+B,EAAQ,CAChB,KAAKuR,GAAUvR,CAClB,CAID,aAAaA,EAAQ,CACjB,KAAKuR,GAAUvR,CAClB,CAQD,MAAM,MAAM3I,EAAU,GAAI,CACtBoF,EAAO,CAAC,KAAKmiC,GAAY,6DAA6D,EACtF,MAAME,EAAoB,CACtB,KACA,oBACA,aACA,wCACA,8CACA,WACA,gBACA,oBACA,cACA,8CACA,qCACZ,EACc,CAAE,KAAAzhD,EAAM,YAAA0hD,EAAc,GAAO,WAAA/qD,EAAa8qD,CAAmB,EAAGznC,EAClE0nC,GACA/qD,EAAW,KAAK,yCAAyC,EAE7D,MAAMgrD,EAAqBhrD,EACtB,OAAOirD,GACDA,EAAI,WAAW,GAAG,CAC5B,EACI,IAAIA,GACEA,EAAI,MAAM,CAAC,CACrB,EACKC,EAAqBlrD,EAAW,OAAOirD,GAClC,CAACA,EAAI,WAAW,GAAG,CAC7B,EACD,KAAKJ,GAAQxhD,EACb,KAAKuhD,GAAa,GAClB,MAAM,KAAKrtB,GAAQ,KAAK,gBAAiB,CACrC,aAAc,iBACd,YAAa,CACT,mBAAAytB,EACA,mBAAAE,CACH,CACb,CAAS,CACJ,CAKD,MAAM,MAAO,CACT,MAAMC,EAAkB/8B,EAAS,SACjC,YAAKmP,GAAQ,KAAK,0BAA2B,MAAOj8B,GAAU,CAC1D,GAAI,CACAmnB,EAAOnnB,EAAM,OAAQ,kBAAkB,EACvC,MAAMsqB,EAAW,MAAMG,GAA8B,KAAKwR,GAASj8B,EAAM,MAAM,EACzE2nB,EAAa,MAAM0C,GAAwBC,EAAU,KAAKi/B,EAAK,EACrEM,EAAgB,QAAQliC,GAAc,MAAS,CAClD,OACM/U,EAAO,CACNgd,GAAYhd,CAAK,EACjBi3C,EAAgB,OAAOj3C,CAAK,EAG5Bi3C,EAAgB,OAAO,IAAI,MAAM,kBAAkBj3C,CAAK,EAAE,CAAC,CAElE,CACb,CAAS,EACD,MAAM,KAAKqpB,GAAQ,KAAK,aAAa,EACrC,KAAKqtB,GAAa,GACX,MAAMO,EAAgB,cAChC,CACL,CC5GA;AAAA;AAAA;AAAA;AAAA,GAmCO,MAAMC,WAAkBtjC,CAAa,CAIxC,gBAAkB,IAAI8K,GACtBsJ,GAIA,YAAYpR,EAAK,CACb,QACA,KAAKoR,GAAOpR,CACf,CAID,KAAM,CACF,OAAO,KAAKoR,EACf,CAwBD,MAAM,SAASlG,KAAS3e,EAAM,CAC1B,OAAA2e,EAAO7K,GAA6B,KAAK,SAAS,KAAM6K,CAAI,EACrD,MAAM,KAAK,UAAW,EAAC,SAASA,EAAM,GAAG3e,CAAI,CACvD,CAiBD,MAAM,eAAe2e,KAAS3e,EAAM,CAChC,OAAA2e,EAAO7K,GAA6B,KAAK,eAAe,KAAM6K,CAAI,EAC3D,MAAM,KAAK,UAAW,EAAC,eAAeA,EAAM,GAAG3e,CAAI,CAC7D,CACD,MAAM,OAAQ,CACV,MAAM,IAAIiT,GAAqB,oCAAoC,CACtE,CACL,CC7FO,MAAM+gC,WAAqBD,EAAU,CACxCzW,GACApX,GACAjN,GACA6B,GACA,YAAYnG,EAAQlB,EAAKgS,EAAUxK,EAAYg5B,EAAkBC,EAAiB,CAC9E,MAAMzgC,CAAG,EACT,KAAKwF,GAAMwM,EACX,KAAKS,GAAUvR,EACf,KAAKmG,GAAcG,EACnB,KAAKqiB,GAAS,IAAIkG,GAAc,KAAM,IAAIjoB,EAAiB,EAC3D,KAAK2K,GAAQ,KAAK,kCAAmC,MAAOj8B,GAAU,CAClE,KAAKqzC,GAAO,WAAW,IAAImB,GAAiB9pB,EAAQ1qB,EAAM,QAAS,KAAKqzC,EAAM,CAAC,CAC3F,CAAS,EACD,KAAKA,GAAO,QAAQ,GAAG,mBAAoB,MAAOrzC,GAAU,CACxD,GAAI,CACA,OAAOgqD,EAAiBhqD,EAAM,KAAMA,EAAM,KAAK,IAAK8pB,GACzC,IAAIqpB,GAAY,KAAKE,GAAQvpB,CAAM,CAC7C,EAAG9pB,EAAM,UAAU,CACvB,OACMwM,EAAK,CACR2c,EAAW3c,CAAG,CACjB,CACb,CAAS,EACD,KAAKyvB,GAAQ,GAAG,0BAA2BguB,CAAe,EAC1D,KAAKhuB,GAAQ,KAAKrP,EAAgB,aAAc,IAAM,CAClD,KAAKymB,GAAO,SACxB,CAAS,EAED,KAAKpX,GAAQ,KAAK,gBAAgB,EAAE,MAAM9S,CAAU,CACvD,CACD,WAAY,CACR,OAAO,KAAKkqB,EACf,CACD,IAAI,QAAS,CACT,OAAO,KAAKpX,EACf,CACD,MAAM,OAAQ,CACV,OAAQ,KAAKpL,GAAW,CACpB,KAAKnB,GAAW,eAChB,KAAKA,GAAW,cAAe,CAG3B,MAAM,KAAK,OAAO,WAAU,GAAI,KAAK,qBAAsB,CACvD,SAAU,KAAKV,EACnC,CAAiB,EACD,MAAM,KAAK,OAAO,WAAU,GAAI,KAAK,0BAA2B,CAC5D,UAAW,KAAK,OAAO,GAAI,CAC/C,CAAiB,EACD,KACH,CACD,QACI,MAAM,KAAK,SAAS,IAAM,CACtB,KAAK,MAAK,CAC9B,CAAiB,CACR,CACJ,CACL,CCpEA;AAAA;AAAA;AAAA;AAAA,GAKA,IAAIZ,GAAoE,SAAUC,EAAKxpB,EAAOwX,EAAO,CACjG,GAAIxX,GAAU,KAA0B,CACpC,GAAI,OAAOA,GAAU,UAAY,OAAOA,GAAU,WAAY,MAAM,IAAI,UAAU,kBAAkB,EACpG,IAAIypB,EAASC,EACb,GAAIlS,EAAO,CACP,GAAI,CAAC,OAAO,aAAc,MAAM,IAAI,UAAU,qCAAqC,EACnFiS,EAAUzpB,EAAM,OAAO,YAAY,CACtC,CACD,GAAIypB,IAAY,OAAQ,CACpB,GAAI,CAAC,OAAO,QAAS,MAAM,IAAI,UAAU,gCAAgC,EACzEA,EAAUzpB,EAAM,OAAO,OAAO,EAC1BwX,IAAOkS,EAAQD,EACtB,CACD,GAAI,OAAOA,GAAY,WAAY,MAAM,IAAI,UAAU,wBAAwB,EAC3EC,IAAOD,EAAU,UAAW,CAAE,GAAI,CAAEC,EAAM,KAAK,IAAI,CAAI,OAAQ3c,EAAG,CAAE,OAAO,QAAQ,OAAOA,CAAC,CAAE,IACjGyc,EAAI,MAAM,KAAK,CAAE,MAAOxpB,EAAO,QAASypB,EAAS,MAAOjS,CAAK,CAAE,CAClE,MACQA,GACLgS,EAAI,MAAM,KAAK,CAAE,MAAO,EAAM,GAElC,OAAOxpB,CACX,EACI2pB,GAA2D,SAAUC,EAAiB,CACtF,OAAO,SAAUJ,EAAK,CAClB,SAASK,EAAK9c,EAAG,CACbyc,EAAI,MAAQA,EAAI,SAAW,IAAII,EAAgB7c,EAAGyc,EAAI,MAAO,0CAA0C,EAAIzc,EAC3Gyc,EAAI,SAAW,EAClB,CACD,SAAS3X,GAAO,CACZ,KAAO2X,EAAI,MAAM,QAAQ,CACrB,IAAIM,EAAMN,EAAI,MAAM,IAAG,EACvB,GAAI,CACA,IAAIjqB,EAASuqB,EAAI,SAAWA,EAAI,QAAQ,KAAKA,EAAI,KAAK,EACtD,GAAIA,EAAI,MAAO,OAAO,QAAQ,QAAQvqB,CAAM,EAAE,KAAKsS,EAAM,SAAS9E,EAAG,CAAE,OAAA8c,EAAK9c,CAAC,EAAU8E,EAAI,CAAG,CAAE,CACnG,OACM9E,EAAG,CACN8c,EAAK9c,CAAC,CACT,CACJ,CACD,GAAIyc,EAAI,SAAU,MAAMA,EAAI,KAC/B,CACD,OAAO3X,EAAI,CACnB,CACA,EAAG,OAAO,iBAAoB,WAAa,gBAAkB,SAAU9D,EAAOgc,EAAYxH,EAAS,CAC/F,IAAIxV,EAAI,IAAI,MAAMwV,CAAO,EACzB,OAAOxV,EAAE,KAAO,kBAAmBA,EAAE,MAAQgB,EAAOhB,EAAE,WAAagd,EAAYhd,CACnF,CAAC,EA6BD,SAASs4C,GAA2B/4B,EAAQ,CACxC,OAAQA,EAAM,CACV,IAAK,UACD,MAAO,OACX,QACI,OAAOA,CACd,CACL,CAIO,MAAMg5B,WAAgBj0B,EAAK,CAC9B,aAAa,QAAQxL,EAAQnsB,EAAQ6rD,EAAiB,CAClD,MAAM7+C,EAAO,IAAI4+C,GAAQz/B,EAAQnsB,CAAM,EAEvC,GADA,MAAMgN,EAAK8+C,KACPD,EACA,GAAI,CACA,MAAM7+C,EAAK,YAAY6+C,CAAe,CACzC,OACM59C,EAAK,CACR,GAAIojB,GAAYpjB,CAAG,GAAKmvB,GAAoBnvB,CAAG,EAC3C2c,EAAW3c,CAAG,MAGd,OAAMA,CAEb,CAEL,OAAOjB,CACV,CACDyvB,GAAU,GACVsvB,GACAC,GACAC,GACAC,GACAC,GACAzC,GACA0C,GACAC,GACA/W,GACAgX,GACAC,GACAjW,GAAY,IAAI,IAChBkW,GAAoB,IAAI,IACxBC,GACAC,GACAC,GAAW,IAAI,IACfC,GAAwB,IAAI,IAC5BC,GAAwBt+B,EAAS,SACjCu+B,GAAyB,GACzBC,GAA+B,GAC/B,YAAY5gC,EAAQnsB,EAAQ,CACxB,QACA,KAAKgsD,GAAuB7/B,EAC5B,KAAK+/B,GAAmB//B,EAAO,gBAC/BvD,EAAO,KAAKsjC,GAAkB,oCAAoC,EAClE,KAAKC,GAAa,KAAKD,GAAiB,QAAO,EAC/CtjC,EAAO,KAAKujC,GAAY,4BAA4B,EACpD,KAAKF,GAAiBjsD,EACtB,KAAK+rD,GAAiB/rD,EAAO,iBAC7B,KAAK0pD,GAAY,IAAIZ,GAAY38B,CAAM,EACvC,KAAKigC,GAAS,IAAI3C,GAASt9B,EAAQ,KAAKu9B,EAAS,EACjD,KAAK2C,GAAe,IAAIxB,GAAe1+B,EAAQ,KAAKu9B,EAAS,EAC7D,KAAKpU,GAAgB,IAAI0R,GAAa76B,EAAQ,KAAM,KAAK,gBAAgB,EACzE,KAAKmgC,GAAoB,IAAIzrB,GAAiB1U,CAAM,EACpD,KAAKogC,GAAW,IAAIzB,GAAQ3+B,CAAM,EAClC,KAAKsgC,GAAY,IAAIpvB,GAASlR,CAAM,EACpC,KAAKugC,GAAY,KACjB,MAAMM,EAAsB,IAAI/kC,EAAa,KAAKqtB,EAAa,EAC/D0X,EAAoB,GAAGjT,GAAkB,cAAe5rC,GAAS,CAC7D,KAAK,KAAK,gBAA+CA,CAAK,CAC1E,CAAS,EACD6+C,EAAoB,GAAGjT,GAAkB,cAAe5rC,GAAS,CAC7D,KAAK,KAAK,gBAA+CA,CAAK,CAC1E,CAAS,EACD6+C,EAAoB,GAAGjT,GAAkB,eAAgB5rC,GAAS,CAC9D,KAAK,KAAK,iBAAiDA,CAAK,CAC5E,CAAS,EACD6+C,EAAoB,GAAGjT,GAAkB,iBAAkB,CAAC,CAAChF,EAAOtzC,CAAK,IAAM,CAC3E,KAAK40C,GAActB,EAAOtzC,CAAK,CAC3C,CAAS,EACDurD,EAAoB,GAAGjT,GAAkB,cAAe,CAAC,CAAChF,EAAOtzC,CAAK,IAAM,CACnE,KAAK20C,GAAiBrB,EAAOtzC,CAAK,CACnD,CAAS,EACD,MAAM07C,EAAwB,IAAIl1B,EAAa,KAAKqtB,GAAc,cAAc,EAChF6H,EAAsB,GAAGriB,GAAoB,QAASjJ,GAAW,CAC7D,KAAK,KAAK,UAAmCA,CAAO,CAChE,CAAS,EACDsrB,EAAsB,GAAGriB,GAAoB,uBAAwBjJ,GAAW,CAC5E,KAAK,KAAK,yBAAiEA,CAAO,CAC9F,CAAS,EACDsrB,EAAsB,GAAGriB,GAAoB,SAAU3C,GAAY,CAC/D,KAAK,KAAK,WAAqCA,CAAQ,CACnE,CAAS,EACDglB,EAAsB,GAAGriB,GAAoB,cAAejJ,GAAW,CACnE,KAAK,KAAK,gBAA+CA,CAAO,CAC5E,CAAS,EACDsrB,EAAsB,GAAGriB,GAAoB,gBAAiBjJ,GAAW,CACrE,KAAK,KAAK,kBAAmDA,CAAO,CAChF,CAAS,EACD,KAAKq6B,GAAiB,GAAG79B,EAAgB,QAAS,KAAK4+B,GAAc,KAAK,IAAI,CAAC,EAC/E,KAAKf,GAAiB,GAAG79B,EAAgB,MAAO,KAAK6+B,GAAmB,KAAK,IAAI,CAAC,EAClF,KAAKnB,GAAe,GAAG,aAAkD,KAAKoB,EAAqB,EACnG,KAAKhB,GAAW,kBACX,aAAc,EACd,KAAK,IAAM,CACZ,KAAKJ,GAAe,IAAI,aAAkD,KAAKoB,EAAqB,EACpG,KAAK,KAAK,QAA+B,MAAS,EAClD,KAAK1wB,GAAU,EAC3B,CAAS,EACI,MAAM7R,CAAU,EACrB,KAAKwiC,GAA4B,EACjC,KAAKC,GAAsB,CAC9B,CACDA,IAAyB,CACrB,MAAMC,EAAQ,GACd,UAAWC,KAAe,KAAKxB,GAAe,gBAAgB,KAAKE,EAAc,EAC7EqB,EAAM,KAAKC,CAAW,EAE1B,IAAI7nD,EAAM,EACV,KAAOA,EAAM4nD,EAAM,QAAQ,CACvB,MAAMn1C,EAAOm1C,EAAM5nD,CAAG,EACtBA,IACA,MAAMo3B,EAAU3kB,EAAK,WACjB2kB,GACA,KAAK6I,GAAoB7I,CAAO,EAEpC,UAAWywB,KAAe,KAAKxB,GAAe,gBAAgB5zC,CAAI,EAC9Dm1C,EAAM,KAAKC,CAAW,CAE7B,CACJ,CACD,KAAMN,GAAcO,EAAY,CAC5B,KAAKxB,GAAuBwB,EAC5B5kC,EAAO,KAAKojC,cAAgC55B,GAAe,8CAA8C,EACzG,KAAK65B,GAAiB,KAAKD,GAAqB,QAAO,EACvDpjC,EAAO,KAAKqjC,GAAgB,wBAAwB,EACpD,KAAKvC,GAAU,aAAa8D,CAAU,EACtC,KAAKpB,GAAO,aAAaoB,CAAU,EACnC,KAAKnB,GAAa,aAAamB,CAAU,EACzC,KAAKlB,GAAkB,aAAakB,CAAU,EAC9C,KAAKjB,GAAS,aAAaiB,CAAU,EACrC,KAAKf,GAAU,aAAae,CAAU,EACtC,MAAM,KAAKlY,GAAc,cAAckY,CAAU,EACjD,KAAKJ,GAA4B,CACpC,CACD,KAAMF,GAAmBpwB,EAAS,CAC9BlU,EAAOkU,aAAmB1K,EAAa,EACnC0K,EAAQ,QAAO,EAAG,SAAQ,IAAO,cAGrC,KAAKwY,GAAc,2BAA2BxY,CAAO,EAAE,MAAMlS,CAAU,EACvE,KAAK0hC,GACA,2BAA2BxvB,CAAO,EAClC,MAAMlS,CAAU,EACxB,CAKDwiC,IAA+B,CAC3B,MAAM9uB,EAAgB,IAAIrW,EAAa,KAAK+jC,EAAoB,EAChE1tB,EAAc,GAAGjQ,EAAgB,MAAO,KAAKsX,EAAmB,EAChErH,EAAc,GAAGjQ,EAAgB,aAAc,IAAM,CACjD,KAAKw+B,GAAsB,OAAO,IAAIniC,GAAiB,eAAe,CAAC,CACnF,CAAS,EACD4T,EAAc,GAAG,4BAA6B,IAAM,CAChD,KAAK,KAAK,mBAAqD,MAAS,CACpF,CAAS,EACDA,EAAc,GAAG,sBAAuB,IAAM,CAC1C,KAAK,KAAK,OAA6B,MAAS,CAC5D,CAAS,EACDA,EAAc,GAAG,+BAAgC,KAAKmvB,GAAU,KAAK,IAAI,CAAC,EAC1EnvB,EAAc,GAAG,0BAA2B,KAAKovB,GAAiB,KAAK,IAAI,CAAC,EAC5EpvB,EAAc,GAAG,0BAA2B,KAAKqvB,GAAiB,KAAK,IAAI,CAAC,EAC5ErvB,EAAc,GAAG,sBAAuB,KAAKsvB,GAAa,KAAK,IAAI,CAAC,EACpEtvB,EAAc,GAAG,iBAAkB,KAAKuvB,GAAiB,KAAK,IAAI,CAAC,EACnEvvB,EAAc,GAAG,yBAA0B,KAAKwvB,GAAe,KAAK,IAAI,CAAC,CAC5E,CACDX,GAAyBntD,GAAW,CAChC,MAAM0yB,EAAY1yB,EAAO,SAAU,GAAE,GAAE,EACjC+tD,EAAS,KAAKpB,GAAS,IAAIj6B,CAAS,EACrCq7B,IAGL,KAAKpB,GAAS,OAAOj6B,CAAS,EAC9B,KAAK,KAAK,kBAAmDq7B,CAAM,EAC3E,EACIpoB,GAAuB7I,GAAY,CAG/B,GAFAlU,EAAOkU,aAAmB1K,EAAa,EACvC,KAAKkjB,GAAc,mBAAmBxY,EAAQ,QAAS,GACnDA,EAAQ,QAAS,EAAC,eAAc,EAAG,OAAS,SAAU,CACtD,MAAMixB,EAAS,IAAIvC,GAAa1uB,EAASA,EAAQ,UAAU,MAAOA,EAAQ,QAAO,EAAG,UAAWA,EAAQ,QAAO,EAAG,KAAI,EAAI,KAAKkxB,GAAmB,KAAK,IAAI,EAAG,KAAKN,GAAiB,KAAK,IAAI,CAAC,EAC7L,KAAKf,GAAS,IAAI7vB,EAAQ,GAAE,EAAIixB,CAAM,EACtC,KAAK,KAAK,gBAA+CA,CAAM,CAClE,CACDjxB,EAAQ,GAAGzO,EAAgB,MAAO,KAAKsX,EAAmB,CAClE,EACI,KAAMmmB,IAAc,CAChB,GAAI,CACA,MAAM,QAAQ,IAAI,CACd,KAAKxW,GAAc,WAAW,KAAK0W,EAAoB,EACvD,KAAKA,GAAqB,KAAK,oBAAoB,EACnD,KAAKA,GAAqB,KAAK,YAAY,CAC3D,CAAa,CACJ,OACM/9C,EAAK,CACR,GAAIojB,GAAYpjB,CAAG,GAAKmvB,GAAoBnvB,CAAG,EAC3C2c,EAAW3c,CAAG,MAGd,OAAMA,CAEb,CACJ,CACD,KAAM6/C,GAAersD,EAAO,CACxB,MAAMwvB,EAAQ,CAAE,MAAO,CAAE,EAAE,MAAO,OAAQ,SAAU,IACpD,GAAI,CACA,GAAI,CAAC,KAAK27B,GAAsB,KAC5B,OAEJ,MAAMz+C,EAAQ,KAAKmnC,GAAc,MAAM7zC,EAAM,OAAO,EACpDmnB,EAAOza,EAAO,2BAA2B,EAEzC,MAAMkB,EAASwgB,GAAwBoB,EAAQ,MAAM9iB,EAAM,OAAOwtC,EAAU,EAAE,iBAAiBl6C,EAAM,aAAa,EAAI,EAAK,EACrHwsD,EAAc,IAAIxzB,GAAYprB,EAAO,KAAI,EAAI5N,CAAK,EACxD,UAAWme,KAAW,KAAKgtC,GACvBhtC,EAAQ,QAAQquC,CAAW,EAE/B,KAAKrB,GAAsB,OAC9B,OACM52C,EAAK,CACRib,EAAM,MAAQjb,EACdib,EAAM,SAAW,EACpB,QACO,CACJhB,GAAmBgB,CAAK,CAC3B,CACJ,CACD,SAAU,CACN,OAAO,KAAK+6B,EACf,CACD,yBAA0B,CACtB,OAAO,KAAKc,EACf,CACD,2BAA4B,CACxB,OAAO,KAAKC,EACf,CACD,qBAAsB,CAClB,OAAO,KAAKT,GAAkB,iBACjC,CACD,MAAM,mBAAmB9oC,EAAU,GAAI,CACnC,MAAMssB,EAAc,KAAK8c,GAAsB,OAAS,EAClD,CAAE,QAAA1mD,EAAU,KAAK,iBAAiB,QAAO,CAAI,EAAGsd,EAChDkL,EAAWH,EAAS,OAAO,CAC7B,QAAS,uCAAuCroB,CAAO,cACvD,QAAAA,CACZ,CAAS,EACGsd,EAAQ,QACRA,EAAQ,OAAO,iBAAiB,QAAS,IAAM,CAC3CkL,EAAS,OAAOlL,EAAQ,QAAQ,MAAM,CACtD,EAAe,CAAE,KAAM,EAAI,CAAE,EAErB,KAAKopC,GAAsB,IAAIl+B,CAAQ,EACvC,IAAIqhB,EACAD,IACAC,EAAgB,KAAKic,GAAqB,KAAK,qCAAsC,CACjF,QAAS,EACzB,CAAa,GAEL,GAAI,CACA,KAAM,CAACnmD,CAAM,EAAI,MAAM,QAAQ,IAAI,CAC/B6oB,EAAS,aAAc,EACvBqhB,CAChB,CAAa,EACD,OAAOlqC,CACV,OACMwO,EAAO,CACV,WAAKu4C,GAAsB,OAAOl+B,CAAQ,EACpCra,CACT,CACJ,CACD,MAAM,eAAemP,EAAS,CAC1B,OAAO,MAAM,KAAK8oC,GAAkB,eAAe9oC,CAAO,CAC7D,CACD,QAAS,CACL,OAAO,KAAKyoC,EACf,CACD,SAAU,CACN,OAAO,KAAKA,GAAe,SAC9B,CACD,gBAAiB,CACb,OAAO,KAAKA,GAAe,gBAC9B,CACD0B,IAAmB,CACf,KAAK,KAAK,QAA+B,IAAI,MAAM,eAAe,CAAC,CACtE,CACDE,GAAiBpsD,EAAO,CACpB,KAAM,CAAE,MAAAmG,EAAO,KAAA0E,EAAM,KAAAkL,EAAM,OAAAoC,EAAQ,IAAAqR,EAAK,WAAAijC,CAAU,EAAKzsD,EAAM,MACzD+V,GACAA,EAAK,IAAIqU,GAAO,CACPmpB,GAAc,KAAKgX,GAAsBngC,CAAG,CACjE,CAAa,EAEDjS,IAAW,UACX,KAAK,KAAK,UAAmC,IAAIugB,GAAewxB,GAA2B/jD,CAAK,EAAG0E,EAAM,GAAI,CAAC,CAAE,IAAA2e,EAAK,WAAAijC,CAAY,EAAC,CAAC,CAE1I,CACD,WAAY,CACR,OAAO,KAAK5Y,GAAc,WAC7B,CACD,IAAI,UAAW,CACX,OAAO,KAAKoU,EACf,CACD,IAAI,aAAc,CACd,OAAO,KAAK2C,EACf,CACD,IAAI,UAAW,CACX,OAAO,KAAKI,EACf,CACD,IAAI,SAAU,CACV,OAAO,KAAKF,EACf,CACD,QAAS,CACL,OAAO,KAAKjX,GAAc,QAC7B,CACD,SAAU,CACN,OAAO,MAAM,KAAK,KAAKqX,GAAS,OAAQ,EAC3C,CACD,MAAM,uBAAuBrmD,EAAO,CAChC,OAAO,MAAM,KAAKgvC,GAAc,eAAe,uBAAuBhvC,CAAK,CAC9E,CACD,MAAM,uBAAuB6nD,EAAQ,CACjC,YAAKrB,GAAyBqB,EACvB,MAAM,KAAKnC,GAAqB,KAAK,iCAAkC,CAAE,OAAAmC,CAAM,CAAE,CAC3F,CACD,MAAM,oBAAoBvpB,EAAS,CAC/B,YAAKmoB,GAA+BnoB,EAC7B,MAAM,KAAKonB,GAAqB,KAAK,0BAA2B,CACnE,QAAApnB,CACZ,CAAS,CACJ,CACD,MAAM,eAAeA,EAAS,CAC1B,OAAO,MAAM,KAAK0Q,GAAc,eAAe,eAAe1Q,CAAO,CACxE,CACD,MAAM,yBAAyB+gB,EAAmB,CAC9C,OAAO,MAAM,KAAKrQ,GAAc,eAAe,yBAAyBqQ,CAAiB,CAC5F,CACD,4BAA4Bz/C,EAAS,CACjC,KAAK,iBAAiB,4BAA4BA,CAAO,CAC5D,CACD,kBAAkBA,EAAS,CACvB,KAAK,iBAAiB,kBAAkBA,CAAO,CAClD,CACD,mBAAoB,CAChB,OAAO,KAAK,iBAAiB,SAChC,CACD,MAAM,aAAakoD,EAAiB,CAChCxlC,EAAO,CAACwlC,EAAgB,SAAU,iCAAiC,EACnExlC,EAAOwlC,EAAgB,GAAI,4DAA4D,EACvF,MAAMj2B,EAAW,MAAM,KAAK,UAAW,EAAC,OAAO,KAAK,uBAAwB,CACxE,kBAAmBi2B,EAAgB,EAC/C,CAAS,EACD,OAAO,KAAK,UAAW,EAClB,UAAW,EACX,gBAAgBj2B,EAAS,OAAO,CACxC,CACD,MAAM,WAAWk2B,EAAM,CACnB,MAAMC,GAAmB,MAAM,KAAKtC,GAAqB,KAAK,qBAAsB,CAChF,KAAMqC,EAAK,OAASA,EAAO,CAAC,KAAK,KAAK,CACzC,IAAG,QACEE,EAA8B,CAAC,YAAY,EAC3CC,EAA+BC,GAAW,CAC5C,UAAWC,KAAQH,EACf,OAAOE,EAAOC,CAAI,EAEtB,OAAOD,CACnB,EACQ,OAAOH,EAAgB,IAAIE,CAA2B,EAAE,IAAIC,IACjD,CACH,GAAGA,EAGH,aAAcA,EAAO,aACfA,EAAO,aAAa,aACpB,MACtB,EACS,CACJ,CACD,MAAM,gBAAgBE,EAAS,CAC3B,MAAMC,EAAU,KAAK,MACrB,UAAWH,KAAUE,EAAS,CAC1B,MAAMjsD,EAAO,CACT,GAAG+rD,EAGH,aAAcA,EAAO,aACf,CAAE,aAAcA,EAAO,aAAc,qBAAsB,EAAO,EAClE,MACtB,EAKY,GAJI,CAACA,EAAO,KAAOG,EAAQ,WAAW,MAAM,IACxClsD,EAAK,IAAMksD,GAEf,MAAM,KAAK5C,GAAqB,KAAK,wBAAyBtpD,CAAI,EAC9DksD,EAAQ,WAAW,MAAM,GAAK,CAAClsD,EAAK,aAAc,CAClD,MAAMuoB,EAAM,IAAI,IAAI2jC,CAAO,EAE3B,MAAM,KAAK5C,GAAqB,KAAK,wBAAyB,CAC1D,GAAGtpD,EACH,aAAc,CACV,aAAcuoB,EAAI,OAAO,QAAQ,IAAIA,EAAI,IAAI,GAAI,EAAE,EACnD,qBAAsB,EACzB,CACrB,CAAiB,CACJ,CACJ,CACJ,CACD,MAAM,aAAa0jC,EAAS,CACxB,MAAMC,EAAU,KAAK,MACfC,EAAiBD,EAAQ,WAAW,MAAM,EAC1CplC,EAAQmlC,EAAQ,IAAIF,GAAU,CAChC,MAAM/rD,EAAO,OAAO,OAAO,CAAE,EAAE+rD,CAAM,EACrC,MAAI,CAAC/rD,EAAK,KAAOmsD,IACbnsD,EAAK,IAAMksD,GAEfhmC,EAAOlmB,EAAK,MAAQ,cAAe,mCAAmCA,EAAK,IAAI,GAAG,EAClFkmB,EAAO,CAAC,OAAO,UAAU,WAAW,KAAKlmB,EAAK,KAAO,GAAI,OAAO,EAAG,sCAAsCA,EAAK,IAAI,GAAG,EAC9GA,CACnB,CAAS,EACD,MAAM,KAAK,aAAa,GAAG8mB,CAAK,EAC5BA,EAAM,QACN,MAAM,KAAKwiC,GAAqB,KAAK,qBAAsB,CACvD,QAASxiC,EAAM,IAAIslC,IACR,CACH,GAAGA,EACH,aAAcA,EAAY,aACpB,CAGE,aAAcA,EAAY,aAC1B,qBAAsB,EACzB,EACC,MAC9B,EACiB,CACjB,CAAa,CAER,CACD,MAAM,eAAe//C,EAAMggD,EAAc,CACrC,GAAI,KAAKzY,GAAU,IAAIvnC,CAAI,EACvB,MAAM,IAAI,MAAM,wCAAwCA,CAAI,aAAaA,CAAI,oBAAoB,EAErG,MAAM6K,EAAS+6B,GAAsB,aAAc5lC,CAAI,EACvD,IAAIynC,EACJ,OAAQ,OAAOuY,EAAY,CACvB,IAAK,WACDvY,EAAU,IAAI9a,GAAQ3sB,EAAMggD,EAAcn1C,CAAM,EAChD,MACJ,QACI48B,EAAU,IAAI9a,GAAQ3sB,EAAMggD,EAAa,QAASn1C,CAAM,EACxD,KACP,CACD,KAAK08B,GAAU,IAAIvnC,EAAMynC,CAAO,EAChC,KAAM,CAAC,CAAE,WAAAzH,CAAU,CAAE,EAAI,MAAM,QAAQ,IAAI,CACvC,KAAKuG,GAAc,sBAAsB17B,CAAM,EAC/C,KAAK07B,GAAc,0BAA0BkB,CAAO,CAChE,CAAS,EACD,KAAKgW,GAAkB,IAAIz9C,EAAMggC,CAAU,CAC9C,CACD,MAAM,sBAAsBhgC,EAAM,CAC9B,MAAMigD,EAAoB,KAAKxC,GAAkB,IAAIz9C,CAAI,EACzD,GAAI,CAACigD,EACD,MAAM,IAAI,MAAM,uBAAuBjgD,CAAI,kBAAkB,EAGjE,MAAMynC,EAAU,KAAKF,GAAU,IAAIvnC,CAAI,EACvC,KAAKy9C,GAAkB,OAAOz9C,CAAI,EAClC,KAAKunC,GAAU,OAAOvnC,CAAI,EAC1B,MAAM,QAAQ,IAAI,CACd,KAAKumC,GAAc,oCAAoC0Z,CAAiB,EACxE,KAAK1Z,GAAc,6BAA6BkB,CAAO,CACnE,CAAS,CACJ,CACD,MAAM,aAAagP,EAAa,CAC5B,OAAO,MAAM,KAAKlQ,GAAc,eAAe,aAAakQ,CAAW,CAC1E,CACD,MAAM,oBAAoBlF,EAAS,CAC/B,OAAO,MAAM,KAAKhL,GAAc,eAAe,oBAAoBgL,CAAO,CAC7E,CACD,MAAM,aAAasF,EAAWC,EAAmB,CAC7C,OAAO,MAAM,KAAKvQ,GAAc,eAAe,aAAasQ,EAAWC,CAAiB,CAC3F,CACD,MAAM,SAAU,CACZ,MAAM1tB,EAAW,MAAM,KAAK6zB,GAAqB,KAAK,wBAAwB,EAC9E,OAAO,KAAKiD,GAAoB92B,EAAS,OAAO,CACnD,CACDy1B,GAAansD,EAAO,CAChB,KAAK,KAAK,UAAmC,CACzC,MAAOA,EAAM,MACb,QAAS,KAAKwtD,GAAoBxtD,EAAM,OAAO,CAC3D,CAAS,CACJ,CACDwtD,GAAoBC,EAAS,CACzB,MAAMrpD,EAAS,GACf,UAAWspD,KAAUD,GAAW,GACxBE,GAAiB,IAAID,EAAO,IAAI,IAChCtpD,EAAOspD,EAAO,IAAI,EAAIA,EAAO,OAGrC,OAAOtpD,CACV,CACD6nD,GAAiB2B,EAAW,CACxB,KAAK,KAAK,YAAuC/a,GAAkB+a,EAAU,gBAAgB,CAAC,CACjG,CACDhZ,GAActB,EAAOtzC,EAAO,CACxB,MAAMmlB,EAASnlB,EAAM,KAAK,IAAIoqB,GACnBkpB,EAAM,gBAAgBlpB,CAAG,CACnC,EACD,KAAKmiC,GAAmBrC,GAA2BlqD,EAAM,IAAI,EAAGmlB,EAAQnlB,EAAM,UAAU,CAC3F,CACD,KAAM20C,GAAiBrB,EAAOtzC,EAAO,CACjC,IAAIyJ,EACJ,GAAI,CACAA,EAAU,KAAK,MAAMzJ,EAAM,OAAO,CACrC,MACK,CAGF,MACH,CACD,KAAM,CAAE,KAAAsC,EAAM,KAAAgL,EAAM,IAAAitB,EAAK,KAAAxkB,EAAM,UAAAukB,CAAW,EAAG7wB,EAC7C,GAAInH,IAAS,aACT,OAEJ,MAAMqqB,EAAU2mB,EAAM,QACtB,GAAI,CAAC3mB,EACD,OAGJ,MADgB,KAAKkoB,GAAU,IAAIvnC,CAAI,GACxB,IAAIqf,EAAS4N,EAAKxkB,EAAMukB,CAAS,CACnD,CACDiyB,GAAmBsB,EAAW93C,EAAM+3C,EAAY,CAC5C,GAAI,CAAC,KAAK,cAAc,WAAoC,CACxD/3C,EAAK,QAAQqU,GACFA,EAAI,SACd,EACD,MACH,CACD,MAAM2jC,EAAa,GAGnB,UAAW3jC,KAAOrU,EAAM,CACpB,MAAM+8B,EAAe1oB,EAAI,eACrB0oB,EAAa,SACbib,EAAW,KAAK3jC,EAAI,SAAU,GAG9B2jC,EAAW,KAAKxb,GAAsBO,CAAY,CAAC,CAE1D,CACD,MAAM/Z,EAAsB,GAC5B,GAAI+0B,EACA,UAAWE,KAAaF,EAAW,WAC/B/0B,EAAoB,KAAK,CACrB,IAAKi1B,EAAU,IACf,WAAYA,EAAU,WACtB,aAAcA,EAAU,YAC5C,CAAiB,EAGT,MAAM5mC,EAAU,IAAIsR,GAAewxB,GAA2B2D,CAAS,EAAGE,EAAW,KAAK,GAAG,EAAGh4C,EAAMgjB,CAAmB,EACzH,KAAK,KAAK,UAAmC3R,CAAO,CACvD,CACD4kC,GAAUhsD,EAAO,CACb,MAAMsC,EAAOyoB,GAAmB/qB,EAAM,IAAI,EACpCiuD,EAAS,IAAItvB,GAAU,KAAK4rB,GAAsBjoD,EAAMtC,EAAM,QAASA,EAAM,aAAa,EAChG,KAAK,KAAK,SAAiCiuD,CAAM,CACpD,CACD,MAAM,OAAOlsC,EAAS,CAClB,KAAM,CAAC3d,CAAM,EAAI,MAAM,QAAQ,IAAI,CAC/B,KAAK,kBAAkB,CACnB,GAAG2d,EACH,6BAA8B,EAC9C,CAAa,EACD,KAAKwoC,GAAqB,KAAK,aAAa,CACxD,CAAS,EACD,OAAOnmD,CACV,CACD,MAAM,kBAAmB,CACrB,OAAO,MAAM,KAAK,OAAQ,EAAC,iBAAgB,CAC9C,CACD,MAAM,OAAO2d,EAAU,GAAI,CACvB,OAAO,MAAM,KAAKmsC,GAAI,GAAInsC,CAAO,CACpC,CACD,MAAM,UAAUA,EAAU,GAAI,CAC1B,OAAO,MAAM,KAAKmsC,GAAI,EAAInsC,CAAO,CACpC,CACD,KAAMmsC,GAAIC,EAAOpsC,EAAS,CACtB,MAAMqsC,EAAU,MAAM,KAAK7D,GAAqB,KAAK,2BAA2B,EAC1ErtB,EAAQkxB,EAAQ,QAAQA,EAAQ,aAAeD,CAAK,EAC1D,OAAKjxB,GAGU,MAAM,QAAQ,IAAI,CAC7B,KAAK,kBAAkBnb,CAAO,EAC9B,KAAKwoC,GAAqB,KAAK,8BAA+B,CAC1D,QAASrtB,EAAM,EAC/B,CAAa,CACb,CAAS,GACa,CAAC,EARJ,IASd,CACD,MAAM,cAAe,CACjB,MAAM,KAAKqtB,GAAqB,KAAK,mBAAmB,CAC3D,CACD,MAAM,qBAAqBpnB,EAAS,CAChC,OAAO,MAAM,KAAK0nB,GAAkB,qBAAqB1nB,CAAO,CACnE,CACD,MAAM,aAAaA,EAAS,CACxB,MAAM,KAAKonB,GAAqB,KAAK,oBAAqB,CAAE,QAAApnB,CAAO,CAAE,CACxE,CACD,MAAM,iBAAiB7gC,EAAM,CACzB,OAAO,MAAM,KAAKuoD,GAAkB,iBAAiBvoD,CAAI,CAC5D,CACD,MAAM,qBAAqBugC,EAAQ,CAC/B,OAAO,MAAM,KAAKgoB,GAAkB,qBAAqBhoB,CAAM,CAClE,CACD,MAAM,qBAAqBC,EAAU,CACjC,OAAO,MAAM,KAAK+nB,GAAkB,qBAAqB/nB,CAAQ,CACpE,CACD,MAAM,gBAAgBF,EAAY,CAC9B,OAAO,MAAM,KAAKioB,GAAkB,gBAAgBjoB,CAAU,CACjE,CACD,MAAM,iBAAiBD,EAAW,CAC9B,OAAO,MAAM,KAAKkoB,GAAkB,iBAAiBloB,CAAS,CACjE,CACD,MAAM,wBAAwBrgC,EAAM,CAChC,OAAO,MAAM,KAAKuoD,GAAkB,wBAAwBvoD,CAAI,CACnE,CACD,MAAM,YAAY81B,EAAU,CACxB,MAAMi2B,EAAc,MAAM,KAAKxD,GAAkB,gBAAgBzyB,CAAQ,EACzE,KAAK6yB,GAAY7yB,EACbi2B,GACA,MAAM,KAAK,QAElB,CACD,UAAW,CACP,OAAO,KAAKpD,EACf,CACD,MAAM,sBAAsBn0B,KAAiB/gB,EAAM,CAC/C,MAAMoC,EAAS8R,GAAiB6M,EAAc,GAAG/gB,CAAI,EACrD,OAAO,MAAM,KAAK89B,GAAc,sBAAsB17B,CAAM,CAC/D,CACD,MAAM,oCAAoCm1B,EAAY,CAClD,OAAO,MAAM,KAAKuG,GAAc,oCAAoCvG,CAAU,CACjF,CACD,MAAM,gBAAgBnK,EAAU,GAAM,CAClC,MAAM,KAAK0Q,GAAc,eAAe,gBAAgB1Q,CAAO,CAClE,CACD,MAAM,YAAYphB,EAAS,CACvB,MAAMuW,EAAQ,CAAE,MAAO,CAAE,EAAE,MAAO,OAAQ,SAAU,IACpD,GAAI,CACA,KAAM,CAAE,YAAAg2B,EAAa,eAAAC,EAAgB,iBAAAC,EAAkB,QAAAC,EAAS,KAAMC,EAAU,KAAApsD,EAAM,sBAAAqsD,CAAwB,EAAG5sC,EAC3G6sC,EAAY,KAAK,OAAQ,EAAC,eAAc,YAAcxrB,GACtD9c,EAAQ8H,GAAwBkK,EAAO,IAAI/R,GAAwB,EAAI,EAEzE,CAACqoC,GAAaL,IAAmBjsD,IAAS,OAASA,IAAS,UAC5D,MAAM,KAAKuoD,GAAkB,gCAC7BvkC,EAAM,MAAM,SAAY,CACpB,MAAM,KAAKukC,GACN,4BAA6B,EAC7B,MAAM1hC,CAAU,CACzC,CAAiB,GAEL,IAAIsP,EAAOi2B,EACX,GAAIj2B,GAAQ,CAACk2B,EAAuB,CAChC,MAAMv2B,EAAW,MAAM,KAAK,UAAW,EAClC,cAAe,EACf,SAAS,IAAM,CAChB,KAAM,CAAE,OAAAzM,EAAQ,SAAUtf,EAAG,QAASC,EAAG,MAAAof,CAAK,EAAM,OAAO,eAC3D,MAAO,CAAE,EAAArf,EAAG,EAAAC,EAAG,OAAAqf,EAAQ,MAAAD,CAAK,CAChD,CAAiB,EACD+M,EAAOo2B,GAAoBp2B,EAAML,CAAQ,CAC5C,CAED,KAAM,CAAE,KAAA33B,CAAI,EAAK,MAAM,KAAK8pD,GAAqB,KAAK,yBAA0B,CAC5E,OAAQjoD,EACR,GAAIksD,EAAmB,CAAE,iBAAAA,CAAkB,EAAG,GAC9C,GAAIC,IAAY,OAAY,CAAE,QAAS,KAAK,MAAMA,CAAO,CAAG,EAAG,GAC/D,GAAIh2B,EAAO,CAAE,KAAM,CAAE,GAAGA,EAAM,MAAOA,EAAK,OAAS,CAAG,GAAK,GAC3D,GAAK61B,EAAgC,GAAlB,CAAE,YAAAA,CAAW,EAChC,sBAAAK,CAChB,CAAa,EACD,OAAOluD,CACV,OACMgU,EAAK,CACR6jB,EAAM,MAAQ7jB,EACd6jB,EAAM,SAAW,EACpB,QACO,CACJ,MAAM/F,EAAW/D,GAAmB8J,CAAK,EACrC/F,GACA,MAAMA,CACb,CACJ,CACD,MAAM,gBAAgBxQ,EAAU,GAAI,CAChC,KAAM,CAAE,QAASkJ,EAAK,KAAK,iBAAiB,QAAO,CAAI,EAAGlJ,EACpD,CAAE,UAAA+sC,EAAW,oBAAAC,EAAqB,eAAAC,EAAgB,eAAAC,EAAgB,gBAAAC,EAAiB,MAAAC,EAAO,MAAOC,EAAY,OAAQC,EAAa,OAAAxjC,EAAQ,WAAAyjC,EAAY,kBAAAC,EAAmB,eAAAhB,EAAgB,OAAQiB,EAAmB,QAASC,EAAyB,aAAAC,CAAY,EAAMnkC,GAAgBxJ,CAAO,EACjSwsC,GACA,MAAM,KAAK1D,GAAkB,gCAE7B6E,GACA,MAAM9vC,GAAeH,EAAK,KAAK,UAAW,EACrC,cAAe,EACf,SAAS,IACH,SAAS,MAAM,KACzB,CAAC,EAAE,KAAK+E,GAAS/f,GAAQwmB,CAAE,CAAC,CAAC,CAAC,EAEnC,MAAM0kC,EAAsB,KAAKpF,GAAqB,KAAK,kBAAmB,CAC1E,aAAc,iBACd,UAAAuE,EACA,oBAAAC,EACA,eAAAC,EACA,eAAAC,EACA,gBAAAC,EACA,MAAAC,EACA,WAAAC,EACA,YAAAC,EACA,UAAWxjC,EAAO,IAClB,aAAcA,EAAO,OACrB,WAAYA,EAAO,KACnB,YAAaA,EAAO,MACpB,WAAAyjC,EACA,kBAAAC,EACA,kBAAAC,EACA,wBAAAC,CACZ,CAAS,EACKrrD,GAAS,MAAMwb,GAAeH,EAAKkwC,CAAmB,EAAE,KAAKnrC,GAAS/f,GAAQwmB,CAAE,CAAC,CAAC,CAAC,EACzF,OAAIsjC,GACA,MAAM,KAAK1D,GAAkB,8BAEjC1jC,EAAO/iB,GAAO,OAAQ,2CAA2C,EAC1D,MAAMqmB,GAA8B,KAAK8/B,GAAsBnmD,GAAO,MAAM,CACtF,CACD,MAAM,IAAI2d,EAAU,GAAI,CACpB,KAAM,CAAE,KAAAha,EAAO,MAAW,EAAGga,EACvBuI,EAAW,MAAM,KAAK,gBAAgBvI,CAAO,EAC7C4F,EAAa,MAAM0C,GAAwBC,EAAUviB,CAAI,EAC/Dof,SAAOQ,EAAY,8BAA8B,EAC1CA,CACV,CACD,MAAM,MAAM5F,EAAU,CAAE,gBAAiB,MAAS,EAAI,CAClD,MAAMqjB,EAAQ,CAAE,MAAO,CAAE,EAAE,MAAO,OAAQ,SAAU,IACpD,GAAI,CACA,MAAM3V,EAASrB,GAAwBgX,EAAO,MAAM,KAAK,iBAAiB,8BAA+B,EAAK,EACxGnW,EAAa,KAAKs7B,GAAqB,WAAU,EACvDpjC,EAAO8H,EAAY,0EAA0E,EACrE,CAAC,CAAClN,EAAQ,gBAE9B,MAAM,KAAKwoC,GAAqB,KAAK,YAAY,GAGjD,MAAMt7B,EAAW,KAAK,qBAAsB,CACxC,SAAU,KAAKu7B,GAAe,SAClD,CAAiB,EACD,MAAM,KAAKE,GAAW,kBAAkB,aAAY,EAE3D,OACMplB,EAAK,CACRF,EAAM,MAAQE,EACdF,EAAM,SAAW,EACpB,QACO,CACJ5W,GAAmB4W,CAAK,CAC3B,CACJ,CACD,UAAW,CACP,OAAO,KAAKpK,EACf,CACD,IAAI,OAAQ,CACR,OAAO,KAAK2vB,EACf,CAwBD,MAAM,oBAAoB5oC,EAAU,GAAI,CACpC,OAAO,MAAM,KAAK,UAAW,EAAC,oBAAoBA,CAAO,CAC5D,CACL,CACA,MAAM4rC,GAAmB,IAAI,IAAI,CAC7B,YACA,YACA,SACA,mBACA,QACA,cACA,mBACA,iBACA,sBACA,iBACA,eACA,iBACA,iBACJ,CAAC,EAED,SAASkB,GAAoBp2B,EAAML,EAAU,CAEzC,MAAM/rB,EAAI,KAAK,IAAIosB,EAAK,EAAGL,EAAS,CAAC,EAC/B9rB,EAAI,KAAK,IAAImsB,EAAK,EAAGL,EAAS,CAAC,EACrC,MAAO,CACH,EAAA/rB,EACA,EAAAC,EACA,MAAO,KAAK,IAAI,KAAK,IAAImsB,EAAK,EAAIA,EAAK,MAAOL,EAAS,EAAIA,EAAS,KAAK,EAAI/rB,EAAG,CAAC,EACjF,OAAQ,KAAK,IAAI,KAAK,IAAIosB,EAAK,EAAIA,EAAK,OAAQL,EAAS,EAAIA,EAAS,MAAM,EAAI9rB,EAAG,CAAC,CAC5F,CACA,CCl5BA;AAAA;AAAA;AAAA;AAAA,GAcO,IAAIsjD,IACV,SAAUA,EAAsB,CAC7BA,EAAqB,QAAa,UAClCA,EAAqB,QAAa,SACtC,GAAGA,KAAyBA,GAAuB,CAAE,EAAC,EAI/C,MAAMC,WAAkBlgC,EAAO,CAClCmgC,GACAC,GACAC,GACA1F,GACA2F,GACAC,GAAgB,IAAI,IACpB,qBAAuBpjC,EAAS,SAChC,kBAAoBA,EAAS,SAC7B,UAMA,YAAY2O,EAAYJ,EAAS80B,EAAgBC,EAAeC,EAAgB,CAC5E,QACA,KAAKN,GAAW10B,EAChB,KAAKivB,GAAiB8F,EACtB,KAAKJ,GAAcv0B,EACnB,KAAKq0B,GAAkBK,EACvB,KAAK,UAAY10B,EAAW,SAC5B,KAAKw0B,GAAkBI,EACnB,KAAKN,IAAY,KAAKA,cAAoBp/B,IAC1C,KAAKo/B,GAAS,WAAW,IAAI,CAEpC,CACD,MAAM,QAAS,CACX,MAAM10B,EAAU,KAAK,WACrB,OAAKA,EAKE,MAAM8uB,GAAQ,QAAQ9uB,EAAS,KAAM,IAAI,EAJrC,MAAM,KAAK,mBAAmB,KAAK3Q,GAC/By/B,GAAQ,QAAQz/B,EAAQ,KAAM,IAAI,CAC5C,CAGR,CACD,UAAW,CACP,OAAO,KAAKslC,GAAY,OAC3B,CACD,UAAW,CACP,OAAO,KAAKD,EACf,CACD,gBAAgBxxD,EAAQ,CACpB,KAAK2xD,GAAc,IAAI3xD,CAAM,CAChC,CACD,mBAAmBA,EAAQ,CACvB,KAAK2xD,GAAc,OAAO3xD,CAAM,CACnC,CACD,eAAgB,CACZ,OAAO,KAAK2xD,EACf,CACD,iBAAkB,CACd,GAAI,CAAC,KAAKD,GACN,MAAM,IAAI,MAAM,mCAAmC,EAEvD,OAAO,KAAKA,EACf,CACD,kBAAmB,CACf,GAAI,CAAC,KAAKA,GACN,MAAM,IAAI,MAAM,mCAAmC,EAEvD,OAAO,KAAKA,GAAgB,EAAK,EAAE,KAAK50B,IACpCA,EAAQ,WAAW,IAAI,EAChBA,EACV,CACJ,CACD,KAAM,CACF,OAAO,KAAK20B,GAAY,GAC3B,CACD,MAAO,CAEH,OADa,KAAKA,GAAY,KAClB,CACR,IAAK,OACD,OAAOtgC,GAAW,KACtB,IAAK,kBACD,OAAOA,GAAW,gBACtB,IAAK,iBACD,OAAOA,GAAW,eACtB,IAAK,gBACD,OAAOA,GAAW,cACtB,IAAK,UACD,OAAOA,GAAW,QACtB,IAAK,UACD,OAAOA,GAAW,QACtB,IAAK,MACD,OAAOA,GAAW,IACtB,QACI,OAAOA,GAAW,KACzB,CACJ,CACD,gBAAiB,CACb,GAAI,CAAC,KAAK46B,GACN,MAAM,IAAI,MAAM,kCAAkC,EAEtD,OAAO,KAAKA,EACf,CACD,gBAAiB,CACb,OAAO,KAAK0F,EACf,CACD,SAAU,CACN,GAAI,CAAC,KAAKF,GACN,MAAM,IAAI,MAAM,mCAAmC,EAEvD,OAAO,KAAKA,GAAgB,SAC/B,CACD,gBAAiB,CACb,GAAI,CAAC,KAAKA,GACN,MAAM,IAAI,MAAM,mCAAmC,EAEvD,OAAO,KAAKA,EACf,CACD,QAAS,CACL,KAAM,CAAE,SAAAQ,CAAQ,EAAK,KAAKN,GAC1B,GAAKM,EAGL,OAAO,KAAK,QAAS,EAChB,QAAS,EACT,KAAK/xD,GACCA,EAAO,YAAc+xD,CAC/B,CACJ,CACD,mBAAmB70B,EAAY,CAC3B,KAAKu0B,GAAcv0B,EACnB,KAAK,oBAAmB,CAC3B,CACD,aAAc,CACV,KAAK,qBAAqB,QAAQm0B,GAAqB,OAAO,CACjE,CACD,kBAAmB,CACf,OAAO,KAAK,SAAWlgC,GAAW,KAAO,CAAC,KAAK,UAClD,CACD,qBAAsB,CACb,KAAK,qBAAqB,YAC3B,KAAK,qBAAqB,QAAQkgC,GAAqB,OAAO,CAErE,CACL,CAIO,MAAMW,WAAmBV,EAAU,CACtCW,GACA,YACA,YAAY/0B,EAAYJ,EAAS80B,EAAgBC,EAAeC,EAAgBjG,EAAiB,CAC7F,MAAM3uB,EAAYJ,EAAS80B,EAAgBC,EAAeC,CAAc,EACxE,KAAKG,GAAmBpG,GAAmB,MAC9C,CACD,aAAc,CACV,KAAK,qBACA,aAAc,EACd,KAAK,MAAOhmD,GAAW,CACxB,GAAIA,IAAWwrD,GAAqB,QAChC,OAEJ,MAAMa,EAAS,KAAK,SACpB,GAAI,EAAEA,aAAkBF,IACpB,OAEJ,GAAI,CAACE,GAAU,CAACA,EAAO,aAAe,KAAK,KAAM,IAAK,OAClD,MAAO,GAEX,MAAMC,EAAa,MAAMD,EAAO,YAChC,GAAI,CAACC,EAAW,cAAc,SAC1B,MAAO,GAEX,MAAMC,EAAY,MAAM,KAAK,OAC7B,OAAAD,EAAW,KAAK,QAA+BC,CAAS,EACjD,EACnB,CAAS,EACI,MAAMxnC,CAAU,EACrB,KAAK,oBAAmB,CAC3B,CACD,MAAM,MAAO,CACT,GAAI,CAAC,KAAK,YAAa,CACnB,MAAMkS,EAAU,KAAK,WACrB,KAAK,aAAeA,EACd,QAAQ,QAAQA,CAAO,EACvB,KAAK,gBAAiB,EAA4B,EAAK,GAAG,KAAK3Q,GAC1Dy/B,GAAQ,QAAQz/B,EAAQ,KAAM,KAAK8lC,IAAoB,IAAI,CACrE,CACJ,CACD,OAAQ,MAAM,KAAK,aAAgB,IACtC,CACD,qBAAsB,CACd,KAAK,qBAAqB,YAG1B,KAAK,iBAAiB,MAAQ,IAC9B,KAAK,qBAAqB,QAAQZ,GAAqB,OAAO,CAErE,CACL,CAIO,MAAMgB,WAAuBL,EAAW,CAC/C,CAIO,MAAMM,WAAqBhB,EAAU,CACxCiB,GACA,MAAM,QAAS,CACX,GAAI,CAAC,KAAKA,GAAgB,CACtB,MAAMz1B,EAAU,KAAK,WAErB,KAAKy1B,IAAkBz1B,EACjB,QAAQ,QAAQA,CAAO,EACvB,KAAK,gBAAiB,EAA4B,EAAK,GAAG,KAAK3Q,GAC1D,IAAIq/B,GAAar/B,EAAQ,KAAK,eAAc,EAAG,IAAK,KAAK,UAAW,KAAK,KAAM,EAAE,IAAM,GAA4B,IAAM,CAAG,EACtI,CACJ,CACD,OAAO,MAAM,KAAKomC,EACrB,CACL,CAIO,MAAMC,WAAoBlB,EAAU,CAC3C,CClPA;AAAA;AAAA;AAAA;AAAA,GAWA,SAASmB,GAA4BzyD,EAAQ0yD,EAAe,CACxD,MAAO,EAAQ1yD,EAAO,SAAU,GAAK,CAAC0yD,EAAc,OACxD,CAQO,MAAMC,WAA4B1qC,CAAa,CAClDsI,GAWAuU,GAA+B,IAAI,IAKnC8tB,GAA6B,IAAI,IAIjCC,GAA8B,IAAI,IAKlCC,GAAkB,IAAI,IACtB7tB,GACAC,GACAC,GAAsC,IAAI,QAC1C4tB,GAAwC,IAAI,QAC5C3tB,GAAsB7W,EAAS,SAC/B8W,GAAqB,IAAI,IACzB2tB,GAAqC,GACrCC,GAAmB,CAAC,EAAE,EACtB,YAAYviC,EAAY4U,EAAeC,EAAsB2tB,EAAoC,GAAM,CACnG,QACA,KAAK3iC,GAAcG,EACnB,KAAKuU,GAAwBM,EAC7B,KAAKL,GAAiBI,EACtB,KAAK0tB,GAAqCE,EAC1C,KAAK3iC,GAAY,GAAG,uBAAwB,KAAKiV,EAAgB,EACjE,KAAKjV,GAAY,GAAG,yBAA0B,KAAKkV,EAAkB,EACrE,KAAKlV,GAAY,GAAG,2BAA4B,KAAK4iC,EAAoB,EACzE,KAAK5iC,GAAY,GAAGlC,EAAgB,gBAAiB,KAAKqX,EAAkB,EAC5E,KAAK0tB,GAA0B,KAAK7iC,EAAW,CAClD,CACD8iC,GAA+B,IAAM,CACjC,GAAK,KAAKL,GAGV,SAAW,CAAC/1B,EAAUC,CAAU,IAAM,KAAK4H,GAA6B,UAAW,CAC/E,MAAMwuB,EAAkB,IAAIhC,GAAUp0B,EAAY,OAAW,OAAW,KAAM,MAAS,EAGjFq2B,EAAgBr2B,EAAW,OAAS,QAAUA,EAAW,OAAS,SAClEs2B,EAAct2B,EAAW,IAAI,WAAW,qBAAqB,GAC9D,CAAC,KAAK+H,IACP,KAAKA,GAAsBquB,CAAe,IAC1CC,GACA,CAACC,GACD,KAAKnuB,GAAmB,IAAIpI,CAAQ,CAE3C,CACT,EACI,MAAM,YAAa,CACf,MAAM,KAAK1M,GAAY,KAAK,4BAA6B,CACrD,SAAU,GACV,OAAQ,KAAK0iC,EACzB,CAAS,EACD,KAAKI,GAA4B,EACjC,MAAM,KAAK9iC,GAAY,KAAK,uBAAwB,CAChD,uBAAwB,GACxB,QAAS,GACT,WAAY,GACZ,OAAQ,CACJ,CACI,KAAM,OACN,QAAS,EACZ,EACD,GAAG,KAAK0iC,EACX,CACb,CAAS,EACD,KAAKptB,GAA4B,EACjC,MAAM,KAAKT,GAAoB,cAClC,CACD,gBAAgBplC,EAAQ,CACpB,OAAOA,EAAO,eACjB,CACD,SAAU,CACN,KAAKuwB,GAAY,IAAI,uBAAwB,KAAKiV,EAAgB,EAClE,KAAKjV,GAAY,IAAI,yBAA0B,KAAKkV,EAAkB,EACtE,KAAKlV,GAAY,IAAI,2BAA4B,KAAK4iC,EAAoB,EAC1E,KAAK5iC,GAAY,IAAIlC,EAAgB,gBAAiB,KAAKqX,EAAkB,EAC7E,KAAK+tB,GAA2B,KAAKljC,EAAW,CACnD,CACD,qBAAsB,CAClB,OAAO,KAAKqiC,EACf,CACDQ,GAA0Bt2B,EAAS,CAC/B,MAAMjP,EAAYpsB,GAAU,CACnB,KAAKkkC,GAAoB7I,EAASr7B,CAAK,CACxD,EACQmnB,EAAO,CAAC,KAAKuc,GAAoC,IAAIrI,CAAO,CAAC,EAC7D,KAAKqI,GAAoC,IAAIrI,EAASjP,CAAQ,EAC9DiP,EAAQ,GAAG,0BAA2BjP,CAAQ,EAC9C,MAAM6lC,EAAoBjyD,GACf,KAAK0rD,GAAsBrwB,EAASr7B,CAAK,EAEpDmnB,EAAO,CAAC,KAAKmqC,GAAsC,IAAIj2B,CAAO,CAAC,EAC/D,KAAKi2B,GAAsC,IAAIj2B,EAAS42B,CAAgB,EACxE52B,EAAQ,GAAG,4BAA6B42B,CAAgB,CAC3D,CACDD,GAA2B32B,EAAS,CAChC,MAAMjP,EAAW,KAAKsX,GAAoC,IAAIrI,CAAO,EACjEjP,IACAiP,EAAQ,IAAI,0BAA2BjP,CAAQ,EAC/C,KAAKsX,GAAoC,OAAOrI,CAAO,GAEvD,KAAKi2B,GAAsC,IAAIj2B,CAAO,IACtDA,EAAQ,IAAI,4BAA6B,KAAKi2B,GAAsC,IAAIj2B,CAAO,CAAC,EAChG,KAAKi2B,GAAsC,OAAOj2B,CAAO,EAEhE,CACD4I,GAAsB5I,GAAY,CAC9B,KAAK22B,GAA2B32B,CAAO,CAC/C,EACI0I,GAAmB,MAAO/jC,GAAU,CAMhC,GALA,KAAKqjC,GAA6B,IAAIrjC,EAAM,WAAW,SAAUA,EAAM,UAAU,EACjF,KAAK,KAAK,mBAA8DA,EAAM,UAAU,EAIpFA,EAAM,WAAW,OAAS,WAAaA,EAAM,WAAW,SAAU,CAClE,GAAI,KAAKmxD,GAA2B,IAAInxD,EAAM,WAAW,QAAQ,EAC7D,OAEJ,MAAMzB,EAAS,KAAKklC,GAAezjC,EAAM,WAAY,MAAS,EAC9DzB,EAAO,YAAW,EAClB,KAAK4yD,GAA2B,IAAInxD,EAAM,WAAW,SAAUzB,CAAM,CACxE,CACT,EACIylC,GAAsBhkC,GAAU,CAC5B,MAAMy7B,EAAa,KAAK4H,GAA6B,IAAIrjC,EAAM,QAAQ,EAGvE,GAFA,KAAKqjC,GAA6B,OAAOrjC,EAAM,QAAQ,EACvD,KAAKokC,GAA6BpkC,EAAM,QAAQ,EAC5Cy7B,GAAY,OAAS,kBACrB,KAAK01B,GAA2B,IAAInxD,EAAM,QAAQ,EAAG,CAGrD,MAAMzB,EAAS,KAAK4yD,GAA2B,IAAInxD,EAAM,QAAQ,EAC7DzB,IACA,KAAK,KAAK,aAAkDA,CAAM,EAClE,KAAK4yD,GAA2B,OAAOnxD,EAAM,QAAQ,EAE5D,CACT,EACI0xD,GAAwB1xD,GAAU,CAE9B,GADA,KAAKqjC,GAA6B,IAAIrjC,EAAM,WAAW,SAAUA,EAAM,UAAU,EAC7E,KAAKqxD,GAAgB,IAAIrxD,EAAM,WAAW,QAAQ,GAClD,CAAC,KAAKmxD,GAA2B,IAAInxD,EAAM,WAAW,QAAQ,GAC9D,CAACA,EAAM,WAAW,SAClB,OAEJ,MAAMzB,EAAS,KAAK4yD,GAA2B,IAAInxD,EAAM,WAAW,QAAQ,EAC5E,GAAI,CAACzB,EACD,OAEJ,MAAM2zD,EAAc3zD,EAAO,MACrB4zD,EAAiB5zD,EAAO,qBAAqB,MAAO,IAAKqxD,GAAqB,QACpF,GAAIoB,GAA4BzyD,EAAQyB,EAAM,UAAU,EAAG,CACvD,MAAMq7B,EAAU98B,GAAQ,WACxB4oB,EAAOkU,EAAS,yDAAyD,EACzEA,EAAQ,cAAa,GAAI,KAAKzO,EAAgB,QAASyO,CAAO,CACjE,CACD98B,EAAO,mBAAmByB,EAAM,UAAU,EACtCmyD,GAAkBD,IAAgB3zD,EAAO,IAAG,GAC5C,KAAK,KAAK,gBAAwD,CAC9D,OAAAA,EACA,eAAA4zD,EACA,YAAAD,CAChB,CAAa,CAEb,EACIhuB,GAAsB,MAAO3I,EAAev7B,IAAU,CAClD,MAAMy7B,EAAaz7B,EAAM,WACnBq7B,EAAU,KAAKvM,GAAY,QAAQ9uB,EAAM,SAAS,EACxD,GAAI,CAACq7B,EACD,MAAM,IAAI,MAAM,WAAWr7B,EAAM,SAAS,mBAAmB,EAEjE,MAAMoyD,EAAe,SAAY,CAC7B,MAAM/2B,EAAQ,KAAK,iCAAiC,EAAE,MAAMlS,CAAU,EAGtE,MAAMoS,EACD,KAAK,0BAA2B,CACjC,UAAWF,EAAQ,GAAI,CACvC,CAAa,EACI,MAAMlS,CAAU,CACjC,EACQ,GAAI,CAAC,KAAK2F,GAAY,eAAe2M,EAAW,QAAQ,EACpD,OASJ,GAAIA,EAAW,OAAS,iBAAkB,CAGtC,GAFA,KAAK2I,GAA6B3I,EAAW,QAAQ,EACrD,MAAM22B,EAAY,EACd,KAAKjB,GAA2B,IAAI11B,EAAW,QAAQ,EACvD,OAEJ,MAAMl9B,EAAS,KAAKklC,GAAehI,CAAU,EAC7Cl9B,EAAO,YAAW,EAClB,KAAK4yD,GAA2B,IAAI11B,EAAW,SAAUl9B,CAAM,EAC/D,KAAK,KAAK,kBAA4DA,CAAM,EAC5E,MACH,CACD,MAAM8zD,EAAmB,KAAKlB,GAA2B,IAAI11B,EAAW,QAAQ,EAC1El9B,EAAS8zD,EACT,KAAKlB,GAA2B,IAAI11B,EAAW,QAAQ,EACvD,KAAKgI,GAAehI,EAAYJ,EAASE,aAAyB1O,GAAa0O,EAAgB,MAAS,EAC9G,GAAI,KAAKiI,IAAyB,CAAC,KAAKA,GAAsBjlC,CAAM,EAAG,CACnE,KAAK8yD,GAAgB,IAAI51B,EAAW,QAAQ,EAC5C,KAAK2I,GAA6B3I,EAAW,QAAQ,EACrD,MAAM22B,EAAY,EAClB,MACH,CACD,KAAKT,GAA0Bt2B,CAAO,EAClCg3B,GACAh3B,EAAQ,WAAW98B,CAAM,EACzB,KAAK6yD,GAA4B,IAAI/1B,EAAQ,GAAI,EAAE,KAAK81B,GAA2B,IAAI11B,EAAW,QAAQ,CAAC,IAG3Gl9B,EAAO,YAAW,EAClB,KAAK4yD,GAA2B,IAAI11B,EAAW,SAAUl9B,CAAM,EAC/D,KAAK6yD,GAA4B,IAAI/1B,EAAQ,GAAE,EAAI98B,CAAM,IAExCg9B,aAAyB1O,GACxC0O,EAAc,QAAS,EACvB,OACQ,gBAAgBh9B,CAAM,EACpCg9B,EAAc,KAAK3O,EAAgB,MAAOyO,CAAO,EACjD,KAAKuI,GAAmB,OAAOrlC,EAAO,SAAS,EAC1C8zD,GACD,KAAK,KAAK,kBAA4D9zD,CAAM,EAEhF,KAAK6lC,GAA4B,EAGjC,MAAM,QAAQ,IAAI,CACd/I,EAAQ,KAAK,uBAAwB,CACjC,uBAAwB,GACxB,QAAS,GACT,WAAY,GACZ,OAAQ,KAAKm2B,EAC7B,CAAa,EACDn2B,EAAQ,KAAK,iCAAiC,CAC1D,CAAS,EAAE,MAAMlS,CAAU,CAC3B,EACIib,GAA6B5I,EAAU,CACnCA,IAAa,QAAa,KAAKoI,GAAmB,OAAOpI,CAAQ,EAC7D,KAAKoI,GAAmB,OAAS,GACjC,KAAKD,GAAoB,SAEhC,CACD+nB,GAAwB,CAACnwB,EAAev7B,IAAU,CAC9C,MAAMzB,EAAS,KAAK6yD,GAA4B,IAAIpxD,EAAM,SAAS,EACnE,KAAKoxD,GAA4B,OAAOpxD,EAAM,SAAS,EAClDzB,IAGDg9B,aAAyB1O,IACzB0O,EAAc,QAAO,EAAG,mBAAmBh9B,CAAM,EAErD,KAAK4yD,GAA2B,OAAO5yD,EAAO,SAAS,EACvD,KAAK,KAAK,aAAkDA,CAAM,EAC1E,CACA,CC/SA;AAAA;AAAA;AAAA;AAAA,GAcO,MAAM+zD,WAAmBC,EAAY,CACxC,SAAW,MACX,aAAa,QAAQC,EAASvjC,EAAYwjC,EAAYC,EAAqBtI,EAAiB5rC,EAASm0C,EAAe7uB,EAAsB8uB,EAAsBnB,EAAoC,GAAM,CACtM,MAAMnmD,EAAU,IAAIgnD,GAAWE,EAASvjC,EAAYwjC,EAAYrI,EAAiB5rC,EAASm0C,EAAe7uB,EAAsB8uB,EAAsBnB,CAAiC,EACtL,OAAIiB,GACA,MAAMzjC,EAAW,KAAK,sCAAuC,CACzD,OAAQ,EACxB,CAAa,EAEL,MAAM3jB,EAAQ,UACPA,CACV,CACDklD,GACAqC,GACA/jC,GACAgkC,GACAtvB,GACAuvB,GACAC,GACAC,GAAY,IAAI,IAChB3I,GACA,YAAYkI,EAASvjC,EAAYwjC,EAAYrI,EAAiB5rC,EAASm0C,EAAe7uB,EAAsB8uB,EAAsBnB,EAAoC,GAAM,CACxK,QACAe,EAAUA,GAAW,SACrB,KAAKhC,GAAmBpG,EACxB,KAAKyI,GAAWr0C,EAChB,KAAKsQ,GAAcG,EACnB,KAAK6jC,GAAiBH,IAAkB,IAAM,CAAG,GACjD,KAAKnvB,GACDM,IACK,IACU,IAEnB,KAAKovB,GAAyBN,CAAoB,EAC9CJ,IAAY,UACZ,KAAKlI,GAAiB,IAAIlnB,GAAqBnU,EAAY,KAAKkkC,GAAe,KAAK3vB,EAAqB,EAGzG,KAAK8mB,GAAiB,IAAI4G,GAAoBjiC,EAAY,KAAKkkC,GAAe,KAAK3vB,GAAuBiuB,CAAiC,EAE/I,KAAKuB,GAAkB,IAAInkC,GAAkB,KAAKC,GAAa,IAAI,EACnE,UAAWI,KAAaujC,EACpB,KAAKQ,GAAU,IAAI/jC,EAAW,IAAIL,GAAkB,KAAKC,GAAa,KAAMI,CAAS,CAAC,CAE7F,CACDkkC,GAAoB,IAAM,CACtB,KAAK,KAAK,eAAgD,MAAS,CAC3E,EACI,MAAM,SAAU,CACZ,KAAKtkC,GAAY,GAAGlC,EAAgB,aAAc,KAAKwmC,EAAiB,EACxE,KAAK9I,GAAe,GAAG,kBAA4D,KAAKpmB,EAAmB,EAC3G,KAAKomB,GAAe,GAAG,aAAkD,KAAKoB,EAAqB,EACnG,KAAKpB,GAAe,GAAG,gBAAwD,KAAK+I,EAAgB,EACpG,KAAK/I,GAAe,GAAG,mBAA8D,KAAKgJ,EAAmB,EAC7G,MAAM,KAAKhJ,GAAe,YAC7B,CACD,SAAU,CACN,KAAKx7B,GAAY,IAAIlC,EAAgB,aAAc,KAAKwmC,EAAiB,EACzE,KAAK9I,GAAe,IAAI,kBAA4D,KAAKpmB,EAAmB,EAC5G,KAAKomB,GAAe,IAAI,aAAkD,KAAKoB,EAAqB,EACpG,KAAKpB,GAAe,IAAI,gBAAwD,KAAK+I,EAAgB,EACrG,KAAK/I,GAAe,IAAI,mBAA8D,KAAKgJ,EAAmB,CACjH,CACD,SAAU,CACN,OAAO,KAAKT,IAAY,IAC3B,CACD,gBAAiB,CACb,OAAO,KAAKvI,EACf,CACD4I,GAAyBN,EAAsB,CAC3C,KAAKG,GACDH,IACMr0D,GACUA,EAAO,KAAI,IAAO,QACtBA,EAAO,KAAI,IAAO,mBAClBA,EAAO,KAAM,IAAK,UAErC,CACD,0BAA2B,CACvB,OAAO,KAAKw0D,EACf,CACD,MAAM,qBAAqBhxC,EAAU,GAAI,CACrC,KAAM,CAAE,YAAAwxC,EAAa,gBAAAC,CAAiB,EAAGzxC,EACnC,CAAE,iBAAA0xC,CAAgB,EAAK,MAAM,KAAK3kC,GAAY,KAAK,8BAA+B,CACpF,YAAAykC,EACA,gBAAiBC,GAAmBA,EAAgB,KAAK,GAAG,CACxE,CAAS,EACK7mC,EAAU,IAAIkC,GAAkB,KAAKC,GAAa,KAAM2kC,CAAgB,EAC9E,YAAKR,GAAU,IAAIQ,EAAkB9mC,CAAO,EACrCA,CACV,CACD,iBAAkB,CACd,MAAO,CAAC,KAAKqmC,GAAiB,GAAG,MAAM,KAAK,KAAKC,GAAU,OAAQ,EAAC,CACvE,CACD,uBAAwB,CACpB,OAAO,KAAKD,EACf,CACD,MAAM,gBAAgB9jC,EAAW,CACxBA,IAGL,MAAM,KAAKJ,GAAY,KAAK,+BAAgC,CACxD,iBAAkBI,CAC9B,CAAS,EACD,KAAK+jC,GAAU,OAAO/jC,CAAS,EAClC,CACDikC,GAAgB,CAAC13B,EAAYJ,IAAY,CACrC,KAAM,CAAE,iBAAAo4B,CAAkB,EAAGh4B,EACvB9O,EAAU8mC,GAAoB,KAAKR,GAAU,IAAIQ,CAAgB,EACjE,KAAKR,GAAU,IAAIQ,CAAgB,EACnC,KAAKT,GACX,GAAI,CAACrmC,EACD,MAAM,IAAI,MAAM,yBAAyB,EAE7C,MAAM+mC,EAAiBh4B,GACZ,KAAK5M,GAAY,eAAe2M,EAAYC,CAAoB,EAErEi4B,EAAc,IAAI5C,GAAYt1B,EAAYJ,EAAS1O,EAAS,KAAK29B,GAAgBoJ,CAAa,EACpG,OAAIj4B,EAAW,KAAK,WAAW,aAAa,EACjC,IAAIm1B,GAAen1B,EAAYJ,EAAS1O,EAAS,KAAK29B,GAAgBoJ,EAAe,KAAKlD,IAAoB,IAAI,EAEzH,KAAKuC,GAAsBY,CAAW,EAC/B,IAAIpD,GAAW90B,EAAYJ,EAAS1O,EAAS,KAAK29B,GAAgBoJ,EAAe,KAAKlD,IAAoB,IAAI,EAErH/0B,EAAW,OAAS,kBACpBA,EAAW,OAAS,gBACb,IAAIo1B,GAAap1B,EAAYJ,EAAS1O,EAAS,KAAK29B,GAAgBoJ,CAAa,EAErFC,CACf,EACIzvB,GAAsB,MAAO3lC,GAAW,CAChCA,EAAO,iBAAkB,GACxB,MAAMA,EAAO,qBAAqB,aAAc,IAC7CqxD,GAAqB,UACzB,KAAK,KAAK,gBAAkDrxD,CAAM,EAClEA,EAAO,eAAgB,EAAC,KAAK,gBAAyDA,CAAM,EAExG,EACImtD,GAAwB,MAAOntD,GAAW,CACtCA,EAAO,qBAAqB,QAAQqxD,GAAqB,OAAO,EAChErxD,EAAO,kBAAkB,UACrBA,EAAO,iBAAkB,GACxB,MAAMA,EAAO,qBAAqB,aAAc,IAC7CqxD,GAAqB,UACzB,KAAK,KAAK,kBAAsDrxD,CAAM,EACtEA,EAAO,eAAgB,EAAC,KAAK,kBAA6DA,CAAM,EAE5G,EACI80D,GAAmB,CAAC,CAAE,OAAA90D,KAAa,CAC/B,KAAK,KAAK,gBAAkDA,CAAM,EAClEA,EAAO,eAAgB,EAAC,KAAK,gBAAyDA,CAAM,CACpG,EACI+0D,GAAuB73B,GAAe,CAClC,KAAK,KAAK,mBAAwDA,CAAU,CACpF,EACI,YAAa,CACT,OAAO,KAAK3M,GAAY,KAC3B,CACD,MAAM,SAAU,CACZ,OAAO,MAAM,KAAKkkC,GAAgB,SACrC,CACD,MAAM,qBAAqB9jC,EAAW,CAClC,KAAM,CAAE,SAAAsM,CAAQ,EAAK,MAAM,KAAK1M,GAAY,KAAK,sBAAuB,CACpE,IAAK,cACL,iBAAkBI,GAAa,MAC3C,CAAS,EACK3wB,EAAU,MAAM,KAAK,cAAcoO,GAC9BA,EAAE,YAAc6uB,CAC1B,EACD,GAAI,CAACj9B,EACD,MAAM,IAAI,MAAM,iCAAiCi9B,CAAQ,GAAG,EAIhE,GAAI,EAFiB,MAAMj9B,EAAO,qBAAqB,aAAc,IACjEqxD,GAAqB,SAErB,MAAM,IAAI,MAAM,0CAA0Cp0B,CAAQ,GAAG,EAEzE,MAAMjwB,EAAO,MAAMhN,EAAO,OAC1B,GAAI,CAACgN,EACD,MAAM,IAAI,MAAM,6CAA6C2jB,CAAS,GAAG,EAE7E,OAAO3jB,CACV,CACD,SAAU,CACN,OAAO,MAAM,KAAK,KAAK++C,GAAe,oBAAqB,EAAC,OAAQ,GAAE,OAAO/rD,GACjEA,EAAO,iBAAkB,GAC7BA,EAAO,qBAAqB,UAAYqxD,GAAqB,OACpE,CACJ,CACD,QAAS,CACL,MAAMgE,EAAgB,KAAK,QAAO,EAAG,KAAKr1D,GAC/BA,EAAO,KAAM,IAAK,SAC5B,EACD,GAAI,CAACq1D,EACD,MAAM,IAAI,MAAM,6BAA6B,EAEjD,OAAOA,CACV,CACD,MAAM,SAAU,CAEZ,OADgB,MAAM,KAAKC,MACZ,OAClB,CACD,MAAM,WAAY,CAEd,OADgB,MAAM,KAAKA,MACZ,SAClB,CACD,MAAM,OAAQ,CACV,MAAM,KAAKf,GAAe,KAAK,IAAI,EACnC,MAAM,KAAK,YACd,CACD,YAAa,CACT,YAAKxI,GAAe,UACpB,KAAKx7B,GAAY,UACjB,KAAK,QAAO,EACL,QAAQ,SAClB,CACD,IAAI,WAAY,CACZ,MAAO,CAAC,KAAKA,GAAY,OAC5B,CACD+kC,IAAc,CACV,OAAO,KAAK/kC,GAAY,KAAK,oBAAoB,CACpD,CACD,IAAI,WAAY,CACZ,MAAO,CACH,sBAAuB,KAAKA,GAAY,yBAA0B,CAC9E,CACK,CACL,CC7OA,MAAMglC,EAAU,CACZhlC,GACA,YAAYG,EAAY,CACpB,KAAKH,GAAcG,CACtB,CACD,KAAKxuB,EAAM,CACP,KAAKquB,GAAY,eAAeruB,CAAI,CACvC,CACD,OAAQ,CACC,KAAKquB,GAAY,YACzB,CACD,IAAI,UAAU1Y,EAAI,CACd,KAAK0Y,GAAY,aAAc1H,GAAY,CACvC,MAAM3mB,EAAQ2mB,EACd,GAAK3mB,EAAK,UAGV,OAAO2V,EAAG,KAAK,UAAU,CACrB,GAAG3V,EAGH,UAAWA,EAAK,YAAc,KAAKquB,GAAY,aAAc,EAAG,OAAYruB,EAAK,SACpF,EAAC,CACd,CAAS,CACJ,CACD,IAAI,QAAQ2V,EAAI,CACZ,MAAMwB,EAAO,KAAKkX,GAAY,gBAAe,EAC7C,KAAKA,GAAY,gBAAgBg4B,GAAU,CACnClvC,GACAA,EAAKkvC,CAAM,EAEX1wC,GACAA,GAEhB,CAAS,CACJ,CACL,CACA,MAAM29C,WAA4BC,EAAqB,CACnD,MAAM,UAAU5sC,EAAS,CACrB,MAAM6sC,EAAS,KAAK,MAAM7sC,CAAO,EAC7B6sC,EAAO,WAAa,CAAC,KAAK,UAAU,IAAIA,EAAO,SAAS,GAGvD,MAAM,UAAU7sC,CAAO,CAC/B,CACL,CACO,MAAM8sC,EAA0B,CACnC,aAAa,mCAAmCnyC,EAAS,CACrD,KAAM,CAAE,WAAAkN,EAAY,aAAAklC,EAAc,qBAAAvB,CAAoB,EAAK7wC,EAErDmZ,EAAY,IAAI44B,GAAU7kC,CAAU,EAGpCmlC,EAAsB,IAAIL,GAAoB,GAAI74B,CAAS,EAC3Dm5B,EAAiBC,GAAkB,QAAQ,SAAUF,EAAqB,GAAqB,GAA+B,OAAiC,OAAyB,OAA+B,OAAW71D,GAAUq0D,EAAqBr0D,EAAO,eAAgB,GAAG,IAC3R,EAAG+M,CAAO,EAAI,MAAM,QAAQ,IAAI,CAClC8oD,EAAoB,eAAe,CAAE,SAAUD,CAAY,EAA6B,EAAI,EAC5FE,CACZ,CAAS,EACD,aAAM/oD,EAAQ,cAAcqB,GAAKA,EAAE,KAAI,IAAO,MAAM,EAE7C,CAAE,MADK,MAAMrB,EAAQ,SACP,CAAC,EAAG,QAAAA,EAAS,oBAAA8oD,EACrC,CACL,CC5DA,MAAMG,GAAgB,CACjB,OAA2C,EAC3C,KAAuC,IACvC,UAAiD,IACjD,eAA2D,GAChE,EACa/sD,GAAiB,IAC9B,SAASgtD,GAAaj2D,EAAQ,CAE1B,OAAQk2D,GAA0Bl2D,EAAO,IAAK,WAAW,GAAKA,EAAO,OAAS,QAC1EA,EAAO,OAAS,mBAAqBA,EAAO,OAAS,SAC7D,CACO,MAAMm2D,WAAwBC,EAAmC,CACpEC,GACAC,GACA,SACA,MACA,QACA,kBACA,aAAe,GACf,QAAU,GACV,aACAC,GACAC,GACA,YAAYC,EAAU,CAAE,MAAA7kD,EAAO,kBAAA8kD,EAAoB,IAAI,KAAU,CAC7D,QACA,KAAK,SAAWD,EAChB,KAAK,MAAQ7kD,EACb,KAAK,QAAU6kD,EAAS,SAAWxtD,GACnC,KAAK,kBAAoBytD,EACzB,KAAKL,GAAe,IAAI,QAAQxpD,GAAW,CACvC,KAAKypD,GAAsBzpD,CACvC,CAAS,EACD,KAAK,aAAe,IAAI,QAAQA,GAAW,CACvC,KAAK0pD,GAAkB1pD,CACnC,CAAS,CACJ,CACD8pD,IAAgC,CAC5B,KAAKL,KAAmB,EACxB,KAAKD,GAAe,IAAI,QAAQxpD,GAAW,CACvC,KAAKypD,GAAsBzpD,CACvC,CAAS,CACJ,CACD,aAAa,kBAAmB,CAC5B,MAAM+pD,EAAaC,GAAgC,SAAU,EAAC,WAAU,EACxE,GAAI,CAACD,EACD,MAAM,IAAI,MAAM,gCAAgC,EAEpD,MAAME,EAAoBD,GAAgC,SAAU,EAAC,kBAAiB,EACtF,GAAI,CAACC,EACD,MAAM,IAAI,MAAM,wCAAwC,EAE5D,MAAMC,EAAqBD,EAAkB,MAAME,EAAyC,EAC5F,GAAI,CAACD,EACD,MAAM,IAAI,MAAM,kCAAkC,EAEtD,MAAME,EAAoBH,EAAkB,MAAMI,EAAuC,EACzF,GAAI,CAACD,EACD,MAAM,IAAI,MAAM,mCAAmC,EAGvD,GAAI,CADcA,EAAkB,UAEhC,MAAM,IAAI,MAAM,2BAA2B,EAE/C,MAAME,EAAyBP,EAAW,MAAMI,EAAyC,EACzF,GAAI,CAACG,EACD,MAAM,IAAI,MAAM,mEAAmE,EAIvF,MAAMzmC,GADS,MAAMymC,EAAuB,yBAAyB,IAAM,CAAG,IACpD,WACpBC,EAAe,MAAML,EAAmB,oBACxCnB,EAAe,MAAMuB,EAAuB,oBAC5C,CAAE,KAAAnqD,EAAM,QAAAD,EAAS,oBAAA8oD,CAAmB,EAAK,MAAMwB,GAA+D,mCAAmC,CACnJ,WAAA3mC,EACA,aAAcklC,EACd,qBAAsBK,EAClC,CAAS,EACD,GAAI,CAACjpD,EACD,MAAM,IAAI,MAAM,2BAA2B,EAE/C,OAAAD,EAAQ,GAAG,mBAAqBmwB,GAAe,CAIvCA,EAAW,OAAS,QAGpBA,EAAW,WAAak6B,GAGxBl6B,EAAW,WAAak6B,GAGvBvB,EAAoB,eAAe34B,EACf,EAAI,CACzC,CAAS,EACM,CAAE,KAAAlwB,EAAM,QAAAD,EAClB,CACD,aAAa,oBAAoBA,EAAS,CACtC,GAAI,CACA,MAAMuqD,EAAQ,MAAMvqD,EAAQ,QAC5B,UAAWC,KAAQsqD,EAAO,CACtB,MAAMnrC,EAASnf,EAAK,UACpB,MAAMmf,EAAO,KAAK,iBAAiB,EACnC,MAAMA,EAAO,KAAK,cAAc,EAChC,MAAMA,EAAO,KAAK,aAAa,EAC/B,MAAMA,EAAO,KAAK,qBAAqB,EACvC,MAAMA,EAAO,KAAK,iBAAiB,EACnC,MAAMA,EAAO,KAAK,sCAAsC,EACxD,MAAMA,EAAO,KAAK,kCAAmC,CAAE,QAAS,EAAK,CAAE,EACvE,UAAWhe,KAASnB,EAAK,SAAU,CAC/B,MAAMmf,EAAShe,EAAM,OACrB,MAAMge,EAAO,KAAK,iBAAiB,EACnC,MAAMA,EAAO,KAAK,cAAc,EAChC,MAAMA,EAAO,KAAK,aAAa,EAC/B,MAAMA,EAAO,KAAK,qBAAqB,EACvC,MAAMA,EAAO,KAAK,iBAAiB,EACnC,MAAMA,EAAO,KAAK,kCAAmC,CAAE,QAAS,EAAK,CAAE,CAC1E,CACJ,CACD,MAAMpf,EAAQ,YACjB,OACMkB,EAAK,CACR,QAAQ,MAAM,gCAAiCA,EAAI,OAAO,CAC7D,CACJ,CACD,MAAM,MAAO,CACT,MAAM,QAAQ,KAAK,CAAC,KAAKooD,GAAc,KAAK,YAAY,CAAC,CAC5D,CACD,OAAQ,CACJ,KAAK,QAAU,GACf,KAAKE,KAAe,EACpB,KAAKC,IAAS,OACjB,CACD,mBAAoB,CAChB,KAAKF,KAAmB,EACxB,KAAKC,KAAe,CACvB,CACD,UAAW,CACP,KAAK,aAAe,GACpB,KAAKI,GAA6B,CACrC,CACD,UAAW,CACP,KAAK,aAAe,GACpB,KAAKA,GAA6B,CACrC,CACD,wBAAwBD,EAAmB,CACvC,KAAK,kBAAoBA,CAC5B,CACD,MAAM,MAAO,CACT,KAAM,CAAE,KAAA1pD,EAAM,QAAAD,CAAO,EAAK,MAAMopD,GAAgB,iBAAgB,EAChE,KAAK,QAAU,GACf,MAAMoB,EAAS,KACf,MAAMC,UAA2BC,EAAyC,CACtElmD,GACA,YAAYxE,EAASC,EAAM,CAAE,QAAA9G,EAAS,MAAA0L,CAAK,EAAK,CAC5C,MAAM7E,EAASC,EAAM,CAAE,QAAA9G,CAAS,GAChC,KAAKqL,GAASK,CACjB,CACD,MAAM,eAAe9O,EAAM8D,EAAM,CAC7B,IAAI8wD,EAAW,IAAM,GACrB,MAAM93C,EAAU,IAAI,QAAQ/e,GAAK,CAC7B62D,EAAW72D,CAC/B,CAAiB,EACD02D,EAAO,yBAAyB,OAA0B,CACtD,KAAAz0D,EACA,QAAS40D,CAC7B,CAAiB,EACD,MAAM93C,EACN,MAAM+3C,EAAmB/wD,EAAK,MAAM,QAAQ9D,CAAI,EAC1C80D,EAA0BL,EAAO,cAAgBA,EAAO,kBAAkB,IAAII,CAAgB,EAC9FE,EAAqB/0D,EAAK,OAAS,eAAiBA,EAAK,OAAS,YAAc,CAACy0D,EAAO,QAC1FK,GACAL,EAAO,yBAAyB,QAChC,MAAMA,EAAO,OACbA,EAAO,yBAAyB,aAE3BM,GACL,MAAM,QAAQ,KAAK,CACf,IAAI,QAAQhrD,GAAW,WAAWA,EAASmpD,GAAc,KAAKzkD,EAAM,CAAC,CAAC,EACtEgmD,EAAO,YAC/B,CAAqB,CAER,CACD,MAAM,QAAQz0D,EAAM8D,EAAM,CAGlBsvD,GAA0BlpD,GAAM,IAAG,EAAI,WAAW,IACjDlK,EAAK,OAAS,eAAiBA,EAAK,OAAS,cAIlD,MAAM,KAAK,KAAK,eAChB,MAAM,MAAM,QAAQA,EAAM8D,CAAI,EACjC,CACJ,CACD,MAAMgJ,EAAY,IAAI4nD,EAAmBzqD,EAASC,EAAM,CACpD,QAAS,KAAK,QACd,MAAO,KAAK,KACxB,CAAS,EACD,KAAKwpD,GAAU,MAAMsB,GAA6B,KAAK,SAAUloD,CAAS,EAC1E,IAAIyE,EACJ,GAAI,CACA,MAAM,KAAKmiD,GAAQ,KACtB,OACMvoD,EAAK,CACRoG,EAAQpG,EACR,QAAQ,MAAM,eAAgBA,EAAI,OAAO,CAC5C,QACO,CACJ,MAAMkoD,GAAgB,oBAAoBppD,CAAO,CACpD,CACG,KAAK,QACL,KAAK,yBAAyB,SAEzBsH,EACL,KAAK,yBAAyB,QAA4BA,CAAK,EAG/D,KAAK,yBAAyB,OAErC,CACL,CCrNO,MAAM0jD,EAAa,CACtB3oC,GAAS,IAAI4oC,GACbC,GAAW,EACXppC,GACAqpC,GACAC,GACA,YAAYC,EAAQC,EAAS,CACzB,KAAKH,GAAUE,EACf,KAAKD,GAAWE,CACnB,CAMD,MAAM,SAAU,CACZ,aAAM,KAAKjpC,GAAO,IAAI,SAAY,CAC1B,KAAK6oC,KAAa,IAClB,KAAKppC,GAAS,MAAM,KAAKqpC,GAAO,GAEpC,EAAE,KAAKD,EACnB,CAAS,EACM,CAAC,KAAKppC,GAAQ,KAAKypC,GAAS,KAAK,KAAM,CAAE,SAAU,EAAK,CAAE,CAAC,CACrE,CAQD,MAAM,IAAI3uD,EAAQ,CACd,KAAM,CAACrD,EAAOiyD,CAAO,EAAI,MAAM,KAAK,QAAO,EAC3C,GAAI,CAEA,OADe,MAAM5uD,EAAOrD,CAAK,CAEpC,QACO,CACJ,MAAMiyD,EAAO,CAChB,CACJ,CACD,KAAMD,GAAS37C,EAAO,CAClB,GAAIA,EAAM,SACN,MAAM,IAAI,MAAM,6CAA6C,EAEjE,GAAI,CACAA,EAAM,SAAW,GACjB,MAAM,KAAKyS,GAAO,IAAI,SAAY,CAC1B,KAAK6oC,KAAa,IAClB,MAAM,KAAKE,GAAS,KAAKtpC,EAAM,EAC/B,KAAKA,GAAS,QAElB,EAAE,KAAKopC,EACvB,CAAa,CACJ,OACM5jD,EAAO,CACV,MAAAsI,EAAM,SAAW,GACXtI,CACT,CACJ,CACL,CCxEA,MAAMmkD,GAAe,GACfC,GAA+B,oBACrC,MAAMC,EAAe,CACjB,MAAOC,GACP,aAAa,KAAM,CACf,OAAK,KAAKA,KACN,KAAKA,IAAmB,MAAM,MAAM,IAA6D,gEAC5F,QAEF,KAAKA,EACf,CACL,CCXO,SAASC,GAAmB/+B,EAAU,CACzC,MAAO,CACH,KAAMl4B,EAAS,YACf,MAAOk4B,EAAS,YAChB,OAAQA,EAAS,aAEjB,kBAAmB,EACnB,SAAU,GACV,SAAU,GACV,YAAa,EACrB,CACA,CACO,SAASg/B,GAAmCrkC,EAAY,CAC3D,MAAO,CAAE,KAAM7yB,EAAS,yBAA0B,GAAG6yB,CAAU,CACnE,CACO,SAASskC,GAAkBC,EAAOC,EAAO,CAC5C,MAAI,cAAeD,GAAS,cAAeC,EAChC,KAAK,UAAUD,EAAM,SAAS,IAAM,KAAK,UAAUC,EAAM,SAAS,EAEtE,EAAE,cAAeD,IAAU,EAAE,cAAeC,EACvD,CACO,MAAMhzD,GAAa,EACbC,GAAa,IACbE,GAAQ8yD,GACRxzD,GAAYyzD,GCzBlB,SAASC,GAAcn5D,EAAQ,CAClC,OAAI62D,GAAgC,SAAQ,EAAG,kBAAiB,IAAO72D,GAGhEA,EAAO,OAAS,OAFZ,OAE8BA,EAAO,cACpD,CAMO,SAASo5D,GAAsBp5D,EAAQmO,EAAO,CACjD,MAAM3E,EAAO,GACb,KAAO2E,GAAO,CACV,MAAMy/B,EAAcz/B,EAAM,wBAC1B,GAAI,CAACy/B,EACD,MAGJ,MAAMnkC,EADcmkC,EAAY,YACN,QAAQz/B,CAAK,EACvC3E,EAAK,QAAQC,CAAK,EAClB0E,EAAQy/B,CACX,CACD,MAAO,CAAE,OAAQurB,GAAcn5D,CAAM,EAAG,MAAOwJ,EACnD,CACO,eAAe6vD,GAAoBC,EAAWt5D,EAAQ+2C,EAAY,CAErE,MAAMwiB,EADev5D,EAAO,MAAMw5D,EAA6B,EACxB,oBACjCvC,EAAoBj3D,EAAO,MAAMk3D,EAAuC,EAC9E,UAAW/oD,KAAS8oD,EAAkB,SAAU,CAE5C,GAAI,CADqBsC,EAAkB,KAAKnrC,GAAWA,EAAQ,UAAYjgB,EAAM,EAAE,EAEnF,SAGJ,KAAM,CAAE,mBAAAsrD,CAAkB,EAAK,MAAMz5D,EAAO,UAAW,EAAC,2BAA2B,CAAE,QAASmO,EAAM,GAAI,UAAAmrD,CAAW,GACnH,MAAMt5D,EAAO,aAAc,EAAC,gBAAgB,CACxC,WAAA+2C,EACA,sBAAuB,GACvB,UAAW0iB,CACvB,CAAS,CACJ,CACL,CACO,SAASC,GAA6BC,EAASF,EAAoB,CACtE,UAAWz5D,KAAU25D,EAAS,CAC1B,MAAMC,EAAe55D,EAAO,MAAMw5D,EAA6B,EAC/D,GAAKI,GAGL,UAAWxrC,KAAWwrC,EAAa,oBAC/B,GAAIxrC,EAAQ,KAAOqrC,EACf,OAAOz5D,EAGlB,CAEL,CACO,SAAS65D,GAA8BF,EAASF,EAAoB,CACvE,UAAWz5D,KAAU25D,EAAS,CAC1B,MAAMC,EAAe55D,EAAO,MAAMw5D,EAA6B,EAC/D,GAAKI,GAGL,UAAWxrC,KAAWwrC,EAAa,oBAC/B,GAAIxrC,EAAQ,KAAOqrC,GAAsBrrC,EAAQ,UAAY,OACzD,OAAOA,EAAQ,QAG1B,CAEL,CC/DA,MAAMvmB,GAAoBiyD,GACpBC,GAA2B,IAAI,IAAI,CACrC,QACA,cACA,gBACA,gBACA,YACA,gBACA,SACA,UACA,mBACJ,CAAC,EACKC,GAAmBv+B,GAAgB,CACrC,MAAMw+B,EAAY,GAClB,UAAWC,KAAYz+B,EACnB,UAAW/6B,KAAOw5D,EAAU,CACxB,MAAMC,EAAe,CAAE,KAAM,GAAO,KAAM,GAAO,MAAO,GAAO,IAAK,GAAO,QAAS,EAAE,EAChF,CAAE,QAAAC,EAAS,UAAAC,CAAS,EAAK/nD,GAAqC,2BAA2B5R,CAAG,EAClGy5D,EAAa,QAAUC,EACvB,MAAME,EAAeC,GACrBJ,EAAa,KAAO,GAAQE,EAAYC,EAAa,MACrDH,EAAa,KAAO,GAAQE,EAAYC,EAAa,MACrDH,EAAa,MAAQ,GAAQE,EAAYC,EAAa,OACtDH,EAAa,MAAQ,GAAQE,EAAYC,EAAa,KAClDH,EAAa,UAAY,IACzBF,EAAU,KAAKE,CAAY,CAElC,CAEL,OAAOF,CACX,EACMO,GAAuB,MAAOlB,EAAWK,EAAS5iB,IAAe,CACnE,MAAM,QAAQ,IAAI4iB,EAAQ,IAAI35D,GAAUq5D,GAAoBC,EAAWt5D,EAAQ+2C,CAAU,CAAC,CAAC,CAC/F,EACM0jB,GAAkB,OAAO,OAAO,CAClC,QAAS,UACT,aAAc,cAClB,CAAC,EACM,MAAMC,WAAyBtE,EAAmC,CACrE5jC,GACAmoC,GACAC,GACA1T,GACA2T,GACAC,GAAW,IAAI,IACfC,GAAiC,IAAI,IACrCC,GAAiC,IAAI,IACrCC,GAAqB,IAAI,IACzBC,GAA2B,IAAI,IAC/BC,GAA+B,IAAI,IACnC/rC,GAAS,IAAI4oC,GACboD,GACAC,GAAoC,IAAI,IACxCC,GAAW,GACXC,GAAyB,GACzB,YAAYv7D,EAAQ8L,EAAM,CACtB,QACA,KAAK0mB,GAAUxyB,EACf,KAAK26D,GAAa36D,EAAO,YACzB,KAAK46D,GAAe56D,EAAO,cAC3B,KAAKknD,GAAkBsU,GAA6C,WACpE,MAAMvE,EAAoBj3D,EAAO,MAAMk3D,EAAuC,EAC9E,GAAI,CAACD,EACD,MAAM,IAAI,MAAM,gDAAkDj3D,EAAO,GAAI,GAEjF,KAAK66D,GAAqB5D,EAC1B,KAAKzkC,GAAUxyB,EACf,KAAKo7D,GAAY,CAAE,MAAOtvD,EAAK,MAAO,kBAAmBA,EAAK,kBAAmB,MAAO,CAAE,GAC1F,KAAKyvD,GAAyBzvD,EAAK,qBACtC,CAID,eAAgB,CACZ,OAAO,gBAAgB,KAAKsvD,EAAS,CACxC,CAMD,kBAAkBx0D,EAAM,CACpB,KAAKw0D,GAAY,gBAAgBx0D,CAAI,CACxC,CACD,MAAM,OAAQ,CACV,GAAI,KAAK00D,GACL,MAAM,IAAI,MAAM,yBAAyB,EAE7C,KAAKA,GAAW,GAChB,KAAKpU,GAAgB,iBAAiB,oBAAkG,KAAKuU,GAA2B,IAAI,EAC5K,MAAM,KAAKC,KAEX,MAAM,KAAKf,GAAW,sBACtB,MAAM,KAAKgB,GAAa,KAAKnpC,EAAO,CACvC,CACD,MAAM,MAAO,CAET,MAAM,KAAKopC,KAEN,KAAKxsC,GAAO,UACjB,MAAM,QAAQ,IAAI,CAAC,GAAG,KAAK0rC,GAAS,OAAQ,GAAE,IAAI,KAAKe,EAAe,CAAC,EACvE,KAAK3U,GAAgB,oBAAoB,oBAAkG,KAAKuU,GAA2B,IAAI,CAClL,CACD,KAAMC,IAAsB,CAExB,MAAM5sB,EAAY,KAAK+rB,GAAmB,UAC1C,GAAI,CAAC/rB,EACD,MAAM,IAAI,MAAM,2BAA2B,EAG3C,KAAKoY,GAAgB,kBAAiB,IAAO4U,IAC7C,KAAKL,GAAyB,EAGlC,KAAM,CAAE,kBAAAM,CAAiB,EAAK,MAAM,KAAKvpC,GAAQ,UAAS,EAAG,0BAC7D,KAAKwpC,GAAYpD,GAAmBmD,CAAiB,CAAC,EAEtD,MAAMlM,EAAU,MAAM,KAAKgL,GAAmB,kBAAiB,EAC/D,GAAIhL,EAAS,CACT,MAAMlxB,EAAQkxB,EAAQ,QAAQA,EAAQ,YAAY,EAClD,KAAKkL,GAA+B,IAAI,KAAKvoC,GAAQ,GAAI,EAAEmM,EAAM,EAAE,EACnE,KAAKq8B,GAA+B,IAAI,KAAKxoC,GAAQ,GAAI,EAAEq9B,EAAQ,QAAQ,IAAIlxB,GAASA,EAAM,EAAE,CAAC,EACjG,KAAKy8B,GAAU,MAAM,KAAK,CACtB,KAAMz5D,EAAS,SACf,IAAKg9B,EAAM,IACX,eAAgB,CAAC,CAAE,KAAM/8B,GAAkB,WAAY,IAAK+8B,EAAM,IAAK,MAAOA,EAAM,KAAK,CAAE,CAC3G,CAAa,CACJ,MAEG,KAAKy8B,GAAU,MAAM,KAAK,CACtB,KAAMz5D,EAAS,SACf,IAAKmtC,EAAU,IACf,eAAgB,CACZ,CAAE,KAAMltC,GAAkB,WAAY,IAAKktC,EAAU,IAAK,MAAO,MAAM,KAAKmtB,GAAkB,KAAKzpC,EAAO,CAAG,CAChH,CACjB,CAAa,EAGA,KAAKopC,IACb,CACD,KAAMK,GAAkBj8D,EAAQ,CAE5B,OADiB,MAAMA,EAAO,aAAY,EAAG,gBAAgB,CAAE,WAAY,gBAAgB,CAAE,GAC7E,QAAQ,OAAS,EACpC,CACDy7D,IAA4B,CACxB,MAAM9V,EAAoB,KAAKuB,GAAgB,kBAAiB,EAChE,KAAK8U,GAAYnD,GAAmClT,CAAiB,CAAC,CACzE,CACDuW,GACAC,GAAmB,GACnBP,IAA2B,CACvB,OAAI,KAAKM,IACL,aAAa,KAAKA,EAAc,EAEpC,KAAKA,GAAiB,WAAW,IAAM,CAEnC,KAAK,yBAAyB,mBAAmD,gBAAgB,KAAKd,EAAS,CAAC,EAChH,KAAKc,GAAiB,OACtB,UAAWrvD,KAAW,KAAKsvD,GACvBtvD,IAEJ,KAAKsvD,GAAiB,OAAS,CAClC,EAAE,GAAG,EACC,IAAI,QAAQtvD,GAAW,CAC1B,KAAKsvD,GAAiB,KAAKtvD,CAAO,CAC9C,CAAS,CACJ,CACD,GAAIuvD,IAAgB,CAChB,OAAO,KAAKhB,GAAU,MAAM,MAAM,EAAE,EAAE,CAAC,CAC1C,CAIDiB,GAAqB,IAAI,IAIzBL,GAAYl5D,EAAM,CACd,OAAQA,EAAK,KAAI,CACb,IAAK,cAAe,CAChB,QAASw5D,EAAI,KAAKlB,GAAU,MAAM,OAAS,EAAGkB,EAAI,EAAGA,IAAK,CACtD,MAAMC,EAAe,KAAKnB,GAAU,MAAMkB,CAAC,EAC3C,GAAIC,EAAa,OAAS,QAAS,CAC/Bz5D,EAAK,UAAYy5D,EAAa,UAC9B,KAAKnB,GAAU,MAAM,OAAOkB,EAAG,CAAC,EAChC,KACH,CACJ,CACD,KACH,CACD,IAAK,SAAU,CACX,MAAMC,EAAe,KAAKH,GAC1B,GAAI,CAACG,EACD,MAEJ,OAAQA,EAAa,KAAI,CAErB,IAAK,SACD,GAAI,CAACzD,GAAkBh2D,EAAMy5D,CAAY,EACrC,MAEJ,KAAKnB,GAAU,MAAM,KAAKA,GAAU,MAAM,OAAS,CAAC,EAAIt4D,EACnD,KAAK84D,KACV,OAEJ,IAAK,UACD,KAAKS,GAAmB,IAAIE,EAAa,GAAG,EAC5C,KAAKnB,GAAU,MAAM,MACrB,KAAKY,GAAYl5D,CAAI,EACrB,MACP,CACD,KACH,CACD,IAAK,UAAW,CAGZ,GAAI,KAAKu5D,GAAmB,IAAIv5D,EAAK,GAAG,EACpC,OAEJ,KACH,CACD,IAAK,QAAS,CAEV,GAAI,KAAKu5D,GAAmB,IAAIv5D,EAAK,GAAG,EAAG,CACvC,KAAKu5D,GAAmB,OAAOv5D,EAAK,GAAG,EACvC,MACH,CACD,KACH,CACJ,CACD,KAAKs4D,GAAU,MAAM,KAAKt4D,CAAI,EACzB,KAAK84D,IACb,CACDY,GAAoBpuC,EAASquC,EAAW,CACpC,MAAMC,EAAW,KAAKtB,GAAU,MAAM,KAAKA,GAAU,MAAM,OAAS,CAAC,EACrE,GAAIsB,GAAY,CAACA,EAAS,gBAAgB,KAAKj7D,GAASA,EAAM,OAASG,GAAkB,UAAU,EAAG,CAClG,MAAM5B,EAASouB,EAAQ,QAAU,OAC3BuuC,GAAiBvuC,EAAQ,OAAS,IAAI,KAAK,GAAG,EAC9CwuC,EAAiBF,EAAS,QAAU,OACpCG,IAA0B,UAAWH,EAAWA,EAAS,MAAQ,KAAO,IAAI,KAAK,GAAG,EACtF18D,IAAW48D,GAAkBD,IAAkBE,IAC/CH,EAAS,eAAiB,CAAC,CAAE,KAAM96D,GAAkB,UAAU,CAAE,EACjE,KAAKy5D,GAAkC,IAAIoB,EAAU,GAAE,EAAIC,CAAQ,EAC9D,KAAKd,KAEjB,CACJ,CACDkB,GAA6B98D,EAAQyB,EAAO,CACxC,MAAMs7D,EAAwB,KAAK1B,GAAkC,IAAIr7D,EAAO,GAAE,CAAE,EACpF,GAAI,CAAC+8D,EACD,OAEJ,MAAMj6D,EAAOi6D,EACb,GAAI,CAACj6D,EAAK,eACN,OAEJ,MAAMk6D,EAAkBl6D,EAAK,eAAe,KAAKrB,GAASA,EAAM,OAASG,GAAkB,UAAU,EACjG,CAACo7D,GAAmBA,EAAgB,MAGxCA,EAAgB,IAAMv7D,EAAM,IAC5Bu7D,EAAgB,MAAQv7D,EAAM,MACzB,KAAKm6D,KACb,CACDqB,GAA2Bx7D,EAAO,CAC9B,MAAMy7D,EAAiB,OAAOz7D,EAAM,KAAK,OAAO,EAEhD,QAASgI,EAAQ,EAAGA,EAAQyzD,EAAiB,EAAGzzD,IAC5C,KAAK2xD,GAAU,MAAM,MAEzB,KAAK,yBAAyB,mBAAmD,gBAAgB,KAAKA,EAAS,CAAC,CACnH,CACD+B,GAAsBn9D,EAAQyB,EAAO,CACjC,OAAQA,EAAM,KAAK,KAAI,CACnB,KAAKg5D,GAAgB,aACjB,KAAKwC,GAA2Bx7D,CAAK,EACrC,OACJ,KAAKg5D,GAAgB,QACjB,KAAK2C,GAAsBp9D,EAAQyB,CAAK,EACxC,OACJ,QACI,MACP,CACJ,CACD27D,GAAsBp9D,EAAQyB,EAAO,CACjC,MAAMg4D,EAAqBh4D,EAAM,KAAK,mBACtC,IAAIo0C,EACJ,MAAM+jB,EAAe55D,EAAO,MAAMw5D,EAA6B,EAC/D,GAAII,GACA,UAAWxrC,KAAWwrC,EAAa,oBAC/B,GAAIxrC,EAAQ,KAAOqrC,EAAoB,CACnC5jB,EAAUznB,EAAQ,QAClB,KACH,EAGT,GAAI,CAACynB,EACD,MAAM,IAAI,MAAM,qDAAuD,KAAK,UAAUp0C,EAAM,IAAI,CAAC,EAErG,MAAMqB,EAAO,KAAK,MAAMrB,EAAM,KAAK,OAAO,EAEpC0M,EADoBnO,EAAO,MAAMk3D,EAAuC,EAC9C,WAAWrhB,CAAO,EAClD,GAAI,CAAC1nC,EACD,MAAM,IAAI,MAAM,uBAAuB,EAE3C,MAAMigB,EAAUgrC,GAAsBp5D,EAAQmO,CAAK,EACnD,GAAIrL,EAAK,OAAS,eAAgB,CAC9B,KAAK05D,GAAoBpuC,EAASpuB,CAAM,EACxC,MACH,CAED,OAAQ8C,EAAK,KAAI,CACb,IAAK,SAAU,CACX,KAAKk5D,GAAY,CACb,KAAM,SACN,MAAOl5D,EAAK,MACZ,UAAWA,EAAK,UAChB,MAAOsrB,EAAQ,MAAM,OAASA,EAAQ,MAAQ,OAC9C,OAAQA,EAAQ,MACpC,CAAiB,EACD,KACH,CACD,IAAK,cAAe,CAChB,KAAK4tC,GAAY,CACb,KAAM,cACN,OAAQ5tC,EAAQ,OAChB,UAAWtrB,EAAK,UAChB,QAASA,EAAK,QACd,QAASA,EAAK,QACd,MAAOsrB,EAAQ,MAAM,OAASA,EAAQ,MAAQ,OAC9C,WAAYtrB,EAAK,WACjB,OAAQA,EAAK,MACjC,CAAiB,EACD,KACH,CACD,IAAK,QAAS,CACV,KAAKk5D,GAAY,CACb,KAAM,QACN,OAAQ5tC,EAAQ,OAChB,UAAWtrB,EAAK,UAChB,QAASA,EAAK,QACd,QAASA,EAAK,QACd,MAAOsrB,EAAQ,MAAM,OAASA,EAAQ,MAAQ,OAC9C,SAAUtrB,EAAK,SACf,WAAYA,EAAK,WACjB,OAAQA,EAAK,MACjC,CAAiB,EACD,KACH,CACD,IAAK,QAAS,CACV,KAAKk5D,GAAY,CACb,KAAM,QACN,IAAKl5D,EAAK,IACV,MAAOsrB,EAAQ,MAAM,OAASA,EAAQ,MAAQ,OAC9C,OAAQA,EAAQ,MACpC,CAAiB,EACD,KACH,CACD,IAAK,UAAW,CACZ,KAAK4tC,GAAY,CACb,KAAM,UACN,MAAO5tC,EAAQ,MAAM,OAASA,EAAQ,MAAQ,OAC9C,OAAQA,EAAQ,OAChB,IAAKtrB,EAAK,GAC9B,CAAiB,EACD,KACH,CACD,QACI,MAAM,IAAI,MAAM,wBAAwB,CAC/C,CACJ,CACDu6D,IAAoB,CAChB,MAAM5hC,EAAc6hC,GAAqC,SAAU,EAC9D,mBAAmB,iCAAiC,EACpD,IAAI58D,GAAOA,EAAI,YAAY,IAAI68D,GAASA,EAAM,GAAG,CAAC,EACvD,OAAOvD,GAAgBv+B,CAAW,CACrC,CACD,UAAW+hC,IAAwB,CAC/B,GAAI,CAGAlsD,UAAyB,SAAQ,EAAG,eAAe,2BAA2B,EACvE,EACV,MACK,CACL,CACD,MAAO,EACV,CACDqqD,GAAe,MAAO37D,GAAW,CAC7B,GAAIA,EAAO,SAAWy9D,GAAgB,MAClC,OAEJ,KAAK3C,GAAS,IAAI96D,EAAO,GAAE,EAAIA,CAAM,EACrC,MAAM09D,EAAY19D,EAAO,MAAM29D,EAAyC,EACxEC,GAAkCF,CAAS,EAC3C,MAAMA,EAAU,cAChB,MAAM,KAAKG,GAAa79D,CAAM,EAC9B,MAAM,KAAK89D,GAAyB99D,CAAM,EAC1C,MAAM+2D,EAAqB/2D,EAAO,MAAMg3D,EAAyC,EACjF4G,GAAkC7G,CAAkB,EACpD,KAAKoE,GAA6B,IAAIn7D,EAAQ,CAC1C+2D,EAAmB,iBAAiB,gBAAoE,KAAKgH,GAAsB,KAAK,KAAM/9D,CAAM,CAAC,EACrJ+2D,EAAmB,iBAAiB,kBAAwE,KAAKiH,GAAqB,KAAK,KAAMh+D,CAAM,CAAC,EACxJ+2D,EAAmB,iBAAiB,oBAA6E,KAAKkH,GAA0B,KAAK,KAAMj+D,CAAM,CAAC,CAC9K,CAAS,EACD,MAAM,QAAQ,IAAI+2D,EAAmB,aAAc,EAAC,IAAI,KAAK4E,EAAY,CAAC,CAClF,EACIE,GAAkB,MAAO77D,GAAW,CAChC,MAAMy7B,EAAc,KAAK0/B,GAA6B,IAAIn7D,CAAM,EAC5Dy7B,GACAyiC,GAAwCziC,CAAW,EAEvD,MAAM,KAAK0iC,GAAqBn+D,CAAM,EACtC,MAAM,KAAKo+D,GAAgBp+D,CAAM,CACzC,EACI,KAAM69D,GAAa79D,EAAQ,CACvB,MAAM45D,EAAe55D,EAAO,MAAMw5D,EAA6B,EAC/DoE,GAAkChE,CAAY,EAC9C,KAAKsB,GAAyB,IAAIl7D,EAAQ,CAAC45D,EAAa,iBAAiByE,GAAwB,cAAe,KAAKlB,GAAsB,KAAK,KAAMn9D,CAAM,CAAC,CAAC,CAAC,EAC/J,MAAM,QAAQ,IAAI,OAAO,OAAOy6D,EAAe,EAC1C,IAAI1rD,GAAQ6qD,EAAa,WAAW,CAAE,KAAA7qD,EAAM,qBAAsBuvD,GAAmC,CAAC,CAAC,CAC/G,CACD,KAAMF,GAAgBp+D,EAAQ,CAC1B,MAAM,QAAQ,IAAI,OAAO,OAAOy6D,EAAe,EAAE,IAAI1rD,GAAQ/O,EAAO,aAAY,EAAG,qBAAqB,CAAE,KAAA+O,CAAI,CAAE,CAAC,CAAC,EAClH,MAAM0sB,EAAc,KAAKy/B,GAAyB,IAAIl7D,CAAM,EACxDy7B,GACAyiC,GAAwCziC,CAAW,CAE1D,CACD,KAAMqiC,GAAyB99D,EAAQ,CAEnC,MAAMiuC,EAAS;AAAA,QADQ,MAAMswB,GAAoB,KAEnC;AAAA,iBACLC,EAAiB;AAAA,gCACF9D,GAAiB8C,EAAqB;AAAA,iCACrC,KAAK,UAAU,KAAKjC,EAAsB,CAAC;AAAA,6BAC/C,KAAKH,GAAU,kBAAoBvzD,GAAkB,KAAKuzD,GAAU,iBAAiB,EAAI,MAAS;AAAA,yBACtG,KAAK,UAAU,KAAKiC,GAAmB,EAAC;AAAA;AAAA,MAGnD,CAAC,CAAE,WAAAtuB,CAAU,CAAE,EAAI,MAAM,QAAQ,IAAI,CACvC/uC,EAAO,UAAS,EAAG,wCAAwC,CAAE,OAAQiuC,EAAQ,UAAWqwB,GAAmC,sBAAuB,GAAM,EACxJjF,GAAoBiF,GAAmCt+D,EAAQiuC,CAAM,CACjF,CAAS,EACD,KAAKgtB,GAAmB,IAAIj7D,EAAO,GAAE,EAAI+uC,CAAU,CACtD,CACD,KAAMovB,GAAqBn+D,EAAQ,CAC/B,MAAMy+D,EAAW,KAAKxD,GAAmB,IAAIj7D,EAAO,GAAE,CAAE,EACnDy+D,IAGL,MAAMz+D,EAAO,YAAY,2CAA2C,CAAE,WAAYy+D,CAAQ,CAAE,EAC5F,MAAMjE,GAAqB8D,GAAmC,CAAC,GAAG,KAAKxD,GAAS,OAAM,CAAE,EAAG,kCAAkC,EAChI,CACDiD,GAAsB/9D,EAAQyB,EAAO,CAC5B,KAAKi9D,GAAa,CAAE,KAAM,gBAAiB,MAAAj9D,EAAO,OAAAzB,CAAM,CAAE,CAClE,CACDg+D,GAAqBW,EAAal9D,EAAO,CAGrC,MAAM8rD,EAAc,KAAKuN,GAAS,IAAIr5D,EAAM,IAAI,EAC5C8rD,GACK,KAAKmR,GAAa,CAAE,KAAM,eAAgB,MAAAj9D,EAAO,OAAQ8rD,CAAW,CAAE,CAElF,CACD0Q,GAA0BU,EAAal9D,EAAO,CAC1C,MAAMzB,EAAS,KAAK86D,GAAS,IAAIr5D,EAAM,KAAK,QAAQ,GAAKk9D,EACpD,KAAKD,GAAa,CAAE,KAAM,oBAAqB,MAAAj9D,EAAO,OAAAzB,CAAM,CAAE,CACtE,CACD0+D,GAAaj9D,EAAO,CAChB,OAAO,KAAK2tB,GAAO,IAAI,SAAY,CAC/B,GAAI,CAIA,OAAQ3tB,EAAM,KAAI,CACd,IAAK,eACD,MAAM,KAAKm9D,GAAoBn9D,CAAK,EACpC,MACJ,IAAK,gBACD,MAAM,KAAKo9D,GAAqBp9D,CAAK,EACrC,MACJ,IAAK,oBACD,MAAM,KAAKq9D,GAAyBr9D,CAAK,EACzC,KACP,CAIJ,OACMwM,EAAK,CACR,QAAQ,MAAM,qDAAsDA,EAAI,QAASA,EAAI,KAAK,CAC7F,CACb,CAAS,CACJ,CACD,KAAM4wD,GAAqBp9D,EAAO,CAC9B,GAAIA,EAAM,MAAM,KAAK,OAAS,QAAUA,EAAM,MAAM,KAAK,OAAS,SAC9D,OAEJ,MAAM,KAAKm5D,GAAa,sBAAsB,CAAE,SAAUn5D,EAAM,MAAM,KAAK,SAAU,QAAS,EAAM,GACpG,MAAMzB,EAAS62D,GAAgC,SAAU,EAAC,QAAO,EAAG,KAAKzoD,GAAKA,EAAE,GAAI,IAAK3M,EAAM,MAAM,KAAK,QAAQ,EAClH,GAAI,CAACzB,EACD,MAAM,IAAI,MAAM,wBAAwB,EAG5C,MAAM,KAAK27D,GAAa37D,CAAM,EAE9B,OAAO,cAAc,IAAI,MAAM,0BAA0B,CAAC,CAC7D,CACD,KAAM4+D,GAAoBn9D,EAAO,CAC7B,MAAMs7D,EAAwB,KAAK1B,GAAkC,IAAI55D,EAAM,OAAO,GAAE,CAAE,EACtFs7D,IACA,OAAOA,EAAsB,eAC7B,KAAK1B,GAAkC,OAAO55D,EAAM,OAAO,GAAE,CAAE,EAStE,CACD,KAAMs9D,GAAsB9H,EAAmBj3D,EAAQ,CACnD,MAAM6vD,EAAU,MAAMoH,EAAkB,oBACxC,GAAI,CAACpH,EACD,MAAO,GAEX,MAAMlxB,EAAQkxB,EAAQ,QAAQA,EAAQ,YAAY,EAElD,GADe,KAAKkL,GAA+B,IAAI/6D,EAAO,GAAE,CAAE,IACnD2+B,EAAM,GACjB,MAAO,GAEX,KAAKo8B,GAA+B,IAAI/6D,EAAO,KAAM2+B,EAAM,EAAE,EAC7D,MAAMqgC,EAAc,KAAKhE,GAA+B,IAAIh7D,EAAO,GAAE,CAAE,GAAK,GAE5E,GADA,KAAKg7D,GAA+B,IAAIh7D,EAAO,GAAE,EAAI6vD,EAAQ,QAAQ,IAAIlxB,GAASA,EAAM,EAAE,CAAC,EACvFo7B,GAAyB,IAAIp7B,EAAM,cAAc,GAAKqgC,EAAY,SAASrgC,EAAM,EAAE,EAAG,CACtF,MAAMo+B,EAAwB,KAAK1B,GAAkC,IAAIr7D,EAAO,GAAE,CAAE,EAChF+8D,IACA,OAAOA,EAAsB,eAC7B,KAAK1B,GAAkC,OAAOr7D,EAAO,GAAI,IAE7D,KAAKg8D,GAAY,CACb,KAAMr6D,EAAS,SACf,IAAKg9B,EAAM,IACX,eAAgB,CAAC,CAAE,KAAM/8B,GAAkB,WAAY,IAAK+8B,EAAM,IAAK,MAAOA,EAAM,KAAK,CAAE,CAC3G,CAAa,CACJ,MAEG,KAAKm+B,GAA6B98D,EAAQ,CAAE,KAAM4B,GAAkB,WAAY,IAAK+8B,EAAM,IAAK,MAAOA,EAAM,KAAO,GAExH,MAAO,EACV,CACD,KAAMmgC,GAAyBr9D,EAAO,CAClC,GAAIA,EAAM,MAAM,KAAK,OAAS,QAAUA,EAAM,MAAM,KAAK,OAAS,SAC9D,OAEJ,MAAMzB,EAASyB,EAAM,OACfw1D,EAAoBj3D,EAAO,MAAMk3D,EAAuC,EAC9E,GAAI,CAACD,EACD,MAAM,IAAI,MAAM,kDAAkD,EAEtE,GAAIx1D,EAAM,MAAM,KAAK,OAAS,SAC1B,KAAKq7D,GAA6B98D,EAAQ,CAAE,KAAM4B,GAAkB,WAAY,IAAKH,EAAM,MAAM,KAAK,IAAK,MAAO,MAAM,KAAKw6D,GAAkBj8D,CAAM,CAAC,CAAE,UAEnJyB,EAAM,MAAM,KAAK,OAAS,OAAQ,CACvC,GAAI,MAAM,KAAKs9D,GAAsB9H,EAAmBj3D,CAAM,EAC1D,OAGJ,MAAM,KAAKi/D,GAAoChI,EAAmB,GAAG,EACrE,KAAK6F,GAA6B98D,EAAQ,CAAE,KAAM4B,GAAkB,WAAY,IAAKH,EAAM,MAAM,KAAK,IAAK,MAAO,MAAM,KAAKw6D,GAAkBj8D,CAAM,CAAC,CAAE,CAC3J,CACJ,CACD,KAAMi/D,GAAoChI,EAAmB/wD,EAAS,CAClE,IAAIwxD,EAAW,IAAM,QAAQ,UAC7B,MAAMwH,EAAuB,IAAI,QAAQryD,GAAW,CAChD6qD,EAAW7qD,CACvB,CAAS,EACKsyD,EAAqB,IAAM,CAC7BlI,EAAkB,oBAAoBmI,GAA6B,iBAAkBD,CAAkB,EACvGzH,GACZ,EACQT,EAAkB,iBAAiBmI,GAA6B,iBAAkBD,CAAkB,EACpG,MAAM,QAAQ,IAAI,CACdD,EACA,IAAI,QAAQryD,GAAW,WAAW,IAAM,CACpCoqD,EAAkB,oBAAoBmI,GAA6B,iBAAkBD,CAAkB,EACvGtyD,GACH,EAAE3G,CAAO,CAAC,CACvB,CAAS,CACJ,CACL,CCvlBA,IAAIqP,GAAW,KACf,MAAM8pD,EAAc,CAChB,MAAO,CAEH,OAAO,OAAO,YACjB,CACL,CACO,MAAMC,EAAiB,CAC1BC,GACAnwC,GAAS,IAAI4oC,GACbtmC,GAAe,IAAI2tC,GACnB,aAAc,CACV,KAAKE,GAAqBjuD,GAAyB,SAAU,EAAC,cAAc,yBAA0B,EAAE,CAC3G,CACD,cAAe,CACX,KAAKiuD,GAAmB,IAAI,EAAE,EAC9B,KAAK7tC,GAAe,IAAI2tC,EAC3B,CACD,sBAAsBG,EAAa,CAC/B,KAAK9tC,GAAe8tC,CACvB,CACD,MAAM,cAAc54D,EAAM,CACtB,MAAM2xD,EAAU,MAAM,KAAKnpC,GAAO,QAAO,EACzC,GAAI,CACA,MAAMqwC,EAAa,MAAM,KAAKF,GAAmB,SAAQ,EAEnDG,EAAY,CAAE,YADA,KAAKhuC,GAAa,KAAI,EACT,KAAA9qB,GACjC,OAAA64D,EAAW,KAAKC,CAAS,EACzB,KAAKH,GAAmB,IAAIE,CAAU,EAC/BC,CACV,QACO,CACJnH,GACH,CACJ,CACD,MAAM,gBAAgBoH,EAAa/4D,EAAM,CACrC,MAAM2xD,EAAU,MAAM,KAAKnpC,GAAO,QAAO,EACzC,GAAI,CACA,MAAMqwC,EAAa,MAAM,KAAKF,GAAmB,SAAQ,EACnDG,EAAYD,EAAW,KAAKC,GAAaA,EAAU,cAAgBC,CAAW,EACpF,GAAI,CAACD,EACD,MAAM,IAAI,MAAM,8CAA8C,EAElE,OAAAA,EAAU,KAAO94D,EACjB,KAAK24D,GAAmB,IAAIE,CAAU,EAC/BC,CACV,QACO,CACJnH,GACH,CACJ,CACD,MAAM,gBAAgBoH,EAAa,CAC/B,MAAMpH,EAAU,MAAM,KAAKnpC,GAAO,QAAO,EACzC,GAAI,CACA,MAAMqwC,EAAa,MAAM,KAAKF,GAAmB,SAAQ,EACzD,KAAKA,GAAmB,IAAIE,EAAW,OAAOC,GAAaA,EAAU,cAAgBC,CAAW,CAAC,CACpG,QACO,CACJpH,GACH,CACJ,CACD,aAAaoH,EAAa,CAEtB,OADmB,KAAKJ,GAAmB,IAAG,EAC5B,KAAKG,GAAaA,EAAU,cAAgBC,CAAW,CAC5E,CACD,eAAgB,CACZ,OAAO,KAAKJ,GAAmB,KAClC,CACD,OAAO,UAAW,CACd,OAAKhqD,KACDA,GAAW,IAAI+pD,IAEZ/pD,EACV,CACL,CC1EA,IAAIA,GAAW,KAEf,MAAMqqD,GAA2B,GAAK,KAAO,KAOtC,MAAMC,EAAkB,CAC3BC,GACAC,GACAC,GACA,YAAYC,EAAiBL,GAA0B,CACnD,KAAKE,GAAsBxuD,GAAyB,SAAU,EAAC,cAAc,uBAAwB,EAAE,EACvG,KAAKyuD,GAAe,KAAKG,KACzB,KAAKF,GAAkBC,CAC1B,CACD,OAAQ,CACJ,KAAKH,GAAoB,IAAI,EAAE,EAC/B,KAAKC,GAAe,IAAI,GAC3B,CACD,wBAAwBI,EAAe12D,EAAO,CAC1C,MAAM22D,EAAa,KAAKL,GAAa,IAAI,KAAKM,GAAcF,EAAe12D,CAAK,CAAC,EACjF,OAAK22D,GAGL,KAAKE,GAAkBF,CAAU,EAC1BA,EAAW,MAHP,IAId,CACD,0BAA0BD,EAAe12D,EAAOvH,EAAM,CAClD,MAAMk+D,EAAa,CAAE,cAAAD,EAAe,MAAA12D,EAAO,KAAAvH,CAAI,EAC/C,KAAK69D,GAAa,IAAI,KAAKM,GAAcF,EAAe12D,CAAK,EAAG22D,CAAU,EAC1E,KAAKE,GAAkBF,CAAU,CACpC,CACD,8BAA8BD,EAAe,CACzC,SAAW,CAACz/D,EAAKi+B,CAAK,IAAK,KAAKohC,GACxBphC,EAAM,gBAAkBwhC,GACxB,KAAKJ,GAAa,OAAOr/D,CAAG,EAGpC,KAAK4/D,GAAiB,CACzB,CACDD,GAAcF,EAAe12D,EAAO,CAChC,MAAO,GAAG02D,CAAa,IAAI12D,CAAK,EACnC,CACDy2D,IAAoB,CAChB,MAAMhV,EAAc,IAAI,IAClBhpD,EAAO,KAAK49D,GAAoB,IAAG,EACzC,UAAWp9D,KAAQR,EACfgpD,EAAY,IAAI,KAAKmV,GAAc39D,EAAK,cAAeA,EAAK,KAAK,EAAGA,CAAI,EAE5E,OAAOwoD,CACV,CACDoV,GAAkBC,EAAoB,CAClC,GAAIA,EAAoB,CACpB,MAAM7/D,EAAM,KAAK2/D,GAAcE,EAAmB,cAAeA,EAAmB,KAAK,EAGzF,KAAKR,GAAa,OAAOr/D,CAAG,EAC5B,KAAKq/D,GAAa,IAAIr/D,EAAK6/D,CAAkB,CAChD,CACD,MAAMrV,EAAc,GACpB,IAAIsV,EAAqB,EAEzB,SAAW,CAAC9/D,EAAK0/D,CAAU,IAAK,MAC3B,KAAK,KAAKL,GAAa,SAAS,EAChC,UACGS,EAAqB,KAAKR,IAC1BQ,GAAsBJ,EAAW,KAAK,OACtClV,EAAY,KAAKkV,CAAU,GAI3B,KAAKL,GAAa,OAAOr/D,CAAG,EAGpC,KAAKo/D,GAAoB,IAAI5U,EAAY,QAAS,EACrD,CACD,OAAO,SAASp/C,EAAO,CAAE,SAAU,KAAM,eAAgB8zD,IAA4B,CACjF,KAAM,CAAE,SAAAa,EAAU,eAAAR,CAAgB,EAAGn0D,EACrC,OAAI,CAACyJ,IAAYkrD,KACblrD,GAAW,IAAIsqD,GAAkBI,CAAc,GAE5C1qD,EACV,CACL,CCtFA,MAAMmrD,GAAmB,IACnBC,GAAwB,IAC9B,eAAeC,IAAoB,CAC/B,MAAMC,EAAahK,GAAgC,SAAU,EAAC,kBAAiB,EAC/E,GAAI,CAACgK,EACD,MAAM,IAAI,MAAM,4BAA4B,EAEhD,KAAM,CAAE,KAAA3+D,CAAI,EAAK,MAAM2+D,EAAW,YAAY,yBAAyB,EAAE,EACzE,OAAK3+D,EAIG,yBAA2BA,EAFxB,gFAGf,CACO,eAAe4+D,GAAiB5+D,EAAM,CACzC,MAAM6+D,EAAM,IAAI,MACVnhD,EAAU,IAAI,QAAQ/S,GAAW,CACnCk0D,EAAI,OAASl0D,CACrB,CAAK,EACDk0D,EAAI,IAAM7+D,EACV,MAAM0d,EACN,MAAMohD,EAAS,SAAS,cAAc,QAAQ,EACxC5yC,EAAU4yC,EAAO,WAAW,IAAI,EACtC,GAAI,CAAC5yC,EACD,MAAM,IAAI,MAAM,2BAA2B,EAE/C,MAAM6yC,EAAcF,EAAI,MAAQA,EAAI,OACpCC,EAAO,MAAQN,GACfM,EAAO,OAAS,KAAK,IAAIL,GAAuBD,GAAmBO,CAAW,EAC9E,MAAMC,EAAS,MAAM,kBAAkBH,EAAK,CACxC,YAAaL,GACb,cAAe,MACvB,CAAK,EACD,OAAAtyC,EAAQ,UAAU8yC,EAAQ,EAAG,CAAC,EACvBF,EAAO,UAAU,WAAW,CACvC,CACO,eAAeG,IAAiB,CACnC,MAAMj/D,EAAO,MAAM0+D,KACnB,OAAO,MAAME,GAAiB5+D,CAAI,CACtC,CCxCA,SAASk/D,GAAgBt+D,EAAM,CAC3B,MAAMk6D,EAAkBl6D,EAAK,gBAAgB,KAAKrB,GAASA,EAAM,OAAS,YAAY,EACtF,OAAIqB,EAAK,OAAS,WACP,CACH,MAAOk6D,GAAiB,OAAS,GACjC,IAAKl6D,EAAK,IACV,MAAO,CAAE,EACT,YAAaA,CACzB,EAEQk6D,EACO,CACH,MAAOA,EAAgB,OAAS,GAChC,IAAKA,EAAgB,KAAO,GAC5B,MAAO,CAAE,CACrB,EAEW,IACX,CACO,SAASqE,GAAcz7D,EAAO,CACjC,IAAI07D,EAAiB,KACrB,MAAMC,EAAW,GACjB,UAAWz+D,KAAQ8C,EAAO,CACtB,GAAI07D,EACAA,EAAe,MAAM,KAAKx+D,CAAI,UAEzBA,EAAK,OAAS,WAAY,CAC/Bw+D,EAAiBF,GAAgBt+D,CAAI,EACrC,QACH,MAEGw+D,EAAiB,CAAE,MAAO,eAAgB,IAAK,GAAI,MAAO,CAACx+D,CAAI,GAEnE,MAAM0+D,EAAcJ,GAAgBt+D,CAAI,EACpC0+D,IACIF,GACAC,EAAS,KAAKD,CAAc,EAEhCA,EAAiBE,EAExB,CACD,OAAIF,IAAmB,CAACC,EAAS,QAAUD,EAAe,MAAM,SAC5DC,EAAS,KAAKD,CAAc,EAEzBC,CACX,CC5CO,SAASE,GAAqBC,EAAa/3D,EAAQ,CACtD,IAAIg4D,EAAQD,EACZ,MAAMzH,EAAYqD,GAAqC,SAAU,EAAC,mBAAmB3zD,CAAM,EAC3F,UAAWuwD,KAAYD,EACnB0H,GAAS,MAAMzH,EAAS,MAAK,CAAE,GAEnC,OAAOyH,CACX,CCNA,MAAMphE,GAAS,IAAI,cACnBA,GAAO,YACP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,CAiGC,EC1FD,KAAM,MAAES,GAAM,WAAY,CAAE4gE,YAAW,GAAKzgE,GACtC4P,GAAY,CAId,cAAe,iBAIf,eAAgB,kBAIhB,gBAAiB,yBAIjB,wBAAyB,6BAIzB,kBAAmB,qBAInB,gBAAiB,mBAOjB,gBAAiB,MASjB,mBAAoB,SAQpB,iBAAkB,OAMlB,iBAAkB,OAMlB,kBAAmB,QAKnB,cAAe,2BAKf,0BAA2B,oKAI3B,UAAW,YACf,EACMC,GAAOC,GAA4B,oDAAqDF,EAAS,EACjGG,GAAaC,GAA6B,KAAK,OAAWH,EAAI,EAC7D,MAAM6wD,WAA8B,KAAM,CAC7C,OAAO,UAAY,mBACnB,KACA,kBACA,sBACA,YAAY9yD,EAAM+yD,EAAuBC,EAAmB,CACxD,MAAMF,GAAsB,UAAW,EAAE,EACzC,KAAK,KAAO9yD,EACZ,KAAK,kBAAoBgzD,GAAqB,OAC9C,KAAK,sBAAwBD,CAChC,CACL,CACO,MAAME,WAAgC,KAAM,CAC/C,OAAO,UAAY,qBACnB,aAAc,CACV,MAAMA,GAAwB,SAAS,CAC1C,CACL,CACO,MAAMC,WAA4B,WAAY,CACjDC,GAAU,KAAK,aAAa,CAAE,KAAM,MAAQ,GAC5CC,GAAwB,GACxBnwC,GACAowC,GACA,aAAc,CACV,QACA,KAAK,aAAa,QAAS,GAAGC,GAAsB,uBAAuB,CAAC,EAAE,CACjF,CACD,mBAAoB,CAChB,KAAKH,GAAQ,mBAAqB,CAC9BI,GACAC,GACAC,EACZ,EACQ,KAAKC,GAAO,EACZ,KAAKP,GAAQ,cAAc,OAAO,GAAG,MAAK,CAC7C,CACD,IAAI,KAAKhgE,EAAM,CACX,KAAKkgE,GAAoBlgE,EAAK,iBAC9B,KAAKigE,GAAwB,KAAKC,GAAkB,YACvD,CACDM,GAAWjhE,EAAO,CACV,KAAKuwB,KACL,KAAKA,GAAS,OACd,KAAKywC,GAAO,GAEMhhE,EACJ,MAAQ,UACtB,KAAK,eAAc,EACnBA,EAAM,gBAAe,EACrBA,EAAM,eAAc,EAE3B,CACD,gBAAiB,CACb,MAAMkhE,EAAY,KAAKT,GAAQ,cAAc,iBAAiB,EAC9D,GAAI,CAACS,EACD,MAAM,IAAI,MAAM,gCAAgC,EAEpD,GAAI,CAAC,KAAKP,GACN,MAAM,IAAI,MAAM,kBAAkB,EAEtC,GAAI,CAACO,EAAU,MAAM,OAAQ,CACzB,KAAK3wC,GAAS,IAAI,MAAM9gB,GAAWH,GAAU,uBAAuB,CAAC,EACrE,KAAK0xD,GAAO,EACZ,MACH,CACD,MAAMG,EAAuB,KAAKV,GAAQ,iBAAiB,qCAAqC,EAC1FJ,EAAwB,GAC9B,UAAWnwD,KAAgBixD,EAAsB,CAC7C,MAAMC,EAAWlxD,EACXmxD,EAAgBD,EAAS,MAC3BA,EAAS,SACTf,EAAsB,KAAKgB,CAAa,CAE/C,CACD,GAAI,CAAChB,EAAsB,SAASiB,EAA2B,GAAG,GAC9D,CAACjB,EAAsB,SAASiB,EAA2B,KAAK,GAChE,CAACjB,EAAsB,SAASiB,EAA2B,MAAM,EAAG,CACpE,KAAK/wC,GAAS,IAAI,MAAM9gB,GAAWH,GAAU,yBAAyB,CAAC,EACvE,KAAK0xD,GAAO,EACZ,MACH,CACD,UAAW9wD,KAAgB,OAAO,OAAOoxD,CAA0B,EAC/D,KAAKX,GAAkB,kBAAkBzwD,EAAcmwD,EAAsB,SAASnwD,CAAY,CAAC,EAGvG,MAAMowD,EADsB,KAAKG,GAAQ,cAAc,qBAAqB,EAC9B,MAAM,KAAI,EACxD,KAAKE,GAAkB,kBAAoBL,EAC3C,KAAK,cAAc,IAAIF,GAAsBc,EAAU,MAAM,OAAQb,EAAuBC,CAAiB,CAAC,CACjH,CACDiB,IAA8B,CAC1B,KAAK,cAAc,IAAIhB,EAAyB,CACnD,CACDiB,GAAgB,IAAM,CAClB,KAAKf,GAAQ,cAAc,iBAAiB,GAAG,OAAM,CAC7D,EACIO,IAAU,CACN,MAAMS,EAAsB,IAAI,IAAI,CAChC,CAACH,EAA2B,KAAM7xD,GAAWH,GAAU,gBAAgB,CAAC,EACxE,CAACgyD,EAA2B,IAAK7xD,GAAWH,GAAU,eAAe,CAAC,EACtE,CAACgyD,EAA2B,KAAM7xD,GAAWH,GAAU,gBAAgB,CAAC,EACxE,CACIgyD,EAA2B,MAC3B7xD,GAAWH,GAAU,iBAAiB,CACzC,EACD,CACIgyD,EAA2B,OAC3B7xD,GAAWH,GAAU,kBAAkB,CAC1C,CACb,CAAS,EAEDoyD,GAAeniE;AAAAA;AAAAA;AAAAA,kBAGLkQ,GAAWH,GAAU,eAAe,CAAC;AAAA;AAAA,sBAEjCG,GAAWH,GAAU,eAAe,CAAC;AAAA,sBACrCqyD,GAAqB,EAAC,MAAM,CAAE,MAAO,EAAM,EAAC;AAAA,sBAC5C,CACV,QAAS,OACT,KAAM,QACN,SAAU,OACtB,CAAS;AAAA,uBACc,KAAKJ,EAA2B;AAAA;AAAA;AAAA,0DAGG9xD,GAAWH,GAAU,aAAa,CAAC;AAAA;AAAA,oBAEzE,KAAKoxD,EAAqB;AAAA,qBACzB,KAAKc,EAAa;AAAA,uBAChB,KAAKP,EAAU;AAAA,oBAClBW,GAAwB,gBAAgB,EAAE,MAAM,CAAE,OAAQ,EAAI,CAAE,CAAC;AAAA;AAAA;AAAA;AAAA;AAAA,oBAKjEnyD,GAAWH,GAAU,iBAAiB,CAAC;AAAA;AAAA;AAAA,sBAGrCG,GAAWH,GAAU,SAAS,CAAC;AAAA,sBAC/BuyD,GAAmB,wBAAwB,EAAE,MAAM,CAAE,MAAO,EAAI,CAAE,CAAC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAMrE1B,GAAU,KAAKQ,IAAmB,iBAAiB,CAAC;AAAA;AAAA,uBAEjD,KAAKM,EAAU;AAAA,oBAClBW,GAAwB,oBAAoB,EAAE,MAAM,CAAE,OAAQ,EAAI,CAAE,CAAC;AAAA;AAAA;AAAA;AAAA;AAAA,oBAKrEnyD,GAAWH,GAAU,aAAa,CAAC;AAAA;AAAA;AAAA,sBAGjCG,GAAWH,GAAU,SAAS,CAAC;AAAA,sBAC/BuyD,GAAmB,wBAAwB,EAAE,MAAM,CAAE,MAAO,EAAI,CAAE,CAAC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAM3E,OAAO,OAAOP,CAA0B,EAAE,IAAIpxD,GAAgB,CAChE,MAAM4xD,EAAU,KAAKnB,IAAmB,kBAAkBzwD,CAAY,EACtE,OAAO3Q;AAAAA;AAAAA;AAAAA,iCAGc,KAAK0hE,EAAU;AAAA,+BACjB/wD,CAAY;AAAA,8BACb6xD,GAAsB,EAAC,MAAM,CAAE,MAAO,EAAI,CAAE,EAAE,QAAQ,YAAY7xD,CAAY,EAAE,CAAC;AAAA,iCAC9E4xD,CAAO;AAAA;AAAA;AAAA,sBAGlBL,EAAoB,IAAIvxD,CAAY,GAAKA,CAAY;AAAA;AAAA,iBAG3E,CAAS,CAAC;AAAA;AAAA;AAAA,YAGE,KAAKqgB,IACLhxB;AAAAA;AAAAA,cAEE,KAAKgxB,GAAO,OAAO;AAAA;AAAA,SAExB;AAAA;AAAA;AAAA;AAAA;AAAA,uBAKc,KAAK,cAAc;AAAA,uBACnB9gB,GAAWH,GAAU,cAAc,CAAC;AAAA,uBACpC,QAAQ;AAAA,sBACT0yD,GAAqB,mCAAiF,MAAM,CAAE,MAAO,EAAI,CAAE,CAAC;AAAA,sBAC5HC,GAAoCxyD,GAAWH,GAAU,cAAc,EAAG,iCAAiC,CAA+C;AAAA;AAAA;AAAA;AAAA,QAIvK,KAAKmxD,GAAS,CAAE,KAAM,IAAM,EAEhC,CACL,CACA,eAAe,OAAO,iCAAkCD,EAAmB,EClS3E,MAAM1hE,GAAS,IAAI,cACnBA,GAAO,YACP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,CAgGC,EC5FD,KAAM,CAAES,OAAM,EAAGG,GACX4P,GAAY,CAId,gBAAiB,mBAIjB,gBAAiB,yBAIjB,cAAe,iBAIf,gBAAiB,mBAIjB,cAAe,gBACnB,EACMC,GAAOC,GAA4B,kDAAmDF,EAAS,EAC/FG,GAAaC,GAA6B,KAAK,OAAWH,EAAI,SAC7D,MAAM2yD,WAA6B,KAAM,CAC5C,OAAO,UAAY,kBACnB,aAAc,CACV,MAAMA,GAAqB,SAAS,CACvC,CACL,EACO,MAAMC,WAA6B,KAAM,CAC5C,YACA,OAAO,UAAY,kBACnB,YAAYjE,EAAa,CACrB,MAAMiE,GAAqB,SAAS,EACpC,KAAK,YAAcjE,CACtB,CACL,CACO,MAAMkE,WAA2B,KAAM,CAC1C,YACA,OAAO,UAAY,gBACnB,YAAYlE,EAAa,CACrB,MAAMkE,GAAmB,SAAS,EAClC,KAAK,YAAclE,CACtB,CACL,QACO,MAAMmE,WAA2B,KAAM,CAC1C,YACA,OAAO,UAAY,gBACnB,YAAYnE,EAAa,CACrB,MAAMmE,GAAmB,SAAS,EAClC,KAAK,YAAcnE,CACtB,CACL,EACO,MAAMoE,WAA0B,WAAY,CAC/C7B,GAAU,KAAK,aAAa,CAAE,KAAM,MAAQ,GAC5C8B,GAAS,CACL,WAAY,CAAE,EACd,cAAe,EACvB,EACI,aAAc,CACV,OACH,CACD,mBAAoB,CAChB,KAAK9B,GAAQ,mBAAqB,CAAC+B,EAAuB,EACrDC,GAAgD,KAAM,KAAKzB,EAAO,CAC1E,CACD,IAAI,WAAWhD,EAAY,CACvB,KAAKuE,GAAO,WAAavE,EACpByE,GAAgD,KAAM,KAAKzB,EAAO,CAC1E,CACD,IAAI,cAAcn8D,EAAO,CACrB,KAAK09D,GAAO,cAAgB19D,EACvB49D,GAAgD,KAAM,KAAKzB,EAAO,CAC1E,CACD0B,IAAiB,CACb,KAAK,cAAc,IAAIR,EAAsB,CAChD,CACDS,GAAezE,EAAal+D,EAAO,CAC/BA,EAAM,gBAAe,EACrB,KAAK,cAAc,IAAImiE,GAAqBjE,CAAW,CAAC,CAC3D,CACD0E,GAAa1E,EAAal+D,EAAO,CAC7BA,EAAM,gBAAe,EACrB,KAAK,cAAc,IAAIoiE,GAAmBlE,CAAW,CAAC,CACzD,CACD2E,GAAsB3E,EAAal+D,EAAO,CACtCA,EAAM,gBAAe,EACrB,KAAK,cAAc,IAAIqiE,GAAmBnE,CAAW,CAAC,CACzD,CACD+C,GAAW/C,EAAal+D,EAAO,CACvBA,EAAM,MAAQ,SAGlB,KAAK4iE,GAAa1E,EAAal+D,CAAK,CACvC,CACD8iE,GAAiB9iE,EAAO,CACpBA,EAAM,gBAAe,CACxB,CACDghE,GAAU,IAAM,CAEZU,GAAeniE;AAAAA;AAAAA;AAAAA,kBAGLkQ,GAAWH,GAAU,eAAe,CAAC;AAAA;AAAA,yBAE9B,SAA+C;AAAA,uBACjD,KAAKozD,EAAc;AAAA,sBACpBT,GAAoCxyD,GAAWH,GAAU,eAAe,EAAG,kCAAkC,CAAgD;AAAA,8BACrJ,kBAAkB;AAAA;AAAA,gBAEhCG,GAAWH,GAAU,eAAe,CAAC;AAAA;AAAA;AAAA;AAAA,cAIvC,KAAKizD,GAAO,WAAW,IAAItE,GACtB1+D;AAAAA;AAAAA;AAAAA;AAAAA,iCAIckQ,GAAWH,GAAU,aAAa,CAAC;AAAA;AAAA,+BAErC,KAAK2xD,GAAW,KAAK,KAAMhD,EAAU,WAAW,CAAC;AAAA,6BACnD,KAAK2E,GAAa,KAAK,KAAM3E,EAAU,WAAW,CAAC;AAAA,4BACpD8E,GAAoB,EAC/B,MAAM,CAAE,MAAO,GAAM,EACrB,QAAQ,WAAW,CAAC;AAAA;AAAA;AAAA;AAAA;AAAA,yCAKI9E,EAAU,IAAI;AAAA;AAAA,wBAE/B,KAAKsE,GAAO,cAClBhjE;AAAAA;AAAAA,wCAEsBkQ,GAAWH,GAAU,aAAa,CAAC;AAAA,wCACnC,CACpB,QAAS,OACT,SAAU,OACV,aAAc,gBAClC,CAAiB;AAAA,yCACwB,KAAKuzD,GAAsB,KAAK,KAAM5E,EAAU,WAAW,CAAC;AAAA,2CAC1D,KAAK6E,EAAgB;AAAA;AAAA,2DAG9C,EAAE;AAAA;AAAA;AAAA,gCAGYrzD,GAAWH,GAAU,eAAe,CAAC;AAAA,gCACrC,CAChB,QAAS,OACT,SAAU,MACV,aAAc,kBAC9B,CAAa;AAAA,iCACoB,KAAKqzD,GAAe,KAAK,KAAM1E,EAAU,WAAW,CAAC;AAAA,mCACnD,KAAK6E,EAAgB;AAAA;AAAA;AAAA;AAAA,iBAK/C,CAAC;AAAA;AAAA;AAAA,QAGD,KAAKrC,GAAS,CAAE,KAAM,IAAM,EAErC,CACA,CACA,eAAe,OAAO,+BAAgC6B,EAAiB,EC/KvE,IAAIxuD,GAAW,KACR,MAAMkvD,WAAyBrO,EAAmC,CACrE,OAAO,UAAW,CACd,OAAK7gD,KACDA,GAAW,IAAIkvD,IAEZlvD,EACV,CACDmvD,GAAS,IAAI,IACb,aAAc,CACV,QACA,KAAK,OAAM,CACd,CACD,QAAS,CACL,MAAMC,EAAgBC,GAAuD,WAC7ED,EAAc,iBAAiB,cAA0E,KAAKE,EAAa,EAC3HF,EAAc,iBAAiB,gBAA8E,KAAKE,EAAa,EAC/HF,EAAc,iBAAiB,iBAAgF,KAAKG,EAAW,EAC/H,UAAWrtC,KAAcktC,EAAc,QACnC,KAAKG,GAAY,CAAE,KAAMrtC,CAAY,EAE5C,CACD,QAAS,CACL,MAAMktC,EAAgBC,GAAuD,WAC7ED,EAAc,oBAAoB,cAA0E,KAAKE,EAAa,EAC9HF,EAAc,oBAAoB,gBAA8E,KAAKE,EAAa,EAClIF,EAAc,oBAAoB,iBAAgF,KAAKG,EAAW,EAClI,KAAKJ,GAAO,OACf,CACD,YAAa,CACT,OAAOE,GAAuD,WAAW,SAC5E,CACD,QAAQG,EAAc,CAClB,MAAMC,EAAO,KAAKN,GAAO,IAAIK,CAAY,EACzC,GAAI,CAACC,EACD,MAAM,IAAI,MAAM,gBAAgB,EAEpC,OAAOA,CACV,CACDH,GAAgB,IAAM,CAClB,KAAK,yBAAyB,oBAAqD,KAAK,WAAY,EAC5G,EACIC,GAAerjE,GAAU,CACrB,MAAMg2B,EAAah2B,EAAM,KACpB,KAAKijE,GAAO,IAAIjtC,EAAW,EAAE,GAC9B,KAAKitC,GAAO,IAAIjtC,EAAW,GAAI,IAAIwtC,GAAgBxtC,CAAU,CAAC,CAE1E,CACA,CACA,MAAMwtC,EAAgB,CAClBC,GACAC,GACAC,GAAa,GACbC,GAAY,GACZ,YAAY5tC,EAAY,CACpB,KAAKytC,GAAcztC,EACnB,KAAK0tC,GAAU,SAAS,cAAc,QAAQ,EAC9C,KAAKA,GAAQ,IAAM1tC,EAAW,SAC9B,KAAK0tC,GAAQ,OAAS,KAAKG,EAC9B,CACDA,GAAgB,IAAM,CAClB,KAAKD,GAAY,GACb,KAAKD,IACL,KAAKF,GAAY,SAE7B,EACI,MAAO,CACC,KAAKE,KAGT,KAAKA,GAAa,GACd,KAAKC,IACL,KAAKH,GAAY,UAExB,CACD,MAAO,CACE,KAAKE,KAGV,KAAKA,GAAa,GAClB,KAAKC,GAAY,GACjB,KAAKH,GAAY,WACpB,CACD,OAAQ,CACJ,OAAO,KAAKC,EACf,CACL,CCtFA,MAAM5kE,GAAS,IAAI,cACnBA,GAAO,YACP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,CA0DC,ECtDD,KAAM,CAAES,OAAM,EAAGG,GACX4P,GAAY,CAId,UAAW,QAIX,UAAW,yCACf,EACMC,GAAOC,GAA4B,8CAA+CF,EAAS,EAC3FG,GAAaC,GAA6B,KAAK,OAAWH,EAAI,EAC7D,MAAMu0D,WAAoB,KAAM,CACnC,OAAO,UAAY,8BACnB,aAAc,CACV,MAAMA,GAAY,UAAW,CAAE,QAAS,GAAM,SAAU,EAAI,CAAE,CACjE,CACL,CACO,MAAMC,WAAsB,WAAY,CAC3CtD,GAAU,KAAK,aAAa,CAAE,KAAM,MAAQ,GAC5CgD,GACA,aAAc,CACV,QACA,KAAK,aAAa,QAAS,GAAG7C,GAAsB,gBAAgB,CAAC,EAAE,CAC1E,CACD,mBAAoB,CAChB,KAAKH,GAAQ,mBAAqB,CAACuD,EAAmB,EACtD,KAAKhD,GAAO,CACf,CACD,sBAAuB,CACd,KAAKyC,IAGVQ,GAA6C,SAAU,EAAC,QAAQ,KAAKR,GAAY,EAAE,EAAE,MACxF,CACD,IAAI,WAAWztC,EAAY,CACvB,KAAKytC,GAAcztC,EACnB,KAAKgrC,GAAO,EACZiD,GAA6C,SAAQ,EAAG,QAAQjuC,EAAW,EAAE,EAAE,MAClF,CACDkuC,IAAa,CACT,KAAK,cAAc,IAAIJ,EAAa,CACvC,CACD9C,IAAU,CACN,GAAI,CAAC,KAAKyC,GACN,OAEJ,MAAMn3B,EAAS23B,GAA6C,WAAW,QAAQ,KAAKR,GAAY,EAAE,EAAE,QAEpG/B,GAAeniE;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA,wBAMCkQ,GAAWH,GAAU,SAAS,CAAC;AAAA;AAAA;AAAA,gBAGvC,KAAKm0D,GAAY,KAAK;AAAA;AAAA;AAAA,sBAGhBh0D,GAAWH,GAAU,SAAS,CAAC;AAAA,sBAC/BqyD,GAAqB,EAAC,MAAM,CAAE,MAAO,EAAM,EAAC;AAAA,sBAC5C,CACV,QAAS,OACT,KAAM,QACN,SAAU,OACtB,CAAS;AAAA,uBACc,KAAKuC,EAAU;AAAA;AAAA;AAAA;AAAA,cAIxB53B,CAAM;AAAA;AAAA;AAAA,MAGb,KAAKm0B,GAAS,CAAE,KAAM,IAAM,EAE9B,CACL,CACA,eAAe,OAAO,mCAAoCsD,EAAa,ECnFvE,KAAM,CAAExkE,OAAM,EAAGG,GACX4P,GAAY,CAId,OAAQ,SAIR,wBAAyB,eAIzB,sBAAuB,mBAIvB,sBAAuB,aAIvB,oBAAqB,OAIrB,0BAA2B,kBAI3B,wBAAyB,YAIzB,+BAAgC,uBAIhC,6BAA8B,iBAI9B,WAAY,QAIZ,eAAgB,YACpB,EACMyY,GAAQ,CACV,CACI,MAAO,SACP,eAAgB,OAChB,YAAa,IAAMtY,GAAWH,GAAU,uBAAuB,EAC/D,MAAO,IAAMG,GAAWH,GAAU,qBAAqB,CAC1D,EACD,CACI,MAAO,OACP,eAAgB,OAChB,YAAa,IAAMG,GAAWH,GAAU,qBAAqB,EAC7D,MAAO,IAAMG,GAAWH,GAAU,mBAAmB,CACxD,EACD,CACI,MAAO,YACP,eAAgB,OAChB,YAAa,IAAMG,GAAWH,GAAU,yBAAyB,EACjE,MAAO,IAAMG,GAAWH,GAAU,uBAAuB,CAC5D,EACD,CACI,MAAO,iBACP,eAAgB,OAChB,YAAa,IAAMG,GAAWH,GAAU,8BAA8B,EACtE,MAAO,IAAMG,GAAWH,GAAU,4BAA4B,CACjE,CACL,EACM60D,GAA8B,CAC/B,OAA2C,EAC3C,KAAuC,EACvC,UAAiD,EACjD,eAA2D,CAChE,EACM50D,GAAOC,GAA4B,8CAA+CF,EAAS,EAC3FG,GAAaC,GAA6B,KAAK,OAAWH,EAAI,EAC7D,MAAM60D,WAAyB,KAAM,CACxC,MACA,UACA,OAAO,UAAY,cACnB,YAAYj0D,EAAOhC,EAAW,CAC1B,MAAMi2D,GAAiB,UAAW,CAAE,QAAS,GAAM,SAAU,EAAI,CAAE,EACnE,KAAK,MAAQj0D,EACb,KAAK,UAAYhC,CACpB,CACL,CACA,MAAMk2D,GAA0B,YACzB,MAAMC,WAAsB,WAAY,CAC3C7D,GAAU,KAAK,aAAa,CAAE,KAAM,MAAQ,GAC5C8D,GAAe,KAAKvD,GAAQ,KAAK,IAAI,EACrCuB,GAAS,CAAE,SAAU,IACrBiC,GACAC,GAAoB,GACpB,IAAI,KAAKhkE,EAAM,CACX,KAAK+jE,GAAY/jE,EAAK,SACtB,KAAKgkE,GAAoBhkE,EAAK,gBACjC,CACD,IAAI,UAAW,CACX,OAAO,KAAK8hE,GAAO,QACtB,CACD,IAAI,SAASmC,EAAU,CACnB,KAAKnC,GAAO,SAAWmC,EAClBjC,GAAgD,KAAM,KAAK8B,EAAY,CAC/E,CACD,mBAAoB,CACX9B,GAAgD,KAAM,KAAK8B,EAAY,CAC/E,CACDI,GAA0B3kE,EAAO,CAC7B,MAAMmQ,EAAQnQ,EAAM,MAChB,KAAKwkE,IAAaxkE,EAAM,QACxB,KAAKwkE,GAAU,MAAQr0D,EACvB,KAAKq0D,GAAU,gBAAkB,IAErCI,EAAiB,qBAAqBT,GAA4Bh0D,CAAK,CAAC,EACnEsyD,GAAgD,KAAM,KAAK8B,EAAY,CAC/E,CACDM,GAAyB7kE,EAAO,CAE5B,GADAA,EAAM,gBAAe,EACjBA,EAAM,OAASA,EAAM,MAAM,WAAWqkE,EAAuB,EAAG,CAC5D,KAAKG,KACL,KAAKA,GAAU,gBAAkBxkE,EAAM,OAE3C,MAAM8kE,EAAe,OAAO9kE,EAAM,MAAM,UAAUqkE,GAAwB,MAAM,CAAC,EACjF,KAAK,cAAc,IAAID,GAAiB,SAA0C,KAAKK,GAAkBK,CAAY,CAAC,CAAC,EAClHrC,GAAgD,KAAM,KAAK8B,EAAY,EAC5E,MACH,CACD,KAAK,cAAc,IAAIH,GAAiB,KAAKI,GAAY,KAAKA,GAAU,MAAQ,QAAQ,CAAiC,EACpH/B,GAAgD,KAAM,KAAK8B,EAAY,CAC/E,CACDvD,IAAU,CACN,MAAM+D,EAAS,CAAC,CAAE,KAAMt1D,GAAWH,GAAU,UAAU,EAAG,MAAAyY,EAAK,CAAE,EAC7D,KAAK08C,GAAkB,QACvBM,EAAO,KAAK,CACR,KAAMt1D,GAAWH,GAAU,cAAc,EACzC,MAAO,KAAKm1D,GAAkB,IAAI,CAACt2D,EAAWlK,KACnC,CACH,MAAOogE,GAA0BpgE,EACjC,eAAgB,OAChB,YAAa,IAAMkK,EAAU,QAAS,EACtC,MAAO,IAAMA,EAAU,QAAS,CACxD,EACiB,CACjB,CAAa,EAGLuzD,GAAeniE;AAAAA;AAAAA,4BAEK,KAAKolE,EAAyB;AAAA,2BAC/B,KAAKE,EAAwB;AAAA,iBACvC,SAA4C;AAAA,yBACpC,EAAK;AAAA,kBACZ,KAAKtC,GAAO,QAAQ;AAAA,gBACtB,kCAAkF;AAAA,eACnF,KAAKiC,IAAW,iBAAmB,KAAKA,IAAW,OAAS,EAAE;AAAA,qBACxD/0D,GAAWH,GAAU,MAAM,CAAC;AAAA,gBACjCy1D,CAAM;AAAA,cACR/C,GAAqB,oCAAmF,MAAM,CAAE,MAAO,EAAI,CAAE,CAAC;AAAA,+BAC5G,KAAKvB,GAAS,CAAE,KAAM,IAAM,EAEvD,CACL,CACA,eAAe,OAAO,0BAA2B6D,EAAa,EC1K9D,MAAMxlE,GAAS,IAAI,cACnBA,GAAO,YACP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;A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","names":["PerformanceTracing","#traceEvents","#tracingManager","#delegate","target","delegate","Trace.TracingManager.TracingManager","categories","events","usage","progress","styles","__decorate","decorators","key","desc","c","r","d","i","html","Decorators","LitElement","LitHtml","customElement","property","ControlButton","controlButtonStyles","#handleClickEvent","event","SelectorType","StepType","AssertedEventType","assertAllStepTypesAreHandled","s","pointerDeviceTypes","mouseButtonMap","hasProperty","data","prop","isObject","isString","isNumber","isArray","isBoolean","isIntegerArray","item","isKnownDeviceType","isKnownMouseButton","parseTarget","step","parseFrame","parseNumber","maybeNumber","parseBoolean","maybeBoolean","parseOptionalNumber","parseOptionalString","parseString","parseOptionalBoolean","maybeString","parseSelectors","sub","parseOptionalSelectors","parseAssertedEvent","parseAssertedEvents","parseBaseStep","type","validTimeout","timeoutErrorMessage","parseStepWithTarget","parseStepWithFrame","parseStepWithSelectors","parseClickAttributes","attributes","deviceType","button","parseClickStep","parseDoubleClickStep","parseHoverStep","parseChangeStep","parseKeyDownStep","parseKeyUpStep","parseEmulateNetworkConditionsStep","parseCloseStep","parseSetViewportStep","parseScrollStep","parseNavigateStep","parseWaitForElementStep","operator","attribute","parseWaitForExpressionStep","parseCustomStep","parseStep","idx","parseSteps","steps","result","cleanUndefined","json","minTimeout","maxTimeout","timeout","parse","getSelectorType","selector","value","selectorToPElementSelector","escape","input","StringifyExtension","out","flow","JSONStringifyExtension","copy","lines","stepText","separator","InMemoryLineWriter","#indentation","#currentIndentation","#lines","indentation","line","formatJSONAsJS","indent","buffer","format","level","formatAsJSLiteral","keys","toHexadecimal","charCode","padToLength","escapedReplacements","content","patternsToEscape","patternsToEscapePlusSingleQuote","escapePattern","match","pattern","controlChar","loneSurrogate","escapedContent","quote","PuppeteerStringifyExtension","#shouldAppendWaitForElementHelper","#targetBrowser","targetBrowser","defaultTimeout","waitForElementHelper","#appendContext","waitForEvents","#appendStepType","#appendTarget","#appendFrame","path","index","#appendLocators","action","#appendClickStep","#appendDoubleClickStep","#appendHoverStep","#appendChangeStep","#appendEmulateNetworkConditionsStep","#appendKeyDownStep","#appendKeyUpStep","#appendCloseStep","#appendViewportStep","#appendScrollStep","#appendNavigationStep","#appendWaitForElementStep","#appendWaitExpressionStep","alpha","charToIdx","acc","char","LEAST_5_BIT_MASK","CONTINUATION_BIT_MASK","MAX_INT","encodeInt","num","payload","encode","nums","parts","decode","str","results","chrs","shift","ch","SOURCE_MAP_PREFIX","stringify","opts","ext","sourceMap","firstLine","lastLine","stringifyStep","isSourceMapLine","parseSourceMap","text","stripSourceMap","RunnerExtension","comparators","a","b","waitForTimeout","resolve","PuppeteerRunnerExtension","browser","page","#ensureAutomationEmulatation","pageOrFrame","#getTimeoutForStep","targetPage","getTargetPageForStep","targetFrame","targetPageOrFrame","localFrame","getFrame","mainPage","assertedEventsPromise","startWaitingForEvents","locatorRace","x","y","waitForElement","err","PuppeteerRunnerOwningBrowserExtension","frame","t","promises","count","visible","properties","compFn","waitForFunction","elements","querySelectorsAll","elementsHandle","element","name","isDeepMatch","selectors","querySelectorAll","elementHandles","part","handle","innerHandle","el","fn","isActive","timeoutId","_runStepWithHooks","extension","Runner","#flow","#extension","#aborted","createRunner","flowOrExtension","maybeExtension","runner","createPuppeteerRunnerOwningBrowserExtension","puppeteer","__vitePreload","PuppeteerReplayStringifyExtension","isNavigationStep","isMobileFlow","LighthouseStringifyExtension","#isProcessingTimespan","flags","isNavigation","UIStrings","str_","i18n.i18n.registerUIStrings","i18nString","i18n.i18n.getLocalizedString","RecorderSettings","#selectorAttribute","Common.Settings.Settings","#speed","#replayExtension","#selectorTypes","#preferredCopyFormat","selectorType","speed","replayExtension","now","RecorderShortcutHelper","#abortController","#timeoutId","#timeout","#cleanInternals","#handleCallback","callback","UI.KeyboardShortcut.KeyboardShortcut","extendStatics","d2","b2","p","__extends","__","__awaiter","thisArg","_arguments","P","generator","adopt","reject","fulfilled","e","rejected","__generator","body","_","f","g","verb","n","v","op","__values","o","m","__read","ar","error","__spreadArray","to","from2","pack","l","__await","__asyncGenerator","q","resume","settle","fulfill","__asyncValues","v2","isFunction","createErrorClass","createImpl","_super","instance","ctorFunc","UnsubscriptionError","errors","arrRemove","arr","Subscription","Subscription2","initialTeardown","e_1","_a","e_2","_b","_parentage","_parentage_1","_parentage_1_1","parent_1","e_1_1","initialFinalizer","_finalizers","_finalizers_1","_finalizers_1_1","finalizer","execFinalizer","e_2_1","teardown","parent","empty","EMPTY_SUBSCRIPTION","isSubscription","config","timeoutProvider","handler","args","_i","reportUnhandledError","noop","errorContext","cb","Subscriber","Subscriber2","destination","_this","EMPTY_OBSERVER","next","complete","SafeSubscriber","_bind","bind","ConsumerObserver","ConsumerObserver2","partialObserver","handleUnhandledError","SafeSubscriber2","observerOrNext","context_1","defaultErrorHandler","observable","identity","pipe","fns","pipeFromArray","prev","Observable","Observable2","subscribe","observable2","subscriber","isSubscriber","source","sink","promiseCtor","getPromiseCtor","operations","isObserver","hasLift","operate","init","liftedSource","createOperatorSubscriber","onNext","onComplete","onError","onFinalize","OperatorSubscriber","OperatorSubscriber2","shouldUnsubscribe","err2","closed_1","ObjectUnsubscribedError","Subject","Subject2","subject","AnonymousSubject","_c","observer","observers","hasError","isStopped","thrownError","AnonymousSubject2","dateTimestampProvider","ReplaySubject","ReplaySubject2","_bufferSize","_windowTime","_timestampProvider","_buffer","_infiniteTimeWindow","subscription","adjustedBufferSize","last2","Action","Action2","scheduler","work","state","delay2","intervalProvider","AsyncAction","AsyncAction2","id","_id","_scheduler","_delay","errored","errorValue","actions","Scheduler","Scheduler2","schedulerActionCtor","AsyncScheduler","AsyncScheduler2","SchedulerAction","asyncScheduler","async","EMPTY","isScheduler","last","popScheduler","popNumber","defaultValue","isArrayLike","isPromise","isInteropObservable","isAsyncIterable","obj","createInvalidObservableTypeError","getSymbolIterator","iterator","isIterable","readableStreamLikeToAsyncGenerator","readableStream","reader","done","isReadableStreamLike","innerFrom","fromInteropObservable","fromArrayLike","fromPromise","fromAsyncIterable","fromIterable","fromReadableStreamLike","obs","array","promise","iterable","iterable_1","iterable_1_1","asyncIterable","process","asyncIterable_1","asyncIterable_1_1","executeSchedule","parentSubscription","repeat","scheduleSubscription","observeOn","subscribeOn","scheduleObservable","schedulePromise","scheduleArray","scheduleIterable","iterator2","scheduleAsyncIterable","scheduleReadableStreamLike","scheduled","from","of","EmptyError","firstValueFrom","config2","isValidDate","map","project","callOrApply","mapOneOrManyArgs","mergeInternals","concurrent","onBeforeNext","expand","innerSubScheduler","additionalFinalizer","active","isComplete","checkComplete","outerNext","doInnerSub","innerComplete","innerValue","_loop_1","bufferedValue","mergeMap","resultSelector","ii","mergeAll","concatAll","concat","defer","observableFactory","nodeEventEmitterMethods","eventTargetMethods","jqueryMethods","fromEvent","eventName","options","isEventTarget","methodName","isNodeStyleEventEmitter","toCommonHandlerRegistry","isJQueryStyleEventEmitter","add","remove","subTarget","timer","dueTime","intervalOrScheduler","due","merge","sources","NEVER","isArray3","argsOrArgArray","filter","predicate","race","raceInit","subscriptions","i2","catchError","innerSub","syncUnsub","handledResult","defaultIfEmpty","hasValue","take","seen","ignoreElements","throwIfEmpty","errorFactory","defaultErrorFactory","first","hasDefaultValue","mergeScan","accumulator","seed","raceWith","otherSources","retry","configOrCount","resetOnSuccess","soFar","subscribeForRetry","resub_1","notifier","notifierSubscriber_1","startWith","values","switchMap","innerSubscriber","innerIndex","outerIndex","takeUntil","tap","tapObserver","isUnsub","_a2","mitt_default","n2","disposeSymbol","asyncDisposeSymbol","DisposableStack","#disposed","#stack","resource","onDispose","stack","AsyncDisposableStack","EventEmitter","#emitter","#handlers","emitter","mitt","handlers","onceHandler","eventData","isNode","environment","packageVersion","assert","message","stringToTypedArray","string","base64Encoded","binaryString","stringToBase64","typedArrayToBase64","typedArray","chunks","chunk","mergeUint8Arrays","items","length","offset","debugModule","importDebug","__vite_default__","debug","prefix","logArgs","debugLevel","PuppeteerError","TimeoutError","ProtocolError","#code","#originalMessage","code","originalMessage","UnsupportedOperation","TargetCloseError","paperFormats","debugError","SOURCE_URL","PuppeteerURL","functionName","site","url","#functionName","#siteString","siteString","puppeteerUrl","withSourcePuppeteerURLIfNone","object","original","getSourcePuppeteerURLIfAvailable","evaluationString","fun","serializeArgument","arg","getReadableAsTypedArray","readable","buffers","fileHandle","getReadableFromProtocolStream","client","controller","getUnit8Array","isBase64","eof","validateDialogType","dialogType","ms","cause","UTILITY_WORLD_NAME","SOURCE_URL_REGEX","getSourceUrlComment","NETWORK_IDLE_TIME","parsePDFOptions","lengthUnit","defaults","width","height","convertPrintParameterToInches","margin","unitToPixels","parameter","pixels","unit","valueText","fromEmitterEvent","listener","fromAbortSignal","signal","filterAsync","isMatch","WEB_PERMISSION_TO_PROTOCOL_PERMISSION","Browser","context","CDPSessionEvent","CDPSession","Deferred","awaitables","deferredWithTimeout","deferred","#isResolved","#isRejected","#value","#resolve","#taskPromise","#timeoutError","#finish","#promise","Mutex","#mutex","#onRelease","mutex","onRelease","#locked","#acquirers","BrowserContext","#pageScreenshotMutex","#screenshotOperationsCount","__addDisposableResource","env","dispose","inner","__disposeResources","SuppressedError","fail","rec","suppressed","CdpBrowserContext","#connection","#browser","#id","connection","contextId","origin","permissions","protocolPermissions","permission","protocolPermission","env_1","_guard","TargetType","Target","isErrorLike","rewriteError","createProtocolErrorMessage","CallbackRegistry","#callbacks","#idGenerator","createIncrementalIdGenerator","label","request","Callback","errorMessage","#error","#deferred","#timer","#label","CdpCDPSession","#sessionId","#targetType","#parentSessionId","#target","targetType","sessionId","parentSessionId","method","params","DEFAULT_TIMEOUT","TimeoutSettings","#defaultTimeout","#defaultNavigationTimeout","instances","moveable","Class","hasDispose","asyncDispose","throwIfDisposed","invokeAtMostOnceForArguments","cache","cacheDepth","freshArguments","cacheIterator","guarded","getKey","mutexes","result_1","LocatorEvent","Locator","locators","RaceLocator","#ensureElementIsInTheViewport","#waitForEnabled","#waitForStableBoundingBox","conditions","condition","candidates","RETRY_DELAY","locator","visibility","#waitForEnabledIfNeeded","#waitForStableBoundingBoxIfNeeded","rect1","rect2","#ensureElementIsInTheViewportIfNeeded","isIntersectingViewport","#click","#fill","inputType","newValue","currentValue","originalValue","textToType","#hover","#scroll","scrollTop","scrollLeft","mapper","MappedLocator","FilteredLocator","FunctionLocator","func","#pageOrFrame","#func","DelegatedLocator","#predicate","base","#mapper","NodeLocator","#selector","#waitForVisibilityIfNeeded","checkLocatorArray","#locators","__runInitializers","initializers","useValue","__esDecorate","ctor","descriptorIn","contextIn","extraInitializers","accept","kind","descriptor","setDefaultScreenshotOptions","Page","_classSuper","_instanceExtraInitializers","_screenshot_decorators","_metadata","#requestHandlers","#inflight$","originalRequest","response","addend","wrapper","selectorOrFunc","pageFunction","urlOrPredicate","observable$","idleTime","concurrency","inflight","device","ScreenRecorder","devicePixelRatio","#getNativePixelDimensions","crop","cropWidth","cropHeight","roundRectangle","normalizeRectangle","viewportWidth","viewportHeight","recorder","createWriteStream","stream","#screencastSessionCount","#startScreencastPromise","viewport","userOptions","env_2","filePath","scrollDimensions","clip","ConsoleMessage","#type","#text","#args","#stackTraceLocations","stackTraceLocations","FileChooser","#element","#multiple","#handled","paths","NetworkManagerEvent","JSHandle","_classDecorators","_classDescriptor","_classExtraInitializers","_classThis","_getProperty_decorators","_getProperties_decorators","propertyName","propertyNames","enumerableProperties","descriptors","Binding","#name","#fn","#initSource","initSource","isTrivial","seq","callbacks","debugProtocolSend","debugProtocolReceive","Connection","#url","#transport","#delay","#sessions","#closed","#manuallyAttached","transport","delay","#onClose","session","stringifiedMessage","parentSession","targetId","targetInfo","isAutoAttachEmulated","isTargetClosedError","Coverage","#jsCoverage","#cssCoverage","JSCoverage","CSSCoverage","#client","#enabled","#scriptURLs","#scriptSources","#subscriptions","#resetOnNavigation","#reportAnonymousScripts","#includeRawScriptCoverage","resetOnNavigation","reportAnonymousScripts","includeRawScriptCoverage","useBlockCoverage","clientEmitter","#onScriptParsed","#onExecutionContextsCleared","coverage","profileResponse","entry","flattenRanges","ranges","convertToDisjointRanges","#stylesheetURLs","#stylesheetSources","#eventListeners","#onStyleSheet","header","ruleTrackingResponse","styleSheetIdToCoverage","styleSheetId","nestedRanges","points","range","aLength","bLength","hitCountStack","lastOffset","point","lastResult","Dialog","#message","#defaultValue","promptText","CdpDialog","__setFunctionName","EmulatedState","#state","#clientProvider","#updater","initialState","clientProvider","updater","EmulationManager","_private_applyViewport_decorators","_private_applyViewport_descriptor","_private_emulateIdleState_decorators","_private_emulateIdleState_descriptor","_private_emulateTimezone_decorators","_private_emulateTimezone_descriptor","_private_emulateVisionDeficiency_decorators","_private_emulateVisionDeficiency_descriptor","_private_emulateCpuThrottling_decorators","_private_emulateCpuThrottling_descriptor","_private_emulateMediaFeatures_decorators","_private_emulateMediaFeatures_descriptor","_private_emulateMediaType_decorators","_private_emulateMediaType_descriptor","_private_setGeolocation_decorators","_private_setGeolocation_descriptor","_private_setDefaultBackgroundColor_decorators","_private_setDefaultBackgroundColor_descriptor","_private_setJavaScriptEnabled_decorators","_private_setJavaScriptEnabled_descriptor","viewportState","mobile","deviceScaleFactor","screenOrientation","hasTouch","#applyViewport","idleStateState","#emulateIdleState","timezoneState","#emulateTimezone","visionDeficiency","#emulateVisionDeficiency","#emulateCpuThrottling","#emulateMediaFeatures","#emulateMediaType","#setGeolocation","#setDefaultBackgroundColor","#setJavaScriptEnabled","#emulatingMobile","#hasTouch","#states","#viewportState","#idleOverridesState","#timezoneState","#visionDeficiencyState","#cpuThrottlingState","#mediaFeaturesState","#mediaTypeState","#geoLocationState","#defaultBackgroundColorState","#javascriptEnabledState","#secondaryClients","currentState","reloadNeeded","overrides","timezoneId","factor","features","mediaFeature","longitude","latitude","accuracy","enabled","FirefoxTargetManager","#discoveredTargetsByTargetId","#availableTargetsByTargetId","#availableTargetsBySessionId","#targetFilterCallback","#targetFactory","#attachedToTargetListenersBySession","#initializeDeferred","#targetsIdsForInit","targetFactory","targetFilterCallback","#onTargetCreated","#onTargetDestroyed","#onSessionDetached","#onAttachedToTarget","_target","#finishInitializationIfReady","_isElementHandle","createdFunctions","createFunction","functionValue","stringifyFunction","interpolateFunction","replacements","jsValue","DEFAULT_BATCH_SIZE","fastTransposeIteratorHandle","size","handles","handle_1","transposeIteratorHandle","transposeIterableHandle","env_3","generatorHandle","e_3","LazyArg","get","#get","QueryHandler","node","PuppeteerUtil","elementOrFrame","hidden","polling","env_4","query","root","e_4","AsyncIterableUtil","isKnownAttribute","ATTRIBUTE_REGEXP","parseARIASelector","queryOptions","defaultName","ARIAQueryHandler","ariaQuerySelector","role","CSSQueryHandler","cssQuerySelector","cssQuerySelectorAll","ScriptInjector","#updated","#amendments","statement","#update","inject","force","injectedSource","scriptInjector","CustomQueryHandlerRegistry","Handler","registerScript","customQueryHandlers","PierceQueryHandler","pierceQuerySelector","pierceQuerySelectorAll","PQueryHandler","pQuerySelectorAll","pQuerySelector","TOKENS","TRIM_TOKENS","getArgumentPatternByType","gobbleParens","nesting","tokenizeBy","grammar","tokens","token","before","after","STRING_PATTERN","ESCAPE_PATTERN","tokenize","pos","changedTokens","replacement","tokenOffset","flatten","child","listOrNode","ESCAPE_REGEXP","unquote","parsePSelectors","isPureCSS","hasAria","hasPseudoClasses","compoundSelector","complexSelector","storage","TextQueryHandler","textQuerySelectorAll","XPathQueryHandler","xpathQuerySelectorAll","BUILTIN_QUERY_HANDLERS","QUERY_SEPARATORS","getQueryHandlerAndSelector","handlerMap","pSelector","FrameEvent","throwIfDetached","Frame","_frameElement_decorators","_evaluateHandle_decorators","_evaluate_decorators","_locator_decorators","_$_decorators","_$$_decorators","_$eval_decorators","_$$eval_decorators","_waitForSelector_decorators","_waitForFunction_decorators","_content_decorators","_addScriptTag_decorators","_addStyleTag_decorators","_click_decorators","_focus_decorators","_hover_decorators","_select_decorators","_tap_decorators","_type_decorators","_title_decorators","#_document","#document","parentFrame","list","iframe_1","iframe","updatedSelector","script","link","env_5","e_5","env_6","e_6","env_7","e_7","env_8","e_8","CdpPreloadScript","#source","#frameToId","mainFrame","identifier","DeviceRequestPromptDevice","DeviceRequestPrompt","#timeoutSettings","#updateDevicesHandle","#updateDevices","#waitForDevicePromises","timeoutSettings","firstEvent","rawDevice","newDevice","waitForDevicePromise","DeviceRequestPromptManager","#deviceRequestPrompDeferreds","#onDeviceRequestPrompted","needsEnable","enablePromise","devicePrompt","bindIsolatedHandle","adoptedThis","ElementHandle","_jsonValue_decorators","_private_$$_decorators","_private_$$_descriptor","_isVisible_decorators","_isHidden_decorators","_toElement_decorators","_clickablePoint_decorators","_drag_decorators","_dragEnter_decorators","_dragOver_decorators","_drop_decorators","_dragAndDrop_decorators","_touchStart_decorators","_touchMove_decorators","_touchEnd_decorators","_press_decorators","_boundingBox_decorators","_boxModel_decorators","_isIntersectingViewport_decorators","_scrollIntoView_decorators","#$$impl","#$$","elementHandle","#checkVisibility","tagName","box","#clickableBox","dataOrElement","startPoint","targetPoint","vals","selectedValues","option","boxes","rect","#intersectBoundingBoxesWithFrame","parentBox","style","documentWidth","documentHeight","intersectBoundingBox","#getTopLeftCornerOfFrame","model","offsets","border","padding","transformQuadWithOffsets","quad","scrollIntoView","elementClip","#nonEmptyVisibleBoundingBox","pageLeft","pageTop","#asSVGElementHandle","#getOwnerSVGElement","threshold","visibleRatio","entries","createEvaluationError","details","valueFromRemoteObject","detail","getErrorDetails","messageHeight","stackLines","messageLines","createClientError","remoteObject","addPageBinding","callPuppeteer","CDP_BINDING_PREFIX","pageBindingInitString","CdpJSHandle","#remoteObject","#world","world","releaseObject","NON_ELEMENT_NODE_ROLES","CdpElementHandle","_contentFrame_decorators","_uploadFile_decorators","_autofill_decorators","#frameManager","nodeInfo","filePaths","isMultiple","files","backendNodeId","fieldId","frameId","nodes","ariaQuerySelectorBinding","ariaQuerySelectorAllBinding","ExecutionContext","#disposables","contextPayload","#onBindingCalled","#onConsoleAPI","#bindings","#addBinding","binding","#bindingsInstalled","#puppeteerUtil","#addBindingWithoutThrowing","#evaluate","returnByValue","sourceUrlComment","expression","expressionWithSourceUrl","exceptionDetails","functionDeclaration","functionDeclarationWithSourceUrl","callFunctionOnPromise","convertArgumentAsync","convertArgument","objectHandle","Accessibility","#realm","realm","interestingOnly","defaultRoot","AXNode","needle","interestingNodes","children","serializedNode","collection","insideControl","#richlyEditable","#editable","#focusable","#hidden","#role","#ignored","#cachedHasFocusableChild","#isPlainTextField","#isTextOnlyObject","#hasFocusableChild","userStringProperties","getUserStringPropertyValue","userStringProperty","booleanProperties","getBooleanPropertyValue","booleanProperty","tristateProperties","tristateProperty","numericalProperties","getNumericalPropertyValue","numericalProperty","tokenProperties","getTokenPropertyValue","tokenProperty","payloads","nodeById","childId","FrameManagerEvent","WaitTask","#polling","#root","#result","#poller","#signal","#reruns","RAFPoller","MutationPoller","IntervalPoller","poller","badError","TaskManager","#tasks","task","Realm","IsolatedWorld","#context","#frameOrWorker","frameOrWorker","#onContextDisposed","#onContextConsoleApiCalled","#onContextBindingCalled","#executionContext","#waitForExecutionContext","info","newHandle","MAIN_WORLD","PUPPETEER_WORLD","puppeteerToProtocolLifecycle","LifecycleWatcher","#expectedLifecycle","#frame","#navigationRequest","#initialLoaderId","#terminationDeferred","#sameDocumentNavigationDeferred","#lifecycleDeferred","#newDocumentNavigationDeferred","#hasSameDocumentNavigation","#swapped","#navigationResponseReceived","networkManager","waitUntil","protocolEvent","#checkLifecycleComplete","frameEmitter","#navigatedWithinDocument","#navigated","#frameSwapped","#onFrameDetached","networkManagerEmitter","#onRequest","#onResponse","#onRequestFailed","navigationType","checkLifecycle","expectedLifecycle","CdpFrame","_goto_decorators","_waitForNavigation_decorators","_setContent_decorators","_addPreloadScript_decorators","_addExposedFunctionBinding_decorators","_removeExposedFunctionBinding_decorators","_waitForDevicePrompt_decorators","#detached","frameManager","parentFrameId","#onMainWorldConsoleApiCalled","#onMainWorldBindingCalled","referer","referrerPolicy","ensureNewDocumentNavigation","watcher","navigate","referrer","#deviceRequestPromptManager","preloadScript","framePayload","loaderId","FrameTree","#frames","#parentIds","#childIds","#mainFrame","#isMainFrameStale","#waitRequests","childIds","parentId","HTTPRequest","InterceptResolutionAction","pendingHandler","promiseChain","interceptAction","#canBeIntercepted","priority","errorCode","errorReason","errorReasons","byteBody","headersArray","headers","STATUS_TEXTS","handleError","CdpHTTPRequest","#isNavigationRequest","#resourceType","#method","#hasPostData","#postData","#headers","#initiator","interceptionId","allowInterception","redirectChain","postData","postDataBinaryBase64","parsedBody","responseHeaders","status","HTTPResponse","SecurityDetails","#subjectName","#issuer","#validFrom","#validTo","#protocol","#sanList","securityPayload","CdpHTTPResponse","#request","#contentPromise","#bodyLoadedDeferred","#remoteAddress","#status","#statusText","#fromDiskCache","#fromServiceWorker","#securityDetails","#timing","responsePayload","extraInfo","#parseStatusTextFromExtraInfo","statusText","NetworkEventManager","#requestWillBeSentMap","#requestPausedMap","#httpRequestsMap","#responseReceivedExtraInfoMap","#queuedRedirectInfoMap","#queuedEventGroupMap","networkRequestId","fetchRequestId","redirectInfo","inFlightRequestCounter","replacer","_key","NetworkManager","#networkEventManager","#extraHTTPHeaders","#credentials","#attemptedAuthentications","#userRequestInterceptionEnabled","#protocolRequestInterceptionEnabled","#userCacheDisabled","#emulatedNetworkConditions","#userAgent","#userAgentMetadata","#onRequestPaused","#onAuthRequired","#onRequestWillBeSent","#onRequestServedFromCache","#onResponseReceived","#onLoadingFinished","#onLoadingFailed","#onResponseReceivedExtraInfo","#removeClient","#clients","#applyExtraHTTPHeaders","#applyNetworkConditions","#applyProtocolCacheDisabled","#applyProtocolRequestInterception","#applyUserAgent","credentials","#applyToAllClients","extraHTTPHeaders","networkConditions","userAgent","userAgentMetadata","requestPausedEvent","#patchRequestEventHeaders","username","password","#onRequestWithoutNetworkInstrumentation","requestWillBeSentEvent","fromMemoryCache","redirectResponseExtraInfo","#handleRequestRedirect","#forgetRequest","#emitResponseEvent","responseReceived","queuedEvents","#emitLoadingFinished","#emitLoadingFailed","requestId","_client","TIME_FOR_WAITING_FOR_SWAP","FrameManager","#page","#networkManager","#isolatedWorlds","#scriptsToEvaluateOnNewDocument","#frameNavigatedReceived","#deviceRequestPromptManagerMap","#frameTreeHandled","#onClientDisconnect","#removeFramesRecursively","swapped","#onFrameAttached","#onFrameNavigated","#onFrameNavigatedWithinDocument","#onFrameStartedLoading","#onFrameStoppedLoading","#onExecutionContextCreated","#onLifecycleEvent","frameTree","#handleFrameTree","#createIsolatedWorld","manager","isMainFrame","reason","auxData","Keyboard","MouseButton","Mouse","Touchscreen","_keyDefinitions","CdpKeyboard","#pressedKeys","description","#keyDescriptionForString","autoRepeat","#modifierBit","keyString","definition","getFlag","getButtonFromPressedButtons","buttons","CdpMouse","#keyboard","keyboard","#_state","#transactions","#createTransaction","transaction","popTransaction","updates","#withTransaction","update","commit","rollback","flag","updateState","position","clickCount","deltaX","deltaY","start","CdpTouchscreen","Tracing","#recording","#path","defaultCategories","screenshots","excludedCategories","cat","includedCategories","contentDeferred","WebWorker","CdpWebWorker","consoleAPICalled","exceptionThrown","convertConsoleMessageLevel","CdpPage","defaultViewport","#initialize","#targetManager","#primaryTargetClient","#primaryTarget","#tabTargetClient","#tabTarget","#mouse","#touchscreen","#emulationManager","#tracing","#exposedFunctions","#coverage","#viewport","#workers","#fileChooserDeferreds","#sessionCloseDeferred","#serviceWorkerBypassed","#userDragInterceptionEnabled","frameManagerEmitter","#onActivation","#onSecondaryTarget","#onDetachedFromTarget","#setupPrimaryTargetListeners","#attachExistingTargets","queue","childTarget","newSession","#onDialog","#handleException","#onTargetCrashed","#emitMetrics","#onLogEntryAdded","#onFileChooser","worker","#addConsoleMessage","fileChooser","lineNumber","bypass","prototypeHandle","urls","originalCookies","unsupportedCookieAttributes","filterUnsupportedAttributes","cookie","attr","cookies","pageURL","startsWithHTTP","cookieParam","pptrFunction","exposedFunctionId","#buildMetricsObject","metrics","metric","supportedMetrics","exception","eventType","stackTrace","textTokens","callFrame","dialog","#go","delta","history","needsReload","fromSurface","omitBackground","optimizeForSpeed","quality","userClip","captureBeyondViewport","isFirefox","getIntersectionRect","landscape","displayHeaderFooter","headerTemplate","footerTemplate","printBackground","scale","paperWidth","paperHeight","pageRanges","preferCSSPageSize","generateTaggedPDF","generateDocumentOutline","waitForFonts","printCommandPromise","InitializationStatus","CdpTarget","#browserContext","#session","#targetInfo","#sessionFactory","#childTargets","browserContext","targetManager","sessionFactory","openerId","PageTarget","#defaultViewport","opener","openerPage","popupPage","DevToolsTarget","WorkerTarget","#workerPromise","OtherTarget","isPageTargetBecomingPrimary","newTargetInfo","ChromeTargetManager","#attachedTargetsByTargetId","#attachedTargetsBySessionId","#ignoredTargets","#detachedFromTargetListenersBySession","#waitForInitiallyDiscoveredTargets","#discoveryFilter","waitForInitiallyDiscoveredTargets","#onTargetInfoChanged","#setupAttachmentListeners","#storeExistingTargetsForInit","targetForFilter","isPageOrFrame","isExtension","#removeAttachmentListeners","detachedListener","previousURL","wasInitialized","silentDetach","isExistingTarget","CdpBrowser","BrowserBase","product","contextIds","acceptInsecureCerts","closeCallback","isPageTargetCallback","#process","#closeCallback","#isPageTargetCallback","#defaultContext","#contexts","#setIsPageTargetCallback","#createTarget","#emitDisconnected","#onTargetChanged","#onTargetDiscovered","proxyServer","proxyBypassList","browserContextId","createSession","otherTarget","browserTarget","#getVersion","Transport","PuppeteerConnection","puppeteer.Connection","msgObj","PuppeteerConnectionHelper","rootTargetId","puppeteerConnection","browserPromise","puppeteer.Browser","speedDelayMap","isPageTarget","Common.ParsedURL.schemeIs","RecordingPlayer","Common.ObjectWrapper.ObjectWrapper","#stopPromise","#resolveStopPromise","#abortResolveFn","#runner","userFlow","breakpointIndexes","#resolveAndRefreshStopPromise","rootTarget","SDK.TargetManager.TargetManager","primaryPageTarget","childTargetManager","SDK.ChildTargetManager.ChildTargetManager","resourceTreeModel","SDK.ResourceTreeModel.ResourceTreeModel","rootChildTargetManager","mainTargetId","PuppeteerService.PuppeteerConnection.PuppeteerConnectionHelper","pages","player","ExtensionWithBreak","PuppeteerReplay.PuppeteerRunnerExtension","resolver","currentStepIndex","shouldStopAtCurrentStep","shouldWaitForSpeed","PuppeteerReplay.createRunner","SharedObject","Common.Mutex.Mutex","#counter","#create","#destroy","create","destroy","#release","release","isDebugBuild","DEVTOOLS_RECORDER_WORLD_NAME","InjectedScript","#injectedScript","createViewportStep","createEmulateNetworkConditionsStep","areSelectorsEqual","stepA","stepB","PuppeteerReplay.parse","PuppeteerReplay.parseStep","getTargetName","getTargetFrameContext","evaluateInAllFrames","worldName","executionContexts","SDK.RuntimeModel.RuntimeModel","executionContextId","findTargetByExecutionContext","targets","runtimeModel","findFrameIdByExecutionContext","Platform.StringUtilities.formatAsJSLiteral","unrelatedNavigationTypes","createShortcuts","shortcuts","shortcut","shortcutBase","keyCode","modifiers","modifiersMap","UI.KeyboardShortcut.Modifiers","evaluateInAllTargets","RecorderBinding","RecordingSession","#pageAgent","#targetAgent","#resourceTreeModel","#targets","#lastNavigationEntryIdByTarget","#lastNavigationHistoryByTarget","#scriptIdentifiers","#runtimeEventDescriptors","#childTargetEventDescriptors","#userFlow","#stepsPendingNavigationByTargetId","#started","#selectorTypesToRecord","SDK.NetworkManager.MultitargetNetworkManager","#appendCurrentNetworkStep","#appendInitialSteps","#setUpTarget","#dispatchRecordingUpdate","#tearDownTarget","SDK.NetworkManager.NoThrottlingConditions","cssLayoutViewport","#appendStep","#getDocumentTitle","#updateTimeout","#updateListeners","#previousStep","#pressedChangeKeys","j","previousStep","#handleBeforeUnload","sdkTarget","lastStep","frameSelector","lastStepTarget","lastStepFrameSelector","#replaceUnloadWithNavigation","stepPendingNavigation","navigationEvent","#handleStopShortcutBinding","shortcutLength","#receiveBindingCalled","#handleAddStepBinding","#getStopShortcuts","UI.ShortcutRegistry.ShortcutRegistry","press","#allowUntrustedEvents","SDK.Target.Type","a11yModel","SDK.AccessibilityModel.AccessibilityModel","Platform.assertNotNullOrUndefined","#addBindings","#injectApplicationScript","#receiveTargetCreated","#receiveTargetClosed","#receiveTargetInfoChanged","Common.EventTarget.removeEventListeners","#injectCleanUpScript","#removeBindings","SDK.RuntimeModel.Events","Util.DEVTOOLS_RECORDER_WORLD_NAME","Util.InjectedScript","Util.isDebugBuild","scriptId","#handleEvent","eventTarget","#handleTargetClosed","#handleTargetCreated","#handleTargetInfoChanged","#handlePageNavigation","lastHistory","#waitForDOMContentLoadedWithTimeout","contentLoadedPromise","onDomContentLoaded","SDK.ResourceTreeModel.Events","UUIDGenerator","RecordingStorage","#recordingsSetting","idGenerator","recordings","recording","storageName","DEFAULT_MAX_STORAGE_SIZE","ScreenshotStorage","#screenshotSettings","#screenshots","#maxStorageSize","maxStorageSize","#loadFromSettings","recordingName","screenshot","#calculateKey","#syncWithSettings","modifiedScreenshot","currentStorageSize","forceNew","SCREENSHOT_WIDTH","SCREENSHOT_MAX_HEIGHT","captureScreenshot","mainTarget","resizeScreenshot","img","canvas","aspectRatio","bitmap","takeScreenshot","startNewSection","buildSections","currentSection","sections","nextSection","getTooltipForActions","translation","title","ifDefined","RecordingStartedEvent","selectorTypesToRecord","selectorAttribute","RecordingCancelledEvent","CreateRecordingView","#shadow","#defaultRecordingName","#recorderSettings","VisualLogging.section","createRecordingViewStyles","Input.textInputStyles","Input.checkboxStyles","#render","#onKeyDown","nameInput","selectorTypeElements","checkbox","checkboxValue","Models.Schema.SelectorType","#dispatchRecordingCancelled","#onInputFocus","selectorTypeToLabel","LitHtml.render","VisualLogging.close","VisualLogging.textField","VisualLogging.link","checked","VisualLogging.toggle","VisualLogging.action","Models.Tooltip.getTooltipForActions","CreateRecordingEvent","DeleteRecordingEvent","OpenRecordingEvent","PlayRecordingEvent","RecordingListView","#props","recordingListViewStyles","ComponentHelpers.ScheduledRender.scheduleRender","#onCreateClick","#onDeleteClick","#onOpenClick","#onPlayRecordingClick","#stopPropagation","VisualLogging.item","ExtensionManager","#views","pluginManager","Extensions.RecorderPluginManager.RecorderPluginManager","#handlePlugin","#handleView","descriptorId","view","ExtensionIframe","#descriptor","#iframe","#isShowing","#isLoaded","#onIframeLoad","ClosedEvent","ExtensionView","extensionViewStyles","Extensions.ExtensionManager.ExtensionManager","#closeView","replaySpeedToMetricSpeedMap","StartReplayEvent","REPLAY_EXTENSION_PREFIX","ReplaySection","#boundRender","#settings","#replayExtensions","disabled","#handleSelectMenuSelected","Host.userMetrics","#handleSelectButtonClick","extensionIdx","groups","RecordingFinishedEvent","AbortReplayEvent","AddAssertionEvent","RecordingTitleChangedEvent","NetworkConditionsChanged","TimeoutChanged","networkConditionPresets","SDK.NetworkManager.OfflineConditions","SDK.NetworkManager.Slow3GConditions","SDK.NetworkManager.Slow4GConditions","SDK.NetworkManager.Fast4GConditions","converterIdToFlowMetric","converterId","converterIdToStepMetric","RecordingView","#replayState","#isRecording","#recordingTogglingInProgress","#isTitleInvalid","#currentStep","#steps","#currentError","#sections","#lastReplayResult","#breakpointIndexes","#selectedStep","#replaySettingsExpanded","#replayAllowed","#builtInConverters","#extensionConverters","#showCodeView","#converterId","#editorState","#sourceMap","#extensionDescriptor","#onCopyBound","#onCopy","#convertToCode","recordingViewStyles","#dispatchAddAssertionEvent","#dispatchRecordingFinished","#handleAbortReplay","#handleTogglePlaying","#getStepState","currentIndex","#getSectionState","section","currentStep","ownIndex","#renderStep","isLastSection","stepIndex","#onStepClick","#onStepHover","#onCopyStepEvent","stepView","#highlightCodeForStep","selectedStep","#onWrapperClick","#onReplaySettingsKeydown","#onToggleReplaySettings","#onNetworkConditionsChange","preset","#onTimeoutInput","#onTitleBlur","#onTitleInputKeyDown","#onEditTitleButtonClick","selection","#onSelectMenuLabelClick","#copyCurrentSelection","converter","Host.InspectorFrontendHost.InspectorFrontendHostInstance","#renderSettings","environmentFragments","replaySettingsFragments","Platform.NumberUtilities.bytesToString","Models.RecordingPlayer.defaultTimeout","selectedOption","selectedOptionTitle","menuButtonTitle","Platform.StringUtilities.toKebabCase","Models.SchemaUtils.minTimeout","Models.SchemaUtils.maxTimeout","isEditable","replaySettingsButtonClassMap","replaySettingsClassMap","LitHtml.Directives.classMap","#getCurrentConverter","currentConverter","#renderTimelineArea","converterFormatName","#renderSections","VisualLogging.pane","VisualLogging.toolbar","#onCodeFormatChange","#renderTextEditor","#renderScreenshot","#renderReplayOrAbortButton","#handleMeasurePerformanceClickEvent","mediaType","languageSupport","CodeHighlighter.CodeHighlighter.languageFromMIME","CodeMirror.EditorState","TextEditor.Config.baseConfiguration","CodeMirror.EditorView","scroll","editor","cm","VisualLogging.toggleSubpane","#renderHeader","isTitleEditable","VisualLogging.value","LitHtml.Directives.live","#renderFooter","classNames","classMap","SelectButtonClickEvent","SelectMenuSelectedEvent","SelectButton","selectButtonStyles","buttonLabel","variant","#handleClick","ev","#handleSelectMenuSelect","evt","#renderSelectItem","selectedItem","#renderSelectGroup","group","#getTitle","hasGroups","classes","buttonVariant","menuLabel","FEEDBACK_URL","DOC_URL","StartView","startViewStyles","#onClick","BINDING_NAME","SelectorPickedEvent","RequestSelectorAttributeEvent","send","SelectorPicker","#activeMutex","#targetMutexes","#injectCleanupScript","#handleBindingCalledEvent","frames","contextTarget","Models.SDKUtils.findTargetByExecutionContext","Models.SDKUtils.findFrameIdByExecutionContext","Models.SDKUtils.getTargetFrameContext","#scriptIdentifier","Models.SDKUtils.evaluateInAllFrames","deepFreeze","InsertAssignment","ArrayAssignments","immutableDeepAssign","assignments","updatedObject","Directives","live","typeConverters","number","dataTypeByAttribute","defaultValuesByAttribute","attributesByType","Models.Schema.StepType","StepEditedEvent","cleanUndefineds","EditorState","#puppeteer","Util.SharedObject.SharedObject","Models.RecordingPlayer.RecordingPlayer","_state","Models.SchemaUtils.parseStep","RecorderSelectorPickerButton","stepEditorStyles","#picker","Controllers.SelectorPicker.SelectorPicker","StepEditor","#renderedAttributes","#handleKeyDownEvent","#commit","updatedState","#handleSelectorPickedEvent","#handleAddOrRemoveClick","#ensureFocus","SuggestionInput.SuggestionInput.SuggestionInput","#handleInputBlur","dataType","#handleTypeInputBlur","#handleAddRowClickEvent","#renderInlineButton","#renderDeleteButton","#renderTypeRow","editable","VisualLogging.treeItem","#renderRow","attributeValue","#renderFrameRow","#renderSelectorsRow","partIndex","#renderAssertedEvents","#renderAttributesRow","VisualLogging.key","names","defaultAttribute","#renderAddRowButtons","VisualLogging.tree","TimelineSection","#isEndOfGroup","#isStartOfGroup","#isFirstSection","#isLastSection","#isSelected","shadowRoot","timelineSectionStyles","CopyStepEvent","StepChanged","newStep","AddStep","stepOrSection","RemoveStep","AddBreakpointEvent","RemoveBreakpointEvent","COPY_ACTION_PREFIX","getStepTypeTitle","getSelectorPreview","getSectionPreview","renderStepActions","VisualLogging.dropDown","viewFunction","_output","stepClasses","isExpandable","mainTitle","subtitle","VisualLogging.sectionHeader","VisualLogging.expand","StepView","#observer","#viewInput","#stepEdited","#onBreakpointClick","#handleStepAction","#toggleShowDetails","#onToggleShowDetailsKeydown","#onStepContextMenu","#view","prevState","#getActions","stepViewStyles","keyboardEvent","causingStep","actionId","copyStep","buttonElement","Buttons.Button.Button","menu","UI.ContextMenu.ContextMenu","copyActions","otherActions","Menus.Menu.MenuItemSelectedEvent","preferredCopyAction","copyAs","output","EXTENSION_PREFIX","ExtensionConverter","#idx","fileExtension","#mediaTypeToExtension","PuppeteerReplay.parseSourceMap","PuppeteerReplay.stripSourceMap","JSONConverter","#indent","PuppeteerReplay.stringify","PuppeteerReplay.JSONStringifyExtension","PuppeteerReplay.stringifyStep","LighthouseConverter","PuppeteerReplay.LighthouseStringifyExtension","PuppeteerConverter","PuppeteerReplay.PuppeteerStringifyExtension","PuppeteerFirefoxConverter","PuppeteerReplayConverter","PuppeteerReplay.PuppeteerReplayStringifyExtension","ReplayFinishedEvent","RecordingStateChangedEvent","GET_EXTENSIONS_MENU_ITEM","GET_EXTENSIONS_URL","CONVERTER_ID_TO_METRIC","RecorderController","recorderControllerStyles","#storage","Models.RecordingStorage.RecordingStorage","#screenshotStorage","Models.ScreenshotStorage.ScreenshotStorage","#fileSelector","#exportMenuButton","#stepBreakpointIndexes","Models.RecorderSettings.RecorderSettings","#shortcutHelper","Models.RecorderShortcutHelper.RecorderShortcutHelper","#setCurrentPage","textEditorIndent","Converters.JSONConverter.JSONConverter","Converters.PuppeteerReplayConverter.PuppeteerReplayConverter","Converters.PuppeteerConverter.PuppeteerConverter","Converters.PuppeteerFirefoxConverter.PuppeteerFirefoxConverter","Converters.LighthouseConverter.LighthouseConverter","extensionManager","#updateExtensions","#onSetRecording","extensions","Converters.ExtensionConverter.ExtensionConverter","isRecording","#clearError","#importFile","file","outputStream","Common.StringOutputStream.StringOutputStream","Bindings.FileUtils.ChunkedFileReader","Models.SchemaUtils.parse","#setCurrentRecording","keepBreakpoints","updateSession","Models.Section.buildSections","#buildSettings","#updateScreenshotsForSections","navigateStepIdx","settings","SDK.NetworkManager.networkConditionsEqual","#getMainTarget","#getSectionFromStep","#onAbortReplay","#onPlayViaExtension","PublicExtensions.RecorderPluginManager.RecorderPluginManager","#onPlayRecording","currentRecording","#disableDeviceModeIfEnabled","withPerformanceTrace","sectionsWithScreenshot","currentSectionIndex","Models.ScreenshotUtils.takeScreenshot","Events.ReplayFinishedEvent","resolveWithEvents","_events","eventsPromise","performanceTracing","Tracing.PerformanceTracing.PerformanceTracing","#setTouchEmulationAllowed","UI.InspectorView.InspectorView","Timeline.TimelinePanel.TimelinePanel","deviceModeWrapper","Emulation.DeviceModeWrapper.DeviceModeWrapper","SDK.EmulationModel.EmulationModel","touchEmulationAllowed","#handleRecordingChanged","#handleStepAdded","sectionIdx","prevSection","indexToInsertAt","breakpointIndex","#handleRecordingTitleChanged","#handleStepRemoved","#onNetworkConditionsChanged","navigateIdx","emulateNetworkConditionsIdx","Models.SchemaUtils.createEmulateNetworkConditionsStep","#onTimeoutChanged","#onDeleteRecording","Components.RecordingListView.DeleteRecordingEvent","#onCreateNewRecording","#onRecordingStarted","Models.RecordingSession.RecordingSession","previousSectionIndex","screenshotPromise","#onRecordingFinished","Events.RecordingStateChangedEvent","#onRecordingCancelled","#onRecordingSelected","Components.RecordingListView.OpenRecordingEvent","Components.RecordingListView.PlayRecordingEvent","#onExportOptionSelected","byId","#exportContent","builtInMetric","Converters.ExtensionConverter.EXTENSION_PREFIX","suggestedName","writable","#handleAddAssertionEvent","#onImportRecording","UI.UIUtils.createFileSelectorElement","#onPlayRecordingByName","Components.RecordingView.PlayRecordingEvent","#onAddBreakpoint","#onRemoveBreakpoint","#onExtensionViewClosed","Components.CreateRecordingView.RecordingStartedEvent","#getShortcutsInfo","getBindingForAction","Host.Platform.isMac","#renderCurrentPage","#renderStartPage","#renderAllRecordingsPage","#renderRecordingPage","#renderCreateRecordingPage","#getExportMenuButton","#onExportRecording","#onExportMenuClosed","selectValue","LitHtml.Directives.repeat","ComponentHelpers.Directives.nodeRenderedCallback","Components.StartView.FEEDBACK_URL","recorderPanelInstance","RecorderPanel","UI.Panel.Panel","#controller","VisualLogging.panel","UI.Context.Context","ActionDelegate","_context","UI.ViewManager.ViewManager"],"ignoreList":[],"sources":["../../services/tracing/PerformanceTracing.js","../../panels/recorder/components/controlButton.css.js","../../panels/recorder/components/ControlButton.js","../../third_party/puppeteer-replay/package/lib/main.js","../../panels/recorder/models/RecorderSettings.js","../../panels/recorder/models/RecorderShortcutHelper.js","../../third_party/puppeteer/package/lib/esm/third_party/rxjs/rxjs.js","../../third_party/puppeteer/package/lib/esm/third_party/mitt/mitt.js","../../third_party/puppeteer/package/lib/esm/puppeteer/util/disposable.js","../../third_party/puppeteer/package/lib/esm/puppeteer/common/EventEmitter.js","../../third_party/puppeteer/package/lib/esm/puppeteer/environment.js","../../third_party/puppeteer/package/lib/esm/puppeteer/generated/version.js","../../third_party/puppeteer/package/lib/esm/puppeteer/util/assert.js","../../third_party/puppeteer/package/lib/esm/puppeteer/util/encoding.js","../../third_party/puppeteer/package/lib/esm/puppeteer/common/Debug.js","../../third_party/puppeteer/package/lib/esm/puppeteer/common/Errors.js","../../third_party/puppeteer/package/lib/esm/puppeteer/common/PDFOptions.js","../../third_party/puppeteer/package/lib/esm/puppeteer/common/util.js","../../third_party/puppeteer/package/lib/esm/puppeteer/api/Browser.js","../../third_party/puppeteer/package/lib/esm/puppeteer/api/CDPSession.js","../../third_party/puppeteer/package/lib/esm/puppeteer/util/Deferred.js","../../third_party/puppeteer/package/lib/esm/puppeteer/util/Mutex.js","../../third_party/puppeteer/package/lib/esm/puppeteer/api/BrowserContext.js","../../third_party/puppeteer/package/lib/esm/puppeteer/cdp/BrowserContext.js","../../third_party/puppeteer/package/lib/esm/puppeteer/api/Target.js","../../third_party/puppeteer/package/lib/esm/puppeteer/util/ErrorLike.js","../../third_party/puppeteer/package/lib/esm/puppeteer/common/CallbackRegistry.js","../../third_party/puppeteer/package/lib/esm/puppeteer/cdp/CDPSession.js","../../third_party/puppeteer/package/lib/esm/puppeteer/common/TimeoutSettings.js","../../third_party/puppeteer/package/lib/esm/puppeteer/util/decorators.js","../../third_party/puppeteer/package/lib/esm/puppeteer/api/locators/locators.js","../../third_party/puppeteer/package/lib/esm/puppeteer/api/Page.js","../../third_party/puppeteer/package/lib/esm/puppeteer/common/ConsoleMessage.js","../../third_party/puppeteer/package/lib/esm/puppeteer/common/FileChooser.js","../../third_party/puppeteer/package/lib/esm/puppeteer/common/NetworkManagerEvents.js","../../third_party/puppeteer/package/lib/esm/puppeteer/api/JSHandle.js","../../third_party/puppeteer/package/lib/esm/puppeteer/cdp/Binding.js","../../third_party/puppeteer/package/lib/esm/puppeteer/cdp/Connection.js","../../third_party/puppeteer/package/lib/esm/puppeteer/cdp/Coverage.js","../../third_party/puppeteer/package/lib/esm/puppeteer/api/Dialog.js","../../third_party/puppeteer/package/lib/esm/puppeteer/cdp/Dialog.js","../../third_party/puppeteer/package/lib/esm/puppeteer/cdp/EmulationManager.js","../../third_party/puppeteer/package/lib/esm/puppeteer/cdp/FirefoxTargetManager.js","../../third_party/puppeteer/package/lib/esm/puppeteer/api/ElementHandleSymbol.js","../../third_party/puppeteer/package/lib/esm/puppeteer/util/Function.js","../../third_party/puppeteer/package/lib/esm/puppeteer/common/HandleIterator.js","../../third_party/puppeteer/package/lib/esm/puppeteer/common/LazyArg.js","../../third_party/puppeteer/package/lib/esm/puppeteer/common/QueryHandler.js","../../third_party/puppeteer/package/lib/esm/puppeteer/util/AsyncIterableUtil.js","../../third_party/puppeteer/package/lib/esm/puppeteer/cdp/AriaQueryHandler.js","../../third_party/puppeteer/package/lib/esm/puppeteer/common/CSSQueryHandler.js","../../third_party/puppeteer/package/lib/esm/puppeteer/generated/injected.js","../../third_party/puppeteer/package/lib/esm/puppeteer/common/ScriptInjector.js","../../third_party/puppeteer/package/lib/esm/puppeteer/common/CustomQueryHandler.js","../../third_party/puppeteer/package/lib/esm/puppeteer/common/PierceQueryHandler.js","../../third_party/puppeteer/package/lib/esm/puppeteer/common/PQueryHandler.js","../../third_party/puppeteer/package/lib/esm/third_party/parsel-js/parsel-js.js","../../third_party/puppeteer/package/lib/esm/puppeteer/common/PSelectorParser.js","../../third_party/puppeteer/package/lib/esm/puppeteer/common/TextQueryHandler.js","../../third_party/puppeteer/package/lib/esm/puppeteer/common/XPathQueryHandler.js","../../third_party/puppeteer/package/lib/esm/puppeteer/common/GetQueryHandler.js","../../third_party/puppeteer/package/lib/esm/puppeteer/api/Frame.js","../../third_party/puppeteer/package/lib/esm/puppeteer/cdp/CdpPreloadScript.js","../../third_party/puppeteer/package/lib/esm/puppeteer/cdp/DeviceRequestPrompt.js","../../third_party/puppeteer/package/lib/esm/puppeteer/api/ElementHandle.js","../../third_party/puppeteer/package/lib/esm/puppeteer/cdp/utils.js","../../third_party/puppeteer/package/lib/esm/puppeteer/cdp/JSHandle.js","../../third_party/puppeteer/package/lib/esm/puppeteer/cdp/ElementHandle.js","../../third_party/puppeteer/package/lib/esm/puppeteer/cdp/ExecutionContext.js","../../third_party/puppeteer/package/lib/esm/puppeteer/cdp/Accessibility.js","../../third_party/puppeteer/package/lib/esm/puppeteer/cdp/FrameManagerEvents.js","../../third_party/puppeteer/package/lib/esm/puppeteer/common/WaitTask.js","../../third_party/puppeteer/package/lib/esm/puppeteer/api/Realm.js","../../third_party/puppeteer/package/lib/esm/puppeteer/cdp/IsolatedWorld.js","../../third_party/puppeteer/package/lib/esm/puppeteer/cdp/IsolatedWorlds.js","../../third_party/puppeteer/package/lib/esm/puppeteer/cdp/LifecycleWatcher.js","../../third_party/puppeteer/package/lib/esm/puppeteer/cdp/Frame.js","../../third_party/puppeteer/package/lib/esm/puppeteer/cdp/FrameTree.js","../../third_party/puppeteer/package/lib/esm/puppeteer/api/HTTPRequest.js","../../third_party/puppeteer/package/lib/esm/puppeteer/cdp/HTTPRequest.js","../../third_party/puppeteer/package/lib/esm/puppeteer/api/HTTPResponse.js","../../third_party/puppeteer/package/lib/esm/puppeteer/common/SecurityDetails.js","../../third_party/puppeteer/package/lib/esm/puppeteer/cdp/HTTPResponse.js","../../third_party/puppeteer/package/lib/esm/puppeteer/cdp/NetworkEventManager.js","../../third_party/puppeteer/package/lib/esm/puppeteer/cdp/NetworkManager.js","../../third_party/puppeteer/package/lib/esm/puppeteer/cdp/FrameManager.js","../../third_party/puppeteer/package/lib/esm/puppeteer/api/Input.js","../../third_party/puppeteer/package/lib/esm/puppeteer/common/USKeyboardLayout.js","../../third_party/puppeteer/package/lib/esm/puppeteer/cdp/Input.js","../../third_party/puppeteer/package/lib/esm/puppeteer/cdp/Tracing.js","../../third_party/puppeteer/package/lib/esm/puppeteer/api/WebWorker.js","../../third_party/puppeteer/package/lib/esm/puppeteer/cdp/WebWorker.js","../../third_party/puppeteer/package/lib/esm/puppeteer/cdp/Page.js","../../third_party/puppeteer/package/lib/esm/puppeteer/cdp/Target.js","../../third_party/puppeteer/package/lib/esm/puppeteer/cdp/ChromeTargetManager.js","../../third_party/puppeteer/package/lib/esm/puppeteer/cdp/Browser.js","../../services/puppeteer/PuppeteerConnection.js","../../panels/recorder/models/RecordingPlayer.js","../../panels/recorder/util/SharedObject.js","../../panels/recorder/util/util.js","../../panels/recorder/models/SchemaUtils.js","../../panels/recorder/models/SDKUtils.js","../../panels/recorder/models/RecordingSession.js","../../panels/recorder/models/RecordingStorage.js","../../panels/recorder/models/ScreenshotStorage.js","../../panels/recorder/models/ScreenshotUtils.js","../../panels/recorder/models/Section.js","../../panels/recorder/models/Tooltip.js","../../panels/recorder/components/createRecordingView.css.js","../../panels/recorder/components/CreateRecordingView.js","../../panels/recorder/components/recordingListView.css.js","../../panels/recorder/components/RecordingListView.js","../../panels/recorder/extensions/ExtensionManager.js","../../panels/recorder/components/extensionView.css.js","../../panels/recorder/components/ExtensionView.js","../../panels/recorder/components/ReplaySection.js","../../panels/recorder/components/recordingView.css.js","../../panels/recorder/components/RecordingView.js","../../panels/recorder/components/selectButton.css.js","../../panels/recorder/components/SelectButton.js","../../panels/recorder/components/startView.css.js","../../panels/recorder/components/StartView.js","../../panels/recorder/controllers/SelectorPicker.js","../../panels/recorder/components/stepEditor.css.js","../../panels/recorder/components/util.js","../../panels/recorder/components/StepEditor.js","../../panels/recorder/components/timelineSection.css.js","../../panels/recorder/components/TimelineSection.js","../../panels/recorder/components/stepView.css.js","../../panels/recorder/components/StepView.js","../../panels/recorder/converters/ExtensionConverter.js","../../panels/recorder/converters/JSONConverter.js","../../panels/recorder/converters/LighthouseConverter.js","../../panels/recorder/converters/PuppeteerConverter.js","../../panels/recorder/converters/PuppeteerFirefoxConverter.js","../../panels/recorder/converters/PuppeteerReplayConverter.js","../../panels/recorder/recorderController.css.js","../../panels/recorder/RecorderEvents.js","../../panels/recorder/RecorderController.js","../../panels/recorder/RecorderPanel.js"],"sourcesContent":["// Copyright 2023 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\nimport * as Trace from '../../models/trace/trace.js';\nexport class PerformanceTracing {\n    #traceEvents = [];\n    #tracingManager = null;\n    #delegate;\n    constructor(target, delegate) {\n        this.#tracingManager = target.model(Trace.TracingManager.TracingManager);\n        this.#delegate = delegate;\n    }\n    async start() {\n        this.#traceEvents.length = 0;\n        if (!this.#tracingManager) {\n            throw new Error('No tracing manager');\n        }\n        // This panel may be opened with trace data recorded in other tools.\n        // Keep in sync with the categories arrays in:\n        // https://source.chromium.org/chromium/chromium/src/+/main:third_party/devtools-frontend/src/front_end/panels/timeline/TimelineController.ts\n        // https://github.com/GoogleChrome/lighthouse/blob/master/lighthouse-core/gather/gatherers/trace.js\n        const categories = [\n            '-*',\n            'blink.console',\n            'blink.user_timing',\n            'devtools.timeline',\n            'disabled-by-default-devtools.screenshot',\n            'disabled-by-default-devtools.timeline',\n            'disabled-by-default-devtools.timeline.invalidationTracking',\n            'disabled-by-default-devtools.timeline.frame',\n            'disabled-by-default-devtools.timeline.stack',\n            'disabled-by-default-v8.cpu_profiler',\n            'disabled-by-default-v8.cpu_profiler.hires',\n            'latencyInfo',\n            'loading',\n            'disabled-by-default-lighthouse',\n            'v8.execute',\n            'v8',\n        ].join(',');\n        const started = await this.#tracingManager.start(this, categories, '');\n        if (!started) {\n            throw new Error('Unable to start tracing.');\n        }\n    }\n    async stop() {\n        return this.#tracingManager?.stop();\n    }\n    // Start of implementation of SDK.TracingManager.TracingManagerClient\n    getTraceEvents() {\n        return this.#traceEvents;\n    }\n    traceEventsCollected(events) {\n        this.#traceEvents.push(...events);\n    }\n    tracingBufferUsage(usage) {\n        this.#delegate.tracingBufferUsage(usage);\n    }\n    eventsRetrievalProgress(progress) {\n        this.#delegate.eventsRetrievalProgress(progress);\n    }\n    tracingComplete() {\n        this.#delegate.tracingComplete(this.#traceEvents);\n    }\n}\n// Used by an implementation of Common.Revealer to transfer data from the recorder to the performance panel.\nexport class RawTraceEvents {\n    events;\n    constructor(events) {\n        this.events = events;\n    }\n    getEvents() {\n        return this.events;\n    }\n}\n//# sourceMappingURL=PerformanceTracing.js.map","// Copyright 2024 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n// IMPORTANT: this file is auto generated. Please do not edit this file.\n/* istanbul ignore file */\nconst styles = new CSSStyleSheet();\nstyles.replaceSync(\n`/*\n * Copyright 2023 The Chromium Authors. All rights reserved.\n * Use of this source code is governed by a BSD-style license that can be\n * found in the LICENSE file.\n */\n\n* {\n  margin: 0;\n  padding: 0;\n  box-sizing: border-box;\n  font-size: inherit;\n}\n\n.control {\n  background: none;\n  border: none;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n}\n\n.control[disabled] {\n  filter: grayscale(100%);\n  cursor: auto;\n}\n\n.icon {\n  display: flex;\n  width: 40px;\n  height: 40px;\n  border-radius: 50%;\n  background: var(--sys-color-error-bright);\n  margin-bottom: 8px;\n  position: relative;\n  transition: background 200ms;\n  justify-content: center;\n  align-content: center;\n  align-items: center;\n}\n\n.icon::before {\n  --override-white: #fff;\n\n  box-sizing: border-box;\n  content: \"\";\n  display: block;\n  width: 14px;\n  height: 14px;\n  border: 1px solid var(--override-white);\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  background-color: var(--override-white);\n}\n\n.icon.square::before {\n  border-radius: 0;\n}\n\n.icon.circle::before {\n  border-radius: 50%;\n}\n\n.icon:hover {\n  background: color-mix(in sRGB, var(--sys-color-error-bright), var(--sys-color-state-hover-on-prominent) 10%);\n}\n\n.icon:active {\n  background: color-mix(in sRGB, var(--sys-color-error-bright), var(--sys-color-state-ripple-neutral-on-prominent) 16%);\n}\n\n.control[disabled] .icon:hover {\n  background: var(--sys-color-error);\n}\n\n.label {\n  font-size: 12px;\n  line-height: 16px;\n  text-align: center;\n  letter-spacing: 0.02em;\n  color: var(--sys-color-on-surface);\n}\n\n/*# sourceURL=controlButton.css */\n`);\n\nexport default styles;\n","// Copyright 2023 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport * as LitHtml from '../../../ui/lit-html/lit-html.js';\nimport controlButtonStyles from './controlButton.css.js';\nconst { html, Decorators, LitElement } = LitHtml;\nconst { customElement, property } = Decorators;\nlet ControlButton = class ControlButton extends LitElement {\n    static styles = [controlButtonStyles];\n    constructor() {\n        super();\n        this.label = '';\n        this.shape = 'square';\n        this.disabled = false;\n    }\n    #handleClickEvent = (event) => {\n        if (this.disabled) {\n            event.stopPropagation();\n            event.preventDefault();\n        }\n    };\n    render() {\n        return html `\n            <button\n                @click=${this.#handleClickEvent}\n                .disabled=${this.disabled}\n                class=\"control\"\n            >\n                <div class=\"icon ${this.shape}\"></div>\n                <div class=\"label\">${this.label}</div>\n            </button>\n        `;\n    }\n};\n__decorate([\n    property()\n], ControlButton.prototype, \"label\", void 0);\n__decorate([\n    property()\n], ControlButton.prototype, \"shape\", void 0);\n__decorate([\n    property({ type: Boolean })\n], ControlButton.prototype, \"disabled\", void 0);\nControlButton = __decorate([\n    customElement('devtools-control-button')\n], ControlButton);\nexport { ControlButton };\n//# sourceMappingURL=ControlButton.js.map","/**\n    Copyright 2022 Google LLC\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n        https://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n */\nvar SelectorType;\n(function (SelectorType) {\n    SelectorType[\"CSS\"] = \"css\";\n    SelectorType[\"ARIA\"] = \"aria\";\n    SelectorType[\"Text\"] = \"text\";\n    SelectorType[\"XPath\"] = \"xpath\";\n    SelectorType[\"Pierce\"] = \"pierce\";\n})(SelectorType || (SelectorType = {}));\nvar StepType;\n(function (StepType) {\n    StepType[\"Change\"] = \"change\";\n    StepType[\"Click\"] = \"click\";\n    StepType[\"Close\"] = \"close\";\n    StepType[\"CustomStep\"] = \"customStep\";\n    StepType[\"DoubleClick\"] = \"doubleClick\";\n    StepType[\"EmulateNetworkConditions\"] = \"emulateNetworkConditions\";\n    StepType[\"Hover\"] = \"hover\";\n    StepType[\"KeyDown\"] = \"keyDown\";\n    StepType[\"KeyUp\"] = \"keyUp\";\n    StepType[\"Navigate\"] = \"navigate\";\n    StepType[\"Scroll\"] = \"scroll\";\n    StepType[\"SetViewport\"] = \"setViewport\";\n    StepType[\"WaitForElement\"] = \"waitForElement\";\n    StepType[\"WaitForExpression\"] = \"waitForExpression\";\n})(StepType || (StepType = {}));\nvar AssertedEventType;\n(function (AssertedEventType) {\n    AssertedEventType[\"Navigation\"] = \"navigation\";\n})(AssertedEventType || (AssertedEventType = {}));\n\nvar Schema = /*#__PURE__*/Object.freeze({\n    __proto__: null,\n    get AssertedEventType () { return AssertedEventType; },\n    get SelectorType () { return SelectorType; },\n    get StepType () { return StepType; }\n});\n\n/**\n    Copyright 2022 Google LLC\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n        https://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n */\nfunction assertAllStepTypesAreHandled(s) {\n    throw new Error(`Unknown step type: ${s.type}`);\n}\nconst typeableInputTypes = new Set([\n    'textarea',\n    'text',\n    'url',\n    'tel',\n    'search',\n    'password',\n    'number',\n    'email',\n]);\nconst pointerDeviceTypes = new Set([\n    'mouse',\n    'pen',\n    'touch',\n]);\nconst mouseButtonMap = new Map([\n    ['primary', 'left'],\n    ['auxiliary', 'middle'],\n    ['secondary', 'right'],\n    ['back', 'back'],\n    ['forward', 'forward'],\n]);\nfunction hasProperty(data, prop) {\n    // TODO: use Object.hasOwn once types are available https://github.com/microsoft/TypeScript/issues/44253\n    if (!Object.prototype.hasOwnProperty.call(data, prop)) {\n        return false;\n    }\n    const keyedData = data;\n    return keyedData[prop] !== undefined;\n}\nfunction isObject(data) {\n    return typeof data === 'object' && data !== null;\n}\nfunction isString(data) {\n    return typeof data === 'string';\n}\nfunction isNumber(data) {\n    return typeof data === 'number';\n}\nfunction isArray(data) {\n    return Array.isArray(data);\n}\nfunction isBoolean(data) {\n    return typeof data === 'boolean';\n}\nfunction isIntegerArray(data) {\n    return isArray(data) && data.every((item) => Number.isInteger(item));\n}\nfunction isKnownDeviceType(data) {\n    return typeof data === 'string' && pointerDeviceTypes.has(data);\n}\nfunction isKnownMouseButton(data) {\n    return typeof data === 'string' && mouseButtonMap.has(data);\n}\nfunction parseTarget(step) {\n    if (hasProperty(step, 'target') && isString(step.target)) {\n        return step.target;\n    }\n    return undefined;\n}\nfunction parseFrame(step) {\n    if (hasProperty(step, 'frame')) {\n        if (isIntegerArray(step.frame)) {\n            return step.frame;\n        }\n        throw new Error('Step `frame` is not an integer array');\n    }\n    return undefined;\n}\nfunction parseNumber(step, prop) {\n    if (hasProperty(step, prop)) {\n        const maybeNumber = step[prop];\n        if (isNumber(maybeNumber)) {\n            return maybeNumber;\n        }\n    }\n    throw new Error(`Step.${prop} is not a number`);\n}\nfunction parseBoolean(step, prop) {\n    if (hasProperty(step, prop)) {\n        const maybeBoolean = step[prop];\n        if (isBoolean(maybeBoolean)) {\n            return maybeBoolean;\n        }\n    }\n    throw new Error(`Step.${prop} is not a boolean`);\n}\nfunction parseOptionalNumber(step, prop) {\n    if (hasProperty(step, prop)) {\n        return parseNumber(step, prop);\n    }\n    return undefined;\n}\nfunction parseOptionalString(step, prop) {\n    if (hasProperty(step, prop)) {\n        return parseString(step, prop);\n    }\n    return undefined;\n}\nfunction parseOptionalBoolean(step, prop) {\n    if (hasProperty(step, prop)) {\n        return parseBoolean(step, prop);\n    }\n    return undefined;\n}\nfunction parseString(step, prop) {\n    if (hasProperty(step, prop)) {\n        const maybeString = step[prop];\n        if (isString(maybeString)) {\n            return maybeString;\n        }\n    }\n    throw new Error(`Step.${prop} is not a string`);\n}\nfunction parseSelectors(step) {\n    if (!hasProperty(step, 'selectors')) {\n        throw new Error('Step does not have required selectors');\n    }\n    if (!isArray(step.selectors)) {\n        throw new Error('Step selectors are not an array');\n    }\n    if (step.selectors.length === 0) {\n        throw new Error('Step does not have required selectors');\n    }\n    return step.selectors.map((s) => {\n        if (!isString(s) && !isArray(s)) {\n            throw new Error('Selector is not an array or string');\n        }\n        if (isArray(s)) {\n            return s.map((sub) => {\n                if (!isString(sub)) {\n                    throw new Error('Selector element is not a string');\n                }\n                return sub;\n            });\n        }\n        return s;\n    });\n}\nfunction parseOptionalSelectors(step) {\n    if (!hasProperty(step, 'selectors')) {\n        return undefined;\n    }\n    return parseSelectors(step);\n}\nfunction parseAssertedEvent(event) {\n    if (!isObject(event)) {\n        throw new Error('Asserted event is not an object');\n    }\n    if (!hasProperty(event, 'type')) {\n        throw new Error('Asserted event is missing type');\n    }\n    if (event.type === AssertedEventType.Navigation) {\n        return {\n            type: AssertedEventType.Navigation,\n            url: parseOptionalString(event, 'url'),\n            title: parseOptionalString(event, 'title'),\n        };\n    }\n    throw new Error('Unknown assertedEvent type');\n}\nfunction parseAssertedEvents(events) {\n    if (!isArray(events)) {\n        return undefined;\n    }\n    return events.map(parseAssertedEvent);\n}\nfunction parseBaseStep(type, step) {\n    if (hasProperty(step, 'timeout') &&\n        isNumber(step.timeout) &&\n        !validTimeout(step.timeout)) {\n        throw new Error(timeoutErrorMessage);\n    }\n    return {\n        type,\n        assertedEvents: hasProperty(step, 'assertedEvents')\n            ? parseAssertedEvents(step.assertedEvents)\n            : undefined,\n        timeout: hasProperty(step, 'timeout') && isNumber(step.timeout)\n            ? step.timeout\n            : undefined,\n    };\n}\nfunction parseStepWithTarget(type, step) {\n    return {\n        ...parseBaseStep(type, step),\n        target: parseTarget(step),\n    };\n}\nfunction parseStepWithFrame(type, step) {\n    return {\n        ...parseStepWithTarget(type, step),\n        frame: parseFrame(step),\n    };\n}\nfunction parseStepWithSelectors(type, step) {\n    return {\n        ...parseStepWithFrame(type, step),\n        selectors: parseSelectors(step),\n    };\n}\nfunction parseClickAttributes(step) {\n    const attributes = {\n        offsetX: parseNumber(step, 'offsetX'),\n        offsetY: parseNumber(step, 'offsetY'),\n        duration: parseOptionalNumber(step, 'duration'),\n    };\n    const deviceType = parseOptionalString(step, 'deviceType');\n    if (deviceType) {\n        if (!isKnownDeviceType(deviceType)) {\n            throw new Error(`'deviceType' for click steps must be one of the following: ${[\n                ...pointerDeviceTypes,\n            ].join(', ')}`);\n        }\n        attributes.deviceType = deviceType;\n    }\n    const button = parseOptionalString(step, 'button');\n    if (button) {\n        if (!isKnownMouseButton(button)) {\n            throw new Error(`'button' for click steps must be one of the following: ${[\n                ...mouseButtonMap.keys(),\n            ].join(', ')}`);\n        }\n        attributes.button = button;\n    }\n    return attributes;\n}\nfunction parseClickStep(step) {\n    return {\n        ...parseStepWithSelectors(StepType.Click, step),\n        ...parseClickAttributes(step),\n        type: StepType.Click,\n    };\n}\nfunction parseDoubleClickStep(step) {\n    return {\n        ...parseStepWithSelectors(StepType.DoubleClick, step),\n        ...parseClickAttributes(step),\n        type: StepType.DoubleClick,\n    };\n}\nfunction parseHoverStep(step) {\n    return {\n        ...parseStepWithSelectors(StepType.Hover, step),\n        type: StepType.Hover,\n    };\n}\nfunction parseChangeStep(step) {\n    return {\n        ...parseStepWithSelectors(StepType.Change, step),\n        type: StepType.Change,\n        value: parseString(step, 'value'),\n    };\n}\nfunction parseKeyDownStep(step) {\n    return {\n        ...parseStepWithTarget(StepType.KeyDown, step),\n        type: StepType.KeyDown,\n        // TODO: type-check keys.\n        key: parseString(step, 'key'),\n    };\n}\nfunction parseKeyUpStep(step) {\n    return {\n        ...parseStepWithTarget(StepType.KeyUp, step),\n        type: StepType.KeyUp,\n        // TODO: type-check keys.\n        key: parseString(step, 'key'),\n    };\n}\nfunction parseEmulateNetworkConditionsStep(step) {\n    return {\n        ...parseStepWithTarget(StepType.EmulateNetworkConditions, step),\n        type: StepType.EmulateNetworkConditions,\n        download: parseNumber(step, 'download'),\n        upload: parseNumber(step, 'upload'),\n        latency: parseNumber(step, 'latency'),\n    };\n}\nfunction parseCloseStep(step) {\n    return {\n        ...parseStepWithTarget(StepType.Close, step),\n        type: StepType.Close,\n    };\n}\nfunction parseSetViewportStep(step) {\n    return {\n        ...parseStepWithTarget(StepType.SetViewport, step),\n        type: StepType.SetViewport,\n        width: parseNumber(step, 'width'),\n        height: parseNumber(step, 'height'),\n        deviceScaleFactor: parseNumber(step, 'deviceScaleFactor'),\n        isMobile: parseBoolean(step, 'isMobile'),\n        hasTouch: parseBoolean(step, 'hasTouch'),\n        isLandscape: parseBoolean(step, 'isLandscape'),\n    };\n}\nfunction parseScrollStep(step) {\n    return {\n        ...parseStepWithFrame(StepType.Scroll, step),\n        type: StepType.Scroll,\n        x: parseOptionalNumber(step, 'x'),\n        y: parseOptionalNumber(step, 'y'),\n        selectors: parseOptionalSelectors(step),\n    };\n}\nfunction parseNavigateStep(step) {\n    return {\n        ...parseStepWithTarget(StepType.Navigate, step),\n        type: StepType.Navigate,\n        target: parseTarget(step),\n        url: parseString(step, 'url'),\n    };\n}\nfunction parseWaitForElementStep(step) {\n    const operator = parseOptionalString(step, 'operator');\n    if (operator && operator !== '>=' && operator !== '==' && operator !== '<=') {\n        throw new Error(\"WaitForElement step's operator is not one of '>=','==','<='\");\n    }\n    if (hasProperty(step, 'attributes')) {\n        if (!isObject(step.attributes) ||\n            Object.values(step.attributes).some((attribute) => typeof attribute !== 'string')) {\n            throw new Error(\"WaitForElement step's attribute is not a dictionary of strings\");\n        }\n    }\n    if (hasProperty(step, 'properties')) {\n        if (!isObject(step.properties)) {\n            throw new Error(\"WaitForElement step's attribute is not an object\");\n        }\n    }\n    return {\n        ...parseStepWithSelectors(StepType.WaitForElement, step),\n        type: StepType.WaitForElement,\n        operator: operator,\n        count: parseOptionalNumber(step, 'count'),\n        visible: parseOptionalBoolean(step, 'visible'),\n        attributes: hasProperty(step, 'attributes')\n            ? step.attributes\n            : undefined,\n        properties: hasProperty(step, 'properties')\n            ? step.properties\n            : undefined,\n    };\n}\nfunction parseWaitForExpressionStep(step) {\n    if (!hasProperty(step, 'expression')) {\n        throw new Error('waitForExpression step is missing `expression`');\n    }\n    return {\n        ...parseStepWithFrame(StepType.WaitForExpression, step),\n        type: StepType.WaitForExpression,\n        expression: parseString(step, 'expression'),\n    };\n}\nfunction parseCustomStep(step) {\n    if (!hasProperty(step, 'name')) {\n        throw new Error('customStep is missing name');\n    }\n    if (!isString(step.name)) {\n        throw new Error(\"customStep's name is not a string\");\n    }\n    return {\n        ...parseStepWithFrame(StepType.CustomStep, step),\n        type: StepType.CustomStep,\n        name: step.name,\n        parameters: hasProperty(step, 'parameters') ? step.parameters : undefined,\n    };\n}\nfunction parseStep(step, idx) {\n    if (!isObject(step)) {\n        throw new Error(idx ? `Step ${idx} is not an object` : 'Step is not an object');\n    }\n    if (!hasProperty(step, 'type')) {\n        throw new Error(idx ? `Step ${idx} does not have a type` : 'Step does not have a type');\n    }\n    if (!isString(step.type)) {\n        throw new Error(idx\n            ? `Type of the step ${idx} is not a string`\n            : 'Type of the step is not a string');\n    }\n    switch (step.type) {\n        case StepType.Click:\n            return parseClickStep(step);\n        case StepType.DoubleClick:\n            return parseDoubleClickStep(step);\n        case StepType.Hover:\n            return parseHoverStep(step);\n        case StepType.Change:\n            return parseChangeStep(step);\n        case StepType.KeyDown:\n            return parseKeyDownStep(step);\n        case StepType.KeyUp:\n            return parseKeyUpStep(step);\n        case StepType.EmulateNetworkConditions:\n            return parseEmulateNetworkConditionsStep(step);\n        case StepType.Close:\n            return parseCloseStep(step);\n        case StepType.SetViewport:\n            return parseSetViewportStep(step);\n        case StepType.Scroll:\n            return parseScrollStep(step);\n        case StepType.Navigate:\n            return parseNavigateStep(step);\n        case StepType.CustomStep:\n            return parseCustomStep(step);\n        case StepType.WaitForElement:\n            return parseWaitForElementStep(step);\n        case StepType.WaitForExpression:\n            return parseWaitForExpressionStep(step);\n        default:\n            throw new Error(`Step type ${step.type} is not supported`);\n    }\n}\nfunction parseSteps(steps) {\n    const result = [];\n    if (!isArray(steps)) {\n        throw new Error('Recording `steps` is not an array');\n    }\n    for (const [idx, step] of steps.entries()) {\n        result.push(parseStep(step, idx));\n    }\n    return result;\n}\nfunction cleanUndefined(json) {\n    return JSON.parse(JSON.stringify(json));\n}\nconst minTimeout = 1;\nconst maxTimeout = 30000;\nconst timeoutErrorMessage = `Timeout is not between ${minTimeout} and ${maxTimeout} milliseconds`;\nfunction validTimeout(timeout) {\n    return timeout >= minTimeout && timeout <= maxTimeout;\n}\nfunction parse(data) {\n    if (!isObject(data)) {\n        throw new Error('Recording is not an object');\n    }\n    if (!hasProperty(data, 'title')) {\n        throw new Error('Recording is missing `title`');\n    }\n    if (!isString(data.title)) {\n        throw new Error('Recording `title` is not a string');\n    }\n    if (hasProperty(data, 'timeout') && !isNumber(data.timeout)) {\n        throw new Error('Recording `timeout` is not a number');\n    }\n    if (!hasProperty(data, 'steps')) {\n        throw new Error('Recording is missing `steps`');\n    }\n    if (hasProperty(data, 'timeout') &&\n        isNumber(data.timeout) &&\n        !validTimeout(data.timeout)) {\n        throw new Error(timeoutErrorMessage);\n    }\n    return cleanUndefined({\n        title: data.title,\n        timeout: hasProperty(data, 'timeout') && isNumber(data.timeout)\n            ? data.timeout\n            : undefined,\n        selectorAttribute: hasProperty(data, 'selectorAttribute') && isString(data.selectorAttribute)\n            ? data.selectorAttribute\n            : undefined,\n        steps: parseSteps(data.steps),\n    });\n}\n/**\n * Detects what type of a selector the string contains. For example,\n * `aria/Label` is a SelectorType.ARIA.\n *\n * Note that CSS selectors are special and usually don't require a prefix,\n * therefore, SelectorType.CSS is the default type if other types didn't match.\n */\nfunction getSelectorType(selector) {\n    for (const value of Object.values(SelectorType)) {\n        if (selector.startsWith(`${value}/`)) {\n            return value;\n        }\n    }\n    return SelectorType.CSS;\n}\n/**\n * Converts a selector or an array of selector parts into a Puppeteer selector.\n *\n * @see https://pptr.dev/guides/query-selectors#p-elements\n */\nfunction selectorToPElementSelector(selector) {\n    if (!Array.isArray(selector)) {\n        selector = [selector];\n    }\n    function escape(input) {\n        return input.replace(/['\"()]/g, `\\\\$&`);\n    }\n    const result = selector.map((s) => {\n        switch (getSelectorType(s)) {\n            case SelectorType.ARIA:\n                return `::-p-aria(${escape(s.substring(SelectorType.ARIA.length + 1))})`;\n            case SelectorType.CSS:\n                return s;\n            case SelectorType.XPath:\n                return `::-p-xpath(${escape(s.substring(SelectorType.XPath.length + 1))})`;\n            case SelectorType.Pierce:\n                return `:scope >>> ${s.substring(SelectorType.Pierce.length + 1)}`;\n            case SelectorType.Text:\n                return `::-p-text(${escape(s.substring(SelectorType.Text.length + 1))})`;\n        }\n    });\n    return result.join(' >>>> ');\n}\n\n/**\n    Copyright 2022 Google LLC\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n        https://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n */\nclass StringifyExtension {\n    async beforeAllSteps(out, flow) { }\n    async afterAllSteps(out, flow) { }\n    async beforeEachStep(out, step, flow) { }\n    async stringifyStep(out, step, flow) { }\n    async afterEachStep(out, step, flow) { }\n}\n\n/**\n    Copyright 2022 Google LLC\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n        https://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n */\n/**\n * Stringifies a user flow to JSON with source maps.\n *\n * You probably want to strip the source map because not all\n * parsers support comments in JSON.\n */\nclass JSONStringifyExtension extends StringifyExtension {\n    async beforeAllSteps(out, flow) {\n        const copy = {\n            ...flow,\n            steps: undefined,\n        };\n        // Stringify top-level attributes.\n        const text = JSON.stringify(copy, null, out.getIndent());\n        const lines = text.split('\\n');\n        lines.pop();\n        lines[lines.length - 1] += ',';\n        lines.push(out.getIndent() + `\"steps\": [`);\n        out.appendLine(lines.join('\\n')).startBlock().startBlock();\n    }\n    async afterAllSteps(out) {\n        out\n            .endBlock()\n            .endBlock()\n            .appendLine(out.getIndent() + `]`)\n            .appendLine('}');\n    }\n    async stringifyStep(out, step, flow) {\n        const stepText = JSON.stringify(step, null, out.getIndent());\n        if (!flow) {\n            out.appendLine(stepText);\n            return;\n        }\n        const separator = flow.steps.lastIndexOf(step) === flow.steps.length - 1 ? '' : ',';\n        out.appendLine(stepText + separator);\n    }\n}\n\n/**\n    Copyright 2022 Google LLC\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n        https://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n */\nclass InMemoryLineWriter {\n    #indentation;\n    #currentIndentation = 0;\n    #lines = [];\n    constructor(indentation) {\n        this.#indentation = indentation;\n    }\n    appendLine(line) {\n        const lines = line.split('\\n').map((line) => {\n            const indentedLine = line\n                ? this.#indentation.repeat(this.#currentIndentation) + line.trimEnd()\n                : '';\n            return indentedLine;\n        });\n        this.#lines.push(...lines);\n        return this;\n    }\n    startBlock() {\n        this.#currentIndentation++;\n        return this;\n    }\n    endBlock() {\n        this.#currentIndentation--;\n        if (this.#currentIndentation < 0) {\n            throw new Error('Extra endBlock');\n        }\n        return this;\n    }\n    toString() {\n        // Scripts should end with a final blank line.\n        return this.#lines.join('\\n') + '\\n';\n    }\n    getIndent() {\n        return this.#indentation;\n    }\n    getSize() {\n        return this.#lines.length;\n    }\n}\n\n/**\n    Copyright 2022 Google LLC\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n        https://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n */\n/**\n * Copyright (c) 2020 The Chromium Authors. All rights reserved.\n * Use of this source code is governed by a BSD-style license that can be\n * found in the LICENSE file.\n */\nfunction formatJSONAsJS(json, indent) {\n    const buffer = [];\n    format(json, buffer, 1, indent);\n    return buffer.join('');\n}\nfunction format(json, buffer = [], level = 1, indent = '  ') {\n    switch (typeof json) {\n        case 'bigint':\n        case 'symbol':\n        case 'function':\n        case 'undefined':\n            throw new Error('Invalid JSON');\n        case 'number':\n        case 'boolean':\n            buffer.push(String(json));\n            break;\n        case 'string':\n            buffer.push(formatAsJSLiteral(json));\n            break;\n        case 'object': {\n            if (json === null) {\n                buffer.push('null');\n            }\n            else if (Array.isArray(json)) {\n                buffer.push('[\\n');\n                for (let i = 0; i < json.length; i++) {\n                    buffer.push(indent.repeat(level));\n                    format(json[i], buffer, level + 1, indent);\n                    if (i !== json.length - 1) {\n                        buffer.push(',');\n                    }\n                    buffer.push('\\n');\n                }\n                buffer.push(indent.repeat(level - 1) + ']');\n            }\n            else {\n                buffer.push('{\\n');\n                const keys = Object.keys(json);\n                for (let i = 0; i < keys.length; i++) {\n                    const key = keys[i];\n                    const value = json[key];\n                    if (value === undefined) {\n                        continue;\n                    }\n                    buffer.push(indent.repeat(level));\n                    buffer.push(key);\n                    buffer.push(': ');\n                    format(value, buffer, level + 1, indent);\n                    if (i !== keys.length - 1) {\n                        buffer.push(',');\n                    }\n                    buffer.push('\\n');\n                }\n                buffer.push(indent.repeat(level - 1) + '}');\n            }\n            break;\n        }\n        default:\n            throw new Error('Unknown object type');\n    }\n    return buffer;\n}\n// Taken from https://source.chromium.org/chromium/chromium/src/+/main:third_party/devtools-frontend/src/front_end/core/platform/string-utilities.ts;l=29;drc=111134437ee51d74433829bed0088f7239e18867.\nconst toHexadecimal = (charCode, padToLength) => {\n    return charCode.toString(16).toUpperCase().padStart(padToLength, '0');\n};\n// Remember to update the third group in the regexps patternsToEscape and\n// patternsToEscapePlusSingleQuote when adding new entries in this map.\nconst escapedReplacements = new Map([\n    ['\\b', '\\\\b'],\n    ['\\f', '\\\\f'],\n    ['\\n', '\\\\n'],\n    ['\\r', '\\\\r'],\n    ['\\t', '\\\\t'],\n    ['\\v', '\\\\v'],\n    [\"'\", \"\\\\'\"],\n    ['\\\\', '\\\\\\\\'],\n    ['<!--', '\\\\x3C!--'],\n    ['<script', '\\\\x3Cscript'],\n    ['</script', '\\\\x3C/script'],\n]);\nconst formatAsJSLiteral = (content) => {\n    const patternsToEscape = /(\\\\|<(?:!--|\\/?script))|(\\p{Control})|(\\p{Surrogate})/gu;\n    const patternsToEscapePlusSingleQuote = /(\\\\|'|<(?:!--|\\/?script))|(\\p{Control})|(\\p{Surrogate})/gu;\n    const escapePattern = (match, pattern, controlChar, loneSurrogate) => {\n        if (controlChar) {\n            if (escapedReplacements.has(controlChar)) {\n                // @ts-ignore https://github.com/microsoft/TypeScript/issues/13086\n                return escapedReplacements.get(controlChar);\n            }\n            const twoDigitHex = toHexadecimal(controlChar.charCodeAt(0), 2);\n            return '\\\\x' + twoDigitHex;\n        }\n        if (loneSurrogate) {\n            const fourDigitHex = toHexadecimal(loneSurrogate.charCodeAt(0), 4);\n            return '\\\\u' + fourDigitHex;\n        }\n        if (pattern) {\n            return escapedReplacements.get(pattern) || '';\n        }\n        return match;\n    };\n    let escapedContent = '';\n    let quote = '';\n    if (!content.includes(\"'\")) {\n        quote = \"'\";\n        escapedContent = content.replace(patternsToEscape, escapePattern);\n    }\n    else if (!content.includes('\"')) {\n        quote = '\"';\n        escapedContent = content.replace(patternsToEscape, escapePattern);\n    }\n    else if (!content.includes('`') && !content.includes('${')) {\n        quote = '`';\n        escapedContent = content.replace(patternsToEscape, escapePattern);\n    }\n    else {\n        quote = \"'\";\n        escapedContent = content.replace(patternsToEscapePlusSingleQuote, escapePattern);\n    }\n    return `${quote}${escapedContent}${quote}`;\n};\n\n/**\n    Copyright 2022 Google LLC\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n        https://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n */\nclass PuppeteerStringifyExtension extends StringifyExtension {\n    #shouldAppendWaitForElementHelper = false;\n    #targetBrowser;\n    constructor(targetBrowser = 'chrome') {\n        super();\n        this.#targetBrowser = targetBrowser;\n    }\n    async beforeAllSteps(out, flow) {\n        out.appendLine(\"const puppeteer = require('puppeteer'); // v23.0.0 or later\");\n        out.appendLine('');\n        out.appendLine('(async () => {').startBlock();\n        if (this.#targetBrowser === 'firefox') {\n            out.appendLine(`const browser = await puppeteer.launch({browser: 'firefox'});`);\n        }\n        else {\n            out.appendLine('const browser = await puppeteer.launch();');\n        }\n        out.appendLine('const page = await browser.newPage();');\n        out.appendLine(`const timeout = ${flow.timeout || defaultTimeout};`);\n        out.appendLine('page.setDefaultTimeout(timeout);');\n        out.appendLine('');\n        this.#shouldAppendWaitForElementHelper = false;\n    }\n    async afterAllSteps(out, flow) {\n        out.appendLine('');\n        out.appendLine('await browser.close();');\n        out.appendLine('');\n        if (this.#shouldAppendWaitForElementHelper) {\n            for (const line of waitForElementHelper.split('\\n')) {\n                out.appendLine(line);\n            }\n        }\n        out.endBlock().appendLine('})().catch(err => {').startBlock();\n        out.appendLine('console.error(err);');\n        out.appendLine('process.exit(1);');\n        out.endBlock().appendLine('});');\n    }\n    async stringifyStep(out, step, flow) {\n        out.appendLine('{').startBlock();\n        if (step.timeout !== undefined) {\n            out.appendLine(`const timeout = ${step.timeout};`);\n        }\n        this.#appendContext(out, step);\n        const waitForEvents = step.assertedEvents && step.type !== StepType.Navigate;\n        if (waitForEvents) {\n            out.appendLine('const promises = [];');\n            out.appendLine('const startWaitingForEvents = () => {').startBlock();\n            for (const event of step.assertedEvents) {\n                switch (event.type) {\n                    case AssertedEventType.Navigation: {\n                        out.appendLine(`promises.push(${'frame' in step && step.frame ? 'frame' : 'targetPage'}.waitForNavigation());`);\n                        break;\n                    }\n                    default:\n                        throw new Error(`Event type ${event.type} is not supported`);\n                }\n            }\n            out.endBlock().appendLine('}');\n        }\n        this.#appendStepType(out, step);\n        if (waitForEvents) {\n            out.appendLine('await Promise.all(promises);');\n        }\n        out.endBlock().appendLine('}');\n    }\n    #appendTarget(out, target) {\n        if (target === 'main') {\n            out.appendLine('const targetPage = page;');\n        }\n        else {\n            out.appendLine(`const target = await browser.waitForTarget(t => t.url() === ${formatJSONAsJS(target, out.getIndent())}, { timeout });`);\n            out.appendLine('const targetPage = await target.page();');\n            out.appendLine('targetPage.setDefaultTimeout(timeout);');\n        }\n    }\n    #appendFrame(out, path) {\n        out.appendLine('let frame = targetPage.mainFrame();');\n        for (const index of path) {\n            out.appendLine(`frame = frame.childFrames()[${index}];`);\n        }\n    }\n    #appendContext(out, step) {\n        // TODO fix optional target: should it be main?\n        this.#appendTarget(out, step.target || 'main');\n        // TODO fix optional frame: should it be required?\n        if (step.frame) {\n            this.#appendFrame(out, step.frame);\n        }\n    }\n    #appendLocators(out, step, action) {\n        out.appendLine('await puppeteer.Locator.race([').startBlock();\n        out.appendLine(step.selectors\n            .map((s) => {\n            return `${step.frame ? 'frame' : 'targetPage'}.locator(${formatJSONAsJS(selectorToPElementSelector(s), out.getIndent())})`;\n        })\n            .join(',\\n'));\n        out.endBlock().appendLine('])');\n        out.startBlock().appendLine('.setTimeout(timeout)');\n        if (step.assertedEvents?.length) {\n            out.appendLine(`.on('action', () => startWaitingForEvents())`);\n        }\n        action();\n        out.endBlock();\n    }\n    #appendClickStep(out, step) {\n        this.#appendLocators(out, step, () => {\n            out.appendLine('.click({');\n            if (step.duration) {\n                out.appendLine(`  delay: ${step.duration},`);\n            }\n            if (step.button) {\n                out.appendLine(`  button: '${mouseButtonMap.get(step.button)}',`);\n            }\n            out.appendLine('  offset: {');\n            out.appendLine(`    x: ${step.offsetX},`);\n            out.appendLine(`    y: ${step.offsetY},`);\n            out.appendLine('  },');\n            out.appendLine('});');\n        });\n    }\n    #appendDoubleClickStep(out, step) {\n        this.#appendLocators(out, step, () => {\n            out.appendLine('.click({');\n            out.appendLine(`  count: 2,`);\n            if (step.duration) {\n                out.appendLine(`  delay: ${step.duration},`);\n            }\n            if (step.button) {\n                out.appendLine(`  button: '${mouseButtonMap.get(step.button)}',`);\n            }\n            out.appendLine('  offset: {');\n            out.appendLine(`    x: ${step.offsetX},`);\n            out.appendLine(`    y: ${step.offsetY},`);\n            out.appendLine('  },');\n            out.appendLine('});');\n        });\n    }\n    #appendHoverStep(out, step) {\n        this.#appendLocators(out, step, () => {\n            out.appendLine('.hover();');\n        });\n    }\n    #appendChangeStep(out, step) {\n        this.#appendLocators(out, step, () => {\n            out.appendLine(`.fill(${formatJSONAsJS(step.value, out.getIndent())});`);\n        });\n    }\n    #appendEmulateNetworkConditionsStep(out, step) {\n        out.appendLine('await targetPage.emulateNetworkConditions({');\n        out.appendLine(`  offline: ${!step.download && !step.upload},`);\n        out.appendLine(`  downloadThroughput: ${step.download},`);\n        out.appendLine(`  uploadThroughput: ${step.upload},`);\n        out.appendLine(`  latency: ${step.latency},`);\n        out.appendLine('});');\n    }\n    #appendKeyDownStep(out, step) {\n        out.appendLine(`await targetPage.keyboard.down(${formatJSONAsJS(step.key, out.getIndent())});`);\n    }\n    #appendKeyUpStep(out, step) {\n        out.appendLine(`await targetPage.keyboard.up(${formatJSONAsJS(step.key, out.getIndent())});`);\n    }\n    #appendCloseStep(out, step) {\n        out.appendLine('await targetPage.close()');\n    }\n    #appendViewportStep(out, step) {\n        out.appendLine(`await targetPage.setViewport(${formatJSONAsJS({\n            width: step.width,\n            height: step.height,\n        }, out.getIndent())})`);\n    }\n    #appendScrollStep(out, step) {\n        if ('selectors' in step) {\n            this.#appendLocators(out, step, () => {\n                out.appendLine(`.scroll({ scrollTop: ${step.y}, scrollLeft: ${step.x}});`);\n            });\n        }\n        else {\n            out.appendLine(`await targetPage.evaluate((x, y) => { window.scroll(x, y); }, ${step.x}, ${step.y})`);\n        }\n    }\n    #appendStepType(out, step) {\n        switch (step.type) {\n            case StepType.Click:\n                return this.#appendClickStep(out, step);\n            case StepType.DoubleClick:\n                return this.#appendDoubleClickStep(out, step);\n            case StepType.Hover:\n                return this.#appendHoverStep(out, step);\n            case StepType.Change:\n                return this.#appendChangeStep(out, step);\n            case StepType.EmulateNetworkConditions:\n                return this.#appendEmulateNetworkConditionsStep(out, step);\n            case StepType.KeyDown:\n                return this.#appendKeyDownStep(out, step);\n            case StepType.KeyUp:\n                return this.#appendKeyUpStep(out, step);\n            case StepType.Close:\n                return this.#appendCloseStep(out, step);\n            case StepType.SetViewport:\n                return this.#appendViewportStep(out, step);\n            case StepType.Scroll:\n                return this.#appendScrollStep(out, step);\n            case StepType.Navigate:\n                return this.#appendNavigationStep(out, step);\n            case StepType.WaitForElement:\n                return this.#appendWaitForElementStep(out, step);\n            case StepType.WaitForExpression:\n                return this.#appendWaitExpressionStep(out, step);\n            case StepType.CustomStep:\n                return; // TODO: implement these\n            default:\n                return assertAllStepTypesAreHandled(step);\n        }\n    }\n    #appendNavigationStep(out, step) {\n        out.appendLine(`await targetPage.goto(${formatJSONAsJS(step.url, out.getIndent())});`);\n    }\n    #appendWaitExpressionStep(out, step) {\n        out.appendLine(`await ${step.frame ? 'frame' : 'targetPage'}.waitForFunction(${formatJSONAsJS(step.expression, out.getIndent())}, { timeout });`);\n    }\n    #appendWaitForElementStep(out, step) {\n        this.#shouldAppendWaitForElementHelper = true;\n        out.appendLine(`await waitForElement(${formatJSONAsJS(step, out.getIndent())}, ${step.frame ? 'frame' : 'targetPage'}, timeout);`);\n    }\n}\nconst defaultTimeout = 5000;\nconst waitForElementHelper = `async function waitForElement(step, frame, timeout) {\n  const {\n    count = 1,\n    operator = '>=',\n    visible = true,\n    properties,\n    attributes,\n  } = step;\n  const compFn = {\n    '==': (a, b) => a === b,\n    '>=': (a, b) => a >= b,\n    '<=': (a, b) => a <= b,\n  }[operator];\n  await waitForFunction(async () => {\n    const elements = await querySelectorsAll(step.selectors, frame);\n    let result = compFn(elements.length, count);\n    const elementsHandle = await frame.evaluateHandle((...elements) => {\n      return elements;\n    }, ...elements);\n    await Promise.all(elements.map((element) => element.dispose()));\n    if (result && (properties || attributes)) {\n      result = await elementsHandle.evaluate(\n        (elements, properties, attributes) => {\n          for (const element of elements) {\n            if (attributes) {\n              for (const [name, value] of Object.entries(attributes)) {\n                if (element.getAttribute(name) !== value) {\n                  return false;\n                }\n              }\n            }\n            if (properties) {\n              if (!isDeepMatch(properties, element)) {\n                return false;\n              }\n            }\n          }\n          return true;\n\n          function isDeepMatch(a, b) {\n            if (a === b) {\n              return true;\n            }\n            if ((a && !b) || (!a && b)) {\n              return false;\n            }\n            if (!(a instanceof Object) || !(b instanceof Object)) {\n              return false;\n            }\n            for (const [key, value] of Object.entries(a)) {\n              if (!isDeepMatch(value, b[key])) {\n                return false;\n              }\n            }\n            return true;\n          }\n        },\n        properties,\n        attributes\n      );\n    }\n    await elementsHandle.dispose();\n    return result === visible;\n  }, timeout);\n}\n\nasync function querySelectorsAll(selectors, frame) {\n  for (const selector of selectors) {\n    const result = await querySelectorAll(selector, frame);\n    if (result.length) {\n      return result;\n    }\n  }\n  return [];\n}\n\nasync function querySelectorAll(selector, frame) {\n  if (!Array.isArray(selector)) {\n    selector = [selector];\n  }\n  if (!selector.length) {\n    throw new Error('Empty selector provided to querySelectorAll');\n  }\n  let elements = [];\n  for (let i = 0; i < selector.length; i++) {\n    const part = selector[i];\n    if (i === 0) {\n      elements = await frame.$$(part);\n    } else {\n      const tmpElements = elements;\n      elements = [];\n      for (const el of tmpElements) {\n        elements.push(...(await el.$$(part)));\n      }\n    }\n    if (elements.length === 0) {\n      return [];\n    }\n    if (i < selector.length - 1) {\n      const tmpElements = [];\n      for (const el of elements) {\n        const newEl = (await el.evaluateHandle(el => el.shadowRoot ? el.shadowRoot : el)).asElement();\n        if (newEl) {\n          tmpElements.push(newEl);\n        }\n      }\n      elements = tmpElements;\n    }\n  }\n  return elements;\n}\n\nasync function waitForFunction(fn, timeout) {\n  let isActive = true;\n  const timeoutId = setTimeout(() => {\n    isActive = false;\n  }, timeout);\n  while (isActive) {\n    const result = await fn();\n    if (result) {\n      clearTimeout(timeoutId);\n      return;\n    }\n    await new Promise(resolve => setTimeout(resolve, 100));\n  }\n  throw new Error('Timed out');\n}`;\n\n/**\n    Copyright 2022 Google LLC\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n        https://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n */\nconst alpha = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';\nconst charToIdx = alpha.split('').reduce((acc, char, idx) => {\n    acc.set(char, idx);\n    return acc;\n}, new Map());\nconst LEAST_5_BIT_MASK = 0b011111;\nconst CONTINUATION_BIT_MASK = 0b100000;\nconst MAX_INT = 2147483647;\n/**\n * Encoding variable length integer into base64 (6-bit):\n *\n * 1 N N N N N | 0 N N N N N\n *\n * The first bit indicates if there is more data for the int.\n */\nfunction encodeInt(num) {\n    if (num < 0) {\n        throw new Error('Only postive integers and zero are supported');\n    }\n    if (num > MAX_INT) {\n        throw new Error('Only integers between 0 and ' + MAX_INT + ' are supported');\n    }\n    const result = [];\n    do {\n        let payload = num & LEAST_5_BIT_MASK;\n        num >>>= 5;\n        if (num > 0)\n            payload |= CONTINUATION_BIT_MASK;\n        result.push(alpha[payload]);\n    } while (num !== 0);\n    return result.join('');\n}\nfunction encode(nums) {\n    const parts = [];\n    for (const num of nums) {\n        parts.push(encodeInt(num));\n    }\n    return parts.join('');\n}\nfunction decode(str) {\n    const results = [];\n    const chrs = str.split('');\n    let result = 0;\n    let shift = 0;\n    for (const ch of chrs) {\n        const num = charToIdx.get(ch);\n        result |= (num & LEAST_5_BIT_MASK) << shift;\n        shift += 5;\n        const hasMore = num & CONTINUATION_BIT_MASK;\n        if (!hasMore) {\n            results.push(result);\n            result = 0;\n            shift = 0;\n        }\n    }\n    return results;\n}\n\n/**\n    Copyright 2022 Google LLC\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n        https://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n */\nconst SOURCE_MAP_PREFIX = '//# recorderSourceMap=';\n/**\n * Stringifes an entire recording. The following hooks are invoked with the `flow` parameter containing the entire flow:\n * - `beforeAllSteps` (once)\n * - `beforeEachStep` (per step)\n * - `stringifyStep` (per step)\n * - `afterEachStep` (per step)\n * - `afterAllSteps` (once)\n */\nasync function stringify(flow, opts) {\n    if (!opts) {\n        opts = {};\n    }\n    const ext = opts.extension ?? new PuppeteerStringifyExtension();\n    const out = opts.writer ?? new InMemoryLineWriter(opts.indentation ?? '  ');\n    await ext.beforeAllSteps?.(out, flow);\n    const sourceMap = [1]; // The first int indicates the version.\n    for (const step of flow.steps) {\n        const firstLine = out.getSize();\n        await ext.beforeEachStep?.(out, step, flow);\n        await ext.stringifyStep(out, step, flow);\n        await ext.afterEachStep?.(out, step, flow);\n        const lastLine = out.getSize();\n        sourceMap.push(...[firstLine, lastLine - firstLine]);\n    }\n    await ext.afterAllSteps?.(out, flow);\n    out.appendLine(SOURCE_MAP_PREFIX + encode(sourceMap));\n    return out.toString();\n}\n/**\n * Stringifes a single step. Only the following hooks are invoked with the `flow` parameter as undefined:\n * - `beforeEachStep`\n * - `stringifyStep`\n * - `afterEachStep`\n */\nasync function stringifyStep(step, opts) {\n    if (!opts) {\n        opts = {};\n    }\n    let ext = opts.extension;\n    if (!ext) {\n        ext = new PuppeteerStringifyExtension();\n    }\n    if (!opts.indentation) {\n        opts.indentation = '  ';\n    }\n    const out = opts.writer ?? new InMemoryLineWriter(opts.indentation ?? '  ');\n    await ext.beforeEachStep?.(out, step);\n    await ext.stringifyStep(out, step);\n    await ext.afterEachStep?.(out, step);\n    return out.toString();\n}\nfunction isSourceMapLine(line) {\n    return line.trim().startsWith(SOURCE_MAP_PREFIX);\n}\n/**\n * Extracts a source map from a text.\n */\nfunction parseSourceMap(text) {\n    const lines = text.split('\\n');\n    for (let i = lines.length - 1; i >= 0; i--) {\n        const line = lines[i];\n        if (isSourceMapLine(line)) {\n            return decode(line.trim().substring(SOURCE_MAP_PREFIX.length));\n        }\n    }\n    return;\n}\nfunction stripSourceMap(text) {\n    const lines = text.split('\\n');\n    return lines.filter((line) => !isSourceMapLine(line)).join('\\n');\n}\n\n/**\n    Copyright 2022 Google LLC\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n        https://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n */\nclass RunnerExtension {\n    async beforeAllSteps(flow) { }\n    async afterAllSteps(flow) { }\n    async beforeEachStep(step, flow) { }\n    async runStep(step, flow) { }\n    async afterEachStep(step, flow) { }\n}\n\nconst comparators = {\n    '==': (a, b) => a === b,\n    '>=': (a, b) => a >= b,\n    '<=': (a, b) => a <= b,\n};\nfunction waitForTimeout(timeout) {\n    return new Promise((resolve) => {\n        setTimeout(resolve, timeout);\n    });\n}\nclass PuppeteerRunnerExtension extends RunnerExtension {\n    browser;\n    page;\n    timeout;\n    constructor(browser, page, opts) {\n        super();\n        this.browser = browser;\n        this.page = page;\n        this.timeout = opts?.timeout || 5000;\n    }\n    async #ensureAutomationEmulatation(pageOrFrame) {\n        try {\n            await pageOrFrame\n                ._client()\n                .send('Emulation.setAutomationOverride', { enabled: true });\n        }\n        catch {\n            // ignore errors as not all versions support this command.\n        }\n    }\n    #getTimeoutForStep(step, flow) {\n        return step.timeout || flow?.timeout || this.timeout;\n    }\n    async runStep(step, flow) {\n        const timeout = this.#getTimeoutForStep(step, flow);\n        const page = this.page;\n        const browser = this.browser;\n        const targetPage = await getTargetPageForStep(browser, page, step, timeout);\n        let targetFrame = null;\n        if (!targetPage && step.target) {\n            targetFrame = await page.waitForFrame(step.target, { timeout });\n        }\n        const targetPageOrFrame = targetFrame || targetPage;\n        if (!targetPageOrFrame) {\n            throw new Error('Target is not found for step: ' + JSON.stringify(step));\n        }\n        await this.#ensureAutomationEmulatation(targetPageOrFrame);\n        const localFrame = await getFrame(targetPageOrFrame, step);\n        await this.runStepInFrame(step, page, targetPageOrFrame, localFrame, timeout);\n    }\n    /**\n     * @internal\n     */\n    async runStepInFrame(step, mainPage, targetPageOrFrame, localFrame, timeout) {\n        let assertedEventsPromise = null;\n        const startWaitingForEvents = () => {\n            assertedEventsPromise = waitForEvents(localFrame, step, timeout);\n        };\n        const locatorRace = this.page.locatorRace;\n        switch (step.type) {\n            case StepType.DoubleClick:\n                await locatorRace(step.selectors.map((selector) => {\n                    return localFrame.locator(selectorToPElementSelector(selector));\n                }))\n                    .setTimeout(timeout)\n                    .on('action', () => startWaitingForEvents())\n                    .click({\n                    count: 2,\n                    button: step.button && mouseButtonMap.get(step.button),\n                    delay: step.duration,\n                    offset: {\n                        x: step.offsetX,\n                        y: step.offsetY,\n                    },\n                });\n                break;\n            case StepType.Click:\n                await locatorRace(step.selectors.map((selector) => {\n                    return localFrame.locator(selectorToPElementSelector(selector));\n                }))\n                    .setTimeout(timeout)\n                    .on('action', () => startWaitingForEvents())\n                    .click({\n                    delay: step.duration,\n                    button: step.button && mouseButtonMap.get(step.button),\n                    offset: {\n                        x: step.offsetX,\n                        y: step.offsetY,\n                    },\n                });\n                break;\n            case StepType.Hover:\n                await locatorRace(step.selectors.map((selector) => {\n                    return localFrame.locator(selectorToPElementSelector(selector));\n                }))\n                    .setTimeout(timeout)\n                    .on('action', () => startWaitingForEvents())\n                    .hover();\n                break;\n            case StepType.EmulateNetworkConditions:\n                {\n                    startWaitingForEvents();\n                    await mainPage.emulateNetworkConditions(step);\n                }\n                break;\n            case StepType.KeyDown:\n                {\n                    startWaitingForEvents();\n                    await mainPage.keyboard.down(step.key);\n                    await waitForTimeout(100);\n                }\n                break;\n            case StepType.KeyUp:\n                {\n                    startWaitingForEvents();\n                    await mainPage.keyboard.up(step.key);\n                    await waitForTimeout(100);\n                }\n                break;\n            case StepType.Close:\n                {\n                    if ('close' in targetPageOrFrame) {\n                        startWaitingForEvents();\n                        await targetPageOrFrame.close();\n                    }\n                }\n                break;\n            case StepType.Change:\n                await locatorRace(step.selectors.map((selector) => {\n                    return localFrame.locator(selectorToPElementSelector(selector));\n                }))\n                    .on('action', () => startWaitingForEvents())\n                    .setTimeout(timeout)\n                    .fill(step.value);\n                break;\n            case StepType.SetViewport: {\n                if ('setViewport' in targetPageOrFrame) {\n                    startWaitingForEvents();\n                    await targetPageOrFrame.setViewport(step);\n                }\n                break;\n            }\n            case StepType.Scroll: {\n                if ('selectors' in step) {\n                    await locatorRace(step.selectors.map((selector) => {\n                        return localFrame.locator(selectorToPElementSelector(selector));\n                    }))\n                        .on('action', () => startWaitingForEvents())\n                        .setTimeout(timeout)\n                        .scroll({\n                        scrollLeft: step.x || 0,\n                        scrollTop: step.y || 0,\n                    });\n                }\n                else {\n                    startWaitingForEvents();\n                    await localFrame.evaluate((x, y) => {\n                        /* c8 ignore start */\n                        window.scroll(x, y);\n                        /* c8 ignore stop */\n                    }, step.x || 0, step.y || 0);\n                }\n                break;\n            }\n            case StepType.Navigate: {\n                startWaitingForEvents();\n                await localFrame.goto(step.url);\n                break;\n            }\n            case StepType.WaitForElement: {\n                try {\n                    startWaitingForEvents();\n                    await waitForElement(step, localFrame, timeout);\n                }\n                catch (err) {\n                    if (err.message === 'Timed out') {\n                        throw new Error('waitForElement timed out. The element(s) could not be found.');\n                    }\n                    else {\n                        throw err;\n                    }\n                }\n                break;\n            }\n            case StepType.WaitForExpression: {\n                startWaitingForEvents();\n                await localFrame.waitForFunction(step.expression, {\n                    timeout,\n                });\n                break;\n            }\n            case StepType.CustomStep: {\n                // TODO implement these steps\n                break;\n            }\n            default:\n                assertAllStepTypesAreHandled(step);\n        }\n        await assertedEventsPromise;\n    }\n}\nclass PuppeteerRunnerOwningBrowserExtension extends PuppeteerRunnerExtension {\n    async afterAllSteps() {\n        await this.browser.close();\n    }\n}\nasync function getFrame(pageOrFrame, step) {\n    let frame = 'mainFrame' in pageOrFrame ? pageOrFrame.mainFrame() : pageOrFrame;\n    if ('frame' in step && step.frame) {\n        for (const index of step.frame) {\n            frame = frame.childFrames()[index];\n        }\n    }\n    return frame;\n}\nasync function getTargetPageForStep(browser, page, step, timeout) {\n    if (!step.target || step.target === 'main') {\n        return page;\n    }\n    const target = await browser.waitForTarget((t) => t.url() === step.target, {\n        timeout,\n    });\n    const targetPage = await target.page();\n    if (!targetPage) {\n        return null;\n    }\n    targetPage.setDefaultTimeout(timeout);\n    return targetPage;\n}\nasync function waitForEvents(pageOrFrame, step, timeout) {\n    const promises = [];\n    if (step.assertedEvents) {\n        for (const event of step.assertedEvents) {\n            switch (event.type) {\n                case AssertedEventType.Navigation: {\n                    promises.push(pageOrFrame.waitForNavigation({\n                        timeout,\n                    }));\n                    continue;\n                }\n                default:\n                    throw new Error(`Event type ${event.type} is not supported`);\n            }\n        }\n    }\n    await Promise.all(promises);\n}\nasync function waitForElement(step, frame, timeout) {\n    const { count = 1, operator = '>=', visible = true, properties, attributes, } = step;\n    const compFn = comparators[operator];\n    await waitForFunction(async () => {\n        const elements = await querySelectorsAll(step.selectors, frame);\n        let result = compFn(elements.length, count);\n        const elementsHandle = await frame.evaluateHandle((...elements) => {\n            return elements;\n        }, ...elements);\n        await Promise.all(elements.map((element) => element.dispose()));\n        if (result && (properties || attributes)) {\n            result = await elementsHandle.evaluate((elements, properties, attributes) => {\n                if (attributes) {\n                    for (const element of elements) {\n                        for (const [name, value] of Object.entries(attributes)) {\n                            if (element.getAttribute(name) !== value) {\n                                return false;\n                            }\n                        }\n                    }\n                }\n                if (properties) {\n                    for (const element of elements) {\n                        if (!isDeepMatch(properties, element)) {\n                            return false;\n                        }\n                    }\n                }\n                return true;\n                function isDeepMatch(a, b) {\n                    if (a === b) {\n                        return true;\n                    }\n                    if ((a && !b) || (!a && b)) {\n                        return false;\n                    }\n                    if (!(a instanceof Object) || !(b instanceof Object)) {\n                        return false;\n                    }\n                    for (const [key, value] of Object.entries(a)) {\n                        if (!isDeepMatch(value, b[key])) {\n                            return false;\n                        }\n                    }\n                    return true;\n                }\n            }, properties, attributes);\n        }\n        await elementsHandle.dispose();\n        return result === visible;\n    }, timeout);\n}\nasync function querySelectorsAll(selectors, frame) {\n    for (const selector of selectors) {\n        const result = await querySelectorAll(selector, frame);\n        if (result.length) {\n            return result;\n        }\n    }\n    return [];\n}\nasync function querySelectorAll(selector, frame) {\n    if (!Array.isArray(selector)) {\n        selector = [selector];\n    }\n    if (!selector.length) {\n        throw new Error('Empty selector provided to querySelectorAll');\n    }\n    let elementHandles = await frame.$$(selector[0]);\n    if (!elementHandles.length) {\n        return [];\n    }\n    for (const part of selector.slice(1, selector.length)) {\n        elementHandles = (await Promise.all(elementHandles.map(async (handle) => {\n            const innerHandle = await handle.evaluateHandle((el) => el.shadowRoot ? el.shadowRoot : el);\n            const elementHandles = await innerHandle.$$(part);\n            innerHandle.dispose();\n            handle.dispose();\n            return elementHandles;\n        }))).flat();\n        if (!elementHandles.length) {\n            return [];\n        }\n    }\n    return elementHandles;\n}\nasync function waitForFunction(fn, timeout) {\n    let isActive = true;\n    const timeoutId = setTimeout(() => {\n        isActive = false;\n    }, timeout);\n    while (isActive) {\n        const result = await fn();\n        if (result) {\n            clearTimeout(timeoutId);\n            return;\n        }\n        await new Promise((resolve) => setTimeout(resolve, 100));\n    }\n    throw new Error('Timed out');\n}\n\n/**\n    Copyright 2022 Google LLC\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n        https://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n */\nasync function _runStepWithHooks(extension, step, flow) {\n    await extension.beforeEachStep?.(step, flow);\n    await extension.runStep(step, flow);\n    await extension.afterEachStep?.(step, flow);\n}\nclass Runner {\n    #flow;\n    #extension;\n    #aborted = false;\n    /**\n     * @internal\n     */\n    constructor(extension) {\n        this.#extension = extension;\n    }\n    abort() {\n        this.#aborted = true;\n    }\n    set flow(flow) {\n        this.#flow = flow;\n    }\n    async runBeforeAllSteps(flow) {\n        await this.#extension.beforeAllSteps?.(flow);\n    }\n    async runAfterAllSteps(flow) {\n        await this.#extension.afterAllSteps?.(flow);\n    }\n    /**\n     * Runs the provided `step` with `beforeEachStep` and `afterEachStep` hooks.\n     * Parameters from the `flow` apply if the `flow` is set.\n     */\n    async runStep(step) {\n        await _runStepWithHooks(this.#extension, step);\n    }\n    /**\n     * Run all the steps in the flow\n     * @returns whether all the steps are run or the execution is aborted\n     */\n    async run() {\n        if (!this.#flow) {\n            throw new Error('Set the flow on the runner instance before calling `run`.');\n        }\n        const flow = this.#flow;\n        this.#aborted = false;\n        await this.#extension.beforeAllSteps?.(flow);\n        if (this.#aborted) {\n            return false;\n        }\n        for (const step of flow.steps) {\n            if (this.#aborted) {\n                await this.#extension.afterAllSteps?.(flow);\n                return false;\n            }\n            await _runStepWithHooks(this.#extension, step, flow);\n        }\n        await this.#extension.afterAllSteps?.(flow);\n        return true;\n    }\n}\nasync function createRunner(flowOrExtension, maybeExtension) {\n    const extension = flowOrExtension instanceof RunnerExtension\n        ? flowOrExtension\n        : maybeExtension;\n    const flow = !(flowOrExtension instanceof RunnerExtension)\n        ? flowOrExtension\n        : undefined;\n    const runner = new Runner(extension ?? (await createPuppeteerRunnerOwningBrowserExtension()));\n    if (flow) {\n        runner.flow = flow;\n    }\n    return runner;\n}\nasync function createPuppeteerRunnerOwningBrowserExtension() {\n    const { default: puppeteer } = await import('puppeteer');\n    const browser = await puppeteer.launch();\n    const page = await browser.newPage();\n    return new PuppeteerRunnerOwningBrowserExtension(browser, page);\n}\n\n/**\n    Copyright 2022 Google LLC\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n        https://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n */\n/**\n * Stringifies a user flow to a script that uses \\@puppeteer/replay's own API.\n */\nclass PuppeteerReplayStringifyExtension extends StringifyExtension {\n    async beforeAllSteps(out) {\n        out.appendLine(\"import url from 'url';\");\n        out.appendLine(\"import { createRunner } from '@puppeteer/replay';\");\n        out.appendLine('');\n        out.appendLine('export async function run(extension) {').startBlock();\n        out.appendLine('const runner = await createRunner(extension);');\n        out.appendLine('');\n        out.appendLine('await runner.runBeforeAllSteps();');\n        out.appendLine('');\n    }\n    async afterAllSteps(out) {\n        out.appendLine('');\n        out\n            .appendLine('await runner.runAfterAllSteps();')\n            .endBlock()\n            .appendLine('}');\n        out.appendLine('');\n        out\n            .appendLine('if (process && import.meta.url === url.pathToFileURL(process.argv[1]).href) {')\n            .startBlock()\n            .appendLine('run()')\n            .endBlock()\n            .appendLine('}');\n    }\n    async stringifyStep(out, step) {\n        out.appendLine(`await runner.runStep(${formatJSONAsJS(step, out.getIndent())});`);\n    }\n}\n\n/**\n    Copyright 2022 Google LLC\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n        https://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n */\nfunction isNavigationStep(step) {\n    return Boolean(step.type === StepType.Navigate ||\n        step.assertedEvents?.some((event) => event.type === AssertedEventType.Navigation));\n}\nfunction isMobileFlow(flow) {\n    for (const step of flow.steps) {\n        if (step.type === StepType.SetViewport) {\n            return step.isMobile;\n        }\n    }\n    return false;\n}\n\n/**\n    Copyright 2022 Google LLC\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n        https://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n */\nclass LighthouseStringifyExtension extends PuppeteerStringifyExtension {\n    #isProcessingTimespan = false;\n    async beforeAllSteps(out, flow) {\n        out.appendLine(`const fs = require('fs');`);\n        await super.beforeAllSteps(out, flow);\n        out.appendLine(`const lhApi = await import('lighthouse'); // v10.0.0 or later`);\n        const flags = {\n            screenEmulation: {\n                disabled: true,\n            },\n        };\n        out.appendLine(`const flags = ${formatJSONAsJS(flags, out.getIndent())}`);\n        if (isMobileFlow(flow)) {\n            out.appendLine(`const config = undefined;`);\n        }\n        else {\n            out.appendLine('const config = lhApi.desktopConfig;');\n        }\n        out.appendLine(`const lhFlow = await lhApi.startFlow(page, {name: ${formatJSONAsJS(flow.title, out.getIndent())}, config, flags});`);\n    }\n    async stringifyStep(out, step, flow) {\n        if (step.type === StepType.SetViewport) {\n            await super.stringifyStep(out, step, flow);\n            return;\n        }\n        const isNavigation = isNavigationStep(step);\n        if (isNavigation) {\n            if (this.#isProcessingTimespan) {\n                out.appendLine(`await lhFlow.endTimespan();`);\n                this.#isProcessingTimespan = false;\n            }\n            out.appendLine(`await lhFlow.startNavigation();`);\n        }\n        else if (!this.#isProcessingTimespan) {\n            out.appendLine(`await lhFlow.startTimespan();`);\n            this.#isProcessingTimespan = true;\n        }\n        await super.stringifyStep(out, step, flow);\n        if (isNavigation) {\n            out.appendLine(`await lhFlow.endNavigation();`);\n        }\n    }\n    async afterAllSteps(out, flow) {\n        if (this.#isProcessingTimespan) {\n            out.appendLine(`await lhFlow.endTimespan();`);\n        }\n        out.appendLine(`const lhFlowReport = await lhFlow.generateReport();`);\n        out.appendLine(`fs.writeFileSync(__dirname + '/flow.report.html', lhFlowReport)`);\n        await super.afterAllSteps(out, flow);\n    }\n}\n\n/**\n    Copyright 2022 Google LLC\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n\n        https://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software\n    distributed under the License is distributed on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n    See the License for the specific language governing permissions and\n    limitations under the License.\n */\nclass LighthouseRunnerExtension extends PuppeteerRunnerExtension {\n    #isTimespanRunning = false;\n    #isNavigationRunning = false;\n    #lhFlow;\n    async createFlowResult() {\n        if (!this.#lhFlow) {\n            throw new Error('Cannot get flow result before running the flow');\n        }\n        return this.#lhFlow.createFlowResult();\n    }\n    async beforeAllSteps(flow) {\n        await super.beforeAllSteps?.(flow);\n        const { startFlow, desktopConfig } = await import('lighthouse');\n        let config = undefined;\n        if (!isMobileFlow(flow)) {\n            config = desktopConfig;\n        }\n        this.#lhFlow = await startFlow(this.page, {\n            config,\n            flags: { screenEmulation: { disabled: true } },\n            name: flow.title,\n        });\n    }\n    async beforeEachStep(step, flow) {\n        await super.beforeEachStep?.(step, flow);\n        if (step.type === StepType.SetViewport)\n            return;\n        if (isNavigationStep(step)) {\n            if (this.#isTimespanRunning) {\n                await this.#lhFlow.endTimespan();\n                this.#isTimespanRunning = false;\n            }\n            await this.#lhFlow.startNavigation();\n            this.#isNavigationRunning = true;\n        }\n        else if (!this.#isTimespanRunning) {\n            await this.#lhFlow.startTimespan();\n            this.#isTimespanRunning = true;\n        }\n    }\n    async afterEachStep(step, flow) {\n        if (this.#isNavigationRunning) {\n            await this.#lhFlow.endNavigation();\n            this.#isNavigationRunning = false;\n        }\n        await super.afterEachStep?.(step, flow);\n    }\n    async afterAllSteps(flow) {\n        if (this.#isTimespanRunning) {\n            await this.#lhFlow.endTimespan();\n        }\n        await super.afterAllSteps?.(flow);\n    }\n}\n\nexport { AssertedEventType, JSONStringifyExtension, LighthouseRunnerExtension, LighthouseStringifyExtension, PuppeteerReplayStringifyExtension, PuppeteerRunnerExtension, PuppeteerRunnerOwningBrowserExtension, PuppeteerStringifyExtension, Runner, RunnerExtension, Schema, SelectorType, StepType, StringifyExtension, assertAllStepTypesAreHandled, createRunner, formatAsJSLiteral, formatJSONAsJS, getSelectorType, maxTimeout, minTimeout, mouseButtonMap, parse, parseSourceMap, parseStep, pointerDeviceTypes, selectorToPElementSelector, stringify, stringifyStep, stripSourceMap, typeableInputTypes, validTimeout };\n//# sourceMappingURL=main.js.map\n","// Copyright 2023 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\nimport * as Common from '../../../core/common/common.js';\nimport * as i18n from '../../../core/i18n/i18n.js';\nimport { SelectorType } from './Schema.js';\nconst UIStrings = {\n    /**\n     * @description This string is used to generate the default name for the create recording form in the Recording panel.\n     * The format is similar to the one used by MacOS to generate names for screenshots. Both {DATE} and {TIME} are localized\n     * using the current locale.\n     *\n     * @example {2022-08-04} DATE\n     * @example {10:32:48} TIME\n     */\n    defaultRecordingName: 'Recording {DATE} at {TIME}',\n};\nconst str_ = i18n.i18n.registerUIStrings('panels/recorder/models/RecorderSettings.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\nexport class RecorderSettings {\n    #selectorAttribute = Common.Settings.Settings.instance().createSetting('recorder-selector-attribute', '');\n    #speed = Common.Settings.Settings.instance().createSetting('recorder-panel-replay-speed', \"normal\" /* PlayRecordingSpeed.NORMAL */);\n    #replayExtension = Common.Settings.Settings.instance().createSetting('recorder-panel-replay-extension', '');\n    #selectorTypes = new Map();\n    #preferredCopyFormat = Common.Settings.Settings.instance().createSetting('recorder-preferred-copy-format', \"json\" /* ConverterIds.JSON */);\n    constructor() {\n        for (const selectorType of Object.values(SelectorType)) {\n            this.#selectorTypes.set(selectorType, Common.Settings.Settings.instance().createSetting(`recorder-${selectorType}-selector-enabled`, true));\n        }\n    }\n    get selectorAttribute() {\n        return this.#selectorAttribute.get();\n    }\n    set selectorAttribute(value) {\n        this.#selectorAttribute.set(value);\n    }\n    get speed() {\n        return this.#speed.get();\n    }\n    set speed(speed) {\n        this.#speed.set(speed);\n    }\n    get replayExtension() {\n        return this.#replayExtension.get();\n    }\n    set replayExtension(replayExtension) {\n        this.#replayExtension.set(replayExtension);\n    }\n    get defaultTitle() {\n        const now = new Date();\n        return i18nString(UIStrings.defaultRecordingName, {\n            DATE: now.toLocaleDateString(),\n            TIME: now.toLocaleTimeString(),\n        });\n    }\n    get defaultSelectors() {\n        return Object.values(SelectorType)\n            .filter(type => this.getSelectorByType(type));\n    }\n    getSelectorByType(type) {\n        return this.#selectorTypes.get(type)?.get();\n    }\n    setSelectorByType(type, value) {\n        this.#selectorTypes.get(type)?.set(value);\n    }\n    get preferredCopyFormat() {\n        return this.#preferredCopyFormat.get();\n    }\n    set preferredCopyFormat(value) {\n        this.#preferredCopyFormat.set(value);\n    }\n}\n//# sourceMappingURL=RecorderSettings.js.map","// Copyright 2023 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\nimport * as UI from '../../../ui/legacy/legacy.js';\nexport class RecorderShortcutHelper {\n    #abortController;\n    #timeoutId = null;\n    #timeout;\n    constructor(timeout = 200) {\n        this.#timeout = timeout;\n        this.#abortController = new AbortController();\n    }\n    #cleanInternals() {\n        this.#abortController.abort();\n        if (this.#timeoutId) {\n            clearTimeout(this.#timeoutId);\n        }\n        this.#abortController = new AbortController();\n    }\n    #handleCallback(callback) {\n        this.#cleanInternals();\n        void callback();\n    }\n    handleShortcut(callback) {\n        this.#cleanInternals();\n        document.addEventListener('keyup', event => {\n            if (UI.KeyboardShortcut.KeyboardShortcut.eventHasCtrlEquivalentKey(event)) {\n                this.#handleCallback(callback);\n            }\n        }, { signal: this.#abortController.signal });\n        this.#timeoutId = setTimeout(() => this.#handleCallback(callback), this.#timeout);\n    }\n}\n//# sourceMappingURL=RecorderShortcutHelper.js.map","/**\n                               Apache License\n                         Version 2.0, January 2004\n                      http://www.apache.org/licenses/\n\n TERMS AND CONDITIONS FOR USE, REPRODUCTION, AND DISTRIBUTION\n\n 1. Definitions.\n\n    \"License\" shall mean the terms and conditions for use, reproduction,\n    and distribution as defined by Sections 1 through 9 of this document.\n\n    \"Licensor\" shall mean the copyright owner or entity authorized by\n    the copyright owner that is granting the License.\n\n    \"Legal Entity\" shall mean the union of the acting entity and all\n    other entities that control, are controlled by, or are under common\n    control with that entity. For the purposes of this definition,\n    \"control\" means (i) the power, direct or indirect, to cause the\n    direction or management of such entity, whether by contract or\n    otherwise, or (ii) ownership of fifty percent (50%) or more of the\n    outstanding shares, or (iii) beneficial ownership of such entity.\n\n    \"You\" (or \"Your\") shall mean an individual or Legal Entity\n    exercising permissions granted by this License.\n\n    \"Source\" form shall mean the preferred form for making modifications,\n    including but not limited to software source code, documentation\n    source, and configuration files.\n\n    \"Object\" form shall mean any form resulting from mechanical\n    transformation or translation of a Source form, including but\n    not limited to compiled object code, generated documentation,\n    and conversions to other media types.\n\n    \"Work\" shall mean the work of authorship, whether in Source or\n    Object form, made available under the License, as indicated by a\n    copyright notice that is included in or attached to the work\n    (an example is provided in the Appendix below).\n\n    \"Derivative Works\" shall mean any work, whether in Source or Object\n    form, that is based on (or derived from) the Work and for which the\n    editorial revisions, annotations, elaborations, or other modifications\n    represent, as a whole, an original work of authorship. For the purposes\n    of this License, Derivative Works shall not include works that remain\n    separable from, or merely link (or bind by name) to the interfaces of,\n    the Work and Derivative Works thereof.\n\n    \"Contribution\" shall mean any work of authorship, including\n    the original version of the Work and any modifications or additions\n    to that Work or Derivative Works thereof, that is intentionally\n    submitted to Licensor for inclusion in the Work by the copyright owner\n    or by an individual or Legal Entity authorized to submit on behalf of\n    the copyright owner. For the purposes of this definition, \"submitted\"\n    means any form of electronic, verbal, or written communication sent\n    to the Licensor or its representatives, including but not limited to\n    communication on electronic mailing lists, source code control systems,\n    and issue tracking systems that are managed by, or on behalf of, the\n    Licensor for the purpose of discussing and improving the Work, but\n    excluding communication that is conspicuously marked or otherwise\n    designated in writing by the copyright owner as \"Not a Contribution.\"\n\n    \"Contributor\" shall mean Licensor and any individual or Legal Entity\n    on behalf of whom a Contribution has been received by Licensor and\n    subsequently incorporated within the Work.\n\n 2. Grant of Copyright License. Subject to the terms and conditions of\n    this License, each Contributor hereby grants to You a perpetual,\n    worldwide, non-exclusive, no-charge, royalty-free, irrevocable\n    copyright license to reproduce, prepare Derivative Works of,\n    publicly display, publicly perform, sublicense, and distribute the\n    Work and such Derivative Works in Source or Object form.\n\n 3. Grant of Patent License. Subject to the terms and conditions of\n    this License, each Contributor hereby grants to You a perpetual,\n    worldwide, non-exclusive, no-charge, royalty-free, irrevocable\n    (except as stated in this section) patent license to make, have made,\n    use, offer to sell, sell, import, and otherwise transfer the Work,\n    where such license applies only to those patent claims licensable\n    by such Contributor that are necessarily infringed by their\n    Contribution(s) alone or by combination of their Contribution(s)\n    with the Work to which such Contribution(s) was submitted. If You\n    institute patent litigation against any entity (including a\n    cross-claim or counterclaim in a lawsuit) alleging that the Work\n    or a Contribution incorporated within the Work constitutes direct\n    or contributory patent infringement, then any patent licenses\n    granted to You under this License for that Work shall terminate\n    as of the date such litigation is filed.\n\n 4. Redistribution. You may reproduce and distribute copies of the\n    Work or Derivative Works thereof in any medium, with or without\n    modifications, and in Source or Object form, provided that You\n    meet the following conditions:\n\n    (a) You must give any other recipients of the Work or\n        Derivative Works a copy of this License; and\n\n    (b) You must cause any modified files to carry prominent notices\n        stating that You changed the files; and\n\n    (c) You must retain, in the Source form of any Derivative Works\n        that You distribute, all copyright, patent, trademark, and\n        attribution notices from the Source form of the Work,\n        excluding those notices that do not pertain to any part of\n        the Derivative Works; and\n\n    (d) If the Work includes a \"NOTICE\" text file as part of its\n        distribution, then any Derivative Works that You distribute must\n        include a readable copy of the attribution notices contained\n        within such NOTICE file, excluding those notices that do not\n        pertain to any part of the Derivative Works, in at least one\n        of the following places: within a NOTICE text file distributed\n        as part of the Derivative Works; within the Source form or\n        documentation, if provided along with the Derivative Works; or,\n        within a display generated by the Derivative Works, if and\n        wherever such third-party notices normally appear. The contents\n        of the NOTICE file are for informational purposes only and\n        do not modify the License. You may add Your own attribution\n        notices within Derivative Works that You distribute, alongside\n        or as an addendum to the NOTICE text from the Work, provided\n        that such additional attribution notices cannot be construed\n        as modifying the License.\n\n    You may add Your own copyright statement to Your modifications and\n    may provide additional or different license terms and conditions\n    for use, reproduction, or distribution of Your modifications, or\n    for any such Derivative Works as a whole, provided Your use,\n    reproduction, and distribution of the Work otherwise complies with\n    the conditions stated in this License.\n\n 5. Submission of Contributions. Unless You explicitly state otherwise,\n    any Contribution intentionally submitted for inclusion in the Work\n    by You to the Licensor shall be under the terms and conditions of\n    this License, without any additional terms or conditions.\n    Notwithstanding the above, nothing herein shall supersede or modify\n    the terms of any separate license agreement you may have executed\n    with Licensor regarding such Contributions.\n\n 6. Trademarks. This License does not grant permission to use the trade\n    names, trademarks, service marks, or product names of the Licensor,\n    except as required for reasonable and customary use in describing the\n    origin of the Work and reproducing the content of the NOTICE file.\n\n 7. Disclaimer of Warranty. Unless required by applicable law or\n    agreed to in writing, Licensor provides the Work (and each\n    Contributor provides its Contributions) on an \"AS IS\" BASIS,\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or\n    implied, including, without limitation, any warranties or conditions\n    of TITLE, NON-INFRINGEMENT, MERCHANTABILITY, or FITNESS FOR A\n    PARTICULAR PURPOSE. You are solely responsible for determining the\n    appropriateness of using or redistributing the Work and assume any\n    risks associated with Your exercise of permissions under this License.\n\n 8. Limitation of Liability. In no event and under no legal theory,\n    whether in tort (including negligence), contract, or otherwise,\n    unless required by applicable law (such as deliberate and grossly\n    negligent acts) or agreed to in writing, shall any Contributor be\n    liable to You for damages, including any direct, indirect, special,\n    incidental, or consequential damages of any character arising as a\n    result of this License or out of the use or inability to use the\n    Work (including but not limited to damages for loss of goodwill,\n    work stoppage, computer failure or malfunction, or any and all\n    other commercial damages or losses), even if such Contributor\n    has been advised of the possibility of such damages.\n\n 9. Accepting Warranty or Additional Liability. While redistributing\n    the Work or Derivative Works thereof, You may choose to offer,\n    and charge a fee for, acceptance of support, warranty, indemnity,\n    or other liability obligations and/or rights consistent with this\n    License. However, in accepting such obligations, You may act only\n    on Your own behalf and on Your sole responsibility, not on behalf\n    of any other Contributor, and only if You agree to indemnify,\n    defend, and hold each Contributor harmless for any liability\n    incurred by, or claims asserted against, such Contributor by reason\n    of your accepting any such warranty or additional liability.\n\n END OF TERMS AND CONDITIONS\n\n APPENDIX: How to apply the Apache License to your work.\n\n    To apply the Apache License to your work, attach the following\n    boilerplate notice, with the fields enclosed by brackets \"[]\"\n    replaced with your own identifying information. (Don't include\n    the brackets!)  The text should be enclosed in the appropriate\n    comment syntax for the file format. We also recommend that a\n    file or class name and description of purpose be included on the\n    same \"printed page\" as the copyright notice for easier\n    identification within third-party archives.\n\n Copyright (c) 2015-2018 Google, Inc., Netflix, Inc., Microsoft Corp. and contributors\n\n Licensed under the Apache License, Version 2.0 (the \"License\");\n you may not use this file except in compliance with the License.\n You may obtain a copy of the License at\n\n     http://www.apache.org/licenses/LICENSE-2.0\n\n Unless required by applicable law or agreed to in writing, software\n distributed under the License is distributed on an \"AS IS\" BASIS,\n WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n See the License for the specific language governing permissions and\n limitations under the License.\n \n\n*/\n// node_modules/tslib/tslib.es6.mjs\nvar extendStatics = function(d, b) {\n  extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {\n    d2.__proto__ = b2;\n  } || function(d2, b2) {\n    for (var p in b2) if (Object.prototype.hasOwnProperty.call(b2, p)) d2[p] = b2[p];\n  };\n  return extendStatics(d, b);\n};\nfunction __extends(d, b) {\n  if (typeof b !== \"function\" && b !== null)\n    throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n  extendStatics(d, b);\n  function __() {\n    this.constructor = d;\n  }\n  d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n}\nfunction __awaiter(thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function(resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function(resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n}\nfunction __generator(thisArg, body) {\n  var _ = { label: 0, sent: function() {\n    if (t[0] & 1) throw t[1];\n    return t[1];\n  }, trys: [], ops: [] }, f, y, t, g;\n  return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() {\n    return this;\n  }), g;\n  function verb(n) {\n    return function(v) {\n      return step([n, v]);\n    };\n  }\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n    while (g && (g = 0, op[0] && (_ = 0)), _) try {\n      if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n      if (y = 0, t) op = [op[0] & 2, t.value];\n      switch (op[0]) {\n        case 0:\n        case 1:\n          t = op;\n          break;\n        case 4:\n          _.label++;\n          return { value: op[1], done: false };\n        case 5:\n          _.label++;\n          y = op[1];\n          op = [0];\n          continue;\n        case 7:\n          op = _.ops.pop();\n          _.trys.pop();\n          continue;\n        default:\n          if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n            _ = 0;\n            continue;\n          }\n          if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n            _.label = op[1];\n            break;\n          }\n          if (op[0] === 6 && _.label < t[1]) {\n            _.label = t[1];\n            t = op;\n            break;\n          }\n          if (t && _.label < t[2]) {\n            _.label = t[2];\n            _.ops.push(op);\n            break;\n          }\n          if (t[2]) _.ops.pop();\n          _.trys.pop();\n          continue;\n      }\n      op = body.call(thisArg, _);\n    } catch (e) {\n      op = [6, e];\n      y = 0;\n    } finally {\n      f = t = 0;\n    }\n    if (op[0] & 5) throw op[1];\n    return { value: op[0] ? op[1] : void 0, done: true };\n  }\n}\nfunction __values(o) {\n  var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n  if (m) return m.call(o);\n  if (o && typeof o.length === \"number\") return {\n    next: function() {\n      if (o && i >= o.length) o = void 0;\n      return { value: o && o[i++], done: !o };\n    }\n  };\n  throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n}\nfunction __read(o, n) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n  if (!m) return o;\n  var i = m.call(o), r, ar = [], e;\n  try {\n    while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n  } catch (error) {\n    e = { error };\n  } finally {\n    try {\n      if (r && !r.done && (m = i[\"return\"])) m.call(i);\n    } finally {\n      if (e) throw e.error;\n    }\n  }\n  return ar;\n}\nfunction __spreadArray(to, from2, pack) {\n  if (pack || arguments.length === 2) for (var i = 0, l = from2.length, ar; i < l; i++) {\n    if (ar || !(i in from2)) {\n      if (!ar) ar = Array.prototype.slice.call(from2, 0, i);\n      ar[i] = from2[i];\n    }\n  }\n  return to.concat(ar || Array.prototype.slice.call(from2));\n}\nfunction __await(v) {\n  return this instanceof __await ? (this.v = v, this) : new __await(v);\n}\nfunction __asyncGenerator(thisArg, _arguments, generator) {\n  if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n  var g = generator.apply(thisArg, _arguments || []), i, q = [];\n  return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function() {\n    return this;\n  }, i;\n  function verb(n) {\n    if (g[n]) i[n] = function(v) {\n      return new Promise(function(a, b) {\n        q.push([n, v, a, b]) > 1 || resume(n, v);\n      });\n    };\n  }\n  function resume(n, v) {\n    try {\n      step(g[n](v));\n    } catch (e) {\n      settle(q[0][3], e);\n    }\n  }\n  function step(r) {\n    r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r);\n  }\n  function fulfill(value) {\n    resume(\"next\", value);\n  }\n  function reject(value) {\n    resume(\"throw\", value);\n  }\n  function settle(f, v) {\n    if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]);\n  }\n}\nfunction __asyncValues(o) {\n  if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n  var m = o[Symbol.asyncIterator], i;\n  return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function() {\n    return this;\n  }, i);\n  function verb(n) {\n    i[n] = o[n] && function(v) {\n      return new Promise(function(resolve, reject) {\n        v = o[n](v), settle(resolve, reject, v.done, v.value);\n      });\n    };\n  }\n  function settle(resolve, reject, d, v) {\n    Promise.resolve(v).then(function(v2) {\n      resolve({ value: v2, done: d });\n    }, reject);\n  }\n}\n\n// node_modules/rxjs/dist/esm5/internal/util/isFunction.js\nfunction isFunction(value) {\n  return typeof value === \"function\";\n}\n\n// node_modules/rxjs/dist/esm5/internal/util/createErrorClass.js\nfunction createErrorClass(createImpl) {\n  var _super = function(instance) {\n    Error.call(instance);\n    instance.stack = new Error().stack;\n  };\n  var ctorFunc = createImpl(_super);\n  ctorFunc.prototype = Object.create(Error.prototype);\n  ctorFunc.prototype.constructor = ctorFunc;\n  return ctorFunc;\n}\n\n// node_modules/rxjs/dist/esm5/internal/util/UnsubscriptionError.js\nvar UnsubscriptionError = createErrorClass(function(_super) {\n  return function UnsubscriptionErrorImpl(errors) {\n    _super(this);\n    this.message = errors ? errors.length + \" errors occurred during unsubscription:\\n\" + errors.map(function(err, i) {\n      return i + 1 + \") \" + err.toString();\n    }).join(\"\\n  \") : \"\";\n    this.name = \"UnsubscriptionError\";\n    this.errors = errors;\n  };\n});\n\n// node_modules/rxjs/dist/esm5/internal/util/arrRemove.js\nfunction arrRemove(arr, item) {\n  if (arr) {\n    var index = arr.indexOf(item);\n    0 <= index && arr.splice(index, 1);\n  }\n}\n\n// node_modules/rxjs/dist/esm5/internal/Subscription.js\nvar Subscription = function() {\n  function Subscription2(initialTeardown) {\n    this.initialTeardown = initialTeardown;\n    this.closed = false;\n    this._parentage = null;\n    this._finalizers = null;\n  }\n  Subscription2.prototype.unsubscribe = function() {\n    var e_1, _a, e_2, _b;\n    var errors;\n    if (!this.closed) {\n      this.closed = true;\n      var _parentage = this._parentage;\n      if (_parentage) {\n        this._parentage = null;\n        if (Array.isArray(_parentage)) {\n          try {\n            for (var _parentage_1 = __values(_parentage), _parentage_1_1 = _parentage_1.next(); !_parentage_1_1.done; _parentage_1_1 = _parentage_1.next()) {\n              var parent_1 = _parentage_1_1.value;\n              parent_1.remove(this);\n            }\n          } catch (e_1_1) {\n            e_1 = { error: e_1_1 };\n          } finally {\n            try {\n              if (_parentage_1_1 && !_parentage_1_1.done && (_a = _parentage_1.return)) _a.call(_parentage_1);\n            } finally {\n              if (e_1) throw e_1.error;\n            }\n          }\n        } else {\n          _parentage.remove(this);\n        }\n      }\n      var initialFinalizer = this.initialTeardown;\n      if (isFunction(initialFinalizer)) {\n        try {\n          initialFinalizer();\n        } catch (e) {\n          errors = e instanceof UnsubscriptionError ? e.errors : [e];\n        }\n      }\n      var _finalizers = this._finalizers;\n      if (_finalizers) {\n        this._finalizers = null;\n        try {\n          for (var _finalizers_1 = __values(_finalizers), _finalizers_1_1 = _finalizers_1.next(); !_finalizers_1_1.done; _finalizers_1_1 = _finalizers_1.next()) {\n            var finalizer = _finalizers_1_1.value;\n            try {\n              execFinalizer(finalizer);\n            } catch (err) {\n              errors = errors !== null && errors !== void 0 ? errors : [];\n              if (err instanceof UnsubscriptionError) {\n                errors = __spreadArray(__spreadArray([], __read(errors)), __read(err.errors));\n              } else {\n                errors.push(err);\n              }\n            }\n          }\n        } catch (e_2_1) {\n          e_2 = { error: e_2_1 };\n        } finally {\n          try {\n            if (_finalizers_1_1 && !_finalizers_1_1.done && (_b = _finalizers_1.return)) _b.call(_finalizers_1);\n          } finally {\n            if (e_2) throw e_2.error;\n          }\n        }\n      }\n      if (errors) {\n        throw new UnsubscriptionError(errors);\n      }\n    }\n  };\n  Subscription2.prototype.add = function(teardown) {\n    var _a;\n    if (teardown && teardown !== this) {\n      if (this.closed) {\n        execFinalizer(teardown);\n      } else {\n        if (teardown instanceof Subscription2) {\n          if (teardown.closed || teardown._hasParent(this)) {\n            return;\n          }\n          teardown._addParent(this);\n        }\n        (this._finalizers = (_a = this._finalizers) !== null && _a !== void 0 ? _a : []).push(teardown);\n      }\n    }\n  };\n  Subscription2.prototype._hasParent = function(parent) {\n    var _parentage = this._parentage;\n    return _parentage === parent || Array.isArray(_parentage) && _parentage.includes(parent);\n  };\n  Subscription2.prototype._addParent = function(parent) {\n    var _parentage = this._parentage;\n    this._parentage = Array.isArray(_parentage) ? (_parentage.push(parent), _parentage) : _parentage ? [_parentage, parent] : parent;\n  };\n  Subscription2.prototype._removeParent = function(parent) {\n    var _parentage = this._parentage;\n    if (_parentage === parent) {\n      this._parentage = null;\n    } else if (Array.isArray(_parentage)) {\n      arrRemove(_parentage, parent);\n    }\n  };\n  Subscription2.prototype.remove = function(teardown) {\n    var _finalizers = this._finalizers;\n    _finalizers && arrRemove(_finalizers, teardown);\n    if (teardown instanceof Subscription2) {\n      teardown._removeParent(this);\n    }\n  };\n  Subscription2.EMPTY = function() {\n    var empty = new Subscription2();\n    empty.closed = true;\n    return empty;\n  }();\n  return Subscription2;\n}();\nvar EMPTY_SUBSCRIPTION = Subscription.EMPTY;\nfunction isSubscription(value) {\n  return value instanceof Subscription || value && \"closed\" in value && isFunction(value.remove) && isFunction(value.add) && isFunction(value.unsubscribe);\n}\nfunction execFinalizer(finalizer) {\n  if (isFunction(finalizer)) {\n    finalizer();\n  } else {\n    finalizer.unsubscribe();\n  }\n}\n\n// node_modules/rxjs/dist/esm5/internal/config.js\nvar config = {\n  onUnhandledError: null,\n  onStoppedNotification: null,\n  Promise: void 0,\n  useDeprecatedSynchronousErrorHandling: false,\n  useDeprecatedNextContext: false\n};\n\n// node_modules/rxjs/dist/esm5/internal/scheduler/timeoutProvider.js\nvar timeoutProvider = {\n  setTimeout: function(handler, timeout) {\n    var args = [];\n    for (var _i = 2; _i < arguments.length; _i++) {\n      args[_i - 2] = arguments[_i];\n    }\n    var delegate = timeoutProvider.delegate;\n    if (delegate === null || delegate === void 0 ? void 0 : delegate.setTimeout) {\n      return delegate.setTimeout.apply(delegate, __spreadArray([handler, timeout], __read(args)));\n    }\n    return setTimeout.apply(void 0, __spreadArray([handler, timeout], __read(args)));\n  },\n  clearTimeout: function(handle) {\n    var delegate = timeoutProvider.delegate;\n    return ((delegate === null || delegate === void 0 ? void 0 : delegate.clearTimeout) || clearTimeout)(handle);\n  },\n  delegate: void 0\n};\n\n// node_modules/rxjs/dist/esm5/internal/util/reportUnhandledError.js\nfunction reportUnhandledError(err) {\n  timeoutProvider.setTimeout(function() {\n    var onUnhandledError = config.onUnhandledError;\n    if (onUnhandledError) {\n      onUnhandledError(err);\n    } else {\n      throw err;\n    }\n  });\n}\n\n// node_modules/rxjs/dist/esm5/internal/util/noop.js\nfunction noop() {\n}\n\n// node_modules/rxjs/dist/esm5/internal/NotificationFactories.js\nvar COMPLETE_NOTIFICATION = function() {\n  return createNotification(\"C\", void 0, void 0);\n}();\nfunction errorNotification(error) {\n  return createNotification(\"E\", void 0, error);\n}\nfunction nextNotification(value) {\n  return createNotification(\"N\", value, void 0);\n}\nfunction createNotification(kind, value, error) {\n  return {\n    kind,\n    value,\n    error\n  };\n}\n\n// node_modules/rxjs/dist/esm5/internal/util/errorContext.js\nvar context = null;\nfunction errorContext(cb) {\n  if (config.useDeprecatedSynchronousErrorHandling) {\n    var isRoot = !context;\n    if (isRoot) {\n      context = { errorThrown: false, error: null };\n    }\n    cb();\n    if (isRoot) {\n      var _a = context, errorThrown = _a.errorThrown, error = _a.error;\n      context = null;\n      if (errorThrown) {\n        throw error;\n      }\n    }\n  } else {\n    cb();\n  }\n}\nfunction captureError(err) {\n  if (config.useDeprecatedSynchronousErrorHandling && context) {\n    context.errorThrown = true;\n    context.error = err;\n  }\n}\n\n// node_modules/rxjs/dist/esm5/internal/Subscriber.js\nvar Subscriber = function(_super) {\n  __extends(Subscriber2, _super);\n  function Subscriber2(destination) {\n    var _this = _super.call(this) || this;\n    _this.isStopped = false;\n    if (destination) {\n      _this.destination = destination;\n      if (isSubscription(destination)) {\n        destination.add(_this);\n      }\n    } else {\n      _this.destination = EMPTY_OBSERVER;\n    }\n    return _this;\n  }\n  Subscriber2.create = function(next, error, complete) {\n    return new SafeSubscriber(next, error, complete);\n  };\n  Subscriber2.prototype.next = function(value) {\n    if (this.isStopped) {\n      handleStoppedNotification(nextNotification(value), this);\n    } else {\n      this._next(value);\n    }\n  };\n  Subscriber2.prototype.error = function(err) {\n    if (this.isStopped) {\n      handleStoppedNotification(errorNotification(err), this);\n    } else {\n      this.isStopped = true;\n      this._error(err);\n    }\n  };\n  Subscriber2.prototype.complete = function() {\n    if (this.isStopped) {\n      handleStoppedNotification(COMPLETE_NOTIFICATION, this);\n    } else {\n      this.isStopped = true;\n      this._complete();\n    }\n  };\n  Subscriber2.prototype.unsubscribe = function() {\n    if (!this.closed) {\n      this.isStopped = true;\n      _super.prototype.unsubscribe.call(this);\n      this.destination = null;\n    }\n  };\n  Subscriber2.prototype._next = function(value) {\n    this.destination.next(value);\n  };\n  Subscriber2.prototype._error = function(err) {\n    try {\n      this.destination.error(err);\n    } finally {\n      this.unsubscribe();\n    }\n  };\n  Subscriber2.prototype._complete = function() {\n    try {\n      this.destination.complete();\n    } finally {\n      this.unsubscribe();\n    }\n  };\n  return Subscriber2;\n}(Subscription);\nvar _bind = Function.prototype.bind;\nfunction bind(fn, thisArg) {\n  return _bind.call(fn, thisArg);\n}\nvar ConsumerObserver = function() {\n  function ConsumerObserver2(partialObserver) {\n    this.partialObserver = partialObserver;\n  }\n  ConsumerObserver2.prototype.next = function(value) {\n    var partialObserver = this.partialObserver;\n    if (partialObserver.next) {\n      try {\n        partialObserver.next(value);\n      } catch (error) {\n        handleUnhandledError(error);\n      }\n    }\n  };\n  ConsumerObserver2.prototype.error = function(err) {\n    var partialObserver = this.partialObserver;\n    if (partialObserver.error) {\n      try {\n        partialObserver.error(err);\n      } catch (error) {\n        handleUnhandledError(error);\n      }\n    } else {\n      handleUnhandledError(err);\n    }\n  };\n  ConsumerObserver2.prototype.complete = function() {\n    var partialObserver = this.partialObserver;\n    if (partialObserver.complete) {\n      try {\n        partialObserver.complete();\n      } catch (error) {\n        handleUnhandledError(error);\n      }\n    }\n  };\n  return ConsumerObserver2;\n}();\nvar SafeSubscriber = function(_super) {\n  __extends(SafeSubscriber2, _super);\n  function SafeSubscriber2(observerOrNext, error, complete) {\n    var _this = _super.call(this) || this;\n    var partialObserver;\n    if (isFunction(observerOrNext) || !observerOrNext) {\n      partialObserver = {\n        next: observerOrNext !== null && observerOrNext !== void 0 ? observerOrNext : void 0,\n        error: error !== null && error !== void 0 ? error : void 0,\n        complete: complete !== null && complete !== void 0 ? complete : void 0\n      };\n    } else {\n      var context_1;\n      if (_this && config.useDeprecatedNextContext) {\n        context_1 = Object.create(observerOrNext);\n        context_1.unsubscribe = function() {\n          return _this.unsubscribe();\n        };\n        partialObserver = {\n          next: observerOrNext.next && bind(observerOrNext.next, context_1),\n          error: observerOrNext.error && bind(observerOrNext.error, context_1),\n          complete: observerOrNext.complete && bind(observerOrNext.complete, context_1)\n        };\n      } else {\n        partialObserver = observerOrNext;\n      }\n    }\n    _this.destination = new ConsumerObserver(partialObserver);\n    return _this;\n  }\n  return SafeSubscriber2;\n}(Subscriber);\nfunction handleUnhandledError(error) {\n  if (config.useDeprecatedSynchronousErrorHandling) {\n    captureError(error);\n  } else {\n    reportUnhandledError(error);\n  }\n}\nfunction defaultErrorHandler(err) {\n  throw err;\n}\nfunction handleStoppedNotification(notification, subscriber) {\n  var onStoppedNotification = config.onStoppedNotification;\n  onStoppedNotification && timeoutProvider.setTimeout(function() {\n    return onStoppedNotification(notification, subscriber);\n  });\n}\nvar EMPTY_OBSERVER = {\n  closed: true,\n  next: noop,\n  error: defaultErrorHandler,\n  complete: noop\n};\n\n// node_modules/rxjs/dist/esm5/internal/symbol/observable.js\nvar observable = function() {\n  return typeof Symbol === \"function\" && Symbol.observable || \"@@observable\";\n}();\n\n// node_modules/rxjs/dist/esm5/internal/util/identity.js\nfunction identity(x) {\n  return x;\n}\n\n// node_modules/rxjs/dist/esm5/internal/util/pipe.js\nfunction pipe() {\n  var fns = [];\n  for (var _i = 0; _i < arguments.length; _i++) {\n    fns[_i] = arguments[_i];\n  }\n  return pipeFromArray(fns);\n}\nfunction pipeFromArray(fns) {\n  if (fns.length === 0) {\n    return identity;\n  }\n  if (fns.length === 1) {\n    return fns[0];\n  }\n  return function piped(input) {\n    return fns.reduce(function(prev, fn) {\n      return fn(prev);\n    }, input);\n  };\n}\n\n// node_modules/rxjs/dist/esm5/internal/Observable.js\nvar Observable = function() {\n  function Observable2(subscribe) {\n    if (subscribe) {\n      this._subscribe = subscribe;\n    }\n  }\n  Observable2.prototype.lift = function(operator) {\n    var observable2 = new Observable2();\n    observable2.source = this;\n    observable2.operator = operator;\n    return observable2;\n  };\n  Observable2.prototype.subscribe = function(observerOrNext, error, complete) {\n    var _this = this;\n    var subscriber = isSubscriber(observerOrNext) ? observerOrNext : new SafeSubscriber(observerOrNext, error, complete);\n    errorContext(function() {\n      var _a = _this, operator = _a.operator, source = _a.source;\n      subscriber.add(operator ? operator.call(subscriber, source) : source ? _this._subscribe(subscriber) : _this._trySubscribe(subscriber));\n    });\n    return subscriber;\n  };\n  Observable2.prototype._trySubscribe = function(sink) {\n    try {\n      return this._subscribe(sink);\n    } catch (err) {\n      sink.error(err);\n    }\n  };\n  Observable2.prototype.forEach = function(next, promiseCtor) {\n    var _this = this;\n    promiseCtor = getPromiseCtor(promiseCtor);\n    return new promiseCtor(function(resolve, reject) {\n      var subscriber = new SafeSubscriber({\n        next: function(value) {\n          try {\n            next(value);\n          } catch (err) {\n            reject(err);\n            subscriber.unsubscribe();\n          }\n        },\n        error: reject,\n        complete: resolve\n      });\n      _this.subscribe(subscriber);\n    });\n  };\n  Observable2.prototype._subscribe = function(subscriber) {\n    var _a;\n    return (_a = this.source) === null || _a === void 0 ? void 0 : _a.subscribe(subscriber);\n  };\n  Observable2.prototype[observable] = function() {\n    return this;\n  };\n  Observable2.prototype.pipe = function() {\n    var operations = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n      operations[_i] = arguments[_i];\n    }\n    return pipeFromArray(operations)(this);\n  };\n  Observable2.prototype.toPromise = function(promiseCtor) {\n    var _this = this;\n    promiseCtor = getPromiseCtor(promiseCtor);\n    return new promiseCtor(function(resolve, reject) {\n      var value;\n      _this.subscribe(function(x) {\n        return value = x;\n      }, function(err) {\n        return reject(err);\n      }, function() {\n        return resolve(value);\n      });\n    });\n  };\n  Observable2.create = function(subscribe) {\n    return new Observable2(subscribe);\n  };\n  return Observable2;\n}();\nfunction getPromiseCtor(promiseCtor) {\n  var _a;\n  return (_a = promiseCtor !== null && promiseCtor !== void 0 ? promiseCtor : config.Promise) !== null && _a !== void 0 ? _a : Promise;\n}\nfunction isObserver(value) {\n  return value && isFunction(value.next) && isFunction(value.error) && isFunction(value.complete);\n}\nfunction isSubscriber(value) {\n  return value && value instanceof Subscriber || isObserver(value) && isSubscription(value);\n}\n\n// node_modules/rxjs/dist/esm5/internal/util/lift.js\nfunction hasLift(source) {\n  return isFunction(source === null || source === void 0 ? void 0 : source.lift);\n}\nfunction operate(init) {\n  return function(source) {\n    if (hasLift(source)) {\n      return source.lift(function(liftedSource) {\n        try {\n          return init(liftedSource, this);\n        } catch (err) {\n          this.error(err);\n        }\n      });\n    }\n    throw new TypeError(\"Unable to lift unknown Observable type\");\n  };\n}\n\n// node_modules/rxjs/dist/esm5/internal/operators/OperatorSubscriber.js\nfunction createOperatorSubscriber(destination, onNext, onComplete, onError, onFinalize) {\n  return new OperatorSubscriber(destination, onNext, onComplete, onError, onFinalize);\n}\nvar OperatorSubscriber = function(_super) {\n  __extends(OperatorSubscriber2, _super);\n  function OperatorSubscriber2(destination, onNext, onComplete, onError, onFinalize, shouldUnsubscribe) {\n    var _this = _super.call(this, destination) || this;\n    _this.onFinalize = onFinalize;\n    _this.shouldUnsubscribe = shouldUnsubscribe;\n    _this._next = onNext ? function(value) {\n      try {\n        onNext(value);\n      } catch (err) {\n        destination.error(err);\n      }\n    } : _super.prototype._next;\n    _this._error = onError ? function(err) {\n      try {\n        onError(err);\n      } catch (err2) {\n        destination.error(err2);\n      } finally {\n        this.unsubscribe();\n      }\n    } : _super.prototype._error;\n    _this._complete = onComplete ? function() {\n      try {\n        onComplete();\n      } catch (err) {\n        destination.error(err);\n      } finally {\n        this.unsubscribe();\n      }\n    } : _super.prototype._complete;\n    return _this;\n  }\n  OperatorSubscriber2.prototype.unsubscribe = function() {\n    var _a;\n    if (!this.shouldUnsubscribe || this.shouldUnsubscribe()) {\n      var closed_1 = this.closed;\n      _super.prototype.unsubscribe.call(this);\n      !closed_1 && ((_a = this.onFinalize) === null || _a === void 0 ? void 0 : _a.call(this));\n    }\n  };\n  return OperatorSubscriber2;\n}(Subscriber);\n\n// node_modules/rxjs/dist/esm5/internal/util/ObjectUnsubscribedError.js\nvar ObjectUnsubscribedError = createErrorClass(function(_super) {\n  return function ObjectUnsubscribedErrorImpl() {\n    _super(this);\n    this.name = \"ObjectUnsubscribedError\";\n    this.message = \"object unsubscribed\";\n  };\n});\n\n// node_modules/rxjs/dist/esm5/internal/Subject.js\nvar Subject = function(_super) {\n  __extends(Subject2, _super);\n  function Subject2() {\n    var _this = _super.call(this) || this;\n    _this.closed = false;\n    _this.currentObservers = null;\n    _this.observers = [];\n    _this.isStopped = false;\n    _this.hasError = false;\n    _this.thrownError = null;\n    return _this;\n  }\n  Subject2.prototype.lift = function(operator) {\n    var subject = new AnonymousSubject(this, this);\n    subject.operator = operator;\n    return subject;\n  };\n  Subject2.prototype._throwIfClosed = function() {\n    if (this.closed) {\n      throw new ObjectUnsubscribedError();\n    }\n  };\n  Subject2.prototype.next = function(value) {\n    var _this = this;\n    errorContext(function() {\n      var e_1, _a;\n      _this._throwIfClosed();\n      if (!_this.isStopped) {\n        if (!_this.currentObservers) {\n          _this.currentObservers = Array.from(_this.observers);\n        }\n        try {\n          for (var _b = __values(_this.currentObservers), _c = _b.next(); !_c.done; _c = _b.next()) {\n            var observer = _c.value;\n            observer.next(value);\n          }\n        } catch (e_1_1) {\n          e_1 = { error: e_1_1 };\n        } finally {\n          try {\n            if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n          } finally {\n            if (e_1) throw e_1.error;\n          }\n        }\n      }\n    });\n  };\n  Subject2.prototype.error = function(err) {\n    var _this = this;\n    errorContext(function() {\n      _this._throwIfClosed();\n      if (!_this.isStopped) {\n        _this.hasError = _this.isStopped = true;\n        _this.thrownError = err;\n        var observers = _this.observers;\n        while (observers.length) {\n          observers.shift().error(err);\n        }\n      }\n    });\n  };\n  Subject2.prototype.complete = function() {\n    var _this = this;\n    errorContext(function() {\n      _this._throwIfClosed();\n      if (!_this.isStopped) {\n        _this.isStopped = true;\n        var observers = _this.observers;\n        while (observers.length) {\n          observers.shift().complete();\n        }\n      }\n    });\n  };\n  Subject2.prototype.unsubscribe = function() {\n    this.isStopped = this.closed = true;\n    this.observers = this.currentObservers = null;\n  };\n  Object.defineProperty(Subject2.prototype, \"observed\", {\n    get: function() {\n      var _a;\n      return ((_a = this.observers) === null || _a === void 0 ? void 0 : _a.length) > 0;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Subject2.prototype._trySubscribe = function(subscriber) {\n    this._throwIfClosed();\n    return _super.prototype._trySubscribe.call(this, subscriber);\n  };\n  Subject2.prototype._subscribe = function(subscriber) {\n    this._throwIfClosed();\n    this._checkFinalizedStatuses(subscriber);\n    return this._innerSubscribe(subscriber);\n  };\n  Subject2.prototype._innerSubscribe = function(subscriber) {\n    var _this = this;\n    var _a = this, hasError = _a.hasError, isStopped = _a.isStopped, observers = _a.observers;\n    if (hasError || isStopped) {\n      return EMPTY_SUBSCRIPTION;\n    }\n    this.currentObservers = null;\n    observers.push(subscriber);\n    return new Subscription(function() {\n      _this.currentObservers = null;\n      arrRemove(observers, subscriber);\n    });\n  };\n  Subject2.prototype._checkFinalizedStatuses = function(subscriber) {\n    var _a = this, hasError = _a.hasError, thrownError = _a.thrownError, isStopped = _a.isStopped;\n    if (hasError) {\n      subscriber.error(thrownError);\n    } else if (isStopped) {\n      subscriber.complete();\n    }\n  };\n  Subject2.prototype.asObservable = function() {\n    var observable2 = new Observable();\n    observable2.source = this;\n    return observable2;\n  };\n  Subject2.create = function(destination, source) {\n    return new AnonymousSubject(destination, source);\n  };\n  return Subject2;\n}(Observable);\nvar AnonymousSubject = function(_super) {\n  __extends(AnonymousSubject2, _super);\n  function AnonymousSubject2(destination, source) {\n    var _this = _super.call(this) || this;\n    _this.destination = destination;\n    _this.source = source;\n    return _this;\n  }\n  AnonymousSubject2.prototype.next = function(value) {\n    var _a, _b;\n    (_b = (_a = this.destination) === null || _a === void 0 ? void 0 : _a.next) === null || _b === void 0 ? void 0 : _b.call(_a, value);\n  };\n  AnonymousSubject2.prototype.error = function(err) {\n    var _a, _b;\n    (_b = (_a = this.destination) === null || _a === void 0 ? void 0 : _a.error) === null || _b === void 0 ? void 0 : _b.call(_a, err);\n  };\n  AnonymousSubject2.prototype.complete = function() {\n    var _a, _b;\n    (_b = (_a = this.destination) === null || _a === void 0 ? void 0 : _a.complete) === null || _b === void 0 ? void 0 : _b.call(_a);\n  };\n  AnonymousSubject2.prototype._subscribe = function(subscriber) {\n    var _a, _b;\n    return (_b = (_a = this.source) === null || _a === void 0 ? void 0 : _a.subscribe(subscriber)) !== null && _b !== void 0 ? _b : EMPTY_SUBSCRIPTION;\n  };\n  return AnonymousSubject2;\n}(Subject);\n\n// node_modules/rxjs/dist/esm5/internal/scheduler/dateTimestampProvider.js\nvar dateTimestampProvider = {\n  now: function() {\n    return (dateTimestampProvider.delegate || Date).now();\n  },\n  delegate: void 0\n};\n\n// node_modules/rxjs/dist/esm5/internal/ReplaySubject.js\nvar ReplaySubject = function(_super) {\n  __extends(ReplaySubject2, _super);\n  function ReplaySubject2(_bufferSize, _windowTime, _timestampProvider) {\n    if (_bufferSize === void 0) {\n      _bufferSize = Infinity;\n    }\n    if (_windowTime === void 0) {\n      _windowTime = Infinity;\n    }\n    if (_timestampProvider === void 0) {\n      _timestampProvider = dateTimestampProvider;\n    }\n    var _this = _super.call(this) || this;\n    _this._bufferSize = _bufferSize;\n    _this._windowTime = _windowTime;\n    _this._timestampProvider = _timestampProvider;\n    _this._buffer = [];\n    _this._infiniteTimeWindow = true;\n    _this._infiniteTimeWindow = _windowTime === Infinity;\n    _this._bufferSize = Math.max(1, _bufferSize);\n    _this._windowTime = Math.max(1, _windowTime);\n    return _this;\n  }\n  ReplaySubject2.prototype.next = function(value) {\n    var _a = this, isStopped = _a.isStopped, _buffer = _a._buffer, _infiniteTimeWindow = _a._infiniteTimeWindow, _timestampProvider = _a._timestampProvider, _windowTime = _a._windowTime;\n    if (!isStopped) {\n      _buffer.push(value);\n      !_infiniteTimeWindow && _buffer.push(_timestampProvider.now() + _windowTime);\n    }\n    this._trimBuffer();\n    _super.prototype.next.call(this, value);\n  };\n  ReplaySubject2.prototype._subscribe = function(subscriber) {\n    this._throwIfClosed();\n    this._trimBuffer();\n    var subscription = this._innerSubscribe(subscriber);\n    var _a = this, _infiniteTimeWindow = _a._infiniteTimeWindow, _buffer = _a._buffer;\n    var copy = _buffer.slice();\n    for (var i = 0; i < copy.length && !subscriber.closed; i += _infiniteTimeWindow ? 1 : 2) {\n      subscriber.next(copy[i]);\n    }\n    this._checkFinalizedStatuses(subscriber);\n    return subscription;\n  };\n  ReplaySubject2.prototype._trimBuffer = function() {\n    var _a = this, _bufferSize = _a._bufferSize, _timestampProvider = _a._timestampProvider, _buffer = _a._buffer, _infiniteTimeWindow = _a._infiniteTimeWindow;\n    var adjustedBufferSize = (_infiniteTimeWindow ? 1 : 2) * _bufferSize;\n    _bufferSize < Infinity && adjustedBufferSize < _buffer.length && _buffer.splice(0, _buffer.length - adjustedBufferSize);\n    if (!_infiniteTimeWindow) {\n      var now = _timestampProvider.now();\n      var last2 = 0;\n      for (var i = 1; i < _buffer.length && _buffer[i] <= now; i += 2) {\n        last2 = i;\n      }\n      last2 && _buffer.splice(0, last2 + 1);\n    }\n  };\n  return ReplaySubject2;\n}(Subject);\n\n// node_modules/rxjs/dist/esm5/internal/scheduler/Action.js\nvar Action = function(_super) {\n  __extends(Action2, _super);\n  function Action2(scheduler, work) {\n    return _super.call(this) || this;\n  }\n  Action2.prototype.schedule = function(state, delay2) {\n    if (delay2 === void 0) {\n      delay2 = 0;\n    }\n    return this;\n  };\n  return Action2;\n}(Subscription);\n\n// node_modules/rxjs/dist/esm5/internal/scheduler/intervalProvider.js\nvar intervalProvider = {\n  setInterval: function(handler, timeout) {\n    var args = [];\n    for (var _i = 2; _i < arguments.length; _i++) {\n      args[_i - 2] = arguments[_i];\n    }\n    var delegate = intervalProvider.delegate;\n    if (delegate === null || delegate === void 0 ? void 0 : delegate.setInterval) {\n      return delegate.setInterval.apply(delegate, __spreadArray([handler, timeout], __read(args)));\n    }\n    return setInterval.apply(void 0, __spreadArray([handler, timeout], __read(args)));\n  },\n  clearInterval: function(handle) {\n    var delegate = intervalProvider.delegate;\n    return ((delegate === null || delegate === void 0 ? void 0 : delegate.clearInterval) || clearInterval)(handle);\n  },\n  delegate: void 0\n};\n\n// node_modules/rxjs/dist/esm5/internal/scheduler/AsyncAction.js\nvar AsyncAction = function(_super) {\n  __extends(AsyncAction2, _super);\n  function AsyncAction2(scheduler, work) {\n    var _this = _super.call(this, scheduler, work) || this;\n    _this.scheduler = scheduler;\n    _this.work = work;\n    _this.pending = false;\n    return _this;\n  }\n  AsyncAction2.prototype.schedule = function(state, delay2) {\n    var _a;\n    if (delay2 === void 0) {\n      delay2 = 0;\n    }\n    if (this.closed) {\n      return this;\n    }\n    this.state = state;\n    var id = this.id;\n    var scheduler = this.scheduler;\n    if (id != null) {\n      this.id = this.recycleAsyncId(scheduler, id, delay2);\n    }\n    this.pending = true;\n    this.delay = delay2;\n    this.id = (_a = this.id) !== null && _a !== void 0 ? _a : this.requestAsyncId(scheduler, this.id, delay2);\n    return this;\n  };\n  AsyncAction2.prototype.requestAsyncId = function(scheduler, _id, delay2) {\n    if (delay2 === void 0) {\n      delay2 = 0;\n    }\n    return intervalProvider.setInterval(scheduler.flush.bind(scheduler, this), delay2);\n  };\n  AsyncAction2.prototype.recycleAsyncId = function(_scheduler, id, delay2) {\n    if (delay2 === void 0) {\n      delay2 = 0;\n    }\n    if (delay2 != null && this.delay === delay2 && this.pending === false) {\n      return id;\n    }\n    if (id != null) {\n      intervalProvider.clearInterval(id);\n    }\n    return void 0;\n  };\n  AsyncAction2.prototype.execute = function(state, delay2) {\n    if (this.closed) {\n      return new Error(\"executing a cancelled action\");\n    }\n    this.pending = false;\n    var error = this._execute(state, delay2);\n    if (error) {\n      return error;\n    } else if (this.pending === false && this.id != null) {\n      this.id = this.recycleAsyncId(this.scheduler, this.id, null);\n    }\n  };\n  AsyncAction2.prototype._execute = function(state, _delay) {\n    var errored = false;\n    var errorValue;\n    try {\n      this.work(state);\n    } catch (e) {\n      errored = true;\n      errorValue = e ? e : new Error(\"Scheduled action threw falsy error\");\n    }\n    if (errored) {\n      this.unsubscribe();\n      return errorValue;\n    }\n  };\n  AsyncAction2.prototype.unsubscribe = function() {\n    if (!this.closed) {\n      var _a = this, id = _a.id, scheduler = _a.scheduler;\n      var actions = scheduler.actions;\n      this.work = this.state = this.scheduler = null;\n      this.pending = false;\n      arrRemove(actions, this);\n      if (id != null) {\n        this.id = this.recycleAsyncId(scheduler, id, null);\n      }\n      this.delay = null;\n      _super.prototype.unsubscribe.call(this);\n    }\n  };\n  return AsyncAction2;\n}(Action);\n\n// node_modules/rxjs/dist/esm5/internal/Scheduler.js\nvar Scheduler = function() {\n  function Scheduler2(schedulerActionCtor, now) {\n    if (now === void 0) {\n      now = Scheduler2.now;\n    }\n    this.schedulerActionCtor = schedulerActionCtor;\n    this.now = now;\n  }\n  Scheduler2.prototype.schedule = function(work, delay2, state) {\n    if (delay2 === void 0) {\n      delay2 = 0;\n    }\n    return new this.schedulerActionCtor(this, work).schedule(state, delay2);\n  };\n  Scheduler2.now = dateTimestampProvider.now;\n  return Scheduler2;\n}();\n\n// node_modules/rxjs/dist/esm5/internal/scheduler/AsyncScheduler.js\nvar AsyncScheduler = function(_super) {\n  __extends(AsyncScheduler2, _super);\n  function AsyncScheduler2(SchedulerAction, now) {\n    if (now === void 0) {\n      now = Scheduler.now;\n    }\n    var _this = _super.call(this, SchedulerAction, now) || this;\n    _this.actions = [];\n    _this._active = false;\n    return _this;\n  }\n  AsyncScheduler2.prototype.flush = function(action) {\n    var actions = this.actions;\n    if (this._active) {\n      actions.push(action);\n      return;\n    }\n    var error;\n    this._active = true;\n    do {\n      if (error = action.execute(action.state, action.delay)) {\n        break;\n      }\n    } while (action = actions.shift());\n    this._active = false;\n    if (error) {\n      while (action = actions.shift()) {\n        action.unsubscribe();\n      }\n      throw error;\n    }\n  };\n  return AsyncScheduler2;\n}(Scheduler);\n\n// node_modules/rxjs/dist/esm5/internal/scheduler/async.js\nvar asyncScheduler = new AsyncScheduler(AsyncAction);\nvar async = asyncScheduler;\n\n// node_modules/rxjs/dist/esm5/internal/observable/empty.js\nvar EMPTY = new Observable(function(subscriber) {\n  return subscriber.complete();\n});\n\n// node_modules/rxjs/dist/esm5/internal/util/isScheduler.js\nfunction isScheduler(value) {\n  return value && isFunction(value.schedule);\n}\n\n// node_modules/rxjs/dist/esm5/internal/util/args.js\nfunction last(arr) {\n  return arr[arr.length - 1];\n}\nfunction popResultSelector(args) {\n  return isFunction(last(args)) ? args.pop() : void 0;\n}\nfunction popScheduler(args) {\n  return isScheduler(last(args)) ? args.pop() : void 0;\n}\nfunction popNumber(args, defaultValue) {\n  return typeof last(args) === \"number\" ? args.pop() : defaultValue;\n}\n\n// node_modules/rxjs/dist/esm5/internal/util/isArrayLike.js\nvar isArrayLike = function(x) {\n  return x && typeof x.length === \"number\" && typeof x !== \"function\";\n};\n\n// node_modules/rxjs/dist/esm5/internal/util/isPromise.js\nfunction isPromise(value) {\n  return isFunction(value === null || value === void 0 ? void 0 : value.then);\n}\n\n// node_modules/rxjs/dist/esm5/internal/util/isInteropObservable.js\nfunction isInteropObservable(input) {\n  return isFunction(input[observable]);\n}\n\n// node_modules/rxjs/dist/esm5/internal/util/isAsyncIterable.js\nfunction isAsyncIterable(obj) {\n  return Symbol.asyncIterator && isFunction(obj === null || obj === void 0 ? void 0 : obj[Symbol.asyncIterator]);\n}\n\n// node_modules/rxjs/dist/esm5/internal/util/throwUnobservableError.js\nfunction createInvalidObservableTypeError(input) {\n  return new TypeError(\"You provided \" + (input !== null && typeof input === \"object\" ? \"an invalid object\" : \"'\" + input + \"'\") + \" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.\");\n}\n\n// node_modules/rxjs/dist/esm5/internal/symbol/iterator.js\nfunction getSymbolIterator() {\n  if (typeof Symbol !== \"function\" || !Symbol.iterator) {\n    return \"@@iterator\";\n  }\n  return Symbol.iterator;\n}\nvar iterator = getSymbolIterator();\n\n// node_modules/rxjs/dist/esm5/internal/util/isIterable.js\nfunction isIterable(input) {\n  return isFunction(input === null || input === void 0 ? void 0 : input[iterator]);\n}\n\n// node_modules/rxjs/dist/esm5/internal/util/isReadableStreamLike.js\nfunction readableStreamLikeToAsyncGenerator(readableStream) {\n  return __asyncGenerator(this, arguments, function readableStreamLikeToAsyncGenerator_1() {\n    var reader, _a, value, done;\n    return __generator(this, function(_b) {\n      switch (_b.label) {\n        case 0:\n          reader = readableStream.getReader();\n          _b.label = 1;\n        case 1:\n          _b.trys.push([1, , 9, 10]);\n          _b.label = 2;\n        case 2:\n          if (false) return [3, 8];\n          return [4, __await(reader.read())];\n        case 3:\n          _a = _b.sent(), value = _a.value, done = _a.done;\n          if (!done) return [3, 5];\n          return [4, __await(void 0)];\n        case 4:\n          return [2, _b.sent()];\n        case 5:\n          return [4, __await(value)];\n        case 6:\n          return [4, _b.sent()];\n        case 7:\n          _b.sent();\n          return [3, 2];\n        case 8:\n          return [3, 10];\n        case 9:\n          reader.releaseLock();\n          return [7];\n        case 10:\n          return [2];\n      }\n    });\n  });\n}\nfunction isReadableStreamLike(obj) {\n  return isFunction(obj === null || obj === void 0 ? void 0 : obj.getReader);\n}\n\n// node_modules/rxjs/dist/esm5/internal/observable/innerFrom.js\nfunction innerFrom(input) {\n  if (input instanceof Observable) {\n    return input;\n  }\n  if (input != null) {\n    if (isInteropObservable(input)) {\n      return fromInteropObservable(input);\n    }\n    if (isArrayLike(input)) {\n      return fromArrayLike(input);\n    }\n    if (isPromise(input)) {\n      return fromPromise(input);\n    }\n    if (isAsyncIterable(input)) {\n      return fromAsyncIterable(input);\n    }\n    if (isIterable(input)) {\n      return fromIterable(input);\n    }\n    if (isReadableStreamLike(input)) {\n      return fromReadableStreamLike(input);\n    }\n  }\n  throw createInvalidObservableTypeError(input);\n}\nfunction fromInteropObservable(obj) {\n  return new Observable(function(subscriber) {\n    var obs = obj[observable]();\n    if (isFunction(obs.subscribe)) {\n      return obs.subscribe(subscriber);\n    }\n    throw new TypeError(\"Provided object does not correctly implement Symbol.observable\");\n  });\n}\nfunction fromArrayLike(array) {\n  return new Observable(function(subscriber) {\n    for (var i = 0; i < array.length && !subscriber.closed; i++) {\n      subscriber.next(array[i]);\n    }\n    subscriber.complete();\n  });\n}\nfunction fromPromise(promise) {\n  return new Observable(function(subscriber) {\n    promise.then(function(value) {\n      if (!subscriber.closed) {\n        subscriber.next(value);\n        subscriber.complete();\n      }\n    }, function(err) {\n      return subscriber.error(err);\n    }).then(null, reportUnhandledError);\n  });\n}\nfunction fromIterable(iterable) {\n  return new Observable(function(subscriber) {\n    var e_1, _a;\n    try {\n      for (var iterable_1 = __values(iterable), iterable_1_1 = iterable_1.next(); !iterable_1_1.done; iterable_1_1 = iterable_1.next()) {\n        var value = iterable_1_1.value;\n        subscriber.next(value);\n        if (subscriber.closed) {\n          return;\n        }\n      }\n    } catch (e_1_1) {\n      e_1 = { error: e_1_1 };\n    } finally {\n      try {\n        if (iterable_1_1 && !iterable_1_1.done && (_a = iterable_1.return)) _a.call(iterable_1);\n      } finally {\n        if (e_1) throw e_1.error;\n      }\n    }\n    subscriber.complete();\n  });\n}\nfunction fromAsyncIterable(asyncIterable) {\n  return new Observable(function(subscriber) {\n    process(asyncIterable, subscriber).catch(function(err) {\n      return subscriber.error(err);\n    });\n  });\n}\nfunction fromReadableStreamLike(readableStream) {\n  return fromAsyncIterable(readableStreamLikeToAsyncGenerator(readableStream));\n}\nfunction process(asyncIterable, subscriber) {\n  var asyncIterable_1, asyncIterable_1_1;\n  var e_2, _a;\n  return __awaiter(this, void 0, void 0, function() {\n    var value, e_2_1;\n    return __generator(this, function(_b) {\n      switch (_b.label) {\n        case 0:\n          _b.trys.push([0, 5, 6, 11]);\n          asyncIterable_1 = __asyncValues(asyncIterable);\n          _b.label = 1;\n        case 1:\n          return [4, asyncIterable_1.next()];\n        case 2:\n          if (!(asyncIterable_1_1 = _b.sent(), !asyncIterable_1_1.done)) return [3, 4];\n          value = asyncIterable_1_1.value;\n          subscriber.next(value);\n          if (subscriber.closed) {\n            return [2];\n          }\n          _b.label = 3;\n        case 3:\n          return [3, 1];\n        case 4:\n          return [3, 11];\n        case 5:\n          e_2_1 = _b.sent();\n          e_2 = { error: e_2_1 };\n          return [3, 11];\n        case 6:\n          _b.trys.push([6, , 9, 10]);\n          if (!(asyncIterable_1_1 && !asyncIterable_1_1.done && (_a = asyncIterable_1.return))) return [3, 8];\n          return [4, _a.call(asyncIterable_1)];\n        case 7:\n          _b.sent();\n          _b.label = 8;\n        case 8:\n          return [3, 10];\n        case 9:\n          if (e_2) throw e_2.error;\n          return [7];\n        case 10:\n          return [7];\n        case 11:\n          subscriber.complete();\n          return [2];\n      }\n    });\n  });\n}\n\n// node_modules/rxjs/dist/esm5/internal/util/executeSchedule.js\nfunction executeSchedule(parentSubscription, scheduler, work, delay2, repeat) {\n  if (delay2 === void 0) {\n    delay2 = 0;\n  }\n  if (repeat === void 0) {\n    repeat = false;\n  }\n  var scheduleSubscription = scheduler.schedule(function() {\n    work();\n    if (repeat) {\n      parentSubscription.add(this.schedule(null, delay2));\n    } else {\n      this.unsubscribe();\n    }\n  }, delay2);\n  parentSubscription.add(scheduleSubscription);\n  if (!repeat) {\n    return scheduleSubscription;\n  }\n}\n\n// node_modules/rxjs/dist/esm5/internal/operators/observeOn.js\nfunction observeOn(scheduler, delay2) {\n  if (delay2 === void 0) {\n    delay2 = 0;\n  }\n  return operate(function(source, subscriber) {\n    source.subscribe(createOperatorSubscriber(subscriber, function(value) {\n      return executeSchedule(subscriber, scheduler, function() {\n        return subscriber.next(value);\n      }, delay2);\n    }, function() {\n      return executeSchedule(subscriber, scheduler, function() {\n        return subscriber.complete();\n      }, delay2);\n    }, function(err) {\n      return executeSchedule(subscriber, scheduler, function() {\n        return subscriber.error(err);\n      }, delay2);\n    }));\n  });\n}\n\n// node_modules/rxjs/dist/esm5/internal/operators/subscribeOn.js\nfunction subscribeOn(scheduler, delay2) {\n  if (delay2 === void 0) {\n    delay2 = 0;\n  }\n  return operate(function(source, subscriber) {\n    subscriber.add(scheduler.schedule(function() {\n      return source.subscribe(subscriber);\n    }, delay2));\n  });\n}\n\n// node_modules/rxjs/dist/esm5/internal/scheduled/scheduleObservable.js\nfunction scheduleObservable(input, scheduler) {\n  return innerFrom(input).pipe(subscribeOn(scheduler), observeOn(scheduler));\n}\n\n// node_modules/rxjs/dist/esm5/internal/scheduled/schedulePromise.js\nfunction schedulePromise(input, scheduler) {\n  return innerFrom(input).pipe(subscribeOn(scheduler), observeOn(scheduler));\n}\n\n// node_modules/rxjs/dist/esm5/internal/scheduled/scheduleArray.js\nfunction scheduleArray(input, scheduler) {\n  return new Observable(function(subscriber) {\n    var i = 0;\n    return scheduler.schedule(function() {\n      if (i === input.length) {\n        subscriber.complete();\n      } else {\n        subscriber.next(input[i++]);\n        if (!subscriber.closed) {\n          this.schedule();\n        }\n      }\n    });\n  });\n}\n\n// node_modules/rxjs/dist/esm5/internal/scheduled/scheduleIterable.js\nfunction scheduleIterable(input, scheduler) {\n  return new Observable(function(subscriber) {\n    var iterator2;\n    executeSchedule(subscriber, scheduler, function() {\n      iterator2 = input[iterator]();\n      executeSchedule(subscriber, scheduler, function() {\n        var _a;\n        var value;\n        var done;\n        try {\n          _a = iterator2.next(), value = _a.value, done = _a.done;\n        } catch (err) {\n          subscriber.error(err);\n          return;\n        }\n        if (done) {\n          subscriber.complete();\n        } else {\n          subscriber.next(value);\n        }\n      }, 0, true);\n    });\n    return function() {\n      return isFunction(iterator2 === null || iterator2 === void 0 ? void 0 : iterator2.return) && iterator2.return();\n    };\n  });\n}\n\n// node_modules/rxjs/dist/esm5/internal/scheduled/scheduleAsyncIterable.js\nfunction scheduleAsyncIterable(input, scheduler) {\n  if (!input) {\n    throw new Error(\"Iterable cannot be null\");\n  }\n  return new Observable(function(subscriber) {\n    executeSchedule(subscriber, scheduler, function() {\n      var iterator2 = input[Symbol.asyncIterator]();\n      executeSchedule(subscriber, scheduler, function() {\n        iterator2.next().then(function(result) {\n          if (result.done) {\n            subscriber.complete();\n          } else {\n            subscriber.next(result.value);\n          }\n        });\n      }, 0, true);\n    });\n  });\n}\n\n// node_modules/rxjs/dist/esm5/internal/scheduled/scheduleReadableStreamLike.js\nfunction scheduleReadableStreamLike(input, scheduler) {\n  return scheduleAsyncIterable(readableStreamLikeToAsyncGenerator(input), scheduler);\n}\n\n// node_modules/rxjs/dist/esm5/internal/scheduled/scheduled.js\nfunction scheduled(input, scheduler) {\n  if (input != null) {\n    if (isInteropObservable(input)) {\n      return scheduleObservable(input, scheduler);\n    }\n    if (isArrayLike(input)) {\n      return scheduleArray(input, scheduler);\n    }\n    if (isPromise(input)) {\n      return schedulePromise(input, scheduler);\n    }\n    if (isAsyncIterable(input)) {\n      return scheduleAsyncIterable(input, scheduler);\n    }\n    if (isIterable(input)) {\n      return scheduleIterable(input, scheduler);\n    }\n    if (isReadableStreamLike(input)) {\n      return scheduleReadableStreamLike(input, scheduler);\n    }\n  }\n  throw createInvalidObservableTypeError(input);\n}\n\n// node_modules/rxjs/dist/esm5/internal/observable/from.js\nfunction from(input, scheduler) {\n  return scheduler ? scheduled(input, scheduler) : innerFrom(input);\n}\n\n// node_modules/rxjs/dist/esm5/internal/observable/of.js\nfunction of() {\n  var args = [];\n  for (var _i = 0; _i < arguments.length; _i++) {\n    args[_i] = arguments[_i];\n  }\n  var scheduler = popScheduler(args);\n  return from(args, scheduler);\n}\n\n// node_modules/rxjs/dist/esm5/internal/util/EmptyError.js\nvar EmptyError = createErrorClass(function(_super) {\n  return function EmptyErrorImpl() {\n    _super(this);\n    this.name = \"EmptyError\";\n    this.message = \"no elements in sequence\";\n  };\n});\n\n// node_modules/rxjs/dist/esm5/internal/lastValueFrom.js\nfunction lastValueFrom(source, config2) {\n  var hasConfig = typeof config2 === \"object\";\n  return new Promise(function(resolve, reject) {\n    var _hasValue = false;\n    var _value;\n    source.subscribe({\n      next: function(value) {\n        _value = value;\n        _hasValue = true;\n      },\n      error: reject,\n      complete: function() {\n        if (_hasValue) {\n          resolve(_value);\n        } else if (hasConfig) {\n          resolve(config2.defaultValue);\n        } else {\n          reject(new EmptyError());\n        }\n      }\n    });\n  });\n}\n\n// node_modules/rxjs/dist/esm5/internal/firstValueFrom.js\nfunction firstValueFrom(source, config2) {\n  var hasConfig = typeof config2 === \"object\";\n  return new Promise(function(resolve, reject) {\n    var subscriber = new SafeSubscriber({\n      next: function(value) {\n        resolve(value);\n        subscriber.unsubscribe();\n      },\n      error: reject,\n      complete: function() {\n        if (hasConfig) {\n          resolve(config2.defaultValue);\n        } else {\n          reject(new EmptyError());\n        }\n      }\n    });\n    source.subscribe(subscriber);\n  });\n}\n\n// node_modules/rxjs/dist/esm5/internal/util/isDate.js\nfunction isValidDate(value) {\n  return value instanceof Date && !isNaN(value);\n}\n\n// node_modules/rxjs/dist/esm5/internal/operators/map.js\nfunction map(project, thisArg) {\n  return operate(function(source, subscriber) {\n    var index = 0;\n    source.subscribe(createOperatorSubscriber(subscriber, function(value) {\n      subscriber.next(project.call(thisArg, value, index++));\n    }));\n  });\n}\n\n// node_modules/rxjs/dist/esm5/internal/util/mapOneOrManyArgs.js\nvar isArray = Array.isArray;\nfunction callOrApply(fn, args) {\n  return isArray(args) ? fn.apply(void 0, __spreadArray([], __read(args))) : fn(args);\n}\nfunction mapOneOrManyArgs(fn) {\n  return map(function(args) {\n    return callOrApply(fn, args);\n  });\n}\n\n// node_modules/rxjs/dist/esm5/internal/util/argsArgArrayOrObject.js\nvar isArray2 = Array.isArray;\nvar getPrototypeOf = Object.getPrototypeOf;\nvar objectProto = Object.prototype;\nvar getKeys = Object.keys;\nfunction argsArgArrayOrObject(args) {\n  if (args.length === 1) {\n    var first_1 = args[0];\n    if (isArray2(first_1)) {\n      return { args: first_1, keys: null };\n    }\n    if (isPOJO(first_1)) {\n      var keys = getKeys(first_1);\n      return {\n        args: keys.map(function(key) {\n          return first_1[key];\n        }),\n        keys\n      };\n    }\n  }\n  return { args, keys: null };\n}\nfunction isPOJO(obj) {\n  return obj && typeof obj === \"object\" && getPrototypeOf(obj) === objectProto;\n}\n\n// node_modules/rxjs/dist/esm5/internal/util/createObject.js\nfunction createObject(keys, values) {\n  return keys.reduce(function(result, key, i) {\n    return result[key] = values[i], result;\n  }, {});\n}\n\n// node_modules/rxjs/dist/esm5/internal/observable/combineLatest.js\nfunction combineLatest() {\n  var args = [];\n  for (var _i = 0; _i < arguments.length; _i++) {\n    args[_i] = arguments[_i];\n  }\n  var scheduler = popScheduler(args);\n  var resultSelector = popResultSelector(args);\n  var _a = argsArgArrayOrObject(args), observables = _a.args, keys = _a.keys;\n  if (observables.length === 0) {\n    return from([], scheduler);\n  }\n  var result = new Observable(combineLatestInit(observables, scheduler, keys ? function(values) {\n    return createObject(keys, values);\n  } : identity));\n  return resultSelector ? result.pipe(mapOneOrManyArgs(resultSelector)) : result;\n}\nfunction combineLatestInit(observables, scheduler, valueTransform) {\n  if (valueTransform === void 0) {\n    valueTransform = identity;\n  }\n  return function(subscriber) {\n    maybeSchedule(scheduler, function() {\n      var length = observables.length;\n      var values = new Array(length);\n      var active = length;\n      var remainingFirstValues = length;\n      var _loop_1 = function(i2) {\n        maybeSchedule(scheduler, function() {\n          var source = from(observables[i2], scheduler);\n          var hasFirstValue = false;\n          source.subscribe(createOperatorSubscriber(subscriber, function(value) {\n            values[i2] = value;\n            if (!hasFirstValue) {\n              hasFirstValue = true;\n              remainingFirstValues--;\n            }\n            if (!remainingFirstValues) {\n              subscriber.next(valueTransform(values.slice()));\n            }\n          }, function() {\n            if (!--active) {\n              subscriber.complete();\n            }\n          }));\n        }, subscriber);\n      };\n      for (var i = 0; i < length; i++) {\n        _loop_1(i);\n      }\n    }, subscriber);\n  };\n}\nfunction maybeSchedule(scheduler, execute, subscription) {\n  if (scheduler) {\n    executeSchedule(subscription, scheduler, execute);\n  } else {\n    execute();\n  }\n}\n\n// node_modules/rxjs/dist/esm5/internal/operators/mergeInternals.js\nfunction mergeInternals(source, subscriber, project, concurrent, onBeforeNext, expand, innerSubScheduler, additionalFinalizer) {\n  var buffer = [];\n  var active = 0;\n  var index = 0;\n  var isComplete = false;\n  var checkComplete = function() {\n    if (isComplete && !buffer.length && !active) {\n      subscriber.complete();\n    }\n  };\n  var outerNext = function(value) {\n    return active < concurrent ? doInnerSub(value) : buffer.push(value);\n  };\n  var doInnerSub = function(value) {\n    expand && subscriber.next(value);\n    active++;\n    var innerComplete = false;\n    innerFrom(project(value, index++)).subscribe(createOperatorSubscriber(subscriber, function(innerValue) {\n      onBeforeNext === null || onBeforeNext === void 0 ? void 0 : onBeforeNext(innerValue);\n      if (expand) {\n        outerNext(innerValue);\n      } else {\n        subscriber.next(innerValue);\n      }\n    }, function() {\n      innerComplete = true;\n    }, void 0, function() {\n      if (innerComplete) {\n        try {\n          active--;\n          var _loop_1 = function() {\n            var bufferedValue = buffer.shift();\n            if (innerSubScheduler) {\n              executeSchedule(subscriber, innerSubScheduler, function() {\n                return doInnerSub(bufferedValue);\n              });\n            } else {\n              doInnerSub(bufferedValue);\n            }\n          };\n          while (buffer.length && active < concurrent) {\n            _loop_1();\n          }\n          checkComplete();\n        } catch (err) {\n          subscriber.error(err);\n        }\n      }\n    }));\n  };\n  source.subscribe(createOperatorSubscriber(subscriber, outerNext, function() {\n    isComplete = true;\n    checkComplete();\n  }));\n  return function() {\n    additionalFinalizer === null || additionalFinalizer === void 0 ? void 0 : additionalFinalizer();\n  };\n}\n\n// node_modules/rxjs/dist/esm5/internal/operators/mergeMap.js\nfunction mergeMap(project, resultSelector, concurrent) {\n  if (concurrent === void 0) {\n    concurrent = Infinity;\n  }\n  if (isFunction(resultSelector)) {\n    return mergeMap(function(a, i) {\n      return map(function(b, ii) {\n        return resultSelector(a, b, i, ii);\n      })(innerFrom(project(a, i)));\n    }, concurrent);\n  } else if (typeof resultSelector === \"number\") {\n    concurrent = resultSelector;\n  }\n  return operate(function(source, subscriber) {\n    return mergeInternals(source, subscriber, project, concurrent);\n  });\n}\n\n// node_modules/rxjs/dist/esm5/internal/operators/mergeAll.js\nfunction mergeAll(concurrent) {\n  if (concurrent === void 0) {\n    concurrent = Infinity;\n  }\n  return mergeMap(identity, concurrent);\n}\n\n// node_modules/rxjs/dist/esm5/internal/operators/concatAll.js\nfunction concatAll() {\n  return mergeAll(1);\n}\n\n// node_modules/rxjs/dist/esm5/internal/observable/concat.js\nfunction concat() {\n  var args = [];\n  for (var _i = 0; _i < arguments.length; _i++) {\n    args[_i] = arguments[_i];\n  }\n  return concatAll()(from(args, popScheduler(args)));\n}\n\n// node_modules/rxjs/dist/esm5/internal/observable/defer.js\nfunction defer(observableFactory) {\n  return new Observable(function(subscriber) {\n    innerFrom(observableFactory()).subscribe(subscriber);\n  });\n}\n\n// node_modules/rxjs/dist/esm5/internal/observable/forkJoin.js\nfunction forkJoin() {\n  var args = [];\n  for (var _i = 0; _i < arguments.length; _i++) {\n    args[_i] = arguments[_i];\n  }\n  var resultSelector = popResultSelector(args);\n  var _a = argsArgArrayOrObject(args), sources = _a.args, keys = _a.keys;\n  var result = new Observable(function(subscriber) {\n    var length = sources.length;\n    if (!length) {\n      subscriber.complete();\n      return;\n    }\n    var values = new Array(length);\n    var remainingCompletions = length;\n    var remainingEmissions = length;\n    var _loop_1 = function(sourceIndex2) {\n      var hasValue = false;\n      innerFrom(sources[sourceIndex2]).subscribe(createOperatorSubscriber(subscriber, function(value) {\n        if (!hasValue) {\n          hasValue = true;\n          remainingEmissions--;\n        }\n        values[sourceIndex2] = value;\n      }, function() {\n        return remainingCompletions--;\n      }, void 0, function() {\n        if (!remainingCompletions || !hasValue) {\n          if (!remainingEmissions) {\n            subscriber.next(keys ? createObject(keys, values) : values);\n          }\n          subscriber.complete();\n        }\n      }));\n    };\n    for (var sourceIndex = 0; sourceIndex < length; sourceIndex++) {\n      _loop_1(sourceIndex);\n    }\n  });\n  return resultSelector ? result.pipe(mapOneOrManyArgs(resultSelector)) : result;\n}\n\n// node_modules/rxjs/dist/esm5/internal/observable/fromEvent.js\nvar nodeEventEmitterMethods = [\"addListener\", \"removeListener\"];\nvar eventTargetMethods = [\"addEventListener\", \"removeEventListener\"];\nvar jqueryMethods = [\"on\", \"off\"];\nfunction fromEvent(target, eventName, options, resultSelector) {\n  if (isFunction(options)) {\n    resultSelector = options;\n    options = void 0;\n  }\n  if (resultSelector) {\n    return fromEvent(target, eventName, options).pipe(mapOneOrManyArgs(resultSelector));\n  }\n  var _a = __read(isEventTarget(target) ? eventTargetMethods.map(function(methodName) {\n    return function(handler) {\n      return target[methodName](eventName, handler, options);\n    };\n  }) : isNodeStyleEventEmitter(target) ? nodeEventEmitterMethods.map(toCommonHandlerRegistry(target, eventName)) : isJQueryStyleEventEmitter(target) ? jqueryMethods.map(toCommonHandlerRegistry(target, eventName)) : [], 2), add = _a[0], remove = _a[1];\n  if (!add) {\n    if (isArrayLike(target)) {\n      return mergeMap(function(subTarget) {\n        return fromEvent(subTarget, eventName, options);\n      })(innerFrom(target));\n    }\n  }\n  if (!add) {\n    throw new TypeError(\"Invalid event target\");\n  }\n  return new Observable(function(subscriber) {\n    var handler = function() {\n      var args = [];\n      for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n      }\n      return subscriber.next(1 < args.length ? args : args[0]);\n    };\n    add(handler);\n    return function() {\n      return remove(handler);\n    };\n  });\n}\nfunction toCommonHandlerRegistry(target, eventName) {\n  return function(methodName) {\n    return function(handler) {\n      return target[methodName](eventName, handler);\n    };\n  };\n}\nfunction isNodeStyleEventEmitter(target) {\n  return isFunction(target.addListener) && isFunction(target.removeListener);\n}\nfunction isJQueryStyleEventEmitter(target) {\n  return isFunction(target.on) && isFunction(target.off);\n}\nfunction isEventTarget(target) {\n  return isFunction(target.addEventListener) && isFunction(target.removeEventListener);\n}\n\n// node_modules/rxjs/dist/esm5/internal/observable/timer.js\nfunction timer(dueTime, intervalOrScheduler, scheduler) {\n  if (dueTime === void 0) {\n    dueTime = 0;\n  }\n  if (scheduler === void 0) {\n    scheduler = async;\n  }\n  var intervalDuration = -1;\n  if (intervalOrScheduler != null) {\n    if (isScheduler(intervalOrScheduler)) {\n      scheduler = intervalOrScheduler;\n    } else {\n      intervalDuration = intervalOrScheduler;\n    }\n  }\n  return new Observable(function(subscriber) {\n    var due = isValidDate(dueTime) ? +dueTime - scheduler.now() : dueTime;\n    if (due < 0) {\n      due = 0;\n    }\n    var n = 0;\n    return scheduler.schedule(function() {\n      if (!subscriber.closed) {\n        subscriber.next(n++);\n        if (0 <= intervalDuration) {\n          this.schedule(void 0, intervalDuration);\n        } else {\n          subscriber.complete();\n        }\n      }\n    }, due);\n  });\n}\n\n// node_modules/rxjs/dist/esm5/internal/observable/merge.js\nfunction merge() {\n  var args = [];\n  for (var _i = 0; _i < arguments.length; _i++) {\n    args[_i] = arguments[_i];\n  }\n  var scheduler = popScheduler(args);\n  var concurrent = popNumber(args, Infinity);\n  var sources = args;\n  return !sources.length ? EMPTY : sources.length === 1 ? innerFrom(sources[0]) : mergeAll(concurrent)(from(sources, scheduler));\n}\n\n// node_modules/rxjs/dist/esm5/internal/observable/never.js\nvar NEVER = new Observable(noop);\n\n// node_modules/rxjs/dist/esm5/internal/util/argsOrArgArray.js\nvar isArray3 = Array.isArray;\nfunction argsOrArgArray(args) {\n  return args.length === 1 && isArray3(args[0]) ? args[0] : args;\n}\n\n// node_modules/rxjs/dist/esm5/internal/operators/filter.js\nfunction filter(predicate, thisArg) {\n  return operate(function(source, subscriber) {\n    var index = 0;\n    source.subscribe(createOperatorSubscriber(subscriber, function(value) {\n      return predicate.call(thisArg, value, index++) && subscriber.next(value);\n    }));\n  });\n}\n\n// node_modules/rxjs/dist/esm5/internal/observable/race.js\nfunction race() {\n  var sources = [];\n  for (var _i = 0; _i < arguments.length; _i++) {\n    sources[_i] = arguments[_i];\n  }\n  sources = argsOrArgArray(sources);\n  return sources.length === 1 ? innerFrom(sources[0]) : new Observable(raceInit(sources));\n}\nfunction raceInit(sources) {\n  return function(subscriber) {\n    var subscriptions = [];\n    var _loop_1 = function(i2) {\n      subscriptions.push(innerFrom(sources[i2]).subscribe(createOperatorSubscriber(subscriber, function(value) {\n        if (subscriptions) {\n          for (var s = 0; s < subscriptions.length; s++) {\n            s !== i2 && subscriptions[s].unsubscribe();\n          }\n          subscriptions = null;\n        }\n        subscriber.next(value);\n      })));\n    };\n    for (var i = 0; subscriptions && !subscriber.closed && i < sources.length; i++) {\n      _loop_1(i);\n    }\n  };\n}\n\n// node_modules/rxjs/dist/esm5/internal/observable/zip.js\nfunction zip() {\n  var args = [];\n  for (var _i = 0; _i < arguments.length; _i++) {\n    args[_i] = arguments[_i];\n  }\n  var resultSelector = popResultSelector(args);\n  var sources = argsOrArgArray(args);\n  return sources.length ? new Observable(function(subscriber) {\n    var buffers = sources.map(function() {\n      return [];\n    });\n    var completed = sources.map(function() {\n      return false;\n    });\n    subscriber.add(function() {\n      buffers = completed = null;\n    });\n    var _loop_1 = function(sourceIndex2) {\n      innerFrom(sources[sourceIndex2]).subscribe(createOperatorSubscriber(subscriber, function(value) {\n        buffers[sourceIndex2].push(value);\n        if (buffers.every(function(buffer) {\n          return buffer.length;\n        })) {\n          var result = buffers.map(function(buffer) {\n            return buffer.shift();\n          });\n          subscriber.next(resultSelector ? resultSelector.apply(void 0, __spreadArray([], __read(result))) : result);\n          if (buffers.some(function(buffer, i) {\n            return !buffer.length && completed[i];\n          })) {\n            subscriber.complete();\n          }\n        }\n      }, function() {\n        completed[sourceIndex2] = true;\n        !buffers[sourceIndex2].length && subscriber.complete();\n      }));\n    };\n    for (var sourceIndex = 0; !subscriber.closed && sourceIndex < sources.length; sourceIndex++) {\n      _loop_1(sourceIndex);\n    }\n    return function() {\n      buffers = completed = null;\n    };\n  }) : EMPTY;\n}\n\n// node_modules/rxjs/dist/esm5/internal/operators/bufferCount.js\nfunction bufferCount(bufferSize, startBufferEvery) {\n  if (startBufferEvery === void 0) {\n    startBufferEvery = null;\n  }\n  startBufferEvery = startBufferEvery !== null && startBufferEvery !== void 0 ? startBufferEvery : bufferSize;\n  return operate(function(source, subscriber) {\n    var buffers = [];\n    var count = 0;\n    source.subscribe(createOperatorSubscriber(subscriber, function(value) {\n      var e_1, _a, e_2, _b;\n      var toEmit = null;\n      if (count++ % startBufferEvery === 0) {\n        buffers.push([]);\n      }\n      try {\n        for (var buffers_1 = __values(buffers), buffers_1_1 = buffers_1.next(); !buffers_1_1.done; buffers_1_1 = buffers_1.next()) {\n          var buffer = buffers_1_1.value;\n          buffer.push(value);\n          if (bufferSize <= buffer.length) {\n            toEmit = toEmit !== null && toEmit !== void 0 ? toEmit : [];\n            toEmit.push(buffer);\n          }\n        }\n      } catch (e_1_1) {\n        e_1 = { error: e_1_1 };\n      } finally {\n        try {\n          if (buffers_1_1 && !buffers_1_1.done && (_a = buffers_1.return)) _a.call(buffers_1);\n        } finally {\n          if (e_1) throw e_1.error;\n        }\n      }\n      if (toEmit) {\n        try {\n          for (var toEmit_1 = __values(toEmit), toEmit_1_1 = toEmit_1.next(); !toEmit_1_1.done; toEmit_1_1 = toEmit_1.next()) {\n            var buffer = toEmit_1_1.value;\n            arrRemove(buffers, buffer);\n            subscriber.next(buffer);\n          }\n        } catch (e_2_1) {\n          e_2 = { error: e_2_1 };\n        } finally {\n          try {\n            if (toEmit_1_1 && !toEmit_1_1.done && (_b = toEmit_1.return)) _b.call(toEmit_1);\n          } finally {\n            if (e_2) throw e_2.error;\n          }\n        }\n      }\n    }, function() {\n      var e_3, _a;\n      try {\n        for (var buffers_2 = __values(buffers), buffers_2_1 = buffers_2.next(); !buffers_2_1.done; buffers_2_1 = buffers_2.next()) {\n          var buffer = buffers_2_1.value;\n          subscriber.next(buffer);\n        }\n      } catch (e_3_1) {\n        e_3 = { error: e_3_1 };\n      } finally {\n        try {\n          if (buffers_2_1 && !buffers_2_1.done && (_a = buffers_2.return)) _a.call(buffers_2);\n        } finally {\n          if (e_3) throw e_3.error;\n        }\n      }\n      subscriber.complete();\n    }, void 0, function() {\n      buffers = null;\n    }));\n  });\n}\n\n// node_modules/rxjs/dist/esm5/internal/operators/catchError.js\nfunction catchError(selector) {\n  return operate(function(source, subscriber) {\n    var innerSub = null;\n    var syncUnsub = false;\n    var handledResult;\n    innerSub = source.subscribe(createOperatorSubscriber(subscriber, void 0, void 0, function(err) {\n      handledResult = innerFrom(selector(err, catchError(selector)(source)));\n      if (innerSub) {\n        innerSub.unsubscribe();\n        innerSub = null;\n        handledResult.subscribe(subscriber);\n      } else {\n        syncUnsub = true;\n      }\n    }));\n    if (syncUnsub) {\n      innerSub.unsubscribe();\n      innerSub = null;\n      handledResult.subscribe(subscriber);\n    }\n  });\n}\n\n// node_modules/rxjs/dist/esm5/internal/operators/concatMap.js\nfunction concatMap(project, resultSelector) {\n  return isFunction(resultSelector) ? mergeMap(project, resultSelector, 1) : mergeMap(project, 1);\n}\n\n// node_modules/rxjs/dist/esm5/internal/operators/debounceTime.js\nfunction debounceTime(dueTime, scheduler) {\n  if (scheduler === void 0) {\n    scheduler = asyncScheduler;\n  }\n  return operate(function(source, subscriber) {\n    var activeTask = null;\n    var lastValue = null;\n    var lastTime = null;\n    var emit = function() {\n      if (activeTask) {\n        activeTask.unsubscribe();\n        activeTask = null;\n        var value = lastValue;\n        lastValue = null;\n        subscriber.next(value);\n      }\n    };\n    function emitWhenIdle() {\n      var targetTime = lastTime + dueTime;\n      var now = scheduler.now();\n      if (now < targetTime) {\n        activeTask = this.schedule(void 0, targetTime - now);\n        subscriber.add(activeTask);\n        return;\n      }\n      emit();\n    }\n    source.subscribe(createOperatorSubscriber(subscriber, function(value) {\n      lastValue = value;\n      lastTime = scheduler.now();\n      if (!activeTask) {\n        activeTask = scheduler.schedule(emitWhenIdle, dueTime);\n        subscriber.add(activeTask);\n      }\n    }, function() {\n      emit();\n      subscriber.complete();\n    }, void 0, function() {\n      lastValue = activeTask = null;\n    }));\n  });\n}\n\n// node_modules/rxjs/dist/esm5/internal/operators/defaultIfEmpty.js\nfunction defaultIfEmpty(defaultValue) {\n  return operate(function(source, subscriber) {\n    var hasValue = false;\n    source.subscribe(createOperatorSubscriber(subscriber, function(value) {\n      hasValue = true;\n      subscriber.next(value);\n    }, function() {\n      if (!hasValue) {\n        subscriber.next(defaultValue);\n      }\n      subscriber.complete();\n    }));\n  });\n}\n\n// node_modules/rxjs/dist/esm5/internal/operators/take.js\nfunction take(count) {\n  return count <= 0 ? function() {\n    return EMPTY;\n  } : operate(function(source, subscriber) {\n    var seen = 0;\n    source.subscribe(createOperatorSubscriber(subscriber, function(value) {\n      if (++seen <= count) {\n        subscriber.next(value);\n        if (count <= seen) {\n          subscriber.complete();\n        }\n      }\n    }));\n  });\n}\n\n// node_modules/rxjs/dist/esm5/internal/operators/ignoreElements.js\nfunction ignoreElements() {\n  return operate(function(source, subscriber) {\n    source.subscribe(createOperatorSubscriber(subscriber, noop));\n  });\n}\n\n// node_modules/rxjs/dist/esm5/internal/operators/mapTo.js\nfunction mapTo(value) {\n  return map(function() {\n    return value;\n  });\n}\n\n// node_modules/rxjs/dist/esm5/internal/operators/delayWhen.js\nfunction delayWhen(delayDurationSelector, subscriptionDelay) {\n  if (subscriptionDelay) {\n    return function(source) {\n      return concat(subscriptionDelay.pipe(take(1), ignoreElements()), source.pipe(delayWhen(delayDurationSelector)));\n    };\n  }\n  return mergeMap(function(value, index) {\n    return innerFrom(delayDurationSelector(value, index)).pipe(take(1), mapTo(value));\n  });\n}\n\n// node_modules/rxjs/dist/esm5/internal/operators/delay.js\nfunction delay(due, scheduler) {\n  if (scheduler === void 0) {\n    scheduler = asyncScheduler;\n  }\n  var duration = timer(due, scheduler);\n  return delayWhen(function() {\n    return duration;\n  });\n}\n\n// node_modules/rxjs/dist/esm5/internal/operators/throwIfEmpty.js\nfunction throwIfEmpty(errorFactory) {\n  if (errorFactory === void 0) {\n    errorFactory = defaultErrorFactory;\n  }\n  return operate(function(source, subscriber) {\n    var hasValue = false;\n    source.subscribe(createOperatorSubscriber(subscriber, function(value) {\n      hasValue = true;\n      subscriber.next(value);\n    }, function() {\n      return hasValue ? subscriber.complete() : subscriber.error(errorFactory());\n    }));\n  });\n}\nfunction defaultErrorFactory() {\n  return new EmptyError();\n}\n\n// node_modules/rxjs/dist/esm5/internal/operators/first.js\nfunction first(predicate, defaultValue) {\n  var hasDefaultValue = arguments.length >= 2;\n  return function(source) {\n    return source.pipe(predicate ? filter(function(v, i) {\n      return predicate(v, i, source);\n    }) : identity, take(1), hasDefaultValue ? defaultIfEmpty(defaultValue) : throwIfEmpty(function() {\n      return new EmptyError();\n    }));\n  };\n}\n\n// node_modules/rxjs/dist/esm5/internal/operators/mergeScan.js\nfunction mergeScan(accumulator, seed, concurrent) {\n  if (concurrent === void 0) {\n    concurrent = Infinity;\n  }\n  return operate(function(source, subscriber) {\n    var state = seed;\n    return mergeInternals(source, subscriber, function(value, index) {\n      return accumulator(state, value, index);\n    }, concurrent, function(value) {\n      state = value;\n    }, false, void 0, function() {\n      return state = null;\n    });\n  });\n}\n\n// node_modules/rxjs/dist/esm5/internal/operators/raceWith.js\nfunction raceWith() {\n  var otherSources = [];\n  for (var _i = 0; _i < arguments.length; _i++) {\n    otherSources[_i] = arguments[_i];\n  }\n  return !otherSources.length ? identity : operate(function(source, subscriber) {\n    raceInit(__spreadArray([source], __read(otherSources)))(subscriber);\n  });\n}\n\n// node_modules/rxjs/dist/esm5/internal/operators/retry.js\nfunction retry(configOrCount) {\n  if (configOrCount === void 0) {\n    configOrCount = Infinity;\n  }\n  var config2;\n  if (configOrCount && typeof configOrCount === \"object\") {\n    config2 = configOrCount;\n  } else {\n    config2 = {\n      count: configOrCount\n    };\n  }\n  var _a = config2.count, count = _a === void 0 ? Infinity : _a, delay2 = config2.delay, _b = config2.resetOnSuccess, resetOnSuccess = _b === void 0 ? false : _b;\n  return count <= 0 ? identity : operate(function(source, subscriber) {\n    var soFar = 0;\n    var innerSub;\n    var subscribeForRetry = function() {\n      var syncUnsub = false;\n      innerSub = source.subscribe(createOperatorSubscriber(subscriber, function(value) {\n        if (resetOnSuccess) {\n          soFar = 0;\n        }\n        subscriber.next(value);\n      }, void 0, function(err) {\n        if (soFar++ < count) {\n          var resub_1 = function() {\n            if (innerSub) {\n              innerSub.unsubscribe();\n              innerSub = null;\n              subscribeForRetry();\n            } else {\n              syncUnsub = true;\n            }\n          };\n          if (delay2 != null) {\n            var notifier = typeof delay2 === \"number\" ? timer(delay2) : innerFrom(delay2(err, soFar));\n            var notifierSubscriber_1 = createOperatorSubscriber(subscriber, function() {\n              notifierSubscriber_1.unsubscribe();\n              resub_1();\n            }, function() {\n              subscriber.complete();\n            });\n            notifier.subscribe(notifierSubscriber_1);\n          } else {\n            resub_1();\n          }\n        } else {\n          subscriber.error(err);\n        }\n      }));\n      if (syncUnsub) {\n        innerSub.unsubscribe();\n        innerSub = null;\n        subscribeForRetry();\n      }\n    };\n    subscribeForRetry();\n  });\n}\n\n// node_modules/rxjs/dist/esm5/internal/operators/startWith.js\nfunction startWith() {\n  var values = [];\n  for (var _i = 0; _i < arguments.length; _i++) {\n    values[_i] = arguments[_i];\n  }\n  var scheduler = popScheduler(values);\n  return operate(function(source, subscriber) {\n    (scheduler ? concat(values, source, scheduler) : concat(values, source)).subscribe(subscriber);\n  });\n}\n\n// node_modules/rxjs/dist/esm5/internal/operators/switchMap.js\nfunction switchMap(project, resultSelector) {\n  return operate(function(source, subscriber) {\n    var innerSubscriber = null;\n    var index = 0;\n    var isComplete = false;\n    var checkComplete = function() {\n      return isComplete && !innerSubscriber && subscriber.complete();\n    };\n    source.subscribe(createOperatorSubscriber(subscriber, function(value) {\n      innerSubscriber === null || innerSubscriber === void 0 ? void 0 : innerSubscriber.unsubscribe();\n      var innerIndex = 0;\n      var outerIndex = index++;\n      innerFrom(project(value, outerIndex)).subscribe(innerSubscriber = createOperatorSubscriber(subscriber, function(innerValue) {\n        return subscriber.next(resultSelector ? resultSelector(value, innerValue, outerIndex, innerIndex++) : innerValue);\n      }, function() {\n        innerSubscriber = null;\n        checkComplete();\n      }));\n    }, function() {\n      isComplete = true;\n      checkComplete();\n    }));\n  });\n}\n\n// node_modules/rxjs/dist/esm5/internal/operators/takeUntil.js\nfunction takeUntil(notifier) {\n  return operate(function(source, subscriber) {\n    innerFrom(notifier).subscribe(createOperatorSubscriber(subscriber, function() {\n      return subscriber.complete();\n    }, noop));\n    !subscriber.closed && source.subscribe(subscriber);\n  });\n}\n\n// node_modules/rxjs/dist/esm5/internal/operators/tap.js\nfunction tap(observerOrNext, error, complete) {\n  var tapObserver = isFunction(observerOrNext) || error || complete ? { next: observerOrNext, error, complete } : observerOrNext;\n  return tapObserver ? operate(function(source, subscriber) {\n    var _a;\n    (_a = tapObserver.subscribe) === null || _a === void 0 ? void 0 : _a.call(tapObserver);\n    var isUnsub = true;\n    source.subscribe(createOperatorSubscriber(subscriber, function(value) {\n      var _a2;\n      (_a2 = tapObserver.next) === null || _a2 === void 0 ? void 0 : _a2.call(tapObserver, value);\n      subscriber.next(value);\n    }, function() {\n      var _a2;\n      isUnsub = false;\n      (_a2 = tapObserver.complete) === null || _a2 === void 0 ? void 0 : _a2.call(tapObserver);\n      subscriber.complete();\n    }, function(err) {\n      var _a2;\n      isUnsub = false;\n      (_a2 = tapObserver.error) === null || _a2 === void 0 ? void 0 : _a2.call(tapObserver, err);\n      subscriber.error(err);\n    }, function() {\n      var _a2, _b;\n      if (isUnsub) {\n        (_a2 = tapObserver.unsubscribe) === null || _a2 === void 0 ? void 0 : _a2.call(tapObserver);\n      }\n      (_b = tapObserver.finalize) === null || _b === void 0 ? void 0 : _b.call(tapObserver);\n    }));\n  }) : identity;\n}\nexport {\n  EMPTY,\n  NEVER,\n  Observable,\n  ReplaySubject,\n  bufferCount,\n  catchError,\n  combineLatest,\n  concat,\n  concatMap,\n  debounceTime,\n  defaultIfEmpty,\n  defer,\n  delay,\n  delayWhen,\n  filter,\n  first,\n  firstValueFrom,\n  forkJoin,\n  from,\n  fromEvent,\n  identity,\n  ignoreElements,\n  lastValueFrom,\n  map,\n  merge,\n  mergeMap,\n  mergeScan,\n  noop,\n  of,\n  pipe,\n  race,\n  raceWith,\n  retry,\n  startWith,\n  switchMap,\n  take,\n  takeUntil,\n  tap,\n  throwIfEmpty,\n  timer,\n  zip\n};\n","/**\nMIT License\n\nCopyright (c) 2021 Jason Miller\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all\ncopies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\nSOFTWARE.\n\n*/\n// ../../node_modules/mitt/dist/mitt.mjs\nfunction mitt_default(n) {\n  return { all: n = n || /* @__PURE__ */ new Map(), on: function(t, e) {\n    var i = n.get(t);\n    i ? i.push(e) : n.set(t, [e]);\n  }, off: function(t, e) {\n    var i = n.get(t);\n    i && (e ? i.splice(i.indexOf(e) >>> 0, 1) : n.set(t, []));\n  }, emit: function(t, e) {\n    var i = n.get(t);\n    i && i.slice().map(function(n2) {\n      n2(e);\n    }), (i = n.get(\"*\")) && i.slice().map(function(n2) {\n      n2(t, e);\n    });\n  } };\n}\nexport {\n  mitt_default as default\n};\n","/**\n * @license\n * Copyright 2023 Google Inc.\n * SPDX-License-Identifier: Apache-2.0\n */\nSymbol.dispose ??= Symbol('dispose');\nSymbol.asyncDispose ??= Symbol('asyncDispose');\n/**\n * @internal\n */\nexport const disposeSymbol = Symbol.dispose;\n/**\n * @internal\n */\nexport const asyncDisposeSymbol = Symbol.asyncDispose;\n/**\n * @internal\n */\nexport class DisposableStack {\n    #disposed = false;\n    #stack = [];\n    /**\n     * Returns a value indicating whether this stack has been disposed.\n     */\n    get disposed() {\n        return this.#disposed;\n    }\n    /**\n     * Disposes each resource in the stack in the reverse order that they were added.\n     */\n    dispose() {\n        if (this.#disposed) {\n            return;\n        }\n        this.#disposed = true;\n        for (const resource of this.#stack.reverse()) {\n            resource[disposeSymbol]();\n        }\n    }\n    /**\n     * Adds a disposable resource to the stack, returning the resource.\n     *\n     * @param value - The resource to add. `null` and `undefined` will not be added,\n     * but will be returned.\n     * @returns The provided `value`.\n     */\n    use(value) {\n        if (value) {\n            this.#stack.push(value);\n        }\n        return value;\n    }\n    /**\n     * Adds a value and associated disposal callback as a resource to the stack.\n     *\n     * @param value - The value to add.\n     * @param onDispose - The callback to use in place of a `[disposeSymbol]()`\n     * method. Will be invoked with `value` as the first parameter.\n     * @returns The provided `value`.\n     */\n    adopt(value, onDispose) {\n        this.#stack.push({\n            [disposeSymbol]() {\n                onDispose(value);\n            },\n        });\n        return value;\n    }\n    /**\n     * Adds a callback to be invoked when the stack is disposed.\n     */\n    defer(onDispose) {\n        this.#stack.push({\n            [disposeSymbol]() {\n                onDispose();\n            },\n        });\n    }\n    /**\n     * Move all resources out of this stack and into a new `DisposableStack`, and\n     * marks this stack as disposed.\n     *\n     * @example\n     *\n     * ```ts\n     * class C {\n     *   #res1: Disposable;\n     *   #res2: Disposable;\n     *   #disposables: DisposableStack;\n     *   constructor() {\n     *     // stack will be disposed when exiting constructor for any reason\n     *     using stack = new DisposableStack();\n     *\n     *     // get first resource\n     *     this.#res1 = stack.use(getResource1());\n     *\n     *     // get second resource. If this fails, both `stack` and `#res1` will be disposed.\n     *     this.#res2 = stack.use(getResource2());\n     *\n     *     // all operations succeeded, move resources out of `stack` so that\n     *     // they aren't disposed when constructor exits\n     *     this.#disposables = stack.move();\n     *   }\n     *\n     *   [disposeSymbol]() {\n     *     this.#disposables.dispose();\n     *   }\n     * }\n     * ```\n     */\n    move() {\n        if (this.#disposed) {\n            throw new ReferenceError('a disposed stack can not use anything new'); // step 3\n        }\n        const stack = new DisposableStack(); // step 4-5\n        stack.#stack = this.#stack;\n        this.#disposed = true;\n        return stack;\n    }\n    [disposeSymbol] = this.dispose;\n    [Symbol.toStringTag] = 'DisposableStack';\n}\n/**\n * @internal\n */\nexport class AsyncDisposableStack {\n    #disposed = false;\n    #stack = [];\n    /**\n     * Returns a value indicating whether this stack has been disposed.\n     */\n    get disposed() {\n        return this.#disposed;\n    }\n    /**\n     * Disposes each resource in the stack in the reverse order that they were added.\n     */\n    async dispose() {\n        if (this.#disposed) {\n            return;\n        }\n        this.#disposed = true;\n        for (const resource of this.#stack.reverse()) {\n            await resource[asyncDisposeSymbol]();\n        }\n    }\n    /**\n     * Adds a disposable resource to the stack, returning the resource.\n     *\n     * @param value - The resource to add. `null` and `undefined` will not be added,\n     * but will be returned.\n     * @returns The provided `value`.\n     */\n    use(value) {\n        if (value) {\n            this.#stack.push(value);\n        }\n        return value;\n    }\n    /**\n     * Adds a value and associated disposal callback as a resource to the stack.\n     *\n     * @param value - The value to add.\n     * @param onDispose - The callback to use in place of a `[disposeSymbol]()`\n     * method. Will be invoked with `value` as the first parameter.\n     * @returns The provided `value`.\n     */\n    adopt(value, onDispose) {\n        this.#stack.push({\n            [asyncDisposeSymbol]() {\n                return onDispose(value);\n            },\n        });\n        return value;\n    }\n    /**\n     * Adds a callback to be invoked when the stack is disposed.\n     */\n    defer(onDispose) {\n        this.#stack.push({\n            [asyncDisposeSymbol]() {\n                return onDispose();\n            },\n        });\n    }\n    /**\n     * Move all resources out of this stack and into a new `DisposableStack`, and\n     * marks this stack as disposed.\n     *\n     * @example\n     *\n     * ```ts\n     * class C {\n     *   #res1: Disposable;\n     *   #res2: Disposable;\n     *   #disposables: DisposableStack;\n     *   constructor() {\n     *     // stack will be disposed when exiting constructor for any reason\n     *     using stack = new DisposableStack();\n     *\n     *     // get first resource\n     *     this.#res1 = stack.use(getResource1());\n     *\n     *     // get second resource. If this fails, both `stack` and `#res1` will be disposed.\n     *     this.#res2 = stack.use(getResource2());\n     *\n     *     // all operations succeeded, move resources out of `stack` so that\n     *     // they aren't disposed when constructor exits\n     *     this.#disposables = stack.move();\n     *   }\n     *\n     *   [disposeSymbol]() {\n     *     this.#disposables.dispose();\n     *   }\n     * }\n     * ```\n     */\n    move() {\n        if (this.#disposed) {\n            throw new ReferenceError('a disposed stack can not use anything new'); // step 3\n        }\n        const stack = new AsyncDisposableStack(); // step 4-5\n        stack.#stack = this.#stack;\n        this.#disposed = true;\n        return stack;\n    }\n    [asyncDisposeSymbol] = this.dispose;\n    [Symbol.toStringTag] = 'AsyncDisposableStack';\n}\n//# sourceMappingURL=disposable.js.map","/**\n * @license\n * Copyright 2022 Google Inc.\n * SPDX-License-Identifier: Apache-2.0\n */\nimport mitt from '../../third_party/mitt/mitt.js';\nimport { disposeSymbol } from '../util/disposable.js';\n/**\n * The EventEmitter class that many Puppeteer classes extend.\n *\n * @remarks\n *\n * This allows you to listen to events that Puppeteer classes fire and act\n * accordingly. Therefore you'll mostly use {@link EventEmitter.on | on} and\n * {@link EventEmitter.off | off} to bind\n * and unbind to event listeners.\n *\n * @public\n */\nexport class EventEmitter {\n    #emitter;\n    #handlers = new Map();\n    /**\n     * If you pass an emitter, the returned emitter will wrap the passed emitter.\n     *\n     * @internal\n     */\n    constructor(emitter = mitt(new Map())) {\n        this.#emitter = emitter;\n    }\n    /**\n     * Bind an event listener to fire when an event occurs.\n     * @param type - the event type you'd like to listen to. Can be a string or symbol.\n     * @param handler - the function to be called when the event occurs.\n     * @returns `this` to enable you to chain method calls.\n     */\n    on(type, handler) {\n        const handlers = this.#handlers.get(type);\n        if (handlers === undefined) {\n            this.#handlers.set(type, [handler]);\n        }\n        else {\n            handlers.push(handler);\n        }\n        this.#emitter.on(type, handler);\n        return this;\n    }\n    /**\n     * Remove an event listener from firing.\n     * @param type - the event type you'd like to stop listening to.\n     * @param handler - the function that should be removed.\n     * @returns `this` to enable you to chain method calls.\n     */\n    off(type, handler) {\n        const handlers = this.#handlers.get(type) ?? [];\n        if (handler === undefined) {\n            for (const handler of handlers) {\n                this.#emitter.off(type, handler);\n            }\n            this.#handlers.delete(type);\n            return this;\n        }\n        const index = handlers.lastIndexOf(handler);\n        if (index > -1) {\n            this.#emitter.off(type, ...handlers.splice(index, 1));\n        }\n        return this;\n    }\n    /**\n     * Emit an event and call any associated listeners.\n     *\n     * @param type - the event you'd like to emit\n     * @param eventData - any data you'd like to emit with the event\n     * @returns `true` if there are any listeners, `false` if there are not.\n     */\n    emit(type, event) {\n        this.#emitter.emit(type, event);\n        return this.listenerCount(type) > 0;\n    }\n    /**\n     * Like `on` but the listener will only be fired once and then it will be removed.\n     * @param type - the event you'd like to listen to\n     * @param handler - the handler function to run when the event occurs\n     * @returns `this` to enable you to chain method calls.\n     */\n    once(type, handler) {\n        const onceHandler = eventData => {\n            handler(eventData);\n            this.off(type, onceHandler);\n        };\n        return this.on(type, onceHandler);\n    }\n    /**\n     * Gets the number of listeners for a given event.\n     *\n     * @param type - the event to get the listener count for\n     * @returns the number of listeners bound to the given event\n     */\n    listenerCount(type) {\n        return this.#handlers.get(type)?.length || 0;\n    }\n    /**\n     * Removes all listeners. If given an event argument, it will remove only\n     * listeners for that event.\n     *\n     * @param type - the event to remove listeners for.\n     * @returns `this` to enable you to chain method calls.\n     */\n    removeAllListeners(type) {\n        if (type !== undefined) {\n            return this.off(type);\n        }\n        this[disposeSymbol]();\n        return this;\n    }\n    /**\n     * @internal\n     */\n    [disposeSymbol]() {\n        for (const [type, handlers] of this.#handlers) {\n            for (const handler of handlers) {\n                this.#emitter.off(type, handler);\n            }\n        }\n        this.#handlers.clear();\n    }\n}\n//# sourceMappingURL=EventEmitter.js.map","/**\n * @license\n * Copyright 2020 Google Inc.\n * SPDX-License-Identifier: Apache-2.0\n */\n/**\n * @internal\n */\nexport const isNode = !!(typeof process !== 'undefined' && process.version);\n/**\n * Holder for environment dependencies. These dependencies cannot\n * be used during the module instantiation.\n */\nexport const environment = {\n    value: {\n        get fs() {\n            throw new Error('fs is not available in this environment');\n        },\n        get path() {\n            throw new Error('path is not available in this environment');\n        },\n        get ScreenRecorder() {\n            throw new Error('ScreenRecorder is not available in this environment');\n        },\n    },\n};\n//# sourceMappingURL=environment.js.map","/**\n * @internal\n */\nexport const packageVersion = '23.6.0';\n//# sourceMappingURL=version.js.map","/**\n * @license\n * Copyright 2020 Google Inc.\n * SPDX-License-Identifier: Apache-2.0\n */\n/**\n * Asserts that the given value is truthy.\n * @param value - some conditional statement\n * @param message - the error message to throw if the value is not truthy.\n *\n * @internal\n */\nexport const assert = (value, message) => {\n    if (!value) {\n        throw new Error(message);\n    }\n};\n//# sourceMappingURL=assert.js.map","/**\n * @license\n * Copyright 2024 Google Inc.\n * SPDX-License-Identifier: Apache-2.0\n */\n/**\n * @internal\n */\nexport function stringToTypedArray(string, base64Encoded = false) {\n    if (base64Encoded) {\n        const binaryString = atob(string);\n        // @ts-expect-error There are non-proper overloads\n        return Uint8Array.from(binaryString, m => {\n            return m.codePointAt(0);\n        });\n    }\n    return new TextEncoder().encode(string);\n}\n/**\n * @internal\n */\nexport function stringToBase64(str) {\n    return typedArrayToBase64(new TextEncoder().encode(str));\n}\n/**\n * @internal\n */\nexport function typedArrayToBase64(typedArray) {\n    // chunkSize should be less V8 limit on number of arguments!\n    // https://github.com/v8/v8/blob/d3de848bea727518aee94dd2fd42ba0b62037a27/src/objects/code.h#L444\n    const chunkSize = 65534;\n    const chunks = [];\n    for (let i = 0; i < typedArray.length; i += chunkSize) {\n        const chunk = typedArray.subarray(i, i + chunkSize);\n        chunks.push(String.fromCodePoint.apply(null, chunk));\n    }\n    const binaryString = chunks.join('');\n    return btoa(binaryString);\n}\n/**\n * @internal\n */\nexport function mergeUint8Arrays(items) {\n    let length = 0;\n    for (const item of items) {\n        length += item.length;\n    }\n    // Create a new array with total length and merge all source arrays.\n    const result = new Uint8Array(length);\n    let offset = 0;\n    for (const item of items) {\n        result.set(item, offset);\n        offset += item.length;\n    }\n    return result;\n}\n//# sourceMappingURL=encoding.js.map","/**\n * @license\n * Copyright 2020 Google Inc.\n * SPDX-License-Identifier: Apache-2.0\n */\nimport { isNode } from '../environment.js';\n/**\n * @internal\n */\nlet debugModule = null;\n/**\n * @internal\n */\nexport async function importDebug() {\n    if (!debugModule) {\n        debugModule = (await import('debug')).default;\n    }\n    return debugModule;\n}\n/**\n * A debug function that can be used in any environment.\n *\n * @remarks\n * If used in Node, it falls back to the\n * {@link https://www.npmjs.com/package/debug | debug module}. In the browser it\n * uses `console.log`.\n *\n * In Node, use the `DEBUG` environment variable to control logging:\n *\n * ```\n * DEBUG=* // logs all channels\n * DEBUG=foo // logs the `foo` channel\n * DEBUG=foo* // logs any channels starting with `foo`\n * ```\n *\n * In the browser, set `window.__PUPPETEER_DEBUG` to a string:\n *\n * ```\n * window.__PUPPETEER_DEBUG='*'; // logs all channels\n * window.__PUPPETEER_DEBUG='foo'; // logs the `foo` channel\n * window.__PUPPETEER_DEBUG='foo*'; // logs any channels starting with `foo`\n * ```\n *\n * @example\n *\n * ```\n * const log = debug('Page');\n *\n * log('new page created')\n * // logs \"Page: new page created\"\n * ```\n *\n * @param prefix - this will be prefixed to each log.\n * @returns a function that can be called to log to that debug channel.\n *\n * @internal\n */\nexport const debug = (prefix) => {\n    if (isNode) {\n        return async (...logArgs) => {\n            if (captureLogs) {\n                capturedLogs.push(prefix + logArgs);\n            }\n            (await importDebug())(prefix)(logArgs);\n        };\n    }\n    return (...logArgs) => {\n        const debugLevel = globalThis.__PUPPETEER_DEBUG;\n        if (!debugLevel) {\n            return;\n        }\n        const everythingShouldBeLogged = debugLevel === '*';\n        const prefixMatchesDebugLevel = everythingShouldBeLogged ||\n            /**\n             * If the debug level is `foo*`, that means we match any prefix that\n             * starts with `foo`. If the level is `foo`, we match only the prefix\n             * `foo`.\n             */\n            (debugLevel.endsWith('*')\n                ? prefix.startsWith(debugLevel)\n                : prefix === debugLevel);\n        if (!prefixMatchesDebugLevel) {\n            return;\n        }\n        // eslint-disable-next-line no-console\n        console.log(`${prefix}:`, ...logArgs);\n    };\n};\n/**\n * @internal\n */\nlet capturedLogs = [];\n/**\n * @internal\n */\nlet captureLogs = false;\n/**\n * @internal\n */\nexport function setLogCapture(value) {\n    capturedLogs = [];\n    captureLogs = value;\n}\n/**\n * @internal\n */\nexport function getCapturedLogs() {\n    return capturedLogs;\n}\n//# sourceMappingURL=Debug.js.map","/**\n * @license\n * Copyright 2018 Google Inc.\n * SPDX-License-Identifier: Apache-2.0\n */\n/**\n * The base class for all Puppeteer-specific errors\n *\n * @public\n */\nexport class PuppeteerError extends Error {\n    /**\n     * @internal\n     */\n    constructor(message, options) {\n        super(message, options);\n        this.name = this.constructor.name;\n    }\n    /**\n     * @internal\n     */\n    get [Symbol.toStringTag]() {\n        return this.constructor.name;\n    }\n}\n/**\n * TimeoutError is emitted whenever certain operations are terminated due to\n * timeout.\n *\n * @remarks\n * Example operations are {@link Page.waitForSelector | page.waitForSelector} or\n * {@link PuppeteerNode.launch | puppeteer.launch}.\n *\n * @public\n */\nexport class TimeoutError extends PuppeteerError {\n}\n/**\n * ProtocolError is emitted whenever there is an error from the protocol.\n *\n * @public\n */\nexport class ProtocolError extends PuppeteerError {\n    #code;\n    #originalMessage = '';\n    set code(code) {\n        this.#code = code;\n    }\n    /**\n     * @readonly\n     * @public\n     */\n    get code() {\n        return this.#code;\n    }\n    set originalMessage(originalMessage) {\n        this.#originalMessage = originalMessage;\n    }\n    /**\n     * @readonly\n     * @public\n     */\n    get originalMessage() {\n        return this.#originalMessage;\n    }\n}\n/**\n * Puppeteer will throw this error if a method is not\n * supported by the currently used protocol\n *\n * @public\n */\nexport class UnsupportedOperation extends PuppeteerError {\n}\n/**\n * @internal\n */\nexport class TargetCloseError extends ProtocolError {\n}\n//# sourceMappingURL=Errors.js.map","/**\n * @license\n * Copyright 2020 Google Inc.\n * SPDX-License-Identifier: Apache-2.0\n */\n/**\n * @internal\n */\nexport const paperFormats = {\n    letter: { width: 8.5, height: 11 },\n    legal: { width: 8.5, height: 14 },\n    tabloid: { width: 11, height: 17 },\n    ledger: { width: 17, height: 11 },\n    a0: { width: 33.1102, height: 46.811 },\n    a1: { width: 23.3858, height: 33.1102 },\n    a2: { width: 16.5354, height: 23.3858 },\n    a3: { width: 11.6929, height: 16.5354 },\n    a4: { width: 8.2677, height: 11.6929 },\n    a5: { width: 5.8268, height: 8.2677 },\n    a6: { width: 4.1339, height: 5.8268 },\n};\n//# sourceMappingURL=PDFOptions.js.map","/**\n * @license\n * Copyright 2017 Google Inc.\n * SPDX-License-Identifier: Apache-2.0\n */\nimport { filter, from, fromEvent, map, mergeMap, NEVER, Observable, timer, } from '../../third_party/rxjs/rxjs.js';\nimport { environment } from '../environment.js';\nimport { packageVersion } from '../generated/version.js';\nimport { assert } from '../util/assert.js';\nimport { mergeUint8Arrays } from '../util/encoding.js';\nimport { debug } from './Debug.js';\nimport { TimeoutError } from './Errors.js';\nimport { paperFormats } from './PDFOptions.js';\n/**\n * @internal\n */\nexport const debugError = debug('puppeteer:error');\n/**\n * @internal\n */\nexport const DEFAULT_VIEWPORT = Object.freeze({ width: 800, height: 600 });\n/**\n * @internal\n */\nconst SOURCE_URL = Symbol('Source URL for Puppeteer evaluation scripts');\n/**\n * @internal\n */\nexport class PuppeteerURL {\n    static INTERNAL_URL = 'pptr:internal';\n    static fromCallSite(functionName, site) {\n        const url = new PuppeteerURL();\n        url.#functionName = functionName;\n        url.#siteString = site.toString();\n        return url;\n    }\n    static parse = (url) => {\n        url = url.slice('pptr:'.length);\n        const [functionName = '', siteString = ''] = url.split(';');\n        const puppeteerUrl = new PuppeteerURL();\n        puppeteerUrl.#functionName = functionName;\n        puppeteerUrl.#siteString = decodeURIComponent(siteString);\n        return puppeteerUrl;\n    };\n    static isPuppeteerURL = (url) => {\n        return url.startsWith('pptr:');\n    };\n    #functionName;\n    #siteString;\n    get functionName() {\n        return this.#functionName;\n    }\n    get siteString() {\n        return this.#siteString;\n    }\n    toString() {\n        return `pptr:${[\n            this.#functionName,\n            encodeURIComponent(this.#siteString),\n        ].join(';')}`;\n    }\n}\n/**\n * @internal\n */\nexport const withSourcePuppeteerURLIfNone = (functionName, object) => {\n    if (Object.prototype.hasOwnProperty.call(object, SOURCE_URL)) {\n        return object;\n    }\n    const original = Error.prepareStackTrace;\n    Error.prepareStackTrace = (_, stack) => {\n        // First element is the function.\n        // Second element is the caller of this function.\n        // Third element is the caller of the caller of this function\n        // which is precisely what we want.\n        return stack[2];\n    };\n    const site = new Error().stack;\n    Error.prepareStackTrace = original;\n    return Object.assign(object, {\n        [SOURCE_URL]: PuppeteerURL.fromCallSite(functionName, site),\n    });\n};\n/**\n * @internal\n */\nexport const getSourcePuppeteerURLIfAvailable = (object) => {\n    if (Object.prototype.hasOwnProperty.call(object, SOURCE_URL)) {\n        return object[SOURCE_URL];\n    }\n    return undefined;\n};\n/**\n * @internal\n */\nexport const isString = (obj) => {\n    return typeof obj === 'string' || obj instanceof String;\n};\n/**\n * @internal\n */\nexport const isNumber = (obj) => {\n    return typeof obj === 'number' || obj instanceof Number;\n};\n/**\n * @internal\n */\nexport const isPlainObject = (obj) => {\n    return typeof obj === 'object' && obj?.constructor === Object;\n};\n/**\n * @internal\n */\nexport const isRegExp = (obj) => {\n    return typeof obj === 'object' && obj?.constructor === RegExp;\n};\n/**\n * @internal\n */\nexport const isDate = (obj) => {\n    return typeof obj === 'object' && obj?.constructor === Date;\n};\n/**\n * @internal\n */\nexport function evaluationString(fun, ...args) {\n    if (isString(fun)) {\n        assert(args.length === 0, 'Cannot evaluate a string with arguments');\n        return fun;\n    }\n    function serializeArgument(arg) {\n        if (Object.is(arg, undefined)) {\n            return 'undefined';\n        }\n        return JSON.stringify(arg);\n    }\n    return `(${fun})(${args.map(serializeArgument).join(',')})`;\n}\n/**\n * @internal\n */\nexport async function getReadableAsTypedArray(readable, path) {\n    const buffers = [];\n    const reader = readable.getReader();\n    if (path) {\n        const fileHandle = await environment.value.fs.promises.open(path, 'w+');\n        try {\n            while (true) {\n                const { done, value } = await reader.read();\n                if (done) {\n                    break;\n                }\n                buffers.push(value);\n                await fileHandle.writeFile(value);\n            }\n        }\n        finally {\n            await fileHandle.close();\n        }\n    }\n    else {\n        while (true) {\n            const { done, value } = await reader.read();\n            if (done) {\n                break;\n            }\n            buffers.push(value);\n        }\n    }\n    try {\n        const concat = mergeUint8Arrays(buffers);\n        if (concat.length === 0) {\n            return null;\n        }\n        return concat;\n    }\n    catch (error) {\n        debugError(error);\n        return null;\n    }\n}\n/**\n * @internal\n */\n/**\n * @internal\n */\nexport async function getReadableFromProtocolStream(client, handle) {\n    return new ReadableStream({\n        async pull(controller) {\n            function getUnit8Array(data, isBase64) {\n                if (isBase64) {\n                    return Uint8Array.from(atob(data), m => {\n                        return m.codePointAt(0);\n                    });\n                }\n                const encoder = new TextEncoder();\n                return encoder.encode(data);\n            }\n            const { data, base64Encoded, eof } = await client.send('IO.read', {\n                handle,\n            });\n            controller.enqueue(getUnit8Array(data, base64Encoded ?? false));\n            if (eof) {\n                await client.send('IO.close', { handle });\n                controller.close();\n            }\n        },\n    });\n}\n/**\n * @internal\n */\nexport function validateDialogType(type) {\n    let dialogType = null;\n    const validDialogTypes = new Set([\n        'alert',\n        'confirm',\n        'prompt',\n        'beforeunload',\n    ]);\n    if (validDialogTypes.has(type)) {\n        dialogType = type;\n    }\n    assert(dialogType, `Unknown javascript dialog type: ${type}`);\n    return dialogType;\n}\n/**\n * @internal\n */\nexport function timeout(ms, cause) {\n    return ms === 0\n        ? NEVER\n        : timer(ms).pipe(map(() => {\n            throw new TimeoutError(`Timed out after waiting ${ms}ms`, { cause });\n        }));\n}\n/**\n * @internal\n */\nexport const UTILITY_WORLD_NAME = '__puppeteer_utility_world__' + packageVersion;\n/**\n * @internal\n */\nexport const SOURCE_URL_REGEX = /^[\\x20\\t]*\\/\\/[@#] sourceURL=\\s{0,10}(\\S*?)\\s{0,10}$/m;\n/**\n * @internal\n */\nexport function getSourceUrlComment(url) {\n    return `//# sourceURL=${url}`;\n}\n/**\n * @internal\n */\nexport const NETWORK_IDLE_TIME = 500;\n/**\n * @internal\n */\nexport function parsePDFOptions(options = {}, lengthUnit = 'in') {\n    const defaults = {\n        scale: 1,\n        displayHeaderFooter: false,\n        headerTemplate: '',\n        footerTemplate: '',\n        printBackground: false,\n        landscape: false,\n        pageRanges: '',\n        preferCSSPageSize: false,\n        omitBackground: false,\n        outline: false,\n        tagged: true,\n        waitForFonts: true,\n    };\n    let width = 8.5;\n    let height = 11;\n    if (options.format) {\n        const format = paperFormats[options.format.toLowerCase()];\n        assert(format, 'Unknown paper format: ' + options.format);\n        width = format.width;\n        height = format.height;\n    }\n    else {\n        width = convertPrintParameterToInches(options.width, lengthUnit) ?? width;\n        height =\n            convertPrintParameterToInches(options.height, lengthUnit) ?? height;\n    }\n    const margin = {\n        top: convertPrintParameterToInches(options.margin?.top, lengthUnit) || 0,\n        left: convertPrintParameterToInches(options.margin?.left, lengthUnit) || 0,\n        bottom: convertPrintParameterToInches(options.margin?.bottom, lengthUnit) || 0,\n        right: convertPrintParameterToInches(options.margin?.right, lengthUnit) || 0,\n    };\n    // Quirk https://bugs.chromium.org/p/chromium/issues/detail?id=840455#c44\n    if (options.outline) {\n        options.tagged = true;\n    }\n    return {\n        ...defaults,\n        ...options,\n        width,\n        height,\n        margin,\n    };\n}\n/**\n * @internal\n */\nexport const unitToPixels = {\n    px: 1,\n    in: 96,\n    cm: 37.8,\n    mm: 3.78,\n};\nfunction convertPrintParameterToInches(parameter, lengthUnit = 'in') {\n    if (typeof parameter === 'undefined') {\n        return undefined;\n    }\n    let pixels;\n    if (isNumber(parameter)) {\n        // Treat numbers as pixel values to be aligned with phantom's paperSize.\n        pixels = parameter;\n    }\n    else if (isString(parameter)) {\n        const text = parameter;\n        let unit = text.substring(text.length - 2).toLowerCase();\n        let valueText = '';\n        if (unit in unitToPixels) {\n            valueText = text.substring(0, text.length - 2);\n        }\n        else {\n            // In case of unknown unit try to parse the whole parameter as number of pixels.\n            // This is consistent with phantom's paperSize behavior.\n            unit = 'px';\n            valueText = text;\n        }\n        const value = Number(valueText);\n        assert(!isNaN(value), 'Failed to parse parameter value: ' + text);\n        pixels = value * unitToPixels[unit];\n    }\n    else {\n        throw new Error('page.pdf() Cannot handle parameter type: ' + typeof parameter);\n    }\n    return pixels / unitToPixels[lengthUnit];\n}\n/**\n * @internal\n */\nexport function fromEmitterEvent(emitter, eventName) {\n    return new Observable(subscriber => {\n        const listener = (event) => {\n            subscriber.next(event);\n        };\n        emitter.on(eventName, listener);\n        return () => {\n            emitter.off(eventName, listener);\n        };\n    });\n}\n/**\n * @internal\n */\nexport function fromAbortSignal(signal, cause) {\n    return signal\n        ? fromEvent(signal, 'abort').pipe(map(() => {\n            if (signal.reason instanceof Error) {\n                signal.reason.cause = cause;\n                throw signal.reason;\n            }\n            throw new Error(signal.reason, { cause });\n        }))\n        : NEVER;\n}\n/**\n * @internal\n */\nexport function filterAsync(predicate) {\n    return mergeMap((value) => {\n        return from(Promise.resolve(predicate(value))).pipe(filter(isMatch => {\n            return isMatch;\n        }), map(() => {\n            return value;\n        }));\n    });\n}\n//# sourceMappingURL=util.js.map","import { firstValueFrom, from, merge, raceWith, } from '../../third_party/rxjs/rxjs.js';\nimport { EventEmitter } from '../common/EventEmitter.js';\nimport { debugError, fromEmitterEvent, filterAsync, timeout, fromAbortSignal, } from '../common/util.js';\nimport { asyncDisposeSymbol, disposeSymbol } from '../util/disposable.js';\n/**\n * @internal\n */\nexport const WEB_PERMISSION_TO_PROTOCOL_PERMISSION = new Map([\n    ['geolocation', 'geolocation'],\n    ['midi', 'midi'],\n    ['notifications', 'notifications'],\n    // TODO: push isn't a valid type?\n    // ['push', 'push'],\n    ['camera', 'videoCapture'],\n    ['microphone', 'audioCapture'],\n    ['background-sync', 'backgroundSync'],\n    ['ambient-light-sensor', 'sensors'],\n    ['accelerometer', 'sensors'],\n    ['gyroscope', 'sensors'],\n    ['magnetometer', 'sensors'],\n    ['accessibility-events', 'accessibilityEvents'],\n    ['clipboard-read', 'clipboardReadWrite'],\n    ['clipboard-write', 'clipboardReadWrite'],\n    ['clipboard-sanitized-write', 'clipboardSanitizedWrite'],\n    ['payment-handler', 'paymentHandler'],\n    ['persistent-storage', 'durableStorage'],\n    ['idle-detection', 'idleDetection'],\n    // chrome-specific permissions we have.\n    ['midi-sysex', 'midiSysex'],\n]);\n/**\n * {@link Browser} represents a browser instance that is either:\n *\n * - connected to via {@link Puppeteer.connect} or\n * - launched by {@link PuppeteerNode.launch}.\n *\n * {@link Browser} {@link EventEmitter.emit | emits} various events which are\n * documented in the {@link BrowserEvent} enum.\n *\n * @example Using a {@link Browser} to create a {@link Page}:\n *\n * ```ts\n * import puppeteer from 'puppeteer';\n *\n * const browser = await puppeteer.launch();\n * const page = await browser.newPage();\n * await page.goto('https://example.com');\n * await browser.close();\n * ```\n *\n * @example Disconnecting from and reconnecting to a {@link Browser}:\n *\n * ```ts\n * import puppeteer from 'puppeteer';\n *\n * const browser = await puppeteer.launch();\n * // Store the endpoint to be able to reconnect to the browser.\n * const browserWSEndpoint = browser.wsEndpoint();\n * // Disconnect puppeteer from the browser.\n * await browser.disconnect();\n *\n * // Use the endpoint to reestablish a connection\n * const browser2 = await puppeteer.connect({browserWSEndpoint});\n * // Close the browser.\n * await browser2.close();\n * ```\n *\n * @public\n */\nexport class Browser extends EventEmitter {\n    /**\n     * @internal\n     */\n    constructor() {\n        super();\n    }\n    /**\n     * Waits until a {@link Target | target} matching the given `predicate`\n     * appears and returns it.\n     *\n     * This will look all open {@link BrowserContext | browser contexts}.\n     *\n     * @example Finding a target for a page opened via `window.open`:\n     *\n     * ```ts\n     * await page.evaluate(() => window.open('https://www.example.com/'));\n     * const newWindowTarget = await browser.waitForTarget(\n     *   target => target.url() === 'https://www.example.com/'\n     * );\n     * ```\n     */\n    async waitForTarget(predicate, options = {}) {\n        const { timeout: ms = 30000, signal } = options;\n        return await firstValueFrom(merge(fromEmitterEvent(this, \"targetcreated\" /* BrowserEvent.TargetCreated */), fromEmitterEvent(this, \"targetchanged\" /* BrowserEvent.TargetChanged */), from(this.targets())).pipe(filterAsync(predicate), raceWith(fromAbortSignal(signal), timeout(ms))));\n    }\n    /**\n     * Gets a list of all open {@link Page | pages} inside this {@link Browser}.\n     *\n     * If there are multiple {@link BrowserContext | browser contexts}, this\n     * returns all {@link Page | pages} in all\n     * {@link BrowserContext | browser contexts}.\n     *\n     * @remarks Non-visible {@link Page | pages}, such as `\"background_page\"`,\n     * will not be listed here. You can find them using {@link Target.page}.\n     */\n    async pages() {\n        const contextPages = await Promise.all(this.browserContexts().map(context => {\n            return context.pages();\n        }));\n        // Flatten array.\n        return contextPages.reduce((acc, x) => {\n            return acc.concat(x);\n        }, []);\n    }\n    /**\n     * Whether Puppeteer is connected to this {@link Browser | browser}.\n     *\n     * @deprecated Use {@link Browser | Browser.connected}.\n     */\n    isConnected() {\n        return this.connected;\n    }\n    /** @internal */\n    [disposeSymbol]() {\n        if (this.process()) {\n            return void this.close().catch(debugError);\n        }\n        return void this.disconnect().catch(debugError);\n    }\n    /** @internal */\n    [asyncDisposeSymbol]() {\n        if (this.process()) {\n            return this.close();\n        }\n        return this.disconnect();\n    }\n}\n//# sourceMappingURL=Browser.js.map","import { EventEmitter } from '../common/EventEmitter.js';\n/**\n * Events that the CDPSession class emits.\n *\n * @public\n */\n// eslint-disable-next-line @typescript-eslint/no-namespace\nexport var CDPSessionEvent;\n(function (CDPSessionEvent) {\n    /** @internal */\n    CDPSessionEvent.Disconnected = Symbol('CDPSession.Disconnected');\n    /** @internal */\n    CDPSessionEvent.Swapped = Symbol('CDPSession.Swapped');\n    /**\n     * Emitted when the session is ready to be configured during the auto-attach\n     * process. Right after the event is handled, the session will be resumed.\n     *\n     * @internal\n     */\n    CDPSessionEvent.Ready = Symbol('CDPSession.Ready');\n    CDPSessionEvent.SessionAttached = 'sessionattached';\n    CDPSessionEvent.SessionDetached = 'sessiondetached';\n})(CDPSessionEvent || (CDPSessionEvent = {}));\n/**\n * The `CDPSession` instances are used to talk raw Chrome Devtools Protocol.\n *\n * @remarks\n *\n * Protocol methods can be called with {@link CDPSession.send} method and protocol\n * events can be subscribed to with `CDPSession.on` method.\n *\n * Useful links: {@link https://chromedevtools.github.io/devtools-protocol/ | DevTools Protocol Viewer}\n * and {@link https://github.com/aslushnikov/getting-started-with-cdp/blob/HEAD/README.md | Getting Started with DevTools Protocol}.\n *\n * @example\n *\n * ```ts\n * const client = await page.createCDPSession();\n * await client.send('Animation.enable');\n * client.on('Animation.animationCreated', () =>\n *   console.log('Animation created!')\n * );\n * const response = await client.send('Animation.getPlaybackRate');\n * console.log('playback rate is ' + response.playbackRate);\n * await client.send('Animation.setPlaybackRate', {\n *   playbackRate: response.playbackRate / 2,\n * });\n * ```\n *\n * @public\n */\nexport class CDPSession extends EventEmitter {\n    /**\n     * @internal\n     */\n    constructor() {\n        super();\n    }\n    /**\n     * Parent session in terms of CDP's auto-attach mechanism.\n     *\n     * @internal\n     */\n    parentSession() {\n        return undefined;\n    }\n}\n//# sourceMappingURL=CDPSession.js.map","/**\n * @license\n * Copyright 2024 Google Inc.\n * SPDX-License-Identifier: Apache-2.0\n */\nimport { TimeoutError } from '../common/Errors.js';\n/**\n * Creates and returns a deferred object along with the resolve/reject functions.\n *\n * If the deferred has not been resolved/rejected within the `timeout` period,\n * the deferred gets resolves with a timeout error. `timeout` has to be greater than 0 or\n * it is ignored.\n *\n * @internal\n */\nexport class Deferred {\n    static create(opts) {\n        return new Deferred(opts);\n    }\n    static async race(awaitables) {\n        const deferredWithTimeout = new Set();\n        try {\n            const promises = awaitables.map(value => {\n                if (value instanceof Deferred) {\n                    if (value.#timeoutId) {\n                        deferredWithTimeout.add(value);\n                    }\n                    return value.valueOrThrow();\n                }\n                return value;\n            });\n            // eslint-disable-next-line no-restricted-syntax\n            return await Promise.race(promises);\n        }\n        finally {\n            for (const deferred of deferredWithTimeout) {\n                // We need to stop the timeout else\n                // Node.JS will keep running the event loop till the\n                // timer executes\n                deferred.reject(new Error('Timeout cleared'));\n            }\n        }\n    }\n    #isResolved = false;\n    #isRejected = false;\n    #value;\n    // SAFETY: This is ensured by #taskPromise.\n    #resolve;\n    #taskPromise = new Promise(resolve => {\n        this.#resolve = resolve;\n    });\n    #timeoutId;\n    #timeoutError;\n    constructor(opts) {\n        if (opts && opts.timeout > 0) {\n            this.#timeoutError = new TimeoutError(opts.message);\n            this.#timeoutId = setTimeout(() => {\n                this.reject(this.#timeoutError);\n            }, opts.timeout);\n        }\n    }\n    #finish(value) {\n        clearTimeout(this.#timeoutId);\n        this.#value = value;\n        this.#resolve();\n    }\n    resolve(value) {\n        if (this.#isRejected || this.#isResolved) {\n            return;\n        }\n        this.#isResolved = true;\n        this.#finish(value);\n    }\n    reject(error) {\n        if (this.#isRejected || this.#isResolved) {\n            return;\n        }\n        this.#isRejected = true;\n        this.#finish(error);\n    }\n    resolved() {\n        return this.#isResolved;\n    }\n    finished() {\n        return this.#isResolved || this.#isRejected;\n    }\n    value() {\n        return this.#value;\n    }\n    #promise;\n    valueOrThrow() {\n        if (!this.#promise) {\n            this.#promise = (async () => {\n                await this.#taskPromise;\n                if (this.#isRejected) {\n                    throw this.#value;\n                }\n                return this.#value;\n            })();\n        }\n        return this.#promise;\n    }\n}\n//# sourceMappingURL=Deferred.js.map","/**\n * @license\n * Copyright 2024 Google Inc.\n * SPDX-License-Identifier: Apache-2.0\n */\nimport { Deferred } from './Deferred.js';\nimport { disposeSymbol } from './disposable.js';\n/**\n * @internal\n */\nexport class Mutex {\n    static Guard = class Guard {\n        #mutex;\n        #onRelease;\n        constructor(mutex, onRelease) {\n            this.#mutex = mutex;\n            this.#onRelease = onRelease;\n        }\n        [disposeSymbol]() {\n            this.#onRelease?.();\n            return this.#mutex.release();\n        }\n    };\n    #locked = false;\n    #acquirers = [];\n    // This is FIFO.\n    async acquire(onRelease) {\n        if (!this.#locked) {\n            this.#locked = true;\n            return new Mutex.Guard(this);\n        }\n        const deferred = Deferred.create();\n        this.#acquirers.push(deferred.resolve.bind(deferred));\n        await deferred.valueOrThrow();\n        return new Mutex.Guard(this, onRelease);\n    }\n    release() {\n        const resolve = this.#acquirers.shift();\n        if (!resolve) {\n            this.#locked = false;\n            return;\n        }\n        resolve();\n    }\n}\n//# sourceMappingURL=Mutex.js.map","/**\n * @license\n * Copyright 2017 Google Inc.\n * SPDX-License-Identifier: Apache-2.0\n */\nimport { firstValueFrom, from, merge, raceWith, } from '../../third_party/rxjs/rxjs.js';\nimport { EventEmitter } from '../common/EventEmitter.js';\nimport { debugError, fromEmitterEvent, filterAsync, timeout, } from '../common/util.js';\nimport { asyncDisposeSymbol, disposeSymbol } from '../util/disposable.js';\nimport { Mutex } from '../util/Mutex.js';\n/**\n * {@link BrowserContext} represents individual user contexts within a\n * {@link Browser | browser}.\n *\n * When a {@link Browser | browser} is launched, it has at least one default\n * {@link BrowserContext | browser context}. Others can be created\n * using {@link Browser.createBrowserContext}. Each context has isolated storage\n * (cookies/localStorage/etc.)\n *\n * {@link BrowserContext} {@link EventEmitter | emits} various events which are\n * documented in the {@link BrowserContextEvent} enum.\n *\n * If a {@link Page | page} opens another {@link Page | page}, e.g. using\n * `window.open`, the popup will belong to the parent {@link Page.browserContext\n * | page's browser context}.\n *\n * @example Creating a new {@link BrowserContext | browser context}:\n *\n * ```ts\n * // Create a new browser context\n * const context = await browser.createBrowserContext();\n * // Create a new page inside context.\n * const page = await context.newPage();\n * // ... do stuff with page ...\n * await page.goto('https://example.com');\n * // Dispose context once it's no longer needed.\n * await context.close();\n * ```\n *\n * @remarks\n *\n * In Chrome all non-default contexts are incognito,\n * and {@link Browser.defaultBrowserContext | default browser context}\n * might be incognito if you provide the `--incognito` argument when launching\n * the browser.\n *\n * @public\n */\nexport class BrowserContext extends EventEmitter {\n    /**\n     * @internal\n     */\n    constructor() {\n        super();\n    }\n    /**\n     * If defined, indicates an ongoing screenshot opereation.\n     */\n    #pageScreenshotMutex;\n    #screenshotOperationsCount = 0;\n    /**\n     * @internal\n     */\n    startScreenshot() {\n        const mutex = this.#pageScreenshotMutex || new Mutex();\n        this.#pageScreenshotMutex = mutex;\n        this.#screenshotOperationsCount++;\n        return mutex.acquire(() => {\n            this.#screenshotOperationsCount--;\n            if (this.#screenshotOperationsCount === 0) {\n                // Remove the mutex to indicate no ongoing screenshot operation.\n                this.#pageScreenshotMutex = undefined;\n            }\n        });\n    }\n    /**\n     * @internal\n     */\n    waitForScreenshotOperations() {\n        return this.#pageScreenshotMutex?.acquire();\n    }\n    /**\n     * Waits until a {@link Target | target} matching the given `predicate`\n     * appears and returns it.\n     *\n     * This will look all open {@link BrowserContext | browser contexts}.\n     *\n     * @example Finding a target for a page opened via `window.open`:\n     *\n     * ```ts\n     * await page.evaluate(() => window.open('https://www.example.com/'));\n     * const newWindowTarget = await browserContext.waitForTarget(\n     *   target => target.url() === 'https://www.example.com/'\n     * );\n     * ```\n     */\n    async waitForTarget(predicate, options = {}) {\n        const { timeout: ms = 30000 } = options;\n        return await firstValueFrom(merge(fromEmitterEvent(this, \"targetcreated\" /* BrowserContextEvent.TargetCreated */), fromEmitterEvent(this, \"targetchanged\" /* BrowserContextEvent.TargetChanged */), from(this.targets())).pipe(filterAsync(predicate), raceWith(timeout(ms))));\n    }\n    /**\n     * Whether this {@link BrowserContext | browser context} is closed.\n     */\n    get closed() {\n        return !this.browser().browserContexts().includes(this);\n    }\n    /**\n     * Identifier for this {@link BrowserContext | browser context}.\n     */\n    get id() {\n        return undefined;\n    }\n    /** @internal */\n    [disposeSymbol]() {\n        return void this.close().catch(debugError);\n    }\n    /** @internal */\n    [asyncDisposeSymbol]() {\n        return this.close();\n    }\n}\n//# sourceMappingURL=BrowserContext.js.map","/**\n * @license\n * Copyright 2024 Google Inc.\n * SPDX-License-Identifier: Apache-2.0\n */\nvar __addDisposableResource = (this && this.__addDisposableResource) || function (env, value, async) {\n    if (value !== null && value !== void 0) {\n        if (typeof value !== \"object\" && typeof value !== \"function\") throw new TypeError(\"Object expected.\");\n        var dispose, inner;\n        if (async) {\n            if (!Symbol.asyncDispose) throw new TypeError(\"Symbol.asyncDispose is not defined.\");\n            dispose = value[Symbol.asyncDispose];\n        }\n        if (dispose === void 0) {\n            if (!Symbol.dispose) throw new TypeError(\"Symbol.dispose is not defined.\");\n            dispose = value[Symbol.dispose];\n            if (async) inner = dispose;\n        }\n        if (typeof dispose !== \"function\") throw new TypeError(\"Object not disposable.\");\n        if (inner) dispose = function() { try { inner.call(this); } catch (e) { return Promise.reject(e); } };\n        env.stack.push({ value: value, dispose: dispose, async: async });\n    }\n    else if (async) {\n        env.stack.push({ async: true });\n    }\n    return value;\n};\nvar __disposeResources = (this && this.__disposeResources) || (function (SuppressedError) {\n    return function (env) {\n        function fail(e) {\n            env.error = env.hasError ? new SuppressedError(e, env.error, \"An error was suppressed during disposal.\") : e;\n            env.hasError = true;\n        }\n        function next() {\n            while (env.stack.length) {\n                var rec = env.stack.pop();\n                try {\n                    var result = rec.dispose && rec.dispose.call(rec.value);\n                    if (rec.async) return Promise.resolve(result).then(next, function(e) { fail(e); return next(); });\n                }\n                catch (e) {\n                    fail(e);\n                }\n            }\n            if (env.hasError) throw env.error;\n        }\n        return next();\n    };\n})(typeof SuppressedError === \"function\" ? SuppressedError : function (error, suppressed, message) {\n    var e = new Error(message);\n    return e.name = \"SuppressedError\", e.error = error, e.suppressed = suppressed, e;\n});\nimport { WEB_PERMISSION_TO_PROTOCOL_PERMISSION, } from '../api/Browser.js';\nimport { BrowserContext } from '../api/BrowserContext.js';\nimport { assert } from '../util/assert.js';\n/**\n * @internal\n */\nexport class CdpBrowserContext extends BrowserContext {\n    #connection;\n    #browser;\n    #id;\n    constructor(connection, browser, contextId) {\n        super();\n        this.#connection = connection;\n        this.#browser = browser;\n        this.#id = contextId;\n    }\n    get id() {\n        return this.#id;\n    }\n    targets() {\n        return this.#browser.targets().filter(target => {\n            return target.browserContext() === this;\n        });\n    }\n    async pages() {\n        const pages = await Promise.all(this.targets()\n            .filter(target => {\n            return (target.type() === 'page' ||\n                (target.type() === 'other' &&\n                    this.#browser._getIsPageTargetCallback()?.(target)));\n        })\n            .map(target => {\n            return target.page();\n        }));\n        return pages.filter((page) => {\n            return !!page;\n        });\n    }\n    async overridePermissions(origin, permissions) {\n        const protocolPermissions = permissions.map(permission => {\n            const protocolPermission = WEB_PERMISSION_TO_PROTOCOL_PERMISSION.get(permission);\n            if (!protocolPermission) {\n                throw new Error('Unknown permission: ' + permission);\n            }\n            return protocolPermission;\n        });\n        await this.#connection.send('Browser.grantPermissions', {\n            origin,\n            browserContextId: this.#id || undefined,\n            permissions: protocolPermissions,\n        });\n    }\n    async clearPermissionOverrides() {\n        await this.#connection.send('Browser.resetPermissions', {\n            browserContextId: this.#id || undefined,\n        });\n    }\n    async newPage() {\n        const env_1 = { stack: [], error: void 0, hasError: false };\n        try {\n            const _guard = __addDisposableResource(env_1, await this.waitForScreenshotOperations(), false);\n            return await this.#browser._createPageInContext(this.#id);\n        }\n        catch (e_1) {\n            env_1.error = e_1;\n            env_1.hasError = true;\n        }\n        finally {\n            __disposeResources(env_1);\n        }\n    }\n    browser() {\n        return this.#browser;\n    }\n    async close() {\n        assert(this.#id, 'Default BrowserContext cannot be closed!');\n        await this.#browser._disposeContext(this.#id);\n    }\n}\n//# sourceMappingURL=BrowserContext.js.map","/**\n * @license\n * Copyright 2023 Google Inc.\n * SPDX-License-Identifier: Apache-2.0\n */\n/**\n * @public\n */\nexport var TargetType;\n(function (TargetType) {\n    TargetType[\"PAGE\"] = \"page\";\n    TargetType[\"BACKGROUND_PAGE\"] = \"background_page\";\n    TargetType[\"SERVICE_WORKER\"] = \"service_worker\";\n    TargetType[\"SHARED_WORKER\"] = \"shared_worker\";\n    TargetType[\"BROWSER\"] = \"browser\";\n    TargetType[\"WEBVIEW\"] = \"webview\";\n    TargetType[\"OTHER\"] = \"other\";\n    /**\n     * @internal\n     */\n    TargetType[\"TAB\"] = \"tab\";\n})(TargetType || (TargetType = {}));\n/**\n * Target represents a\n * {@link https://chromedevtools.github.io/devtools-protocol/tot/Target/ | CDP target}.\n * In CDP a target is something that can be debugged such a frame, a page or a\n * worker.\n * @public\n */\nexport class Target {\n    /**\n     * @internal\n     */\n    constructor() { }\n    /**\n     * If the target is not of type `\"service_worker\"` or `\"shared_worker\"`, returns `null`.\n     */\n    async worker() {\n        return null;\n    }\n    /**\n     * If the target is not of type `\"page\"`, `\"webview\"` or `\"background_page\"`,\n     * returns `null`.\n     */\n    async page() {\n        return null;\n    }\n}\n//# sourceMappingURL=Target.js.map","/**\n * @license\n * Copyright 2022 Google Inc.\n * SPDX-License-Identifier: Apache-2.0\n */\n/**\n * @internal\n */\nexport function isErrorLike(obj) {\n    return (typeof obj === 'object' && obj !== null && 'name' in obj && 'message' in obj);\n}\n/**\n * @internal\n */\nexport function isErrnoException(obj) {\n    return (isErrorLike(obj) &&\n        ('errno' in obj || 'code' in obj || 'path' in obj || 'syscall' in obj));\n}\n/**\n * @internal\n */\nexport function rewriteError(error, message, originalMessage) {\n    error.message = message;\n    error.originalMessage = originalMessage ?? error.originalMessage;\n    return error;\n}\n/**\n * @internal\n */\nexport function createProtocolErrorMessage(object) {\n    let message = object.error.message;\n    // TODO: remove the type checks when we stop connecting to BiDi with a CDP\n    // client.\n    if (object.error &&\n        typeof object.error === 'object' &&\n        'data' in object.error) {\n        message += ` ${object.error.data}`;\n    }\n    return message;\n}\n//# sourceMappingURL=ErrorLike.js.map","/**\n * @license\n * Copyright 2023 Google Inc.\n * SPDX-License-Identifier: Apache-2.0\n */\nimport { Deferred } from '../util/Deferred.js';\nimport { rewriteError } from '../util/ErrorLike.js';\nimport { ProtocolError, TargetCloseError } from './Errors.js';\nimport { debugError } from './util.js';\n/**\n * Manages callbacks and their IDs for the protocol request/response communication.\n *\n * @internal\n */\nexport class CallbackRegistry {\n    #callbacks = new Map();\n    #idGenerator = createIncrementalIdGenerator();\n    create(label, timeout, request) {\n        const callback = new Callback(this.#idGenerator(), label, timeout);\n        this.#callbacks.set(callback.id, callback);\n        try {\n            request(callback.id);\n        }\n        catch (error) {\n            // We still throw sync errors synchronously and clean up the scheduled\n            // callback.\n            callback.promise.catch(debugError).finally(() => {\n                this.#callbacks.delete(callback.id);\n            });\n            callback.reject(error);\n            throw error;\n        }\n        // Must only have sync code up until here.\n        return callback.promise.finally(() => {\n            this.#callbacks.delete(callback.id);\n        });\n    }\n    reject(id, message, originalMessage) {\n        const callback = this.#callbacks.get(id);\n        if (!callback) {\n            return;\n        }\n        this._reject(callback, message, originalMessage);\n    }\n    _reject(callback, errorMessage, originalMessage) {\n        let error;\n        let message;\n        if (errorMessage instanceof ProtocolError) {\n            error = errorMessage;\n            error.cause = callback.error;\n            message = errorMessage.message;\n        }\n        else {\n            error = callback.error;\n            message = errorMessage;\n        }\n        callback.reject(rewriteError(error, `Protocol error (${callback.label}): ${message}`, originalMessage));\n    }\n    resolve(id, value) {\n        const callback = this.#callbacks.get(id);\n        if (!callback) {\n            return;\n        }\n        callback.resolve(value);\n    }\n    clear() {\n        for (const callback of this.#callbacks.values()) {\n            // TODO: probably we can accept error messages as params.\n            this._reject(callback, new TargetCloseError('Target closed'));\n        }\n        this.#callbacks.clear();\n    }\n    /**\n     * @internal\n     */\n    getPendingProtocolErrors() {\n        const result = [];\n        for (const callback of this.#callbacks.values()) {\n            result.push(new Error(`${callback.label} timed out. Trace: ${callback.error.stack}`));\n        }\n        return result;\n    }\n}\n/**\n * @internal\n */\nexport class Callback {\n    #id;\n    #error = new ProtocolError();\n    #deferred = Deferred.create();\n    #timer;\n    #label;\n    constructor(id, label, timeout) {\n        this.#id = id;\n        this.#label = label;\n        if (timeout) {\n            this.#timer = setTimeout(() => {\n                this.#deferred.reject(rewriteError(this.#error, `${label} timed out. Increase the 'protocolTimeout' setting in launch/connect calls for a higher timeout if needed.`));\n            }, timeout);\n        }\n    }\n    resolve(value) {\n        clearTimeout(this.#timer);\n        this.#deferred.resolve(value);\n    }\n    reject(error) {\n        clearTimeout(this.#timer);\n        this.#deferred.reject(error);\n    }\n    get id() {\n        return this.#id;\n    }\n    get promise() {\n        return this.#deferred.valueOrThrow();\n    }\n    get error() {\n        return this.#error;\n    }\n    get label() {\n        return this.#label;\n    }\n}\n/**\n * @internal\n */\nexport function createIncrementalIdGenerator() {\n    let id = 0;\n    return () => {\n        return ++id;\n    };\n}\n//# sourceMappingURL=CallbackRegistry.js.map","/**\n * @license\n * Copyright 2017 Google Inc.\n * SPDX-License-Identifier: Apache-2.0\n */\nimport { CDPSession, CDPSessionEvent, } from '../api/CDPSession.js';\nimport { CallbackRegistry } from '../common/CallbackRegistry.js';\nimport { TargetCloseError } from '../common/Errors.js';\nimport { assert } from '../util/assert.js';\nimport { createProtocolErrorMessage } from '../util/ErrorLike.js';\n/**\n * @internal\n */\nexport class CdpCDPSession extends CDPSession {\n    #sessionId;\n    #targetType;\n    #callbacks = new CallbackRegistry();\n    #connection;\n    #parentSessionId;\n    #target;\n    /**\n     * @internal\n     */\n    constructor(connection, targetType, sessionId, parentSessionId) {\n        super();\n        this.#connection = connection;\n        this.#targetType = targetType;\n        this.#sessionId = sessionId;\n        this.#parentSessionId = parentSessionId;\n    }\n    /**\n     * Sets the {@link CdpTarget} associated with the session instance.\n     *\n     * @internal\n     */\n    _setTarget(target) {\n        this.#target = target;\n    }\n    /**\n     * Gets the {@link CdpTarget} associated with the session instance.\n     *\n     * @internal\n     */\n    _target() {\n        assert(this.#target, 'Target must exist');\n        return this.#target;\n    }\n    connection() {\n        return this.#connection;\n    }\n    parentSession() {\n        if (!this.#parentSessionId) {\n            // To make it work in Firefox that does not have parent (tab) sessions.\n            return this;\n        }\n        const parent = this.#connection?.session(this.#parentSessionId);\n        return parent ?? undefined;\n    }\n    send(method, params, options) {\n        if (!this.#connection) {\n            return Promise.reject(new TargetCloseError(`Protocol error (${method}): Session closed. Most likely the ${this.#targetType} has been closed.`));\n        }\n        return this.#connection._rawSend(this.#callbacks, method, params, this.#sessionId, options);\n    }\n    /**\n     * @internal\n     */\n    _onMessage(object) {\n        if (object.id) {\n            if (object.error) {\n                this.#callbacks.reject(object.id, createProtocolErrorMessage(object), object.error.message);\n            }\n            else {\n                this.#callbacks.resolve(object.id, object.result);\n            }\n        }\n        else {\n            assert(!object.id);\n            this.emit(object.method, object.params);\n        }\n    }\n    /**\n     * Detaches the cdpSession from the target. Once detached, the cdpSession object\n     * won't emit any events and can't be used to send messages.\n     */\n    async detach() {\n        if (!this.#connection) {\n            throw new Error(`Session already detached. Most likely the ${this.#targetType} has been closed.`);\n        }\n        await this.#connection.send('Target.detachFromTarget', {\n            sessionId: this.#sessionId,\n        });\n    }\n    /**\n     * @internal\n     */\n    _onClosed() {\n        this.#callbacks.clear();\n        this.#connection = undefined;\n        this.emit(CDPSessionEvent.Disconnected, undefined);\n    }\n    /**\n     * Returns the session's id.\n     */\n    id() {\n        return this.#sessionId;\n    }\n    /**\n     * @internal\n     */\n    getPendingProtocolErrors() {\n        return this.#callbacks.getPendingProtocolErrors();\n    }\n}\n//# sourceMappingURL=CDPSession.js.map","/**\n * @license\n * Copyright 2019 Google Inc.\n * SPDX-License-Identifier: Apache-2.0\n */\nconst DEFAULT_TIMEOUT = 30000;\n/**\n * @internal\n */\nexport class TimeoutSettings {\n    #defaultTimeout;\n    #defaultNavigationTimeout;\n    constructor() {\n        this.#defaultTimeout = null;\n        this.#defaultNavigationTimeout = null;\n    }\n    setDefaultTimeout(timeout) {\n        this.#defaultTimeout = timeout;\n    }\n    setDefaultNavigationTimeout(timeout) {\n        this.#defaultNavigationTimeout = timeout;\n    }\n    navigationTimeout() {\n        if (this.#defaultNavigationTimeout !== null) {\n            return this.#defaultNavigationTimeout;\n        }\n        if (this.#defaultTimeout !== null) {\n            return this.#defaultTimeout;\n        }\n        return DEFAULT_TIMEOUT;\n    }\n    timeout() {\n        if (this.#defaultTimeout !== null) {\n            return this.#defaultTimeout;\n        }\n        return DEFAULT_TIMEOUT;\n    }\n}\n//# sourceMappingURL=TimeoutSettings.js.map","/**\n * @license\n * Copyright 2023 Google Inc.\n * SPDX-License-Identifier: Apache-2.0\n */\nvar __addDisposableResource = (this && this.__addDisposableResource) || function (env, value, async) {\n    if (value !== null && value !== void 0) {\n        if (typeof value !== \"object\" && typeof value !== \"function\") throw new TypeError(\"Object expected.\");\n        var dispose, inner;\n        if (async) {\n            if (!Symbol.asyncDispose) throw new TypeError(\"Symbol.asyncDispose is not defined.\");\n            dispose = value[Symbol.asyncDispose];\n        }\n        if (dispose === void 0) {\n            if (!Symbol.dispose) throw new TypeError(\"Symbol.dispose is not defined.\");\n            dispose = value[Symbol.dispose];\n            if (async) inner = dispose;\n        }\n        if (typeof dispose !== \"function\") throw new TypeError(\"Object not disposable.\");\n        if (inner) dispose = function() { try { inner.call(this); } catch (e) { return Promise.reject(e); } };\n        env.stack.push({ value: value, dispose: dispose, async: async });\n    }\n    else if (async) {\n        env.stack.push({ async: true });\n    }\n    return value;\n};\nvar __disposeResources = (this && this.__disposeResources) || (function (SuppressedError) {\n    return function (env) {\n        function fail(e) {\n            env.error = env.hasError ? new SuppressedError(e, env.error, \"An error was suppressed during disposal.\") : e;\n            env.hasError = true;\n        }\n        function next() {\n            while (env.stack.length) {\n                var rec = env.stack.pop();\n                try {\n                    var result = rec.dispose && rec.dispose.call(rec.value);\n                    if (rec.async) return Promise.resolve(result).then(next, function(e) { fail(e); return next(); });\n                }\n                catch (e) {\n                    fail(e);\n                }\n            }\n            if (env.hasError) throw env.error;\n        }\n        return next();\n    };\n})(typeof SuppressedError === \"function\" ? SuppressedError : function (error, suppressed, message) {\n    var e = new Error(message);\n    return e.name = \"SuppressedError\", e.error = error, e.suppressed = suppressed, e;\n});\nimport { asyncDisposeSymbol, disposeSymbol } from './disposable.js';\nimport { Mutex } from './Mutex.js';\nconst instances = new WeakSet();\nexport function moveable(Class, _) {\n    let hasDispose = false;\n    if (Class.prototype[disposeSymbol]) {\n        const dispose = Class.prototype[disposeSymbol];\n        Class.prototype[disposeSymbol] = function () {\n            if (instances.has(this)) {\n                instances.delete(this);\n                return;\n            }\n            return dispose.call(this);\n        };\n        hasDispose = true;\n    }\n    if (Class.prototype[asyncDisposeSymbol]) {\n        const asyncDispose = Class.prototype[asyncDisposeSymbol];\n        Class.prototype[asyncDisposeSymbol] = function () {\n            if (instances.has(this)) {\n                instances.delete(this);\n                return;\n            }\n            return asyncDispose.call(this);\n        };\n        hasDispose = true;\n    }\n    if (hasDispose) {\n        Class.prototype.move = function () {\n            instances.add(this);\n            return this;\n        };\n    }\n    return Class;\n}\nexport function throwIfDisposed(message = value => {\n    return `Attempted to use disposed ${value.constructor.name}.`;\n}) {\n    return (target, _) => {\n        return function (...args) {\n            if (this.disposed) {\n                throw new Error(message(this));\n            }\n            return target.call(this, ...args);\n        };\n    };\n}\nexport function inertIfDisposed(target, _) {\n    return function (...args) {\n        if (this.disposed) {\n            return;\n        }\n        return target.call(this, ...args);\n    };\n}\n/**\n * The decorator only invokes the target if the target has not been invoked with\n * the same arguments before. The decorated method throws an error if it's\n * invoked with a different number of elements: if you decorate a method, it\n * should have the same number of arguments\n *\n * @internal\n */\nexport function invokeAtMostOnceForArguments(target, _) {\n    const cache = new WeakMap();\n    let cacheDepth = -1;\n    return function (...args) {\n        if (cacheDepth === -1) {\n            cacheDepth = args.length;\n        }\n        if (cacheDepth !== args.length) {\n            throw new Error('Memoized method was called with the wrong number of arguments');\n        }\n        let freshArguments = false;\n        let cacheIterator = cache;\n        for (const arg of args) {\n            if (cacheIterator.has(arg)) {\n                cacheIterator = cacheIterator.get(arg);\n            }\n            else {\n                freshArguments = true;\n                cacheIterator.set(arg, new WeakMap());\n                cacheIterator = cacheIterator.get(arg);\n            }\n        }\n        if (!freshArguments) {\n            return;\n        }\n        return target.call(this, ...args);\n    };\n}\nexport function guarded(getKey = function () {\n    return this;\n}) {\n    return (target, _) => {\n        const mutexes = new WeakMap();\n        return async function (...args) {\n            const env_1 = { stack: [], error: void 0, hasError: false };\n            try {\n                const key = getKey.call(this);\n                let mutex = mutexes.get(key);\n                if (!mutex) {\n                    mutex = new Mutex();\n                    mutexes.set(key, mutex);\n                }\n                const _ = __addDisposableResource(env_1, await mutex.acquire(), true);\n                return await target.call(this, ...args);\n            }\n            catch (e_1) {\n                env_1.error = e_1;\n                env_1.hasError = true;\n            }\n            finally {\n                const result_1 = __disposeResources(env_1);\n                if (result_1)\n                    await result_1;\n            }\n        };\n    };\n}\nconst bubbleHandlers = new WeakMap();\nconst bubbleInitializer = function (events) {\n    const handlers = bubbleHandlers.get(this) ?? new Map();\n    if (handlers.has(events)) {\n        return;\n    }\n    const handler = events !== undefined\n        ? (type, event) => {\n            if (events.includes(type)) {\n                this.emit(type, event);\n            }\n        }\n        : (type, event) => {\n            this.emit(type, event);\n        };\n    handlers.set(events, handler);\n    bubbleHandlers.set(this, handlers);\n};\n/**\n * Event emitter fields marked with `bubble` will have their events bubble up\n * the field owner.\n */\n// The type is too complicated to type.\n// eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\nexport function bubble(events) {\n    return ({ set, get }, context) => {\n        context.addInitializer(function () {\n            return bubbleInitializer.apply(this, [events]);\n        });\n        return {\n            set(emitter) {\n                const handler = bubbleHandlers.get(this).get(events);\n                // In case we are re-setting.\n                const oldEmitter = get.call(this);\n                if (oldEmitter !== undefined) {\n                    oldEmitter.off('*', handler);\n                }\n                if (emitter === undefined) {\n                    return;\n                }\n                emitter.on('*', handler);\n                set.call(this, emitter);\n            },\n            init(emitter) {\n                if (emitter === undefined) {\n                    return emitter;\n                }\n                bubbleInitializer.apply(this, [events]);\n                const handler = bubbleHandlers.get(this).get(events);\n                emitter.on('*', handler);\n                return emitter;\n            },\n        };\n    };\n}\n//# sourceMappingURL=decorators.js.map","var __addDisposableResource = (this && this.__addDisposableResource) || function (env, value, async) {\n    if (value !== null && value !== void 0) {\n        if (typeof value !== \"object\" && typeof value !== \"function\") throw new TypeError(\"Object expected.\");\n        var dispose, inner;\n        if (async) {\n            if (!Symbol.asyncDispose) throw new TypeError(\"Symbol.asyncDispose is not defined.\");\n            dispose = value[Symbol.asyncDispose];\n        }\n        if (dispose === void 0) {\n            if (!Symbol.dispose) throw new TypeError(\"Symbol.dispose is not defined.\");\n            dispose = value[Symbol.dispose];\n            if (async) inner = dispose;\n        }\n        if (typeof dispose !== \"function\") throw new TypeError(\"Object not disposable.\");\n        if (inner) dispose = function() { try { inner.call(this); } catch (e) { return Promise.reject(e); } };\n        env.stack.push({ value: value, dispose: dispose, async: async });\n    }\n    else if (async) {\n        env.stack.push({ async: true });\n    }\n    return value;\n};\nvar __disposeResources = (this && this.__disposeResources) || (function (SuppressedError) {\n    return function (env) {\n        function fail(e) {\n            env.error = env.hasError ? new SuppressedError(e, env.error, \"An error was suppressed during disposal.\") : e;\n            env.hasError = true;\n        }\n        function next() {\n            while (env.stack.length) {\n                var rec = env.stack.pop();\n                try {\n                    var result = rec.dispose && rec.dispose.call(rec.value);\n                    if (rec.async) return Promise.resolve(result).then(next, function(e) { fail(e); return next(); });\n                }\n                catch (e) {\n                    fail(e);\n                }\n            }\n            if (env.hasError) throw env.error;\n        }\n        return next();\n    };\n})(typeof SuppressedError === \"function\" ? SuppressedError : function (error, suppressed, message) {\n    var e = new Error(message);\n    return e.name = \"SuppressedError\", e.error = error, e.suppressed = suppressed, e;\n});\nimport { EMPTY, catchError, defaultIfEmpty, defer, filter, first, firstValueFrom, from, identity, ignoreElements, map, merge, mergeMap, noop, pipe, race, raceWith, retry, tap, throwIfEmpty, } from '../../../third_party/rxjs/rxjs.js';\nimport { EventEmitter } from '../../common/EventEmitter.js';\nimport { debugError, fromAbortSignal, timeout } from '../../common/util.js';\n/**\n * All the events that a locator instance may emit.\n *\n * @public\n */\nexport var LocatorEvent;\n(function (LocatorEvent) {\n    /**\n     * Emitted every time before the locator performs an action on the located element(s).\n     */\n    LocatorEvent[\"Action\"] = \"action\";\n})(LocatorEvent || (LocatorEvent = {}));\n/**\n * Locators describe a strategy of locating objects and performing an action on\n * them. If the action fails because the object is not ready for the action, the\n * whole operation is retried. Various preconditions for a successful action are\n * checked automatically.\n *\n * See {@link https://pptr.dev/guides/page-interactions#locators} for details.\n *\n * @public\n */\nexport class Locator extends EventEmitter {\n    /**\n     * Creates a race between multiple locators trying to locate elements in\n     * parallel but ensures that only a single element receives the action.\n     *\n     * @public\n     */\n    static race(locators) {\n        return RaceLocator.create(locators);\n    }\n    /**\n     * @internal\n     */\n    visibility = null;\n    /**\n     * @internal\n     */\n    _timeout = 30000;\n    #ensureElementIsInTheViewport = true;\n    #waitForEnabled = true;\n    #waitForStableBoundingBox = true;\n    /**\n     * @internal\n     */\n    operators = {\n        conditions: (conditions, signal) => {\n            return mergeMap((handle) => {\n                return merge(...conditions.map(condition => {\n                    return condition(handle, signal);\n                })).pipe(defaultIfEmpty(handle));\n            });\n        },\n        retryAndRaceWithSignalAndTimer: (signal, cause) => {\n            const candidates = [];\n            if (signal) {\n                candidates.push(fromAbortSignal(signal, cause));\n            }\n            candidates.push(timeout(this._timeout, cause));\n            return pipe(retry({ delay: RETRY_DELAY }), raceWith(...candidates));\n        },\n    };\n    // Determines when the locator will timeout for actions.\n    get timeout() {\n        return this._timeout;\n    }\n    /**\n     * Creates a new locator instance by cloning the current locator and setting\n     * the total timeout for the locator actions.\n     *\n     * Pass `0` to disable timeout.\n     *\n     * @defaultValue `Page.getDefaultTimeout()`\n     */\n    setTimeout(timeout) {\n        const locator = this._clone();\n        locator._timeout = timeout;\n        return locator;\n    }\n    /**\n     * Creates a new locator instance by cloning the current locator with the\n     * visibility property changed to the specified value.\n     */\n    setVisibility(visibility) {\n        const locator = this._clone();\n        locator.visibility = visibility;\n        return locator;\n    }\n    /**\n     * Creates a new locator instance by cloning the current locator and\n     * specifying whether to wait for input elements to become enabled before the\n     * action. Applicable to `click` and `fill` actions.\n     *\n     * @defaultValue `true`\n     */\n    setWaitForEnabled(value) {\n        const locator = this._clone();\n        locator.#waitForEnabled = value;\n        return locator;\n    }\n    /**\n     * Creates a new locator instance by cloning the current locator and\n     * specifying whether the locator should scroll the element into viewport if\n     * it is not in the viewport already.\n     *\n     * @defaultValue `true`\n     */\n    setEnsureElementIsInTheViewport(value) {\n        const locator = this._clone();\n        locator.#ensureElementIsInTheViewport = value;\n        return locator;\n    }\n    /**\n     * Creates a new locator instance by cloning the current locator and\n     * specifying whether the locator has to wait for the element's bounding box\n     * to be same between two consecutive animation frames.\n     *\n     * @defaultValue `true`\n     */\n    setWaitForStableBoundingBox(value) {\n        const locator = this._clone();\n        locator.#waitForStableBoundingBox = value;\n        return locator;\n    }\n    /**\n     * @internal\n     */\n    copyOptions(locator) {\n        this._timeout = locator._timeout;\n        this.visibility = locator.visibility;\n        this.#waitForEnabled = locator.#waitForEnabled;\n        this.#ensureElementIsInTheViewport = locator.#ensureElementIsInTheViewport;\n        this.#waitForStableBoundingBox = locator.#waitForStableBoundingBox;\n        return this;\n    }\n    /**\n     * If the element has a \"disabled\" property, wait for the element to be\n     * enabled.\n     */\n    #waitForEnabledIfNeeded = (handle, signal) => {\n        if (!this.#waitForEnabled) {\n            return EMPTY;\n        }\n        return from(handle.frame.waitForFunction(element => {\n            if (!(element instanceof HTMLElement)) {\n                return true;\n            }\n            const isNativeFormControl = [\n                'BUTTON',\n                'INPUT',\n                'SELECT',\n                'TEXTAREA',\n                'OPTION',\n                'OPTGROUP',\n            ].includes(element.nodeName);\n            return !isNativeFormControl || !element.hasAttribute('disabled');\n        }, {\n            timeout: this._timeout,\n            signal,\n        }, handle)).pipe(ignoreElements());\n    };\n    /**\n     * Compares the bounding box of the element for two consecutive animation\n     * frames and waits till they are the same.\n     */\n    #waitForStableBoundingBoxIfNeeded = (handle) => {\n        if (!this.#waitForStableBoundingBox) {\n            return EMPTY;\n        }\n        return defer(() => {\n            // Note we don't use waitForFunction because that relies on RAF.\n            return from(handle.evaluate(element => {\n                return new Promise(resolve => {\n                    window.requestAnimationFrame(() => {\n                        const rect1 = element.getBoundingClientRect();\n                        window.requestAnimationFrame(() => {\n                            const rect2 = element.getBoundingClientRect();\n                            resolve([\n                                {\n                                    x: rect1.x,\n                                    y: rect1.y,\n                                    width: rect1.width,\n                                    height: rect1.height,\n                                },\n                                {\n                                    x: rect2.x,\n                                    y: rect2.y,\n                                    width: rect2.width,\n                                    height: rect2.height,\n                                },\n                            ]);\n                        });\n                    });\n                });\n            }));\n        }).pipe(first(([rect1, rect2]) => {\n            return (rect1.x === rect2.x &&\n                rect1.y === rect2.y &&\n                rect1.width === rect2.width &&\n                rect1.height === rect2.height);\n        }), retry({ delay: RETRY_DELAY }), ignoreElements());\n    };\n    /**\n     * Checks if the element is in the viewport and auto-scrolls it if it is not.\n     */\n    #ensureElementIsInTheViewportIfNeeded = (handle) => {\n        if (!this.#ensureElementIsInTheViewport) {\n            return EMPTY;\n        }\n        return from(handle.isIntersectingViewport({ threshold: 0 })).pipe(filter(isIntersectingViewport => {\n            return !isIntersectingViewport;\n        }), mergeMap(() => {\n            return from(handle.scrollIntoView());\n        }), mergeMap(() => {\n            return defer(() => {\n                return from(handle.isIntersectingViewport({ threshold: 0 }));\n            }).pipe(first(identity), retry({ delay: RETRY_DELAY }), ignoreElements());\n        }));\n    };\n    #click(options) {\n        const signal = options?.signal;\n        const cause = new Error('Locator.click');\n        return this._wait(options).pipe(this.operators.conditions([\n            this.#ensureElementIsInTheViewportIfNeeded,\n            this.#waitForStableBoundingBoxIfNeeded,\n            this.#waitForEnabledIfNeeded,\n        ], signal), tap(() => {\n            return this.emit(LocatorEvent.Action, undefined);\n        }), mergeMap(handle => {\n            return from(handle.click(options)).pipe(catchError(err => {\n                void handle.dispose().catch(debugError);\n                throw err;\n            }));\n        }), this.operators.retryAndRaceWithSignalAndTimer(signal, cause));\n    }\n    #fill(value, options) {\n        const signal = options?.signal;\n        const cause = new Error('Locator.fill');\n        return this._wait(options).pipe(this.operators.conditions([\n            this.#ensureElementIsInTheViewportIfNeeded,\n            this.#waitForStableBoundingBoxIfNeeded,\n            this.#waitForEnabledIfNeeded,\n        ], signal), tap(() => {\n            return this.emit(LocatorEvent.Action, undefined);\n        }), mergeMap(handle => {\n            return from(handle.evaluate(el => {\n                if (el instanceof HTMLSelectElement) {\n                    return 'select';\n                }\n                if (el instanceof HTMLTextAreaElement) {\n                    return 'typeable-input';\n                }\n                if (el instanceof HTMLInputElement) {\n                    if (new Set([\n                        'textarea',\n                        'text',\n                        'url',\n                        'tel',\n                        'search',\n                        'password',\n                        'number',\n                        'email',\n                    ]).has(el.type)) {\n                        return 'typeable-input';\n                    }\n                    else {\n                        return 'other-input';\n                    }\n                }\n                if (el.isContentEditable) {\n                    return 'contenteditable';\n                }\n                return 'unknown';\n            }))\n                .pipe(mergeMap(inputType => {\n                switch (inputType) {\n                    case 'select':\n                        return from(handle.select(value).then(noop));\n                    case 'contenteditable':\n                    case 'typeable-input':\n                        return from(handle.evaluate((input, newValue) => {\n                            const currentValue = input.isContentEditable\n                                ? input.innerText\n                                : input.value;\n                            // Clear the input if the current value does not match the filled\n                            // out value.\n                            if (newValue.length <= currentValue.length ||\n                                !newValue.startsWith(input.value)) {\n                                if (input.isContentEditable) {\n                                    input.innerText = '';\n                                }\n                                else {\n                                    input.value = '';\n                                }\n                                return newValue;\n                            }\n                            const originalValue = input.isContentEditable\n                                ? input.innerText\n                                : input.value;\n                            // If the value is partially filled out, only type the rest. Move\n                            // cursor to the end of the common prefix.\n                            if (input.isContentEditable) {\n                                input.innerText = '';\n                                input.innerText = originalValue;\n                            }\n                            else {\n                                input.value = '';\n                                input.value = originalValue;\n                            }\n                            return newValue.substring(originalValue.length);\n                        }, value)).pipe(mergeMap(textToType => {\n                            return from(handle.type(textToType));\n                        }));\n                    case 'other-input':\n                        return from(handle.focus()).pipe(mergeMap(() => {\n                            return from(handle.evaluate((input, value) => {\n                                input.value = value;\n                                input.dispatchEvent(new Event('input', { bubbles: true }));\n                                input.dispatchEvent(new Event('change', { bubbles: true }));\n                            }, value));\n                        }));\n                    case 'unknown':\n                        throw new Error(`Element cannot be filled out.`);\n                }\n            }))\n                .pipe(catchError(err => {\n                void handle.dispose().catch(debugError);\n                throw err;\n            }));\n        }), this.operators.retryAndRaceWithSignalAndTimer(signal, cause));\n    }\n    #hover(options) {\n        const signal = options?.signal;\n        const cause = new Error('Locator.hover');\n        return this._wait(options).pipe(this.operators.conditions([\n            this.#ensureElementIsInTheViewportIfNeeded,\n            this.#waitForStableBoundingBoxIfNeeded,\n        ], signal), tap(() => {\n            return this.emit(LocatorEvent.Action, undefined);\n        }), mergeMap(handle => {\n            return from(handle.hover()).pipe(catchError(err => {\n                void handle.dispose().catch(debugError);\n                throw err;\n            }));\n        }), this.operators.retryAndRaceWithSignalAndTimer(signal, cause));\n    }\n    #scroll(options) {\n        const signal = options?.signal;\n        const cause = new Error('Locator.scroll');\n        return this._wait(options).pipe(this.operators.conditions([\n            this.#ensureElementIsInTheViewportIfNeeded,\n            this.#waitForStableBoundingBoxIfNeeded,\n        ], signal), tap(() => {\n            return this.emit(LocatorEvent.Action, undefined);\n        }), mergeMap(handle => {\n            return from(handle.evaluate((el, scrollTop, scrollLeft) => {\n                if (scrollTop !== undefined) {\n                    el.scrollTop = scrollTop;\n                }\n                if (scrollLeft !== undefined) {\n                    el.scrollLeft = scrollLeft;\n                }\n            }, options?.scrollTop, options?.scrollLeft)).pipe(catchError(err => {\n                void handle.dispose().catch(debugError);\n                throw err;\n            }));\n        }), this.operators.retryAndRaceWithSignalAndTimer(signal, cause));\n    }\n    /**\n     * Clones the locator.\n     */\n    clone() {\n        return this._clone();\n    }\n    /**\n     * Waits for the locator to get a handle from the page.\n     *\n     * @public\n     */\n    async waitHandle(options) {\n        const cause = new Error('Locator.waitHandle');\n        return await firstValueFrom(this._wait(options).pipe(this.operators.retryAndRaceWithSignalAndTimer(options?.signal, cause)));\n    }\n    /**\n     * Waits for the locator to get the serialized value from the page.\n     *\n     * Note this requires the value to be JSON-serializable.\n     *\n     * @public\n     */\n    async wait(options) {\n        const env_1 = { stack: [], error: void 0, hasError: false };\n        try {\n            const handle = __addDisposableResource(env_1, await this.waitHandle(options), false);\n            return await handle.jsonValue();\n        }\n        catch (e_1) {\n            env_1.error = e_1;\n            env_1.hasError = true;\n        }\n        finally {\n            __disposeResources(env_1);\n        }\n    }\n    /**\n     * Maps the locator using the provided mapper.\n     *\n     * @public\n     */\n    map(mapper) {\n        return new MappedLocator(this._clone(), handle => {\n            // SAFETY: TypeScript cannot deduce the type.\n            return handle.evaluateHandle(mapper);\n        });\n    }\n    /**\n     * Creates an expectation that is evaluated against located values.\n     *\n     * If the expectations do not match, then the locator will retry.\n     *\n     * @public\n     */\n    filter(predicate) {\n        return new FilteredLocator(this._clone(), async (handle, signal) => {\n            await handle.frame.waitForFunction(predicate, { signal, timeout: this._timeout }, handle);\n            return true;\n        });\n    }\n    /**\n     * Creates an expectation that is evaluated against located handles.\n     *\n     * If the expectations do not match, then the locator will retry.\n     *\n     * @internal\n     */\n    filterHandle(predicate) {\n        return new FilteredLocator(this._clone(), predicate);\n    }\n    /**\n     * Maps the locator using the provided mapper.\n     *\n     * @internal\n     */\n    mapHandle(mapper) {\n        return new MappedLocator(this._clone(), mapper);\n    }\n    /**\n     * Clicks the located element.\n     */\n    click(options) {\n        return firstValueFrom(this.#click(options));\n    }\n    /**\n     * Fills out the input identified by the locator using the provided value. The\n     * type of the input is determined at runtime and the appropriate fill-out\n     * method is chosen based on the type. `contenteditable`, select, textarea and\n     * input elements are supported.\n     */\n    fill(value, options) {\n        return firstValueFrom(this.#fill(value, options));\n    }\n    /**\n     * Hovers over the located element.\n     */\n    hover(options) {\n        return firstValueFrom(this.#hover(options));\n    }\n    /**\n     * Scrolls the located element.\n     */\n    scroll(options) {\n        return firstValueFrom(this.#scroll(options));\n    }\n}\n/**\n * @internal\n */\nexport class FunctionLocator extends Locator {\n    static create(pageOrFrame, func) {\n        return new FunctionLocator(pageOrFrame, func).setTimeout('getDefaultTimeout' in pageOrFrame\n            ? pageOrFrame.getDefaultTimeout()\n            : pageOrFrame.page().getDefaultTimeout());\n    }\n    #pageOrFrame;\n    #func;\n    constructor(pageOrFrame, func) {\n        super();\n        this.#pageOrFrame = pageOrFrame;\n        this.#func = func;\n    }\n    _clone() {\n        return new FunctionLocator(this.#pageOrFrame, this.#func);\n    }\n    _wait(options) {\n        const signal = options?.signal;\n        return defer(() => {\n            return from(this.#pageOrFrame.waitForFunction(this.#func, {\n                timeout: this.timeout,\n                signal,\n            }));\n        }).pipe(throwIfEmpty());\n    }\n}\n/**\n * @internal\n */\nexport class DelegatedLocator extends Locator {\n    #delegate;\n    constructor(delegate) {\n        super();\n        this.#delegate = delegate;\n        this.copyOptions(this.#delegate);\n    }\n    get delegate() {\n        return this.#delegate;\n    }\n    setTimeout(timeout) {\n        const locator = super.setTimeout(timeout);\n        locator.#delegate = this.#delegate.setTimeout(timeout);\n        return locator;\n    }\n    setVisibility(visibility) {\n        const locator = super.setVisibility(visibility);\n        locator.#delegate = locator.#delegate.setVisibility(visibility);\n        return locator;\n    }\n    setWaitForEnabled(value) {\n        const locator = super.setWaitForEnabled(value);\n        locator.#delegate = this.#delegate.setWaitForEnabled(value);\n        return locator;\n    }\n    setEnsureElementIsInTheViewport(value) {\n        const locator = super.setEnsureElementIsInTheViewport(value);\n        locator.#delegate = this.#delegate.setEnsureElementIsInTheViewport(value);\n        return locator;\n    }\n    setWaitForStableBoundingBox(value) {\n        const locator = super.setWaitForStableBoundingBox(value);\n        locator.#delegate = this.#delegate.setWaitForStableBoundingBox(value);\n        return locator;\n    }\n}\n/**\n * @internal\n */\nexport class FilteredLocator extends DelegatedLocator {\n    #predicate;\n    constructor(base, predicate) {\n        super(base);\n        this.#predicate = predicate;\n    }\n    _clone() {\n        return new FilteredLocator(this.delegate.clone(), this.#predicate).copyOptions(this);\n    }\n    _wait(options) {\n        return this.delegate._wait(options).pipe(mergeMap(handle => {\n            return from(Promise.resolve(this.#predicate(handle, options?.signal))).pipe(filter(value => {\n                return value;\n            }), map(() => {\n                // SAFETY: It passed the predicate, so this is correct.\n                return handle;\n            }));\n        }), throwIfEmpty());\n    }\n}\n/**\n * @internal\n */\nexport class MappedLocator extends DelegatedLocator {\n    #mapper;\n    constructor(base, mapper) {\n        super(base);\n        this.#mapper = mapper;\n    }\n    _clone() {\n        return new MappedLocator(this.delegate.clone(), this.#mapper).copyOptions(this);\n    }\n    _wait(options) {\n        return this.delegate._wait(options).pipe(mergeMap(handle => {\n            return from(Promise.resolve(this.#mapper(handle, options?.signal)));\n        }));\n    }\n}\n/**\n * @internal\n */\nexport class NodeLocator extends Locator {\n    static create(pageOrFrame, selector) {\n        return new NodeLocator(pageOrFrame, selector).setTimeout('getDefaultTimeout' in pageOrFrame\n            ? pageOrFrame.getDefaultTimeout()\n            : pageOrFrame.page().getDefaultTimeout());\n    }\n    #pageOrFrame;\n    #selector;\n    constructor(pageOrFrame, selector) {\n        super();\n        this.#pageOrFrame = pageOrFrame;\n        this.#selector = selector;\n    }\n    /**\n     * Waits for the element to become visible or hidden. visibility === 'visible'\n     * means that the element has a computed style, the visibility property other\n     * than 'hidden' or 'collapse' and non-empty bounding box. visibility ===\n     * 'hidden' means the opposite of that.\n     */\n    #waitForVisibilityIfNeeded = (handle) => {\n        if (!this.visibility) {\n            return EMPTY;\n        }\n        return (() => {\n            switch (this.visibility) {\n                case 'hidden':\n                    return defer(() => {\n                        return from(handle.isHidden());\n                    });\n                case 'visible':\n                    return defer(() => {\n                        return from(handle.isVisible());\n                    });\n            }\n        })().pipe(first(identity), retry({ delay: RETRY_DELAY }), ignoreElements());\n    };\n    _clone() {\n        return new NodeLocator(this.#pageOrFrame, this.#selector).copyOptions(this);\n    }\n    _wait(options) {\n        const signal = options?.signal;\n        return defer(() => {\n            return from(this.#pageOrFrame.waitForSelector(this.#selector, {\n                visible: false,\n                timeout: this._timeout,\n                signal,\n            }));\n        }).pipe(filter((value) => {\n            return value !== null;\n        }), throwIfEmpty(), this.operators.conditions([this.#waitForVisibilityIfNeeded], signal));\n    }\n}\nfunction checkLocatorArray(locators) {\n    for (const locator of locators) {\n        if (!(locator instanceof Locator)) {\n            throw new Error('Unknown locator for race candidate');\n        }\n    }\n    return locators;\n}\n/**\n * @internal\n */\nexport class RaceLocator extends Locator {\n    static create(locators) {\n        const array = checkLocatorArray(locators);\n        return new RaceLocator(array);\n    }\n    #locators;\n    constructor(locators) {\n        super();\n        this.#locators = locators;\n    }\n    _clone() {\n        return new RaceLocator(this.#locators.map(locator => {\n            return locator.clone();\n        })).copyOptions(this);\n    }\n    _wait(options) {\n        return race(...this.#locators.map(locator => {\n            return locator._wait(options);\n        }));\n    }\n}\n/**\n * For observables coming from promises, a delay is needed, otherwise RxJS will\n * never yield in a permanent failure for a promise.\n *\n * We also don't want RxJS to do promise operations to often, so we bump the\n * delay up to 100ms.\n *\n * @internal\n */\nexport const RETRY_DELAY = 100;\n//# sourceMappingURL=locators.js.map","/**\n * @license\n * Copyright 2017 Google Inc.\n * SPDX-License-Identifier: Apache-2.0\n */\nvar __runInitializers = (this && this.__runInitializers) || function (thisArg, initializers, value) {\n    var useValue = arguments.length > 2;\n    for (var i = 0; i < initializers.length; i++) {\n        value = useValue ? initializers[i].call(thisArg, value) : initializers[i].call(thisArg);\n    }\n    return useValue ? value : void 0;\n};\nvar __esDecorate = (this && this.__esDecorate) || function (ctor, descriptorIn, decorators, contextIn, initializers, extraInitializers) {\n    function accept(f) { if (f !== void 0 && typeof f !== \"function\") throw new TypeError(\"Function expected\"); return f; }\n    var kind = contextIn.kind, key = kind === \"getter\" ? \"get\" : kind === \"setter\" ? \"set\" : \"value\";\n    var target = !descriptorIn && ctor ? contextIn[\"static\"] ? ctor : ctor.prototype : null;\n    var descriptor = descriptorIn || (target ? Object.getOwnPropertyDescriptor(target, contextIn.name) : {});\n    var _, done = false;\n    for (var i = decorators.length - 1; i >= 0; i--) {\n        var context = {};\n        for (var p in contextIn) context[p] = p === \"access\" ? {} : contextIn[p];\n        for (var p in contextIn.access) context.access[p] = contextIn.access[p];\n        context.addInitializer = function (f) { if (done) throw new TypeError(\"Cannot add initializers after decoration has completed\"); extraInitializers.push(accept(f || null)); };\n        var result = (0, decorators[i])(kind === \"accessor\" ? { get: descriptor.get, set: descriptor.set } : descriptor[key], context);\n        if (kind === \"accessor\") {\n            if (result === void 0) continue;\n            if (result === null || typeof result !== \"object\") throw new TypeError(\"Object expected\");\n            if (_ = accept(result.get)) descriptor.get = _;\n            if (_ = accept(result.set)) descriptor.set = _;\n            if (_ = accept(result.init)) initializers.unshift(_);\n        }\n        else if (_ = accept(result)) {\n            if (kind === \"field\") initializers.unshift(_);\n            else descriptor[key] = _;\n        }\n    }\n    if (target) Object.defineProperty(target, contextIn.name, descriptor);\n    done = true;\n};\nvar __addDisposableResource = (this && this.__addDisposableResource) || function (env, value, async) {\n    if (value !== null && value !== void 0) {\n        if (typeof value !== \"object\" && typeof value !== \"function\") throw new TypeError(\"Object expected.\");\n        var dispose, inner;\n        if (async) {\n            if (!Symbol.asyncDispose) throw new TypeError(\"Symbol.asyncDispose is not defined.\");\n            dispose = value[Symbol.asyncDispose];\n        }\n        if (dispose === void 0) {\n            if (!Symbol.dispose) throw new TypeError(\"Symbol.dispose is not defined.\");\n            dispose = value[Symbol.dispose];\n            if (async) inner = dispose;\n        }\n        if (typeof dispose !== \"function\") throw new TypeError(\"Object not disposable.\");\n        if (inner) dispose = function() { try { inner.call(this); } catch (e) { return Promise.reject(e); } };\n        env.stack.push({ value: value, dispose: dispose, async: async });\n    }\n    else if (async) {\n        env.stack.push({ async: true });\n    }\n    return value;\n};\nvar __disposeResources = (this && this.__disposeResources) || (function (SuppressedError) {\n    return function (env) {\n        function fail(e) {\n            env.error = env.hasError ? new SuppressedError(e, env.error, \"An error was suppressed during disposal.\") : e;\n            env.hasError = true;\n        }\n        function next() {\n            while (env.stack.length) {\n                var rec = env.stack.pop();\n                try {\n                    var result = rec.dispose && rec.dispose.call(rec.value);\n                    if (rec.async) return Promise.resolve(result).then(next, function(e) { fail(e); return next(); });\n                }\n                catch (e) {\n                    fail(e);\n                }\n            }\n            if (env.hasError) throw env.error;\n        }\n        return next();\n    };\n})(typeof SuppressedError === \"function\" ? SuppressedError : function (error, suppressed, message) {\n    var e = new Error(message);\n    return e.name = \"SuppressedError\", e.error = error, e.suppressed = suppressed, e;\n});\nimport { concat, EMPTY, filter, first, firstValueFrom, from, map, merge, mergeMap, mergeScan, of, raceWith, ReplaySubject, startWith, switchMap, take, takeUntil, timer, } from '../../third_party/rxjs/rxjs.js';\nimport { TargetCloseError } from '../common/Errors.js';\nimport { EventEmitter, } from '../common/EventEmitter.js';\nimport { TimeoutSettings } from '../common/TimeoutSettings.js';\nimport { debugError, fromEmitterEvent, filterAsync, isString, NETWORK_IDLE_TIME, timeout, withSourcePuppeteerURLIfNone, fromAbortSignal, } from '../common/util.js';\nimport { environment } from '../environment.js';\nimport { guarded } from '../util/decorators.js';\nimport { AsyncDisposableStack, asyncDisposeSymbol, DisposableStack, disposeSymbol, } from '../util/disposable.js';\nimport { stringToTypedArray } from '../util/encoding.js';\nimport { FunctionLocator, Locator, NodeLocator, } from './locators/locators.js';\n/**\n * @internal\n */\nexport function setDefaultScreenshotOptions(options) {\n    options.optimizeForSpeed ??= false;\n    options.type ??= 'png';\n    options.fromSurface ??= true;\n    options.fullPage ??= false;\n    options.omitBackground ??= false;\n    options.encoding ??= 'binary';\n    options.captureBeyondViewport ??= true;\n}\n/**\n * Page provides methods to interact with a single tab or\n * {@link https://developer.chrome.com/extensions/background_pages | extension background page}\n * in the browser.\n *\n * :::note\n *\n * One Browser instance might have multiple Page instances.\n *\n * :::\n *\n * @example\n * This example creates a page, navigates it to a URL, and then saves a screenshot:\n *\n * ```ts\n * import puppeteer from 'puppeteer';\n *\n * (async () => {\n *   const browser = await puppeteer.launch();\n *   const page = await browser.newPage();\n *   await page.goto('https://example.com');\n *   await page.screenshot({path: 'screenshot.png'});\n *   await browser.close();\n * })();\n * ```\n *\n * The Page class extends from Puppeteer's {@link EventEmitter} class and will\n * emit various events which are documented in the {@link PageEvent} enum.\n *\n * @example\n * This example logs a message for a single page `load` event:\n *\n * ```ts\n * page.once('load', () => console.log('Page loaded!'));\n * ```\n *\n * To unsubscribe from events use the {@link EventEmitter.off} method:\n *\n * ```ts\n * function logRequest(interceptedRequest) {\n *   console.log('A request was made:', interceptedRequest.url());\n * }\n * page.on('request', logRequest);\n * // Sometime later...\n * page.off('request', logRequest);\n * ```\n *\n * @public\n */\nlet Page = (() => {\n    let _classSuper = EventEmitter;\n    let _instanceExtraInitializers = [];\n    let _screenshot_decorators;\n    return class Page extends _classSuper {\n        static {\n            const _metadata = typeof Symbol === \"function\" && Symbol.metadata ? Object.create(_classSuper[Symbol.metadata] ?? null) : void 0;\n            __esDecorate(this, null, _screenshot_decorators, { kind: \"method\", name: \"screenshot\", static: false, private: false, access: { has: obj => \"screenshot\" in obj, get: obj => obj.screenshot }, metadata: _metadata }, null, _instanceExtraInitializers);\n            if (_metadata) Object.defineProperty(this, Symbol.metadata, { enumerable: true, configurable: true, writable: true, value: _metadata });\n        }\n        /**\n         * @internal\n         */\n        _isDragging = (__runInitializers(this, _instanceExtraInitializers), false);\n        /**\n         * @internal\n         */\n        _timeoutSettings = new TimeoutSettings();\n        #requestHandlers = new WeakMap();\n        #inflight$ = new ReplaySubject(1);\n        /**\n         * @internal\n         */\n        constructor() {\n            super();\n            fromEmitterEvent(this, \"request\" /* PageEvent.Request */)\n                .pipe(mergeMap(originalRequest => {\n                return concat(of(1), merge(fromEmitterEvent(this, \"requestfailed\" /* PageEvent.RequestFailed */), fromEmitterEvent(this, \"requestfinished\" /* PageEvent.RequestFinished */), fromEmitterEvent(this, \"response\" /* PageEvent.Response */).pipe(map(response => {\n                    return response.request();\n                }))).pipe(filter(request => {\n                    return request.id === originalRequest.id;\n                }), take(1), map(() => {\n                    return -1;\n                })));\n            }), mergeScan((acc, addend) => {\n                return of(acc + addend);\n            }, 0), takeUntil(fromEmitterEvent(this, \"close\" /* PageEvent.Close */)), startWith(0))\n                .subscribe(this.#inflight$);\n        }\n        /**\n         * Listen to page events.\n         *\n         * @remarks\n         * This method exists to define event typings and handle proper wireup of\n         * cooperative request interception. Actual event listening and dispatching is\n         * delegated to {@link EventEmitter}.\n         *\n         * @internal\n         */\n        on(type, handler) {\n            if (type !== \"request\" /* PageEvent.Request */) {\n                return super.on(type, handler);\n            }\n            let wrapper = this.#requestHandlers.get(handler);\n            if (wrapper === undefined) {\n                wrapper = (event) => {\n                    event.enqueueInterceptAction(() => {\n                        return handler(event);\n                    });\n                };\n                this.#requestHandlers.set(handler, wrapper);\n            }\n            return super.on(type, wrapper);\n        }\n        /**\n         * @internal\n         */\n        off(type, handler) {\n            if (type === \"request\" /* PageEvent.Request */) {\n                handler =\n                    this.#requestHandlers.get(handler) || handler;\n            }\n            return super.off(type, handler);\n        }\n        /**\n         * {@inheritDoc Accessibility}\n         */\n        get accessibility() {\n            return this.mainFrame().accessibility;\n        }\n        locator(selectorOrFunc) {\n            if (typeof selectorOrFunc === 'string') {\n                return NodeLocator.create(this, selectorOrFunc);\n            }\n            else {\n                return FunctionLocator.create(this, selectorOrFunc);\n            }\n        }\n        /**\n         * A shortcut for {@link Locator.race} that does not require static imports.\n         *\n         * @internal\n         */\n        locatorRace(locators) {\n            return Locator.race(locators);\n        }\n        /**\n         * Finds the first element that matches the selector. If no element matches\n         * the selector, the return value resolves to `null`.\n         *\n         * @param selector -\n         * {@link https://pptr.dev/guides/page-interactions#selectors | selector}\n         * to query the page for.\n         * {@link https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Selectors | CSS selectors}\n         * can be passed as-is and a\n         * {@link https://pptr.dev/guides/page-interactions#non-css-selectors | Puppeteer-specific selector syntax}\n         * allows quering by\n         * {@link https://pptr.dev/guides/page-interactions#text-selectors--p-text | text},\n         * {@link https://pptr.dev/guides/page-interactions#aria-selectors--p-aria | a11y role and name},\n         * and\n         * {@link https://pptr.dev/guides/page-interactions#xpath-selectors--p-xpath | xpath}\n         * and\n         * {@link https://pptr.dev/guides/page-interactions#querying-elements-in-shadow-dom | combining these queries across shadow roots}.\n         * Alternatively, you can specify the selector type using a\n         * {@link https://pptr.dev/guides/page-interactions#prefixed-selector-syntax | prefix}.\n         *\n         * @remarks\n         *\n         * Shortcut for {@link Frame.$ | Page.mainFrame().$(selector) }.\n         */\n        async $(selector) {\n            return await this.mainFrame().$(selector);\n        }\n        /**\n         * Finds elements on the page that match the selector. If no elements\n         * match the selector, the return value resolves to `[]`.\n         *\n         * @param selector -\n         * {@link https://pptr.dev/guides/page-interactions#selectors | selector}\n         * to query the page for.\n         * {@link https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Selectors | CSS selectors}\n         * can be passed as-is and a\n         * {@link https://pptr.dev/guides/page-interactions#non-css-selectors | Puppeteer-specific selector syntax}\n         * allows quering by\n         * {@link https://pptr.dev/guides/page-interactions#text-selectors--p-text | text},\n         * {@link https://pptr.dev/guides/page-interactions#aria-selectors--p-aria | a11y role and name},\n         * and\n         * {@link https://pptr.dev/guides/page-interactions#xpath-selectors--p-xpath | xpath}\n         * and\n         * {@link https://pptr.dev/guides/page-interactions#querying-elements-in-shadow-dom | combining these queries across shadow roots}.\n         * Alternatively, you can specify the selector type using a\n         * {@link https://pptr.dev/guides/page-interactions#prefixed-selector-syntax | prefix}.\n         *\n         * @remarks\n         *\n         * Shortcut for {@link Frame.$$ | Page.mainFrame().$$(selector) }.\n         */\n        async $$(selector, options) {\n            return await this.mainFrame().$$(selector, options);\n        }\n        /**\n         * @remarks\n         *\n         * The only difference between {@link Page.evaluate | page.evaluate} and\n         * `page.evaluateHandle` is that `evaluateHandle` will return the value\n         * wrapped in an in-page object.\n         *\n         * If the function passed to `page.evaluateHandle` returns a Promise, the\n         * function will wait for the promise to resolve and return its value.\n         *\n         * You can pass a string instead of a function (although functions are\n         * recommended as they are easier to debug and use with TypeScript):\n         *\n         * @example\n         *\n         * ```ts\n         * const aHandle = await page.evaluateHandle('document');\n         * ```\n         *\n         * @example\n         * {@link JSHandle} instances can be passed as arguments to the `pageFunction`:\n         *\n         * ```ts\n         * const aHandle = await page.evaluateHandle(() => document.body);\n         * const resultHandle = await page.evaluateHandle(\n         *   body => body.innerHTML,\n         *   aHandle\n         * );\n         * console.log(await resultHandle.jsonValue());\n         * await resultHandle.dispose();\n         * ```\n         *\n         * Most of the time this function returns a {@link JSHandle},\n         * but if `pageFunction` returns a reference to an element,\n         * you instead get an {@link ElementHandle} back:\n         *\n         * @example\n         *\n         * ```ts\n         * const button = await page.evaluateHandle(() =>\n         *   document.querySelector('button')\n         * );\n         * // can call `click` because `button` is an `ElementHandle`\n         * await button.click();\n         * ```\n         *\n         * The TypeScript definitions assume that `evaluateHandle` returns\n         * a `JSHandle`, but if you know it's going to return an\n         * `ElementHandle`, pass it as the generic argument:\n         *\n         * ```ts\n         * const button = await page.evaluateHandle<ElementHandle>(...);\n         * ```\n         *\n         * @param pageFunction - a function that is run within the page\n         * @param args - arguments to be passed to the pageFunction\n         */\n        async evaluateHandle(pageFunction, ...args) {\n            pageFunction = withSourcePuppeteerURLIfNone(this.evaluateHandle.name, pageFunction);\n            return await this.mainFrame().evaluateHandle(pageFunction, ...args);\n        }\n        /**\n         * This method finds the first element within the page that matches the selector\n         * and passes the result as the first argument to the `pageFunction`.\n         *\n         * @remarks\n         *\n         * If no element is found matching `selector`, the method will throw an error.\n         *\n         * If `pageFunction` returns a promise `$eval` will wait for the promise to\n         * resolve and then return its value.\n         *\n         * @example\n         *\n         * ```ts\n         * const searchValue = await page.$eval('#search', el => el.value);\n         * const preloadHref = await page.$eval('link[rel=preload]', el => el.href);\n         * const html = await page.$eval('.main-container', el => el.outerHTML);\n         * ```\n         *\n         * If you are using TypeScript, you may have to provide an explicit type to the\n         * first argument of the `pageFunction`.\n         * By default it is typed as `Element`, but you may need to provide a more\n         * specific sub-type:\n         *\n         * @example\n         *\n         * ```ts\n         * // if you don't provide HTMLInputElement here, TS will error\n         * // as `value` is not on `Element`\n         * const searchValue = await page.$eval(\n         *   '#search',\n         *   (el: HTMLInputElement) => el.value\n         * );\n         * ```\n         *\n         * The compiler should be able to infer the return type\n         * from the `pageFunction` you provide. If it is unable to, you can use the generic\n         * type to tell the compiler what return type you expect from `$eval`:\n         *\n         * @example\n         *\n         * ```ts\n         * // The compiler can infer the return type in this case, but if it can't\n         * // or if you want to be more explicit, provide it as the generic type.\n         * const searchValue = await page.$eval<string>(\n         *   '#search',\n         *   (el: HTMLInputElement) => el.value\n         * );\n         * ```\n         *\n         * @param selector -\n         * {@link https://pptr.dev/guides/page-interactions#selectors | selector}\n         * to query the page for.\n         * {@link https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Selectors | CSS selectors}\n         * can be passed as-is and a\n         * {@link https://pptr.dev/guides/page-interactions#non-css-selectors | Puppeteer-specific selector syntax}\n         * allows quering by\n         * {@link https://pptr.dev/guides/page-interactions#text-selectors--p-text | text},\n         * {@link https://pptr.dev/guides/page-interactions#aria-selectors--p-aria | a11y role and name},\n         * and\n         * {@link https://pptr.dev/guides/page-interactions#xpath-selectors--p-xpath | xpath}\n         * and\n         * {@link https://pptr.dev/guides/page-interactions#querying-elements-in-shadow-dom | combining these queries across shadow roots}.\n         * Alternatively, you can specify the selector type using a\n         * {@link https://pptr.dev/guides/page-interactions#prefixed-selector-syntax | prefix}.\n         * @param pageFunction - the function to be evaluated in the page context.\n         * Will be passed the result of the element matching the selector as its\n         * first argument.\n         * @param args - any additional arguments to pass through to `pageFunction`.\n         *\n         * @returns The result of calling `pageFunction`. If it returns an element it\n         * is wrapped in an {@link ElementHandle}, else the raw value itself is\n         * returned.\n         */\n        async $eval(selector, pageFunction, ...args) {\n            pageFunction = withSourcePuppeteerURLIfNone(this.$eval.name, pageFunction);\n            return await this.mainFrame().$eval(selector, pageFunction, ...args);\n        }\n        /**\n         * This method returns all elements matching the selector and passes the\n         * resulting array as the first argument to the `pageFunction`.\n         *\n         * @remarks\n         * If `pageFunction` returns a promise `$$eval` will wait for the promise to\n         * resolve and then return its value.\n         *\n         * @example\n         *\n         * ```ts\n         * // get the amount of divs on the page\n         * const divCount = await page.$$eval('div', divs => divs.length);\n         *\n         * // get the text content of all the `.options` elements:\n         * const options = await page.$$eval('div > span.options', options => {\n         *   return options.map(option => option.textContent);\n         * });\n         * ```\n         *\n         * If you are using TypeScript, you may have to provide an explicit type to the\n         * first argument of the `pageFunction`.\n         * By default it is typed as `Element[]`, but you may need to provide a more\n         * specific sub-type:\n         *\n         * @example\n         *\n         * ```ts\n         * await page.$$eval('input', elements => {\n         *   return elements.map(e => e.value);\n         * });\n         * ```\n         *\n         * The compiler should be able to infer the return type\n         * from the `pageFunction` you provide. If it is unable to, you can use the generic\n         * type to tell the compiler what return type you expect from `$$eval`:\n         *\n         * @example\n         *\n         * ```ts\n         * const allInputValues = await page.$$eval('input', elements =>\n         *   elements.map(e => e.textContent)\n         * );\n         * ```\n         *\n         * @param selector -\n         * {@link https://pptr.dev/guides/page-interactions#selectors | selector}\n         * to query the page for.\n         * {@link https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Selectors | CSS selectors}\n         * can be passed as-is and a\n         * {@link https://pptr.dev/guides/page-interactions#non-css-selectors | Puppeteer-specific selector syntax}\n         * allows quering by\n         * {@link https://pptr.dev/guides/page-interactions#text-selectors--p-text | text},\n         * {@link https://pptr.dev/guides/page-interactions#aria-selectors--p-aria | a11y role and name},\n         * and\n         * {@link https://pptr.dev/guides/page-interactions#xpath-selectors--p-xpath | xpath}\n         * and\n         * {@link https://pptr.dev/guides/page-interactions#querying-elements-in-shadow-dom | combining these queries across shadow roots}.\n         * Alternatively, you can specify the selector type using a\n         * {@link https://pptr.dev/guides/page-interactions#prefixed-selector-syntax | prefix}.\n         * @param pageFunction - the function to be evaluated in the page context.\n         * Will be passed an array of matching elements as its first argument.\n         * @param args - any additional arguments to pass through to `pageFunction`.\n         *\n         * @returns The result of calling `pageFunction`. If it returns an element it\n         * is wrapped in an {@link ElementHandle}, else the raw value itself is\n         * returned.\n         */\n        async $$eval(selector, pageFunction, ...args) {\n            pageFunction = withSourcePuppeteerURLIfNone(this.$$eval.name, pageFunction);\n            return await this.mainFrame().$$eval(selector, pageFunction, ...args);\n        }\n        /**\n         * Adds a `<script>` tag into the page with the desired URL or content.\n         *\n         * @remarks\n         * Shortcut for\n         * {@link Frame.addScriptTag | page.mainFrame().addScriptTag(options)}.\n         *\n         * @param options - Options for the script.\n         * @returns An {@link ElementHandle | element handle} to the injected\n         * `<script>` element.\n         */\n        async addScriptTag(options) {\n            return await this.mainFrame().addScriptTag(options);\n        }\n        async addStyleTag(options) {\n            return await this.mainFrame().addStyleTag(options);\n        }\n        /**\n         * The page's URL.\n         *\n         * @remarks\n         *\n         * Shortcut for {@link Frame.url | page.mainFrame().url()}.\n         */\n        url() {\n            return this.mainFrame().url();\n        }\n        /**\n         * The full HTML contents of the page, including the DOCTYPE.\n         */\n        async content() {\n            return await this.mainFrame().content();\n        }\n        /**\n         * Set the content of the page.\n         *\n         * @param html - HTML markup to assign to the page.\n         * @param options - Parameters that has some properties.\n         */\n        async setContent(html, options) {\n            await this.mainFrame().setContent(html, options);\n        }\n        /**\n         * {@inheritDoc Frame.goto}\n         */\n        async goto(url, options) {\n            return await this.mainFrame().goto(url, options);\n        }\n        /**\n         * Waits for the page to navigate to a new URL or to reload. It is useful when\n         * you run code that will indirectly cause the page to navigate.\n         *\n         * @example\n         *\n         * ```ts\n         * const [response] = await Promise.all([\n         *   page.waitForNavigation(), // The promise resolves after navigation has finished\n         *   page.click('a.my-link'), // Clicking the link will indirectly cause a navigation\n         * ]);\n         * ```\n         *\n         * @remarks\n         *\n         * Usage of the\n         * {@link https://developer.mozilla.org/en-US/docs/Web/API/History_API | History API}\n         * to change the URL is considered a navigation.\n         *\n         * @param options - Navigation parameters which might have the following\n         * properties:\n         * @returns A `Promise` which resolves to the main resource response.\n         *\n         * - In case of multiple redirects, the navigation will resolve with the\n         *   response of the last redirect.\n         * - In case of navigation to a different anchor or navigation due to History\n         *   API usage, the navigation will resolve with `null`.\n         */\n        async waitForNavigation(options = {}) {\n            return await this.mainFrame().waitForNavigation(options);\n        }\n        /**\n         * @param urlOrPredicate - A URL or predicate to wait for\n         * @param options - Optional waiting parameters\n         * @returns Promise which resolves to the matched request\n         * @example\n         *\n         * ```ts\n         * const firstRequest = await page.waitForRequest(\n         *   'https://example.com/resource'\n         * );\n         * const finalRequest = await page.waitForRequest(\n         *   request => request.url() === 'https://example.com'\n         * );\n         * return finalRequest.response()?.ok();\n         * ```\n         *\n         * @remarks\n         * Optional Waiting Parameters have:\n         *\n         * - `timeout`: Maximum wait time in milliseconds, defaults to `30` seconds, pass\n         *   `0` to disable the timeout. The default value can be changed by using the\n         *   {@link Page.setDefaultTimeout} method.\n         */\n        waitForRequest(urlOrPredicate, options = {}) {\n            const { timeout: ms = this._timeoutSettings.timeout(), signal } = options;\n            if (typeof urlOrPredicate === 'string') {\n                const url = urlOrPredicate;\n                urlOrPredicate = (request) => {\n                    return request.url() === url;\n                };\n            }\n            const observable$ = fromEmitterEvent(this, \"request\" /* PageEvent.Request */).pipe(filterAsync(urlOrPredicate), raceWith(timeout(ms), fromAbortSignal(signal), fromEmitterEvent(this, \"close\" /* PageEvent.Close */).pipe(map(() => {\n                throw new TargetCloseError('Page closed!');\n            }))));\n            return firstValueFrom(observable$);\n        }\n        /**\n         * @param urlOrPredicate - A URL or predicate to wait for.\n         * @param options - Optional waiting parameters\n         * @returns Promise which resolves to the matched response.\n         * @example\n         *\n         * ```ts\n         * const firstResponse = await page.waitForResponse(\n         *   'https://example.com/resource'\n         * );\n         * const finalResponse = await page.waitForResponse(\n         *   response =>\n         *     response.url() === 'https://example.com' && response.status() === 200\n         * );\n         * const finalResponse = await page.waitForResponse(async response => {\n         *   return (await response.text()).includes('<html>');\n         * });\n         * return finalResponse.ok();\n         * ```\n         *\n         * @remarks\n         * Optional Parameter have:\n         *\n         * - `timeout`: Maximum wait time in milliseconds, defaults to `30` seconds,\n         *   pass `0` to disable the timeout. The default value can be changed by using\n         *   the {@link Page.setDefaultTimeout} method.\n         */\n        waitForResponse(urlOrPredicate, options = {}) {\n            const { timeout: ms = this._timeoutSettings.timeout(), signal } = options;\n            if (typeof urlOrPredicate === 'string') {\n                const url = urlOrPredicate;\n                urlOrPredicate = (response) => {\n                    return response.url() === url;\n                };\n            }\n            const observable$ = fromEmitterEvent(this, \"response\" /* PageEvent.Response */).pipe(filterAsync(urlOrPredicate), raceWith(timeout(ms), fromAbortSignal(signal), fromEmitterEvent(this, \"close\" /* PageEvent.Close */).pipe(map(() => {\n                throw new TargetCloseError('Page closed!');\n            }))));\n            return firstValueFrom(observable$);\n        }\n        /**\n         * Waits for the network to be idle.\n         *\n         * @param options - Options to configure waiting behavior.\n         * @returns A promise which resolves once the network is idle.\n         */\n        waitForNetworkIdle(options = {}) {\n            return firstValueFrom(this.waitForNetworkIdle$(options));\n        }\n        /**\n         * @internal\n         */\n        waitForNetworkIdle$(options = {}) {\n            const { timeout: ms = this._timeoutSettings.timeout(), idleTime = NETWORK_IDLE_TIME, concurrency = 0, signal, } = options;\n            return this.#inflight$.pipe(switchMap(inflight => {\n                if (inflight > concurrency) {\n                    return EMPTY;\n                }\n                return timer(idleTime);\n            }), map(() => { }), raceWith(timeout(ms), fromAbortSignal(signal), fromEmitterEvent(this, \"close\" /* PageEvent.Close */).pipe(map(() => {\n                throw new TargetCloseError('Page closed!');\n            }))));\n        }\n        /**\n         * Waits for a frame matching the given conditions to appear.\n         *\n         * @example\n         *\n         * ```ts\n         * const frame = await page.waitForFrame(async frame => {\n         *   return frame.name() === 'Test';\n         * });\n         * ```\n         */\n        async waitForFrame(urlOrPredicate, options = {}) {\n            const { timeout: ms = this.getDefaultTimeout(), signal } = options;\n            const predicate = isString(urlOrPredicate)\n                ? (frame) => {\n                    return urlOrPredicate === frame.url();\n                }\n                : urlOrPredicate;\n            return await firstValueFrom(merge(fromEmitterEvent(this, \"frameattached\" /* PageEvent.FrameAttached */), fromEmitterEvent(this, \"framenavigated\" /* PageEvent.FrameNavigated */), from(this.frames())).pipe(filterAsync(predicate), first(), raceWith(timeout(ms), fromAbortSignal(signal), fromEmitterEvent(this, \"close\" /* PageEvent.Close */).pipe(map(() => {\n                throw new TargetCloseError('Page closed.');\n            })))));\n        }\n        /**\n         * Emulates a given device's metrics and user agent.\n         *\n         * To aid emulation, Puppeteer provides a list of known devices that can be\n         * via {@link KnownDevices}.\n         *\n         * @remarks\n         * This method is a shortcut for calling two methods:\n         * {@link Page.setUserAgent} and {@link Page.setViewport}.\n         *\n         * This method will resize the page. A lot of websites don't expect phones to\n         * change size, so you should emulate before navigating to the page.\n         *\n         * @example\n         *\n         * ```ts\n         * import {KnownDevices} from 'puppeteer';\n         * const iPhone = KnownDevices['iPhone 15 Pro'];\n         *\n         * (async () => {\n         *   const browser = await puppeteer.launch();\n         *   const page = await browser.newPage();\n         *   await page.emulate(iPhone);\n         *   await page.goto('https://www.google.com');\n         *   // other actions...\n         *   await browser.close();\n         * })();\n         * ```\n         */\n        async emulate(device) {\n            await Promise.all([\n                this.setUserAgent(device.userAgent),\n                this.setViewport(device.viewport),\n            ]);\n        }\n        /**\n         * Evaluates a function in the page's context and returns the result.\n         *\n         * If the function passed to `page.evaluate` returns a Promise, the\n         * function will wait for the promise to resolve and return its value.\n         *\n         * @example\n         *\n         * ```ts\n         * const result = await frame.evaluate(() => {\n         *   return Promise.resolve(8 * 7);\n         * });\n         * console.log(result); // prints \"56\"\n         * ```\n         *\n         * You can pass a string instead of a function (although functions are\n         * recommended as they are easier to debug and use with TypeScript):\n         *\n         * @example\n         *\n         * ```ts\n         * const aHandle = await page.evaluate('1 + 2');\n         * ```\n         *\n         * To get the best TypeScript experience, you should pass in as the\n         * generic the type of `pageFunction`:\n         *\n         * ```ts\n         * const aHandle = await page.evaluate(() => 2);\n         * ```\n         *\n         * @example\n         *\n         * {@link ElementHandle} instances (including {@link JSHandle}s) can be passed\n         * as arguments to the `pageFunction`:\n         *\n         * ```ts\n         * const bodyHandle = await page.$('body');\n         * const html = await page.evaluate(body => body.innerHTML, bodyHandle);\n         * await bodyHandle.dispose();\n         * ```\n         *\n         * @param pageFunction - a function that is run within the page\n         * @param args - arguments to be passed to the pageFunction\n         *\n         * @returns the return value of `pageFunction`.\n         */\n        async evaluate(pageFunction, ...args) {\n            pageFunction = withSourcePuppeteerURLIfNone(this.evaluate.name, pageFunction);\n            return await this.mainFrame().evaluate(pageFunction, ...args);\n        }\n        /**\n         * @internal\n         */\n        async _maybeWriteTypedArrayToFile(path, typedArray) {\n            if (!path) {\n                return;\n            }\n            await environment.value.fs.promises.writeFile(path, typedArray);\n        }\n        /**\n         * Captures a screencast of this {@link Page | page}.\n         *\n         * @example\n         * Recording a {@link Page | page}:\n         *\n         * ```\n         * import puppeteer from 'puppeteer';\n         *\n         * // Launch a browser\n         * const browser = await puppeteer.launch();\n         *\n         * // Create a new page\n         * const page = await browser.newPage();\n         *\n         * // Go to your site.\n         * await page.goto(\"https://www.example.com\");\n         *\n         * // Start recording.\n         * const recorder = await page.screencast({path: 'recording.webm'});\n         *\n         * // Do something.\n         *\n         * // Stop recording.\n         * await recorder.stop();\n         *\n         * browser.close();\n         * ```\n         *\n         * @param options - Configures screencast behavior.\n         *\n         * @experimental\n         *\n         * @remarks\n         *\n         * All recordings will be {@link https://www.webmproject.org/ | WebM} format using\n         * the {@link https://www.webmproject.org/vp9/ | VP9} video codec. The FPS is 30.\n         *\n         * You must have {@link https://ffmpeg.org/ | ffmpeg} installed on your system.\n         */\n        async screencast(options = {}) {\n            const ScreenRecorder = environment.value.ScreenRecorder;\n            const [width, height, devicePixelRatio] = await this.#getNativePixelDimensions();\n            let crop;\n            if (options.crop) {\n                const { x, y, width: cropWidth, height: cropHeight, } = roundRectangle(normalizeRectangle(options.crop));\n                if (x < 0 || y < 0) {\n                    throw new Error(`\\`crop.x\\` and \\`crop.y\\` must be greater than or equal to 0.`);\n                }\n                if (cropWidth <= 0 || cropHeight <= 0) {\n                    throw new Error(`\\`crop.height\\` and \\`crop.width\\` must be greater than or equal to 0.`);\n                }\n                const viewportWidth = width / devicePixelRatio;\n                const viewportHeight = height / devicePixelRatio;\n                if (x + cropWidth > viewportWidth) {\n                    throw new Error(`\\`crop.width\\` cannot be larger than the viewport width (${viewportWidth}).`);\n                }\n                if (y + cropHeight > viewportHeight) {\n                    throw new Error(`\\`crop.height\\` cannot be larger than the viewport height (${viewportHeight}).`);\n                }\n                crop = {\n                    x: x * devicePixelRatio,\n                    y: y * devicePixelRatio,\n                    width: cropWidth * devicePixelRatio,\n                    height: cropHeight * devicePixelRatio,\n                };\n            }\n            if (options.speed !== undefined && options.speed <= 0) {\n                throw new Error(`\\`speed\\` must be greater than 0.`);\n            }\n            if (options.scale !== undefined && options.scale <= 0) {\n                throw new Error(`\\`scale\\` must be greater than 0.`);\n            }\n            const recorder = new ScreenRecorder(this, width, height, {\n                ...options,\n                path: options.ffmpegPath,\n                crop,\n            });\n            try {\n                await this._startScreencast();\n            }\n            catch (error) {\n                void recorder.stop();\n                throw error;\n            }\n            if (options.path) {\n                const { createWriteStream } = environment.value.fs;\n                const stream = createWriteStream(options.path, 'binary');\n                recorder.pipe(stream);\n            }\n            return recorder;\n        }\n        #screencastSessionCount = 0;\n        #startScreencastPromise;\n        /**\n         * @internal\n         */\n        async _startScreencast() {\n            ++this.#screencastSessionCount;\n            if (!this.#startScreencastPromise) {\n                this.#startScreencastPromise = this.mainFrame()\n                    .client.send('Page.startScreencast', { format: 'png' })\n                    .then(() => {\n                    // Wait for the first frame.\n                    return new Promise(resolve => {\n                        return this.mainFrame().client.once('Page.screencastFrame', () => {\n                            return resolve();\n                        });\n                    });\n                });\n            }\n            await this.#startScreencastPromise;\n        }\n        /**\n         * @internal\n         */\n        async _stopScreencast() {\n            --this.#screencastSessionCount;\n            if (!this.#startScreencastPromise) {\n                return;\n            }\n            this.#startScreencastPromise = undefined;\n            if (this.#screencastSessionCount === 0) {\n                await this.mainFrame().client.send('Page.stopScreencast');\n            }\n        }\n        /**\n         * Gets the native, non-emulated dimensions of the viewport.\n         */\n        async #getNativePixelDimensions() {\n            const env_1 = { stack: [], error: void 0, hasError: false };\n            try {\n                const viewport = this.viewport();\n                const stack = __addDisposableResource(env_1, new DisposableStack(), false);\n                if (viewport && viewport.deviceScaleFactor !== 0) {\n                    await this.setViewport({ ...viewport, deviceScaleFactor: 0 });\n                    stack.defer(() => {\n                        void this.setViewport(viewport).catch(debugError);\n                    });\n                }\n                return await this.mainFrame()\n                    .isolatedRealm()\n                    .evaluate(() => {\n                    return [\n                        window.visualViewport.width * window.devicePixelRatio,\n                        window.visualViewport.height * window.devicePixelRatio,\n                        window.devicePixelRatio,\n                    ];\n                });\n            }\n            catch (e_1) {\n                env_1.error = e_1;\n                env_1.hasError = true;\n            }\n            finally {\n                __disposeResources(env_1);\n            }\n        }\n        async screenshot(userOptions = {}) {\n            const env_2 = { stack: [], error: void 0, hasError: false };\n            try {\n                const _guard = __addDisposableResource(env_2, await this.browserContext().startScreenshot(), false);\n                await this.bringToFront();\n                const options = {\n                    ...userOptions,\n                    clip: userOptions.clip\n                        ? {\n                            ...userOptions.clip,\n                        }\n                        : undefined,\n                };\n                if (options.type === undefined && options.path !== undefined) {\n                    const filePath = options.path;\n                    // Note we cannot use Node.js here due to browser compatibility.\n                    const extension = filePath\n                        .slice(filePath.lastIndexOf('.') + 1)\n                        .toLowerCase();\n                    switch (extension) {\n                        case 'png':\n                            options.type = 'png';\n                            break;\n                        case 'jpeg':\n                        case 'jpg':\n                            options.type = 'jpeg';\n                            break;\n                        case 'webp':\n                            options.type = 'webp';\n                            break;\n                    }\n                }\n                if (options.quality !== undefined) {\n                    if (options.quality < 0 || options.quality > 100) {\n                        throw new Error(`Expected 'quality' (${options.quality}) to be between 0 and 100, inclusive.`);\n                    }\n                    if (options.type === undefined ||\n                        !['jpeg', 'webp'].includes(options.type)) {\n                        throw new Error(`${options.type ?? 'png'} screenshots do not support 'quality'.`);\n                    }\n                }\n                if (options.clip) {\n                    if (options.clip.width <= 0) {\n                        throw new Error(\"'width' in 'clip' must be positive.\");\n                    }\n                    if (options.clip.height <= 0) {\n                        throw new Error(\"'height' in 'clip' must be positive.\");\n                    }\n                }\n                setDefaultScreenshotOptions(options);\n                const stack = __addDisposableResource(env_2, new AsyncDisposableStack(), true);\n                if (options.clip) {\n                    if (options.fullPage) {\n                        throw new Error(\"'clip' and 'fullPage' are mutually exclusive\");\n                    }\n                    options.clip = roundRectangle(normalizeRectangle(options.clip));\n                }\n                else {\n                    if (options.fullPage) {\n                        // If `captureBeyondViewport` is `false`, then we set the viewport to\n                        // capture the full page. Note this may be affected by on-page CSS and\n                        // JavaScript.\n                        if (!options.captureBeyondViewport) {\n                            const scrollDimensions = await this.mainFrame()\n                                .isolatedRealm()\n                                .evaluate(() => {\n                                const element = document.documentElement;\n                                return {\n                                    width: element.scrollWidth,\n                                    height: element.scrollHeight,\n                                };\n                            });\n                            const viewport = this.viewport();\n                            await this.setViewport({\n                                ...viewport,\n                                ...scrollDimensions,\n                            });\n                            stack.defer(async () => {\n                                await this.setViewport(viewport).catch(debugError);\n                            });\n                        }\n                    }\n                    else {\n                        options.captureBeyondViewport = false;\n                    }\n                }\n                const data = await this._screenshot(options);\n                if (options.encoding === 'base64') {\n                    return data;\n                }\n                const typedArray = stringToTypedArray(data, true);\n                await this._maybeWriteTypedArrayToFile(options.path, typedArray);\n                return typedArray;\n            }\n            catch (e_2) {\n                env_2.error = e_2;\n                env_2.hasError = true;\n            }\n            finally {\n                const result_1 = __disposeResources(env_2);\n                if (result_1)\n                    await result_1;\n            }\n        }\n        /**\n         * The page's title\n         *\n         * @remarks\n         *\n         * Shortcut for {@link Frame.title | page.mainFrame().title()}.\n         */\n        async title() {\n            return await this.mainFrame().title();\n        }\n        /**\n         * This method fetches an element with `selector`, scrolls it into view if\n         * needed, and then uses {@link Page.mouse} to click in the center of the\n         * element. If there's no element matching `selector`, the method throws an\n         * error.\n         *\n         * @remarks\n         *\n         * Bear in mind that if `click()` triggers a navigation event and\n         * there's a separate `page.waitForNavigation()` promise to be resolved, you\n         * may end up with a race condition that yields unexpected results. The\n         * correct pattern for click and wait for navigation is the following:\n         *\n         * ```ts\n         * const [response] = await Promise.all([\n         *   page.waitForNavigation(waitOptions),\n         *   page.click(selector, clickOptions),\n         * ]);\n         * ```\n         *\n         * Shortcut for {@link Frame.click | page.mainFrame().click(selector[, options]) }.\n         * @param selector -\n         * {@link https://pptr.dev/guides/page-interactions#selectors | selector}\n         * to query the page for.\n         * {@link https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Selectors | CSS selectors}\n         * can be passed as-is and a\n         * {@link https://pptr.dev/guides/page-interactions#non-css-selectors | Puppeteer-specific selector syntax}\n         * allows quering by\n         * {@link https://pptr.dev/guides/page-interactions#text-selectors--p-text | text},\n         * {@link https://pptr.dev/guides/page-interactions#aria-selectors--p-aria | a11y role and name},\n         * and\n         * {@link https://pptr.dev/guides/page-interactions#xpath-selectors--p-xpath | xpath}\n         * and\n         * {@link https://pptr.dev/guides/page-interactions#querying-elements-in-shadow-dom | combining these queries across shadow roots}.\n         * Alternatively, you can specify the selector type using a\n         * {@link https://pptr.dev/guides/page-interactions#prefixed-selector-syntax | prefix}. If there are\n         * multiple elements satisfying the `selector`, the first will be clicked\n         * @param options - `Object`\n         * @returns Promise which resolves when the element matching `selector` is\n         * successfully clicked. The Promise will be rejected if there is no element\n         * matching `selector`.\n         */\n        click(selector, options) {\n            return this.mainFrame().click(selector, options);\n        }\n        /**\n         * This method fetches an element with `selector` and focuses it. If\n         * there's no element matching `selector`, the method throws an error.\n         * @param selector -\n         * {@link https://pptr.dev/guides/page-interactions#selectors | selector}\n         * to query the page for.\n         * {@link https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Selectors | CSS selectors}\n         * can be passed as-is and a\n         * {@link https://pptr.dev/guides/page-interactions#non-css-selectors | Puppeteer-specific selector syntax}\n         * allows quering by\n         * {@link https://pptr.dev/guides/page-interactions#text-selectors--p-text | text},\n         * {@link https://pptr.dev/guides/page-interactions#aria-selectors--p-aria | a11y role and name},\n         * and\n         * {@link https://pptr.dev/guides/page-interactions#xpath-selectors--p-xpath | xpath}\n         * and\n         * {@link https://pptr.dev/guides/page-interactions#querying-elements-in-shadow-dom | combining these queries across shadow roots}.\n         * Alternatively, you can specify the selector type using a\n         * {@link https://pptr.dev/guides/page-interactions#prefixed-selector-syntax | prefix}.\n         * If there are multiple elements satisfying the selector, the first\n         * will be focused.\n         * @returns Promise which resolves when the element matching selector\n         * is successfully focused. The promise will be rejected if there is\n         * no element matching selector.\n         *\n         * @remarks\n         *\n         * Shortcut for\n         * {@link Frame.focus | page.mainFrame().focus(selector)}.\n         */\n        focus(selector) {\n            return this.mainFrame().focus(selector);\n        }\n        /**\n         * This method fetches an element with `selector`, scrolls it into view if\n         * needed, and then uses {@link Page.mouse}\n         * to hover over the center of the element.\n         * If there's no element matching `selector`, the method throws an error.\n         * @param selector -\n         * {@link https://pptr.dev/guides/page-interactions#selectors | selector}\n         * to query the page for.\n         * {@link https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Selectors | CSS selectors}\n         * can be passed as-is and a\n         * {@link https://pptr.dev/guides/page-interactions#non-css-selectors | Puppeteer-specific selector syntax}\n         * allows quering by\n         * {@link https://pptr.dev/guides/page-interactions#text-selectors--p-text | text},\n         * {@link https://pptr.dev/guides/page-interactions#aria-selectors--p-aria | a11y role and name},\n         * and\n         * {@link https://pptr.dev/guides/page-interactions#xpath-selectors--p-xpath | xpath}\n         * and\n         * {@link https://pptr.dev/guides/page-interactions#querying-elements-in-shadow-dom | combining these queries across shadow roots}.\n         * Alternatively, you can specify the selector type using a\n         * {@link https://pptr.dev/guides/page-interactions#prefixed-selector-syntax | prefix}. If there are\n         * multiple elements satisfying the `selector`, the first will be hovered.\n         * @returns Promise which resolves when the element matching `selector` is\n         * successfully hovered. Promise gets rejected if there's no element matching\n         * `selector`.\n         *\n         * @remarks\n         *\n         * Shortcut for {@link Page.hover | page.mainFrame().hover(selector)}.\n         */\n        hover(selector) {\n            return this.mainFrame().hover(selector);\n        }\n        /**\n         * Triggers a `change` and `input` event once all the provided options have been\n         * selected. If there's no `<select>` element matching `selector`, the method\n         * throws an error.\n         *\n         * @example\n         *\n         * ```ts\n         * page.select('select#colors', 'blue'); // single selection\n         * page.select('select#colors', 'red', 'green', 'blue'); // multiple selections\n         * ```\n         *\n         * @param selector -\n         * {@link https://pptr.dev/guides/page-interactions#selectors | selector}\n         * to query the page for.\n         * {@link https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Selectors | CSS selectors}\n         * can be passed as-is and a\n         * {@link https://pptr.dev/guides/page-interactions#non-css-selectors | Puppeteer-specific selector syntax}\n         * allows quering by\n         * {@link https://pptr.dev/guides/page-interactions#text-selectors--p-text | text},\n         * {@link https://pptr.dev/guides/page-interactions#aria-selectors--p-aria | a11y role and name},\n         * and\n         * {@link https://pptr.dev/guides/page-interactions#xpath-selectors--p-xpath | xpath}\n         * and\n         * {@link https://pptr.dev/guides/page-interactions#querying-elements-in-shadow-dom | combining these queries across shadow roots}.\n         * Alternatively, you can specify the selector type using a\n         * {@link https://pptr.dev/guides/page-interactions#prefixed-selector-syntax | prefix}.\n         * @param values - Values of options to select. If the `<select>` has the\n         * `multiple` attribute, all values are considered, otherwise only the first one\n         * is taken into account.\n         * @returns\n         *\n         * @remarks\n         *\n         * Shortcut for {@link Frame.select | page.mainFrame().select()}\n         */\n        select(selector, ...values) {\n            return this.mainFrame().select(selector, ...values);\n        }\n        /**\n         * This method fetches an element with `selector`, scrolls it into view if\n         * needed, and then uses {@link Page.touchscreen}\n         * to tap in the center of the element.\n         * If there's no element matching `selector`, the method throws an error.\n         * @param selector -\n         * {@link https://pptr.dev/guides/page-interactions#selectors | selector}\n         * to query the page for.\n         * {@link https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Selectors | CSS selectors}\n         * can be passed as-is and a\n         * {@link https://pptr.dev/guides/page-interactions#non-css-selectors | Puppeteer-specific selector syntax}\n         * allows quering by\n         * {@link https://pptr.dev/guides/page-interactions#text-selectors--p-text | text},\n         * {@link https://pptr.dev/guides/page-interactions#aria-selectors--p-aria | a11y role and name},\n         * and\n         * {@link https://pptr.dev/guides/page-interactions#xpath-selectors--p-xpath | xpath}\n         * and\n         * {@link https://pptr.dev/guides/page-interactions#querying-elements-in-shadow-dom | combining these queries across shadow roots}.\n         * Alternatively, you can specify the selector type using a\n         * {@link https://pptr.dev/guides/page-interactions#prefixed-selector-syntax | prefix}. If there are multiple elements satisfying the\n         * selector, the first will be tapped.\n         *\n         * @remarks\n         *\n         * Shortcut for {@link Frame.tap | page.mainFrame().tap(selector)}.\n         */\n        tap(selector) {\n            return this.mainFrame().tap(selector);\n        }\n        /**\n         * Sends a `keydown`, `keypress/input`, and `keyup` event for each character\n         * in the text.\n         *\n         * To press a special key, like `Control` or `ArrowDown`, use {@link Keyboard.press}.\n         * @example\n         *\n         * ```ts\n         * await page.type('#mytextarea', 'Hello');\n         * // Types instantly\n         * await page.type('#mytextarea', 'World', {delay: 100});\n         * // Types slower, like a user\n         * ```\n         *\n         * @param selector -\n         * {@link https://pptr.dev/guides/page-interactions#selectors | selector}\n         * to query the page for.\n         * {@link https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Selectors | CSS selectors}\n         * can be passed as-is and a\n         * {@link https://pptr.dev/guides/page-interactions#non-css-selectors | Puppeteer-specific selector syntax}\n         * allows quering by\n         * {@link https://pptr.dev/guides/page-interactions#text-selectors--p-text | text},\n         * {@link https://pptr.dev/guides/page-interactions#aria-selectors--p-aria | a11y role and name},\n         * and\n         * {@link https://pptr.dev/guides/page-interactions#xpath-selectors--p-xpath | xpath}\n         * and\n         * {@link https://pptr.dev/guides/page-interactions#querying-elements-in-shadow-dom | combining these queries across shadow roots}.\n         * Alternatively, you can specify the selector type using a\n         * {@link https://pptr.dev/guides/page-interactions#prefixed-selector-syntax | prefix}.\n         * @param text - A text to type into a focused element.\n         * @param options - have property `delay` which is the Time to wait between\n         * key presses in milliseconds. Defaults to `0`.\n         * @returns\n         */\n        type(selector, text, options) {\n            return this.mainFrame().type(selector, text, options);\n        }\n        /**\n         * Wait for the `selector` to appear in page. If at the moment of calling the\n         * method the `selector` already exists, the method will return immediately. If\n         * the `selector` doesn't appear after the `timeout` milliseconds of waiting, the\n         * function will throw.\n         *\n         * @example\n         * This method works across navigations:\n         *\n         * ```ts\n         * import puppeteer from 'puppeteer';\n         * (async () => {\n         *   const browser = await puppeteer.launch();\n         *   const page = await browser.newPage();\n         *   let currentURL;\n         *   page\n         *     .waitForSelector('img')\n         *     .then(() => console.log('First URL with image: ' + currentURL));\n         *   for (currentURL of [\n         *     'https://example.com',\n         *     'https://google.com',\n         *     'https://bbc.com',\n         *   ]) {\n         *     await page.goto(currentURL);\n         *   }\n         *   await browser.close();\n         * })();\n         * ```\n         *\n         * @param selector -\n         * {@link https://pptr.dev/guides/page-interactions#selectors | selector}\n         * to query the page for.\n         * {@link https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Selectors | CSS selectors}\n         * can be passed as-is and a\n         * {@link https://pptr.dev/guides/page-interactions#non-css-selectors | Puppeteer-specific selector syntax}\n         * allows quering by\n         * {@link https://pptr.dev/guides/page-interactions#text-selectors--p-text | text},\n         * {@link https://pptr.dev/guides/page-interactions#aria-selectors--p-aria | a11y role and name},\n         * and\n         * {@link https://pptr.dev/guides/page-interactions#xpath-selectors--p-xpath | xpath}\n         * and\n         * {@link https://pptr.dev/guides/page-interactions#querying-elements-in-shadow-dom | combining these queries across shadow roots}.\n         * Alternatively, you can specify the selector type using a\n         * {@link https://pptr.dev/guides/page-interactions#prefixed-selector-syntax | prefix}.\n         * @param options - Optional waiting parameters\n         * @returns Promise which resolves when element specified by selector string\n         * is added to DOM. Resolves to `null` if waiting for hidden: `true` and\n         * selector is not found in DOM.\n         *\n         * @remarks\n         * The optional Parameter in Arguments `options` are:\n         *\n         * - `visible`: A boolean wait for element to be present in DOM and to be\n         *   visible, i.e. to not have `display: none` or `visibility: hidden` CSS\n         *   properties. Defaults to `false`.\n         *\n         * - `hidden`: Wait for element to not be found in the DOM or to be hidden,\n         *   i.e. have `display: none` or `visibility: hidden` CSS properties. Defaults to\n         *   `false`.\n         *\n         * - `timeout`: maximum time to wait for in milliseconds. Defaults to `30000`\n         *   (30 seconds). Pass `0` to disable timeout. The default value can be changed\n         *   by using the {@link Page.setDefaultTimeout} method.\n         */\n        async waitForSelector(selector, options = {}) {\n            return await this.mainFrame().waitForSelector(selector, options);\n        }\n        /**\n         * Waits for the provided function, `pageFunction`, to return a truthy value when\n         * evaluated in the page's context.\n         *\n         * @example\n         * {@link Page.waitForFunction} can be used to observe a viewport size change:\n         *\n         * ```ts\n         * import puppeteer from 'puppeteer';\n         * (async () => {\n         *   const browser = await puppeteer.launch();\n         *   const page = await browser.newPage();\n         *   const watchDog = page.waitForFunction('window.innerWidth < 100');\n         *   await page.setViewport({width: 50, height: 50});\n         *   await watchDog;\n         *   await browser.close();\n         * })();\n         * ```\n         *\n         * @example\n         * Arguments can be passed from Node.js to `pageFunction`:\n         *\n         * ```ts\n         * const selector = '.foo';\n         * await page.waitForFunction(\n         *   selector => !!document.querySelector(selector),\n         *   {},\n         *   selector\n         * );\n         * ```\n         *\n         * @example\n         * The provided `pageFunction` can be asynchronous:\n         *\n         * ```ts\n         * const username = 'github-username';\n         * await page.waitForFunction(\n         *   async username => {\n         *     const githubResponse = await fetch(\n         *       `https://api.github.com/users/${username}`\n         *     );\n         *     const githubUser = await githubResponse.json();\n         *     // show the avatar\n         *     const img = document.createElement('img');\n         *     img.src = githubUser.avatar_url;\n         *     // wait 3 seconds\n         *     await new Promise((resolve, reject) => setTimeout(resolve, 3000));\n         *     img.remove();\n         *   },\n         *   {},\n         *   username\n         * );\n         * ```\n         *\n         * @param pageFunction - Function to be evaluated in browser context until it returns a\n         * truthy value.\n         * @param options - Options for configuring waiting behavior.\n         */\n        waitForFunction(pageFunction, options, ...args) {\n            return this.mainFrame().waitForFunction(pageFunction, options, ...args);\n        }\n        /** @internal */\n        [(_screenshot_decorators = [guarded(function () {\n                return this.browser();\n            })], disposeSymbol)]() {\n            return void this.close().catch(debugError);\n        }\n        /** @internal */\n        [asyncDisposeSymbol]() {\n            return this.close();\n        }\n    };\n})();\nexport { Page };\n/**\n * @internal\n */\nexport const supportedMetrics = new Set([\n    'Timestamp',\n    'Documents',\n    'Frames',\n    'JSEventListeners',\n    'Nodes',\n    'LayoutCount',\n    'RecalcStyleCount',\n    'LayoutDuration',\n    'RecalcStyleDuration',\n    'ScriptDuration',\n    'TaskDuration',\n    'JSHeapUsedSize',\n    'JSHeapTotalSize',\n]);\n/** @see https://w3c.github.io/webdriver-bidi/#normalize-rect */\nfunction normalizeRectangle(clip) {\n    return {\n        ...clip,\n        ...(clip.width < 0\n            ? {\n                x: clip.x + clip.width,\n                width: -clip.width,\n            }\n            : {\n                x: clip.x,\n                width: clip.width,\n            }),\n        ...(clip.height < 0\n            ? {\n                y: clip.y + clip.height,\n                height: -clip.height,\n            }\n            : {\n                y: clip.y,\n                height: clip.height,\n            }),\n    };\n}\nfunction roundRectangle(clip) {\n    const x = Math.round(clip.x);\n    const y = Math.round(clip.y);\n    const width = Math.round(clip.width + clip.x - x);\n    const height = Math.round(clip.height + clip.y - y);\n    return { ...clip, x, y, width, height };\n}\n//# sourceMappingURL=Page.js.map","/**\n * @license\n * Copyright 2020 Google Inc.\n * SPDX-License-Identifier: Apache-2.0\n */\n/**\n * ConsoleMessage objects are dispatched by page via the 'console' event.\n * @public\n */\nexport class ConsoleMessage {\n    #type;\n    #text;\n    #args;\n    #stackTraceLocations;\n    /**\n     * @internal\n     */\n    constructor(type, text, args, stackTraceLocations) {\n        this.#type = type;\n        this.#text = text;\n        this.#args = args;\n        this.#stackTraceLocations = stackTraceLocations;\n    }\n    /**\n     * The type of the console message.\n     */\n    type() {\n        return this.#type;\n    }\n    /**\n     * The text of the console message.\n     */\n    text() {\n        return this.#text;\n    }\n    /**\n     * An array of arguments passed to the console.\n     */\n    args() {\n        return this.#args;\n    }\n    /**\n     * The location of the console message.\n     */\n    location() {\n        return this.#stackTraceLocations[0] ?? {};\n    }\n    /**\n     * The array of locations on the stack of the console message.\n     */\n    stackTrace() {\n        return this.#stackTraceLocations;\n    }\n}\n//# sourceMappingURL=ConsoleMessage.js.map","/**\n * @license\n * Copyright 2020 Google Inc.\n * SPDX-License-Identifier: Apache-2.0\n */\nimport { assert } from '../util/assert.js';\n/**\n * File choosers let you react to the page requesting for a file.\n *\n * @remarks\n * `FileChooser` instances are returned via the {@link Page.waitForFileChooser} method.\n *\n * In browsers, only one file chooser can be opened at a time.\n * All file choosers must be accepted or canceled. Not doing so will prevent\n * subsequent file choosers from appearing.\n *\n * @example\n *\n * ```ts\n * const [fileChooser] = await Promise.all([\n *   page.waitForFileChooser(),\n *   page.click('#upload-file-button'), // some button that triggers file selection\n * ]);\n * await fileChooser.accept(['/tmp/myfile.pdf']);\n * ```\n *\n * @public\n */\nexport class FileChooser {\n    #element;\n    #multiple;\n    #handled = false;\n    /**\n     * @internal\n     */\n    constructor(element, event) {\n        this.#element = element;\n        this.#multiple = event.mode !== 'selectSingle';\n    }\n    /**\n     * Whether file chooser allow for\n     * {@link https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input/file#attr-multiple | multiple}\n     * file selection.\n     */\n    isMultiple() {\n        return this.#multiple;\n    }\n    /**\n     * Accept the file chooser request with the given file paths.\n     *\n     * @remarks This will not validate whether the file paths exists. Also, if a\n     * path is relative, then it is resolved against the\n     * {@link https://nodejs.org/api/process.html#process_process_cwd | current working directory}.\n     * For locals script connecting to remote chrome environments, paths must be\n     * absolute.\n     */\n    async accept(paths) {\n        assert(!this.#handled, 'Cannot accept FileChooser which is already handled!');\n        this.#handled = true;\n        await this.#element.uploadFile(...paths);\n    }\n    /**\n     * Closes the file chooser without selecting any files.\n     */\n    async cancel() {\n        assert(!this.#handled, 'Cannot cancel FileChooser which is already handled!');\n        this.#handled = true;\n        // XXX: These events should converted to trusted events. Perhaps do this\n        // in `DOM.setFileInputFiles`?\n        await this.#element.evaluate(element => {\n            element.dispatchEvent(new Event('cancel', { bubbles: true }));\n        });\n    }\n}\n//# sourceMappingURL=FileChooser.js.map","/**\n * @license\n * Copyright 2022 Google Inc.\n * SPDX-License-Identifier: Apache-2.0\n */\n/**\n * We use symbols to prevent any external parties listening to these events.\n * They are internal to Puppeteer.\n *\n * @internal\n */\n// eslint-disable-next-line @typescript-eslint/no-namespace\nexport var NetworkManagerEvent;\n(function (NetworkManagerEvent) {\n    NetworkManagerEvent.Request = Symbol('NetworkManager.Request');\n    NetworkManagerEvent.RequestServedFromCache = Symbol('NetworkManager.RequestServedFromCache');\n    NetworkManagerEvent.Response = Symbol('NetworkManager.Response');\n    NetworkManagerEvent.RequestFailed = Symbol('NetworkManager.RequestFailed');\n    NetworkManagerEvent.RequestFinished = Symbol('NetworkManager.RequestFinished');\n})(NetworkManagerEvent || (NetworkManagerEvent = {}));\n//# sourceMappingURL=NetworkManagerEvents.js.map","/**\n * @license\n * Copyright 2023 Google Inc.\n * SPDX-License-Identifier: Apache-2.0\n */\nvar __runInitializers = (this && this.__runInitializers) || function (thisArg, initializers, value) {\n    var useValue = arguments.length > 2;\n    for (var i = 0; i < initializers.length; i++) {\n        value = useValue ? initializers[i].call(thisArg, value) : initializers[i].call(thisArg);\n    }\n    return useValue ? value : void 0;\n};\nvar __esDecorate = (this && this.__esDecorate) || function (ctor, descriptorIn, decorators, contextIn, initializers, extraInitializers) {\n    function accept(f) { if (f !== void 0 && typeof f !== \"function\") throw new TypeError(\"Function expected\"); return f; }\n    var kind = contextIn.kind, key = kind === \"getter\" ? \"get\" : kind === \"setter\" ? \"set\" : \"value\";\n    var target = !descriptorIn && ctor ? contextIn[\"static\"] ? ctor : ctor.prototype : null;\n    var descriptor = descriptorIn || (target ? Object.getOwnPropertyDescriptor(target, contextIn.name) : {});\n    var _, done = false;\n    for (var i = decorators.length - 1; i >= 0; i--) {\n        var context = {};\n        for (var p in contextIn) context[p] = p === \"access\" ? {} : contextIn[p];\n        for (var p in contextIn.access) context.access[p] = contextIn.access[p];\n        context.addInitializer = function (f) { if (done) throw new TypeError(\"Cannot add initializers after decoration has completed\"); extraInitializers.push(accept(f || null)); };\n        var result = (0, decorators[i])(kind === \"accessor\" ? { get: descriptor.get, set: descriptor.set } : descriptor[key], context);\n        if (kind === \"accessor\") {\n            if (result === void 0) continue;\n            if (result === null || typeof result !== \"object\") throw new TypeError(\"Object expected\");\n            if (_ = accept(result.get)) descriptor.get = _;\n            if (_ = accept(result.set)) descriptor.set = _;\n            if (_ = accept(result.init)) initializers.unshift(_);\n        }\n        else if (_ = accept(result)) {\n            if (kind === \"field\") initializers.unshift(_);\n            else descriptor[key] = _;\n        }\n    }\n    if (target) Object.defineProperty(target, contextIn.name, descriptor);\n    done = true;\n};\nvar __addDisposableResource = (this && this.__addDisposableResource) || function (env, value, async) {\n    if (value !== null && value !== void 0) {\n        if (typeof value !== \"object\" && typeof value !== \"function\") throw new TypeError(\"Object expected.\");\n        var dispose, inner;\n        if (async) {\n            if (!Symbol.asyncDispose) throw new TypeError(\"Symbol.asyncDispose is not defined.\");\n            dispose = value[Symbol.asyncDispose];\n        }\n        if (dispose === void 0) {\n            if (!Symbol.dispose) throw new TypeError(\"Symbol.dispose is not defined.\");\n            dispose = value[Symbol.dispose];\n            if (async) inner = dispose;\n        }\n        if (typeof dispose !== \"function\") throw new TypeError(\"Object not disposable.\");\n        if (inner) dispose = function() { try { inner.call(this); } catch (e) { return Promise.reject(e); } };\n        env.stack.push({ value: value, dispose: dispose, async: async });\n    }\n    else if (async) {\n        env.stack.push({ async: true });\n    }\n    return value;\n};\nvar __disposeResources = (this && this.__disposeResources) || (function (SuppressedError) {\n    return function (env) {\n        function fail(e) {\n            env.error = env.hasError ? new SuppressedError(e, env.error, \"An error was suppressed during disposal.\") : e;\n            env.hasError = true;\n        }\n        function next() {\n            while (env.stack.length) {\n                var rec = env.stack.pop();\n                try {\n                    var result = rec.dispose && rec.dispose.call(rec.value);\n                    if (rec.async) return Promise.resolve(result).then(next, function(e) { fail(e); return next(); });\n                }\n                catch (e) {\n                    fail(e);\n                }\n            }\n            if (env.hasError) throw env.error;\n        }\n        return next();\n    };\n})(typeof SuppressedError === \"function\" ? SuppressedError : function (error, suppressed, message) {\n    var e = new Error(message);\n    return e.name = \"SuppressedError\", e.error = error, e.suppressed = suppressed, e;\n});\nimport { debugError, withSourcePuppeteerURLIfNone } from '../common/util.js';\nimport { moveable, throwIfDisposed } from '../util/decorators.js';\nimport { disposeSymbol, asyncDisposeSymbol } from '../util/disposable.js';\n/**\n * Represents a reference to a JavaScript object. Instances can be created using\n * {@link Page.evaluateHandle}.\n *\n * Handles prevent the referenced JavaScript object from being garbage-collected\n * unless the handle is purposely {@link JSHandle.dispose | disposed}. JSHandles\n * are auto-disposed when their associated frame is navigated away or the parent\n * context gets destroyed.\n *\n * Handles can be used as arguments for any evaluation function such as\n * {@link Page.$eval}, {@link Page.evaluate}, and {@link Page.evaluateHandle}.\n * They are resolved to their referenced object.\n *\n * @example\n *\n * ```ts\n * const windowHandle = await page.evaluateHandle(() => window);\n * ```\n *\n * @public\n */\nlet JSHandle = (() => {\n    let _classDecorators = [moveable];\n    let _classDescriptor;\n    let _classExtraInitializers = [];\n    let _classThis;\n    let _instanceExtraInitializers = [];\n    let _getProperty_decorators;\n    let _getProperties_decorators;\n    var JSHandle = class {\n        static { _classThis = this; }\n        static {\n            const _metadata = typeof Symbol === \"function\" && Symbol.metadata ? Object.create(null) : void 0;\n            __esDecorate(this, null, _getProperty_decorators, { kind: \"method\", name: \"getProperty\", static: false, private: false, access: { has: obj => \"getProperty\" in obj, get: obj => obj.getProperty }, metadata: _metadata }, null, _instanceExtraInitializers);\n            __esDecorate(this, null, _getProperties_decorators, { kind: \"method\", name: \"getProperties\", static: false, private: false, access: { has: obj => \"getProperties\" in obj, get: obj => obj.getProperties }, metadata: _metadata }, null, _instanceExtraInitializers);\n            __esDecorate(null, _classDescriptor = { value: _classThis }, _classDecorators, { kind: \"class\", name: _classThis.name, metadata: _metadata }, null, _classExtraInitializers);\n            JSHandle = _classThis = _classDescriptor.value;\n            if (_metadata) Object.defineProperty(_classThis, Symbol.metadata, { enumerable: true, configurable: true, writable: true, value: _metadata });\n            __runInitializers(_classThis, _classExtraInitializers);\n        }\n        /**\n         * @internal\n         */\n        constructor() {\n            __runInitializers(this, _instanceExtraInitializers);\n        }\n        /**\n         * Evaluates the given function with the current handle as its first argument.\n         */\n        async evaluate(pageFunction, ...args) {\n            pageFunction = withSourcePuppeteerURLIfNone(this.evaluate.name, pageFunction);\n            return await this.realm.evaluate(pageFunction, this, ...args);\n        }\n        /**\n         * Evaluates the given function with the current handle as its first argument.\n         *\n         */\n        async evaluateHandle(pageFunction, ...args) {\n            pageFunction = withSourcePuppeteerURLIfNone(this.evaluateHandle.name, pageFunction);\n            return await this.realm.evaluateHandle(pageFunction, this, ...args);\n        }\n        /**\n         * @internal\n         */\n        async getProperty(propertyName) {\n            return await this.evaluateHandle((object, propertyName) => {\n                return object[propertyName];\n            }, propertyName);\n        }\n        /**\n         * Gets a map of handles representing the properties of the current handle.\n         *\n         * @example\n         *\n         * ```ts\n         * const listHandle = await page.evaluateHandle(() => document.body.children);\n         * const properties = await listHandle.getProperties();\n         * const children = [];\n         * for (const property of properties.values()) {\n         *   const element = property.asElement();\n         *   if (element) {\n         *     children.push(element);\n         *   }\n         * }\n         * children; // holds elementHandles to all children of document.body\n         * ```\n         */\n        async getProperties() {\n            const propertyNames = await this.evaluate(object => {\n                const enumerableProperties = [];\n                const descriptors = Object.getOwnPropertyDescriptors(object);\n                for (const propertyName in descriptors) {\n                    if (descriptors[propertyName]?.enumerable) {\n                        enumerableProperties.push(propertyName);\n                    }\n                }\n                return enumerableProperties;\n            });\n            const map = new Map();\n            const results = await Promise.all(propertyNames.map(key => {\n                return this.getProperty(key);\n            }));\n            for (const [key, value] of Object.entries(propertyNames)) {\n                const env_1 = { stack: [], error: void 0, hasError: false };\n                try {\n                    const handle = __addDisposableResource(env_1, results[key], false);\n                    if (handle) {\n                        map.set(value, handle.move());\n                    }\n                }\n                catch (e_1) {\n                    env_1.error = e_1;\n                    env_1.hasError = true;\n                }\n                finally {\n                    __disposeResources(env_1);\n                }\n            }\n            return map;\n        }\n        /** @internal */\n        [(_getProperty_decorators = [throwIfDisposed()], _getProperties_decorators = [throwIfDisposed()], disposeSymbol)]() {\n            return void this.dispose().catch(debugError);\n        }\n        /** @internal */\n        [asyncDisposeSymbol]() {\n            return this.dispose();\n        }\n    };\n    return JSHandle = _classThis;\n})();\nexport { JSHandle };\n//# sourceMappingURL=JSHandle.js.map","var __addDisposableResource = (this && this.__addDisposableResource) || function (env, value, async) {\n    if (value !== null && value !== void 0) {\n        if (typeof value !== \"object\" && typeof value !== \"function\") throw new TypeError(\"Object expected.\");\n        var dispose, inner;\n        if (async) {\n            if (!Symbol.asyncDispose) throw new TypeError(\"Symbol.asyncDispose is not defined.\");\n            dispose = value[Symbol.asyncDispose];\n        }\n        if (dispose === void 0) {\n            if (!Symbol.dispose) throw new TypeError(\"Symbol.dispose is not defined.\");\n            dispose = value[Symbol.dispose];\n            if (async) inner = dispose;\n        }\n        if (typeof dispose !== \"function\") throw new TypeError(\"Object not disposable.\");\n        if (inner) dispose = function() { try { inner.call(this); } catch (e) { return Promise.reject(e); } };\n        env.stack.push({ value: value, dispose: dispose, async: async });\n    }\n    else if (async) {\n        env.stack.push({ async: true });\n    }\n    return value;\n};\nvar __disposeResources = (this && this.__disposeResources) || (function (SuppressedError) {\n    return function (env) {\n        function fail(e) {\n            env.error = env.hasError ? new SuppressedError(e, env.error, \"An error was suppressed during disposal.\") : e;\n            env.hasError = true;\n        }\n        function next() {\n            while (env.stack.length) {\n                var rec = env.stack.pop();\n                try {\n                    var result = rec.dispose && rec.dispose.call(rec.value);\n                    if (rec.async) return Promise.resolve(result).then(next, function(e) { fail(e); return next(); });\n                }\n                catch (e) {\n                    fail(e);\n                }\n            }\n            if (env.hasError) throw env.error;\n        }\n        return next();\n    };\n})(typeof SuppressedError === \"function\" ? SuppressedError : function (error, suppressed, message) {\n    var e = new Error(message);\n    return e.name = \"SuppressedError\", e.error = error, e.suppressed = suppressed, e;\n});\n/**\n * @license\n * Copyright 2024 Google Inc.\n * SPDX-License-Identifier: Apache-2.0\n */\nimport { JSHandle } from '../api/JSHandle.js';\nimport { debugError } from '../common/util.js';\nimport { DisposableStack } from '../util/disposable.js';\nimport { isErrorLike } from '../util/ErrorLike.js';\n/**\n * @internal\n */\nexport class Binding {\n    #name;\n    #fn;\n    #initSource;\n    constructor(name, fn, initSource) {\n        this.#name = name;\n        this.#fn = fn;\n        this.#initSource = initSource;\n    }\n    get name() {\n        return this.#name;\n    }\n    get initSource() {\n        return this.#initSource;\n    }\n    /**\n     * @param context - Context to run the binding in; the context should have\n     * the binding added to it beforehand.\n     * @param id - ID of the call. This should come from the CDP\n     * `onBindingCalled` response.\n     * @param args - Plain arguments from CDP.\n     */\n    async run(context, id, args, isTrivial) {\n        const stack = new DisposableStack();\n        try {\n            if (!isTrivial) {\n                const env_1 = { stack: [], error: void 0, hasError: false };\n                try {\n                    // Getting non-trivial arguments.\n                    const handles = __addDisposableResource(env_1, await context.evaluateHandle((name, seq) => {\n                        // @ts-expect-error Code is evaluated in a different context.\n                        return globalThis[name].args.get(seq);\n                    }, this.#name, id), false);\n                    const properties = await handles.getProperties();\n                    for (const [index, handle] of properties) {\n                        // This is not straight-forward since some arguments can stringify, but\n                        // aren't plain objects so add subtypes when the use-case arises.\n                        if (index in args) {\n                            switch (handle.remoteObject().subtype) {\n                                case 'node':\n                                    args[+index] = handle;\n                                    break;\n                                default:\n                                    stack.use(handle);\n                            }\n                        }\n                        else {\n                            stack.use(handle);\n                        }\n                    }\n                }\n                catch (e_1) {\n                    env_1.error = e_1;\n                    env_1.hasError = true;\n                }\n                finally {\n                    __disposeResources(env_1);\n                }\n            }\n            await context.evaluate((name, seq, result) => {\n                // @ts-expect-error Code is evaluated in a different context.\n                const callbacks = globalThis[name].callbacks;\n                callbacks.get(seq).resolve(result);\n                callbacks.delete(seq);\n            }, this.#name, id, await this.#fn(...args));\n            for (const arg of args) {\n                if (arg instanceof JSHandle) {\n                    stack.use(arg);\n                }\n            }\n        }\n        catch (error) {\n            if (isErrorLike(error)) {\n                await context\n                    .evaluate((name, seq, message, stack) => {\n                    const error = new Error(message);\n                    error.stack = stack;\n                    // @ts-expect-error Code is evaluated in a different context.\n                    const callbacks = globalThis[name].callbacks;\n                    callbacks.get(seq).reject(error);\n                    callbacks.delete(seq);\n                }, this.#name, id, error.message, error.stack)\n                    .catch(debugError);\n            }\n            else {\n                await context\n                    .evaluate((name, seq, error) => {\n                    // @ts-expect-error Code is evaluated in a different context.\n                    const callbacks = globalThis[name].callbacks;\n                    callbacks.get(seq).reject(error);\n                    callbacks.delete(seq);\n                }, this.#name, id, error)\n                    .catch(debugError);\n            }\n        }\n    }\n}\n//# sourceMappingURL=Binding.js.map","/**\n * @license\n * Copyright 2017 Google Inc.\n * SPDX-License-Identifier: Apache-2.0\n */\nimport { CDPSessionEvent, } from '../api/CDPSession.js';\nimport { CallbackRegistry } from '../common/CallbackRegistry.js';\nimport { debug } from '../common/Debug.js';\nimport { TargetCloseError } from '../common/Errors.js';\nimport { EventEmitter } from '../common/EventEmitter.js';\nimport { createProtocolErrorMessage } from '../util/ErrorLike.js';\nimport { CdpCDPSession } from './CDPSession.js';\nconst debugProtocolSend = debug('puppeteer:protocol:SEND ►');\nconst debugProtocolReceive = debug('puppeteer:protocol:RECV ◀');\n/**\n * @public\n */\nexport class Connection extends EventEmitter {\n    #url;\n    #transport;\n    #delay;\n    #timeout;\n    #sessions = new Map();\n    #closed = false;\n    #manuallyAttached = new Set();\n    #callbacks = new CallbackRegistry();\n    constructor(url, transport, delay = 0, timeout) {\n        super();\n        this.#url = url;\n        this.#delay = delay;\n        this.#timeout = timeout ?? 180_000;\n        this.#transport = transport;\n        this.#transport.onmessage = this.onMessage.bind(this);\n        this.#transport.onclose = this.#onClose.bind(this);\n    }\n    static fromSession(session) {\n        return session.connection();\n    }\n    /**\n     * @internal\n     */\n    get delay() {\n        return this.#delay;\n    }\n    get timeout() {\n        return this.#timeout;\n    }\n    /**\n     * @internal\n     */\n    get _closed() {\n        return this.#closed;\n    }\n    /**\n     * @internal\n     */\n    get _sessions() {\n        return this.#sessions;\n    }\n    /**\n     * @param sessionId - The session id\n     * @returns The current CDP session if it exists\n     */\n    session(sessionId) {\n        return this.#sessions.get(sessionId) || null;\n    }\n    url() {\n        return this.#url;\n    }\n    send(method, params, options) {\n        // There is only ever 1 param arg passed, but the Protocol defines it as an\n        // array of 0 or 1 items See this comment:\n        // https://github.com/ChromeDevTools/devtools-protocol/pull/113#issuecomment-412603285\n        // which explains why the protocol defines the params this way for better\n        // type-inference.\n        // So now we check if there are any params or not and deal with them accordingly.\n        return this._rawSend(this.#callbacks, method, params, undefined, options);\n    }\n    /**\n     * @internal\n     */\n    _rawSend(callbacks, method, params, sessionId, options) {\n        if (this.#closed) {\n            return Promise.reject(new Error('Protocol error: Connection closed.'));\n        }\n        return callbacks.create(method, options?.timeout ?? this.#timeout, id => {\n            const stringifiedMessage = JSON.stringify({\n                method,\n                params,\n                id,\n                sessionId,\n            });\n            debugProtocolSend(stringifiedMessage);\n            this.#transport.send(stringifiedMessage);\n        });\n    }\n    /**\n     * @internal\n     */\n    async closeBrowser() {\n        await this.send('Browser.close');\n    }\n    /**\n     * @internal\n     */\n    async onMessage(message) {\n        if (this.#delay) {\n            await new Promise(r => {\n                return setTimeout(r, this.#delay);\n            });\n        }\n        debugProtocolReceive(message);\n        const object = JSON.parse(message);\n        if (object.method === 'Target.attachedToTarget') {\n            const sessionId = object.params.sessionId;\n            const session = new CdpCDPSession(this, object.params.targetInfo.type, sessionId, object.sessionId);\n            this.#sessions.set(sessionId, session);\n            this.emit(CDPSessionEvent.SessionAttached, session);\n            const parentSession = this.#sessions.get(object.sessionId);\n            if (parentSession) {\n                parentSession.emit(CDPSessionEvent.SessionAttached, session);\n            }\n        }\n        else if (object.method === 'Target.detachedFromTarget') {\n            const session = this.#sessions.get(object.params.sessionId);\n            if (session) {\n                session._onClosed();\n                this.#sessions.delete(object.params.sessionId);\n                this.emit(CDPSessionEvent.SessionDetached, session);\n                const parentSession = this.#sessions.get(object.sessionId);\n                if (parentSession) {\n                    parentSession.emit(CDPSessionEvent.SessionDetached, session);\n                }\n            }\n        }\n        if (object.sessionId) {\n            const session = this.#sessions.get(object.sessionId);\n            if (session) {\n                session._onMessage(object);\n            }\n        }\n        else if (object.id) {\n            if (object.error) {\n                this.#callbacks.reject(object.id, createProtocolErrorMessage(object), object.error.message);\n            }\n            else {\n                this.#callbacks.resolve(object.id, object.result);\n            }\n        }\n        else {\n            this.emit(object.method, object.params);\n        }\n    }\n    #onClose() {\n        if (this.#closed) {\n            return;\n        }\n        this.#closed = true;\n        this.#transport.onmessage = undefined;\n        this.#transport.onclose = undefined;\n        this.#callbacks.clear();\n        for (const session of this.#sessions.values()) {\n            session._onClosed();\n        }\n        this.#sessions.clear();\n        this.emit(CDPSessionEvent.Disconnected, undefined);\n    }\n    dispose() {\n        this.#onClose();\n        this.#transport.close();\n    }\n    /**\n     * @internal\n     */\n    isAutoAttached(targetId) {\n        return !this.#manuallyAttached.has(targetId);\n    }\n    /**\n     * @internal\n     */\n    async _createSession(targetInfo, isAutoAttachEmulated = true) {\n        if (!isAutoAttachEmulated) {\n            this.#manuallyAttached.add(targetInfo.targetId);\n        }\n        const { sessionId } = await this.send('Target.attachToTarget', {\n            targetId: targetInfo.targetId,\n            flatten: true,\n        });\n        this.#manuallyAttached.delete(targetInfo.targetId);\n        const session = this.#sessions.get(sessionId);\n        if (!session) {\n            throw new Error('CDPSession creation failed.');\n        }\n        return session;\n    }\n    /**\n     * @param targetInfo - The target info\n     * @returns The CDP session that is created\n     */\n    async createSession(targetInfo) {\n        return await this._createSession(targetInfo, false);\n    }\n    /**\n     * @internal\n     */\n    getPendingProtocolErrors() {\n        const result = [];\n        result.push(...this.#callbacks.getPendingProtocolErrors());\n        for (const session of this.#sessions.values()) {\n            result.push(...session.getPendingProtocolErrors());\n        }\n        return result;\n    }\n}\n/**\n * @internal\n */\nexport function isTargetClosedError(error) {\n    return error instanceof TargetCloseError;\n}\n//# sourceMappingURL=Connection.js.map","/**\n * @license\n * Copyright 2017 Google Inc.\n * SPDX-License-Identifier: Apache-2.0\n */\nimport { EventEmitter } from '../common/EventEmitter.js';\nimport { debugError, PuppeteerURL } from '../common/util.js';\nimport { assert } from '../util/assert.js';\nimport { DisposableStack } from '../util/disposable.js';\n/**\n * The Coverage class provides methods to gather information about parts of\n * JavaScript and CSS that were used by the page.\n *\n * @remarks\n * To output coverage in a form consumable by {@link https://github.com/istanbuljs | Istanbul},\n * see {@link https://github.com/istanbuljs/puppeteer-to-istanbul | puppeteer-to-istanbul}.\n *\n * @example\n * An example of using JavaScript and CSS coverage to get percentage of initially\n * executed code:\n *\n * ```ts\n * // Enable both JavaScript and CSS coverage\n * await Promise.all([\n *   page.coverage.startJSCoverage(),\n *   page.coverage.startCSSCoverage(),\n * ]);\n * // Navigate to page\n * await page.goto('https://example.com');\n * // Disable both JavaScript and CSS coverage\n * const [jsCoverage, cssCoverage] = await Promise.all([\n *   page.coverage.stopJSCoverage(),\n *   page.coverage.stopCSSCoverage(),\n * ]);\n * let totalBytes = 0;\n * let usedBytes = 0;\n * const coverage = [...jsCoverage, ...cssCoverage];\n * for (const entry of coverage) {\n *   totalBytes += entry.text.length;\n *   for (const range of entry.ranges) usedBytes += range.end - range.start - 1;\n * }\n * console.log(`Bytes used: ${(usedBytes / totalBytes) * 100}%`);\n * ```\n *\n * @public\n */\nexport class Coverage {\n    #jsCoverage;\n    #cssCoverage;\n    /**\n     * @internal\n     */\n    constructor(client) {\n        this.#jsCoverage = new JSCoverage(client);\n        this.#cssCoverage = new CSSCoverage(client);\n    }\n    /**\n     * @internal\n     */\n    updateClient(client) {\n        this.#jsCoverage.updateClient(client);\n        this.#cssCoverage.updateClient(client);\n    }\n    /**\n     * @param options - Set of configurable options for coverage defaults to\n     * `resetOnNavigation : true, reportAnonymousScripts : false,`\n     * `includeRawScriptCoverage : false, useBlockCoverage : true`\n     * @returns Promise that resolves when coverage is started.\n     *\n     * @remarks\n     * Anonymous scripts are ones that don't have an associated url. These are\n     * scripts that are dynamically created on the page using `eval` or\n     * `new Function`. If `reportAnonymousScripts` is set to `true`, anonymous\n     * scripts URL will start with `debugger://VM` (unless a magic //# sourceURL\n     * comment is present, in which case that will the be URL).\n     */\n    async startJSCoverage(options = {}) {\n        return await this.#jsCoverage.start(options);\n    }\n    /**\n     * Promise that resolves to the array of coverage reports for\n     * all scripts.\n     *\n     * @remarks\n     * JavaScript Coverage doesn't include anonymous scripts by default.\n     * However, scripts with sourceURLs are reported.\n     */\n    async stopJSCoverage() {\n        return await this.#jsCoverage.stop();\n    }\n    /**\n     * @param options - Set of configurable options for coverage, defaults to\n     * `resetOnNavigation : true`\n     * @returns Promise that resolves when coverage is started.\n     */\n    async startCSSCoverage(options = {}) {\n        return await this.#cssCoverage.start(options);\n    }\n    /**\n     * Promise that resolves to the array of coverage reports\n     * for all stylesheets.\n     *\n     * @remarks\n     * CSS Coverage doesn't include dynamically injected style tags\n     * without sourceURLs.\n     */\n    async stopCSSCoverage() {\n        return await this.#cssCoverage.stop();\n    }\n}\n/**\n * @public\n */\nexport class JSCoverage {\n    #client;\n    #enabled = false;\n    #scriptURLs = new Map();\n    #scriptSources = new Map();\n    #subscriptions;\n    #resetOnNavigation = false;\n    #reportAnonymousScripts = false;\n    #includeRawScriptCoverage = false;\n    /**\n     * @internal\n     */\n    constructor(client) {\n        this.#client = client;\n    }\n    /**\n     * @internal\n     */\n    updateClient(client) {\n        this.#client = client;\n    }\n    async start(options = {}) {\n        assert(!this.#enabled, 'JSCoverage is already enabled');\n        const { resetOnNavigation = true, reportAnonymousScripts = false, includeRawScriptCoverage = false, useBlockCoverage = true, } = options;\n        this.#resetOnNavigation = resetOnNavigation;\n        this.#reportAnonymousScripts = reportAnonymousScripts;\n        this.#includeRawScriptCoverage = includeRawScriptCoverage;\n        this.#enabled = true;\n        this.#scriptURLs.clear();\n        this.#scriptSources.clear();\n        this.#subscriptions = new DisposableStack();\n        const clientEmitter = this.#subscriptions.use(new EventEmitter(this.#client));\n        clientEmitter.on('Debugger.scriptParsed', this.#onScriptParsed.bind(this));\n        clientEmitter.on('Runtime.executionContextsCleared', this.#onExecutionContextsCleared.bind(this));\n        await Promise.all([\n            this.#client.send('Profiler.enable'),\n            this.#client.send('Profiler.startPreciseCoverage', {\n                callCount: this.#includeRawScriptCoverage,\n                detailed: useBlockCoverage,\n            }),\n            this.#client.send('Debugger.enable'),\n            this.#client.send('Debugger.setSkipAllPauses', { skip: true }),\n        ]);\n    }\n    #onExecutionContextsCleared() {\n        if (!this.#resetOnNavigation) {\n            return;\n        }\n        this.#scriptURLs.clear();\n        this.#scriptSources.clear();\n    }\n    async #onScriptParsed(event) {\n        // Ignore puppeteer-injected scripts\n        if (PuppeteerURL.isPuppeteerURL(event.url)) {\n            return;\n        }\n        // Ignore other anonymous scripts unless the reportAnonymousScripts option is true.\n        if (!event.url && !this.#reportAnonymousScripts) {\n            return;\n        }\n        try {\n            const response = await this.#client.send('Debugger.getScriptSource', {\n                scriptId: event.scriptId,\n            });\n            this.#scriptURLs.set(event.scriptId, event.url);\n            this.#scriptSources.set(event.scriptId, response.scriptSource);\n        }\n        catch (error) {\n            // This might happen if the page has already navigated away.\n            debugError(error);\n        }\n    }\n    async stop() {\n        assert(this.#enabled, 'JSCoverage is not enabled');\n        this.#enabled = false;\n        const result = await Promise.all([\n            this.#client.send('Profiler.takePreciseCoverage'),\n            this.#client.send('Profiler.stopPreciseCoverage'),\n            this.#client.send('Profiler.disable'),\n            this.#client.send('Debugger.disable'),\n        ]);\n        this.#subscriptions?.dispose();\n        const coverage = [];\n        const profileResponse = result[0];\n        for (const entry of profileResponse.result) {\n            let url = this.#scriptURLs.get(entry.scriptId);\n            if (!url && this.#reportAnonymousScripts) {\n                url = 'debugger://VM' + entry.scriptId;\n            }\n            const text = this.#scriptSources.get(entry.scriptId);\n            if (text === undefined || url === undefined) {\n                continue;\n            }\n            const flattenRanges = [];\n            for (const func of entry.functions) {\n                flattenRanges.push(...func.ranges);\n            }\n            const ranges = convertToDisjointRanges(flattenRanges);\n            if (!this.#includeRawScriptCoverage) {\n                coverage.push({ url, ranges, text });\n            }\n            else {\n                coverage.push({ url, ranges, text, rawScriptCoverage: entry });\n            }\n        }\n        return coverage;\n    }\n}\n/**\n * @public\n */\nexport class CSSCoverage {\n    #client;\n    #enabled = false;\n    #stylesheetURLs = new Map();\n    #stylesheetSources = new Map();\n    #eventListeners;\n    #resetOnNavigation = false;\n    constructor(client) {\n        this.#client = client;\n    }\n    /**\n     * @internal\n     */\n    updateClient(client) {\n        this.#client = client;\n    }\n    async start(options = {}) {\n        assert(!this.#enabled, 'CSSCoverage is already enabled');\n        const { resetOnNavigation = true } = options;\n        this.#resetOnNavigation = resetOnNavigation;\n        this.#enabled = true;\n        this.#stylesheetURLs.clear();\n        this.#stylesheetSources.clear();\n        this.#eventListeners = new DisposableStack();\n        const clientEmitter = this.#eventListeners.use(new EventEmitter(this.#client));\n        clientEmitter.on('CSS.styleSheetAdded', this.#onStyleSheet.bind(this));\n        clientEmitter.on('Runtime.executionContextsCleared', this.#onExecutionContextsCleared.bind(this));\n        await Promise.all([\n            this.#client.send('DOM.enable'),\n            this.#client.send('CSS.enable'),\n            this.#client.send('CSS.startRuleUsageTracking'),\n        ]);\n    }\n    #onExecutionContextsCleared() {\n        if (!this.#resetOnNavigation) {\n            return;\n        }\n        this.#stylesheetURLs.clear();\n        this.#stylesheetSources.clear();\n    }\n    async #onStyleSheet(event) {\n        const header = event.header;\n        // Ignore anonymous scripts\n        if (!header.sourceURL) {\n            return;\n        }\n        try {\n            const response = await this.#client.send('CSS.getStyleSheetText', {\n                styleSheetId: header.styleSheetId,\n            });\n            this.#stylesheetURLs.set(header.styleSheetId, header.sourceURL);\n            this.#stylesheetSources.set(header.styleSheetId, response.text);\n        }\n        catch (error) {\n            // This might happen if the page has already navigated away.\n            debugError(error);\n        }\n    }\n    async stop() {\n        assert(this.#enabled, 'CSSCoverage is not enabled');\n        this.#enabled = false;\n        const ruleTrackingResponse = await this.#client.send('CSS.stopRuleUsageTracking');\n        await Promise.all([\n            this.#client.send('CSS.disable'),\n            this.#client.send('DOM.disable'),\n        ]);\n        this.#eventListeners?.dispose();\n        // aggregate by styleSheetId\n        const styleSheetIdToCoverage = new Map();\n        for (const entry of ruleTrackingResponse.ruleUsage) {\n            let ranges = styleSheetIdToCoverage.get(entry.styleSheetId);\n            if (!ranges) {\n                ranges = [];\n                styleSheetIdToCoverage.set(entry.styleSheetId, ranges);\n            }\n            ranges.push({\n                startOffset: entry.startOffset,\n                endOffset: entry.endOffset,\n                count: entry.used ? 1 : 0,\n            });\n        }\n        const coverage = [];\n        for (const styleSheetId of this.#stylesheetURLs.keys()) {\n            const url = this.#stylesheetURLs.get(styleSheetId);\n            assert(typeof url !== 'undefined', `Stylesheet URL is undefined (styleSheetId=${styleSheetId})`);\n            const text = this.#stylesheetSources.get(styleSheetId);\n            assert(typeof text !== 'undefined', `Stylesheet text is undefined (styleSheetId=${styleSheetId})`);\n            const ranges = convertToDisjointRanges(styleSheetIdToCoverage.get(styleSheetId) || []);\n            coverage.push({ url, ranges, text });\n        }\n        return coverage;\n    }\n}\nfunction convertToDisjointRanges(nestedRanges) {\n    const points = [];\n    for (const range of nestedRanges) {\n        points.push({ offset: range.startOffset, type: 0, range });\n        points.push({ offset: range.endOffset, type: 1, range });\n    }\n    // Sort points to form a valid parenthesis sequence.\n    points.sort((a, b) => {\n        // Sort with increasing offsets.\n        if (a.offset !== b.offset) {\n            return a.offset - b.offset;\n        }\n        // All \"end\" points should go before \"start\" points.\n        if (a.type !== b.type) {\n            return b.type - a.type;\n        }\n        const aLength = a.range.endOffset - a.range.startOffset;\n        const bLength = b.range.endOffset - b.range.startOffset;\n        // For two \"start\" points, the one with longer range goes first.\n        if (a.type === 0) {\n            return bLength - aLength;\n        }\n        // For two \"end\" points, the one with shorter range goes first.\n        return aLength - bLength;\n    });\n    const hitCountStack = [];\n    const results = [];\n    let lastOffset = 0;\n    // Run scanning line to intersect all ranges.\n    for (const point of points) {\n        if (hitCountStack.length &&\n            lastOffset < point.offset &&\n            hitCountStack[hitCountStack.length - 1] > 0) {\n            const lastResult = results[results.length - 1];\n            if (lastResult && lastResult.end === lastOffset) {\n                lastResult.end = point.offset;\n            }\n            else {\n                results.push({ start: lastOffset, end: point.offset });\n            }\n        }\n        lastOffset = point.offset;\n        if (point.type === 0) {\n            hitCountStack.push(point.range.count);\n        }\n        else {\n            hitCountStack.pop();\n        }\n    }\n    // Filter out empty ranges.\n    return results.filter(range => {\n        return range.end - range.start > 0;\n    });\n}\n//# sourceMappingURL=Coverage.js.map","/**\n * @license\n * Copyright 2017 Google Inc.\n * SPDX-License-Identifier: Apache-2.0\n */\nimport { assert } from '../util/assert.js';\n/**\n * Dialog instances are dispatched by the {@link Page} via the `dialog` event.\n *\n * @remarks\n *\n * @example\n *\n * ```ts\n * import puppeteer from 'puppeteer';\n *\n * (async () => {\n *   const browser = await puppeteer.launch();\n *   const page = await browser.newPage();\n *   page.on('dialog', async dialog => {\n *     console.log(dialog.message());\n *     await dialog.dismiss();\n *     await browser.close();\n *   });\n *   page.evaluate(() => alert('1'));\n * })();\n * ```\n *\n * @public\n */\nexport class Dialog {\n    #type;\n    #message;\n    #defaultValue;\n    /**\n     * @internal\n     */\n    handled = false;\n    /**\n     * @internal\n     */\n    constructor(type, message, defaultValue = '') {\n        this.#type = type;\n        this.#message = message;\n        this.#defaultValue = defaultValue;\n    }\n    /**\n     * The type of the dialog.\n     */\n    type() {\n        return this.#type;\n    }\n    /**\n     * The message displayed in the dialog.\n     */\n    message() {\n        return this.#message;\n    }\n    /**\n     * The default value of the prompt, or an empty string if the dialog\n     * is not a `prompt`.\n     */\n    defaultValue() {\n        return this.#defaultValue;\n    }\n    /**\n     * A promise that resolves when the dialog has been accepted.\n     *\n     * @param promptText - optional text that will be entered in the dialog\n     * prompt. Has no effect if the dialog's type is not `prompt`.\n     *\n     */\n    async accept(promptText) {\n        assert(!this.handled, 'Cannot accept dialog which is already handled!');\n        this.handled = true;\n        await this.handle({\n            accept: true,\n            text: promptText,\n        });\n    }\n    /**\n     * A promise which will resolve once the dialog has been dismissed\n     */\n    async dismiss() {\n        assert(!this.handled, 'Cannot dismiss dialog which is already handled!');\n        this.handled = true;\n        await this.handle({\n            accept: false,\n        });\n    }\n}\n//# sourceMappingURL=Dialog.js.map","/**\n * @license\n * Copyright 2017 Google Inc.\n * SPDX-License-Identifier: Apache-2.0\n */\nimport { Dialog } from '../api/Dialog.js';\n/**\n * @internal\n */\nexport class CdpDialog extends Dialog {\n    #client;\n    constructor(client, type, message, defaultValue = '') {\n        super(type, message, defaultValue);\n        this.#client = client;\n    }\n    async handle(options) {\n        await this.#client.send('Page.handleJavaScriptDialog', {\n            accept: options.accept,\n            promptText: options.text,\n        });\n    }\n}\n//# sourceMappingURL=Dialog.js.map","var __runInitializers = (this && this.__runInitializers) || function (thisArg, initializers, value) {\n    var useValue = arguments.length > 2;\n    for (var i = 0; i < initializers.length; i++) {\n        value = useValue ? initializers[i].call(thisArg, value) : initializers[i].call(thisArg);\n    }\n    return useValue ? value : void 0;\n};\nvar __esDecorate = (this && this.__esDecorate) || function (ctor, descriptorIn, decorators, contextIn, initializers, extraInitializers) {\n    function accept(f) { if (f !== void 0 && typeof f !== \"function\") throw new TypeError(\"Function expected\"); return f; }\n    var kind = contextIn.kind, key = kind === \"getter\" ? \"get\" : kind === \"setter\" ? \"set\" : \"value\";\n    var target = !descriptorIn && ctor ? contextIn[\"static\"] ? ctor : ctor.prototype : null;\n    var descriptor = descriptorIn || (target ? Object.getOwnPropertyDescriptor(target, contextIn.name) : {});\n    var _, done = false;\n    for (var i = decorators.length - 1; i >= 0; i--) {\n        var context = {};\n        for (var p in contextIn) context[p] = p === \"access\" ? {} : contextIn[p];\n        for (var p in contextIn.access) context.access[p] = contextIn.access[p];\n        context.addInitializer = function (f) { if (done) throw new TypeError(\"Cannot add initializers after decoration has completed\"); extraInitializers.push(accept(f || null)); };\n        var result = (0, decorators[i])(kind === \"accessor\" ? { get: descriptor.get, set: descriptor.set } : descriptor[key], context);\n        if (kind === \"accessor\") {\n            if (result === void 0) continue;\n            if (result === null || typeof result !== \"object\") throw new TypeError(\"Object expected\");\n            if (_ = accept(result.get)) descriptor.get = _;\n            if (_ = accept(result.set)) descriptor.set = _;\n            if (_ = accept(result.init)) initializers.unshift(_);\n        }\n        else if (_ = accept(result)) {\n            if (kind === \"field\") initializers.unshift(_);\n            else descriptor[key] = _;\n        }\n    }\n    if (target) Object.defineProperty(target, contextIn.name, descriptor);\n    done = true;\n};\nvar __setFunctionName = (this && this.__setFunctionName) || function (f, name, prefix) {\n    if (typeof name === \"symbol\") name = name.description ? \"[\".concat(name.description, \"]\") : \"\";\n    return Object.defineProperty(f, \"name\", { configurable: true, value: prefix ? \"\".concat(prefix, \" \", name) : name });\n};\nimport { CDPSessionEvent } from '../api/CDPSession.js';\nimport { debugError } from '../common/util.js';\nimport { assert } from '../util/assert.js';\nimport { invokeAtMostOnceForArguments } from '../util/decorators.js';\nimport { isErrorLike } from '../util/ErrorLike.js';\n/**\n * @internal\n */\nexport class EmulatedState {\n    #state;\n    #clientProvider;\n    #updater;\n    constructor(initialState, clientProvider, updater) {\n        this.#state = initialState;\n        this.#clientProvider = clientProvider;\n        this.#updater = updater;\n        this.#clientProvider.registerState(this);\n    }\n    async setState(state) {\n        this.#state = state;\n        await this.sync();\n    }\n    get state() {\n        return this.#state;\n    }\n    async sync() {\n        await Promise.all(this.#clientProvider.clients().map(client => {\n            return this.#updater(client, this.#state);\n        }));\n    }\n}\n/**\n * @internal\n */\nlet EmulationManager = (() => {\n    let _instanceExtraInitializers = [];\n    let _private_applyViewport_decorators;\n    let _private_applyViewport_descriptor;\n    let _private_emulateIdleState_decorators;\n    let _private_emulateIdleState_descriptor;\n    let _private_emulateTimezone_decorators;\n    let _private_emulateTimezone_descriptor;\n    let _private_emulateVisionDeficiency_decorators;\n    let _private_emulateVisionDeficiency_descriptor;\n    let _private_emulateCpuThrottling_decorators;\n    let _private_emulateCpuThrottling_descriptor;\n    let _private_emulateMediaFeatures_decorators;\n    let _private_emulateMediaFeatures_descriptor;\n    let _private_emulateMediaType_decorators;\n    let _private_emulateMediaType_descriptor;\n    let _private_setGeolocation_decorators;\n    let _private_setGeolocation_descriptor;\n    let _private_setDefaultBackgroundColor_decorators;\n    let _private_setDefaultBackgroundColor_descriptor;\n    let _private_setJavaScriptEnabled_decorators;\n    let _private_setJavaScriptEnabled_descriptor;\n    return class EmulationManager {\n        static {\n            const _metadata = typeof Symbol === \"function\" && Symbol.metadata ? Object.create(null) : void 0;\n            _private_applyViewport_decorators = [invokeAtMostOnceForArguments];\n            _private_emulateIdleState_decorators = [invokeAtMostOnceForArguments];\n            _private_emulateTimezone_decorators = [invokeAtMostOnceForArguments];\n            _private_emulateVisionDeficiency_decorators = [invokeAtMostOnceForArguments];\n            _private_emulateCpuThrottling_decorators = [invokeAtMostOnceForArguments];\n            _private_emulateMediaFeatures_decorators = [invokeAtMostOnceForArguments];\n            _private_emulateMediaType_decorators = [invokeAtMostOnceForArguments];\n            _private_setGeolocation_decorators = [invokeAtMostOnceForArguments];\n            _private_setDefaultBackgroundColor_decorators = [invokeAtMostOnceForArguments];\n            _private_setJavaScriptEnabled_decorators = [invokeAtMostOnceForArguments];\n            __esDecorate(this, _private_applyViewport_descriptor = { value: __setFunctionName(async function (client, viewportState) {\n                    if (!viewportState.viewport) {\n                        await Promise.all([\n                            client.send('Emulation.clearDeviceMetricsOverride'),\n                            client.send('Emulation.setTouchEmulationEnabled', {\n                                enabled: false,\n                            }),\n                        ]).catch(debugError);\n                        return;\n                    }\n                    const { viewport } = viewportState;\n                    const mobile = viewport.isMobile || false;\n                    const width = viewport.width;\n                    const height = viewport.height;\n                    const deviceScaleFactor = viewport.deviceScaleFactor ?? 1;\n                    const screenOrientation = viewport.isLandscape\n                        ? { angle: 90, type: 'landscapePrimary' }\n                        : { angle: 0, type: 'portraitPrimary' };\n                    const hasTouch = viewport.hasTouch || false;\n                    await Promise.all([\n                        client\n                            .send('Emulation.setDeviceMetricsOverride', {\n                            mobile,\n                            width,\n                            height,\n                            deviceScaleFactor,\n                            screenOrientation,\n                        })\n                            .catch(err => {\n                            if (err.message.includes('Target does not support metrics override')) {\n                                debugError(err);\n                                return;\n                            }\n                            throw err;\n                        }),\n                        client.send('Emulation.setTouchEmulationEnabled', {\n                            enabled: hasTouch,\n                        }),\n                    ]);\n                }, \"#applyViewport\") }, _private_applyViewport_decorators, { kind: \"method\", name: \"#applyViewport\", static: false, private: true, access: { has: obj => #applyViewport in obj, get: obj => obj.#applyViewport }, metadata: _metadata }, null, _instanceExtraInitializers);\n            __esDecorate(this, _private_emulateIdleState_descriptor = { value: __setFunctionName(async function (client, idleStateState) {\n                    if (!idleStateState.active) {\n                        return;\n                    }\n                    if (idleStateState.overrides) {\n                        await client.send('Emulation.setIdleOverride', {\n                            isUserActive: idleStateState.overrides.isUserActive,\n                            isScreenUnlocked: idleStateState.overrides.isScreenUnlocked,\n                        });\n                    }\n                    else {\n                        await client.send('Emulation.clearIdleOverride');\n                    }\n                }, \"#emulateIdleState\") }, _private_emulateIdleState_decorators, { kind: \"method\", name: \"#emulateIdleState\", static: false, private: true, access: { has: obj => #emulateIdleState in obj, get: obj => obj.#emulateIdleState }, metadata: _metadata }, null, _instanceExtraInitializers);\n            __esDecorate(this, _private_emulateTimezone_descriptor = { value: __setFunctionName(async function (client, timezoneState) {\n                    if (!timezoneState.active) {\n                        return;\n                    }\n                    try {\n                        await client.send('Emulation.setTimezoneOverride', {\n                            timezoneId: timezoneState.timezoneId || '',\n                        });\n                    }\n                    catch (error) {\n                        if (isErrorLike(error) && error.message.includes('Invalid timezone')) {\n                            throw new Error(`Invalid timezone ID: ${timezoneState.timezoneId}`);\n                        }\n                        throw error;\n                    }\n                }, \"#emulateTimezone\") }, _private_emulateTimezone_decorators, { kind: \"method\", name: \"#emulateTimezone\", static: false, private: true, access: { has: obj => #emulateTimezone in obj, get: obj => obj.#emulateTimezone }, metadata: _metadata }, null, _instanceExtraInitializers);\n            __esDecorate(this, _private_emulateVisionDeficiency_descriptor = { value: __setFunctionName(async function (client, visionDeficiency) {\n                    if (!visionDeficiency.active) {\n                        return;\n                    }\n                    await client.send('Emulation.setEmulatedVisionDeficiency', {\n                        type: visionDeficiency.visionDeficiency || 'none',\n                    });\n                }, \"#emulateVisionDeficiency\") }, _private_emulateVisionDeficiency_decorators, { kind: \"method\", name: \"#emulateVisionDeficiency\", static: false, private: true, access: { has: obj => #emulateVisionDeficiency in obj, get: obj => obj.#emulateVisionDeficiency }, metadata: _metadata }, null, _instanceExtraInitializers);\n            __esDecorate(this, _private_emulateCpuThrottling_descriptor = { value: __setFunctionName(async function (client, state) {\n                    if (!state.active) {\n                        return;\n                    }\n                    await client.send('Emulation.setCPUThrottlingRate', {\n                        rate: state.factor ?? 1,\n                    });\n                }, \"#emulateCpuThrottling\") }, _private_emulateCpuThrottling_decorators, { kind: \"method\", name: \"#emulateCpuThrottling\", static: false, private: true, access: { has: obj => #emulateCpuThrottling in obj, get: obj => obj.#emulateCpuThrottling }, metadata: _metadata }, null, _instanceExtraInitializers);\n            __esDecorate(this, _private_emulateMediaFeatures_descriptor = { value: __setFunctionName(async function (client, state) {\n                    if (!state.active) {\n                        return;\n                    }\n                    await client.send('Emulation.setEmulatedMedia', {\n                        features: state.mediaFeatures,\n                    });\n                }, \"#emulateMediaFeatures\") }, _private_emulateMediaFeatures_decorators, { kind: \"method\", name: \"#emulateMediaFeatures\", static: false, private: true, access: { has: obj => #emulateMediaFeatures in obj, get: obj => obj.#emulateMediaFeatures }, metadata: _metadata }, null, _instanceExtraInitializers);\n            __esDecorate(this, _private_emulateMediaType_descriptor = { value: __setFunctionName(async function (client, state) {\n                    if (!state.active) {\n                        return;\n                    }\n                    await client.send('Emulation.setEmulatedMedia', {\n                        media: state.type || '',\n                    });\n                }, \"#emulateMediaType\") }, _private_emulateMediaType_decorators, { kind: \"method\", name: \"#emulateMediaType\", static: false, private: true, access: { has: obj => #emulateMediaType in obj, get: obj => obj.#emulateMediaType }, metadata: _metadata }, null, _instanceExtraInitializers);\n            __esDecorate(this, _private_setGeolocation_descriptor = { value: __setFunctionName(async function (client, state) {\n                    if (!state.active) {\n                        return;\n                    }\n                    await client.send('Emulation.setGeolocationOverride', state.geoLocation\n                        ? {\n                            longitude: state.geoLocation.longitude,\n                            latitude: state.geoLocation.latitude,\n                            accuracy: state.geoLocation.accuracy,\n                        }\n                        : undefined);\n                }, \"#setGeolocation\") }, _private_setGeolocation_decorators, { kind: \"method\", name: \"#setGeolocation\", static: false, private: true, access: { has: obj => #setGeolocation in obj, get: obj => obj.#setGeolocation }, metadata: _metadata }, null, _instanceExtraInitializers);\n            __esDecorate(this, _private_setDefaultBackgroundColor_descriptor = { value: __setFunctionName(async function (client, state) {\n                    if (!state.active) {\n                        return;\n                    }\n                    await client.send('Emulation.setDefaultBackgroundColorOverride', {\n                        color: state.color,\n                    });\n                }, \"#setDefaultBackgroundColor\") }, _private_setDefaultBackgroundColor_decorators, { kind: \"method\", name: \"#setDefaultBackgroundColor\", static: false, private: true, access: { has: obj => #setDefaultBackgroundColor in obj, get: obj => obj.#setDefaultBackgroundColor }, metadata: _metadata }, null, _instanceExtraInitializers);\n            __esDecorate(this, _private_setJavaScriptEnabled_descriptor = { value: __setFunctionName(async function (client, state) {\n                    if (!state.active) {\n                        return;\n                    }\n                    await client.send('Emulation.setScriptExecutionDisabled', {\n                        value: !state.javaScriptEnabled,\n                    });\n                }, \"#setJavaScriptEnabled\") }, _private_setJavaScriptEnabled_decorators, { kind: \"method\", name: \"#setJavaScriptEnabled\", static: false, private: true, access: { has: obj => #setJavaScriptEnabled in obj, get: obj => obj.#setJavaScriptEnabled }, metadata: _metadata }, null, _instanceExtraInitializers);\n            if (_metadata) Object.defineProperty(this, Symbol.metadata, { enumerable: true, configurable: true, writable: true, value: _metadata });\n        }\n        #client = __runInitializers(this, _instanceExtraInitializers);\n        #emulatingMobile = false;\n        #hasTouch = false;\n        #states = [];\n        #viewportState = new EmulatedState({\n            active: false,\n        }, this, this.#applyViewport);\n        #idleOverridesState = new EmulatedState({\n            active: false,\n        }, this, this.#emulateIdleState);\n        #timezoneState = new EmulatedState({\n            active: false,\n        }, this, this.#emulateTimezone);\n        #visionDeficiencyState = new EmulatedState({\n            active: false,\n        }, this, this.#emulateVisionDeficiency);\n        #cpuThrottlingState = new EmulatedState({\n            active: false,\n        }, this, this.#emulateCpuThrottling);\n        #mediaFeaturesState = new EmulatedState({\n            active: false,\n        }, this, this.#emulateMediaFeatures);\n        #mediaTypeState = new EmulatedState({\n            active: false,\n        }, this, this.#emulateMediaType);\n        #geoLocationState = new EmulatedState({\n            active: false,\n        }, this, this.#setGeolocation);\n        #defaultBackgroundColorState = new EmulatedState({\n            active: false,\n        }, this, this.#setDefaultBackgroundColor);\n        #javascriptEnabledState = new EmulatedState({\n            javaScriptEnabled: true,\n            active: false,\n        }, this, this.#setJavaScriptEnabled);\n        #secondaryClients = new Set();\n        constructor(client) {\n            this.#client = client;\n        }\n        updateClient(client) {\n            this.#client = client;\n            this.#secondaryClients.delete(client);\n        }\n        registerState(state) {\n            this.#states.push(state);\n        }\n        clients() {\n            return [this.#client, ...Array.from(this.#secondaryClients)];\n        }\n        async registerSpeculativeSession(client) {\n            this.#secondaryClients.add(client);\n            client.once(CDPSessionEvent.Disconnected, () => {\n                this.#secondaryClients.delete(client);\n            });\n            // We don't await here because we want to register all state changes before\n            // the target is unpaused.\n            void Promise.all(this.#states.map(s => {\n                return s.sync().catch(debugError);\n            }));\n        }\n        get javascriptEnabled() {\n            return this.#javascriptEnabledState.state.javaScriptEnabled;\n        }\n        async emulateViewport(viewport) {\n            const currentState = this.#viewportState.state;\n            if (!viewport && !currentState.active) {\n                return false;\n            }\n            await this.#viewportState.setState(viewport\n                ? {\n                    viewport,\n                    active: true,\n                }\n                : {\n                    active: false,\n                });\n            const mobile = viewport?.isMobile || false;\n            const hasTouch = viewport?.hasTouch || false;\n            const reloadNeeded = this.#emulatingMobile !== mobile || this.#hasTouch !== hasTouch;\n            this.#emulatingMobile = mobile;\n            this.#hasTouch = hasTouch;\n            return reloadNeeded;\n        }\n        get #applyViewport() { return _private_applyViewport_descriptor.value; }\n        async emulateIdleState(overrides) {\n            await this.#idleOverridesState.setState({\n                active: true,\n                overrides,\n            });\n        }\n        get #emulateIdleState() { return _private_emulateIdleState_descriptor.value; }\n        get #emulateTimezone() { return _private_emulateTimezone_descriptor.value; }\n        async emulateTimezone(timezoneId) {\n            await this.#timezoneState.setState({\n                timezoneId,\n                active: true,\n            });\n        }\n        get #emulateVisionDeficiency() { return _private_emulateVisionDeficiency_descriptor.value; }\n        async emulateVisionDeficiency(type) {\n            const visionDeficiencies = new Set([\n                'none',\n                'achromatopsia',\n                'blurredVision',\n                'deuteranopia',\n                'protanopia',\n                'tritanopia',\n            ]);\n            assert(!type || visionDeficiencies.has(type), `Unsupported vision deficiency: ${type}`);\n            await this.#visionDeficiencyState.setState({\n                active: true,\n                visionDeficiency: type,\n            });\n        }\n        get #emulateCpuThrottling() { return _private_emulateCpuThrottling_descriptor.value; }\n        async emulateCPUThrottling(factor) {\n            assert(factor === null || factor >= 1, 'Throttling rate should be greater or equal to 1');\n            await this.#cpuThrottlingState.setState({\n                active: true,\n                factor: factor ?? undefined,\n            });\n        }\n        get #emulateMediaFeatures() { return _private_emulateMediaFeatures_descriptor.value; }\n        async emulateMediaFeatures(features) {\n            if (Array.isArray(features)) {\n                for (const mediaFeature of features) {\n                    const name = mediaFeature.name;\n                    assert(/^(?:prefers-(?:color-scheme|reduced-motion)|color-gamut)$/.test(name), 'Unsupported media feature: ' + name);\n                }\n            }\n            await this.#mediaFeaturesState.setState({\n                active: true,\n                mediaFeatures: features,\n            });\n        }\n        get #emulateMediaType() { return _private_emulateMediaType_descriptor.value; }\n        async emulateMediaType(type) {\n            assert(type === 'screen' ||\n                type === 'print' ||\n                (type ?? undefined) === undefined, 'Unsupported media type: ' + type);\n            await this.#mediaTypeState.setState({\n                type,\n                active: true,\n            });\n        }\n        get #setGeolocation() { return _private_setGeolocation_descriptor.value; }\n        async setGeolocation(options) {\n            const { longitude, latitude, accuracy = 0 } = options;\n            if (longitude < -180 || longitude > 180) {\n                throw new Error(`Invalid longitude \"${longitude}\": precondition -180 <= LONGITUDE <= 180 failed.`);\n            }\n            if (latitude < -90 || latitude > 90) {\n                throw new Error(`Invalid latitude \"${latitude}\": precondition -90 <= LATITUDE <= 90 failed.`);\n            }\n            if (accuracy < 0) {\n                throw new Error(`Invalid accuracy \"${accuracy}\": precondition 0 <= ACCURACY failed.`);\n            }\n            await this.#geoLocationState.setState({\n                active: true,\n                geoLocation: {\n                    longitude,\n                    latitude,\n                    accuracy,\n                },\n            });\n        }\n        get #setDefaultBackgroundColor() { return _private_setDefaultBackgroundColor_descriptor.value; }\n        /**\n         * Resets default white background\n         */\n        async resetDefaultBackgroundColor() {\n            await this.#defaultBackgroundColorState.setState({\n                active: true,\n                color: undefined,\n            });\n        }\n        /**\n         * Hides default white background\n         */\n        async setTransparentBackgroundColor() {\n            await this.#defaultBackgroundColorState.setState({\n                active: true,\n                color: { r: 0, g: 0, b: 0, a: 0 },\n            });\n        }\n        get #setJavaScriptEnabled() { return _private_setJavaScriptEnabled_descriptor.value; }\n        async setJavaScriptEnabled(enabled) {\n            await this.#javascriptEnabledState.setState({\n                active: true,\n                javaScriptEnabled: enabled,\n            });\n        }\n    };\n})();\nexport { EmulationManager };\n//# sourceMappingURL=EmulationManager.js.map","/**\n * @license\n * Copyright 2022 Google Inc.\n * SPDX-License-Identifier: Apache-2.0\n */\nimport { CDPSessionEvent } from '../api/CDPSession.js';\nimport { EventEmitter } from '../common/EventEmitter.js';\nimport { assert } from '../util/assert.js';\nimport { Deferred } from '../util/Deferred.js';\n/**\n * FirefoxTargetManager implements target management using\n * `Target.setDiscoverTargets` without using auto-attach. It, therefore, creates\n * targets that lazily establish their CDP sessions.\n *\n * Although the approach is potentially flaky, there is no other way for Firefox\n * because Firefox's CDP implementation does not support auto-attach.\n *\n * Firefox does not support targetInfoChanged and detachedFromTarget events:\n *\n * - https://bugzilla.mozilla.org/show_bug.cgi?id=1610855\n * - https://bugzilla.mozilla.org/show_bug.cgi?id=1636979\n *   @internal\n */\nexport class FirefoxTargetManager extends EventEmitter {\n    #connection;\n    /**\n     * Keeps track of the following events: 'Target.targetCreated',\n     * 'Target.targetDestroyed'.\n     *\n     * A target becomes discovered when 'Target.targetCreated' is received.\n     * A target is removed from this map once 'Target.targetDestroyed' is\n     * received.\n     *\n     * `targetFilterCallback` has no effect on this map.\n     */\n    #discoveredTargetsByTargetId = new Map();\n    /**\n     * Keeps track of targets that were created via 'Target.targetCreated'\n     * and which one are not filtered out by `targetFilterCallback`.\n     *\n     * The target is removed from here once it's been destroyed.\n     */\n    #availableTargetsByTargetId = new Map();\n    /**\n     * Tracks which sessions attach to which target.\n     */\n    #availableTargetsBySessionId = new Map();\n    #targetFilterCallback;\n    #targetFactory;\n    #attachedToTargetListenersBySession = new WeakMap();\n    #initializeDeferred = Deferred.create();\n    #targetsIdsForInit = new Set();\n    constructor(connection, targetFactory, targetFilterCallback) {\n        super();\n        this.#connection = connection;\n        this.#targetFilterCallback = targetFilterCallback;\n        this.#targetFactory = targetFactory;\n        this.#connection.on('Target.targetCreated', this.#onTargetCreated);\n        this.#connection.on('Target.targetDestroyed', this.#onTargetDestroyed);\n        this.#connection.on(CDPSessionEvent.SessionDetached, this.#onSessionDetached);\n        this.setupAttachmentListeners(this.#connection);\n    }\n    setupAttachmentListeners(session) {\n        const listener = (event) => {\n            return this.#onAttachedToTarget(session, event);\n        };\n        assert(!this.#attachedToTargetListenersBySession.has(session));\n        this.#attachedToTargetListenersBySession.set(session, listener);\n        session.on('Target.attachedToTarget', listener);\n    }\n    #onSessionDetached = (session) => {\n        this.removeSessionListeners(session);\n        this.#availableTargetsBySessionId.delete(session.id());\n    };\n    removeSessionListeners(session) {\n        if (this.#attachedToTargetListenersBySession.has(session)) {\n            session.off('Target.attachedToTarget', this.#attachedToTargetListenersBySession.get(session));\n            this.#attachedToTargetListenersBySession.delete(session);\n        }\n    }\n    getAvailableTargets() {\n        return this.#availableTargetsByTargetId;\n    }\n    getChildTargets(_target) {\n        return new Set();\n    }\n    dispose() {\n        this.#connection.off('Target.targetCreated', this.#onTargetCreated);\n        this.#connection.off('Target.targetDestroyed', this.#onTargetDestroyed);\n    }\n    async initialize() {\n        await this.#connection.send('Target.setDiscoverTargets', {\n            discover: true,\n            filter: [{}],\n        });\n        this.#targetsIdsForInit = new Set(this.#discoveredTargetsByTargetId.keys());\n        await this.#initializeDeferred.valueOrThrow();\n    }\n    #onTargetCreated = async (event) => {\n        if (this.#discoveredTargetsByTargetId.has(event.targetInfo.targetId)) {\n            return;\n        }\n        this.#discoveredTargetsByTargetId.set(event.targetInfo.targetId, event.targetInfo);\n        if (event.targetInfo.type === 'browser' && event.targetInfo.attached) {\n            const target = this.#targetFactory(event.targetInfo, undefined);\n            target._initialize();\n            this.#availableTargetsByTargetId.set(event.targetInfo.targetId, target);\n            this.#finishInitializationIfReady(target._targetId);\n            return;\n        }\n        const target = this.#targetFactory(event.targetInfo, undefined);\n        if (this.#targetFilterCallback && !this.#targetFilterCallback(target)) {\n            this.#finishInitializationIfReady(event.targetInfo.targetId);\n            return;\n        }\n        target._initialize();\n        this.#availableTargetsByTargetId.set(event.targetInfo.targetId, target);\n        this.emit(\"targetAvailable\" /* TargetManagerEvent.TargetAvailable */, target);\n        this.#finishInitializationIfReady(target._targetId);\n    };\n    #onTargetDestroyed = (event) => {\n        this.#discoveredTargetsByTargetId.delete(event.targetId);\n        this.#finishInitializationIfReady(event.targetId);\n        const target = this.#availableTargetsByTargetId.get(event.targetId);\n        if (target) {\n            this.emit(\"targetGone\" /* TargetManagerEvent.TargetGone */, target);\n            this.#availableTargetsByTargetId.delete(event.targetId);\n        }\n    };\n    #onAttachedToTarget = async (parentSession, event) => {\n        const targetInfo = event.targetInfo;\n        const session = this.#connection.session(event.sessionId);\n        if (!session) {\n            throw new Error(`Session ${event.sessionId} was not created.`);\n        }\n        const target = this.#availableTargetsByTargetId.get(targetInfo.targetId);\n        assert(target, `Target ${targetInfo.targetId} is missing`);\n        session._setTarget(target);\n        this.setupAttachmentListeners(session);\n        this.#availableTargetsBySessionId.set(session.id(), this.#availableTargetsByTargetId.get(targetInfo.targetId));\n        parentSession.emit(CDPSessionEvent.Ready, session);\n    };\n    #finishInitializationIfReady(targetId) {\n        this.#targetsIdsForInit.delete(targetId);\n        if (this.#targetsIdsForInit.size === 0) {\n            this.#initializeDeferred.resolve();\n        }\n    }\n}\n//# sourceMappingURL=FirefoxTargetManager.js.map","/**\n * @license\n * Copyright 2023 Google Inc.\n * SPDX-License-Identifier: Apache-2.0\n */\n/**\n * @internal\n */\nexport const _isElementHandle = Symbol('_isElementHandle');\n//# sourceMappingURL=ElementHandleSymbol.js.map","/**\n * @license\n * Copyright 2023 Google Inc.\n * SPDX-License-Identifier: Apache-2.0\n */\nconst createdFunctions = new Map();\n/**\n * Creates a function from a string.\n *\n * @internal\n */\nexport const createFunction = (functionValue) => {\n    let fn = createdFunctions.get(functionValue);\n    if (fn) {\n        return fn;\n    }\n    fn = new Function(`return ${functionValue}`)();\n    createdFunctions.set(functionValue, fn);\n    return fn;\n};\n/**\n * @internal\n */\nexport function stringifyFunction(fn) {\n    let value = fn.toString();\n    try {\n        new Function(`(${value})`);\n    }\n    catch (err) {\n        if (err.message.includes(`Refused to evaluate a string as JavaScript because 'unsafe-eval' is not an allowed source of script in the following Content Security Policy directive`)) {\n            // The content security policy does not allow Function eval. Let's\n            // assume the value might be valid as is.\n            return value;\n        }\n        // This means we might have a function shorthand (e.g. `test(){}`). Let's\n        // try prefixing.\n        let prefix = 'function ';\n        if (value.startsWith('async ')) {\n            prefix = `async ${prefix}`;\n            value = value.substring('async '.length);\n        }\n        value = `${prefix}${value}`;\n        try {\n            new Function(`(${value})`);\n        }\n        catch {\n            // We tried hard to serialize, but there's a weird beast here.\n            throw new Error('Passed function cannot be serialized!');\n        }\n    }\n    return value;\n}\n/**\n * Replaces `PLACEHOLDER`s with the given replacements.\n *\n * All replacements must be valid JS code.\n *\n * @example\n *\n * ```ts\n * interpolateFunction(() => PLACEHOLDER('test'), {test: 'void 0'});\n * // Equivalent to () => void 0\n * ```\n *\n * @internal\n */\nexport const interpolateFunction = (fn, replacements) => {\n    let value = stringifyFunction(fn);\n    for (const [name, jsValue] of Object.entries(replacements)) {\n        value = value.replace(new RegExp(`PLACEHOLDER\\\\(\\\\s*(?:'${name}'|\"${name}\")\\\\s*\\\\)`, 'g'), \n        // Wrapping this ensures tersers that accidentally inline PLACEHOLDER calls\n        // are still valid. Without, we may get calls like ()=>{...}() which is\n        // not valid.\n        `(${jsValue})`);\n    }\n    return createFunction(value);\n};\n//# sourceMappingURL=Function.js.map","/**\n * @license\n * Copyright 2023 Google Inc.\n * SPDX-License-Identifier: Apache-2.0\n */\nvar __addDisposableResource = (this && this.__addDisposableResource) || function (env, value, async) {\n    if (value !== null && value !== void 0) {\n        if (typeof value !== \"object\" && typeof value !== \"function\") throw new TypeError(\"Object expected.\");\n        var dispose, inner;\n        if (async) {\n            if (!Symbol.asyncDispose) throw new TypeError(\"Symbol.asyncDispose is not defined.\");\n            dispose = value[Symbol.asyncDispose];\n        }\n        if (dispose === void 0) {\n            if (!Symbol.dispose) throw new TypeError(\"Symbol.dispose is not defined.\");\n            dispose = value[Symbol.dispose];\n            if (async) inner = dispose;\n        }\n        if (typeof dispose !== \"function\") throw new TypeError(\"Object not disposable.\");\n        if (inner) dispose = function() { try { inner.call(this); } catch (e) { return Promise.reject(e); } };\n        env.stack.push({ value: value, dispose: dispose, async: async });\n    }\n    else if (async) {\n        env.stack.push({ async: true });\n    }\n    return value;\n};\nvar __disposeResources = (this && this.__disposeResources) || (function (SuppressedError) {\n    return function (env) {\n        function fail(e) {\n            env.error = env.hasError ? new SuppressedError(e, env.error, \"An error was suppressed during disposal.\") : e;\n            env.hasError = true;\n        }\n        function next() {\n            while (env.stack.length) {\n                var rec = env.stack.pop();\n                try {\n                    var result = rec.dispose && rec.dispose.call(rec.value);\n                    if (rec.async) return Promise.resolve(result).then(next, function(e) { fail(e); return next(); });\n                }\n                catch (e) {\n                    fail(e);\n                }\n            }\n            if (env.hasError) throw env.error;\n        }\n        return next();\n    };\n})(typeof SuppressedError === \"function\" ? SuppressedError : function (error, suppressed, message) {\n    var e = new Error(message);\n    return e.name = \"SuppressedError\", e.error = error, e.suppressed = suppressed, e;\n});\nimport { DisposableStack, disposeSymbol } from '../util/disposable.js';\nconst DEFAULT_BATCH_SIZE = 20;\n/**\n * This will transpose an iterator JSHandle into a fast, Puppeteer-side iterator\n * of JSHandles.\n *\n * @param size - The number of elements to transpose. This should be something\n * reasonable.\n */\nasync function* fastTransposeIteratorHandle(iterator, size) {\n    const env_1 = { stack: [], error: void 0, hasError: false };\n    try {\n        const array = __addDisposableResource(env_1, await iterator.evaluateHandle(async (iterator, size) => {\n            const results = [];\n            while (results.length < size) {\n                const result = await iterator.next();\n                if (result.done) {\n                    break;\n                }\n                results.push(result.value);\n            }\n            return results;\n        }, size), false);\n        const properties = (await array.getProperties());\n        const handles = properties.values();\n        const stack = __addDisposableResource(env_1, new DisposableStack(), false);\n        stack.defer(() => {\n            for (const handle_1 of handles) {\n                const env_2 = { stack: [], error: void 0, hasError: false };\n                try {\n                    const handle = __addDisposableResource(env_2, handle_1, false);\n                    handle[disposeSymbol]();\n                }\n                catch (e_2) {\n                    env_2.error = e_2;\n                    env_2.hasError = true;\n                }\n                finally {\n                    __disposeResources(env_2);\n                }\n            }\n        });\n        yield* handles;\n        return properties.size === 0;\n    }\n    catch (e_1) {\n        env_1.error = e_1;\n        env_1.hasError = true;\n    }\n    finally {\n        __disposeResources(env_1);\n    }\n}\n/**\n * This will transpose an iterator JSHandle in batches based on the default size\n * of {@link fastTransposeIteratorHandle}.\n */\nasync function* transposeIteratorHandle(iterator) {\n    let size = DEFAULT_BATCH_SIZE;\n    while (!(yield* fastTransposeIteratorHandle(iterator, size))) {\n        size <<= 1;\n    }\n}\n/**\n * @internal\n */\nexport async function* transposeIterableHandle(handle) {\n    const env_3 = { stack: [], error: void 0, hasError: false };\n    try {\n        const generatorHandle = __addDisposableResource(env_3, await handle.evaluateHandle(iterable => {\n            return (async function* () {\n                yield* iterable;\n            })();\n        }), false);\n        yield* transposeIteratorHandle(generatorHandle);\n    }\n    catch (e_3) {\n        env_3.error = e_3;\n        env_3.hasError = true;\n    }\n    finally {\n        __disposeResources(env_3);\n    }\n}\n//# sourceMappingURL=HandleIterator.js.map","/**\n * @license\n * Copyright 2022 Google Inc.\n * SPDX-License-Identifier: Apache-2.0\n */\n/**\n * @internal\n */\nexport class LazyArg {\n    static create = (get) => {\n        // We don't want to introduce LazyArg to the type system, otherwise we would\n        // have to make it public.\n        return new LazyArg(get);\n    };\n    #get;\n    constructor(get) {\n        this.#get = get;\n    }\n    async get(context) {\n        return await this.#get(context);\n    }\n}\n//# sourceMappingURL=LazyArg.js.map","/**\n * @license\n * Copyright 2023 Google Inc.\n * SPDX-License-Identifier: Apache-2.0\n */\nvar __addDisposableResource = (this && this.__addDisposableResource) || function (env, value, async) {\n    if (value !== null && value !== void 0) {\n        if (typeof value !== \"object\" && typeof value !== \"function\") throw new TypeError(\"Object expected.\");\n        var dispose, inner;\n        if (async) {\n            if (!Symbol.asyncDispose) throw new TypeError(\"Symbol.asyncDispose is not defined.\");\n            dispose = value[Symbol.asyncDispose];\n        }\n        if (dispose === void 0) {\n            if (!Symbol.dispose) throw new TypeError(\"Symbol.dispose is not defined.\");\n            dispose = value[Symbol.dispose];\n            if (async) inner = dispose;\n        }\n        if (typeof dispose !== \"function\") throw new TypeError(\"Object not disposable.\");\n        if (inner) dispose = function() { try { inner.call(this); } catch (e) { return Promise.reject(e); } };\n        env.stack.push({ value: value, dispose: dispose, async: async });\n    }\n    else if (async) {\n        env.stack.push({ async: true });\n    }\n    return value;\n};\nvar __disposeResources = (this && this.__disposeResources) || (function (SuppressedError) {\n    return function (env) {\n        function fail(e) {\n            env.error = env.hasError ? new SuppressedError(e, env.error, \"An error was suppressed during disposal.\") : e;\n            env.hasError = true;\n        }\n        function next() {\n            while (env.stack.length) {\n                var rec = env.stack.pop();\n                try {\n                    var result = rec.dispose && rec.dispose.call(rec.value);\n                    if (rec.async) return Promise.resolve(result).then(next, function(e) { fail(e); return next(); });\n                }\n                catch (e) {\n                    fail(e);\n                }\n            }\n            if (env.hasError) throw env.error;\n        }\n        return next();\n    };\n})(typeof SuppressedError === \"function\" ? SuppressedError : function (error, suppressed, message) {\n    var e = new Error(message);\n    return e.name = \"SuppressedError\", e.error = error, e.suppressed = suppressed, e;\n});\nimport { _isElementHandle } from '../api/ElementHandleSymbol.js';\nimport { isErrorLike } from '../util/ErrorLike.js';\nimport { interpolateFunction, stringifyFunction } from '../util/Function.js';\nimport { transposeIterableHandle } from './HandleIterator.js';\nimport { LazyArg } from './LazyArg.js';\n/**\n * @internal\n */\nexport class QueryHandler {\n    // Either one of these may be implemented, but at least one must be.\n    static querySelectorAll;\n    static querySelector;\n    static get _querySelector() {\n        if (this.querySelector) {\n            return this.querySelector;\n        }\n        if (!this.querySelectorAll) {\n            throw new Error('Cannot create default `querySelector`.');\n        }\n        return (this.querySelector = interpolateFunction(async (node, selector, PuppeteerUtil) => {\n            const querySelectorAll = PLACEHOLDER('querySelectorAll');\n            const results = querySelectorAll(node, selector, PuppeteerUtil);\n            for await (const result of results) {\n                return result;\n            }\n            return null;\n        }, {\n            querySelectorAll: stringifyFunction(this.querySelectorAll),\n        }));\n    }\n    static get _querySelectorAll() {\n        if (this.querySelectorAll) {\n            return this.querySelectorAll;\n        }\n        if (!this.querySelector) {\n            throw new Error('Cannot create default `querySelectorAll`.');\n        }\n        return (this.querySelectorAll = interpolateFunction(async function* (node, selector, PuppeteerUtil) {\n            const querySelector = PLACEHOLDER('querySelector');\n            const result = await querySelector(node, selector, PuppeteerUtil);\n            if (result) {\n                yield result;\n            }\n        }, {\n            querySelector: stringifyFunction(this.querySelector),\n        }));\n    }\n    /**\n     * Queries for multiple nodes given a selector and {@link ElementHandle}.\n     *\n     * Akin to {@link https://developer.mozilla.org/en-US/docs/Web/API/Document/querySelectorAll | Document.querySelectorAll()}.\n     */\n    static async *queryAll(element, selector) {\n        const env_1 = { stack: [], error: void 0, hasError: false };\n        try {\n            const handle = __addDisposableResource(env_1, await element.evaluateHandle(this._querySelectorAll, selector, LazyArg.create(context => {\n                return context.puppeteerUtil;\n            })), false);\n            yield* transposeIterableHandle(handle);\n        }\n        catch (e_1) {\n            env_1.error = e_1;\n            env_1.hasError = true;\n        }\n        finally {\n            __disposeResources(env_1);\n        }\n    }\n    /**\n     * Queries for a single node given a selector and {@link ElementHandle}.\n     *\n     * Akin to {@link https://developer.mozilla.org/en-US/docs/Web/API/Document/querySelector}.\n     */\n    static async queryOne(element, selector) {\n        const env_2 = { stack: [], error: void 0, hasError: false };\n        try {\n            const result = __addDisposableResource(env_2, await element.evaluateHandle(this._querySelector, selector, LazyArg.create(context => {\n                return context.puppeteerUtil;\n            })), false);\n            if (!(_isElementHandle in result)) {\n                return null;\n            }\n            return result.move();\n        }\n        catch (e_2) {\n            env_2.error = e_2;\n            env_2.hasError = true;\n        }\n        finally {\n            __disposeResources(env_2);\n        }\n    }\n    /**\n     * Waits until a single node appears for a given selector and\n     * {@link ElementHandle}.\n     *\n     * This will always query the handle in the Puppeteer world and migrate the\n     * result to the main world.\n     */\n    static async waitFor(elementOrFrame, selector, options) {\n        const env_3 = { stack: [], error: void 0, hasError: false };\n        try {\n            let frame;\n            const element = __addDisposableResource(env_3, await (async () => {\n                if (!(_isElementHandle in elementOrFrame)) {\n                    frame = elementOrFrame;\n                    return;\n                }\n                frame = elementOrFrame.frame;\n                return await frame.isolatedRealm().adoptHandle(elementOrFrame);\n            })(), false);\n            const { visible = false, hidden = false, timeout, signal } = options;\n            const polling = visible || hidden ? \"raf\" /* PollingOptions.RAF */ : options.polling;\n            try {\n                const env_4 = { stack: [], error: void 0, hasError: false };\n                try {\n                    signal?.throwIfAborted();\n                    const handle = __addDisposableResource(env_4, await frame.isolatedRealm().waitForFunction(async (PuppeteerUtil, query, selector, root, visible) => {\n                        const querySelector = PuppeteerUtil.createFunction(query);\n                        const node = await querySelector(root ?? document, selector, PuppeteerUtil);\n                        return PuppeteerUtil.checkVisibility(node, visible);\n                    }, {\n                        polling,\n                        root: element,\n                        timeout,\n                        signal,\n                    }, LazyArg.create(context => {\n                        return context.puppeteerUtil;\n                    }), stringifyFunction(this._querySelector), selector, element, visible ? true : hidden ? false : undefined), false);\n                    if (signal?.aborted) {\n                        throw signal.reason;\n                    }\n                    if (!(_isElementHandle in handle)) {\n                        return null;\n                    }\n                    return await frame.mainRealm().transferHandle(handle);\n                }\n                catch (e_3) {\n                    env_4.error = e_3;\n                    env_4.hasError = true;\n                }\n                finally {\n                    __disposeResources(env_4);\n                }\n            }\n            catch (error) {\n                if (!isErrorLike(error)) {\n                    throw error;\n                }\n                if (error.name === 'AbortError') {\n                    throw error;\n                }\n                error.message = `Waiting for selector \\`${selector}\\` failed: ${error.message}`;\n                throw error;\n            }\n        }\n        catch (e_4) {\n            env_3.error = e_4;\n            env_3.hasError = true;\n        }\n        finally {\n            __disposeResources(env_3);\n        }\n    }\n}\n//# sourceMappingURL=QueryHandler.js.map","/**\n * @internal\n */\nexport class AsyncIterableUtil {\n    static async *map(iterable, map) {\n        for await (const value of iterable) {\n            yield await map(value);\n        }\n    }\n    static async *flatMap(iterable, map) {\n        for await (const value of iterable) {\n            yield* map(value);\n        }\n    }\n    static async collect(iterable) {\n        const result = [];\n        for await (const value of iterable) {\n            result.push(value);\n        }\n        return result;\n    }\n    static async first(iterable) {\n        for await (const value of iterable) {\n            return value;\n        }\n        return;\n    }\n}\n//# sourceMappingURL=AsyncIterableUtil.js.map","/**\n * @license\n * Copyright 2020 Google Inc.\n * SPDX-License-Identifier: Apache-2.0\n */\nimport { QueryHandler } from '../common/QueryHandler.js';\nimport { assert } from '../util/assert.js';\nimport { AsyncIterableUtil } from '../util/AsyncIterableUtil.js';\nconst isKnownAttribute = (attribute) => {\n    return ['name', 'role'].includes(attribute);\n};\n/**\n * The selectors consist of an accessible name to query for and optionally\n * further aria attributes on the form `[<attribute>=<value>]`.\n * Currently, we only support the `name` and `role` attribute.\n * The following examples showcase how the syntax works wrt. querying:\n *\n * - 'title[role=\"heading\"]' queries for elements with name 'title' and role 'heading'.\n * - '[role=\"image\"]' queries for elements with role 'image' and any name.\n * - 'label' queries for elements with name 'label' and any role.\n * - '[name=\"\"][role=\"button\"]' queries for elements with no name and role 'button'.\n */\nconst ATTRIBUTE_REGEXP = /\\[\\s*(?<attribute>\\w+)\\s*=\\s*(?<quote>\"|')(?<value>\\\\.|.*?(?=\\k<quote>))\\k<quote>\\s*\\]/g;\nconst parseARIASelector = (selector) => {\n    const queryOptions = {};\n    const defaultName = selector.replace(ATTRIBUTE_REGEXP, (_, attribute, __, value) => {\n        assert(isKnownAttribute(attribute), `Unknown aria attribute \"${attribute}\" in selector`);\n        queryOptions[attribute] = value;\n        return '';\n    });\n    if (defaultName && !queryOptions.name) {\n        queryOptions.name = defaultName;\n    }\n    return queryOptions;\n};\n/**\n * @internal\n */\nexport class ARIAQueryHandler extends QueryHandler {\n    static querySelector = async (node, selector, { ariaQuerySelector }) => {\n        return await ariaQuerySelector(node, selector);\n    };\n    static async *queryAll(element, selector) {\n        const { name, role } = parseARIASelector(selector);\n        yield* element.queryAXTree(name, role);\n    }\n    static queryOne = async (element, selector) => {\n        return ((await AsyncIterableUtil.first(this.queryAll(element, selector))) ?? null);\n    };\n}\n//# sourceMappingURL=AriaQueryHandler.js.map","/**\n * @license\n * Copyright 2023 Google Inc.\n * SPDX-License-Identifier: Apache-2.0\n */\nimport { QueryHandler } from './QueryHandler.js';\n/**\n * @internal\n */\nexport class CSSQueryHandler extends QueryHandler {\n    static querySelector = (element, selector, { cssQuerySelector }) => {\n        return cssQuerySelector(element, selector);\n    };\n    static querySelectorAll = (element, selector, { cssQuerySelectorAll }) => {\n        return cssQuerySelectorAll(element, selector);\n    };\n}\n//# sourceMappingURL=CSSQueryHandler.js.map","/**\n * JavaScript code that provides the puppeteer utilities. See the\n * [README](https://github.com/puppeteer/puppeteer/blob/main/src/injected/README.md)\n * for injection for more information.\n *\n * @internal\n */\nexport const source = \"\\\"use strict\\\";var g=Object.defineProperty;var X=Object.getOwnPropertyDescriptor;var B=Object.getOwnPropertyNames;var Y=Object.prototype.hasOwnProperty;var l=(t,e)=>{for(var r in e)g(t,r,{get:e[r],enumerable:!0})},J=(t,e,r,o)=>{if(e&&typeof e==\\\"object\\\"||typeof e==\\\"function\\\")for(let n of B(e))!Y.call(t,n)&&n!==r&&g(t,n,{get:()=>e[n],enumerable:!(o=X(e,n))||o.enumerable});return t};var z=t=>J(g({},\\\"__esModule\\\",{value:!0}),t);var pe={};l(pe,{default:()=>he});module.exports=z(pe);var N=class extends Error{constructor(e,r){super(e,r),this.name=this.constructor.name}get[Symbol.toStringTag](){return this.constructor.name}},p=class extends N{};var c=class t{static create(e){return new t(e)}static async race(e){let r=new Set;try{let o=e.map(n=>n instanceof t?(n.#n&&r.add(n),n.valueOrThrow()):n);return await Promise.race(o)}finally{for(let o of r)o.reject(new Error(\\\"Timeout cleared\\\"))}}#e=!1;#r=!1;#o;#t;#a=new Promise(e=>{this.#t=e});#n;#i;constructor(e){e&&e.timeout>0&&(this.#i=new p(e.message),this.#n=setTimeout(()=>{this.reject(this.#i)},e.timeout))}#l(e){clearTimeout(this.#n),this.#o=e,this.#t()}resolve(e){this.#r||this.#e||(this.#e=!0,this.#l(e))}reject(e){this.#r||this.#e||(this.#r=!0,this.#l(e))}resolved(){return this.#e}finished(){return this.#e||this.#r}value(){return this.#o}#s;valueOrThrow(){return this.#s||(this.#s=(async()=>{if(await this.#a,this.#r)throw this.#o;return this.#o})()),this.#s}};var L=new Map,F=t=>{let e=L.get(t);return e||(e=new Function(`return ${t}`)(),L.set(t,e),e)};var x={};l(x,{ariaQuerySelector:()=>G,ariaQuerySelectorAll:()=>b});var G=(t,e)=>globalThis.__ariaQuerySelector(t,e),b=async function*(t,e){yield*await globalThis.__ariaQuerySelectorAll(t,e)};var E={};l(E,{cssQuerySelector:()=>K,cssQuerySelectorAll:()=>Z});var K=(t,e)=>t.querySelector(e),Z=function(t,e){return t.querySelectorAll(e)};var A={};l(A,{customQuerySelectors:()=>P});var v=class{#e=new Map;register(e,r){if(!r.queryOne&&r.queryAll){let o=r.queryAll;r.queryOne=(n,i)=>{for(let s of o(n,i))return s;return null}}else if(r.queryOne&&!r.queryAll){let o=r.queryOne;r.queryAll=(n,i)=>{let s=o(n,i);return s?[s]:[]}}else if(!r.queryOne||!r.queryAll)throw new Error(\\\"At least one query method must be defined.\\\");this.#e.set(e,{querySelector:r.queryOne,querySelectorAll:r.queryAll})}unregister(e){this.#e.delete(e)}get(e){return this.#e.get(e)}clear(){this.#e.clear()}},P=new v;var R={};l(R,{pierceQuerySelector:()=>ee,pierceQuerySelectorAll:()=>te});var ee=(t,e)=>{let r=null,o=n=>{let i=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT);do{let s=i.currentNode;s.shadowRoot&&o(s.shadowRoot),!(s instanceof ShadowRoot)&&s!==n&&!r&&s.matches(e)&&(r=s)}while(!r&&i.nextNode())};return t instanceof Document&&(t=t.documentElement),o(t),r},te=(t,e)=>{let r=[],o=n=>{let i=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT);do{let s=i.currentNode;s.shadowRoot&&o(s.shadowRoot),!(s instanceof ShadowRoot)&&s!==n&&s.matches(e)&&r.push(s)}while(i.nextNode())};return t instanceof Document&&(t=t.documentElement),o(t),r};var u=(t,e)=>{if(!t)throw new Error(e)};var y=class{#e;#r;#o;#t;constructor(e,r){this.#e=e,this.#r=r}async start(){let e=this.#t=c.create(),r=await this.#e();if(r){e.resolve(r);return}this.#o=new MutationObserver(async()=>{let o=await this.#e();o&&(e.resolve(o),await this.stop())}),this.#o.observe(this.#r,{childList:!0,subtree:!0,attributes:!0})}async stop(){u(this.#t,\\\"Polling never started.\\\"),this.#t.finished()||this.#t.reject(new Error(\\\"Polling stopped\\\")),this.#o&&(this.#o.disconnect(),this.#o=void 0)}result(){return u(this.#t,\\\"Polling never started.\\\"),this.#t.valueOrThrow()}},w=class{#e;#r;constructor(e){this.#e=e}async start(){let e=this.#r=c.create(),r=await this.#e();if(r){e.resolve(r);return}let o=async()=>{if(e.finished())return;let n=await this.#e();if(!n){window.requestAnimationFrame(o);return}e.resolve(n),await this.stop()};window.requestAnimationFrame(o)}async stop(){u(this.#r,\\\"Polling never started.\\\"),this.#r.finished()||this.#r.reject(new Error(\\\"Polling stopped\\\"))}result(){return u(this.#r,\\\"Polling never started.\\\"),this.#r.valueOrThrow()}},T=class{#e;#r;#o;#t;constructor(e,r){this.#e=e,this.#r=r}async start(){let e=this.#t=c.create(),r=await this.#e();if(r){e.resolve(r);return}this.#o=setInterval(async()=>{let o=await this.#e();o&&(e.resolve(o),await this.stop())},this.#r)}async stop(){u(this.#t,\\\"Polling never started.\\\"),this.#t.finished()||this.#t.reject(new Error(\\\"Polling stopped\\\")),this.#o&&(clearInterval(this.#o),this.#o=void 0)}result(){return u(this.#t,\\\"Polling never started.\\\"),this.#t.valueOrThrow()}};var _={};l(_,{PCombinator:()=>H,pQuerySelector:()=>fe,pQuerySelectorAll:()=>$});var a=class{static async*map(e,r){for await(let o of e)yield await r(o)}static async*flatMap(e,r){for await(let o of e)yield*r(o)}static async collect(e){let r=[];for await(let o of e)r.push(o);return r}static async first(e){for await(let r of e)return r}};var C={};l(C,{textQuerySelectorAll:()=>m});var re=new Set([\\\"checkbox\\\",\\\"image\\\",\\\"radio\\\"]),oe=t=>t instanceof HTMLSelectElement||t instanceof HTMLTextAreaElement||t instanceof HTMLInputElement&&!re.has(t.type),ne=new Set([\\\"SCRIPT\\\",\\\"STYLE\\\"]),f=t=>!ne.has(t.nodeName)&&!document.head?.contains(t),I=new WeakMap,j=t=>{for(;t;)I.delete(t),t instanceof ShadowRoot?t=t.host:t=t.parentNode},W=new WeakSet,se=new MutationObserver(t=>{for(let e of t)j(e.target)}),d=t=>{let e=I.get(t);if(e||(e={full:\\\"\\\",immediate:[]},!f(t)))return e;let r=\\\"\\\";if(oe(t))e.full=t.value,e.immediate.push(t.value),t.addEventListener(\\\"input\\\",o=>{j(o.target)},{once:!0,capture:!0});else{for(let o=t.firstChild;o;o=o.nextSibling){if(o.nodeType===Node.TEXT_NODE){e.full+=o.nodeValue??\\\"\\\",r+=o.nodeValue??\\\"\\\";continue}r&&e.immediate.push(r),r=\\\"\\\",o.nodeType===Node.ELEMENT_NODE&&(e.full+=d(o).full)}r&&e.immediate.push(r),t instanceof Element&&t.shadowRoot&&(e.full+=d(t.shadowRoot).full),W.has(t)||(se.observe(t,{childList:!0,characterData:!0,subtree:!0}),W.add(t))}return I.set(t,e),e};var m=function*(t,e){let r=!1;for(let o of t.childNodes)if(o instanceof Element&&f(o)){let n;o.shadowRoot?n=m(o.shadowRoot,e):n=m(o,e);for(let i of n)yield i,r=!0}r||t instanceof Element&&f(t)&&d(t).full.includes(e)&&(yield t)};var k={};l(k,{checkVisibility:()=>le,pierce:()=>S,pierceAll:()=>O});var ie=[\\\"hidden\\\",\\\"collapse\\\"],le=(t,e)=>{if(!t)return e===!1;if(e===void 0)return t;let r=t.nodeType===Node.TEXT_NODE?t.parentElement:t,o=window.getComputedStyle(r),n=o&&!ie.includes(o.visibility)&&!ae(r);return e===n?t:!1};function ae(t){let e=t.getBoundingClientRect();return e.width===0||e.height===0}var ce=t=>\\\"shadowRoot\\\"in t&&t.shadowRoot instanceof ShadowRoot;function*S(t){ce(t)?yield t.shadowRoot:yield t}function*O(t){t=S(t).next().value,yield t;let e=[document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT)];for(let r of e){let o;for(;o=r.nextNode();)o.shadowRoot&&(yield o.shadowRoot,e.push(document.createTreeWalker(o.shadowRoot,NodeFilter.SHOW_ELEMENT)))}}var Q={};l(Q,{xpathQuerySelectorAll:()=>q});var q=function*(t,e,r=-1){let n=(t.ownerDocument||document).evaluate(e,t,null,XPathResult.ORDERED_NODE_ITERATOR_TYPE),i=[],s;for(;(s=n.iterateNext())&&(i.push(s),!(r&&i.length===r)););for(let h=0;h<i.length;h++)s=i[h],yield s,delete i[h]};var ue=/[-\\\\w\\\\P{ASCII}*]/u,H=(r=>(r.Descendent=\\\">>>\\\",r.Child=\\\">>>>\\\",r))(H||{}),V=t=>\\\"querySelectorAll\\\"in t,M=class{#e;#r=[];#o=void 0;elements;constructor(e,r){this.elements=[e],this.#e=r,this.#t()}async run(){if(typeof this.#o==\\\"string\\\")switch(this.#o.trimStart()){case\\\":scope\\\":this.#t();break}for(;this.#o!==void 0;this.#t()){let e=this.#o;typeof e==\\\"string\\\"?e[0]&&ue.test(e[0])?this.elements=a.flatMap(this.elements,async function*(r){V(r)&&(yield*r.querySelectorAll(e))}):this.elements=a.flatMap(this.elements,async function*(r){if(!r.parentElement){if(!V(r))return;yield*r.querySelectorAll(e);return}let o=0;for(let n of r.parentElement.children)if(++o,n===r)break;yield*r.parentElement.querySelectorAll(`:scope>:nth-child(${o})${e}`)}):this.elements=a.flatMap(this.elements,async function*(r){switch(e.name){case\\\"text\\\":yield*m(r,e.value);break;case\\\"xpath\\\":yield*q(r,e.value);break;case\\\"aria\\\":yield*b(r,e.value);break;default:let o=P.get(e.name);if(!o)throw new Error(`Unknown selector type: ${e.name}`);yield*o.querySelectorAll(r,e.value)}})}}#t(){if(this.#r.length!==0){this.#o=this.#r.shift();return}if(this.#e.length===0){this.#o=void 0;return}let e=this.#e.shift();switch(e){case\\\">>>>\\\":{this.elements=a.flatMap(this.elements,S),this.#t();break}case\\\">>>\\\":{this.elements=a.flatMap(this.elements,O),this.#t();break}default:this.#r=e,this.#t();break}}},D=class{#e=new WeakMap;calculate(e,r=[]){if(e===null)return r;e instanceof ShadowRoot&&(e=e.host);let o=this.#e.get(e);if(o)return[...o,...r];let n=0;for(let s=e.previousSibling;s;s=s.previousSibling)++n;let i=this.calculate(e.parentNode,[n]);return this.#e.set(e,i),[...i,...r]}},U=(t,e)=>{if(t.length+e.length===0)return 0;let[r=-1,...o]=t,[n=-1,...i]=e;return r===n?U(o,i):r<n?-1:1},de=async function*(t){let e=new Set;for await(let o of t)e.add(o);let r=new D;yield*[...e.values()].map(o=>[o,r.calculate(o)]).sort(([,o],[,n])=>U(o,n)).map(([o])=>o)},$=function(t,e){let r=JSON.parse(e);if(r.some(o=>{let n=0;return o.some(i=>(typeof i==\\\"string\\\"?++n:n=0,n>1))}))throw new Error(\\\"Multiple deep combinators found in sequence.\\\");return de(a.flatMap(r,o=>{let n=new M(t,o);return n.run(),n.elements}))},fe=async function(t,e){for await(let r of $(t,e))return r;return null};var me=Object.freeze({...x,...A,...R,..._,...C,...k,...Q,...E,Deferred:c,createFunction:F,createTextContent:d,IntervalPoller:T,isSuitableNodeForTextMatching:f,MutationPoller:y,RAFPoller:w}),he=me;\\n\";\n//# sourceMappingURL=injected.js.map","/**\n * @license\n * Copyright 2024 Google Inc.\n * SPDX-License-Identifier: Apache-2.0\n */\nimport { source as injectedSource } from '../generated/injected.js';\n/**\n * @internal\n */\nexport class ScriptInjector {\n    #updated = false;\n    #amendments = new Set();\n    // Appends a statement of the form `(PuppeteerUtil) => {...}`.\n    append(statement) {\n        this.#update(() => {\n            this.#amendments.add(statement);\n        });\n    }\n    pop(statement) {\n        this.#update(() => {\n            this.#amendments.delete(statement);\n        });\n    }\n    inject(inject, force = false) {\n        if (this.#updated || force) {\n            inject(this.#get());\n        }\n        this.#updated = false;\n    }\n    #update(callback) {\n        callback();\n        this.#updated = true;\n    }\n    #get() {\n        return `(() => {\n      const module = {};\n      ${injectedSource}\n      ${[...this.#amendments]\n            .map(statement => {\n            return `(${statement})(module.exports.default);`;\n        })\n            .join('')}\n      return module.exports.default;\n    })()`;\n    }\n}\n/**\n * @internal\n */\nexport const scriptInjector = new ScriptInjector();\n//# sourceMappingURL=ScriptInjector.js.map","/**\n * @license\n * Copyright 2023 Google Inc.\n * SPDX-License-Identifier: Apache-2.0\n */\nimport { assert } from '../util/assert.js';\nimport { interpolateFunction, stringifyFunction } from '../util/Function.js';\nimport { QueryHandler, } from './QueryHandler.js';\nimport { scriptInjector } from './ScriptInjector.js';\n/**\n * The registry of {@link CustomQueryHandler | custom query handlers}.\n *\n * @example\n *\n * ```ts\n * Puppeteer.customQueryHandlers.register('lit', { … });\n * const aHandle = await page.$('lit/…');\n * ```\n *\n * @internal\n */\nexport class CustomQueryHandlerRegistry {\n    #handlers = new Map();\n    get(name) {\n        const handler = this.#handlers.get(name);\n        return handler ? handler[1] : undefined;\n    }\n    /**\n     * Registers a {@link CustomQueryHandler | custom query handler}.\n     *\n     * @remarks\n     * After registration, the handler can be used everywhere where a selector is\n     * expected by prepending the selection string with `<name>/`. The name is\n     * only allowed to consist of lower- and upper case latin letters.\n     *\n     * @example\n     *\n     * ```ts\n     * Puppeteer.customQueryHandlers.register('lit', { … });\n     * const aHandle = await page.$('lit/…');\n     * ```\n     *\n     * @param name - Name to register under.\n     * @param queryHandler - {@link CustomQueryHandler | Custom query handler} to\n     * register.\n     */\n    register(name, handler) {\n        assert(!this.#handlers.has(name), `Cannot register over existing handler: ${name}`);\n        assert(/^[a-zA-Z]+$/.test(name), `Custom query handler names may only contain [a-zA-Z]`);\n        assert(handler.queryAll || handler.queryOne, `At least one query method must be implemented.`);\n        const Handler = class extends QueryHandler {\n            static querySelectorAll = interpolateFunction((node, selector, PuppeteerUtil) => {\n                return PuppeteerUtil.customQuerySelectors\n                    .get(PLACEHOLDER('name'))\n                    .querySelectorAll(node, selector);\n            }, { name: JSON.stringify(name) });\n            static querySelector = interpolateFunction((node, selector, PuppeteerUtil) => {\n                return PuppeteerUtil.customQuerySelectors\n                    .get(PLACEHOLDER('name'))\n                    .querySelector(node, selector);\n            }, { name: JSON.stringify(name) });\n        };\n        const registerScript = interpolateFunction((PuppeteerUtil) => {\n            PuppeteerUtil.customQuerySelectors.register(PLACEHOLDER('name'), {\n                queryAll: PLACEHOLDER('queryAll'),\n                queryOne: PLACEHOLDER('queryOne'),\n            });\n        }, {\n            name: JSON.stringify(name),\n            queryAll: handler.queryAll\n                ? stringifyFunction(handler.queryAll)\n                : String(undefined),\n            queryOne: handler.queryOne\n                ? stringifyFunction(handler.queryOne)\n                : String(undefined),\n        }).toString();\n        this.#handlers.set(name, [registerScript, Handler]);\n        scriptInjector.append(registerScript);\n    }\n    /**\n     * Unregisters the {@link CustomQueryHandler | custom query handler} for the\n     * given name.\n     *\n     * @throws `Error` if there is no handler under the given name.\n     */\n    unregister(name) {\n        const handler = this.#handlers.get(name);\n        if (!handler) {\n            throw new Error(`Cannot unregister unknown handler: ${name}`);\n        }\n        scriptInjector.pop(handler[0]);\n        this.#handlers.delete(name);\n    }\n    /**\n     * Gets the names of all {@link CustomQueryHandler | custom query handlers}.\n     */\n    names() {\n        return [...this.#handlers.keys()];\n    }\n    /**\n     * Unregisters all custom query handlers.\n     */\n    clear() {\n        for (const [registerScript] of this.#handlers) {\n            scriptInjector.pop(registerScript);\n        }\n        this.#handlers.clear();\n    }\n}\n/**\n * @internal\n */\nexport const customQueryHandlers = new CustomQueryHandlerRegistry();\n//# sourceMappingURL=CustomQueryHandler.js.map","/**\n * @license\n * Copyright 2023 Google Inc.\n * SPDX-License-Identifier: Apache-2.0\n */\nimport { QueryHandler } from './QueryHandler.js';\n/**\n * @internal\n */\nexport class PierceQueryHandler extends QueryHandler {\n    static querySelector = (element, selector, { pierceQuerySelector }) => {\n        return pierceQuerySelector(element, selector);\n    };\n    static querySelectorAll = (element, selector, { pierceQuerySelectorAll }) => {\n        return pierceQuerySelectorAll(element, selector);\n    };\n}\n//# sourceMappingURL=PierceQueryHandler.js.map","/**\n * @license\n * Copyright 2023 Google Inc.\n * SPDX-License-Identifier: Apache-2.0\n */\nimport { QueryHandler, } from './QueryHandler.js';\n/**\n * @internal\n */\nexport class PQueryHandler extends QueryHandler {\n    static querySelectorAll = (element, selector, { pQuerySelectorAll }) => {\n        return pQuerySelectorAll(element, selector);\n    };\n    static querySelector = (element, selector, { pQuerySelector }) => {\n        return pQuerySelector(element, selector);\n    };\n}\n//# sourceMappingURL=PQueryHandler.js.map","/**\nMIT License\n\nCopyright (c) 2020 Lea Verou\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all\ncopies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\nSOFTWARE.\n\n*/\n// ../../node_modules/parsel-js/dist/parsel.js\nvar TOKENS = {\n  attribute: /\\[\\s*(?:(?<namespace>\\*|[-\\w\\P{ASCII}]*)\\|)?(?<name>[-\\w\\P{ASCII}]+)\\s*(?:(?<operator>\\W?=)\\s*(?<value>.+?)\\s*(\\s(?<caseSensitive>[iIsS]))?\\s*)?\\]/gu,\n  id: /#(?<name>[-\\w\\P{ASCII}]+)/gu,\n  class: /\\.(?<name>[-\\w\\P{ASCII}]+)/gu,\n  comma: /\\s*,\\s*/g,\n  combinator: /\\s*[\\s>+~]\\s*/g,\n  \"pseudo-element\": /::(?<name>[-\\w\\P{ASCII}]+)(?:\\((?<argument>¶*)\\))?/gu,\n  \"pseudo-class\": /:(?<name>[-\\w\\P{ASCII}]+)(?:\\((?<argument>¶*)\\))?/gu,\n  universal: /(?:(?<namespace>\\*|[-\\w\\P{ASCII}]*)\\|)?\\*/gu,\n  type: /(?:(?<namespace>\\*|[-\\w\\P{ASCII}]*)\\|)?(?<name>[-\\w\\P{ASCII}]+)/gu\n  // this must be last\n};\nvar TRIM_TOKENS = /* @__PURE__ */ new Set([\"combinator\", \"comma\"]);\nvar getArgumentPatternByType = (type) => {\n  switch (type) {\n    case \"pseudo-element\":\n    case \"pseudo-class\":\n      return new RegExp(TOKENS[type].source.replace(\"(?<argument>\\xB6*)\", \"(?<argument>.*)\"), \"gu\");\n    default:\n      return TOKENS[type];\n  }\n};\nfunction gobbleParens(text, offset) {\n  let nesting = 0;\n  let result = \"\";\n  for (; offset < text.length; offset++) {\n    const char = text[offset];\n    switch (char) {\n      case \"(\":\n        ++nesting;\n        break;\n      case \")\":\n        --nesting;\n        break;\n    }\n    result += char;\n    if (nesting === 0) {\n      return result;\n    }\n  }\n  return result;\n}\nfunction tokenizeBy(text, grammar = TOKENS) {\n  if (!text) {\n    return [];\n  }\n  const tokens = [text];\n  for (const [type, pattern] of Object.entries(grammar)) {\n    for (let i = 0; i < tokens.length; i++) {\n      const token = tokens[i];\n      if (typeof token !== \"string\") {\n        continue;\n      }\n      pattern.lastIndex = 0;\n      const match = pattern.exec(token);\n      if (!match) {\n        continue;\n      }\n      const from = match.index - 1;\n      const args = [];\n      const content = match[0];\n      const before = token.slice(0, from + 1);\n      if (before) {\n        args.push(before);\n      }\n      args.push({\n        ...match.groups,\n        type,\n        content\n      });\n      const after = token.slice(from + content.length + 1);\n      if (after) {\n        args.push(after);\n      }\n      tokens.splice(i, 1, ...args);\n    }\n  }\n  let offset = 0;\n  for (const token of tokens) {\n    switch (typeof token) {\n      case \"string\":\n        throw new Error(`Unexpected sequence ${token} found at index ${offset}`);\n      case \"object\":\n        offset += token.content.length;\n        token.pos = [offset - token.content.length, offset];\n        if (TRIM_TOKENS.has(token.type)) {\n          token.content = token.content.trim() || \" \";\n        }\n        break;\n    }\n  }\n  return tokens;\n}\nvar STRING_PATTERN = /(['\"])([^\\\\\\n]+?)\\1/g;\nvar ESCAPE_PATTERN = /\\\\./g;\nfunction tokenize(selector, grammar = TOKENS) {\n  selector = selector.trim();\n  if (selector === \"\") {\n    return [];\n  }\n  const replacements = [];\n  selector = selector.replace(ESCAPE_PATTERN, (value, offset) => {\n    replacements.push({ value, offset });\n    return \"\\uE000\".repeat(value.length);\n  });\n  selector = selector.replace(STRING_PATTERN, (value, quote, content, offset) => {\n    replacements.push({ value, offset });\n    return `${quote}${\"\\uE001\".repeat(content.length)}${quote}`;\n  });\n  {\n    let pos = 0;\n    let offset;\n    while ((offset = selector.indexOf(\"(\", pos)) > -1) {\n      const value = gobbleParens(selector, offset);\n      replacements.push({ value, offset });\n      selector = `${selector.substring(0, offset)}(${\"\\xB6\".repeat(value.length - 2)})${selector.substring(offset + value.length)}`;\n      pos = offset + value.length;\n    }\n  }\n  const tokens = tokenizeBy(selector, grammar);\n  const changedTokens = /* @__PURE__ */ new Set();\n  for (const replacement of replacements.reverse()) {\n    for (const token of tokens) {\n      const { offset, value } = replacement;\n      if (!(token.pos[0] <= offset && offset + value.length <= token.pos[1])) {\n        continue;\n      }\n      const { content } = token;\n      const tokenOffset = offset - token.pos[0];\n      token.content = content.slice(0, tokenOffset) + value + content.slice(tokenOffset + value.length);\n      if (token.content !== content) {\n        changedTokens.add(token);\n      }\n    }\n  }\n  for (const token of changedTokens) {\n    const pattern = getArgumentPatternByType(token.type);\n    if (!pattern) {\n      throw new Error(`Unknown token type: ${token.type}`);\n    }\n    pattern.lastIndex = 0;\n    const match = pattern.exec(token.content);\n    if (!match) {\n      throw new Error(`Unable to parse content for ${token.type}: ${token.content}`);\n    }\n    Object.assign(token, match.groups);\n  }\n  return tokens;\n}\nfunction* flatten(node, parent) {\n  switch (node.type) {\n    case \"list\":\n      for (let child of node.list) {\n        yield* flatten(child, node);\n      }\n      break;\n    case \"complex\":\n      yield* flatten(node.left, node);\n      yield* flatten(node.right, node);\n      break;\n    case \"compound\":\n      yield* node.list.map((token) => [token, node]);\n      break;\n    default:\n      yield [node, parent];\n  }\n}\nfunction stringify(listOrNode) {\n  let tokens;\n  if (Array.isArray(listOrNode)) {\n    tokens = listOrNode;\n  } else {\n    tokens = [...flatten(listOrNode)].map(([token]) => token);\n  }\n  return tokens.map((token) => token.content).join(\"\");\n}\nexport {\n  TOKENS,\n  stringify,\n  tokenize\n};\n","/**\n * @license\n * Copyright 2023 Google Inc.\n * SPDX-License-Identifier: Apache-2.0\n */\nimport { tokenize, TOKENS, stringify, } from '../../third_party/parsel-js/parsel-js.js';\nTOKENS['nesting'] = /&/g;\nTOKENS['combinator'] = /\\s*(>>>>?|[\\s>+~])\\s*/g;\nconst ESCAPE_REGEXP = /\\\\[\\s\\S]/g;\nconst unquote = (text) => {\n    if (text.length <= 1) {\n        return text;\n    }\n    if ((text[0] === '\"' || text[0] === \"'\") && text.endsWith(text[0])) {\n        text = text.slice(1, -1);\n    }\n    return text.replace(ESCAPE_REGEXP, match => {\n        return match[1];\n    });\n};\n/**\n * @internal\n */\nexport function parsePSelectors(selector) {\n    let isPureCSS = true;\n    let hasAria = false;\n    let hasPseudoClasses = false;\n    const tokens = tokenize(selector);\n    if (tokens.length === 0) {\n        return [[], isPureCSS, hasPseudoClasses, false];\n    }\n    let compoundSelector = [];\n    let complexSelector = [compoundSelector];\n    const selectors = [complexSelector];\n    const storage = [];\n    for (const token of tokens) {\n        switch (token.type) {\n            case 'combinator':\n                switch (token.content) {\n                    case \">>>\" /* PCombinator.Descendent */:\n                        isPureCSS = false;\n                        if (storage.length) {\n                            compoundSelector.push(stringify(storage));\n                            storage.splice(0);\n                        }\n                        compoundSelector = [];\n                        complexSelector.push(\">>>\" /* PCombinator.Descendent */);\n                        complexSelector.push(compoundSelector);\n                        continue;\n                    case \">>>>\" /* PCombinator.Child */:\n                        isPureCSS = false;\n                        if (storage.length) {\n                            compoundSelector.push(stringify(storage));\n                            storage.splice(0);\n                        }\n                        compoundSelector = [];\n                        complexSelector.push(\">>>>\" /* PCombinator.Child */);\n                        complexSelector.push(compoundSelector);\n                        continue;\n                }\n                break;\n            case 'pseudo-element':\n                if (!token.name.startsWith('-p-')) {\n                    break;\n                }\n                isPureCSS = false;\n                if (storage.length) {\n                    compoundSelector.push(stringify(storage));\n                    storage.splice(0);\n                }\n                const name = token.name.slice(3);\n                if (name === 'aria') {\n                    hasAria = true;\n                }\n                compoundSelector.push({\n                    name,\n                    value: unquote(token.argument ?? ''),\n                });\n                continue;\n            case 'pseudo-class':\n                hasPseudoClasses = true;\n                break;\n            case 'comma':\n                if (storage.length) {\n                    compoundSelector.push(stringify(storage));\n                    storage.splice(0);\n                }\n                compoundSelector = [];\n                complexSelector = [compoundSelector];\n                selectors.push(complexSelector);\n                continue;\n        }\n        storage.push(token);\n    }\n    if (storage.length) {\n        compoundSelector.push(stringify(storage));\n    }\n    return [selectors, isPureCSS, hasPseudoClasses, hasAria];\n}\n//# sourceMappingURL=PSelectorParser.js.map","/**\n * @license\n * Copyright 2023 Google Inc.\n * SPDX-License-Identifier: Apache-2.0\n */\nimport { QueryHandler } from './QueryHandler.js';\n/**\n * @internal\n */\nexport class TextQueryHandler extends QueryHandler {\n    static querySelectorAll = (element, selector, { textQuerySelectorAll }) => {\n        return textQuerySelectorAll(element, selector);\n    };\n}\n//# sourceMappingURL=TextQueryHandler.js.map","/**\n * @license\n * Copyright 2023 Google Inc.\n * SPDX-License-Identifier: Apache-2.0\n */\nimport { QueryHandler, } from './QueryHandler.js';\n/**\n * @internal\n */\nexport class XPathQueryHandler extends QueryHandler {\n    static querySelectorAll = (element, selector, { xpathQuerySelectorAll }) => {\n        return xpathQuerySelectorAll(element, selector);\n    };\n    static querySelector = (element, selector, { xpathQuerySelectorAll }) => {\n        for (const result of xpathQuerySelectorAll(element, selector, 1)) {\n            return result;\n        }\n        return null;\n    };\n}\n//# sourceMappingURL=XPathQueryHandler.js.map","/**\n * @license\n * Copyright 2023 Google Inc.\n * SPDX-License-Identifier: Apache-2.0\n */\nimport { ARIAQueryHandler } from '../cdp/AriaQueryHandler.js';\nimport { CSSQueryHandler } from './CSSQueryHandler.js';\nimport { customQueryHandlers } from './CustomQueryHandler.js';\nimport { PierceQueryHandler } from './PierceQueryHandler.js';\nimport { PQueryHandler } from './PQueryHandler.js';\nimport { parsePSelectors } from './PSelectorParser.js';\nimport { TextQueryHandler } from './TextQueryHandler.js';\nimport { XPathQueryHandler } from './XPathQueryHandler.js';\nconst BUILTIN_QUERY_HANDLERS = {\n    aria: ARIAQueryHandler,\n    pierce: PierceQueryHandler,\n    xpath: XPathQueryHandler,\n    text: TextQueryHandler,\n};\nconst QUERY_SEPARATORS = ['=', '/'];\n/**\n * @internal\n */\nexport function getQueryHandlerAndSelector(selector) {\n    for (const handlerMap of [\n        customQueryHandlers.names().map(name => {\n            return [name, customQueryHandlers.get(name)];\n        }),\n        Object.entries(BUILTIN_QUERY_HANDLERS),\n    ]) {\n        for (const [name, QueryHandler] of handlerMap) {\n            for (const separator of QUERY_SEPARATORS) {\n                const prefix = `${name}${separator}`;\n                if (selector.startsWith(prefix)) {\n                    selector = selector.slice(prefix.length);\n                    return {\n                        updatedSelector: selector,\n                        polling: name === 'aria' ? \"raf\" /* PollingOptions.RAF */ : \"mutation\" /* PollingOptions.MUTATION */,\n                        QueryHandler,\n                    };\n                }\n            }\n        }\n    }\n    try {\n        const [pSelector, isPureCSS, hasPseudoClasses, hasAria] = parsePSelectors(selector);\n        if (isPureCSS) {\n            return {\n                updatedSelector: selector,\n                polling: hasPseudoClasses\n                    ? \"raf\" /* PollingOptions.RAF */\n                    : \"mutation\" /* PollingOptions.MUTATION */,\n                QueryHandler: CSSQueryHandler,\n            };\n        }\n        return {\n            updatedSelector: JSON.stringify(pSelector),\n            polling: hasAria ? \"raf\" /* PollingOptions.RAF */ : \"mutation\" /* PollingOptions.MUTATION */,\n            QueryHandler: PQueryHandler,\n        };\n    }\n    catch {\n        return {\n            updatedSelector: selector,\n            polling: \"mutation\" /* PollingOptions.MUTATION */,\n            QueryHandler: CSSQueryHandler,\n        };\n    }\n}\n//# sourceMappingURL=GetQueryHandler.js.map","/**\n * @license\n * Copyright 2023 Google Inc.\n * SPDX-License-Identifier: Apache-2.0\n */\nvar __runInitializers = (this && this.__runInitializers) || function (thisArg, initializers, value) {\n    var useValue = arguments.length > 2;\n    for (var i = 0; i < initializers.length; i++) {\n        value = useValue ? initializers[i].call(thisArg, value) : initializers[i].call(thisArg);\n    }\n    return useValue ? value : void 0;\n};\nvar __esDecorate = (this && this.__esDecorate) || function (ctor, descriptorIn, decorators, contextIn, initializers, extraInitializers) {\n    function accept(f) { if (f !== void 0 && typeof f !== \"function\") throw new TypeError(\"Function expected\"); return f; }\n    var kind = contextIn.kind, key = kind === \"getter\" ? \"get\" : kind === \"setter\" ? \"set\" : \"value\";\n    var target = !descriptorIn && ctor ? contextIn[\"static\"] ? ctor : ctor.prototype : null;\n    var descriptor = descriptorIn || (target ? Object.getOwnPropertyDescriptor(target, contextIn.name) : {});\n    var _, done = false;\n    for (var i = decorators.length - 1; i >= 0; i--) {\n        var context = {};\n        for (var p in contextIn) context[p] = p === \"access\" ? {} : contextIn[p];\n        for (var p in contextIn.access) context.access[p] = contextIn.access[p];\n        context.addInitializer = function (f) { if (done) throw new TypeError(\"Cannot add initializers after decoration has completed\"); extraInitializers.push(accept(f || null)); };\n        var result = (0, decorators[i])(kind === \"accessor\" ? { get: descriptor.get, set: descriptor.set } : descriptor[key], context);\n        if (kind === \"accessor\") {\n            if (result === void 0) continue;\n            if (result === null || typeof result !== \"object\") throw new TypeError(\"Object expected\");\n            if (_ = accept(result.get)) descriptor.get = _;\n            if (_ = accept(result.set)) descriptor.set = _;\n            if (_ = accept(result.init)) initializers.unshift(_);\n        }\n        else if (_ = accept(result)) {\n            if (kind === \"field\") initializers.unshift(_);\n            else descriptor[key] = _;\n        }\n    }\n    if (target) Object.defineProperty(target, contextIn.name, descriptor);\n    done = true;\n};\nvar __addDisposableResource = (this && this.__addDisposableResource) || function (env, value, async) {\n    if (value !== null && value !== void 0) {\n        if (typeof value !== \"object\" && typeof value !== \"function\") throw new TypeError(\"Object expected.\");\n        var dispose, inner;\n        if (async) {\n            if (!Symbol.asyncDispose) throw new TypeError(\"Symbol.asyncDispose is not defined.\");\n            dispose = value[Symbol.asyncDispose];\n        }\n        if (dispose === void 0) {\n            if (!Symbol.dispose) throw new TypeError(\"Symbol.dispose is not defined.\");\n            dispose = value[Symbol.dispose];\n            if (async) inner = dispose;\n        }\n        if (typeof dispose !== \"function\") throw new TypeError(\"Object not disposable.\");\n        if (inner) dispose = function() { try { inner.call(this); } catch (e) { return Promise.reject(e); } };\n        env.stack.push({ value: value, dispose: dispose, async: async });\n    }\n    else if (async) {\n        env.stack.push({ async: true });\n    }\n    return value;\n};\nvar __disposeResources = (this && this.__disposeResources) || (function (SuppressedError) {\n    return function (env) {\n        function fail(e) {\n            env.error = env.hasError ? new SuppressedError(e, env.error, \"An error was suppressed during disposal.\") : e;\n            env.hasError = true;\n        }\n        function next() {\n            while (env.stack.length) {\n                var rec = env.stack.pop();\n                try {\n                    var result = rec.dispose && rec.dispose.call(rec.value);\n                    if (rec.async) return Promise.resolve(result).then(next, function(e) { fail(e); return next(); });\n                }\n                catch (e) {\n                    fail(e);\n                }\n            }\n            if (env.hasError) throw env.error;\n        }\n        return next();\n    };\n})(typeof SuppressedError === \"function\" ? SuppressedError : function (error, suppressed, message) {\n    var e = new Error(message);\n    return e.name = \"SuppressedError\", e.error = error, e.suppressed = suppressed, e;\n});\nimport { EventEmitter } from '../common/EventEmitter.js';\nimport { getQueryHandlerAndSelector } from '../common/GetQueryHandler.js';\nimport { transposeIterableHandle } from '../common/HandleIterator.js';\nimport { withSourcePuppeteerURLIfNone } from '../common/util.js';\nimport { environment } from '../environment.js';\nimport { assert } from '../util/assert.js';\nimport { throwIfDisposed } from '../util/decorators.js';\nimport { FunctionLocator, NodeLocator, } from './locators/locators.js';\n/**\n * We use symbols to prevent external parties listening to these events.\n * They are internal to Puppeteer.\n *\n * @internal\n */\n// eslint-disable-next-line @typescript-eslint/no-namespace\nexport var FrameEvent;\n(function (FrameEvent) {\n    FrameEvent.FrameNavigated = Symbol('Frame.FrameNavigated');\n    FrameEvent.FrameSwapped = Symbol('Frame.FrameSwapped');\n    FrameEvent.LifecycleEvent = Symbol('Frame.LifecycleEvent');\n    FrameEvent.FrameNavigatedWithinDocument = Symbol('Frame.FrameNavigatedWithinDocument');\n    FrameEvent.FrameDetached = Symbol('Frame.FrameDetached');\n    FrameEvent.FrameSwappedByActivation = Symbol('Frame.FrameSwappedByActivation');\n})(FrameEvent || (FrameEvent = {}));\n/**\n * @internal\n */\nexport const throwIfDetached = throwIfDisposed(frame => {\n    return `Attempted to use detached Frame '${frame._id}'.`;\n});\n/**\n * Represents a DOM frame.\n *\n * To understand frames, you can think of frames as `<iframe>` elements. Just\n * like iframes, frames can be nested, and when JavaScript is executed in a\n * frame, the JavaScript does not effect frames inside the ambient frame the\n * JavaScript executes in.\n *\n * @example\n * At any point in time, {@link Page | pages} expose their current frame\n * tree via the {@link Page.mainFrame} and {@link Frame.childFrames} methods.\n *\n * @example\n * An example of dumping frame tree:\n *\n * ```ts\n * import puppeteer from 'puppeteer';\n *\n * (async () => {\n *   const browser = await puppeteer.launch();\n *   const page = await browser.newPage();\n *   await page.goto('https://www.google.com/chrome/browser/canary.html');\n *   dumpFrameTree(page.mainFrame(), '');\n *   await browser.close();\n *\n *   function dumpFrameTree(frame, indent) {\n *     console.log(indent + frame.url());\n *     for (const child of frame.childFrames()) {\n *       dumpFrameTree(child, indent + '  ');\n *     }\n *   }\n * })();\n * ```\n *\n * @example\n * An example of getting text from an iframe element:\n *\n * ```ts\n * const frame = page.frames().find(frame => frame.name() === 'myframe');\n * const text = await frame.$eval('.selector', element => element.textContent);\n * console.log(text);\n * ```\n *\n * @remarks\n * Frame lifecycles are controlled by three events that are all dispatched on\n * the parent {@link Frame.page | page}:\n *\n * - {@link PageEvent.FrameAttached}\n * - {@link PageEvent.FrameNavigated}\n * - {@link PageEvent.FrameDetached}\n *\n * @public\n */\nlet Frame = (() => {\n    let _classSuper = EventEmitter;\n    let _instanceExtraInitializers = [];\n    let _frameElement_decorators;\n    let _evaluateHandle_decorators;\n    let _evaluate_decorators;\n    let _locator_decorators;\n    let _$_decorators;\n    let _$$_decorators;\n    let _$eval_decorators;\n    let _$$eval_decorators;\n    let _waitForSelector_decorators;\n    let _waitForFunction_decorators;\n    let _content_decorators;\n    let _addScriptTag_decorators;\n    let _addStyleTag_decorators;\n    let _click_decorators;\n    let _focus_decorators;\n    let _hover_decorators;\n    let _select_decorators;\n    let _tap_decorators;\n    let _type_decorators;\n    let _title_decorators;\n    return class Frame extends _classSuper {\n        static {\n            const _metadata = typeof Symbol === \"function\" && Symbol.metadata ? Object.create(_classSuper[Symbol.metadata] ?? null) : void 0;\n            _frameElement_decorators = [throwIfDetached];\n            _evaluateHandle_decorators = [throwIfDetached];\n            _evaluate_decorators = [throwIfDetached];\n            _locator_decorators = [throwIfDetached];\n            _$_decorators = [throwIfDetached];\n            _$$_decorators = [throwIfDetached];\n            _$eval_decorators = [throwIfDetached];\n            _$$eval_decorators = [throwIfDetached];\n            _waitForSelector_decorators = [throwIfDetached];\n            _waitForFunction_decorators = [throwIfDetached];\n            _content_decorators = [throwIfDetached];\n            _addScriptTag_decorators = [throwIfDetached];\n            _addStyleTag_decorators = [throwIfDetached];\n            _click_decorators = [throwIfDetached];\n            _focus_decorators = [throwIfDetached];\n            _hover_decorators = [throwIfDetached];\n            _select_decorators = [throwIfDetached];\n            _tap_decorators = [throwIfDetached];\n            _type_decorators = [throwIfDetached];\n            _title_decorators = [throwIfDetached];\n            __esDecorate(this, null, _frameElement_decorators, { kind: \"method\", name: \"frameElement\", static: false, private: false, access: { has: obj => \"frameElement\" in obj, get: obj => obj.frameElement }, metadata: _metadata }, null, _instanceExtraInitializers);\n            __esDecorate(this, null, _evaluateHandle_decorators, { kind: \"method\", name: \"evaluateHandle\", static: false, private: false, access: { has: obj => \"evaluateHandle\" in obj, get: obj => obj.evaluateHandle }, metadata: _metadata }, null, _instanceExtraInitializers);\n            __esDecorate(this, null, _evaluate_decorators, { kind: \"method\", name: \"evaluate\", static: false, private: false, access: { has: obj => \"evaluate\" in obj, get: obj => obj.evaluate }, metadata: _metadata }, null, _instanceExtraInitializers);\n            __esDecorate(this, null, _locator_decorators, { kind: \"method\", name: \"locator\", static: false, private: false, access: { has: obj => \"locator\" in obj, get: obj => obj.locator }, metadata: _metadata }, null, _instanceExtraInitializers);\n            __esDecorate(this, null, _$_decorators, { kind: \"method\", name: \"$\", static: false, private: false, access: { has: obj => \"$\" in obj, get: obj => obj.$ }, metadata: _metadata }, null, _instanceExtraInitializers);\n            __esDecorate(this, null, _$$_decorators, { kind: \"method\", name: \"$$\", static: false, private: false, access: { has: obj => \"$$\" in obj, get: obj => obj.$$ }, metadata: _metadata }, null, _instanceExtraInitializers);\n            __esDecorate(this, null, _$eval_decorators, { kind: \"method\", name: \"$eval\", static: false, private: false, access: { has: obj => \"$eval\" in obj, get: obj => obj.$eval }, metadata: _metadata }, null, _instanceExtraInitializers);\n            __esDecorate(this, null, _$$eval_decorators, { kind: \"method\", name: \"$$eval\", static: false, private: false, access: { has: obj => \"$$eval\" in obj, get: obj => obj.$$eval }, metadata: _metadata }, null, _instanceExtraInitializers);\n            __esDecorate(this, null, _waitForSelector_decorators, { kind: \"method\", name: \"waitForSelector\", static: false, private: false, access: { has: obj => \"waitForSelector\" in obj, get: obj => obj.waitForSelector }, metadata: _metadata }, null, _instanceExtraInitializers);\n            __esDecorate(this, null, _waitForFunction_decorators, { kind: \"method\", name: \"waitForFunction\", static: false, private: false, access: { has: obj => \"waitForFunction\" in obj, get: obj => obj.waitForFunction }, metadata: _metadata }, null, _instanceExtraInitializers);\n            __esDecorate(this, null, _content_decorators, { kind: \"method\", name: \"content\", static: false, private: false, access: { has: obj => \"content\" in obj, get: obj => obj.content }, metadata: _metadata }, null, _instanceExtraInitializers);\n            __esDecorate(this, null, _addScriptTag_decorators, { kind: \"method\", name: \"addScriptTag\", static: false, private: false, access: { has: obj => \"addScriptTag\" in obj, get: obj => obj.addScriptTag }, metadata: _metadata }, null, _instanceExtraInitializers);\n            __esDecorate(this, null, _addStyleTag_decorators, { kind: \"method\", name: \"addStyleTag\", static: false, private: false, access: { has: obj => \"addStyleTag\" in obj, get: obj => obj.addStyleTag }, metadata: _metadata }, null, _instanceExtraInitializers);\n            __esDecorate(this, null, _click_decorators, { kind: \"method\", name: \"click\", static: false, private: false, access: { has: obj => \"click\" in obj, get: obj => obj.click }, metadata: _metadata }, null, _instanceExtraInitializers);\n            __esDecorate(this, null, _focus_decorators, { kind: \"method\", name: \"focus\", static: false, private: false, access: { has: obj => \"focus\" in obj, get: obj => obj.focus }, metadata: _metadata }, null, _instanceExtraInitializers);\n            __esDecorate(this, null, _hover_decorators, { kind: \"method\", name: \"hover\", static: false, private: false, access: { has: obj => \"hover\" in obj, get: obj => obj.hover }, metadata: _metadata }, null, _instanceExtraInitializers);\n            __esDecorate(this, null, _select_decorators, { kind: \"method\", name: \"select\", static: false, private: false, access: { has: obj => \"select\" in obj, get: obj => obj.select }, metadata: _metadata }, null, _instanceExtraInitializers);\n            __esDecorate(this, null, _tap_decorators, { kind: \"method\", name: \"tap\", static: false, private: false, access: { has: obj => \"tap\" in obj, get: obj => obj.tap }, metadata: _metadata }, null, _instanceExtraInitializers);\n            __esDecorate(this, null, _type_decorators, { kind: \"method\", name: \"type\", static: false, private: false, access: { has: obj => \"type\" in obj, get: obj => obj.type }, metadata: _metadata }, null, _instanceExtraInitializers);\n            __esDecorate(this, null, _title_decorators, { kind: \"method\", name: \"title\", static: false, private: false, access: { has: obj => \"title\" in obj, get: obj => obj.title }, metadata: _metadata }, null, _instanceExtraInitializers);\n            if (_metadata) Object.defineProperty(this, Symbol.metadata, { enumerable: true, configurable: true, writable: true, value: _metadata });\n        }\n        /**\n         * @internal\n         */\n        _id = __runInitializers(this, _instanceExtraInitializers);\n        /**\n         * @internal\n         */\n        _parentId;\n        /**\n         * @internal\n         */\n        _name;\n        /**\n         * @internal\n         */\n        _hasStartedLoading = false;\n        /**\n         * @internal\n         */\n        constructor() {\n            super();\n        }\n        #_document;\n        /**\n         * @internal\n         */\n        #document() {\n            if (!this.#_document) {\n                this.#_document = this.mainRealm().evaluateHandle(() => {\n                    return document;\n                });\n            }\n            return this.#_document;\n        }\n        /**\n         * Used to clear the document handle that has been destroyed.\n         *\n         * @internal\n         */\n        clearDocumentHandle() {\n            this.#_document = undefined;\n        }\n        /**\n         * @returns The frame element associated with this frame (if any).\n         */\n        async frameElement() {\n            const env_1 = { stack: [], error: void 0, hasError: false };\n            try {\n                const parentFrame = this.parentFrame();\n                if (!parentFrame) {\n                    return null;\n                }\n                const list = __addDisposableResource(env_1, await parentFrame.isolatedRealm().evaluateHandle(() => {\n                    return document.querySelectorAll('iframe,frame');\n                }), false);\n                for await (const iframe_1 of transposeIterableHandle(list)) {\n                    const env_2 = { stack: [], error: void 0, hasError: false };\n                    try {\n                        const iframe = __addDisposableResource(env_2, iframe_1, false);\n                        const frame = await iframe.contentFrame();\n                        if (frame?._id === this._id) {\n                            return iframe.move();\n                        }\n                    }\n                    catch (e_1) {\n                        env_2.error = e_1;\n                        env_2.hasError = true;\n                    }\n                    finally {\n                        __disposeResources(env_2);\n                    }\n                }\n                return null;\n            }\n            catch (e_2) {\n                env_1.error = e_2;\n                env_1.hasError = true;\n            }\n            finally {\n                __disposeResources(env_1);\n            }\n        }\n        /**\n         * Behaves identically to {@link Page.evaluateHandle} except it's run within\n         * the context of this frame.\n         *\n         * See {@link Page.evaluateHandle} for details.\n         */\n        async evaluateHandle(pageFunction, ...args) {\n            pageFunction = withSourcePuppeteerURLIfNone(this.evaluateHandle.name, pageFunction);\n            return await this.mainRealm().evaluateHandle(pageFunction, ...args);\n        }\n        /**\n         * Behaves identically to {@link Page.evaluate} except it's run within\n         * the context of this frame.\n         *\n         * See {@link Page.evaluate} for details.\n         */\n        async evaluate(pageFunction, ...args) {\n            pageFunction = withSourcePuppeteerURLIfNone(this.evaluate.name, pageFunction);\n            return await this.mainRealm().evaluate(pageFunction, ...args);\n        }\n        /**\n         * @internal\n         */\n        locator(selectorOrFunc) {\n            if (typeof selectorOrFunc === 'string') {\n                return NodeLocator.create(this, selectorOrFunc);\n            }\n            else {\n                return FunctionLocator.create(this, selectorOrFunc);\n            }\n        }\n        /**\n         * Queries the frame for an element matching the given selector.\n         *\n         * @param selector -\n         * {@link https://pptr.dev/guides/page-interactions#selectors | selector}\n         * to query the page for.\n         * {@link https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Selectors | CSS selectors}\n         * can be passed as-is and a\n         * {@link https://pptr.dev/guides/page-interactions#non-css-selectors | Puppeteer-specific selector syntax}\n         * allows quering by\n         * {@link https://pptr.dev/guides/page-interactions#text-selectors--p-text | text},\n         * {@link https://pptr.dev/guides/page-interactions#aria-selectors--p-aria | a11y role and name},\n         * and\n         * {@link https://pptr.dev/guides/page-interactions#xpath-selectors--p-xpath | xpath}\n         * and\n         * {@link https://pptr.dev/guides/page-interactions#querying-elements-in-shadow-dom | combining these queries across shadow roots}.\n         * Alternatively, you can specify the selector type using a\n         * {@link https://pptr.dev/guides/page-interactions#prefixed-selector-syntax | prefix}.\n         *\n         * @returns A {@link ElementHandle | element handle} to the first element\n         * matching the given selector. Otherwise, `null`.\n         */\n        async $(selector) {\n            // eslint-disable-next-line rulesdir/use-using -- This is cached.\n            const document = await this.#document();\n            return await document.$(selector);\n        }\n        /**\n         * Queries the frame for all elements matching the given selector.\n         *\n         * @param selector -\n         * {@link https://pptr.dev/guides/page-interactions#selectors | selector}\n         * to query the page for.\n         * {@link https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Selectors | CSS selectors}\n         * can be passed as-is and a\n         * {@link https://pptr.dev/guides/page-interactions#non-css-selectors | Puppeteer-specific selector syntax}\n         * allows quering by\n         * {@link https://pptr.dev/guides/page-interactions#text-selectors--p-text | text},\n         * {@link https://pptr.dev/guides/page-interactions#aria-selectors--p-aria | a11y role and name},\n         * and\n         * {@link https://pptr.dev/guides/page-interactions#xpath-selectors--p-xpath | xpath}\n         * and\n         * {@link https://pptr.dev/guides/page-interactions#querying-elements-in-shadow-dom | combining these queries across shadow roots}.\n         * Alternatively, you can specify the selector type using a\n         * {@link https://pptr.dev/guides/page-interactions#prefixed-selector-syntax | prefix}.\n         *\n         * @returns An array of {@link ElementHandle | element handles} that point to\n         * elements matching the given selector.\n         */\n        async $$(selector, options) {\n            // eslint-disable-next-line rulesdir/use-using -- This is cached.\n            const document = await this.#document();\n            return await document.$$(selector, options);\n        }\n        /**\n         * Runs the given function on the first element matching the given selector in\n         * the frame.\n         *\n         * If the given function returns a promise, then this method will wait till\n         * the promise resolves.\n         *\n         * @example\n         *\n         * ```ts\n         * const searchValue = await frame.$eval('#search', el => el.value);\n         * ```\n         *\n         * @param selector -\n         * {@link https://pptr.dev/guides/page-interactions#selectors | selector}\n         * to query the page for.\n         * {@link https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Selectors | CSS selectors}\n         * can be passed as-is and a\n         * {@link https://pptr.dev/guides/page-interactions#non-css-selectors | Puppeteer-specific selector syntax}\n         * allows quering by\n         * {@link https://pptr.dev/guides/page-interactions#text-selectors--p-text | text},\n         * {@link https://pptr.dev/guides/page-interactions#aria-selectors--p-aria | a11y role and name},\n         * and\n         * {@link https://pptr.dev/guides/page-interactions#xpath-selectors--p-xpath | xpath}\n         * and\n         * {@link https://pptr.dev/guides/page-interactions#querying-elements-in-shadow-dom | combining these queries across shadow roots}.\n         * Alternatively, you can specify the selector type using a\n         * {@link https://pptr.dev/guides/page-interactions#prefixed-selector-syntax | prefix}.\n         * @param pageFunction - The function to be evaluated in the frame's context.\n         * The first element matching the selector will be passed to the function as\n         * its first argument.\n         * @param args - Additional arguments to pass to `pageFunction`.\n         * @returns A promise to the result of the function.\n         */\n        async $eval(selector, pageFunction, ...args) {\n            pageFunction = withSourcePuppeteerURLIfNone(this.$eval.name, pageFunction);\n            // eslint-disable-next-line rulesdir/use-using -- This is cached.\n            const document = await this.#document();\n            return await document.$eval(selector, pageFunction, ...args);\n        }\n        /**\n         * Runs the given function on an array of elements matching the given selector\n         * in the frame.\n         *\n         * If the given function returns a promise, then this method will wait till\n         * the promise resolves.\n         *\n         * @example\n         *\n         * ```ts\n         * const divsCounts = await frame.$$eval('div', divs => divs.length);\n         * ```\n         *\n         * @param selector -\n         * {@link https://pptr.dev/guides/page-interactions#selectors | selector}\n         * to query the page for.\n         * {@link https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Selectors | CSS selectors}\n         * can be passed as-is and a\n         * {@link https://pptr.dev/guides/page-interactions#non-css-selectors | Puppeteer-specific selector syntax}\n         * allows quering by\n         * {@link https://pptr.dev/guides/page-interactions#text-selectors--p-text | text},\n         * {@link https://pptr.dev/guides/page-interactions#aria-selectors--p-aria | a11y role and name},\n         * and\n         * {@link https://pptr.dev/guides/page-interactions#xpath-selectors--p-xpath | xpath}\n         * and\n         * {@link https://pptr.dev/guides/page-interactions#querying-elements-in-shadow-dom | combining these queries across shadow roots}.\n         * Alternatively, you can specify the selector type using a\n         * {@link https://pptr.dev/guides/page-interactions#prefixed-selector-syntax | prefix}.\n         * @param pageFunction - The function to be evaluated in the frame's context.\n         * An array of elements matching the given selector will be passed to the\n         * function as its first argument.\n         * @param args - Additional arguments to pass to `pageFunction`.\n         * @returns A promise to the result of the function.\n         */\n        async $$eval(selector, pageFunction, ...args) {\n            pageFunction = withSourcePuppeteerURLIfNone(this.$$eval.name, pageFunction);\n            // eslint-disable-next-line rulesdir/use-using -- This is cached.\n            const document = await this.#document();\n            return await document.$$eval(selector, pageFunction, ...args);\n        }\n        /**\n         * Waits for an element matching the given selector to appear in the frame.\n         *\n         * This method works across navigations.\n         *\n         * @example\n         *\n         * ```ts\n         * import puppeteer from 'puppeteer';\n         *\n         * (async () => {\n         *   const browser = await puppeteer.launch();\n         *   const page = await browser.newPage();\n         *   let currentURL;\n         *   page\n         *     .mainFrame()\n         *     .waitForSelector('img')\n         *     .then(() => console.log('First URL with image: ' + currentURL));\n         *\n         *   for (currentURL of [\n         *     'https://example.com',\n         *     'https://google.com',\n         *     'https://bbc.com',\n         *   ]) {\n         *     await page.goto(currentURL);\n         *   }\n         *   await browser.close();\n         * })();\n         * ```\n         *\n         * @param selector - The selector to query and wait for.\n         * @param options - Options for customizing waiting behavior.\n         * @returns An element matching the given selector.\n         * @throws Throws if an element matching the given selector doesn't appear.\n         */\n        async waitForSelector(selector, options = {}) {\n            const { updatedSelector, QueryHandler, polling } = getQueryHandlerAndSelector(selector);\n            return (await QueryHandler.waitFor(this, updatedSelector, {\n                polling,\n                ...options,\n            }));\n        }\n        /**\n         * @example\n         * The `waitForFunction` can be used to observe viewport size change:\n         *\n         * ```ts\n         * import puppeteer from 'puppeteer';\n         *\n         * (async () => {\n         * .  const browser = await puppeteer.launch();\n         * .  const page = await browser.newPage();\n         * .  const watchDog = page.mainFrame().waitForFunction('window.innerWidth < 100');\n         * .  page.setViewport({width: 50, height: 50});\n         * .  await watchDog;\n         * .  await browser.close();\n         * })();\n         * ```\n         *\n         * To pass arguments from Node.js to the predicate of `page.waitForFunction` function:\n         *\n         * ```ts\n         * const selector = '.foo';\n         * await frame.waitForFunction(\n         *   selector => !!document.querySelector(selector),\n         *   {}, // empty options object\n         *   selector\n         * );\n         * ```\n         *\n         * @param pageFunction - the function to evaluate in the frame context.\n         * @param options - options to configure the polling method and timeout.\n         * @param args - arguments to pass to the `pageFunction`.\n         * @returns the promise which resolve when the `pageFunction` returns a truthy value.\n         */\n        async waitForFunction(pageFunction, options = {}, ...args) {\n            return await this.mainRealm().waitForFunction(pageFunction, options, ...args);\n        }\n        /**\n         * The full HTML contents of the frame, including the DOCTYPE.\n         */\n        async content() {\n            return await this.evaluate(() => {\n                let content = '';\n                for (const node of document.childNodes) {\n                    switch (node) {\n                        case document.documentElement:\n                            content += document.documentElement.outerHTML;\n                            break;\n                        default:\n                            content += new XMLSerializer().serializeToString(node);\n                            break;\n                    }\n                }\n                return content;\n            });\n        }\n        /**\n         * @internal\n         */\n        async setFrameContent(content) {\n            return await this.evaluate(html => {\n                document.open();\n                document.write(html);\n                document.close();\n            }, content);\n        }\n        /**\n         * The frame's `name` attribute as specified in the tag.\n         *\n         * @remarks\n         * If the name is empty, it returns the `id` attribute instead.\n         *\n         * @remarks\n         * This value is calculated once when the frame is created, and will not\n         * update if the attribute is changed later.\n         *\n         * @deprecated Use\n         *\n         * ```ts\n         * const element = await frame.frameElement();\n         * const nameOrId = await element.evaluate(frame => frame.name ?? frame.id);\n         * ```\n         */\n        name() {\n            return this._name || '';\n        }\n        /**\n         * Is`true` if the frame has been detached. Otherwise, `false`.\n         *\n         * @deprecated Use the `detached` getter.\n         */\n        isDetached() {\n            return this.detached;\n        }\n        /**\n         * @internal\n         */\n        get disposed() {\n            return this.detached;\n        }\n        /**\n         * Adds a `<script>` tag into the page with the desired url or content.\n         *\n         * @param options - Options for the script.\n         * @returns An {@link ElementHandle | element handle} to the injected\n         * `<script>` element.\n         */\n        async addScriptTag(options) {\n            let { content = '', type } = options;\n            const { path } = options;\n            if (+!!options.url + +!!path + +!!content !== 1) {\n                throw new Error('Exactly one of `url`, `path`, or `content` must be specified.');\n            }\n            if (path) {\n                content = await environment.value.fs.promises.readFile(path, 'utf8');\n                content += `//# sourceURL=${path.replace(/\\n/g, '')}`;\n            }\n            type = type ?? 'text/javascript';\n            return await this.mainRealm().transferHandle(await this.isolatedRealm().evaluateHandle(async ({ url, id, type, content }) => {\n                return await new Promise((resolve, reject) => {\n                    const script = document.createElement('script');\n                    script.type = type;\n                    script.text = content;\n                    script.addEventListener('error', event => {\n                        reject(new Error(event.message ?? 'Could not load script'));\n                    }, { once: true });\n                    if (id) {\n                        script.id = id;\n                    }\n                    if (url) {\n                        script.src = url;\n                        script.addEventListener('load', () => {\n                            resolve(script);\n                        }, { once: true });\n                        document.head.appendChild(script);\n                    }\n                    else {\n                        document.head.appendChild(script);\n                        resolve(script);\n                    }\n                });\n            }, { ...options, type, content }));\n        }\n        /**\n         * @internal\n         */\n        async addStyleTag(options) {\n            let { content = '' } = options;\n            const { path } = options;\n            if (+!!options.url + +!!path + +!!content !== 1) {\n                throw new Error('Exactly one of `url`, `path`, or `content` must be specified.');\n            }\n            if (path) {\n                content = await environment.value.fs.promises.readFile(path, 'utf8');\n                content += '/*# sourceURL=' + path.replace(/\\n/g, '') + '*/';\n                options.content = content;\n            }\n            return await this.mainRealm().transferHandle(await this.isolatedRealm().evaluateHandle(async ({ url, content }) => {\n                return await new Promise((resolve, reject) => {\n                    let element;\n                    if (!url) {\n                        element = document.createElement('style');\n                        element.appendChild(document.createTextNode(content));\n                    }\n                    else {\n                        const link = document.createElement('link');\n                        link.rel = 'stylesheet';\n                        link.href = url;\n                        element = link;\n                    }\n                    element.addEventListener('load', () => {\n                        resolve(element);\n                    }, { once: true });\n                    element.addEventListener('error', event => {\n                        reject(new Error(event.message ?? 'Could not load style'));\n                    }, { once: true });\n                    document.head.appendChild(element);\n                    return element;\n                });\n            }, options));\n        }\n        /**\n         * Clicks the first element found that matches `selector`.\n         *\n         * @remarks\n         * If `click()` triggers a navigation event and there's a separate\n         * `page.waitForNavigation()` promise to be resolved, you may end up with a\n         * race condition that yields unexpected results. The correct pattern for\n         * click and wait for navigation is the following:\n         *\n         * ```ts\n         * const [response] = await Promise.all([\n         *   page.waitForNavigation(waitOptions),\n         *   frame.click(selector, clickOptions),\n         * ]);\n         * ```\n         *\n         * @param selector - The selector to query for.\n         */\n        async click(selector, options = {}) {\n            const env_3 = { stack: [], error: void 0, hasError: false };\n            try {\n                const handle = __addDisposableResource(env_3, await this.$(selector), false);\n                assert(handle, `No element found for selector: ${selector}`);\n                await handle.click(options);\n                await handle.dispose();\n            }\n            catch (e_3) {\n                env_3.error = e_3;\n                env_3.hasError = true;\n            }\n            finally {\n                __disposeResources(env_3);\n            }\n        }\n        /**\n         * Focuses the first element that matches the `selector`.\n         *\n         * @param selector - The selector to query for.\n         * @throws Throws if there's no element matching `selector`.\n         */\n        async focus(selector) {\n            const env_4 = { stack: [], error: void 0, hasError: false };\n            try {\n                const handle = __addDisposableResource(env_4, await this.$(selector), false);\n                assert(handle, `No element found for selector: ${selector}`);\n                await handle.focus();\n            }\n            catch (e_4) {\n                env_4.error = e_4;\n                env_4.hasError = true;\n            }\n            finally {\n                __disposeResources(env_4);\n            }\n        }\n        /**\n         * Hovers the pointer over the center of the first element that matches the\n         * `selector`.\n         *\n         * @param selector - The selector to query for.\n         * @throws Throws if there's no element matching `selector`.\n         */\n        async hover(selector) {\n            const env_5 = { stack: [], error: void 0, hasError: false };\n            try {\n                const handle = __addDisposableResource(env_5, await this.$(selector), false);\n                assert(handle, `No element found for selector: ${selector}`);\n                await handle.hover();\n            }\n            catch (e_5) {\n                env_5.error = e_5;\n                env_5.hasError = true;\n            }\n            finally {\n                __disposeResources(env_5);\n            }\n        }\n        /**\n         * Selects a set of value on the first `<select>` element that matches the\n         * `selector`.\n         *\n         * @example\n         *\n         * ```ts\n         * frame.select('select#colors', 'blue'); // single selection\n         * frame.select('select#colors', 'red', 'green', 'blue'); // multiple selections\n         * ```\n         *\n         * @param selector - The selector to query for.\n         * @param values - The array of values to select. If the `<select>` has the\n         * `multiple` attribute, all values are considered, otherwise only the first\n         * one is taken into account.\n         * @returns the list of values that were successfully selected.\n         * @throws Throws if there's no `<select>` matching `selector`.\n         */\n        async select(selector, ...values) {\n            const env_6 = { stack: [], error: void 0, hasError: false };\n            try {\n                const handle = __addDisposableResource(env_6, await this.$(selector), false);\n                assert(handle, `No element found for selector: ${selector}`);\n                return await handle.select(...values);\n            }\n            catch (e_6) {\n                env_6.error = e_6;\n                env_6.hasError = true;\n            }\n            finally {\n                __disposeResources(env_6);\n            }\n        }\n        /**\n         * Taps the first element that matches the `selector`.\n         *\n         * @param selector - The selector to query for.\n         * @throws Throws if there's no element matching `selector`.\n         */\n        async tap(selector) {\n            const env_7 = { stack: [], error: void 0, hasError: false };\n            try {\n                const handle = __addDisposableResource(env_7, await this.$(selector), false);\n                assert(handle, `No element found for selector: ${selector}`);\n                await handle.tap();\n            }\n            catch (e_7) {\n                env_7.error = e_7;\n                env_7.hasError = true;\n            }\n            finally {\n                __disposeResources(env_7);\n            }\n        }\n        /**\n         * Sends a `keydown`, `keypress`/`input`, and `keyup` event for each character\n         * in the text.\n         *\n         * @remarks\n         * To press a special key, like `Control` or `ArrowDown`, use\n         * {@link Keyboard.press}.\n         *\n         * @example\n         *\n         * ```ts\n         * await frame.type('#mytextarea', 'Hello'); // Types instantly\n         * await frame.type('#mytextarea', 'World', {delay: 100}); // Types slower, like a user\n         * ```\n         *\n         * @param selector - the selector for the element to type into. If there are\n         * multiple the first will be used.\n         * @param text - text to type into the element\n         * @param options - takes one option, `delay`, which sets the time to wait\n         * between key presses in milliseconds. Defaults to `0`.\n         */\n        async type(selector, text, options) {\n            const env_8 = { stack: [], error: void 0, hasError: false };\n            try {\n                const handle = __addDisposableResource(env_8, await this.$(selector), false);\n                assert(handle, `No element found for selector: ${selector}`);\n                await handle.type(text, options);\n            }\n            catch (e_8) {\n                env_8.error = e_8;\n                env_8.hasError = true;\n            }\n            finally {\n                __disposeResources(env_8);\n            }\n        }\n        /**\n         * The frame's title.\n         */\n        async title() {\n            return await this.isolatedRealm().evaluate(() => {\n                return document.title;\n            });\n        }\n    };\n})();\nexport { Frame };\n//# sourceMappingURL=Frame.js.map","/**\n * @license\n * Copyright 2024 Google Inc.\n * SPDX-License-Identifier: Apache-2.0\n */\n/**\n * @internal\n */\nexport class CdpPreloadScript {\n    /**\n     * This is the ID of the preload script returned by\n     * Page.addScriptToEvaluateOnNewDocument in the main frame.\n     *\n     * Sub-frames would get a different CDP ID because\n     * addScriptToEvaluateOnNewDocument is called for each subframe. But\n     * users only see this ID and subframe IDs are internal to Puppeteer.\n     */\n    #id;\n    #source;\n    #frameToId = new WeakMap();\n    constructor(mainFrame, id, source) {\n        this.#id = id;\n        this.#source = source;\n        this.#frameToId.set(mainFrame, id);\n    }\n    get id() {\n        return this.#id;\n    }\n    get source() {\n        return this.#source;\n    }\n    getIdForFrame(frame) {\n        return this.#frameToId.get(frame);\n    }\n    setIdForFrame(frame, identifier) {\n        this.#frameToId.set(frame, identifier);\n    }\n}\n//# sourceMappingURL=CdpPreloadScript.js.map","/**\n * @license\n * Copyright 2022 Google Inc.\n * SPDX-License-Identifier: Apache-2.0\n */\nimport { assert } from '../util/assert.js';\nimport { Deferred } from '../util/Deferred.js';\n/**\n * Device in a request prompt.\n *\n * @public\n */\nexport class DeviceRequestPromptDevice {\n    /**\n     * Device id during a prompt.\n     */\n    id;\n    /**\n     * Device name as it appears in a prompt.\n     */\n    name;\n    /**\n     * @internal\n     */\n    constructor(id, name) {\n        this.id = id;\n        this.name = name;\n    }\n}\n/**\n * Device request prompts let you respond to the page requesting for a device\n * through an API like WebBluetooth.\n *\n * @remarks\n * `DeviceRequestPrompt` instances are returned via the\n * {@link Page.waitForDevicePrompt} method.\n *\n * @example\n *\n * ```ts\n * const [devicePrompt] = Promise.all([\n *   page.waitForDevicePrompt(),\n *   page.click('#connect-bluetooth'),\n * ]);\n * await devicePrompt.select(\n *   await devicePrompt.waitForDevice(({name}) => name.includes('My Device'))\n * );\n * ```\n *\n * @public\n */\nexport class DeviceRequestPrompt {\n    #client;\n    #timeoutSettings;\n    #id;\n    #handled = false;\n    #updateDevicesHandle = this.#updateDevices.bind(this);\n    #waitForDevicePromises = new Set();\n    /**\n     * Current list of selectable devices.\n     */\n    devices = [];\n    /**\n     * @internal\n     */\n    constructor(client, timeoutSettings, firstEvent) {\n        this.#client = client;\n        this.#timeoutSettings = timeoutSettings;\n        this.#id = firstEvent.id;\n        this.#client.on('DeviceAccess.deviceRequestPrompted', this.#updateDevicesHandle);\n        this.#client.on('Target.detachedFromTarget', () => {\n            this.#client = null;\n        });\n        this.#updateDevices(firstEvent);\n    }\n    #updateDevices(event) {\n        if (event.id !== this.#id) {\n            return;\n        }\n        for (const rawDevice of event.devices) {\n            if (this.devices.some(device => {\n                return device.id === rawDevice.id;\n            })) {\n                continue;\n            }\n            const newDevice = new DeviceRequestPromptDevice(rawDevice.id, rawDevice.name);\n            this.devices.push(newDevice);\n            for (const waitForDevicePromise of this.#waitForDevicePromises) {\n                if (waitForDevicePromise.filter(newDevice)) {\n                    waitForDevicePromise.promise.resolve(newDevice);\n                }\n            }\n        }\n    }\n    /**\n     * Resolve to the first device in the prompt matching a filter.\n     */\n    async waitForDevice(filter, options = {}) {\n        for (const device of this.devices) {\n            if (filter(device)) {\n                return device;\n            }\n        }\n        const { timeout = this.#timeoutSettings.timeout() } = options;\n        const deferred = Deferred.create({\n            message: `Waiting for \\`DeviceRequestPromptDevice\\` failed: ${timeout}ms exceeded`,\n            timeout,\n        });\n        if (options.signal) {\n            options.signal.addEventListener('abort', () => {\n                deferred.reject(options.signal?.reason);\n            }, { once: true });\n        }\n        const handle = { filter, promise: deferred };\n        this.#waitForDevicePromises.add(handle);\n        try {\n            return await deferred.valueOrThrow();\n        }\n        finally {\n            this.#waitForDevicePromises.delete(handle);\n        }\n    }\n    /**\n     * Select a device in the prompt's list.\n     */\n    async select(device) {\n        assert(this.#client !== null, 'Cannot select device through detached session!');\n        assert(this.devices.includes(device), 'Cannot select unknown device!');\n        assert(!this.#handled, 'Cannot select DeviceRequestPrompt which is already handled!');\n        this.#client.off('DeviceAccess.deviceRequestPrompted', this.#updateDevicesHandle);\n        this.#handled = true;\n        return await this.#client.send('DeviceAccess.selectPrompt', {\n            id: this.#id,\n            deviceId: device.id,\n        });\n    }\n    /**\n     * Cancel the prompt.\n     */\n    async cancel() {\n        assert(this.#client !== null, 'Cannot cancel prompt through detached session!');\n        assert(!this.#handled, 'Cannot cancel DeviceRequestPrompt which is already handled!');\n        this.#client.off('DeviceAccess.deviceRequestPrompted', this.#updateDevicesHandle);\n        this.#handled = true;\n        return await this.#client.send('DeviceAccess.cancelPrompt', { id: this.#id });\n    }\n}\n/**\n * @internal\n */\nexport class DeviceRequestPromptManager {\n    #client;\n    #timeoutSettings;\n    #deviceRequestPrompDeferreds = new Set();\n    /**\n     * @internal\n     */\n    constructor(client, timeoutSettings) {\n        this.#client = client;\n        this.#timeoutSettings = timeoutSettings;\n        this.#client.on('DeviceAccess.deviceRequestPrompted', event => {\n            this.#onDeviceRequestPrompted(event);\n        });\n        this.#client.on('Target.detachedFromTarget', () => {\n            this.#client = null;\n        });\n    }\n    /**\n     * Wait for device prompt created by an action like calling WebBluetooth's\n     * requestDevice.\n     */\n    async waitForDevicePrompt(options = {}) {\n        assert(this.#client !== null, 'Cannot wait for device prompt through detached session!');\n        const needsEnable = this.#deviceRequestPrompDeferreds.size === 0;\n        let enablePromise;\n        if (needsEnable) {\n            enablePromise = this.#client.send('DeviceAccess.enable');\n        }\n        const { timeout = this.#timeoutSettings.timeout() } = options;\n        const deferred = Deferred.create({\n            message: `Waiting for \\`DeviceRequestPrompt\\` failed: ${timeout}ms exceeded`,\n            timeout,\n        });\n        if (options.signal) {\n            options.signal.addEventListener('abort', () => {\n                deferred.reject(options.signal?.reason);\n            }, { once: true });\n        }\n        this.#deviceRequestPrompDeferreds.add(deferred);\n        try {\n            const [result] = await Promise.all([\n                deferred.valueOrThrow(),\n                enablePromise,\n            ]);\n            return result;\n        }\n        finally {\n            this.#deviceRequestPrompDeferreds.delete(deferred);\n        }\n    }\n    /**\n     * @internal\n     */\n    #onDeviceRequestPrompted(event) {\n        if (!this.#deviceRequestPrompDeferreds.size) {\n            return;\n        }\n        assert(this.#client !== null);\n        const devicePrompt = new DeviceRequestPrompt(this.#client, this.#timeoutSettings, event);\n        for (const promise of this.#deviceRequestPrompDeferreds) {\n            promise.resolve(devicePrompt);\n        }\n        this.#deviceRequestPrompDeferreds.clear();\n    }\n}\n//# sourceMappingURL=DeviceRequestPrompt.js.map","/**\n * @license\n * Copyright 2023 Google Inc.\n * SPDX-License-Identifier: Apache-2.0\n */\nvar __runInitializers = (this && this.__runInitializers) || function (thisArg, initializers, value) {\n    var useValue = arguments.length > 2;\n    for (var i = 0; i < initializers.length; i++) {\n        value = useValue ? initializers[i].call(thisArg, value) : initializers[i].call(thisArg);\n    }\n    return useValue ? value : void 0;\n};\nvar __esDecorate = (this && this.__esDecorate) || function (ctor, descriptorIn, decorators, contextIn, initializers, extraInitializers) {\n    function accept(f) { if (f !== void 0 && typeof f !== \"function\") throw new TypeError(\"Function expected\"); return f; }\n    var kind = contextIn.kind, key = kind === \"getter\" ? \"get\" : kind === \"setter\" ? \"set\" : \"value\";\n    var target = !descriptorIn && ctor ? contextIn[\"static\"] ? ctor : ctor.prototype : null;\n    var descriptor = descriptorIn || (target ? Object.getOwnPropertyDescriptor(target, contextIn.name) : {});\n    var _, done = false;\n    for (var i = decorators.length - 1; i >= 0; i--) {\n        var context = {};\n        for (var p in contextIn) context[p] = p === \"access\" ? {} : contextIn[p];\n        for (var p in contextIn.access) context.access[p] = contextIn.access[p];\n        context.addInitializer = function (f) { if (done) throw new TypeError(\"Cannot add initializers after decoration has completed\"); extraInitializers.push(accept(f || null)); };\n        var result = (0, decorators[i])(kind === \"accessor\" ? { get: descriptor.get, set: descriptor.set } : descriptor[key], context);\n        if (kind === \"accessor\") {\n            if (result === void 0) continue;\n            if (result === null || typeof result !== \"object\") throw new TypeError(\"Object expected\");\n            if (_ = accept(result.get)) descriptor.get = _;\n            if (_ = accept(result.set)) descriptor.set = _;\n            if (_ = accept(result.init)) initializers.unshift(_);\n        }\n        else if (_ = accept(result)) {\n            if (kind === \"field\") initializers.unshift(_);\n            else descriptor[key] = _;\n        }\n    }\n    if (target) Object.defineProperty(target, contextIn.name, descriptor);\n    done = true;\n};\nvar __addDisposableResource = (this && this.__addDisposableResource) || function (env, value, async) {\n    if (value !== null && value !== void 0) {\n        if (typeof value !== \"object\" && typeof value !== \"function\") throw new TypeError(\"Object expected.\");\n        var dispose, inner;\n        if (async) {\n            if (!Symbol.asyncDispose) throw new TypeError(\"Symbol.asyncDispose is not defined.\");\n            dispose = value[Symbol.asyncDispose];\n        }\n        if (dispose === void 0) {\n            if (!Symbol.dispose) throw new TypeError(\"Symbol.dispose is not defined.\");\n            dispose = value[Symbol.dispose];\n            if (async) inner = dispose;\n        }\n        if (typeof dispose !== \"function\") throw new TypeError(\"Object not disposable.\");\n        if (inner) dispose = function() { try { inner.call(this); } catch (e) { return Promise.reject(e); } };\n        env.stack.push({ value: value, dispose: dispose, async: async });\n    }\n    else if (async) {\n        env.stack.push({ async: true });\n    }\n    return value;\n};\nvar __disposeResources = (this && this.__disposeResources) || (function (SuppressedError) {\n    return function (env) {\n        function fail(e) {\n            env.error = env.hasError ? new SuppressedError(e, env.error, \"An error was suppressed during disposal.\") : e;\n            env.hasError = true;\n        }\n        function next() {\n            while (env.stack.length) {\n                var rec = env.stack.pop();\n                try {\n                    var result = rec.dispose && rec.dispose.call(rec.value);\n                    if (rec.async) return Promise.resolve(result).then(next, function(e) { fail(e); return next(); });\n                }\n                catch (e) {\n                    fail(e);\n                }\n            }\n            if (env.hasError) throw env.error;\n        }\n        return next();\n    };\n})(typeof SuppressedError === \"function\" ? SuppressedError : function (error, suppressed, message) {\n    var e = new Error(message);\n    return e.name = \"SuppressedError\", e.error = error, e.suppressed = suppressed, e;\n});\nvar __setFunctionName = (this && this.__setFunctionName) || function (f, name, prefix) {\n    if (typeof name === \"symbol\") name = name.description ? \"[\".concat(name.description, \"]\") : \"\";\n    return Object.defineProperty(f, \"name\", { configurable: true, value: prefix ? \"\".concat(prefix, \" \", name) : name });\n};\nimport { getQueryHandlerAndSelector } from '../common/GetQueryHandler.js';\nimport { LazyArg } from '../common/LazyArg.js';\nimport { isString, withSourcePuppeteerURLIfNone } from '../common/util.js';\nimport { assert } from '../util/assert.js';\nimport { AsyncIterableUtil } from '../util/AsyncIterableUtil.js';\nimport { throwIfDisposed } from '../util/decorators.js';\nimport { _isElementHandle } from './ElementHandleSymbol.js';\nimport { JSHandle } from './JSHandle.js';\n/**\n * A given method will have it's `this` replaced with an isolated version of\n * `this` when decorated with this decorator.\n *\n * All changes of isolated `this` are reflected on the actual `this`.\n *\n * @internal\n */\nexport function bindIsolatedHandle(target, _) {\n    return async function (...args) {\n        // If the handle is already isolated, then we don't need to adopt it\n        // again.\n        if (this.realm === this.frame.isolatedRealm()) {\n            return await target.call(this, ...args);\n        }\n        let adoptedThis;\n        if (this['isolatedHandle']) {\n            adoptedThis = this['isolatedHandle'];\n        }\n        else {\n            this['isolatedHandle'] = adoptedThis = await this.frame\n                .isolatedRealm()\n                .adoptHandle(this);\n        }\n        const result = await target.call(adoptedThis, ...args);\n        // If the function returns `adoptedThis`, then we return `this`.\n        if (result === adoptedThis) {\n            return this;\n        }\n        // If the function returns a handle, transfer it into the current realm.\n        if (result instanceof JSHandle) {\n            return await this.realm.transferHandle(result);\n        }\n        // If the function returns an array of handlers, transfer them into the\n        // current realm.\n        if (Array.isArray(result)) {\n            await Promise.all(result.map(async (item, index, result) => {\n                if (item instanceof JSHandle) {\n                    result[index] = await this.realm.transferHandle(item);\n                }\n            }));\n        }\n        if (result instanceof Map) {\n            await Promise.all([...result.entries()].map(async ([key, value]) => {\n                if (value instanceof JSHandle) {\n                    result.set(key, await this.realm.transferHandle(value));\n                }\n            }));\n        }\n        return result;\n    };\n}\n/**\n * ElementHandle represents an in-page DOM element.\n *\n * @remarks\n * ElementHandles can be created with the {@link Page.$} method.\n *\n * ```ts\n * import puppeteer from 'puppeteer';\n *\n * (async () => {\n *   const browser = await puppeteer.launch();\n *   const page = await browser.newPage();\n *   await page.goto('https://example.com');\n *   const hrefElement = await page.$('a');\n *   await hrefElement.click();\n *   // ...\n * })();\n * ```\n *\n * ElementHandle prevents the DOM element from being garbage-collected unless the\n * handle is {@link JSHandle.dispose | disposed}. ElementHandles are auto-disposed\n * when their origin frame gets navigated.\n *\n * ElementHandle instances can be used as arguments in {@link Page.$eval} and\n * {@link Page.evaluate} methods.\n *\n * If you're using TypeScript, ElementHandle takes a generic argument that\n * denotes the type of element the handle is holding within. For example, if you\n * have a handle to a `<select>` element, you can type it as\n * `ElementHandle<HTMLSelectElement>` and you get some nicer type checks.\n *\n * @public\n */\nlet ElementHandle = (() => {\n    let _classSuper = JSHandle;\n    let _instanceExtraInitializers = [];\n    let _getProperty_decorators;\n    let _getProperties_decorators;\n    let _jsonValue_decorators;\n    let _$_decorators;\n    let _$$_decorators;\n    let _private_$$_decorators;\n    let _private_$$_descriptor;\n    let _waitForSelector_decorators;\n    let _isVisible_decorators;\n    let _isHidden_decorators;\n    let _toElement_decorators;\n    let _clickablePoint_decorators;\n    let _hover_decorators;\n    let _click_decorators;\n    let _drag_decorators;\n    let _dragEnter_decorators;\n    let _dragOver_decorators;\n    let _drop_decorators;\n    let _dragAndDrop_decorators;\n    let _select_decorators;\n    let _tap_decorators;\n    let _touchStart_decorators;\n    let _touchMove_decorators;\n    let _touchEnd_decorators;\n    let _focus_decorators;\n    let _type_decorators;\n    let _press_decorators;\n    let _boundingBox_decorators;\n    let _boxModel_decorators;\n    let _screenshot_decorators;\n    let _isIntersectingViewport_decorators;\n    let _scrollIntoView_decorators;\n    return class ElementHandle extends _classSuper {\n        static {\n            const _metadata = typeof Symbol === \"function\" && Symbol.metadata ? Object.create(_classSuper[Symbol.metadata] ?? null) : void 0;\n            _getProperty_decorators = [throwIfDisposed(), bindIsolatedHandle];\n            _getProperties_decorators = [throwIfDisposed(), bindIsolatedHandle];\n            _jsonValue_decorators = [throwIfDisposed(), bindIsolatedHandle];\n            _$_decorators = [throwIfDisposed(), bindIsolatedHandle];\n            _$$_decorators = [throwIfDisposed()];\n            _private_$$_decorators = [bindIsolatedHandle];\n            _waitForSelector_decorators = [throwIfDisposed(), bindIsolatedHandle];\n            _isVisible_decorators = [throwIfDisposed(), bindIsolatedHandle];\n            _isHidden_decorators = [throwIfDisposed(), bindIsolatedHandle];\n            _toElement_decorators = [throwIfDisposed(), bindIsolatedHandle];\n            _clickablePoint_decorators = [throwIfDisposed(), bindIsolatedHandle];\n            _hover_decorators = [throwIfDisposed(), bindIsolatedHandle];\n            _click_decorators = [throwIfDisposed(), bindIsolatedHandle];\n            _drag_decorators = [throwIfDisposed(), bindIsolatedHandle];\n            _dragEnter_decorators = [throwIfDisposed(), bindIsolatedHandle];\n            _dragOver_decorators = [throwIfDisposed(), bindIsolatedHandle];\n            _drop_decorators = [throwIfDisposed(), bindIsolatedHandle];\n            _dragAndDrop_decorators = [throwIfDisposed(), bindIsolatedHandle];\n            _select_decorators = [throwIfDisposed(), bindIsolatedHandle];\n            _tap_decorators = [throwIfDisposed(), bindIsolatedHandle];\n            _touchStart_decorators = [throwIfDisposed(), bindIsolatedHandle];\n            _touchMove_decorators = [throwIfDisposed(), bindIsolatedHandle];\n            _touchEnd_decorators = [throwIfDisposed(), bindIsolatedHandle];\n            _focus_decorators = [throwIfDisposed(), bindIsolatedHandle];\n            _type_decorators = [throwIfDisposed(), bindIsolatedHandle];\n            _press_decorators = [throwIfDisposed(), bindIsolatedHandle];\n            _boundingBox_decorators = [throwIfDisposed(), bindIsolatedHandle];\n            _boxModel_decorators = [throwIfDisposed(), bindIsolatedHandle];\n            _screenshot_decorators = [throwIfDisposed(), bindIsolatedHandle];\n            _isIntersectingViewport_decorators = [throwIfDisposed(), bindIsolatedHandle];\n            _scrollIntoView_decorators = [throwIfDisposed(), bindIsolatedHandle];\n            __esDecorate(this, null, _getProperty_decorators, { kind: \"method\", name: \"getProperty\", static: false, private: false, access: { has: obj => \"getProperty\" in obj, get: obj => obj.getProperty }, metadata: _metadata }, null, _instanceExtraInitializers);\n            __esDecorate(this, null, _getProperties_decorators, { kind: \"method\", name: \"getProperties\", static: false, private: false, access: { has: obj => \"getProperties\" in obj, get: obj => obj.getProperties }, metadata: _metadata }, null, _instanceExtraInitializers);\n            __esDecorate(this, null, _jsonValue_decorators, { kind: \"method\", name: \"jsonValue\", static: false, private: false, access: { has: obj => \"jsonValue\" in obj, get: obj => obj.jsonValue }, metadata: _metadata }, null, _instanceExtraInitializers);\n            __esDecorate(this, null, _$_decorators, { kind: \"method\", name: \"$\", static: false, private: false, access: { has: obj => \"$\" in obj, get: obj => obj.$ }, metadata: _metadata }, null, _instanceExtraInitializers);\n            __esDecorate(this, null, _$$_decorators, { kind: \"method\", name: \"$$\", static: false, private: false, access: { has: obj => \"$$\" in obj, get: obj => obj.$$ }, metadata: _metadata }, null, _instanceExtraInitializers);\n            __esDecorate(this, _private_$$_descriptor = { value: __setFunctionName(async function (selector) {\n                    return await this.#$$impl(selector);\n                }, \"#$$\") }, _private_$$_decorators, { kind: \"method\", name: \"#$$\", static: false, private: true, access: { has: obj => #$$ in obj, get: obj => obj.#$$ }, metadata: _metadata }, null, _instanceExtraInitializers);\n            __esDecorate(this, null, _waitForSelector_decorators, { kind: \"method\", name: \"waitForSelector\", static: false, private: false, access: { has: obj => \"waitForSelector\" in obj, get: obj => obj.waitForSelector }, metadata: _metadata }, null, _instanceExtraInitializers);\n            __esDecorate(this, null, _isVisible_decorators, { kind: \"method\", name: \"isVisible\", static: false, private: false, access: { has: obj => \"isVisible\" in obj, get: obj => obj.isVisible }, metadata: _metadata }, null, _instanceExtraInitializers);\n            __esDecorate(this, null, _isHidden_decorators, { kind: \"method\", name: \"isHidden\", static: false, private: false, access: { has: obj => \"isHidden\" in obj, get: obj => obj.isHidden }, metadata: _metadata }, null, _instanceExtraInitializers);\n            __esDecorate(this, null, _toElement_decorators, { kind: \"method\", name: \"toElement\", static: false, private: false, access: { has: obj => \"toElement\" in obj, get: obj => obj.toElement }, metadata: _metadata }, null, _instanceExtraInitializers);\n            __esDecorate(this, null, _clickablePoint_decorators, { kind: \"method\", name: \"clickablePoint\", static: false, private: false, access: { has: obj => \"clickablePoint\" in obj, get: obj => obj.clickablePoint }, metadata: _metadata }, null, _instanceExtraInitializers);\n            __esDecorate(this, null, _hover_decorators, { kind: \"method\", name: \"hover\", static: false, private: false, access: { has: obj => \"hover\" in obj, get: obj => obj.hover }, metadata: _metadata }, null, _instanceExtraInitializers);\n            __esDecorate(this, null, _click_decorators, { kind: \"method\", name: \"click\", static: false, private: false, access: { has: obj => \"click\" in obj, get: obj => obj.click }, metadata: _metadata }, null, _instanceExtraInitializers);\n            __esDecorate(this, null, _drag_decorators, { kind: \"method\", name: \"drag\", static: false, private: false, access: { has: obj => \"drag\" in obj, get: obj => obj.drag }, metadata: _metadata }, null, _instanceExtraInitializers);\n            __esDecorate(this, null, _dragEnter_decorators, { kind: \"method\", name: \"dragEnter\", static: false, private: false, access: { has: obj => \"dragEnter\" in obj, get: obj => obj.dragEnter }, metadata: _metadata }, null, _instanceExtraInitializers);\n            __esDecorate(this, null, _dragOver_decorators, { kind: \"method\", name: \"dragOver\", static: false, private: false, access: { has: obj => \"dragOver\" in obj, get: obj => obj.dragOver }, metadata: _metadata }, null, _instanceExtraInitializers);\n            __esDecorate(this, null, _drop_decorators, { kind: \"method\", name: \"drop\", static: false, private: false, access: { has: obj => \"drop\" in obj, get: obj => obj.drop }, metadata: _metadata }, null, _instanceExtraInitializers);\n            __esDecorate(this, null, _dragAndDrop_decorators, { kind: \"method\", name: \"dragAndDrop\", static: false, private: false, access: { has: obj => \"dragAndDrop\" in obj, get: obj => obj.dragAndDrop }, metadata: _metadata }, null, _instanceExtraInitializers);\n            __esDecorate(this, null, _select_decorators, { kind: \"method\", name: \"select\", static: false, private: false, access: { has: obj => \"select\" in obj, get: obj => obj.select }, metadata: _metadata }, null, _instanceExtraInitializers);\n            __esDecorate(this, null, _tap_decorators, { kind: \"method\", name: \"tap\", static: false, private: false, access: { has: obj => \"tap\" in obj, get: obj => obj.tap }, metadata: _metadata }, null, _instanceExtraInitializers);\n            __esDecorate(this, null, _touchStart_decorators, { kind: \"method\", name: \"touchStart\", static: false, private: false, access: { has: obj => \"touchStart\" in obj, get: obj => obj.touchStart }, metadata: _metadata }, null, _instanceExtraInitializers);\n            __esDecorate(this, null, _touchMove_decorators, { kind: \"method\", name: \"touchMove\", static: false, private: false, access: { has: obj => \"touchMove\" in obj, get: obj => obj.touchMove }, metadata: _metadata }, null, _instanceExtraInitializers);\n            __esDecorate(this, null, _touchEnd_decorators, { kind: \"method\", name: \"touchEnd\", static: false, private: false, access: { has: obj => \"touchEnd\" in obj, get: obj => obj.touchEnd }, metadata: _metadata }, null, _instanceExtraInitializers);\n            __esDecorate(this, null, _focus_decorators, { kind: \"method\", name: \"focus\", static: false, private: false, access: { has: obj => \"focus\" in obj, get: obj => obj.focus }, metadata: _metadata }, null, _instanceExtraInitializers);\n            __esDecorate(this, null, _type_decorators, { kind: \"method\", name: \"type\", static: false, private: false, access: { has: obj => \"type\" in obj, get: obj => obj.type }, metadata: _metadata }, null, _instanceExtraInitializers);\n            __esDecorate(this, null, _press_decorators, { kind: \"method\", name: \"press\", static: false, private: false, access: { has: obj => \"press\" in obj, get: obj => obj.press }, metadata: _metadata }, null, _instanceExtraInitializers);\n            __esDecorate(this, null, _boundingBox_decorators, { kind: \"method\", name: \"boundingBox\", static: false, private: false, access: { has: obj => \"boundingBox\" in obj, get: obj => obj.boundingBox }, metadata: _metadata }, null, _instanceExtraInitializers);\n            __esDecorate(this, null, _boxModel_decorators, { kind: \"method\", name: \"boxModel\", static: false, private: false, access: { has: obj => \"boxModel\" in obj, get: obj => obj.boxModel }, metadata: _metadata }, null, _instanceExtraInitializers);\n            __esDecorate(this, null, _screenshot_decorators, { kind: \"method\", name: \"screenshot\", static: false, private: false, access: { has: obj => \"screenshot\" in obj, get: obj => obj.screenshot }, metadata: _metadata }, null, _instanceExtraInitializers);\n            __esDecorate(this, null, _isIntersectingViewport_decorators, { kind: \"method\", name: \"isIntersectingViewport\", static: false, private: false, access: { has: obj => \"isIntersectingViewport\" in obj, get: obj => obj.isIntersectingViewport }, metadata: _metadata }, null, _instanceExtraInitializers);\n            __esDecorate(this, null, _scrollIntoView_decorators, { kind: \"method\", name: \"scrollIntoView\", static: false, private: false, access: { has: obj => \"scrollIntoView\" in obj, get: obj => obj.scrollIntoView }, metadata: _metadata }, null, _instanceExtraInitializers);\n            if (_metadata) Object.defineProperty(this, Symbol.metadata, { enumerable: true, configurable: true, writable: true, value: _metadata });\n        }\n        /**\n         * @internal\n         * Cached isolatedHandle to prevent\n         * trying to adopt it multiple times\n         */\n        isolatedHandle = __runInitializers(this, _instanceExtraInitializers);\n        /**\n         * @internal\n         */\n        handle;\n        /**\n         * @internal\n         */\n        constructor(handle) {\n            super();\n            this.handle = handle;\n            this[_isElementHandle] = true;\n        }\n        /**\n         * @internal\n         */\n        get id() {\n            return this.handle.id;\n        }\n        /**\n         * @internal\n         */\n        get disposed() {\n            return this.handle.disposed;\n        }\n        /**\n         * @internal\n         */\n        async getProperty(propertyName) {\n            return await this.handle.getProperty(propertyName);\n        }\n        /**\n         * @internal\n         */\n        async getProperties() {\n            return await this.handle.getProperties();\n        }\n        /**\n         * @internal\n         */\n        async evaluate(pageFunction, ...args) {\n            pageFunction = withSourcePuppeteerURLIfNone(this.evaluate.name, pageFunction);\n            return await this.handle.evaluate(pageFunction, ...args);\n        }\n        /**\n         * @internal\n         */\n        async evaluateHandle(pageFunction, ...args) {\n            pageFunction = withSourcePuppeteerURLIfNone(this.evaluateHandle.name, pageFunction);\n            return await this.handle.evaluateHandle(pageFunction, ...args);\n        }\n        /**\n         * @internal\n         */\n        async jsonValue() {\n            return await this.handle.jsonValue();\n        }\n        /**\n         * @internal\n         */\n        toString() {\n            return this.handle.toString();\n        }\n        /**\n         * @internal\n         */\n        remoteObject() {\n            return this.handle.remoteObject();\n        }\n        /**\n         * @internal\n         */\n        dispose() {\n            return this.handle.dispose();\n        }\n        /**\n         * @internal\n         */\n        asElement() {\n            return this;\n        }\n        /**\n         * Queries the current element for an element matching the given selector.\n         *\n         * @param selector -\n         * {@link https://pptr.dev/guides/page-interactions#selectors | selector}\n         * to query the page for.\n         * {@link https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Selectors | CSS selectors}\n         * can be passed as-is and a\n         * {@link https://pptr.dev/guides/page-interactions#non-css-selectors | Puppeteer-specific selector syntax}\n         * allows quering by\n         * {@link https://pptr.dev/guides/page-interactions#text-selectors--p-text | text},\n         * {@link https://pptr.dev/guides/page-interactions#aria-selectors--p-aria | a11y role and name},\n         * and\n         * {@link https://pptr.dev/guides/page-interactions#xpath-selectors--p-xpath | xpath}\n         * and\n         * {@link https://pptr.dev/guides/page-interactions#querying-elements-in-shadow-dom | combining these queries across shadow roots}.\n         * Alternatively, you can specify the selector type using a\n         * {@link https://pptr.dev/guides/page-interactions#prefixed-selector-syntax | prefix}.\n         * @returns A {@link ElementHandle | element handle} to the first element\n         * matching the given selector. Otherwise, `null`.\n         */\n        async $(selector) {\n            const { updatedSelector, QueryHandler } = getQueryHandlerAndSelector(selector);\n            return (await QueryHandler.queryOne(this, updatedSelector));\n        }\n        /**\n         * Queries the current element for all elements matching the given selector.\n         *\n         * @param selector -\n         * {@link https://pptr.dev/guides/page-interactions#selectors | selector}\n         * to query the page for.\n         * {@link https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Selectors | CSS selectors}\n         * can be passed as-is and a\n         * {@link https://pptr.dev/guides/page-interactions#non-css-selectors | Puppeteer-specific selector syntax}\n         * allows quering by\n         * {@link https://pptr.dev/guides/page-interactions#text-selectors--p-text | text},\n         * {@link https://pptr.dev/guides/page-interactions#aria-selectors--p-aria | a11y role and name},\n         * and\n         * {@link https://pptr.dev/guides/page-interactions#xpath-selectors--p-xpath | xpath}\n         * and\n         * {@link https://pptr.dev/guides/page-interactions#querying-elements-in-shadow-dom | combining these queries across shadow roots}.\n         * Alternatively, you can specify the selector type using a\n         * {@link https://pptr.dev/guides/page-interactions#prefixed-selector-syntax | prefix}.\n         * @returns An array of {@link ElementHandle | element handles} that point to\n         * elements matching the given selector.\n         */\n        async $$(selector, options) {\n            if (options?.isolate === false) {\n                return await this.#$$impl(selector);\n            }\n            return await this.#$$(selector);\n        }\n        /**\n         * Isolates {@link ElementHandle.$$} if needed.\n         *\n         * @internal\n         */\n        get #$$() { return _private_$$_descriptor.value; }\n        /**\n         * Implementation for {@link ElementHandle.$$}.\n         *\n         * @internal\n         */\n        async #$$impl(selector) {\n            const { updatedSelector, QueryHandler } = getQueryHandlerAndSelector(selector);\n            return await AsyncIterableUtil.collect(QueryHandler.queryAll(this, updatedSelector));\n        }\n        /**\n         * Runs the given function on the first element matching the given selector in\n         * the current element.\n         *\n         * If the given function returns a promise, then this method will wait till\n         * the promise resolves.\n         *\n         * @example\n         *\n         * ```ts\n         * const tweetHandle = await page.$('.tweet');\n         * expect(await tweetHandle.$eval('.like', node => node.innerText)).toBe(\n         *   '100'\n         * );\n         * expect(await tweetHandle.$eval('.retweets', node => node.innerText)).toBe(\n         *   '10'\n         * );\n         * ```\n         *\n         * @param selector -\n         * {@link https://pptr.dev/guides/page-interactions#selectors | selector}\n         * to query the page for.\n         * {@link https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Selectors | CSS selectors}\n         * can be passed as-is and a\n         * {@link https://pptr.dev/guides/page-interactions#non-css-selectors | Puppeteer-specific selector syntax}\n         * allows quering by\n         * {@link https://pptr.dev/guides/page-interactions#text-selectors--p-text | text},\n         * {@link https://pptr.dev/guides/page-interactions#aria-selectors--p-aria | a11y role and name},\n         * and\n         * {@link https://pptr.dev/guides/page-interactions#xpath-selectors--p-xpath | xpath}\n         * and\n         * {@link https://pptr.dev/guides/page-interactions#querying-elements-in-shadow-dom | combining these queries across shadow roots}.\n         * Alternatively, you can specify the selector type using a\n         * {@link https://pptr.dev/guides/page-interactions#prefixed-selector-syntax | prefix}.\n         * @param pageFunction - The function to be evaluated in this element's page's\n         * context. The first element matching the selector will be passed in as the\n         * first argument.\n         * @param args - Additional arguments to pass to `pageFunction`.\n         * @returns A promise to the result of the function.\n         */\n        async $eval(selector, pageFunction, ...args) {\n            const env_1 = { stack: [], error: void 0, hasError: false };\n            try {\n                pageFunction = withSourcePuppeteerURLIfNone(this.$eval.name, pageFunction);\n                const elementHandle = __addDisposableResource(env_1, await this.$(selector), false);\n                if (!elementHandle) {\n                    throw new Error(`Error: failed to find element matching selector \"${selector}\"`);\n                }\n                return await elementHandle.evaluate(pageFunction, ...args);\n            }\n            catch (e_1) {\n                env_1.error = e_1;\n                env_1.hasError = true;\n            }\n            finally {\n                __disposeResources(env_1);\n            }\n        }\n        /**\n         * Runs the given function on an array of elements matching the given selector\n         * in the current element.\n         *\n         * If the given function returns a promise, then this method will wait till\n         * the promise resolves.\n         *\n         * @example\n         * HTML:\n         *\n         * ```html\n         * <div class=\"feed\">\n         *   <div class=\"tweet\">Hello!</div>\n         *   <div class=\"tweet\">Hi!</div>\n         * </div>\n         * ```\n         *\n         * JavaScript:\n         *\n         * ```ts\n         * const feedHandle = await page.$('.feed');\n         * expect(\n         *   await feedHandle.$$eval('.tweet', nodes => nodes.map(n => n.innerText))\n         * ).toEqual(['Hello!', 'Hi!']);\n         * ```\n         *\n         * @param selector -\n         * {@link https://pptr.dev/guides/page-interactions#selectors | selector}\n         * to query the page for.\n         * {@link https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Selectors | CSS selectors}\n         * can be passed as-is and a\n         * {@link https://pptr.dev/guides/page-interactions#non-css-selectors | Puppeteer-specific selector syntax}\n         * allows quering by\n         * {@link https://pptr.dev/guides/page-interactions#text-selectors--p-text | text},\n         * {@link https://pptr.dev/guides/page-interactions#aria-selectors--p-aria | a11y role and name},\n         * and\n         * {@link https://pptr.dev/guides/page-interactions#xpath-selectors--p-xpath | xpath}\n         * and\n         * {@link https://pptr.dev/guides/page-interactions#querying-elements-in-shadow-dom | combining these queries across shadow roots}.\n         * Alternatively, you can specify the selector type using a\n         * {@link https://pptr.dev/guides/page-interactions#prefixed-selector-syntax | prefix}.\n         * @param pageFunction - The function to be evaluated in the element's page's\n         * context. An array of elements matching the given selector will be passed to\n         * the function as its first argument.\n         * @param args - Additional arguments to pass to `pageFunction`.\n         * @returns A promise to the result of the function.\n         */\n        async $$eval(selector, pageFunction, ...args) {\n            const env_2 = { stack: [], error: void 0, hasError: false };\n            try {\n                pageFunction = withSourcePuppeteerURLIfNone(this.$$eval.name, pageFunction);\n                const results = await this.$$(selector);\n                const elements = __addDisposableResource(env_2, await this.evaluateHandle((_, ...elements) => {\n                    return elements;\n                }, ...results), false);\n                const [result] = await Promise.all([\n                    elements.evaluate(pageFunction, ...args),\n                    ...results.map(results => {\n                        return results.dispose();\n                    }),\n                ]);\n                return result;\n            }\n            catch (e_2) {\n                env_2.error = e_2;\n                env_2.hasError = true;\n            }\n            finally {\n                __disposeResources(env_2);\n            }\n        }\n        /**\n         * Wait for an element matching the given selector to appear in the current\n         * element.\n         *\n         * Unlike {@link Frame.waitForSelector}, this method does not work across\n         * navigations or if the element is detached from DOM.\n         *\n         * @example\n         *\n         * ```ts\n         * import puppeteer from 'puppeteer';\n         *\n         * (async () => {\n         *   const browser = await puppeteer.launch();\n         *   const page = await browser.newPage();\n         *   let currentURL;\n         *   page\n         *     .mainFrame()\n         *     .waitForSelector('img')\n         *     .then(() => console.log('First URL with image: ' + currentURL));\n         *\n         *   for (currentURL of [\n         *     'https://example.com',\n         *     'https://google.com',\n         *     'https://bbc.com',\n         *   ]) {\n         *     await page.goto(currentURL);\n         *   }\n         *   await browser.close();\n         * })();\n         * ```\n         *\n         * @param selector - The selector to query and wait for.\n         * @param options - Options for customizing waiting behavior.\n         * @returns An element matching the given selector.\n         * @throws Throws if an element matching the given selector doesn't appear.\n         */\n        async waitForSelector(selector, options = {}) {\n            const { updatedSelector, QueryHandler, polling } = getQueryHandlerAndSelector(selector);\n            return (await QueryHandler.waitFor(this, updatedSelector, {\n                polling,\n                ...options,\n            }));\n        }\n        async #checkVisibility(visibility) {\n            return await this.evaluate(async (element, PuppeteerUtil, visibility) => {\n                return Boolean(PuppeteerUtil.checkVisibility(element, visibility));\n            }, LazyArg.create(context => {\n                return context.puppeteerUtil;\n            }), visibility);\n        }\n        /**\n         * An element is considered to be visible if all of the following is\n         * true:\n         *\n         * - the element has\n         *   {@link https://developer.mozilla.org/en-US/docs/Web/API/Window/getComputedStyle | computed styles}.\n         *\n         * - the element has a non-empty\n         *   {@link https://developer.mozilla.org/en-US/docs/Web/API/Element/getBoundingClientRect | bounding client rect}.\n         *\n         * - the element's {@link https://developer.mozilla.org/en-US/docs/Web/CSS/visibility | visibility}\n         *   is not `hidden` or `collapse`.\n         */\n        async isVisible() {\n            return await this.#checkVisibility(true);\n        }\n        /**\n         * An element is considered to be hidden if at least one of the following is true:\n         *\n         * - the element has no\n         *   {@link https://developer.mozilla.org/en-US/docs/Web/API/Window/getComputedStyle | computed styles}.\n         *\n         * - the element has an empty\n         *   {@link https://developer.mozilla.org/en-US/docs/Web/API/Element/getBoundingClientRect | bounding client rect}.\n         *\n         * - the element's {@link https://developer.mozilla.org/en-US/docs/Web/CSS/visibility | visibility}\n         *   is `hidden` or `collapse`.\n         */\n        async isHidden() {\n            return await this.#checkVisibility(false);\n        }\n        /**\n         * Converts the current handle to the given element type.\n         *\n         * @example\n         *\n         * ```ts\n         * const element: ElementHandle<Element> = await page.$(\n         *   '.class-name-of-anchor'\n         * );\n         * // DO NOT DISPOSE `element`, this will be always be the same handle.\n         * const anchor: ElementHandle<HTMLAnchorElement> =\n         *   await element.toElement('a');\n         * ```\n         *\n         * @param tagName - The tag name of the desired element type.\n         * @throws An error if the handle does not match. **The handle will not be\n         * automatically disposed.**\n         */\n        async toElement(tagName) {\n            const isMatchingTagName = await this.evaluate((node, tagName) => {\n                return node.nodeName === tagName.toUpperCase();\n            }, tagName);\n            if (!isMatchingTagName) {\n                throw new Error(`Element is not a(n) \\`${tagName}\\` element`);\n            }\n            return this;\n        }\n        /**\n         * Returns the middle point within an element unless a specific offset is provided.\n         */\n        async clickablePoint(offset) {\n            const box = await this.#clickableBox();\n            if (!box) {\n                throw new Error('Node is either not clickable or not an Element');\n            }\n            if (offset !== undefined) {\n                return {\n                    x: box.x + offset.x,\n                    y: box.y + offset.y,\n                };\n            }\n            return {\n                x: box.x + box.width / 2,\n                y: box.y + box.height / 2,\n            };\n        }\n        /**\n         * This method scrolls element into view if needed, and then\n         * uses {@link Page.mouse} to hover over the center of the element.\n         * If the element is detached from DOM, the method throws an error.\n         */\n        async hover() {\n            await this.scrollIntoViewIfNeeded();\n            const { x, y } = await this.clickablePoint();\n            await this.frame.page().mouse.move(x, y);\n        }\n        /**\n         * This method scrolls element into view if needed, and then\n         * uses {@link Page.mouse} to click in the center of the element.\n         * If the element is detached from DOM, the method throws an error.\n         */\n        async click(options = {}) {\n            await this.scrollIntoViewIfNeeded();\n            const { x, y } = await this.clickablePoint(options.offset);\n            await this.frame.page().mouse.click(x, y, options);\n        }\n        /**\n         * Drags an element over the given element or point.\n         *\n         * @returns DEPRECATED. When drag interception is enabled, the drag payload is\n         * returned.\n         */\n        async drag(target) {\n            await this.scrollIntoViewIfNeeded();\n            const page = this.frame.page();\n            if (page.isDragInterceptionEnabled()) {\n                const source = await this.clickablePoint();\n                if (target instanceof ElementHandle) {\n                    target = await target.clickablePoint();\n                }\n                return await page.mouse.drag(source, target);\n            }\n            try {\n                if (!page._isDragging) {\n                    page._isDragging = true;\n                    await this.hover();\n                    await page.mouse.down();\n                }\n                if (target instanceof ElementHandle) {\n                    await target.hover();\n                }\n                else {\n                    await page.mouse.move(target.x, target.y);\n                }\n            }\n            catch (error) {\n                page._isDragging = false;\n                throw error;\n            }\n        }\n        /**\n         * @deprecated Do not use. `dragenter` will automatically be performed during dragging.\n         */\n        async dragEnter(data = { items: [], dragOperationsMask: 1 }) {\n            const page = this.frame.page();\n            await this.scrollIntoViewIfNeeded();\n            const target = await this.clickablePoint();\n            await page.mouse.dragEnter(target, data);\n        }\n        /**\n         * @deprecated Do not use. `dragover` will automatically be performed during dragging.\n         */\n        async dragOver(data = { items: [], dragOperationsMask: 1 }) {\n            const page = this.frame.page();\n            await this.scrollIntoViewIfNeeded();\n            const target = await this.clickablePoint();\n            await page.mouse.dragOver(target, data);\n        }\n        /**\n         * @internal\n         */\n        async drop(dataOrElement = {\n            items: [],\n            dragOperationsMask: 1,\n        }) {\n            const page = this.frame.page();\n            if ('items' in dataOrElement) {\n                await this.scrollIntoViewIfNeeded();\n                const destination = await this.clickablePoint();\n                await page.mouse.drop(destination, dataOrElement);\n            }\n            else {\n                // Note if the rest errors, we still want dragging off because the errors\n                // is most likely something implying the mouse is no longer dragging.\n                await dataOrElement.drag(this);\n                page._isDragging = false;\n                await page.mouse.up();\n            }\n        }\n        /**\n         * @deprecated Use `ElementHandle.drop` instead.\n         */\n        async dragAndDrop(target, options) {\n            const page = this.frame.page();\n            assert(page.isDragInterceptionEnabled(), 'Drag Interception is not enabled!');\n            await this.scrollIntoViewIfNeeded();\n            const startPoint = await this.clickablePoint();\n            const targetPoint = await target.clickablePoint();\n            await page.mouse.dragAndDrop(startPoint, targetPoint, options);\n        }\n        /**\n         * Triggers a `change` and `input` event once all the provided options have been\n         * selected. If there's no `<select>` element matching `selector`, the method\n         * throws an error.\n         *\n         * @example\n         *\n         * ```ts\n         * handle.select('blue'); // single selection\n         * handle.select('red', 'green', 'blue'); // multiple selections\n         * ```\n         *\n         * @param values - Values of options to select. If the `<select>` has the\n         * `multiple` attribute, all values are considered, otherwise only the first\n         * one is taken into account.\n         */\n        async select(...values) {\n            for (const value of values) {\n                assert(isString(value), 'Values must be strings. Found value \"' +\n                    value +\n                    '\" of type \"' +\n                    typeof value +\n                    '\"');\n            }\n            return await this.evaluate((element, vals) => {\n                const values = new Set(vals);\n                if (!(element instanceof HTMLSelectElement)) {\n                    throw new Error('Element is not a <select> element.');\n                }\n                const selectedValues = new Set();\n                if (!element.multiple) {\n                    for (const option of element.options) {\n                        option.selected = false;\n                    }\n                    for (const option of element.options) {\n                        if (values.has(option.value)) {\n                            option.selected = true;\n                            selectedValues.add(option.value);\n                            break;\n                        }\n                    }\n                }\n                else {\n                    for (const option of element.options) {\n                        option.selected = values.has(option.value);\n                        if (option.selected) {\n                            selectedValues.add(option.value);\n                        }\n                    }\n                }\n                element.dispatchEvent(new Event('input', { bubbles: true }));\n                element.dispatchEvent(new Event('change', { bubbles: true }));\n                return [...selectedValues.values()];\n            }, values);\n        }\n        /**\n         * This method scrolls element into view if needed, and then uses\n         * {@link Touchscreen.tap} to tap in the center of the element.\n         * If the element is detached from DOM, the method throws an error.\n         */\n        async tap() {\n            await this.scrollIntoViewIfNeeded();\n            const { x, y } = await this.clickablePoint();\n            await this.frame.page().touchscreen.tap(x, y);\n        }\n        async touchStart() {\n            await this.scrollIntoViewIfNeeded();\n            const { x, y } = await this.clickablePoint();\n            await this.frame.page().touchscreen.touchStart(x, y);\n        }\n        async touchMove() {\n            await this.scrollIntoViewIfNeeded();\n            const { x, y } = await this.clickablePoint();\n            await this.frame.page().touchscreen.touchMove(x, y);\n        }\n        async touchEnd() {\n            await this.scrollIntoViewIfNeeded();\n            await this.frame.page().touchscreen.touchEnd();\n        }\n        /**\n         * Calls {@link https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/focus | focus} on the element.\n         */\n        async focus() {\n            await this.evaluate(element => {\n                if (!(element instanceof HTMLElement)) {\n                    throw new Error('Cannot focus non-HTMLElement');\n                }\n                return element.focus();\n            });\n        }\n        /**\n         * Focuses the element, and then sends a `keydown`, `keypress`/`input`, and\n         * `keyup` event for each character in the text.\n         *\n         * To press a special key, like `Control` or `ArrowDown`,\n         * use {@link ElementHandle.press}.\n         *\n         * @example\n         *\n         * ```ts\n         * await elementHandle.type('Hello'); // Types instantly\n         * await elementHandle.type('World', {delay: 100}); // Types slower, like a user\n         * ```\n         *\n         * @example\n         * An example of typing into a text field and then submitting the form:\n         *\n         * ```ts\n         * const elementHandle = await page.$('input');\n         * await elementHandle.type('some text');\n         * await elementHandle.press('Enter');\n         * ```\n         *\n         * @param options - Delay in milliseconds. Defaults to 0.\n         */\n        async type(text, options) {\n            await this.focus();\n            await this.frame.page().keyboard.type(text, options);\n        }\n        /**\n         * Focuses the element, and then uses {@link Keyboard.down} and {@link Keyboard.up}.\n         *\n         * @remarks\n         * If `key` is a single character and no modifier keys besides `Shift`\n         * are being held down, a `keypress`/`input` event will also be generated.\n         * The `text` option can be specified to force an input event to be generated.\n         *\n         * **NOTE** Modifier keys DO affect `elementHandle.press`. Holding down `Shift`\n         * will type the text in upper case.\n         *\n         * @param key - Name of key to press, such as `ArrowLeft`.\n         * See {@link KeyInput} for a list of all key names.\n         */\n        async press(key, options) {\n            await this.focus();\n            await this.frame.page().keyboard.press(key, options);\n        }\n        async #clickableBox() {\n            const boxes = await this.evaluate(element => {\n                if (!(element instanceof Element)) {\n                    return null;\n                }\n                return [...element.getClientRects()].map(rect => {\n                    return { x: rect.x, y: rect.y, width: rect.width, height: rect.height };\n                });\n            });\n            if (!boxes?.length) {\n                return null;\n            }\n            await this.#intersectBoundingBoxesWithFrame(boxes);\n            let frame = this.frame;\n            let parentFrame;\n            while ((parentFrame = frame?.parentFrame())) {\n                const env_3 = { stack: [], error: void 0, hasError: false };\n                try {\n                    const handle = __addDisposableResource(env_3, await frame.frameElement(), false);\n                    if (!handle) {\n                        throw new Error('Unsupported frame type');\n                    }\n                    const parentBox = await handle.evaluate(element => {\n                        // Element is not visible.\n                        if (element.getClientRects().length === 0) {\n                            return null;\n                        }\n                        const rect = element.getBoundingClientRect();\n                        const style = window.getComputedStyle(element);\n                        return {\n                            left: rect.left +\n                                parseInt(style.paddingLeft, 10) +\n                                parseInt(style.borderLeftWidth, 10),\n                            top: rect.top +\n                                parseInt(style.paddingTop, 10) +\n                                parseInt(style.borderTopWidth, 10),\n                        };\n                    });\n                    if (!parentBox) {\n                        return null;\n                    }\n                    for (const box of boxes) {\n                        box.x += parentBox.left;\n                        box.y += parentBox.top;\n                    }\n                    await handle.#intersectBoundingBoxesWithFrame(boxes);\n                    frame = parentFrame;\n                }\n                catch (e_3) {\n                    env_3.error = e_3;\n                    env_3.hasError = true;\n                }\n                finally {\n                    __disposeResources(env_3);\n                }\n            }\n            const box = boxes.find(box => {\n                return box.width >= 1 && box.height >= 1;\n            });\n            if (!box) {\n                return null;\n            }\n            return {\n                x: box.x,\n                y: box.y,\n                height: box.height,\n                width: box.width,\n            };\n        }\n        async #intersectBoundingBoxesWithFrame(boxes) {\n            const { documentWidth, documentHeight } = await this.frame\n                .isolatedRealm()\n                .evaluate(() => {\n                return {\n                    documentWidth: document.documentElement.clientWidth,\n                    documentHeight: document.documentElement.clientHeight,\n                };\n            });\n            for (const box of boxes) {\n                intersectBoundingBox(box, documentWidth, documentHeight);\n            }\n        }\n        /**\n         * This method returns the bounding box of the element (relative to the main frame),\n         * or `null` if the element is {@link https://drafts.csswg.org/css-display-4/#box-generation | not part of the layout}\n         * (example: `display: none`).\n         */\n        async boundingBox() {\n            const box = await this.evaluate(element => {\n                if (!(element instanceof Element)) {\n                    return null;\n                }\n                // Element is not visible.\n                if (element.getClientRects().length === 0) {\n                    return null;\n                }\n                const rect = element.getBoundingClientRect();\n                return { x: rect.x, y: rect.y, width: rect.width, height: rect.height };\n            });\n            if (!box) {\n                return null;\n            }\n            const offset = await this.#getTopLeftCornerOfFrame();\n            if (!offset) {\n                return null;\n            }\n            return {\n                x: box.x + offset.x,\n                y: box.y + offset.y,\n                height: box.height,\n                width: box.width,\n            };\n        }\n        /**\n         * This method returns boxes of the element,\n         * or `null` if the element is {@link https://drafts.csswg.org/css-display-4/#box-generation | not part of the layout}\n         * (example: `display: none`).\n         *\n         * @remarks\n         *\n         * Boxes are represented as an array of points;\n         * Each Point is an object `{x, y}`. Box points are sorted clock-wise.\n         */\n        async boxModel() {\n            const model = await this.evaluate(element => {\n                if (!(element instanceof Element)) {\n                    return null;\n                }\n                // Element is not visible.\n                if (element.getClientRects().length === 0) {\n                    return null;\n                }\n                const rect = element.getBoundingClientRect();\n                const style = window.getComputedStyle(element);\n                const offsets = {\n                    padding: {\n                        left: parseInt(style.paddingLeft, 10),\n                        top: parseInt(style.paddingTop, 10),\n                        right: parseInt(style.paddingRight, 10),\n                        bottom: parseInt(style.paddingBottom, 10),\n                    },\n                    margin: {\n                        left: -parseInt(style.marginLeft, 10),\n                        top: -parseInt(style.marginTop, 10),\n                        right: -parseInt(style.marginRight, 10),\n                        bottom: -parseInt(style.marginBottom, 10),\n                    },\n                    border: {\n                        left: parseInt(style.borderLeft, 10),\n                        top: parseInt(style.borderTop, 10),\n                        right: parseInt(style.borderRight, 10),\n                        bottom: parseInt(style.borderBottom, 10),\n                    },\n                };\n                const border = [\n                    { x: rect.left, y: rect.top },\n                    { x: rect.left + rect.width, y: rect.top },\n                    { x: rect.left + rect.width, y: rect.top + rect.height },\n                    { x: rect.left, y: rect.top + rect.height },\n                ];\n                const padding = transformQuadWithOffsets(border, offsets.border);\n                const content = transformQuadWithOffsets(padding, offsets.padding);\n                const margin = transformQuadWithOffsets(border, offsets.margin);\n                return {\n                    content,\n                    padding,\n                    border,\n                    margin,\n                    width: rect.width,\n                    height: rect.height,\n                };\n                function transformQuadWithOffsets(quad, offsets) {\n                    return [\n                        {\n                            x: quad[0].x + offsets.left,\n                            y: quad[0].y + offsets.top,\n                        },\n                        {\n                            x: quad[1].x - offsets.right,\n                            y: quad[1].y + offsets.top,\n                        },\n                        {\n                            x: quad[2].x - offsets.right,\n                            y: quad[2].y - offsets.bottom,\n                        },\n                        {\n                            x: quad[3].x + offsets.left,\n                            y: quad[3].y - offsets.bottom,\n                        },\n                    ];\n                }\n            });\n            if (!model) {\n                return null;\n            }\n            const offset = await this.#getTopLeftCornerOfFrame();\n            if (!offset) {\n                return null;\n            }\n            for (const attribute of [\n                'content',\n                'padding',\n                'border',\n                'margin',\n            ]) {\n                for (const point of model[attribute]) {\n                    point.x += offset.x;\n                    point.y += offset.y;\n                }\n            }\n            return model;\n        }\n        async #getTopLeftCornerOfFrame() {\n            const point = { x: 0, y: 0 };\n            let frame = this.frame;\n            let parentFrame;\n            while ((parentFrame = frame?.parentFrame())) {\n                const env_4 = { stack: [], error: void 0, hasError: false };\n                try {\n                    const handle = __addDisposableResource(env_4, await frame.frameElement(), false);\n                    if (!handle) {\n                        throw new Error('Unsupported frame type');\n                    }\n                    const parentBox = await handle.evaluate(element => {\n                        // Element is not visible.\n                        if (element.getClientRects().length === 0) {\n                            return null;\n                        }\n                        const rect = element.getBoundingClientRect();\n                        const style = window.getComputedStyle(element);\n                        return {\n                            left: rect.left +\n                                parseInt(style.paddingLeft, 10) +\n                                parseInt(style.borderLeftWidth, 10),\n                            top: rect.top +\n                                parseInt(style.paddingTop, 10) +\n                                parseInt(style.borderTopWidth, 10),\n                        };\n                    });\n                    if (!parentBox) {\n                        return null;\n                    }\n                    point.x += parentBox.left;\n                    point.y += parentBox.top;\n                    frame = parentFrame;\n                }\n                catch (e_4) {\n                    env_4.error = e_4;\n                    env_4.hasError = true;\n                }\n                finally {\n                    __disposeResources(env_4);\n                }\n            }\n            return point;\n        }\n        async screenshot(options = {}) {\n            const { scrollIntoView = true, clip } = options;\n            const page = this.frame.page();\n            // Only scroll the element into view if the user wants it.\n            if (scrollIntoView) {\n                await this.scrollIntoViewIfNeeded();\n            }\n            const elementClip = await this.#nonEmptyVisibleBoundingBox();\n            const [pageLeft, pageTop] = await this.evaluate(() => {\n                if (!window.visualViewport) {\n                    throw new Error('window.visualViewport is not supported.');\n                }\n                return [\n                    window.visualViewport.pageLeft,\n                    window.visualViewport.pageTop,\n                ];\n            });\n            elementClip.x += pageLeft;\n            elementClip.y += pageTop;\n            if (clip) {\n                elementClip.x += clip.x;\n                elementClip.y += clip.y;\n                elementClip.height = clip.height;\n                elementClip.width = clip.width;\n            }\n            return await page.screenshot({ ...options, clip: elementClip });\n        }\n        async #nonEmptyVisibleBoundingBox() {\n            const box = await this.boundingBox();\n            assert(box, 'Node is either not visible or not an HTMLElement');\n            assert(box.width !== 0, 'Node has 0 width.');\n            assert(box.height !== 0, 'Node has 0 height.');\n            return box;\n        }\n        /**\n         * @internal\n         */\n        async assertConnectedElement() {\n            const error = await this.evaluate(async (element) => {\n                if (!element.isConnected) {\n                    return 'Node is detached from document';\n                }\n                if (element.nodeType !== Node.ELEMENT_NODE) {\n                    return 'Node is not of type HTMLElement';\n                }\n                return;\n            });\n            if (error) {\n                throw new Error(error);\n            }\n        }\n        /**\n         * @internal\n         */\n        async scrollIntoViewIfNeeded() {\n            if (await this.isIntersectingViewport({\n                threshold: 1,\n            })) {\n                return;\n            }\n            await this.scrollIntoView();\n        }\n        /**\n         * Resolves to true if the element is visible in the current viewport. If an\n         * element is an SVG, we check if the svg owner element is in the viewport\n         * instead. See https://crbug.com/963246.\n         *\n         * @param options - Threshold for the intersection between 0 (no intersection) and 1\n         * (full intersection). Defaults to 1.\n         */\n        async isIntersectingViewport(options = {}) {\n            const env_5 = { stack: [], error: void 0, hasError: false };\n            try {\n                await this.assertConnectedElement();\n                // eslint-disable-next-line rulesdir/use-using -- Returns `this`.\n                const handle = await this.#asSVGElementHandle();\n                const target = __addDisposableResource(env_5, handle && (await handle.#getOwnerSVGElement()), false);\n                return await (target ?? this).evaluate(async (element, threshold) => {\n                    const visibleRatio = await new Promise(resolve => {\n                        const observer = new IntersectionObserver(entries => {\n                            resolve(entries[0].intersectionRatio);\n                            observer.disconnect();\n                        });\n                        observer.observe(element);\n                    });\n                    return threshold === 1 ? visibleRatio === 1 : visibleRatio > threshold;\n                }, options.threshold ?? 0);\n            }\n            catch (e_5) {\n                env_5.error = e_5;\n                env_5.hasError = true;\n            }\n            finally {\n                __disposeResources(env_5);\n            }\n        }\n        /**\n         * Scrolls the element into view using either the automation protocol client\n         * or by calling element.scrollIntoView.\n         */\n        async scrollIntoView() {\n            await this.assertConnectedElement();\n            await this.evaluate(async (element) => {\n                element.scrollIntoView({\n                    block: 'center',\n                    inline: 'center',\n                    behavior: 'instant',\n                });\n            });\n        }\n        /**\n         * Returns true if an element is an SVGElement (included svg, path, rect\n         * etc.).\n         */\n        async #asSVGElementHandle() {\n            if (await this.evaluate(element => {\n                return element instanceof SVGElement;\n            })) {\n                return this;\n            }\n            else {\n                return null;\n            }\n        }\n        async #getOwnerSVGElement() {\n            // SVGSVGElement.ownerSVGElement === null.\n            return await this.evaluateHandle(element => {\n                if (element instanceof SVGSVGElement) {\n                    return element;\n                }\n                return element.ownerSVGElement;\n            });\n        }\n    };\n})();\nexport { ElementHandle };\nfunction intersectBoundingBox(box, width, height) {\n    box.width = Math.max(box.x >= 0\n        ? Math.min(width - box.x, box.width)\n        : Math.min(width, box.width + box.x), 0);\n    box.height = Math.max(box.y >= 0\n        ? Math.min(height - box.y, box.height)\n        : Math.min(height, box.height + box.y), 0);\n}\n//# sourceMappingURL=ElementHandle.js.map","/**\n * @license\n * Copyright 2017 Google Inc.\n * SPDX-License-Identifier: Apache-2.0\n */\nimport { PuppeteerURL, evaluationString } from '../common/util.js';\nimport { assert } from '../util/assert.js';\n/**\n * @internal\n */\nexport function createEvaluationError(details) {\n    let name;\n    let message;\n    if (!details.exception) {\n        name = 'Error';\n        message = details.text;\n    }\n    else if ((details.exception.type !== 'object' ||\n        details.exception.subtype !== 'error') &&\n        !details.exception.objectId) {\n        return valueFromRemoteObject(details.exception);\n    }\n    else {\n        const detail = getErrorDetails(details);\n        name = detail.name;\n        message = detail.message;\n    }\n    const messageHeight = message.split('\\n').length;\n    const error = new Error(message);\n    error.name = name;\n    const stackLines = error.stack.split('\\n');\n    const messageLines = stackLines.splice(0, messageHeight);\n    // The first line is this function which we ignore.\n    stackLines.shift();\n    if (details.stackTrace && stackLines.length < Error.stackTraceLimit) {\n        for (const frame of details.stackTrace.callFrames.reverse()) {\n            if (PuppeteerURL.isPuppeteerURL(frame.url) &&\n                frame.url !== PuppeteerURL.INTERNAL_URL) {\n                const url = PuppeteerURL.parse(frame.url);\n                stackLines.unshift(`    at ${frame.functionName || url.functionName} (${url.functionName} at ${url.siteString}, <anonymous>:${frame.lineNumber}:${frame.columnNumber})`);\n            }\n            else {\n                stackLines.push(`    at ${frame.functionName || '<anonymous>'} (${frame.url}:${frame.lineNumber}:${frame.columnNumber})`);\n            }\n            if (stackLines.length >= Error.stackTraceLimit) {\n                break;\n            }\n        }\n    }\n    error.stack = [...messageLines, ...stackLines].join('\\n');\n    return error;\n}\nconst getErrorDetails = (details) => {\n    let name = '';\n    let message;\n    const lines = details.exception?.description?.split('\\n    at ') ?? [];\n    const size = Math.min(details.stackTrace?.callFrames.length ?? 0, lines.length - 1);\n    lines.splice(-size, size);\n    if (details.exception?.className) {\n        name = details.exception.className;\n    }\n    message = lines.join('\\n');\n    if (name && message.startsWith(`${name}: `)) {\n        message = message.slice(name.length + 2);\n    }\n    return { message, name };\n};\n/**\n * @internal\n */\nexport function createClientError(details) {\n    let name;\n    let message;\n    if (!details.exception) {\n        name = 'Error';\n        message = details.text;\n    }\n    else if ((details.exception.type !== 'object' ||\n        details.exception.subtype !== 'error') &&\n        !details.exception.objectId) {\n        return valueFromRemoteObject(details.exception);\n    }\n    else {\n        const detail = getErrorDetails(details);\n        name = detail.name;\n        message = detail.message;\n    }\n    const error = new Error(message);\n    error.name = name;\n    const messageHeight = error.message.split('\\n').length;\n    const messageLines = error.stack.split('\\n').splice(0, messageHeight);\n    const stackLines = [];\n    if (details.stackTrace) {\n        for (const frame of details.stackTrace.callFrames) {\n            // Note we need to add `1` because the values are 0-indexed.\n            stackLines.push(`    at ${frame.functionName || '<anonymous>'} (${frame.url}:${frame.lineNumber + 1}:${frame.columnNumber + 1})`);\n            if (stackLines.length >= Error.stackTraceLimit) {\n                break;\n            }\n        }\n    }\n    error.stack = [...messageLines, ...stackLines].join('\\n');\n    return error;\n}\n/**\n * @internal\n */\nexport function valueFromRemoteObject(remoteObject) {\n    assert(!remoteObject.objectId, 'Cannot extract value when objectId is given');\n    if (remoteObject.unserializableValue) {\n        if (remoteObject.type === 'bigint') {\n            return BigInt(remoteObject.unserializableValue.replace('n', ''));\n        }\n        switch (remoteObject.unserializableValue) {\n            case '-0':\n                return -0;\n            case 'NaN':\n                return NaN;\n            case 'Infinity':\n                return Infinity;\n            case '-Infinity':\n                return -Infinity;\n            default:\n                throw new Error('Unsupported unserializable value: ' +\n                    remoteObject.unserializableValue);\n        }\n    }\n    return remoteObject.value;\n}\n/**\n * @internal\n */\nexport function addPageBinding(type, name, prefix) {\n    // Depending on the frame loading state either Runtime.evaluate or\n    // Page.addScriptToEvaluateOnNewDocument might succeed. Let's check that we\n    // don't re-wrap Puppeteer's binding.\n    // @ts-expect-error: In a different context.\n    if (globalThis[name]) {\n        return;\n    }\n    // We replace the CDP binding with a Puppeteer binding.\n    Object.assign(globalThis, {\n        [name](...args) {\n            // This is the Puppeteer binding.\n            // @ts-expect-error: In a different context.\n            const callPuppeteer = globalThis[name];\n            callPuppeteer.args ??= new Map();\n            callPuppeteer.callbacks ??= new Map();\n            const seq = (callPuppeteer.lastSeq ?? 0) + 1;\n            callPuppeteer.lastSeq = seq;\n            callPuppeteer.args.set(seq, args);\n            // @ts-expect-error: In a different context.\n            // Needs to be the same as CDP_BINDING_PREFIX.\n            globalThis[prefix + name](JSON.stringify({\n                type,\n                name,\n                seq,\n                args,\n                isTrivial: !args.some(value => {\n                    return value instanceof Node;\n                }),\n            }));\n            return new Promise((resolve, reject) => {\n                callPuppeteer.callbacks.set(seq, {\n                    resolve(value) {\n                        callPuppeteer.args.delete(seq);\n                        resolve(value);\n                    },\n                    reject(value) {\n                        callPuppeteer.args.delete(seq);\n                        reject(value);\n                    },\n                });\n            });\n        },\n    });\n}\n/**\n * @internal\n */\nexport const CDP_BINDING_PREFIX = 'puppeteer_';\n/**\n * @internal\n */\nexport function pageBindingInitString(type, name) {\n    return evaluationString(addPageBinding, type, name, CDP_BINDING_PREFIX);\n}\n//# sourceMappingURL=utils.js.map","/**\n * @license\n * Copyright 2019 Google Inc.\n * SPDX-License-Identifier: Apache-2.0\n */\nimport { JSHandle } from '../api/JSHandle.js';\nimport { debugError } from '../common/util.js';\nimport { valueFromRemoteObject } from './utils.js';\n/**\n * @internal\n */\nexport class CdpJSHandle extends JSHandle {\n    #disposed = false;\n    #remoteObject;\n    #world;\n    constructor(world, remoteObject) {\n        super();\n        this.#world = world;\n        this.#remoteObject = remoteObject;\n    }\n    get disposed() {\n        return this.#disposed;\n    }\n    get realm() {\n        return this.#world;\n    }\n    get client() {\n        return this.realm.environment.client;\n    }\n    async jsonValue() {\n        if (!this.#remoteObject.objectId) {\n            return valueFromRemoteObject(this.#remoteObject);\n        }\n        const value = await this.evaluate(object => {\n            return object;\n        });\n        if (value === undefined) {\n            throw new Error('Could not serialize referenced object');\n        }\n        return value;\n    }\n    /**\n     * Either `null` or the handle itself if the handle is an\n     * instance of {@link ElementHandle}.\n     */\n    asElement() {\n        return null;\n    }\n    async dispose() {\n        if (this.#disposed) {\n            return;\n        }\n        this.#disposed = true;\n        await releaseObject(this.client, this.#remoteObject);\n    }\n    toString() {\n        if (!this.#remoteObject.objectId) {\n            return 'JSHandle:' + valueFromRemoteObject(this.#remoteObject);\n        }\n        const type = this.#remoteObject.subtype || this.#remoteObject.type;\n        return 'JSHandle@' + type;\n    }\n    get id() {\n        return this.#remoteObject.objectId;\n    }\n    remoteObject() {\n        return this.#remoteObject;\n    }\n    async getProperties() {\n        // We use Runtime.getProperties rather than iterative version for\n        // improved performance as it allows getting everything at once.\n        const response = await this.client.send('Runtime.getProperties', {\n            objectId: this.#remoteObject.objectId,\n            ownProperties: true,\n        });\n        const result = new Map();\n        for (const property of response.result) {\n            if (!property.enumerable || !property.value) {\n                continue;\n            }\n            result.set(property.name, this.#world.createCdpHandle(property.value));\n        }\n        return result;\n    }\n}\n/**\n * @internal\n */\nexport async function releaseObject(client, remoteObject) {\n    if (!remoteObject.objectId) {\n        return;\n    }\n    await client\n        .send('Runtime.releaseObject', { objectId: remoteObject.objectId })\n        .catch(error => {\n        // Exceptions might happen in case of a page been navigated or closed.\n        // Swallow these since they are harmless and we don't leak anything in this case.\n        debugError(error);\n    });\n}\n//# sourceMappingURL=JSHandle.js.map","/**\n * @license\n * Copyright 2019 Google Inc.\n * SPDX-License-Identifier: Apache-2.0\n */\nvar __runInitializers = (this && this.__runInitializers) || function (thisArg, initializers, value) {\n    var useValue = arguments.length > 2;\n    for (var i = 0; i < initializers.length; i++) {\n        value = useValue ? initializers[i].call(thisArg, value) : initializers[i].call(thisArg);\n    }\n    return useValue ? value : void 0;\n};\nvar __esDecorate = (this && this.__esDecorate) || function (ctor, descriptorIn, decorators, contextIn, initializers, extraInitializers) {\n    function accept(f) { if (f !== void 0 && typeof f !== \"function\") throw new TypeError(\"Function expected\"); return f; }\n    var kind = contextIn.kind, key = kind === \"getter\" ? \"get\" : kind === \"setter\" ? \"set\" : \"value\";\n    var target = !descriptorIn && ctor ? contextIn[\"static\"] ? ctor : ctor.prototype : null;\n    var descriptor = descriptorIn || (target ? Object.getOwnPropertyDescriptor(target, contextIn.name) : {});\n    var _, done = false;\n    for (var i = decorators.length - 1; i >= 0; i--) {\n        var context = {};\n        for (var p in contextIn) context[p] = p === \"access\" ? {} : contextIn[p];\n        for (var p in contextIn.access) context.access[p] = contextIn.access[p];\n        context.addInitializer = function (f) { if (done) throw new TypeError(\"Cannot add initializers after decoration has completed\"); extraInitializers.push(accept(f || null)); };\n        var result = (0, decorators[i])(kind === \"accessor\" ? { get: descriptor.get, set: descriptor.set } : descriptor[key], context);\n        if (kind === \"accessor\") {\n            if (result === void 0) continue;\n            if (result === null || typeof result !== \"object\") throw new TypeError(\"Object expected\");\n            if (_ = accept(result.get)) descriptor.get = _;\n            if (_ = accept(result.set)) descriptor.set = _;\n            if (_ = accept(result.init)) initializers.unshift(_);\n        }\n        else if (_ = accept(result)) {\n            if (kind === \"field\") initializers.unshift(_);\n            else descriptor[key] = _;\n        }\n    }\n    if (target) Object.defineProperty(target, contextIn.name, descriptor);\n    done = true;\n};\nimport { bindIsolatedHandle, ElementHandle, } from '../api/ElementHandle.js';\nimport { debugError } from '../common/util.js';\nimport { environment } from '../environment.js';\nimport { assert } from '../util/assert.js';\nimport { AsyncIterableUtil } from '../util/AsyncIterableUtil.js';\nimport { throwIfDisposed } from '../util/decorators.js';\nimport { CdpJSHandle } from './JSHandle.js';\nconst NON_ELEMENT_NODE_ROLES = new Set(['StaticText', 'InlineTextBox']);\n/**\n * The CdpElementHandle extends ElementHandle now to keep compatibility\n * with `instanceof` because of that we need to have methods for\n * CdpJSHandle to in this implementation as well.\n *\n * @internal\n */\nlet CdpElementHandle = (() => {\n    let _classSuper = ElementHandle;\n    let _instanceExtraInitializers = [];\n    let _contentFrame_decorators;\n    let _scrollIntoView_decorators;\n    let _uploadFile_decorators;\n    let _autofill_decorators;\n    return class CdpElementHandle extends _classSuper {\n        static {\n            const _metadata = typeof Symbol === \"function\" && Symbol.metadata ? Object.create(_classSuper[Symbol.metadata] ?? null) : void 0;\n            _contentFrame_decorators = [throwIfDisposed()];\n            _scrollIntoView_decorators = [throwIfDisposed(), bindIsolatedHandle];\n            _uploadFile_decorators = [throwIfDisposed(), bindIsolatedHandle];\n            _autofill_decorators = [throwIfDisposed()];\n            __esDecorate(this, null, _contentFrame_decorators, { kind: \"method\", name: \"contentFrame\", static: false, private: false, access: { has: obj => \"contentFrame\" in obj, get: obj => obj.contentFrame }, metadata: _metadata }, null, _instanceExtraInitializers);\n            __esDecorate(this, null, _scrollIntoView_decorators, { kind: \"method\", name: \"scrollIntoView\", static: false, private: false, access: { has: obj => \"scrollIntoView\" in obj, get: obj => obj.scrollIntoView }, metadata: _metadata }, null, _instanceExtraInitializers);\n            __esDecorate(this, null, _uploadFile_decorators, { kind: \"method\", name: \"uploadFile\", static: false, private: false, access: { has: obj => \"uploadFile\" in obj, get: obj => obj.uploadFile }, metadata: _metadata }, null, _instanceExtraInitializers);\n            __esDecorate(this, null, _autofill_decorators, { kind: \"method\", name: \"autofill\", static: false, private: false, access: { has: obj => \"autofill\" in obj, get: obj => obj.autofill }, metadata: _metadata }, null, _instanceExtraInitializers);\n            if (_metadata) Object.defineProperty(this, Symbol.metadata, { enumerable: true, configurable: true, writable: true, value: _metadata });\n        }\n        constructor(world, remoteObject) {\n            super(new CdpJSHandle(world, remoteObject));\n            __runInitializers(this, _instanceExtraInitializers);\n        }\n        get realm() {\n            return this.handle.realm;\n        }\n        get client() {\n            return this.handle.client;\n        }\n        remoteObject() {\n            return this.handle.remoteObject();\n        }\n        get #frameManager() {\n            return this.frame._frameManager;\n        }\n        get frame() {\n            return this.realm.environment;\n        }\n        async contentFrame() {\n            const nodeInfo = await this.client.send('DOM.describeNode', {\n                objectId: this.id,\n            });\n            if (typeof nodeInfo.node.frameId !== 'string') {\n                return null;\n            }\n            return this.#frameManager.frame(nodeInfo.node.frameId);\n        }\n        async scrollIntoView() {\n            await this.assertConnectedElement();\n            try {\n                await this.client.send('DOM.scrollIntoViewIfNeeded', {\n                    objectId: this.id,\n                });\n            }\n            catch (error) {\n                debugError(error);\n                // Fallback to Element.scrollIntoView if DOM.scrollIntoViewIfNeeded is not supported\n                await super.scrollIntoView();\n            }\n        }\n        async uploadFile(...filePaths) {\n            const isMultiple = await this.evaluate(element => {\n                return element.multiple;\n            });\n            assert(filePaths.length <= 1 || isMultiple, 'Multiple file uploads only work with <input type=file multiple>');\n            // Locate all files and confirm that they exist.\n            const path = environment.value.path;\n            const files = filePaths.map(filePath => {\n                if (path.win32.isAbsolute(filePath) || path.posix.isAbsolute(filePath)) {\n                    return filePath;\n                }\n                else {\n                    return path.resolve(filePath);\n                }\n            });\n            /**\n             * The zero-length array is a special case, it seems that\n             * DOM.setFileInputFiles does not actually update the files in that case, so\n             * the solution is to eval the element value to a new FileList directly.\n             */\n            if (files.length === 0) {\n                // XXX: These events should converted to trusted events. Perhaps do this\n                // in `DOM.setFileInputFiles`?\n                await this.evaluate(element => {\n                    element.files = new DataTransfer().files;\n                    // Dispatch events for this case because it should behave akin to a user action.\n                    element.dispatchEvent(new Event('input', { bubbles: true, composed: true }));\n                    element.dispatchEvent(new Event('change', { bubbles: true }));\n                });\n                return;\n            }\n            const { node: { backendNodeId }, } = await this.client.send('DOM.describeNode', {\n                objectId: this.id,\n            });\n            await this.client.send('DOM.setFileInputFiles', {\n                objectId: this.id,\n                files,\n                backendNodeId,\n            });\n        }\n        async autofill(data) {\n            const nodeInfo = await this.client.send('DOM.describeNode', {\n                objectId: this.handle.id,\n            });\n            const fieldId = nodeInfo.node.backendNodeId;\n            const frameId = this.frame._id;\n            await this.client.send('Autofill.trigger', {\n                fieldId,\n                frameId,\n                card: data.creditCard,\n            });\n        }\n        async *queryAXTree(name, role) {\n            const { nodes } = await this.client.send('Accessibility.queryAXTree', {\n                objectId: this.id,\n                accessibleName: name,\n                role,\n            });\n            const results = nodes.filter(node => {\n                if (node.ignored) {\n                    return false;\n                }\n                if (!node.role) {\n                    return false;\n                }\n                if (NON_ELEMENT_NODE_ROLES.has(node.role.value)) {\n                    return false;\n                }\n                return true;\n            });\n            return yield* AsyncIterableUtil.map(results, node => {\n                return this.realm.adoptBackendNode(node.backendDOMNodeId);\n            });\n        }\n    };\n})();\nexport { CdpElementHandle };\n//# sourceMappingURL=ElementHandle.js.map","/**\n * @license\n * Copyright 2017 Google Inc.\n * SPDX-License-Identifier: Apache-2.0\n */\nvar __addDisposableResource = (this && this.__addDisposableResource) || function (env, value, async) {\n    if (value !== null && value !== void 0) {\n        if (typeof value !== \"object\" && typeof value !== \"function\") throw new TypeError(\"Object expected.\");\n        var dispose, inner;\n        if (async) {\n            if (!Symbol.asyncDispose) throw new TypeError(\"Symbol.asyncDispose is not defined.\");\n            dispose = value[Symbol.asyncDispose];\n        }\n        if (dispose === void 0) {\n            if (!Symbol.dispose) throw new TypeError(\"Symbol.dispose is not defined.\");\n            dispose = value[Symbol.dispose];\n            if (async) inner = dispose;\n        }\n        if (typeof dispose !== \"function\") throw new TypeError(\"Object not disposable.\");\n        if (inner) dispose = function() { try { inner.call(this); } catch (e) { return Promise.reject(e); } };\n        env.stack.push({ value: value, dispose: dispose, async: async });\n    }\n    else if (async) {\n        env.stack.push({ async: true });\n    }\n    return value;\n};\nvar __disposeResources = (this && this.__disposeResources) || (function (SuppressedError) {\n    return function (env) {\n        function fail(e) {\n            env.error = env.hasError ? new SuppressedError(e, env.error, \"An error was suppressed during disposal.\") : e;\n            env.hasError = true;\n        }\n        function next() {\n            while (env.stack.length) {\n                var rec = env.stack.pop();\n                try {\n                    var result = rec.dispose && rec.dispose.call(rec.value);\n                    if (rec.async) return Promise.resolve(result).then(next, function(e) { fail(e); return next(); });\n                }\n                catch (e) {\n                    fail(e);\n                }\n            }\n            if (env.hasError) throw env.error;\n        }\n        return next();\n    };\n})(typeof SuppressedError === \"function\" ? SuppressedError : function (error, suppressed, message) {\n    var e = new Error(message);\n    return e.name = \"SuppressedError\", e.error = error, e.suppressed = suppressed, e;\n});\nimport { CDPSessionEvent } from '../api/CDPSession.js';\nimport { EventEmitter } from '../common/EventEmitter.js';\nimport { LazyArg } from '../common/LazyArg.js';\nimport { scriptInjector } from '../common/ScriptInjector.js';\nimport { PuppeteerURL, SOURCE_URL_REGEX, debugError, getSourcePuppeteerURLIfAvailable, getSourceUrlComment, isString, } from '../common/util.js';\nimport { AsyncIterableUtil } from '../util/AsyncIterableUtil.js';\nimport { DisposableStack, disposeSymbol } from '../util/disposable.js';\nimport { stringifyFunction } from '../util/Function.js';\nimport { Mutex } from '../util/Mutex.js';\nimport { ARIAQueryHandler } from './AriaQueryHandler.js';\nimport { Binding } from './Binding.js';\nimport { CdpElementHandle } from './ElementHandle.js';\nimport { CdpJSHandle } from './JSHandle.js';\nimport { addPageBinding, CDP_BINDING_PREFIX, createEvaluationError, valueFromRemoteObject, } from './utils.js';\nconst ariaQuerySelectorBinding = new Binding('__ariaQuerySelector', ARIAQueryHandler.queryOne, '' // custom init\n);\nconst ariaQuerySelectorAllBinding = new Binding('__ariaQuerySelectorAll', (async (element, selector) => {\n    const results = ARIAQueryHandler.queryAll(element, selector);\n    return await element.realm.evaluateHandle((...elements) => {\n        return elements;\n    }, ...(await AsyncIterableUtil.collect(results)));\n}), '' // custom init\n);\n/**\n * @internal\n */\nexport class ExecutionContext extends EventEmitter {\n    #client;\n    #world;\n    #id;\n    #name;\n    #disposables = new DisposableStack();\n    constructor(client, contextPayload, world) {\n        super();\n        this.#client = client;\n        this.#world = world;\n        this.#id = contextPayload.id;\n        if (contextPayload.name) {\n            this.#name = contextPayload.name;\n        }\n        const clientEmitter = this.#disposables.use(new EventEmitter(this.#client));\n        clientEmitter.on('Runtime.bindingCalled', this.#onBindingCalled.bind(this));\n        clientEmitter.on('Runtime.executionContextDestroyed', async (event) => {\n            if (event.executionContextId === this.#id) {\n                this[disposeSymbol]();\n            }\n        });\n        clientEmitter.on('Runtime.executionContextsCleared', async () => {\n            this[disposeSymbol]();\n        });\n        clientEmitter.on('Runtime.consoleAPICalled', this.#onConsoleAPI.bind(this));\n        clientEmitter.on(CDPSessionEvent.Disconnected, () => {\n            this[disposeSymbol]();\n        });\n    }\n    // Contains mapping from functions that should be bound to Puppeteer functions.\n    #bindings = new Map();\n    // If multiple waitFor are set up asynchronously, we need to wait for the\n    // first one to set up the binding in the page before running the others.\n    #mutex = new Mutex();\n    async #addBinding(binding) {\n        const env_1 = { stack: [], error: void 0, hasError: false };\n        try {\n            if (this.#bindings.has(binding.name)) {\n                return;\n            }\n            const _ = __addDisposableResource(env_1, await this.#mutex.acquire(), false);\n            try {\n                await this.#client.send('Runtime.addBinding', this.#name\n                    ? {\n                        name: CDP_BINDING_PREFIX + binding.name,\n                        executionContextName: this.#name,\n                    }\n                    : {\n                        name: CDP_BINDING_PREFIX + binding.name,\n                        executionContextId: this.#id,\n                    });\n                await this.evaluate(addPageBinding, 'internal', binding.name, CDP_BINDING_PREFIX);\n                this.#bindings.set(binding.name, binding);\n            }\n            catch (error) {\n                // We could have tried to evaluate in a context which was already\n                // destroyed. This happens, for example, if the page is navigated while\n                // we are trying to add the binding\n                if (error instanceof Error) {\n                    // Destroyed context.\n                    if (error.message.includes('Execution context was destroyed')) {\n                        return;\n                    }\n                    // Missing context.\n                    if (error.message.includes('Cannot find context with specified id')) {\n                        return;\n                    }\n                }\n                debugError(error);\n            }\n        }\n        catch (e_1) {\n            env_1.error = e_1;\n            env_1.hasError = true;\n        }\n        finally {\n            __disposeResources(env_1);\n        }\n    }\n    async #onBindingCalled(event) {\n        if (event.executionContextId !== this.#id) {\n            return;\n        }\n        let payload;\n        try {\n            payload = JSON.parse(event.payload);\n        }\n        catch {\n            // The binding was either called by something in the page or it was\n            // called before our wrapper was initialized.\n            return;\n        }\n        const { type, name, seq, args, isTrivial } = payload;\n        if (type !== 'internal') {\n            this.emit('bindingcalled', event);\n            return;\n        }\n        if (!this.#bindings.has(name)) {\n            this.emit('bindingcalled', event);\n            return;\n        }\n        try {\n            const binding = this.#bindings.get(name);\n            await binding?.run(this, seq, args, isTrivial);\n        }\n        catch (err) {\n            debugError(err);\n        }\n    }\n    get id() {\n        return this.#id;\n    }\n    #onConsoleAPI(event) {\n        if (event.executionContextId !== this.#id) {\n            return;\n        }\n        this.emit('consoleapicalled', event);\n    }\n    #bindingsInstalled = false;\n    #puppeteerUtil;\n    get puppeteerUtil() {\n        let promise = Promise.resolve();\n        if (!this.#bindingsInstalled) {\n            promise = Promise.all([\n                this.#addBindingWithoutThrowing(ariaQuerySelectorBinding),\n                this.#addBindingWithoutThrowing(ariaQuerySelectorAllBinding),\n            ]);\n            this.#bindingsInstalled = true;\n        }\n        scriptInjector.inject(script => {\n            if (this.#puppeteerUtil) {\n                void this.#puppeteerUtil.then(handle => {\n                    void handle.dispose();\n                });\n            }\n            this.#puppeteerUtil = promise.then(() => {\n                return this.evaluateHandle(script);\n            });\n        }, !this.#puppeteerUtil);\n        return this.#puppeteerUtil;\n    }\n    async #addBindingWithoutThrowing(binding) {\n        try {\n            await this.#addBinding(binding);\n        }\n        catch (err) {\n            // If the binding cannot be added, then either the browser doesn't support\n            // bindings (e.g. Firefox) or the context is broken. Either breakage is\n            // okay, so we ignore the error.\n            debugError(err);\n        }\n    }\n    /**\n     * Evaluates the given function.\n     *\n     * @example\n     *\n     * ```ts\n     * const executionContext = await page.mainFrame().executionContext();\n     * const result = await executionContext.evaluate(() => Promise.resolve(8 * 7))* ;\n     * console.log(result); // prints \"56\"\n     * ```\n     *\n     * @example\n     * A string can also be passed in instead of a function:\n     *\n     * ```ts\n     * console.log(await executionContext.evaluate('1 + 2')); // prints \"3\"\n     * ```\n     *\n     * @example\n     * Handles can also be passed as `args`. They resolve to their referenced object:\n     *\n     * ```ts\n     * const oneHandle = await executionContext.evaluateHandle(() => 1);\n     * const twoHandle = await executionContext.evaluateHandle(() => 2);\n     * const result = await executionContext.evaluate(\n     *   (a, b) => a + b,\n     *   oneHandle,\n     *   twoHandle\n     * );\n     * await oneHandle.dispose();\n     * await twoHandle.dispose();\n     * console.log(result); // prints '3'.\n     * ```\n     *\n     * @param pageFunction - The function to evaluate.\n     * @param args - Additional arguments to pass into the function.\n     * @returns The result of evaluating the function. If the result is an object,\n     * a vanilla object containing the serializable properties of the result is\n     * returned.\n     */\n    async evaluate(pageFunction, ...args) {\n        return await this.#evaluate(true, pageFunction, ...args);\n    }\n    /**\n     * Evaluates the given function.\n     *\n     * Unlike {@link ExecutionContext.evaluate | evaluate}, this method returns a\n     * handle to the result of the function.\n     *\n     * This method may be better suited if the object cannot be serialized (e.g.\n     * `Map`) and requires further manipulation.\n     *\n     * @example\n     *\n     * ```ts\n     * const context = await page.mainFrame().executionContext();\n     * const handle: JSHandle<typeof globalThis> = await context.evaluateHandle(\n     *   () => Promise.resolve(self)\n     * );\n     * ```\n     *\n     * @example\n     * A string can also be passed in instead of a function.\n     *\n     * ```ts\n     * const handle: JSHandle<number> = await context.evaluateHandle('1 + 2');\n     * ```\n     *\n     * @example\n     * Handles can also be passed as `args`. They resolve to their referenced object:\n     *\n     * ```ts\n     * const bodyHandle: ElementHandle<HTMLBodyElement> =\n     *   await context.evaluateHandle(() => {\n     *     return document.body;\n     *   });\n     * const stringHandle: JSHandle<string> = await context.evaluateHandle(\n     *   body => body.innerHTML,\n     *   body\n     * );\n     * console.log(await stringHandle.jsonValue()); // prints body's innerHTML\n     * // Always dispose your garbage! :)\n     * await bodyHandle.dispose();\n     * await stringHandle.dispose();\n     * ```\n     *\n     * @param pageFunction - The function to evaluate.\n     * @param args - Additional arguments to pass into the function.\n     * @returns A {@link JSHandle | handle} to the result of evaluating the\n     * function. If the result is a `Node`, then this will return an\n     * {@link ElementHandle | element handle}.\n     */\n    async evaluateHandle(pageFunction, ...args) {\n        return await this.#evaluate(false, pageFunction, ...args);\n    }\n    async #evaluate(returnByValue, pageFunction, ...args) {\n        const sourceUrlComment = getSourceUrlComment(getSourcePuppeteerURLIfAvailable(pageFunction)?.toString() ??\n            PuppeteerURL.INTERNAL_URL);\n        if (isString(pageFunction)) {\n            const contextId = this.#id;\n            const expression = pageFunction;\n            const expressionWithSourceUrl = SOURCE_URL_REGEX.test(expression)\n                ? expression\n                : `${expression}\\n${sourceUrlComment}\\n`;\n            const { exceptionDetails, result: remoteObject } = await this.#client\n                .send('Runtime.evaluate', {\n                expression: expressionWithSourceUrl,\n                contextId,\n                returnByValue,\n                awaitPromise: true,\n                userGesture: true,\n            })\n                .catch(rewriteError);\n            if (exceptionDetails) {\n                throw createEvaluationError(exceptionDetails);\n            }\n            return returnByValue\n                ? valueFromRemoteObject(remoteObject)\n                : this.#world.createCdpHandle(remoteObject);\n        }\n        const functionDeclaration = stringifyFunction(pageFunction);\n        const functionDeclarationWithSourceUrl = SOURCE_URL_REGEX.test(functionDeclaration)\n            ? functionDeclaration\n            : `${functionDeclaration}\\n${sourceUrlComment}\\n`;\n        let callFunctionOnPromise;\n        try {\n            callFunctionOnPromise = this.#client.send('Runtime.callFunctionOn', {\n                functionDeclaration: functionDeclarationWithSourceUrl,\n                executionContextId: this.#id,\n                // LazyArgs are used only internally and should not affect the order\n                // evaluate calls for the public APIs.\n                arguments: args.some(arg => {\n                    return arg instanceof LazyArg;\n                })\n                    ? await Promise.all(args.map(arg => {\n                        return convertArgumentAsync(this, arg);\n                    }))\n                    : args.map(arg => {\n                        return convertArgument(this, arg);\n                    }),\n                returnByValue,\n                awaitPromise: true,\n                userGesture: true,\n            });\n        }\n        catch (error) {\n            if (error instanceof TypeError &&\n                error.message.startsWith('Converting circular structure to JSON')) {\n                error.message += ' Recursive objects are not allowed.';\n            }\n            throw error;\n        }\n        const { exceptionDetails, result: remoteObject } = await callFunctionOnPromise.catch(rewriteError);\n        if (exceptionDetails) {\n            throw createEvaluationError(exceptionDetails);\n        }\n        return returnByValue\n            ? valueFromRemoteObject(remoteObject)\n            : this.#world.createCdpHandle(remoteObject);\n        async function convertArgumentAsync(context, arg) {\n            if (arg instanceof LazyArg) {\n                arg = await arg.get(context);\n            }\n            return convertArgument(context, arg);\n        }\n        function convertArgument(context, arg) {\n            if (typeof arg === 'bigint') {\n                // eslint-disable-line valid-typeof\n                return { unserializableValue: `${arg.toString()}n` };\n            }\n            if (Object.is(arg, -0)) {\n                return { unserializableValue: '-0' };\n            }\n            if (Object.is(arg, Infinity)) {\n                return { unserializableValue: 'Infinity' };\n            }\n            if (Object.is(arg, -Infinity)) {\n                return { unserializableValue: '-Infinity' };\n            }\n            if (Object.is(arg, NaN)) {\n                return { unserializableValue: 'NaN' };\n            }\n            const objectHandle = arg && (arg instanceof CdpJSHandle || arg instanceof CdpElementHandle)\n                ? arg\n                : null;\n            if (objectHandle) {\n                if (objectHandle.realm !== context.#world) {\n                    throw new Error('JSHandles can be evaluated only in the context they were created!');\n                }\n                if (objectHandle.disposed) {\n                    throw new Error('JSHandle is disposed!');\n                }\n                if (objectHandle.remoteObject().unserializableValue) {\n                    return {\n                        unserializableValue: objectHandle.remoteObject().unserializableValue,\n                    };\n                }\n                if (!objectHandle.remoteObject().objectId) {\n                    return { value: objectHandle.remoteObject().value };\n                }\n                return { objectId: objectHandle.remoteObject().objectId };\n            }\n            return { value: arg };\n        }\n    }\n    [disposeSymbol]() {\n        this.#disposables.dispose();\n        this.emit('disposed', undefined);\n    }\n}\nconst rewriteError = (error) => {\n    if (error.message.includes('Object reference chain is too long')) {\n        return { result: { type: 'undefined' } };\n    }\n    if (error.message.includes(\"Object couldn't be returned by value\")) {\n        return { result: { type: 'undefined' } };\n    }\n    if (error.message.endsWith('Cannot find context with specified id') ||\n        error.message.endsWith('Inspected target navigated or closed')) {\n        throw new Error('Execution context was destroyed, most likely because of a navigation.');\n    }\n    throw error;\n};\n//# sourceMappingURL=ExecutionContext.js.map","/**\n * @license\n * Copyright 2018 Google Inc.\n * SPDX-License-Identifier: Apache-2.0\n */\n/**\n * The Accessibility class provides methods for inspecting the browser's\n * accessibility tree. The accessibility tree is used by assistive technology\n * such as {@link https://en.wikipedia.org/wiki/Screen_reader | screen readers} or\n * {@link https://en.wikipedia.org/wiki/Switch_access | switches}.\n *\n * @remarks\n *\n * Accessibility is a very platform-specific thing. On different platforms,\n * there are different screen readers that might have wildly different output.\n *\n * Blink - Chrome's rendering engine - has a concept of \"accessibility tree\",\n * which is then translated into different platform-specific APIs. Accessibility\n * namespace gives users access to the Blink Accessibility Tree.\n *\n * Most of the accessibility tree gets filtered out when converting from Blink\n * AX Tree to Platform-specific AX-Tree or by assistive technologies themselves.\n * By default, Puppeteer tries to approximate this filtering, exposing only\n * the \"interesting\" nodes of the tree.\n *\n * @public\n */\nexport class Accessibility {\n    #realm;\n    /**\n     * @internal\n     */\n    constructor(realm) {\n        this.#realm = realm;\n    }\n    /**\n     * Captures the current state of the accessibility tree.\n     * The returned object represents the root accessible node of the page.\n     *\n     * @remarks\n     *\n     * **NOTE** The Chrome accessibility tree contains nodes that go unused on\n     * most platforms and by most screen readers. Puppeteer will discard them as\n     * well for an easier to process tree, unless `interestingOnly` is set to\n     * `false`.\n     *\n     * @example\n     * An example of dumping the entire accessibility tree:\n     *\n     * ```ts\n     * const snapshot = await page.accessibility.snapshot();\n     * console.log(snapshot);\n     * ```\n     *\n     * @example\n     * An example of logging the focused node's name:\n     *\n     * ```ts\n     * const snapshot = await page.accessibility.snapshot();\n     * const node = findFocusedNode(snapshot);\n     * console.log(node && node.name);\n     *\n     * function findFocusedNode(node) {\n     *   if (node.focused) return node;\n     *   for (const child of node.children || []) {\n     *     const foundNode = findFocusedNode(child);\n     *     return foundNode;\n     *   }\n     *   return null;\n     * }\n     * ```\n     *\n     * @returns An AXNode object representing the snapshot.\n     */\n    async snapshot(options = {}) {\n        const { interestingOnly = true, root = null } = options;\n        const { nodes } = await this.#realm.environment.client.send('Accessibility.getFullAXTree');\n        let backendNodeId;\n        if (root) {\n            const { node } = await this.#realm.environment.client.send('DOM.describeNode', {\n                objectId: root.id,\n            });\n            backendNodeId = node.backendNodeId;\n        }\n        const defaultRoot = AXNode.createTree(this.#realm, nodes);\n        let needle = defaultRoot;\n        if (!defaultRoot) {\n            return null;\n        }\n        if (backendNodeId) {\n            needle = defaultRoot.find(node => {\n                return node.payload.backendDOMNodeId === backendNodeId;\n            });\n        }\n        if (!needle) {\n            return null;\n        }\n        if (!interestingOnly) {\n            return this.serializeTree(needle)[0] ?? null;\n        }\n        const interestingNodes = new Set();\n        this.collectInterestingNodes(interestingNodes, defaultRoot, false);\n        if (!interestingNodes.has(needle)) {\n            return null;\n        }\n        return this.serializeTree(needle, interestingNodes)[0] ?? null;\n    }\n    serializeTree(node, interestingNodes) {\n        const children = [];\n        for (const child of node.children) {\n            children.push(...this.serializeTree(child, interestingNodes));\n        }\n        if (interestingNodes && !interestingNodes.has(node)) {\n            return children;\n        }\n        const serializedNode = node.serialize();\n        if (children.length) {\n            serializedNode.children = children;\n        }\n        return [serializedNode];\n    }\n    collectInterestingNodes(collection, node, insideControl) {\n        if (node.isInteresting(insideControl)) {\n            collection.add(node);\n        }\n        if (node.isLeafNode()) {\n            return;\n        }\n        insideControl = insideControl || node.isControl();\n        for (const child of node.children) {\n            this.collectInterestingNodes(collection, child, insideControl);\n        }\n    }\n}\nclass AXNode {\n    payload;\n    children = [];\n    #richlyEditable = false;\n    #editable = false;\n    #focusable = false;\n    #hidden = false;\n    #name;\n    #role;\n    #ignored;\n    #cachedHasFocusableChild;\n    #realm;\n    constructor(realm, payload) {\n        this.payload = payload;\n        this.#name = this.payload.name ? this.payload.name.value : '';\n        this.#role = this.payload.role ? this.payload.role.value : 'Unknown';\n        this.#ignored = this.payload.ignored;\n        this.#realm = realm;\n        for (const property of this.payload.properties || []) {\n            if (property.name === 'editable') {\n                this.#richlyEditable = property.value.value === 'richtext';\n                this.#editable = true;\n            }\n            if (property.name === 'focusable') {\n                this.#focusable = property.value.value;\n            }\n            if (property.name === 'hidden') {\n                this.#hidden = property.value.value;\n            }\n        }\n    }\n    #isPlainTextField() {\n        if (this.#richlyEditable) {\n            return false;\n        }\n        if (this.#editable) {\n            return true;\n        }\n        return this.#role === 'textbox' || this.#role === 'searchbox';\n    }\n    #isTextOnlyObject() {\n        const role = this.#role;\n        return (role === 'LineBreak' ||\n            role === 'text' ||\n            role === 'InlineTextBox' ||\n            role === 'StaticText');\n    }\n    #hasFocusableChild() {\n        if (this.#cachedHasFocusableChild === undefined) {\n            this.#cachedHasFocusableChild = false;\n            for (const child of this.children) {\n                if (child.#focusable || child.#hasFocusableChild()) {\n                    this.#cachedHasFocusableChild = true;\n                    break;\n                }\n            }\n        }\n        return this.#cachedHasFocusableChild;\n    }\n    find(predicate) {\n        if (predicate(this)) {\n            return this;\n        }\n        for (const child of this.children) {\n            const result = child.find(predicate);\n            if (result) {\n                return result;\n            }\n        }\n        return null;\n    }\n    isLeafNode() {\n        if (!this.children.length) {\n            return true;\n        }\n        // These types of objects may have children that we use as internal\n        // implementation details, but we want to expose them as leaves to platform\n        // accessibility APIs because screen readers might be confused if they find\n        // any children.\n        if (this.#isPlainTextField() || this.#isTextOnlyObject()) {\n            return true;\n        }\n        // Roles whose children are only presentational according to the ARIA and\n        // HTML5 Specs should be hidden from screen readers.\n        // (Note that whilst ARIA buttons can have only presentational children, HTML5\n        // buttons are allowed to have content.)\n        switch (this.#role) {\n            case 'doc-cover':\n            case 'graphics-symbol':\n            case 'img':\n            case 'image':\n            case 'Meter':\n            case 'scrollbar':\n            case 'slider':\n            case 'separator':\n            case 'progressbar':\n                return true;\n            default:\n                break;\n        }\n        // Here and below: Android heuristics\n        if (this.#hasFocusableChild()) {\n            return false;\n        }\n        if (this.#focusable && this.#name) {\n            return true;\n        }\n        if (this.#role === 'heading' && this.#name) {\n            return true;\n        }\n        return false;\n    }\n    isControl() {\n        switch (this.#role) {\n            case 'button':\n            case 'checkbox':\n            case 'ColorWell':\n            case 'combobox':\n            case 'DisclosureTriangle':\n            case 'listbox':\n            case 'menu':\n            case 'menubar':\n            case 'menuitem':\n            case 'menuitemcheckbox':\n            case 'menuitemradio':\n            case 'radio':\n            case 'scrollbar':\n            case 'searchbox':\n            case 'slider':\n            case 'spinbutton':\n            case 'switch':\n            case 'tab':\n            case 'textbox':\n            case 'tree':\n            case 'treeitem':\n                return true;\n            default:\n                return false;\n        }\n    }\n    isInteresting(insideControl) {\n        const role = this.#role;\n        if (role === 'Ignored' || this.#hidden || this.#ignored) {\n            return false;\n        }\n        if (this.#focusable || this.#richlyEditable) {\n            return true;\n        }\n        // If it's not focusable but has a control role, then it's interesting.\n        if (this.isControl()) {\n            return true;\n        }\n        // A non focusable child of a control is not interesting\n        if (insideControl) {\n            return false;\n        }\n        return this.isLeafNode() && !!this.#name;\n    }\n    serialize() {\n        const properties = new Map();\n        for (const property of this.payload.properties || []) {\n            properties.set(property.name.toLowerCase(), property.value.value);\n        }\n        if (this.payload.name) {\n            properties.set('name', this.payload.name.value);\n        }\n        if (this.payload.value) {\n            properties.set('value', this.payload.value.value);\n        }\n        if (this.payload.description) {\n            properties.set('description', this.payload.description.value);\n        }\n        const node = {\n            role: this.#role,\n            elementHandle: async () => {\n                if (!this.payload.backendDOMNodeId) {\n                    return null;\n                }\n                return (await this.#realm.adoptBackendNode(this.payload.backendDOMNodeId));\n            },\n        };\n        const userStringProperties = [\n            'name',\n            'value',\n            'description',\n            'keyshortcuts',\n            'roledescription',\n            'valuetext',\n        ];\n        const getUserStringPropertyValue = (key) => {\n            return properties.get(key);\n        };\n        for (const userStringProperty of userStringProperties) {\n            if (!properties.has(userStringProperty)) {\n                continue;\n            }\n            node[userStringProperty] = getUserStringPropertyValue(userStringProperty);\n        }\n        const booleanProperties = [\n            'disabled',\n            'expanded',\n            'focused',\n            'modal',\n            'multiline',\n            'multiselectable',\n            'readonly',\n            'required',\n            'selected',\n        ];\n        const getBooleanPropertyValue = (key) => {\n            return properties.get(key);\n        };\n        for (const booleanProperty of booleanProperties) {\n            // RootWebArea's treat focus differently than other nodes. They report whether\n            // their frame  has focus, not whether focus is specifically on the root\n            // node.\n            if (booleanProperty === 'focused' && this.#role === 'RootWebArea') {\n                continue;\n            }\n            const value = getBooleanPropertyValue(booleanProperty);\n            if (!value) {\n                continue;\n            }\n            node[booleanProperty] = getBooleanPropertyValue(booleanProperty);\n        }\n        const tristateProperties = ['checked', 'pressed'];\n        for (const tristateProperty of tristateProperties) {\n            if (!properties.has(tristateProperty)) {\n                continue;\n            }\n            const value = properties.get(tristateProperty);\n            node[tristateProperty] =\n                value === 'mixed' ? 'mixed' : value === 'true' ? true : false;\n        }\n        const numericalProperties = [\n            'level',\n            'valuemax',\n            'valuemin',\n        ];\n        const getNumericalPropertyValue = (key) => {\n            return properties.get(key);\n        };\n        for (const numericalProperty of numericalProperties) {\n            if (!properties.has(numericalProperty)) {\n                continue;\n            }\n            node[numericalProperty] = getNumericalPropertyValue(numericalProperty);\n        }\n        const tokenProperties = [\n            'autocomplete',\n            'haspopup',\n            'invalid',\n            'orientation',\n        ];\n        const getTokenPropertyValue = (key) => {\n            return properties.get(key);\n        };\n        for (const tokenProperty of tokenProperties) {\n            const value = getTokenPropertyValue(tokenProperty);\n            if (!value || value === 'false') {\n                continue;\n            }\n            node[tokenProperty] = getTokenPropertyValue(tokenProperty);\n        }\n        return node;\n    }\n    static createTree(realm, payloads) {\n        const nodeById = new Map();\n        for (const payload of payloads) {\n            nodeById.set(payload.nodeId, new AXNode(realm, payload));\n        }\n        for (const node of nodeById.values()) {\n            for (const childId of node.payload.childIds || []) {\n                const child = nodeById.get(childId);\n                if (child) {\n                    node.children.push(child);\n                }\n            }\n        }\n        return nodeById.values().next().value ?? null;\n    }\n}\n//# sourceMappingURL=Accessibility.js.map","/**\n * @license\n * Copyright 2023 Google Inc.\n * SPDX-License-Identifier: Apache-2.0\n */\n/**\n * We use symbols to prevent external parties listening to these events.\n * They are internal to Puppeteer.\n *\n * @internal\n */\n// eslint-disable-next-line @typescript-eslint/no-namespace\nexport var FrameManagerEvent;\n(function (FrameManagerEvent) {\n    FrameManagerEvent.FrameAttached = Symbol('FrameManager.FrameAttached');\n    FrameManagerEvent.FrameNavigated = Symbol('FrameManager.FrameNavigated');\n    FrameManagerEvent.FrameDetached = Symbol('FrameManager.FrameDetached');\n    FrameManagerEvent.FrameSwapped = Symbol('FrameManager.FrameSwapped');\n    FrameManagerEvent.LifecycleEvent = Symbol('FrameManager.LifecycleEvent');\n    FrameManagerEvent.FrameNavigatedWithinDocument = Symbol('FrameManager.FrameNavigatedWithinDocument');\n    FrameManagerEvent.ConsoleApiCalled = Symbol('FrameManager.ConsoleApiCalled');\n    FrameManagerEvent.BindingCalled = Symbol('FrameManager.BindingCalled');\n})(FrameManagerEvent || (FrameManagerEvent = {}));\n//# sourceMappingURL=FrameManagerEvents.js.map","/**\n * @license\n * Copyright 2022 Google Inc.\n * SPDX-License-Identifier: Apache-2.0\n */\nimport { Deferred } from '../util/Deferred.js';\nimport { isErrorLike } from '../util/ErrorLike.js';\nimport { stringifyFunction } from '../util/Function.js';\nimport { TimeoutError } from './Errors.js';\nimport { LazyArg } from './LazyArg.js';\n/**\n * @internal\n */\nexport class WaitTask {\n    #world;\n    #polling;\n    #root;\n    #fn;\n    #args;\n    #timeout;\n    #timeoutError;\n    #result = Deferred.create();\n    #poller;\n    #signal;\n    #reruns = [];\n    constructor(world, options, fn, ...args) {\n        this.#world = world;\n        this.#polling = options.polling;\n        this.#root = options.root;\n        this.#signal = options.signal;\n        this.#signal?.addEventListener('abort', () => {\n            void this.terminate(this.#signal?.reason);\n        }, {\n            once: true,\n        });\n        switch (typeof fn) {\n            case 'string':\n                this.#fn = `() => {return (${fn});}`;\n                break;\n            default:\n                this.#fn = stringifyFunction(fn);\n                break;\n        }\n        this.#args = args;\n        this.#world.taskManager.add(this);\n        if (options.timeout) {\n            this.#timeoutError = new TimeoutError(`Waiting failed: ${options.timeout}ms exceeded`);\n            this.#timeout = setTimeout(() => {\n                void this.terminate(this.#timeoutError);\n            }, options.timeout);\n        }\n        void this.rerun();\n    }\n    get result() {\n        return this.#result.valueOrThrow();\n    }\n    async rerun() {\n        for (const prev of this.#reruns) {\n            prev.abort();\n        }\n        this.#reruns.length = 0;\n        const controller = new AbortController();\n        this.#reruns.push(controller);\n        try {\n            switch (this.#polling) {\n                case 'raf':\n                    this.#poller = await this.#world.evaluateHandle(({ RAFPoller, createFunction }, fn, ...args) => {\n                        const fun = createFunction(fn);\n                        return new RAFPoller(() => {\n                            return fun(...args);\n                        });\n                    }, LazyArg.create(context => {\n                        return context.puppeteerUtil;\n                    }), this.#fn, ...this.#args);\n                    break;\n                case 'mutation':\n                    this.#poller = await this.#world.evaluateHandle(({ MutationPoller, createFunction }, root, fn, ...args) => {\n                        const fun = createFunction(fn);\n                        return new MutationPoller(() => {\n                            return fun(...args);\n                        }, root || document);\n                    }, LazyArg.create(context => {\n                        return context.puppeteerUtil;\n                    }), this.#root, this.#fn, ...this.#args);\n                    break;\n                default:\n                    this.#poller = await this.#world.evaluateHandle(({ IntervalPoller, createFunction }, ms, fn, ...args) => {\n                        const fun = createFunction(fn);\n                        return new IntervalPoller(() => {\n                            return fun(...args);\n                        }, ms);\n                    }, LazyArg.create(context => {\n                        return context.puppeteerUtil;\n                    }), this.#polling, this.#fn, ...this.#args);\n                    break;\n            }\n            await this.#poller.evaluate(poller => {\n                void poller.start();\n            });\n            const result = await this.#poller.evaluateHandle(poller => {\n                return poller.result();\n            });\n            this.#result.resolve(result);\n            await this.terminate();\n        }\n        catch (error) {\n            if (controller.signal.aborted) {\n                return;\n            }\n            const badError = this.getBadError(error);\n            if (badError) {\n                await this.terminate(badError);\n            }\n        }\n    }\n    async terminate(error) {\n        this.#world.taskManager.delete(this);\n        clearTimeout(this.#timeout);\n        if (error && !this.#result.finished()) {\n            this.#result.reject(error);\n        }\n        if (this.#poller) {\n            try {\n                await this.#poller.evaluateHandle(async (poller) => {\n                    await poller.stop();\n                });\n                if (this.#poller) {\n                    await this.#poller.dispose();\n                    this.#poller = undefined;\n                }\n            }\n            catch {\n                // Ignore errors since they most likely come from low-level cleanup.\n            }\n        }\n    }\n    /**\n     * Not all errors lead to termination. They usually imply we need to rerun the task.\n     */\n    getBadError(error) {\n        if (isErrorLike(error)) {\n            // When frame is detached the task should have been terminated by the IsolatedWorld.\n            // This can fail if we were adding this task while the frame was detached,\n            // so we terminate here instead.\n            if (error.message.includes('Execution context is not available in detached frame')) {\n                return new Error('Waiting failed: Frame detached');\n            }\n            // When the page is navigated, the promise is rejected.\n            // We will try again in the new execution context.\n            if (error.message.includes('Execution context was destroyed')) {\n                return;\n            }\n            // We could have tried to evaluate in a context which was already\n            // destroyed.\n            if (error.message.includes('Cannot find context with specified id')) {\n                return;\n            }\n            // Errors coming from WebDriver BiDi. TODO: Adjust messages after\n            // https://github.com/w3c/webdriver-bidi/issues/540 is resolved.\n            if (error.message.includes(\"AbortError: Actor 'MessageHandlerFrame' destroyed\")) {\n                return;\n            }\n            return error;\n        }\n        return new Error('WaitTask failed with an error', {\n            cause: error,\n        });\n    }\n}\n/**\n * @internal\n */\nexport class TaskManager {\n    #tasks = new Set();\n    add(task) {\n        this.#tasks.add(task);\n    }\n    delete(task) {\n        this.#tasks.delete(task);\n    }\n    terminateAll(error) {\n        for (const task of this.#tasks) {\n            void task.terminate(error);\n        }\n        this.#tasks.clear();\n    }\n    async rerunAll() {\n        await Promise.all([...this.#tasks].map(task => {\n            return task.rerun();\n        }));\n    }\n}\n//# sourceMappingURL=WaitTask.js.map","/**\n * @license\n * Copyright 2023 Google Inc.\n * SPDX-License-Identifier: Apache-2.0\n */\nimport { TaskManager, WaitTask } from '../common/WaitTask.js';\nimport { disposeSymbol } from '../util/disposable.js';\n/**\n * @internal\n */\nexport class Realm {\n    timeoutSettings;\n    taskManager = new TaskManager();\n    constructor(timeoutSettings) {\n        this.timeoutSettings = timeoutSettings;\n    }\n    async waitForFunction(pageFunction, options = {}, ...args) {\n        const { polling = 'raf', timeout = this.timeoutSettings.timeout(), root, signal, } = options;\n        if (typeof polling === 'number' && polling < 0) {\n            throw new Error('Cannot poll with non-positive interval');\n        }\n        const waitTask = new WaitTask(this, {\n            polling,\n            root,\n            timeout,\n            signal,\n        }, pageFunction, ...args);\n        return await waitTask.result;\n    }\n    get disposed() {\n        return this.#disposed;\n    }\n    #disposed = false;\n    /** @internal */\n    dispose() {\n        this.#disposed = true;\n        this.taskManager.terminateAll(new Error('waitForFunction failed: frame got detached.'));\n    }\n    /** @internal */\n    [disposeSymbol]() {\n        this.dispose();\n    }\n}\n//# sourceMappingURL=Realm.js.map","/**\n * @license\n * Copyright 2019 Google Inc.\n * SPDX-License-Identifier: Apache-2.0\n */\nimport { firstValueFrom, map, raceWith } from '../../third_party/rxjs/rxjs.js';\nimport { Realm } from '../api/Realm.js';\nimport { EventEmitter } from '../common/EventEmitter.js';\nimport { fromEmitterEvent, timeout, withSourcePuppeteerURLIfNone, } from '../common/util.js';\nimport { disposeSymbol } from '../util/disposable.js';\nimport { CdpElementHandle } from './ElementHandle.js';\nimport { CdpJSHandle } from './JSHandle.js';\n/**\n * @internal\n */\nexport class IsolatedWorld extends Realm {\n    #context;\n    #emitter = new EventEmitter();\n    #frameOrWorker;\n    constructor(frameOrWorker, timeoutSettings) {\n        super(timeoutSettings);\n        this.#frameOrWorker = frameOrWorker;\n    }\n    get environment() {\n        return this.#frameOrWorker;\n    }\n    get client() {\n        return this.#frameOrWorker.client;\n    }\n    get emitter() {\n        return this.#emitter;\n    }\n    setContext(context) {\n        this.#context?.[disposeSymbol]();\n        context.once('disposed', this.#onContextDisposed.bind(this));\n        context.on('consoleapicalled', this.#onContextConsoleApiCalled.bind(this));\n        context.on('bindingcalled', this.#onContextBindingCalled.bind(this));\n        this.#context = context;\n        this.#emitter.emit('context', context);\n        void this.taskManager.rerunAll();\n    }\n    #onContextDisposed() {\n        this.#context = undefined;\n        if ('clearDocumentHandle' in this.#frameOrWorker) {\n            this.#frameOrWorker.clearDocumentHandle();\n        }\n    }\n    #onContextConsoleApiCalled(event) {\n        this.#emitter.emit('consoleapicalled', event);\n    }\n    #onContextBindingCalled(event) {\n        this.#emitter.emit('bindingcalled', event);\n    }\n    hasContext() {\n        return !!this.#context;\n    }\n    get context() {\n        return this.#context;\n    }\n    #executionContext() {\n        if (this.disposed) {\n            throw new Error(`Execution context is not available in detached frame or worker \"${this.environment.url()}\" (are you trying to evaluate?)`);\n        }\n        return this.#context;\n    }\n    /**\n     * Waits for the next context to be set on the isolated world.\n     */\n    async #waitForExecutionContext() {\n        const error = new Error('Execution context was destroyed');\n        const result = await firstValueFrom(fromEmitterEvent(this.#emitter, 'context').pipe(raceWith(fromEmitterEvent(this.#emitter, 'disposed').pipe(map(() => {\n            // The message has to match the CDP message expected by the WaitTask class.\n            throw error;\n        })), timeout(this.timeoutSettings.timeout()))));\n        return result;\n    }\n    async evaluateHandle(pageFunction, ...args) {\n        pageFunction = withSourcePuppeteerURLIfNone(this.evaluateHandle.name, pageFunction);\n        // This code needs to schedule evaluateHandle call synchroniously (at\n        // least when the context is there) so we cannot unconditionally\n        // await.\n        let context = this.#executionContext();\n        if (!context) {\n            context = await this.#waitForExecutionContext();\n        }\n        return await context.evaluateHandle(pageFunction, ...args);\n    }\n    async evaluate(pageFunction, ...args) {\n        pageFunction = withSourcePuppeteerURLIfNone(this.evaluate.name, pageFunction);\n        // This code needs to schedule evaluate call synchroniously (at\n        // least when the context is there) so we cannot unconditionally\n        // await.\n        let context = this.#executionContext();\n        if (!context) {\n            context = await this.#waitForExecutionContext();\n        }\n        return await context.evaluate(pageFunction, ...args);\n    }\n    async adoptBackendNode(backendNodeId) {\n        // This code needs to schedule resolveNode call synchroniously (at\n        // least when the context is there) so we cannot unconditionally\n        // await.\n        let context = this.#executionContext();\n        if (!context) {\n            context = await this.#waitForExecutionContext();\n        }\n        const { object } = await this.client.send('DOM.resolveNode', {\n            backendNodeId: backendNodeId,\n            executionContextId: context.id,\n        });\n        return this.createCdpHandle(object);\n    }\n    async adoptHandle(handle) {\n        if (handle.realm === this) {\n            // If the context has already adopted this handle, clone it so downstream\n            // disposal doesn't become an issue.\n            return (await handle.evaluateHandle(value => {\n                return value;\n            }));\n        }\n        const nodeInfo = await this.client.send('DOM.describeNode', {\n            objectId: handle.id,\n        });\n        return (await this.adoptBackendNode(nodeInfo.node.backendNodeId));\n    }\n    async transferHandle(handle) {\n        if (handle.realm === this) {\n            return handle;\n        }\n        // Implies it's a primitive value, probably.\n        if (handle.remoteObject().objectId === undefined) {\n            return handle;\n        }\n        const info = await this.client.send('DOM.describeNode', {\n            objectId: handle.remoteObject().objectId,\n        });\n        const newHandle = (await this.adoptBackendNode(info.node.backendNodeId));\n        await handle.dispose();\n        return newHandle;\n    }\n    /**\n     * @internal\n     */\n    createCdpHandle(remoteObject) {\n        if (remoteObject.subtype === 'node') {\n            return new CdpElementHandle(this, remoteObject);\n        }\n        return new CdpJSHandle(this, remoteObject);\n    }\n    [disposeSymbol]() {\n        this.#context?.[disposeSymbol]();\n        this.#emitter.emit('disposed', undefined);\n        super[disposeSymbol]();\n        this.#emitter.removeAllListeners();\n    }\n}\n//# sourceMappingURL=IsolatedWorld.js.map","/**\n * @license\n * Copyright 2022 Google Inc.\n * SPDX-License-Identifier: Apache-2.0\n */\n/**\n * A unique key for {@link IsolatedWorldChart} to denote the default world.\n * Execution contexts are automatically created in the default world.\n *\n * @internal\n */\nexport const MAIN_WORLD = Symbol('mainWorld');\n/**\n * A unique key for {@link IsolatedWorldChart} to denote the puppeteer world.\n * This world contains all puppeteer-internal bindings/code.\n *\n * @internal\n */\nexport const PUPPETEER_WORLD = Symbol('puppeteerWorld');\n//# sourceMappingURL=IsolatedWorlds.js.map","/**\n * @license\n * Copyright 2019 Google Inc.\n * SPDX-License-Identifier: Apache-2.0\n */\nimport { FrameEvent } from '../api/Frame.js';\nimport { EventEmitter } from '../common/EventEmitter.js';\nimport { NetworkManagerEvent } from '../common/NetworkManagerEvents.js';\nimport { assert } from '../util/assert.js';\nimport { Deferred } from '../util/Deferred.js';\nimport { DisposableStack } from '../util/disposable.js';\nimport { FrameManagerEvent } from './FrameManagerEvents.js';\nconst puppeteerToProtocolLifecycle = new Map([\n    ['load', 'load'],\n    ['domcontentloaded', 'DOMContentLoaded'],\n    ['networkidle0', 'networkIdle'],\n    ['networkidle2', 'networkAlmostIdle'],\n]);\n/**\n * @internal\n */\nexport class LifecycleWatcher {\n    #expectedLifecycle;\n    #frame;\n    #timeout;\n    #navigationRequest = null;\n    #subscriptions = new DisposableStack();\n    #initialLoaderId;\n    #terminationDeferred;\n    #sameDocumentNavigationDeferred = Deferred.create();\n    #lifecycleDeferred = Deferred.create();\n    #newDocumentNavigationDeferred = Deferred.create();\n    #hasSameDocumentNavigation;\n    #swapped;\n    #navigationResponseReceived;\n    constructor(networkManager, frame, waitUntil, timeout, signal) {\n        if (Array.isArray(waitUntil)) {\n            waitUntil = waitUntil.slice();\n        }\n        else if (typeof waitUntil === 'string') {\n            waitUntil = [waitUntil];\n        }\n        this.#initialLoaderId = frame._loaderId;\n        this.#expectedLifecycle = waitUntil.map(value => {\n            const protocolEvent = puppeteerToProtocolLifecycle.get(value);\n            assert(protocolEvent, 'Unknown value for options.waitUntil: ' + value);\n            return protocolEvent;\n        });\n        signal?.addEventListener('abort', () => {\n            this.#terminationDeferred.reject(signal.reason);\n        });\n        this.#frame = frame;\n        this.#timeout = timeout;\n        const frameManagerEmitter = this.#subscriptions.use(new EventEmitter(frame._frameManager));\n        frameManagerEmitter.on(FrameManagerEvent.LifecycleEvent, this.#checkLifecycleComplete.bind(this));\n        const frameEmitter = this.#subscriptions.use(new EventEmitter(frame));\n        frameEmitter.on(FrameEvent.FrameNavigatedWithinDocument, this.#navigatedWithinDocument.bind(this));\n        frameEmitter.on(FrameEvent.FrameNavigated, this.#navigated.bind(this));\n        frameEmitter.on(FrameEvent.FrameSwapped, this.#frameSwapped.bind(this));\n        frameEmitter.on(FrameEvent.FrameSwappedByActivation, this.#frameSwapped.bind(this));\n        frameEmitter.on(FrameEvent.FrameDetached, this.#onFrameDetached.bind(this));\n        const networkManagerEmitter = this.#subscriptions.use(new EventEmitter(networkManager));\n        networkManagerEmitter.on(NetworkManagerEvent.Request, this.#onRequest.bind(this));\n        networkManagerEmitter.on(NetworkManagerEvent.Response, this.#onResponse.bind(this));\n        networkManagerEmitter.on(NetworkManagerEvent.RequestFailed, this.#onRequestFailed.bind(this));\n        this.#terminationDeferred = Deferred.create({\n            timeout: this.#timeout,\n            message: `Navigation timeout of ${this.#timeout} ms exceeded`,\n        });\n        this.#checkLifecycleComplete();\n    }\n    #onRequest(request) {\n        if (request.frame() !== this.#frame || !request.isNavigationRequest()) {\n            return;\n        }\n        this.#navigationRequest = request;\n        // Resolve previous navigation response in case there are multiple\n        // navigation requests reported by the backend. This generally should not\n        // happen by it looks like it's possible.\n        this.#navigationResponseReceived?.resolve();\n        this.#navigationResponseReceived = Deferred.create();\n        if (request.response() !== null) {\n            this.#navigationResponseReceived?.resolve();\n        }\n    }\n    #onRequestFailed(request) {\n        if (this.#navigationRequest?.id !== request.id) {\n            return;\n        }\n        this.#navigationResponseReceived?.resolve();\n    }\n    #onResponse(response) {\n        if (this.#navigationRequest?.id !== response.request().id) {\n            return;\n        }\n        this.#navigationResponseReceived?.resolve();\n    }\n    #onFrameDetached(frame) {\n        if (this.#frame === frame) {\n            this.#terminationDeferred.resolve(new Error('Navigating frame was detached'));\n            return;\n        }\n        this.#checkLifecycleComplete();\n    }\n    async navigationResponse() {\n        // Continue with a possibly null response.\n        await this.#navigationResponseReceived?.valueOrThrow();\n        return this.#navigationRequest ? this.#navigationRequest.response() : null;\n    }\n    sameDocumentNavigationPromise() {\n        return this.#sameDocumentNavigationDeferred.valueOrThrow();\n    }\n    newDocumentNavigationPromise() {\n        return this.#newDocumentNavigationDeferred.valueOrThrow();\n    }\n    lifecyclePromise() {\n        return this.#lifecycleDeferred.valueOrThrow();\n    }\n    terminationPromise() {\n        return this.#terminationDeferred.valueOrThrow();\n    }\n    #navigatedWithinDocument() {\n        this.#hasSameDocumentNavigation = true;\n        this.#checkLifecycleComplete();\n    }\n    #navigated(navigationType) {\n        if (navigationType === 'BackForwardCacheRestore') {\n            return this.#frameSwapped();\n        }\n        this.#checkLifecycleComplete();\n    }\n    #frameSwapped() {\n        this.#swapped = true;\n        this.#checkLifecycleComplete();\n    }\n    #checkLifecycleComplete() {\n        // We expect navigation to commit.\n        if (!checkLifecycle(this.#frame, this.#expectedLifecycle)) {\n            return;\n        }\n        this.#lifecycleDeferred.resolve();\n        if (this.#hasSameDocumentNavigation) {\n            this.#sameDocumentNavigationDeferred.resolve(undefined);\n        }\n        if (this.#swapped || this.#frame._loaderId !== this.#initialLoaderId) {\n            this.#newDocumentNavigationDeferred.resolve(undefined);\n        }\n        function checkLifecycle(frame, expectedLifecycle) {\n            for (const event of expectedLifecycle) {\n                if (!frame._lifecycleEvents.has(event)) {\n                    return false;\n                }\n            }\n            for (const child of frame.childFrames()) {\n                if (child._hasStartedLoading &&\n                    !checkLifecycle(child, expectedLifecycle)) {\n                    return false;\n                }\n            }\n            return true;\n        }\n    }\n    dispose() {\n        this.#subscriptions.dispose();\n        this.#terminationDeferred.resolve(new Error('LifecycleWatcher disposed'));\n    }\n}\n//# sourceMappingURL=LifecycleWatcher.js.map","/**\n * @license\n * Copyright 2017 Google Inc.\n * SPDX-License-Identifier: Apache-2.0\n */\nvar __runInitializers = (this && this.__runInitializers) || function (thisArg, initializers, value) {\n    var useValue = arguments.length > 2;\n    for (var i = 0; i < initializers.length; i++) {\n        value = useValue ? initializers[i].call(thisArg, value) : initializers[i].call(thisArg);\n    }\n    return useValue ? value : void 0;\n};\nvar __esDecorate = (this && this.__esDecorate) || function (ctor, descriptorIn, decorators, contextIn, initializers, extraInitializers) {\n    function accept(f) { if (f !== void 0 && typeof f !== \"function\") throw new TypeError(\"Function expected\"); return f; }\n    var kind = contextIn.kind, key = kind === \"getter\" ? \"get\" : kind === \"setter\" ? \"set\" : \"value\";\n    var target = !descriptorIn && ctor ? contextIn[\"static\"] ? ctor : ctor.prototype : null;\n    var descriptor = descriptorIn || (target ? Object.getOwnPropertyDescriptor(target, contextIn.name) : {});\n    var _, done = false;\n    for (var i = decorators.length - 1; i >= 0; i--) {\n        var context = {};\n        for (var p in contextIn) context[p] = p === \"access\" ? {} : contextIn[p];\n        for (var p in contextIn.access) context.access[p] = contextIn.access[p];\n        context.addInitializer = function (f) { if (done) throw new TypeError(\"Cannot add initializers after decoration has completed\"); extraInitializers.push(accept(f || null)); };\n        var result = (0, decorators[i])(kind === \"accessor\" ? { get: descriptor.get, set: descriptor.set } : descriptor[key], context);\n        if (kind === \"accessor\") {\n            if (result === void 0) continue;\n            if (result === null || typeof result !== \"object\") throw new TypeError(\"Object expected\");\n            if (_ = accept(result.get)) descriptor.get = _;\n            if (_ = accept(result.set)) descriptor.set = _;\n            if (_ = accept(result.init)) initializers.unshift(_);\n        }\n        else if (_ = accept(result)) {\n            if (kind === \"field\") initializers.unshift(_);\n            else descriptor[key] = _;\n        }\n    }\n    if (target) Object.defineProperty(target, contextIn.name, descriptor);\n    done = true;\n};\nimport { Frame, FrameEvent, throwIfDetached } from '../api/Frame.js';\nimport { UnsupportedOperation } from '../common/Errors.js';\nimport { debugError } from '../common/util.js';\nimport { Deferred } from '../util/Deferred.js';\nimport { disposeSymbol } from '../util/disposable.js';\nimport { isErrorLike } from '../util/ErrorLike.js';\nimport { Accessibility } from './Accessibility.js';\nimport { FirefoxTargetManager } from './FirefoxTargetManager.js';\nimport { FrameManagerEvent } from './FrameManagerEvents.js';\nimport { IsolatedWorld } from './IsolatedWorld.js';\nimport { MAIN_WORLD, PUPPETEER_WORLD } from './IsolatedWorlds.js';\nimport { LifecycleWatcher, } from './LifecycleWatcher.js';\nimport { CDP_BINDING_PREFIX } from './utils.js';\n/**\n * @internal\n */\nlet CdpFrame = (() => {\n    let _classSuper = Frame;\n    let _instanceExtraInitializers = [];\n    let _goto_decorators;\n    let _waitForNavigation_decorators;\n    let _setContent_decorators;\n    let _addPreloadScript_decorators;\n    let _addExposedFunctionBinding_decorators;\n    let _removeExposedFunctionBinding_decorators;\n    let _waitForDevicePrompt_decorators;\n    return class CdpFrame extends _classSuper {\n        static {\n            const _metadata = typeof Symbol === \"function\" && Symbol.metadata ? Object.create(_classSuper[Symbol.metadata] ?? null) : void 0;\n            __esDecorate(this, null, _goto_decorators, { kind: \"method\", name: \"goto\", static: false, private: false, access: { has: obj => \"goto\" in obj, get: obj => obj.goto }, metadata: _metadata }, null, _instanceExtraInitializers);\n            __esDecorate(this, null, _waitForNavigation_decorators, { kind: \"method\", name: \"waitForNavigation\", static: false, private: false, access: { has: obj => \"waitForNavigation\" in obj, get: obj => obj.waitForNavigation }, metadata: _metadata }, null, _instanceExtraInitializers);\n            __esDecorate(this, null, _setContent_decorators, { kind: \"method\", name: \"setContent\", static: false, private: false, access: { has: obj => \"setContent\" in obj, get: obj => obj.setContent }, metadata: _metadata }, null, _instanceExtraInitializers);\n            __esDecorate(this, null, _addPreloadScript_decorators, { kind: \"method\", name: \"addPreloadScript\", static: false, private: false, access: { has: obj => \"addPreloadScript\" in obj, get: obj => obj.addPreloadScript }, metadata: _metadata }, null, _instanceExtraInitializers);\n            __esDecorate(this, null, _addExposedFunctionBinding_decorators, { kind: \"method\", name: \"addExposedFunctionBinding\", static: false, private: false, access: { has: obj => \"addExposedFunctionBinding\" in obj, get: obj => obj.addExposedFunctionBinding }, metadata: _metadata }, null, _instanceExtraInitializers);\n            __esDecorate(this, null, _removeExposedFunctionBinding_decorators, { kind: \"method\", name: \"removeExposedFunctionBinding\", static: false, private: false, access: { has: obj => \"removeExposedFunctionBinding\" in obj, get: obj => obj.removeExposedFunctionBinding }, metadata: _metadata }, null, _instanceExtraInitializers);\n            __esDecorate(this, null, _waitForDevicePrompt_decorators, { kind: \"method\", name: \"waitForDevicePrompt\", static: false, private: false, access: { has: obj => \"waitForDevicePrompt\" in obj, get: obj => obj.waitForDevicePrompt }, metadata: _metadata }, null, _instanceExtraInitializers);\n            if (_metadata) Object.defineProperty(this, Symbol.metadata, { enumerable: true, configurable: true, writable: true, value: _metadata });\n        }\n        #url = (__runInitializers(this, _instanceExtraInitializers), '');\n        #detached = false;\n        #client;\n        _frameManager;\n        _loaderId = '';\n        _lifecycleEvents = new Set();\n        _id;\n        _parentId;\n        accessibility;\n        worlds;\n        constructor(frameManager, frameId, parentFrameId, client) {\n            super();\n            this._frameManager = frameManager;\n            this.#url = '';\n            this._id = frameId;\n            this._parentId = parentFrameId;\n            this.#detached = false;\n            this.#client = client;\n            this._loaderId = '';\n            this.worlds = {\n                [MAIN_WORLD]: new IsolatedWorld(this, this._frameManager.timeoutSettings),\n                [PUPPETEER_WORLD]: new IsolatedWorld(this, this._frameManager.timeoutSettings),\n            };\n            this.accessibility = new Accessibility(this.worlds[MAIN_WORLD]);\n            this.on(FrameEvent.FrameSwappedByActivation, () => {\n                // Emulate loading process for swapped frames.\n                this._onLoadingStarted();\n                this._onLoadingStopped();\n            });\n            this.worlds[MAIN_WORLD].emitter.on('consoleapicalled', this.#onMainWorldConsoleApiCalled.bind(this));\n            this.worlds[MAIN_WORLD].emitter.on('bindingcalled', this.#onMainWorldBindingCalled.bind(this));\n        }\n        #onMainWorldConsoleApiCalled(event) {\n            this._frameManager.emit(FrameManagerEvent.ConsoleApiCalled, [\n                this.worlds[MAIN_WORLD],\n                event,\n            ]);\n        }\n        #onMainWorldBindingCalled(event) {\n            this._frameManager.emit(FrameManagerEvent.BindingCalled, [\n                this.worlds[MAIN_WORLD],\n                event,\n            ]);\n        }\n        /**\n         * This is used internally in DevTools.\n         *\n         * @internal\n         */\n        _client() {\n            return this.#client;\n        }\n        /**\n         * Updates the frame ID with the new ID. This happens when the main frame is\n         * replaced by a different frame.\n         */\n        updateId(id) {\n            this._id = id;\n        }\n        updateClient(client) {\n            this.#client = client;\n        }\n        page() {\n            return this._frameManager.page();\n        }\n        async goto(url, options = {}) {\n            const { referer = this._frameManager.networkManager.extraHTTPHeaders()['referer'], referrerPolicy = this._frameManager.networkManager.extraHTTPHeaders()['referer-policy'], waitUntil = ['load'], timeout = this._frameManager.timeoutSettings.navigationTimeout(), } = options;\n            let ensureNewDocumentNavigation = false;\n            const watcher = new LifecycleWatcher(this._frameManager.networkManager, this, waitUntil, timeout);\n            let error = await Deferred.race([\n                navigate(this.#client, url, referer, referrerPolicy, this._id),\n                watcher.terminationPromise(),\n            ]);\n            if (!error) {\n                error = await Deferred.race([\n                    watcher.terminationPromise(),\n                    ensureNewDocumentNavigation\n                        ? watcher.newDocumentNavigationPromise()\n                        : watcher.sameDocumentNavigationPromise(),\n                ]);\n            }\n            try {\n                if (error) {\n                    throw error;\n                }\n                return await watcher.navigationResponse();\n            }\n            finally {\n                watcher.dispose();\n            }\n            async function navigate(client, url, referrer, referrerPolicy, frameId) {\n                try {\n                    const response = await client.send('Page.navigate', {\n                        url,\n                        referrer,\n                        frameId,\n                        referrerPolicy,\n                    });\n                    ensureNewDocumentNavigation = !!response.loaderId;\n                    if (response.errorText === 'net::ERR_HTTP_RESPONSE_CODE_FAILURE') {\n                        return null;\n                    }\n                    return response.errorText\n                        ? new Error(`${response.errorText} at ${url}`)\n                        : null;\n                }\n                catch (error) {\n                    if (isErrorLike(error)) {\n                        return error;\n                    }\n                    throw error;\n                }\n            }\n        }\n        async waitForNavigation(options = {}) {\n            const { waitUntil = ['load'], timeout = this._frameManager.timeoutSettings.navigationTimeout(), signal, } = options;\n            const watcher = new LifecycleWatcher(this._frameManager.networkManager, this, waitUntil, timeout, signal);\n            const error = await Deferred.race([\n                watcher.terminationPromise(),\n                ...(options.ignoreSameDocumentNavigation\n                    ? []\n                    : [watcher.sameDocumentNavigationPromise()]),\n                watcher.newDocumentNavigationPromise(),\n            ]);\n            try {\n                if (error) {\n                    throw error;\n                }\n                const result = await Deferred.race([watcher.terminationPromise(), watcher.navigationResponse()]);\n                if (result instanceof Error) {\n                    throw error;\n                }\n                return result || null;\n            }\n            finally {\n                watcher.dispose();\n            }\n        }\n        get client() {\n            return this.#client;\n        }\n        mainRealm() {\n            return this.worlds[MAIN_WORLD];\n        }\n        isolatedRealm() {\n            return this.worlds[PUPPETEER_WORLD];\n        }\n        async setContent(html, options = {}) {\n            const { waitUntil = ['load'], timeout = this._frameManager.timeoutSettings.navigationTimeout(), } = options;\n            // We rely upon the fact that document.open() will reset frame lifecycle with \"init\"\n            // lifecycle event. @see https://crrev.com/608658\n            await this.setFrameContent(html);\n            const watcher = new LifecycleWatcher(this._frameManager.networkManager, this, waitUntil, timeout);\n            const error = await Deferred.race([\n                watcher.terminationPromise(),\n                watcher.lifecyclePromise(),\n            ]);\n            watcher.dispose();\n            if (error) {\n                throw error;\n            }\n        }\n        url() {\n            return this.#url;\n        }\n        parentFrame() {\n            return this._frameManager._frameTree.parentFrame(this._id) || null;\n        }\n        childFrames() {\n            return this._frameManager._frameTree.childFrames(this._id);\n        }\n        #deviceRequestPromptManager() {\n            return this._frameManager._deviceRequestPromptManager(this.#client);\n        }\n        async addPreloadScript(preloadScript) {\n            const parentFrame = this.parentFrame();\n            if (parentFrame && this.#client === parentFrame.client) {\n                return;\n            }\n            if (preloadScript.getIdForFrame(this)) {\n                return;\n            }\n            const { identifier } = await this.#client.send('Page.addScriptToEvaluateOnNewDocument', {\n                source: preloadScript.source,\n            });\n            preloadScript.setIdForFrame(this, identifier);\n        }\n        async addExposedFunctionBinding(binding) {\n            // If a frame has not started loading, it might never start. Rely on\n            // addScriptToEvaluateOnNewDocument in that case.\n            if (this !== this._frameManager.mainFrame() && !this._hasStartedLoading) {\n                return;\n            }\n            await Promise.all([\n                this.#client.send('Runtime.addBinding', {\n                    name: CDP_BINDING_PREFIX + binding.name,\n                }),\n                this.evaluate(binding.initSource).catch(debugError),\n            ]);\n        }\n        async removeExposedFunctionBinding(binding) {\n            // If a frame has not started loading, it might never start. Rely on\n            // addScriptToEvaluateOnNewDocument in that case.\n            if (this !== this._frameManager.mainFrame() && !this._hasStartedLoading) {\n                return;\n            }\n            await Promise.all([\n                this.#client.send('Runtime.removeBinding', {\n                    name: CDP_BINDING_PREFIX + binding.name,\n                }),\n                this.evaluate(name => {\n                    // Removes the dangling Puppeteer binding wrapper.\n                    // @ts-expect-error: In a different context.\n                    globalThis[name] = undefined;\n                }, binding.name).catch(debugError),\n            ]);\n        }\n        async waitForDevicePrompt(options = {}) {\n            return await this.#deviceRequestPromptManager().waitForDevicePrompt(options);\n        }\n        _navigated(framePayload) {\n            this._name = framePayload.name;\n            this.#url = `${framePayload.url}${framePayload.urlFragment || ''}`;\n        }\n        _navigatedWithinDocument(url) {\n            this.#url = url;\n        }\n        _onLifecycleEvent(loaderId, name) {\n            if (name === 'init') {\n                this._loaderId = loaderId;\n                this._lifecycleEvents.clear();\n            }\n            this._lifecycleEvents.add(name);\n        }\n        _onLoadingStopped() {\n            this._lifecycleEvents.add('DOMContentLoaded');\n            this._lifecycleEvents.add('load');\n        }\n        _onLoadingStarted() {\n            this._hasStartedLoading = true;\n        }\n        get detached() {\n            return this.#detached;\n        }\n        [(_goto_decorators = [throwIfDetached], _waitForNavigation_decorators = [throwIfDetached], _setContent_decorators = [throwIfDetached], _addPreloadScript_decorators = [throwIfDetached], _addExposedFunctionBinding_decorators = [throwIfDetached], _removeExposedFunctionBinding_decorators = [throwIfDetached], _waitForDevicePrompt_decorators = [throwIfDetached], disposeSymbol)]() {\n            if (this.#detached) {\n                return;\n            }\n            this.#detached = true;\n            this.worlds[MAIN_WORLD][disposeSymbol]();\n            this.worlds[PUPPETEER_WORLD][disposeSymbol]();\n        }\n        exposeFunction() {\n            throw new UnsupportedOperation();\n        }\n        async frameElement() {\n            const isFirefox = this.page().target()._targetManager() instanceof FirefoxTargetManager;\n            if (isFirefox) {\n                return await super.frameElement();\n            }\n            const parent = this.parentFrame();\n            if (!parent) {\n                return null;\n            }\n            const { backendNodeId } = await parent.client.send('DOM.getFrameOwner', {\n                frameId: this._id,\n            });\n            return (await parent\n                .mainRealm()\n                .adoptBackendNode(backendNodeId));\n        }\n    };\n})();\nexport { CdpFrame };\n//# sourceMappingURL=Frame.js.map","/**\n * @license\n * Copyright 2022 Google Inc.\n * SPDX-License-Identifier: Apache-2.0\n */\nimport { Deferred } from '../util/Deferred.js';\n/**\n * Keeps track of the page frame tree and it's is managed by\n * {@link FrameManager}. FrameTree uses frame IDs to reference frame and it\n * means that referenced frames might not be in the tree anymore. Thus, the tree\n * structure is eventually consistent.\n * @internal\n */\nexport class FrameTree {\n    #frames = new Map();\n    // frameID -> parentFrameID\n    #parentIds = new Map();\n    // frameID -> childFrameIDs\n    #childIds = new Map();\n    #mainFrame;\n    #isMainFrameStale = false;\n    #waitRequests = new Map();\n    getMainFrame() {\n        return this.#mainFrame;\n    }\n    getById(frameId) {\n        return this.#frames.get(frameId);\n    }\n    /**\n     * Returns a promise that is resolved once the frame with\n     * the given ID is added to the tree.\n     */\n    waitForFrame(frameId) {\n        const frame = this.getById(frameId);\n        if (frame) {\n            return Promise.resolve(frame);\n        }\n        const deferred = Deferred.create();\n        const callbacks = this.#waitRequests.get(frameId) || new Set();\n        callbacks.add(deferred);\n        return deferred.valueOrThrow();\n    }\n    frames() {\n        return Array.from(this.#frames.values());\n    }\n    addFrame(frame) {\n        this.#frames.set(frame._id, frame);\n        if (frame._parentId) {\n            this.#parentIds.set(frame._id, frame._parentId);\n            if (!this.#childIds.has(frame._parentId)) {\n                this.#childIds.set(frame._parentId, new Set());\n            }\n            this.#childIds.get(frame._parentId).add(frame._id);\n        }\n        else if (!this.#mainFrame || this.#isMainFrameStale) {\n            this.#mainFrame = frame;\n            this.#isMainFrameStale = false;\n        }\n        this.#waitRequests.get(frame._id)?.forEach(request => {\n            return request.resolve(frame);\n        });\n    }\n    removeFrame(frame) {\n        this.#frames.delete(frame._id);\n        this.#parentIds.delete(frame._id);\n        if (frame._parentId) {\n            this.#childIds.get(frame._parentId)?.delete(frame._id);\n        }\n        else {\n            this.#isMainFrameStale = true;\n        }\n    }\n    childFrames(frameId) {\n        const childIds = this.#childIds.get(frameId);\n        if (!childIds) {\n            return [];\n        }\n        return Array.from(childIds)\n            .map(id => {\n            return this.getById(id);\n        })\n            .filter((frame) => {\n            return frame !== undefined;\n        });\n    }\n    parentFrame(frameId) {\n        const parentId = this.#parentIds.get(frameId);\n        return parentId ? this.getById(parentId) : undefined;\n    }\n}\n//# sourceMappingURL=FrameTree.js.map","import { debugError, isString } from '../common/util.js';\nimport { assert } from '../util/assert.js';\nimport { typedArrayToBase64 } from '../util/encoding.js';\n/**\n * The default cooperative request interception resolution priority\n *\n * @public\n */\nexport const DEFAULT_INTERCEPT_RESOLUTION_PRIORITY = 0;\n/**\n * Represents an HTTP request sent by a page.\n * @remarks\n *\n * Whenever the page sends a request, such as for a network resource, the\n * following events are emitted by Puppeteer's `page`:\n *\n * - `request`: emitted when the request is issued by the page.\n * - `requestfinished` - emitted when the response body is downloaded and the\n *   request is complete.\n *\n * If request fails at some point, then instead of `requestfinished` event the\n * `requestfailed` event is emitted.\n *\n * All of these events provide an instance of `HTTPRequest` representing the\n * request that occurred:\n *\n * ```\n * page.on('request', request => ...)\n * ```\n *\n * NOTE: HTTP Error responses, such as 404 or 503, are still successful\n * responses from HTTP standpoint, so request will complete with\n * `requestfinished` event.\n *\n * If request gets a 'redirect' response, the request is successfully finished\n * with the `requestfinished` event, and a new request is issued to a\n * redirected url.\n *\n * @public\n */\nexport class HTTPRequest {\n    /**\n     * @internal\n     */\n    _interceptionId;\n    /**\n     * @internal\n     */\n    _failureText = null;\n    /**\n     * @internal\n     */\n    _response = null;\n    /**\n     * @internal\n     */\n    _fromMemoryCache = false;\n    /**\n     * @internal\n     */\n    _redirectChain = [];\n    /**\n     * @internal\n     */\n    interception = {\n        enabled: false,\n        handled: false,\n        handlers: [],\n        resolutionState: {\n            action: InterceptResolutionAction.None,\n        },\n        requestOverrides: {},\n        response: null,\n        abortReason: null,\n    };\n    /**\n     * @internal\n     */\n    constructor() { }\n    /**\n     * The `ContinueRequestOverrides` that will be used\n     * if the interception is allowed to continue (ie, `abort()` and\n     * `respond()` aren't called).\n     */\n    continueRequestOverrides() {\n        assert(this.interception.enabled, 'Request Interception is not enabled!');\n        return this.interception.requestOverrides;\n    }\n    /**\n     * The `ResponseForRequest` that gets used if the\n     * interception is allowed to respond (ie, `abort()` is not called).\n     */\n    responseForRequest() {\n        assert(this.interception.enabled, 'Request Interception is not enabled!');\n        return this.interception.response;\n    }\n    /**\n     * The most recent reason for aborting the request\n     */\n    abortErrorReason() {\n        assert(this.interception.enabled, 'Request Interception is not enabled!');\n        return this.interception.abortReason;\n    }\n    /**\n     * An InterceptResolutionState object describing the current resolution\n     * action and priority.\n     *\n     * InterceptResolutionState contains:\n     * action: InterceptResolutionAction\n     * priority?: number\n     *\n     * InterceptResolutionAction is one of: `abort`, `respond`, `continue`,\n     * `disabled`, `none`, or `already-handled`.\n     */\n    interceptResolutionState() {\n        if (!this.interception.enabled) {\n            return { action: InterceptResolutionAction.Disabled };\n        }\n        if (this.interception.handled) {\n            return { action: InterceptResolutionAction.AlreadyHandled };\n        }\n        return { ...this.interception.resolutionState };\n    }\n    /**\n     * Is `true` if the intercept resolution has already been handled,\n     * `false` otherwise.\n     */\n    isInterceptResolutionHandled() {\n        return this.interception.handled;\n    }\n    /**\n     * Adds an async request handler to the processing queue.\n     * Deferred handlers are not guaranteed to execute in any particular order,\n     * but they are guaranteed to resolve before the request interception\n     * is finalized.\n     */\n    enqueueInterceptAction(pendingHandler) {\n        this.interception.handlers.push(pendingHandler);\n    }\n    /**\n     * Awaits pending interception handlers and then decides how to fulfill\n     * the request interception.\n     */\n    async finalizeInterceptions() {\n        await this.interception.handlers.reduce((promiseChain, interceptAction) => {\n            return promiseChain.then(interceptAction);\n        }, Promise.resolve());\n        this.interception.handlers = [];\n        const { action } = this.interceptResolutionState();\n        switch (action) {\n            case 'abort':\n                return await this._abort(this.interception.abortReason);\n            case 'respond':\n                if (this.interception.response === null) {\n                    throw new Error('Response is missing for the interception');\n                }\n                return await this._respond(this.interception.response);\n            case 'continue':\n                return await this._continue(this.interception.requestOverrides);\n        }\n    }\n    #canBeIntercepted() {\n        return !this.url().startsWith('data:') && !this._fromMemoryCache;\n    }\n    /**\n     * Continues request with optional request overrides.\n     *\n     * @example\n     *\n     * ```ts\n     * await page.setRequestInterception(true);\n     * page.on('request', request => {\n     *   // Override headers\n     *   const headers = Object.assign({}, request.headers(), {\n     *     foo: 'bar', // set \"foo\" header\n     *     origin: undefined, // remove \"origin\" header\n     *   });\n     *   request.continue({headers});\n     * });\n     * ```\n     *\n     * @param overrides - optional overrides to apply to the request.\n     * @param priority - If provided, intercept is resolved using cooperative\n     * handling rules. Otherwise, intercept is resolved immediately.\n     *\n     * @remarks\n     *\n     * To use this, request interception should be enabled with\n     * {@link Page.setRequestInterception}.\n     *\n     * Exception is immediately thrown if the request interception is not enabled.\n     */\n    async continue(overrides = {}, priority) {\n        if (!this.#canBeIntercepted()) {\n            return;\n        }\n        assert(this.interception.enabled, 'Request Interception is not enabled!');\n        assert(!this.interception.handled, 'Request is already handled!');\n        if (priority === undefined) {\n            return await this._continue(overrides);\n        }\n        this.interception.requestOverrides = overrides;\n        if (this.interception.resolutionState.priority === undefined ||\n            priority > this.interception.resolutionState.priority) {\n            this.interception.resolutionState = {\n                action: InterceptResolutionAction.Continue,\n                priority,\n            };\n            return;\n        }\n        if (priority === this.interception.resolutionState.priority) {\n            if (this.interception.resolutionState.action === 'abort' ||\n                this.interception.resolutionState.action === 'respond') {\n                return;\n            }\n            this.interception.resolutionState.action =\n                InterceptResolutionAction.Continue;\n        }\n        return;\n    }\n    /**\n     * Fulfills a request with the given response.\n     *\n     * @example\n     * An example of fulfilling all requests with 404 responses:\n     *\n     * ```ts\n     * await page.setRequestInterception(true);\n     * page.on('request', request => {\n     *   request.respond({\n     *     status: 404,\n     *     contentType: 'text/plain',\n     *     body: 'Not Found!',\n     *   });\n     * });\n     * ```\n     *\n     * NOTE: Mocking responses for dataURL requests is not supported.\n     * Calling `request.respond` for a dataURL request is a noop.\n     *\n     * @param response - the response to fulfill the request with.\n     * @param priority - If provided, intercept is resolved using\n     * cooperative handling rules. Otherwise, intercept is resolved\n     * immediately.\n     *\n     * @remarks\n     *\n     * To use this, request\n     * interception should be enabled with {@link Page.setRequestInterception}.\n     *\n     * Exception is immediately thrown if the request interception is not enabled.\n     */\n    async respond(response, priority) {\n        if (!this.#canBeIntercepted()) {\n            return;\n        }\n        assert(this.interception.enabled, 'Request Interception is not enabled!');\n        assert(!this.interception.handled, 'Request is already handled!');\n        if (priority === undefined) {\n            return await this._respond(response);\n        }\n        this.interception.response = response;\n        if (this.interception.resolutionState.priority === undefined ||\n            priority > this.interception.resolutionState.priority) {\n            this.interception.resolutionState = {\n                action: InterceptResolutionAction.Respond,\n                priority,\n            };\n            return;\n        }\n        if (priority === this.interception.resolutionState.priority) {\n            if (this.interception.resolutionState.action === 'abort') {\n                return;\n            }\n            this.interception.resolutionState.action =\n                InterceptResolutionAction.Respond;\n        }\n    }\n    /**\n     * Aborts a request.\n     *\n     * @param errorCode - optional error code to provide.\n     * @param priority - If provided, intercept is resolved using\n     * cooperative handling rules. Otherwise, intercept is resolved\n     * immediately.\n     *\n     * @remarks\n     *\n     * To use this, request interception should be enabled with\n     * {@link Page.setRequestInterception}. If it is not enabled, this method will\n     * throw an exception immediately.\n     */\n    async abort(errorCode = 'failed', priority) {\n        if (!this.#canBeIntercepted()) {\n            return;\n        }\n        const errorReason = errorReasons[errorCode];\n        assert(errorReason, 'Unknown error code: ' + errorCode);\n        assert(this.interception.enabled, 'Request Interception is not enabled!');\n        assert(!this.interception.handled, 'Request is already handled!');\n        if (priority === undefined) {\n            return await this._abort(errorReason);\n        }\n        this.interception.abortReason = errorReason;\n        if (this.interception.resolutionState.priority === undefined ||\n            priority >= this.interception.resolutionState.priority) {\n            this.interception.resolutionState = {\n                action: InterceptResolutionAction.Abort,\n                priority,\n            };\n            return;\n        }\n    }\n    /**\n     * @internal\n     */\n    static getResponse(body) {\n        // Needed to get the correct byteLength\n        const byteBody = isString(body)\n            ? new TextEncoder().encode(body)\n            : body;\n        return {\n            contentLength: byteBody.byteLength,\n            base64: typedArrayToBase64(byteBody),\n        };\n    }\n}\n/**\n * @public\n */\nexport var InterceptResolutionAction;\n(function (InterceptResolutionAction) {\n    InterceptResolutionAction[\"Abort\"] = \"abort\";\n    InterceptResolutionAction[\"Respond\"] = \"respond\";\n    InterceptResolutionAction[\"Continue\"] = \"continue\";\n    InterceptResolutionAction[\"Disabled\"] = \"disabled\";\n    InterceptResolutionAction[\"None\"] = \"none\";\n    InterceptResolutionAction[\"AlreadyHandled\"] = \"already-handled\";\n})(InterceptResolutionAction || (InterceptResolutionAction = {}));\n/**\n * @internal\n */\nexport function headersArray(headers) {\n    const result = [];\n    for (const name in headers) {\n        const value = headers[name];\n        if (!Object.is(value, undefined)) {\n            const values = Array.isArray(value) ? value : [value];\n            result.push(...values.map(value => {\n                return { name, value: value + '' };\n            }));\n        }\n    }\n    return result;\n}\n/**\n * @internal\n *\n * @remarks\n * List taken from {@link https://www.iana.org/assignments/http-status-codes/http-status-codes.xhtml}\n * with extra 306 and 418 codes.\n */\nexport const STATUS_TEXTS = {\n    '100': 'Continue',\n    '101': 'Switching Protocols',\n    '102': 'Processing',\n    '103': 'Early Hints',\n    '200': 'OK',\n    '201': 'Created',\n    '202': 'Accepted',\n    '203': 'Non-Authoritative Information',\n    '204': 'No Content',\n    '205': 'Reset Content',\n    '206': 'Partial Content',\n    '207': 'Multi-Status',\n    '208': 'Already Reported',\n    '226': 'IM Used',\n    '300': 'Multiple Choices',\n    '301': 'Moved Permanently',\n    '302': 'Found',\n    '303': 'See Other',\n    '304': 'Not Modified',\n    '305': 'Use Proxy',\n    '306': 'Switch Proxy',\n    '307': 'Temporary Redirect',\n    '308': 'Permanent Redirect',\n    '400': 'Bad Request',\n    '401': 'Unauthorized',\n    '402': 'Payment Required',\n    '403': 'Forbidden',\n    '404': 'Not Found',\n    '405': 'Method Not Allowed',\n    '406': 'Not Acceptable',\n    '407': 'Proxy Authentication Required',\n    '408': 'Request Timeout',\n    '409': 'Conflict',\n    '410': 'Gone',\n    '411': 'Length Required',\n    '412': 'Precondition Failed',\n    '413': 'Payload Too Large',\n    '414': 'URI Too Long',\n    '415': 'Unsupported Media Type',\n    '416': 'Range Not Satisfiable',\n    '417': 'Expectation Failed',\n    '418': \"I'm a teapot\",\n    '421': 'Misdirected Request',\n    '422': 'Unprocessable Entity',\n    '423': 'Locked',\n    '424': 'Failed Dependency',\n    '425': 'Too Early',\n    '426': 'Upgrade Required',\n    '428': 'Precondition Required',\n    '429': 'Too Many Requests',\n    '431': 'Request Header Fields Too Large',\n    '451': 'Unavailable For Legal Reasons',\n    '500': 'Internal Server Error',\n    '501': 'Not Implemented',\n    '502': 'Bad Gateway',\n    '503': 'Service Unavailable',\n    '504': 'Gateway Timeout',\n    '505': 'HTTP Version Not Supported',\n    '506': 'Variant Also Negotiates',\n    '507': 'Insufficient Storage',\n    '508': 'Loop Detected',\n    '510': 'Not Extended',\n    '511': 'Network Authentication Required',\n};\nconst errorReasons = {\n    aborted: 'Aborted',\n    accessdenied: 'AccessDenied',\n    addressunreachable: 'AddressUnreachable',\n    blockedbyclient: 'BlockedByClient',\n    blockedbyresponse: 'BlockedByResponse',\n    connectionaborted: 'ConnectionAborted',\n    connectionclosed: 'ConnectionClosed',\n    connectionfailed: 'ConnectionFailed',\n    connectionrefused: 'ConnectionRefused',\n    connectionreset: 'ConnectionReset',\n    internetdisconnected: 'InternetDisconnected',\n    namenotresolved: 'NameNotResolved',\n    timedout: 'TimedOut',\n    failed: 'Failed',\n};\n/**\n * @internal\n */\nexport function handleError(error) {\n    // Firefox throws an invalid argument error with a message starting with\n    // 'Expected \"header\" [...]'.\n    if (error.originalMessage.includes('Invalid header') ||\n        error.originalMessage.includes('Expected \"header\"') ||\n        // WebDriver BiDi error for invalid values, for example, headers.\n        error.originalMessage.includes('invalid argument')) {\n        throw error;\n    }\n    // In certain cases, protocol will return error if the request was\n    // already canceled or the page was closed. We should tolerate these\n    // errors.\n    debugError(error);\n}\n//# sourceMappingURL=HTTPRequest.js.map","import { headersArray, HTTPRequest, STATUS_TEXTS, handleError, } from '../api/HTTPRequest.js';\nimport { debugError } from '../common/util.js';\nimport { stringToBase64 } from '../util/encoding.js';\n/**\n * @internal\n */\nexport class CdpHTTPRequest extends HTTPRequest {\n    id;\n    #client;\n    #isNavigationRequest;\n    #url;\n    #resourceType;\n    #method;\n    #hasPostData = false;\n    #postData;\n    #headers = {};\n    #frame;\n    #initiator;\n    get client() {\n        return this.#client;\n    }\n    constructor(client, frame, interceptionId, allowInterception, data, redirectChain) {\n        super();\n        this.#client = client;\n        this.id = data.requestId;\n        this.#isNavigationRequest =\n            data.requestId === data.loaderId && data.type === 'Document';\n        this._interceptionId = interceptionId;\n        this.#url = data.request.url;\n        this.#resourceType = (data.type || 'other').toLowerCase();\n        this.#method = data.request.method;\n        this.#postData = data.request.postData;\n        this.#hasPostData = data.request.hasPostData ?? false;\n        this.#frame = frame;\n        this._redirectChain = redirectChain;\n        this.#initiator = data.initiator;\n        this.interception.enabled = allowInterception;\n        for (const [key, value] of Object.entries(data.request.headers)) {\n            this.#headers[key.toLowerCase()] = value;\n        }\n    }\n    url() {\n        return this.#url;\n    }\n    resourceType() {\n        return this.#resourceType;\n    }\n    method() {\n        return this.#method;\n    }\n    postData() {\n        return this.#postData;\n    }\n    hasPostData() {\n        return this.#hasPostData;\n    }\n    async fetchPostData() {\n        try {\n            const result = await this.#client.send('Network.getRequestPostData', {\n                requestId: this.id,\n            });\n            return result.postData;\n        }\n        catch (err) {\n            debugError(err);\n            return;\n        }\n    }\n    headers() {\n        return this.#headers;\n    }\n    response() {\n        return this._response;\n    }\n    frame() {\n        return this.#frame;\n    }\n    isNavigationRequest() {\n        return this.#isNavigationRequest;\n    }\n    initiator() {\n        return this.#initiator;\n    }\n    redirectChain() {\n        return this._redirectChain.slice();\n    }\n    failure() {\n        if (!this._failureText) {\n            return null;\n        }\n        return {\n            errorText: this._failureText,\n        };\n    }\n    /**\n     * @internal\n     */\n    async _continue(overrides = {}) {\n        const { url, method, postData, headers } = overrides;\n        this.interception.handled = true;\n        const postDataBinaryBase64 = postData\n            ? stringToBase64(postData)\n            : undefined;\n        if (this._interceptionId === undefined) {\n            throw new Error('HTTPRequest is missing _interceptionId needed for Fetch.continueRequest');\n        }\n        await this.#client\n            .send('Fetch.continueRequest', {\n            requestId: this._interceptionId,\n            url,\n            method,\n            postData: postDataBinaryBase64,\n            headers: headers ? headersArray(headers) : undefined,\n        })\n            .catch(error => {\n            this.interception.handled = false;\n            return handleError(error);\n        });\n    }\n    async _respond(response) {\n        this.interception.handled = true;\n        let parsedBody;\n        if (response.body) {\n            parsedBody = HTTPRequest.getResponse(response.body);\n        }\n        const responseHeaders = {};\n        if (response.headers) {\n            for (const header of Object.keys(response.headers)) {\n                const value = response.headers[header];\n                responseHeaders[header.toLowerCase()] = Array.isArray(value)\n                    ? value.map(item => {\n                        return String(item);\n                    })\n                    : String(value);\n            }\n        }\n        if (response.contentType) {\n            responseHeaders['content-type'] = response.contentType;\n        }\n        if (parsedBody?.contentLength && !('content-length' in responseHeaders)) {\n            responseHeaders['content-length'] = String(parsedBody.contentLength);\n        }\n        const status = response.status || 200;\n        if (this._interceptionId === undefined) {\n            throw new Error('HTTPRequest is missing _interceptionId needed for Fetch.fulfillRequest');\n        }\n        await this.#client\n            .send('Fetch.fulfillRequest', {\n            requestId: this._interceptionId,\n            responseCode: status,\n            responsePhrase: STATUS_TEXTS[status],\n            responseHeaders: headersArray(responseHeaders),\n            body: parsedBody?.base64,\n        })\n            .catch(error => {\n            this.interception.handled = false;\n            return handleError(error);\n        });\n    }\n    async _abort(errorReason) {\n        this.interception.handled = true;\n        if (this._interceptionId === undefined) {\n            throw new Error('HTTPRequest is missing _interceptionId needed for Fetch.failRequest');\n        }\n        await this.#client\n            .send('Fetch.failRequest', {\n            requestId: this._interceptionId,\n            errorReason: errorReason || 'Failed',\n        })\n            .catch(handleError);\n    }\n}\n//# sourceMappingURL=HTTPRequest.js.map","/**\n * @license\n * Copyright 2023 Google Inc.\n * SPDX-License-Identifier: Apache-2.0\n */\n/**\n * The HTTPResponse class represents responses which are received by the\n * {@link Page} class.\n *\n * @public\n */\nexport class HTTPResponse {\n    /**\n     * @internal\n     */\n    constructor() { }\n    /**\n     * True if the response was successful (status in the range 200-299).\n     */\n    ok() {\n        // TODO: document === 0 case?\n        const status = this.status();\n        return status === 0 || (status >= 200 && status <= 299);\n    }\n    /**\n     * {@inheritDoc HTTPResponse.content}\n     */\n    async buffer() {\n        const content = await this.content();\n        return Buffer.from(content);\n    }\n    /**\n     * Promise which resolves to a text (utf8) representation of response body.\n     */\n    async text() {\n        const content = await this.content();\n        return new TextDecoder().decode(content);\n    }\n    /**\n     * Promise which resolves to a JSON representation of response body.\n     *\n     * @remarks\n     *\n     * This method will throw if the response body is not parsable via\n     * `JSON.parse`.\n     */\n    async json() {\n        const content = await this.text();\n        return JSON.parse(content);\n    }\n}\n//# sourceMappingURL=HTTPResponse.js.map","/**\n * @license\n * Copyright 2020 Google Inc.\n * SPDX-License-Identifier: Apache-2.0\n */\n/**\n * The SecurityDetails class represents the security details of a\n * response that was received over a secure connection.\n *\n * @public\n */\nexport class SecurityDetails {\n    #subjectName;\n    #issuer;\n    #validFrom;\n    #validTo;\n    #protocol;\n    #sanList;\n    /**\n     * @internal\n     */\n    constructor(securityPayload) {\n        this.#subjectName = securityPayload.subjectName;\n        this.#issuer = securityPayload.issuer;\n        this.#validFrom = securityPayload.validFrom;\n        this.#validTo = securityPayload.validTo;\n        this.#protocol = securityPayload.protocol;\n        this.#sanList = securityPayload.sanList;\n    }\n    /**\n     * The name of the issuer of the certificate.\n     */\n    issuer() {\n        return this.#issuer;\n    }\n    /**\n     * {@link https://en.wikipedia.org/wiki/Unix_time | Unix timestamp}\n     * marking the start of the certificate's validity.\n     */\n    validFrom() {\n        return this.#validFrom;\n    }\n    /**\n     * {@link https://en.wikipedia.org/wiki/Unix_time | Unix timestamp}\n     * marking the end of the certificate's validity.\n     */\n    validTo() {\n        return this.#validTo;\n    }\n    /**\n     * The security protocol being used, e.g. \"TLS 1.2\".\n     */\n    protocol() {\n        return this.#protocol;\n    }\n    /**\n     * The name of the subject to which the certificate was issued.\n     */\n    subjectName() {\n        return this.#subjectName;\n    }\n    /**\n     * The list of {@link https://en.wikipedia.org/wiki/Subject_Alternative_Name | subject alternative names (SANs)} of the certificate.\n     */\n    subjectAlternativeNames() {\n        return this.#sanList;\n    }\n}\n//# sourceMappingURL=SecurityDetails.js.map","import { HTTPResponse } from '../api/HTTPResponse.js';\nimport { ProtocolError } from '../common/Errors.js';\nimport { SecurityDetails } from '../common/SecurityDetails.js';\nimport { Deferred } from '../util/Deferred.js';\nimport { stringToTypedArray } from '../util/encoding.js';\n/**\n * @internal\n */\nexport class CdpHTTPResponse extends HTTPResponse {\n    #client;\n    #request;\n    #contentPromise = null;\n    #bodyLoadedDeferred = Deferred.create();\n    #remoteAddress;\n    #status;\n    #statusText;\n    #url;\n    #fromDiskCache;\n    #fromServiceWorker;\n    #headers = {};\n    #securityDetails;\n    #timing;\n    constructor(client, request, responsePayload, extraInfo) {\n        super();\n        this.#client = client;\n        this.#request = request;\n        this.#remoteAddress = {\n            ip: responsePayload.remoteIPAddress,\n            port: responsePayload.remotePort,\n        };\n        this.#statusText =\n            this.#parseStatusTextFromExtraInfo(extraInfo) ||\n                responsePayload.statusText;\n        this.#url = request.url();\n        this.#fromDiskCache = !!responsePayload.fromDiskCache;\n        this.#fromServiceWorker = !!responsePayload.fromServiceWorker;\n        this.#status = extraInfo ? extraInfo.statusCode : responsePayload.status;\n        const headers = extraInfo ? extraInfo.headers : responsePayload.headers;\n        for (const [key, value] of Object.entries(headers)) {\n            this.#headers[key.toLowerCase()] = value;\n        }\n        this.#securityDetails = responsePayload.securityDetails\n            ? new SecurityDetails(responsePayload.securityDetails)\n            : null;\n        this.#timing = responsePayload.timing || null;\n    }\n    #parseStatusTextFromExtraInfo(extraInfo) {\n        if (!extraInfo || !extraInfo.headersText) {\n            return;\n        }\n        const firstLine = extraInfo.headersText.split('\\r', 1)[0];\n        if (!firstLine) {\n            return;\n        }\n        const match = firstLine.match(/[^ ]* [^ ]* (.*)/);\n        if (!match) {\n            return;\n        }\n        const statusText = match[1];\n        if (!statusText) {\n            return;\n        }\n        return statusText;\n    }\n    _resolveBody(err) {\n        if (err) {\n            return this.#bodyLoadedDeferred.reject(err);\n        }\n        return this.#bodyLoadedDeferred.resolve();\n    }\n    remoteAddress() {\n        return this.#remoteAddress;\n    }\n    url() {\n        return this.#url;\n    }\n    status() {\n        return this.#status;\n    }\n    statusText() {\n        return this.#statusText;\n    }\n    headers() {\n        return this.#headers;\n    }\n    securityDetails() {\n        return this.#securityDetails;\n    }\n    timing() {\n        return this.#timing;\n    }\n    content() {\n        if (!this.#contentPromise) {\n            this.#contentPromise = this.#bodyLoadedDeferred\n                .valueOrThrow()\n                .then(async () => {\n                try {\n                    const response = await this.#client.send('Network.getResponseBody', {\n                        requestId: this.#request.id,\n                    });\n                    return stringToTypedArray(response.body, response.base64Encoded);\n                }\n                catch (error) {\n                    if (error instanceof ProtocolError &&\n                        error.originalMessage ===\n                            'No resource with given identifier found') {\n                        throw new ProtocolError('Could not load body for this request. This might happen if the request is a preflight request.');\n                    }\n                    throw error;\n                }\n            });\n        }\n        return this.#contentPromise;\n    }\n    request() {\n        return this.#request;\n    }\n    fromCache() {\n        return this.#fromDiskCache || this.#request._fromMemoryCache;\n    }\n    fromServiceWorker() {\n        return this.#fromServiceWorker;\n    }\n    frame() {\n        return this.#request.frame();\n    }\n}\n//# sourceMappingURL=HTTPResponse.js.map","/**\n * @license\n * Copyright 2022 Google Inc.\n * SPDX-License-Identifier: Apache-2.0\n */\nimport { CdpHTTPRequest } from './HTTPRequest.js';\n/**\n * Helper class to track network events by request ID\n *\n * @internal\n */\nexport class NetworkEventManager {\n    /**\n     * There are four possible orders of events:\n     * A. `_onRequestWillBeSent`\n     * B. `_onRequestWillBeSent`, `_onRequestPaused`\n     * C. `_onRequestPaused`, `_onRequestWillBeSent`\n     * D. `_onRequestPaused`, `_onRequestWillBeSent`, `_onRequestPaused`,\n     * `_onRequestWillBeSent`, `_onRequestPaused`, `_onRequestPaused`\n     * (see crbug.com/1196004)\n     *\n     * For `_onRequest` we need the event from `_onRequestWillBeSent` and\n     * optionally the `interceptionId` from `_onRequestPaused`.\n     *\n     * If request interception is disabled, call `_onRequest` once per call to\n     * `_onRequestWillBeSent`.\n     * If request interception is enabled, call `_onRequest` once per call to\n     * `_onRequestPaused` (once per `interceptionId`).\n     *\n     * Events are stored to allow for subsequent events to call `_onRequest`.\n     *\n     * Note that (chains of) redirect requests have the same `requestId` (!) as\n     * the original request. We have to anticipate series of events like these:\n     * A. `_onRequestWillBeSent`,\n     * `_onRequestWillBeSent`, ...\n     * B. `_onRequestWillBeSent`, `_onRequestPaused`,\n     * `_onRequestWillBeSent`, `_onRequestPaused`, ...\n     * C. `_onRequestWillBeSent`, `_onRequestPaused`,\n     * `_onRequestPaused`, `_onRequestWillBeSent`, ...\n     * D. `_onRequestPaused`, `_onRequestWillBeSent`,\n     * `_onRequestPaused`, `_onRequestWillBeSent`, `_onRequestPaused`,\n     * `_onRequestWillBeSent`, `_onRequestPaused`, `_onRequestPaused`, ...\n     * (see crbug.com/1196004)\n     */\n    #requestWillBeSentMap = new Map();\n    #requestPausedMap = new Map();\n    #httpRequestsMap = new Map();\n    /*\n     * The below maps are used to reconcile Network.responseReceivedExtraInfo\n     * events with their corresponding request. Each response and redirect\n     * response gets an ExtraInfo event, and we don't know which will come first.\n     * This means that we have to store a Response or an ExtraInfo for each\n     * response, and emit the event when we get both of them. In addition, to\n     * handle redirects, we have to make them Arrays to represent the chain of\n     * events.\n     */\n    #responseReceivedExtraInfoMap = new Map();\n    #queuedRedirectInfoMap = new Map();\n    #queuedEventGroupMap = new Map();\n    forget(networkRequestId) {\n        this.#requestWillBeSentMap.delete(networkRequestId);\n        this.#requestPausedMap.delete(networkRequestId);\n        this.#queuedEventGroupMap.delete(networkRequestId);\n        this.#queuedRedirectInfoMap.delete(networkRequestId);\n        this.#responseReceivedExtraInfoMap.delete(networkRequestId);\n    }\n    responseExtraInfo(networkRequestId) {\n        if (!this.#responseReceivedExtraInfoMap.has(networkRequestId)) {\n            this.#responseReceivedExtraInfoMap.set(networkRequestId, []);\n        }\n        return this.#responseReceivedExtraInfoMap.get(networkRequestId);\n    }\n    queuedRedirectInfo(fetchRequestId) {\n        if (!this.#queuedRedirectInfoMap.has(fetchRequestId)) {\n            this.#queuedRedirectInfoMap.set(fetchRequestId, []);\n        }\n        return this.#queuedRedirectInfoMap.get(fetchRequestId);\n    }\n    queueRedirectInfo(fetchRequestId, redirectInfo) {\n        this.queuedRedirectInfo(fetchRequestId).push(redirectInfo);\n    }\n    takeQueuedRedirectInfo(fetchRequestId) {\n        return this.queuedRedirectInfo(fetchRequestId).shift();\n    }\n    inFlightRequestsCount() {\n        let inFlightRequestCounter = 0;\n        for (const request of this.#httpRequestsMap.values()) {\n            if (!request.response()) {\n                inFlightRequestCounter++;\n            }\n        }\n        return inFlightRequestCounter;\n    }\n    storeRequestWillBeSent(networkRequestId, event) {\n        this.#requestWillBeSentMap.set(networkRequestId, event);\n    }\n    getRequestWillBeSent(networkRequestId) {\n        return this.#requestWillBeSentMap.get(networkRequestId);\n    }\n    forgetRequestWillBeSent(networkRequestId) {\n        this.#requestWillBeSentMap.delete(networkRequestId);\n    }\n    getRequestPaused(networkRequestId) {\n        return this.#requestPausedMap.get(networkRequestId);\n    }\n    forgetRequestPaused(networkRequestId) {\n        this.#requestPausedMap.delete(networkRequestId);\n    }\n    storeRequestPaused(networkRequestId, event) {\n        this.#requestPausedMap.set(networkRequestId, event);\n    }\n    getRequest(networkRequestId) {\n        return this.#httpRequestsMap.get(networkRequestId);\n    }\n    storeRequest(networkRequestId, request) {\n        this.#httpRequestsMap.set(networkRequestId, request);\n    }\n    forgetRequest(networkRequestId) {\n        this.#httpRequestsMap.delete(networkRequestId);\n    }\n    getQueuedEventGroup(networkRequestId) {\n        return this.#queuedEventGroupMap.get(networkRequestId);\n    }\n    queueEventGroup(networkRequestId, event) {\n        this.#queuedEventGroupMap.set(networkRequestId, event);\n    }\n    forgetQueuedEventGroup(networkRequestId) {\n        this.#queuedEventGroupMap.delete(networkRequestId);\n    }\n    printState() {\n        function replacer(_key, value) {\n            if (value instanceof Map) {\n                return {\n                    dataType: 'Map',\n                    value: Array.from(value.entries()), // or with spread: value: [...value]\n                };\n            }\n            else if (value instanceof CdpHTTPRequest) {\n                return {\n                    dataType: 'CdpHTTPRequest',\n                    value: `${value.id}: ${value.url()}`,\n                };\n            }\n            {\n                return value;\n            }\n        }\n        console.log('httpRequestsMap', JSON.stringify(this.#httpRequestsMap, replacer, 2));\n        console.log('requestWillBeSentMap', JSON.stringify(this.#requestWillBeSentMap, replacer, 2));\n        console.log('requestWillBeSentMap', JSON.stringify(this.#responseReceivedExtraInfoMap, replacer, 2));\n        console.log('requestWillBeSentMap', JSON.stringify(this.#requestPausedMap, replacer, 2));\n    }\n}\n//# sourceMappingURL=NetworkEventManager.js.map","/**\n * @license\n * Copyright 2017 Google Inc.\n * SPDX-License-Identifier: Apache-2.0\n */\nimport { CDPSessionEvent } from '../api/CDPSession.js';\nimport { EventEmitter } from '../common/EventEmitter.js';\nimport { NetworkManagerEvent, } from '../common/NetworkManagerEvents.js';\nimport { debugError, isString } from '../common/util.js';\nimport { assert } from '../util/assert.js';\nimport { DisposableStack } from '../util/disposable.js';\nimport { CdpHTTPRequest } from './HTTPRequest.js';\nimport { CdpHTTPResponse } from './HTTPResponse.js';\nimport { NetworkEventManager, } from './NetworkEventManager.js';\n/**\n * @internal\n */\nexport class NetworkManager extends EventEmitter {\n    #frameManager;\n    #networkEventManager = new NetworkEventManager();\n    #extraHTTPHeaders;\n    #credentials = null;\n    #attemptedAuthentications = new Set();\n    #userRequestInterceptionEnabled = false;\n    #protocolRequestInterceptionEnabled = false;\n    #userCacheDisabled;\n    #emulatedNetworkConditions;\n    #userAgent;\n    #userAgentMetadata;\n    #handlers = [\n        ['Fetch.requestPaused', this.#onRequestPaused],\n        ['Fetch.authRequired', this.#onAuthRequired],\n        ['Network.requestWillBeSent', this.#onRequestWillBeSent],\n        ['Network.requestServedFromCache', this.#onRequestServedFromCache],\n        ['Network.responseReceived', this.#onResponseReceived],\n        ['Network.loadingFinished', this.#onLoadingFinished],\n        ['Network.loadingFailed', this.#onLoadingFailed],\n        ['Network.responseReceivedExtraInfo', this.#onResponseReceivedExtraInfo],\n        [CDPSessionEvent.Disconnected, this.#removeClient],\n    ];\n    #clients = new Map();\n    constructor(frameManager) {\n        super();\n        this.#frameManager = frameManager;\n    }\n    async addClient(client) {\n        if (this.#clients.has(client)) {\n            return;\n        }\n        const subscriptions = new DisposableStack();\n        this.#clients.set(client, subscriptions);\n        const clientEmitter = subscriptions.use(new EventEmitter(client));\n        for (const [event, handler] of this.#handlers) {\n            clientEmitter.on(event, (arg) => {\n                return handler.bind(this)(client, arg);\n            });\n        }\n        await Promise.all([\n            client.send('Network.enable'),\n            this.#applyExtraHTTPHeaders(client),\n            this.#applyNetworkConditions(client),\n            this.#applyProtocolCacheDisabled(client),\n            this.#applyProtocolRequestInterception(client),\n            this.#applyUserAgent(client),\n        ]);\n    }\n    async #removeClient(client) {\n        this.#clients.get(client)?.dispose();\n        this.#clients.delete(client);\n    }\n    async authenticate(credentials) {\n        this.#credentials = credentials;\n        const enabled = this.#userRequestInterceptionEnabled || !!this.#credentials;\n        if (enabled === this.#protocolRequestInterceptionEnabled) {\n            return;\n        }\n        this.#protocolRequestInterceptionEnabled = enabled;\n        await this.#applyToAllClients(this.#applyProtocolRequestInterception.bind(this));\n    }\n    async setExtraHTTPHeaders(headers) {\n        const extraHTTPHeaders = {};\n        for (const [key, value] of Object.entries(headers)) {\n            assert(isString(value), `Expected value of header \"${key}\" to be String, but \"${typeof value}\" is found.`);\n            extraHTTPHeaders[key.toLowerCase()] = value;\n        }\n        this.#extraHTTPHeaders = extraHTTPHeaders;\n        await this.#applyToAllClients(this.#applyExtraHTTPHeaders.bind(this));\n    }\n    async #applyExtraHTTPHeaders(client) {\n        if (this.#extraHTTPHeaders === undefined) {\n            return;\n        }\n        await client.send('Network.setExtraHTTPHeaders', {\n            headers: this.#extraHTTPHeaders,\n        });\n    }\n    extraHTTPHeaders() {\n        return Object.assign({}, this.#extraHTTPHeaders);\n    }\n    inFlightRequestsCount() {\n        return this.#networkEventManager.inFlightRequestsCount();\n    }\n    async setOfflineMode(value) {\n        if (!this.#emulatedNetworkConditions) {\n            this.#emulatedNetworkConditions = {\n                offline: false,\n                upload: -1,\n                download: -1,\n                latency: 0,\n            };\n        }\n        this.#emulatedNetworkConditions.offline = value;\n        await this.#applyToAllClients(this.#applyNetworkConditions.bind(this));\n    }\n    async emulateNetworkConditions(networkConditions) {\n        if (!this.#emulatedNetworkConditions) {\n            this.#emulatedNetworkConditions = {\n                offline: false,\n                upload: -1,\n                download: -1,\n                latency: 0,\n            };\n        }\n        this.#emulatedNetworkConditions.upload = networkConditions\n            ? networkConditions.upload\n            : -1;\n        this.#emulatedNetworkConditions.download = networkConditions\n            ? networkConditions.download\n            : -1;\n        this.#emulatedNetworkConditions.latency = networkConditions\n            ? networkConditions.latency\n            : 0;\n        await this.#applyToAllClients(this.#applyNetworkConditions.bind(this));\n    }\n    async #applyToAllClients(fn) {\n        await Promise.all(Array.from(this.#clients.keys()).map(client => {\n            return fn(client);\n        }));\n    }\n    async #applyNetworkConditions(client) {\n        if (this.#emulatedNetworkConditions === undefined) {\n            return;\n        }\n        await client.send('Network.emulateNetworkConditions', {\n            offline: this.#emulatedNetworkConditions.offline,\n            latency: this.#emulatedNetworkConditions.latency,\n            uploadThroughput: this.#emulatedNetworkConditions.upload,\n            downloadThroughput: this.#emulatedNetworkConditions.download,\n        });\n    }\n    async setUserAgent(userAgent, userAgentMetadata) {\n        this.#userAgent = userAgent;\n        this.#userAgentMetadata = userAgentMetadata;\n        await this.#applyToAllClients(this.#applyUserAgent.bind(this));\n    }\n    async #applyUserAgent(client) {\n        if (this.#userAgent === undefined) {\n            return;\n        }\n        await client.send('Network.setUserAgentOverride', {\n            userAgent: this.#userAgent,\n            userAgentMetadata: this.#userAgentMetadata,\n        });\n    }\n    async setCacheEnabled(enabled) {\n        this.#userCacheDisabled = !enabled;\n        await this.#applyToAllClients(this.#applyProtocolCacheDisabled.bind(this));\n    }\n    async setRequestInterception(value) {\n        this.#userRequestInterceptionEnabled = value;\n        const enabled = this.#userRequestInterceptionEnabled || !!this.#credentials;\n        if (enabled === this.#protocolRequestInterceptionEnabled) {\n            return;\n        }\n        this.#protocolRequestInterceptionEnabled = enabled;\n        await this.#applyToAllClients(this.#applyProtocolRequestInterception.bind(this));\n    }\n    async #applyProtocolRequestInterception(client) {\n        if (this.#userCacheDisabled === undefined) {\n            this.#userCacheDisabled = false;\n        }\n        if (this.#protocolRequestInterceptionEnabled) {\n            await Promise.all([\n                this.#applyProtocolCacheDisabled(client),\n                client.send('Fetch.enable', {\n                    handleAuthRequests: true,\n                    patterns: [{ urlPattern: '*' }],\n                }),\n            ]);\n        }\n        else {\n            await Promise.all([\n                this.#applyProtocolCacheDisabled(client),\n                client.send('Fetch.disable'),\n            ]);\n        }\n    }\n    async #applyProtocolCacheDisabled(client) {\n        if (this.#userCacheDisabled === undefined) {\n            return;\n        }\n        await client.send('Network.setCacheDisabled', {\n            cacheDisabled: this.#userCacheDisabled,\n        });\n    }\n    #onRequestWillBeSent(client, event) {\n        // Request interception doesn't happen for data URLs with Network Service.\n        if (this.#userRequestInterceptionEnabled &&\n            !event.request.url.startsWith('data:')) {\n            const { requestId: networkRequestId } = event;\n            this.#networkEventManager.storeRequestWillBeSent(networkRequestId, event);\n            /**\n             * CDP may have sent a Fetch.requestPaused event already. Check for it.\n             */\n            const requestPausedEvent = this.#networkEventManager.getRequestPaused(networkRequestId);\n            if (requestPausedEvent) {\n                const { requestId: fetchRequestId } = requestPausedEvent;\n                this.#patchRequestEventHeaders(event, requestPausedEvent);\n                this.#onRequest(client, event, fetchRequestId);\n                this.#networkEventManager.forgetRequestPaused(networkRequestId);\n            }\n            return;\n        }\n        this.#onRequest(client, event, undefined);\n    }\n    #onAuthRequired(client, event) {\n        let response = 'Default';\n        if (this.#attemptedAuthentications.has(event.requestId)) {\n            response = 'CancelAuth';\n        }\n        else if (this.#credentials) {\n            response = 'ProvideCredentials';\n            this.#attemptedAuthentications.add(event.requestId);\n        }\n        const { username, password } = this.#credentials || {\n            username: undefined,\n            password: undefined,\n        };\n        client\n            .send('Fetch.continueWithAuth', {\n            requestId: event.requestId,\n            authChallengeResponse: { response, username, password },\n        })\n            .catch(debugError);\n    }\n    /**\n     * CDP may send a Fetch.requestPaused without or before a\n     * Network.requestWillBeSent\n     *\n     * CDP may send multiple Fetch.requestPaused\n     * for the same Network.requestWillBeSent.\n     */\n    #onRequestPaused(client, event) {\n        if (!this.#userRequestInterceptionEnabled &&\n            this.#protocolRequestInterceptionEnabled) {\n            client\n                .send('Fetch.continueRequest', {\n                requestId: event.requestId,\n            })\n                .catch(debugError);\n        }\n        const { networkId: networkRequestId, requestId: fetchRequestId } = event;\n        if (!networkRequestId) {\n            this.#onRequestWithoutNetworkInstrumentation(client, event);\n            return;\n        }\n        const requestWillBeSentEvent = (() => {\n            const requestWillBeSentEvent = this.#networkEventManager.getRequestWillBeSent(networkRequestId);\n            // redirect requests have the same `requestId`,\n            if (requestWillBeSentEvent &&\n                (requestWillBeSentEvent.request.url !== event.request.url ||\n                    requestWillBeSentEvent.request.method !== event.request.method)) {\n                this.#networkEventManager.forgetRequestWillBeSent(networkRequestId);\n                return;\n            }\n            return requestWillBeSentEvent;\n        })();\n        if (requestWillBeSentEvent) {\n            this.#patchRequestEventHeaders(requestWillBeSentEvent, event);\n            this.#onRequest(client, requestWillBeSentEvent, fetchRequestId);\n        }\n        else {\n            this.#networkEventManager.storeRequestPaused(networkRequestId, event);\n        }\n    }\n    #patchRequestEventHeaders(requestWillBeSentEvent, requestPausedEvent) {\n        requestWillBeSentEvent.request.headers = {\n            ...requestWillBeSentEvent.request.headers,\n            // includes extra headers, like: Accept, Origin\n            ...requestPausedEvent.request.headers,\n        };\n    }\n    #onRequestWithoutNetworkInstrumentation(client, event) {\n        // If an event has no networkId it should not have any network events. We\n        // still want to dispatch it for the interception by the user.\n        const frame = event.frameId\n            ? this.#frameManager.frame(event.frameId)\n            : null;\n        const request = new CdpHTTPRequest(client, frame, event.requestId, this.#userRequestInterceptionEnabled, event, []);\n        this.emit(NetworkManagerEvent.Request, request);\n        void request.finalizeInterceptions();\n    }\n    #onRequest(client, event, fetchRequestId, fromMemoryCache = false) {\n        let redirectChain = [];\n        if (event.redirectResponse) {\n            // We want to emit a response and requestfinished for the\n            // redirectResponse, but we can't do so unless we have a\n            // responseExtraInfo ready to pair it up with. If we don't have any\n            // responseExtraInfos saved in our queue, they we have to wait until\n            // the next one to emit response and requestfinished, *and* we should\n            // also wait to emit this Request too because it should come after the\n            // response/requestfinished.\n            let redirectResponseExtraInfo = null;\n            if (event.redirectHasExtraInfo) {\n                redirectResponseExtraInfo = this.#networkEventManager\n                    .responseExtraInfo(event.requestId)\n                    .shift();\n                if (!redirectResponseExtraInfo) {\n                    this.#networkEventManager.queueRedirectInfo(event.requestId, {\n                        event,\n                        fetchRequestId,\n                    });\n                    return;\n                }\n            }\n            const request = this.#networkEventManager.getRequest(event.requestId);\n            // If we connect late to the target, we could have missed the\n            // requestWillBeSent event.\n            if (request) {\n                this.#handleRequestRedirect(client, request, event.redirectResponse, redirectResponseExtraInfo);\n                redirectChain = request._redirectChain;\n            }\n        }\n        const frame = event.frameId\n            ? this.#frameManager.frame(event.frameId)\n            : null;\n        const request = new CdpHTTPRequest(client, frame, fetchRequestId, this.#userRequestInterceptionEnabled, event, redirectChain);\n        request._fromMemoryCache = fromMemoryCache;\n        this.#networkEventManager.storeRequest(event.requestId, request);\n        this.emit(NetworkManagerEvent.Request, request);\n        void request.finalizeInterceptions();\n    }\n    #onRequestServedFromCache(client, event) {\n        const requestWillBeSentEvent = this.#networkEventManager.getRequestWillBeSent(event.requestId);\n        let request = this.#networkEventManager.getRequest(event.requestId);\n        // Requests served from memory cannot be intercepted.\n        if (request) {\n            request._fromMemoryCache = true;\n        }\n        // If request ended up being served from cache, we need to convert\n        // requestWillBeSentEvent to a HTTP request.\n        if (!request && requestWillBeSentEvent) {\n            this.#onRequest(client, requestWillBeSentEvent, undefined, true);\n            request = this.#networkEventManager.getRequest(event.requestId);\n        }\n        if (!request) {\n            debugError(new Error(`Request ${event.requestId} was served from cache but we could not find the corresponding request object`));\n            return;\n        }\n        this.emit(NetworkManagerEvent.RequestServedFromCache, request);\n    }\n    #handleRequestRedirect(client, request, responsePayload, extraInfo) {\n        const response = new CdpHTTPResponse(client, request, responsePayload, extraInfo);\n        request._response = response;\n        request._redirectChain.push(request);\n        response._resolveBody(new Error('Response body is unavailable for redirect responses'));\n        this.#forgetRequest(request, false);\n        this.emit(NetworkManagerEvent.Response, response);\n        this.emit(NetworkManagerEvent.RequestFinished, request);\n    }\n    #emitResponseEvent(client, responseReceived, extraInfo) {\n        const request = this.#networkEventManager.getRequest(responseReceived.requestId);\n        // FileUpload sends a response without a matching request.\n        if (!request) {\n            return;\n        }\n        const extraInfos = this.#networkEventManager.responseExtraInfo(responseReceived.requestId);\n        if (extraInfos.length) {\n            debugError(new Error('Unexpected extraInfo events for request ' +\n                responseReceived.requestId));\n        }\n        // Chromium sends wrong extraInfo events for responses served from cache.\n        // See https://github.com/puppeteer/puppeteer/issues/9965 and\n        // https://crbug.com/1340398.\n        if (responseReceived.response.fromDiskCache) {\n            extraInfo = null;\n        }\n        const response = new CdpHTTPResponse(client, request, responseReceived.response, extraInfo);\n        request._response = response;\n        this.emit(NetworkManagerEvent.Response, response);\n    }\n    #onResponseReceived(client, event) {\n        const request = this.#networkEventManager.getRequest(event.requestId);\n        let extraInfo = null;\n        if (request && !request._fromMemoryCache && event.hasExtraInfo) {\n            extraInfo = this.#networkEventManager\n                .responseExtraInfo(event.requestId)\n                .shift();\n            if (!extraInfo) {\n                // Wait until we get the corresponding ExtraInfo event.\n                this.#networkEventManager.queueEventGroup(event.requestId, {\n                    responseReceivedEvent: event,\n                });\n                return;\n            }\n        }\n        this.#emitResponseEvent(client, event, extraInfo);\n    }\n    #onResponseReceivedExtraInfo(client, event) {\n        // We may have skipped a redirect response/request pair due to waiting for\n        // this ExtraInfo event. If so, continue that work now that we have the\n        // request.\n        const redirectInfo = this.#networkEventManager.takeQueuedRedirectInfo(event.requestId);\n        if (redirectInfo) {\n            this.#networkEventManager.responseExtraInfo(event.requestId).push(event);\n            this.#onRequest(client, redirectInfo.event, redirectInfo.fetchRequestId);\n            return;\n        }\n        // We may have skipped response and loading events because we didn't have\n        // this ExtraInfo event yet. If so, emit those events now.\n        const queuedEvents = this.#networkEventManager.getQueuedEventGroup(event.requestId);\n        if (queuedEvents) {\n            this.#networkEventManager.forgetQueuedEventGroup(event.requestId);\n            this.#emitResponseEvent(client, queuedEvents.responseReceivedEvent, event);\n            if (queuedEvents.loadingFinishedEvent) {\n                this.#emitLoadingFinished(queuedEvents.loadingFinishedEvent);\n            }\n            if (queuedEvents.loadingFailedEvent) {\n                this.#emitLoadingFailed(queuedEvents.loadingFailedEvent);\n            }\n            return;\n        }\n        // Wait until we get another event that can use this ExtraInfo event.\n        this.#networkEventManager.responseExtraInfo(event.requestId).push(event);\n    }\n    #forgetRequest(request, events) {\n        const requestId = request.id;\n        const interceptionId = request._interceptionId;\n        this.#networkEventManager.forgetRequest(requestId);\n        interceptionId !== undefined &&\n            this.#attemptedAuthentications.delete(interceptionId);\n        if (events) {\n            this.#networkEventManager.forget(requestId);\n        }\n    }\n    #onLoadingFinished(_client, event) {\n        // If the response event for this request is still waiting on a\n        // corresponding ExtraInfo event, then wait to emit this event too.\n        const queuedEvents = this.#networkEventManager.getQueuedEventGroup(event.requestId);\n        if (queuedEvents) {\n            queuedEvents.loadingFinishedEvent = event;\n        }\n        else {\n            this.#emitLoadingFinished(event);\n        }\n    }\n    #emitLoadingFinished(event) {\n        const request = this.#networkEventManager.getRequest(event.requestId);\n        // For certain requestIds we never receive requestWillBeSent event.\n        // @see https://crbug.com/750469\n        if (!request) {\n            return;\n        }\n        // Under certain conditions we never get the Network.responseReceived\n        // event from protocol. @see https://crbug.com/883475\n        if (request.response()) {\n            request.response()?._resolveBody();\n        }\n        this.#forgetRequest(request, true);\n        this.emit(NetworkManagerEvent.RequestFinished, request);\n    }\n    #onLoadingFailed(_client, event) {\n        // If the response event for this request is still waiting on a\n        // corresponding ExtraInfo event, then wait to emit this event too.\n        const queuedEvents = this.#networkEventManager.getQueuedEventGroup(event.requestId);\n        if (queuedEvents) {\n            queuedEvents.loadingFailedEvent = event;\n        }\n        else {\n            this.#emitLoadingFailed(event);\n        }\n    }\n    #emitLoadingFailed(event) {\n        const request = this.#networkEventManager.getRequest(event.requestId);\n        // For certain requestIds we never receive requestWillBeSent event.\n        // @see https://crbug.com/750469\n        if (!request) {\n            return;\n        }\n        request._failureText = event.errorText;\n        const response = request.response();\n        if (response) {\n            response._resolveBody();\n        }\n        this.#forgetRequest(request, true);\n        this.emit(NetworkManagerEvent.RequestFailed, request);\n    }\n}\n//# sourceMappingURL=NetworkManager.js.map","/**\n * @license\n * Copyright 2017 Google Inc.\n * SPDX-License-Identifier: Apache-2.0\n */\nimport { CDPSessionEvent } from '../api/CDPSession.js';\nimport { FrameEvent } from '../api/Frame.js';\nimport { EventEmitter } from '../common/EventEmitter.js';\nimport { debugError, PuppeteerURL, UTILITY_WORLD_NAME } from '../common/util.js';\nimport { assert } from '../util/assert.js';\nimport { Deferred } from '../util/Deferred.js';\nimport { disposeSymbol } from '../util/disposable.js';\nimport { isErrorLike } from '../util/ErrorLike.js';\nimport { CdpPreloadScript } from './CdpPreloadScript.js';\nimport { CdpCDPSession } from './CDPSession.js';\nimport { isTargetClosedError } from './Connection.js';\nimport { DeviceRequestPromptManager } from './DeviceRequestPrompt.js';\nimport { ExecutionContext } from './ExecutionContext.js';\nimport { CdpFrame } from './Frame.js';\nimport { FrameManagerEvent } from './FrameManagerEvents.js';\nimport { FrameTree } from './FrameTree.js';\nimport { MAIN_WORLD, PUPPETEER_WORLD } from './IsolatedWorlds.js';\nimport { NetworkManager } from './NetworkManager.js';\nconst TIME_FOR_WAITING_FOR_SWAP = 100; // ms.\n/**\n * A frame manager manages the frames for a given {@link Page | page}.\n *\n * @internal\n */\nexport class FrameManager extends EventEmitter {\n    #page;\n    #networkManager;\n    #timeoutSettings;\n    #isolatedWorlds = new Set();\n    #client;\n    #scriptsToEvaluateOnNewDocument = new Map();\n    #bindings = new Set();\n    _frameTree = new FrameTree();\n    /**\n     * Set of frame IDs stored to indicate if a frame has received a\n     * frameNavigated event so that frame tree responses could be ignored as the\n     * frameNavigated event usually contains the latest information.\n     */\n    #frameNavigatedReceived = new Set();\n    #deviceRequestPromptManagerMap = new WeakMap();\n    #frameTreeHandled;\n    get timeoutSettings() {\n        return this.#timeoutSettings;\n    }\n    get networkManager() {\n        return this.#networkManager;\n    }\n    get client() {\n        return this.#client;\n    }\n    constructor(client, page, timeoutSettings) {\n        super();\n        this.#client = client;\n        this.#page = page;\n        this.#networkManager = new NetworkManager(this);\n        this.#timeoutSettings = timeoutSettings;\n        this.setupEventListeners(this.#client);\n        client.once(CDPSessionEvent.Disconnected, () => {\n            this.#onClientDisconnect().catch(debugError);\n        });\n    }\n    /**\n     * Called when the frame's client is disconnected. We don't know if the\n     * disconnect means that the frame is removed or if it will be replaced by a\n     * new frame. Therefore, we wait for a swap event.\n     */\n    async #onClientDisconnect() {\n        const mainFrame = this._frameTree.getMainFrame();\n        if (!mainFrame) {\n            return;\n        }\n        for (const child of mainFrame.childFrames()) {\n            this.#removeFramesRecursively(child);\n        }\n        const swapped = Deferred.create({\n            timeout: TIME_FOR_WAITING_FOR_SWAP,\n            message: 'Frame was not swapped',\n        });\n        mainFrame.once(FrameEvent.FrameSwappedByActivation, () => {\n            swapped.resolve();\n        });\n        try {\n            await swapped.valueOrThrow();\n        }\n        catch (err) {\n            this.#removeFramesRecursively(mainFrame);\n        }\n    }\n    /**\n     * When the main frame is replaced by another main frame,\n     * we maintain the main frame object identity while updating\n     * its frame tree and ID.\n     */\n    async swapFrameTree(client) {\n        this.#client = client;\n        assert(this.#client instanceof CdpCDPSession, 'CDPSession is not an instance of CDPSessionImpl.');\n        const frame = this._frameTree.getMainFrame();\n        if (frame) {\n            this.#frameNavigatedReceived.add(this.#client._target()._targetId);\n            this._frameTree.removeFrame(frame);\n            frame.updateId(this.#client._target()._targetId);\n            this._frameTree.addFrame(frame);\n            frame.updateClient(client);\n        }\n        this.setupEventListeners(client);\n        client.once(CDPSessionEvent.Disconnected, () => {\n            this.#onClientDisconnect().catch(debugError);\n        });\n        await this.initialize(client, frame);\n        await this.#networkManager.addClient(client);\n        if (frame) {\n            frame.emit(FrameEvent.FrameSwappedByActivation, undefined);\n        }\n    }\n    async registerSpeculativeSession(client) {\n        await this.#networkManager.addClient(client);\n    }\n    setupEventListeners(session) {\n        session.on('Page.frameAttached', async (event) => {\n            await this.#frameTreeHandled?.valueOrThrow();\n            this.#onFrameAttached(session, event.frameId, event.parentFrameId);\n        });\n        session.on('Page.frameNavigated', async (event) => {\n            this.#frameNavigatedReceived.add(event.frame.id);\n            await this.#frameTreeHandled?.valueOrThrow();\n            void this.#onFrameNavigated(event.frame, event.type);\n        });\n        session.on('Page.navigatedWithinDocument', async (event) => {\n            await this.#frameTreeHandled?.valueOrThrow();\n            this.#onFrameNavigatedWithinDocument(event.frameId, event.url);\n        });\n        session.on('Page.frameDetached', async (event) => {\n            await this.#frameTreeHandled?.valueOrThrow();\n            this.#onFrameDetached(event.frameId, event.reason);\n        });\n        session.on('Page.frameStartedLoading', async (event) => {\n            await this.#frameTreeHandled?.valueOrThrow();\n            this.#onFrameStartedLoading(event.frameId);\n        });\n        session.on('Page.frameStoppedLoading', async (event) => {\n            await this.#frameTreeHandled?.valueOrThrow();\n            this.#onFrameStoppedLoading(event.frameId);\n        });\n        session.on('Runtime.executionContextCreated', async (event) => {\n            await this.#frameTreeHandled?.valueOrThrow();\n            this.#onExecutionContextCreated(event.context, session);\n        });\n        session.on('Page.lifecycleEvent', async (event) => {\n            await this.#frameTreeHandled?.valueOrThrow();\n            this.#onLifecycleEvent(event);\n        });\n    }\n    async initialize(client, frame) {\n        try {\n            this.#frameTreeHandled?.resolve();\n            this.#frameTreeHandled = Deferred.create();\n            // We need to schedule all these commands while the target is paused,\n            // therefore, it needs to happen synchroniously. At the same time we\n            // should not start processing execution context and frame events before\n            // we received the initial information about the frame tree.\n            await Promise.all([\n                this.#networkManager.addClient(client),\n                client.send('Page.enable'),\n                client.send('Page.getFrameTree').then(({ frameTree }) => {\n                    this.#handleFrameTree(client, frameTree);\n                    this.#frameTreeHandled?.resolve();\n                }),\n                client.send('Page.setLifecycleEventsEnabled', { enabled: true }),\n                client.send('Runtime.enable').then(() => {\n                    return this.#createIsolatedWorld(client, UTILITY_WORLD_NAME);\n                }),\n                ...(frame\n                    ? Array.from(this.#scriptsToEvaluateOnNewDocument.values())\n                    : []).map(script => {\n                    return frame?.addPreloadScript(script);\n                }),\n                ...(frame ? Array.from(this.#bindings.values()) : []).map(binding => {\n                    return frame?.addExposedFunctionBinding(binding);\n                }),\n            ]);\n        }\n        catch (error) {\n            this.#frameTreeHandled?.resolve();\n            // The target might have been closed before the initialization finished.\n            if (isErrorLike(error) && isTargetClosedError(error)) {\n                return;\n            }\n            throw error;\n        }\n    }\n    page() {\n        return this.#page;\n    }\n    mainFrame() {\n        const mainFrame = this._frameTree.getMainFrame();\n        assert(mainFrame, 'Requesting main frame too early!');\n        return mainFrame;\n    }\n    frames() {\n        return Array.from(this._frameTree.frames());\n    }\n    frame(frameId) {\n        return this._frameTree.getById(frameId) || null;\n    }\n    async addExposedFunctionBinding(binding) {\n        this.#bindings.add(binding);\n        await Promise.all(this.frames().map(async (frame) => {\n            return await frame.addExposedFunctionBinding(binding);\n        }));\n    }\n    async removeExposedFunctionBinding(binding) {\n        this.#bindings.delete(binding);\n        await Promise.all(this.frames().map(async (frame) => {\n            return await frame.removeExposedFunctionBinding(binding);\n        }));\n    }\n    async evaluateOnNewDocument(source) {\n        const { identifier } = await this.mainFrame()\n            ._client()\n            .send('Page.addScriptToEvaluateOnNewDocument', {\n            source,\n        });\n        const preloadScript = new CdpPreloadScript(this.mainFrame(), identifier, source);\n        this.#scriptsToEvaluateOnNewDocument.set(identifier, preloadScript);\n        await Promise.all(this.frames().map(async (frame) => {\n            return await frame.addPreloadScript(preloadScript);\n        }));\n        return { identifier };\n    }\n    async removeScriptToEvaluateOnNewDocument(identifier) {\n        const preloadScript = this.#scriptsToEvaluateOnNewDocument.get(identifier);\n        if (!preloadScript) {\n            throw new Error(`Script to evaluate on new document with id ${identifier} not found`);\n        }\n        this.#scriptsToEvaluateOnNewDocument.delete(identifier);\n        await Promise.all(this.frames().map(frame => {\n            const identifier = preloadScript.getIdForFrame(frame);\n            if (!identifier) {\n                return;\n            }\n            return frame\n                ._client()\n                .send('Page.removeScriptToEvaluateOnNewDocument', {\n                identifier,\n            })\n                .catch(debugError);\n        }));\n    }\n    onAttachedToTarget(target) {\n        if (target._getTargetInfo().type !== 'iframe') {\n            return;\n        }\n        const frame = this.frame(target._getTargetInfo().targetId);\n        if (frame) {\n            frame.updateClient(target._session());\n        }\n        this.setupEventListeners(target._session());\n        void this.initialize(target._session(), frame);\n    }\n    _deviceRequestPromptManager(client) {\n        let manager = this.#deviceRequestPromptManagerMap.get(client);\n        if (manager === undefined) {\n            manager = new DeviceRequestPromptManager(client, this.#timeoutSettings);\n            this.#deviceRequestPromptManagerMap.set(client, manager);\n        }\n        return manager;\n    }\n    #onLifecycleEvent(event) {\n        const frame = this.frame(event.frameId);\n        if (!frame) {\n            return;\n        }\n        frame._onLifecycleEvent(event.loaderId, event.name);\n        this.emit(FrameManagerEvent.LifecycleEvent, frame);\n        frame.emit(FrameEvent.LifecycleEvent, undefined);\n    }\n    #onFrameStartedLoading(frameId) {\n        const frame = this.frame(frameId);\n        if (!frame) {\n            return;\n        }\n        frame._onLoadingStarted();\n    }\n    #onFrameStoppedLoading(frameId) {\n        const frame = this.frame(frameId);\n        if (!frame) {\n            return;\n        }\n        frame._onLoadingStopped();\n        this.emit(FrameManagerEvent.LifecycleEvent, frame);\n        frame.emit(FrameEvent.LifecycleEvent, undefined);\n    }\n    #handleFrameTree(session, frameTree) {\n        if (frameTree.frame.parentId) {\n            this.#onFrameAttached(session, frameTree.frame.id, frameTree.frame.parentId);\n        }\n        if (!this.#frameNavigatedReceived.has(frameTree.frame.id)) {\n            void this.#onFrameNavigated(frameTree.frame, 'Navigation');\n        }\n        else {\n            this.#frameNavigatedReceived.delete(frameTree.frame.id);\n        }\n        if (!frameTree.childFrames) {\n            return;\n        }\n        for (const child of frameTree.childFrames) {\n            this.#handleFrameTree(session, child);\n        }\n    }\n    #onFrameAttached(session, frameId, parentFrameId) {\n        let frame = this.frame(frameId);\n        if (frame) {\n            const parentFrame = this.frame(parentFrameId);\n            if (session && parentFrame && frame.client !== parentFrame?.client) {\n                // If an OOP iframes becomes a normal iframe\n                // again it is first attached to the parent frame before the\n                // target is removed.\n                frame.updateClient(session);\n            }\n            return;\n        }\n        frame = new CdpFrame(this, frameId, parentFrameId, session);\n        this._frameTree.addFrame(frame);\n        this.emit(FrameManagerEvent.FrameAttached, frame);\n    }\n    async #onFrameNavigated(framePayload, navigationType) {\n        const frameId = framePayload.id;\n        const isMainFrame = !framePayload.parentId;\n        let frame = this._frameTree.getById(frameId);\n        // Detach all child frames first.\n        if (frame) {\n            for (const child of frame.childFrames()) {\n                this.#removeFramesRecursively(child);\n            }\n        }\n        // Update or create main frame.\n        if (isMainFrame) {\n            if (frame) {\n                // Update frame id to retain frame identity on cross-process navigation.\n                this._frameTree.removeFrame(frame);\n                frame._id = frameId;\n            }\n            else {\n                // Initial main frame navigation.\n                frame = new CdpFrame(this, frameId, undefined, this.#client);\n            }\n            this._frameTree.addFrame(frame);\n        }\n        frame = await this._frameTree.waitForFrame(frameId);\n        frame._navigated(framePayload);\n        this.emit(FrameManagerEvent.FrameNavigated, frame);\n        frame.emit(FrameEvent.FrameNavigated, navigationType);\n    }\n    async #createIsolatedWorld(session, name) {\n        const key = `${session.id()}:${name}`;\n        if (this.#isolatedWorlds.has(key)) {\n            return;\n        }\n        await session.send('Page.addScriptToEvaluateOnNewDocument', {\n            source: `//# sourceURL=${PuppeteerURL.INTERNAL_URL}`,\n            worldName: name,\n        });\n        await Promise.all(this.frames()\n            .filter(frame => {\n            return frame.client === session;\n        })\n            .map(frame => {\n            // Frames might be removed before we send this, so we don't want to\n            // throw an error.\n            return session\n                .send('Page.createIsolatedWorld', {\n                frameId: frame._id,\n                worldName: name,\n                grantUniveralAccess: true,\n            })\n                .catch(debugError);\n        }));\n        this.#isolatedWorlds.add(key);\n    }\n    #onFrameNavigatedWithinDocument(frameId, url) {\n        const frame = this.frame(frameId);\n        if (!frame) {\n            return;\n        }\n        frame._navigatedWithinDocument(url);\n        this.emit(FrameManagerEvent.FrameNavigatedWithinDocument, frame);\n        frame.emit(FrameEvent.FrameNavigatedWithinDocument, undefined);\n        this.emit(FrameManagerEvent.FrameNavigated, frame);\n        frame.emit(FrameEvent.FrameNavigated, 'Navigation');\n    }\n    #onFrameDetached(frameId, reason) {\n        const frame = this.frame(frameId);\n        if (!frame) {\n            return;\n        }\n        switch (reason) {\n            case 'remove':\n                // Only remove the frame if the reason for the detached event is\n                // an actual removement of the frame.\n                // For frames that become OOP iframes, the reason would be 'swap'.\n                this.#removeFramesRecursively(frame);\n                break;\n            case 'swap':\n                this.emit(FrameManagerEvent.FrameSwapped, frame);\n                frame.emit(FrameEvent.FrameSwapped, undefined);\n                break;\n        }\n    }\n    #onExecutionContextCreated(contextPayload, session) {\n        const auxData = contextPayload.auxData;\n        const frameId = auxData && auxData.frameId;\n        const frame = typeof frameId === 'string' ? this.frame(frameId) : undefined;\n        let world;\n        if (frame) {\n            // Only care about execution contexts created for the current session.\n            if (frame.client !== session) {\n                return;\n            }\n            if (contextPayload.auxData && contextPayload.auxData['isDefault']) {\n                world = frame.worlds[MAIN_WORLD];\n            }\n            else if (contextPayload.name === UTILITY_WORLD_NAME) {\n                // In case of multiple sessions to the same target, there's a race between\n                // connections so we might end up creating multiple isolated worlds.\n                // We can use either.\n                world = frame.worlds[PUPPETEER_WORLD];\n            }\n        }\n        // If there is no world, the context is not meant to be handled by us.\n        if (!world) {\n            return;\n        }\n        const context = new ExecutionContext(frame?.client || this.#client, contextPayload, world);\n        world.setContext(context);\n    }\n    #removeFramesRecursively(frame) {\n        for (const child of frame.childFrames()) {\n            this.#removeFramesRecursively(child);\n        }\n        frame[disposeSymbol]();\n        this._frameTree.removeFrame(frame);\n        this.emit(FrameManagerEvent.FrameDetached, frame);\n        frame.emit(FrameEvent.FrameDetached, frame);\n    }\n}\n//# sourceMappingURL=FrameManager.js.map","/**\n * @license\n * Copyright 2017 Google Inc.\n * SPDX-License-Identifier: Apache-2.0\n */\n/**\n * Keyboard provides an api for managing a virtual keyboard.\n * The high level api is {@link Keyboard.\"type\"},\n * which takes raw characters and generates proper keydown, keypress/input,\n * and keyup events on your page.\n *\n * @remarks\n * For finer control, you can use {@link Keyboard.down},\n * {@link Keyboard.up}, and {@link Keyboard.sendCharacter}\n * to manually fire events as if they were generated from a real keyboard.\n *\n * On macOS, keyboard shortcuts like `⌘ A` -\\> Select All do not work.\n * See {@link https://github.com/puppeteer/puppeteer/issues/1313 | #1313}.\n *\n * @example\n * An example of holding down `Shift` in order to select and delete some text:\n *\n * ```ts\n * await page.keyboard.type('Hello World!');\n * await page.keyboard.press('ArrowLeft');\n *\n * await page.keyboard.down('Shift');\n * for (let i = 0; i < ' World'.length; i++)\n *   await page.keyboard.press('ArrowLeft');\n * await page.keyboard.up('Shift');\n *\n * await page.keyboard.press('Backspace');\n * // Result text will end up saying 'Hello!'\n * ```\n *\n * @example\n * An example of pressing `A`\n *\n * ```ts\n * await page.keyboard.down('Shift');\n * await page.keyboard.press('KeyA');\n * await page.keyboard.up('Shift');\n * ```\n *\n * @public\n */\nexport class Keyboard {\n    /**\n     * @internal\n     */\n    constructor() { }\n}\n/**\n * Enum of valid mouse buttons.\n *\n * @public\n */\nexport const MouseButton = Object.freeze({\n    Left: 'left',\n    Right: 'right',\n    Middle: 'middle',\n    Back: 'back',\n    Forward: 'forward',\n});\n/**\n * The Mouse class operates in main-frame CSS pixels\n * relative to the top-left corner of the viewport.\n *\n * @remarks\n * Every `page` object has its own Mouse, accessible with {@link Page.mouse}.\n *\n * @example\n *\n * ```ts\n * // Using ‘page.mouse’ to trace a 100x100 square.\n * await page.mouse.move(0, 0);\n * await page.mouse.down();\n * await page.mouse.move(0, 100);\n * await page.mouse.move(100, 100);\n * await page.mouse.move(100, 0);\n * await page.mouse.move(0, 0);\n * await page.mouse.up();\n * ```\n *\n * **Note**: The mouse events trigger synthetic `MouseEvent`s.\n * This means that it does not fully replicate the functionality of what a normal user\n * would be able to do with their mouse.\n *\n * For example, dragging and selecting text is not possible using `page.mouse`.\n * Instead, you can use the {@link https://developer.mozilla.org/en-US/docs/Web/API/DocumentOrShadowRoot/getSelection | `DocumentOrShadowRoot.getSelection()`} functionality implemented in the platform.\n *\n * @example\n * For example, if you want to select all content between nodes:\n *\n * ```ts\n * await page.evaluate(\n *   (from, to) => {\n *     const selection = from.getRootNode().getSelection();\n *     const range = document.createRange();\n *     range.setStartBefore(from);\n *     range.setEndAfter(to);\n *     selection.removeAllRanges();\n *     selection.addRange(range);\n *   },\n *   fromJSHandle,\n *   toJSHandle\n * );\n * ```\n *\n * If you then would want to copy-paste your selection, you can use the clipboard api:\n *\n * ```ts\n * // The clipboard api does not allow you to copy, unless the tab is focused.\n * await page.bringToFront();\n * await page.evaluate(() => {\n *   // Copy the selected content to the clipboard\n *   document.execCommand('copy');\n *   // Obtain the content of the clipboard as a string\n *   return navigator.clipboard.readText();\n * });\n * ```\n *\n * **Note**: If you want access to the clipboard API,\n * you have to give it permission to do so:\n *\n * ```ts\n * await browser\n *   .defaultBrowserContext()\n *   .overridePermissions('<your origin>', [\n *     'clipboard-read',\n *     'clipboard-write',\n *   ]);\n * ```\n *\n * @public\n */\nexport class Mouse {\n    /**\n     * @internal\n     */\n    constructor() { }\n}\n/**\n * The Touchscreen class exposes touchscreen events.\n * @public\n */\nexport class Touchscreen {\n    /**\n     * @internal\n     */\n    constructor() { }\n    /**\n     * Dispatches a `touchstart` and `touchend` event.\n     * @param x - Horizontal position of the tap.\n     * @param y - Vertical position of the tap.\n     */\n    async tap(x, y) {\n        await this.touchStart(x, y);\n        await this.touchEnd();\n    }\n}\n//# sourceMappingURL=Input.js.map","/**\n * @license\n * Copyright 2017 Google Inc.\n * SPDX-License-Identifier: Apache-2.0\n */\n/**\n * @internal\n */\nexport const _keyDefinitions = {\n    '0': { keyCode: 48, key: '0', code: 'Digit0' },\n    '1': { keyCode: 49, key: '1', code: 'Digit1' },\n    '2': { keyCode: 50, key: '2', code: 'Digit2' },\n    '3': { keyCode: 51, key: '3', code: 'Digit3' },\n    '4': { keyCode: 52, key: '4', code: 'Digit4' },\n    '5': { keyCode: 53, key: '5', code: 'Digit5' },\n    '6': { keyCode: 54, key: '6', code: 'Digit6' },\n    '7': { keyCode: 55, key: '7', code: 'Digit7' },\n    '8': { keyCode: 56, key: '8', code: 'Digit8' },\n    '9': { keyCode: 57, key: '9', code: 'Digit9' },\n    Power: { key: 'Power', code: 'Power' },\n    Eject: { key: 'Eject', code: 'Eject' },\n    Abort: { keyCode: 3, code: 'Abort', key: 'Cancel' },\n    Help: { keyCode: 6, code: 'Help', key: 'Help' },\n    Backspace: { keyCode: 8, code: 'Backspace', key: 'Backspace' },\n    Tab: { keyCode: 9, code: 'Tab', key: 'Tab' },\n    Numpad5: {\n        keyCode: 12,\n        shiftKeyCode: 101,\n        key: 'Clear',\n        code: 'Numpad5',\n        shiftKey: '5',\n        location: 3,\n    },\n    NumpadEnter: {\n        keyCode: 13,\n        code: 'NumpadEnter',\n        key: 'Enter',\n        text: '\\r',\n        location: 3,\n    },\n    Enter: { keyCode: 13, code: 'Enter', key: 'Enter', text: '\\r' },\n    '\\r': { keyCode: 13, code: 'Enter', key: 'Enter', text: '\\r' },\n    '\\n': { keyCode: 13, code: 'Enter', key: 'Enter', text: '\\r' },\n    ShiftLeft: { keyCode: 16, code: 'ShiftLeft', key: 'Shift', location: 1 },\n    ShiftRight: { keyCode: 16, code: 'ShiftRight', key: 'Shift', location: 2 },\n    ControlLeft: {\n        keyCode: 17,\n        code: 'ControlLeft',\n        key: 'Control',\n        location: 1,\n    },\n    ControlRight: {\n        keyCode: 17,\n        code: 'ControlRight',\n        key: 'Control',\n        location: 2,\n    },\n    AltLeft: { keyCode: 18, code: 'AltLeft', key: 'Alt', location: 1 },\n    AltRight: { keyCode: 18, code: 'AltRight', key: 'Alt', location: 2 },\n    Pause: { keyCode: 19, code: 'Pause', key: 'Pause' },\n    CapsLock: { keyCode: 20, code: 'CapsLock', key: 'CapsLock' },\n    Escape: { keyCode: 27, code: 'Escape', key: 'Escape' },\n    Convert: { keyCode: 28, code: 'Convert', key: 'Convert' },\n    NonConvert: { keyCode: 29, code: 'NonConvert', key: 'NonConvert' },\n    Space: { keyCode: 32, code: 'Space', key: ' ' },\n    Numpad9: {\n        keyCode: 33,\n        shiftKeyCode: 105,\n        key: 'PageUp',\n        code: 'Numpad9',\n        shiftKey: '9',\n        location: 3,\n    },\n    PageUp: { keyCode: 33, code: 'PageUp', key: 'PageUp' },\n    Numpad3: {\n        keyCode: 34,\n        shiftKeyCode: 99,\n        key: 'PageDown',\n        code: 'Numpad3',\n        shiftKey: '3',\n        location: 3,\n    },\n    PageDown: { keyCode: 34, code: 'PageDown', key: 'PageDown' },\n    End: { keyCode: 35, code: 'End', key: 'End' },\n    Numpad1: {\n        keyCode: 35,\n        shiftKeyCode: 97,\n        key: 'End',\n        code: 'Numpad1',\n        shiftKey: '1',\n        location: 3,\n    },\n    Home: { keyCode: 36, code: 'Home', key: 'Home' },\n    Numpad7: {\n        keyCode: 36,\n        shiftKeyCode: 103,\n        key: 'Home',\n        code: 'Numpad7',\n        shiftKey: '7',\n        location: 3,\n    },\n    ArrowLeft: { keyCode: 37, code: 'ArrowLeft', key: 'ArrowLeft' },\n    Numpad4: {\n        keyCode: 37,\n        shiftKeyCode: 100,\n        key: 'ArrowLeft',\n        code: 'Numpad4',\n        shiftKey: '4',\n        location: 3,\n    },\n    Numpad8: {\n        keyCode: 38,\n        shiftKeyCode: 104,\n        key: 'ArrowUp',\n        code: 'Numpad8',\n        shiftKey: '8',\n        location: 3,\n    },\n    ArrowUp: { keyCode: 38, code: 'ArrowUp', key: 'ArrowUp' },\n    ArrowRight: { keyCode: 39, code: 'ArrowRight', key: 'ArrowRight' },\n    Numpad6: {\n        keyCode: 39,\n        shiftKeyCode: 102,\n        key: 'ArrowRight',\n        code: 'Numpad6',\n        shiftKey: '6',\n        location: 3,\n    },\n    Numpad2: {\n        keyCode: 40,\n        shiftKeyCode: 98,\n        key: 'ArrowDown',\n        code: 'Numpad2',\n        shiftKey: '2',\n        location: 3,\n    },\n    ArrowDown: { keyCode: 40, code: 'ArrowDown', key: 'ArrowDown' },\n    Select: { keyCode: 41, code: 'Select', key: 'Select' },\n    Open: { keyCode: 43, code: 'Open', key: 'Execute' },\n    PrintScreen: { keyCode: 44, code: 'PrintScreen', key: 'PrintScreen' },\n    Insert: { keyCode: 45, code: 'Insert', key: 'Insert' },\n    Numpad0: {\n        keyCode: 45,\n        shiftKeyCode: 96,\n        key: 'Insert',\n        code: 'Numpad0',\n        shiftKey: '0',\n        location: 3,\n    },\n    Delete: { keyCode: 46, code: 'Delete', key: 'Delete' },\n    NumpadDecimal: {\n        keyCode: 46,\n        shiftKeyCode: 110,\n        code: 'NumpadDecimal',\n        key: '\\u0000',\n        shiftKey: '.',\n        location: 3,\n    },\n    Digit0: { keyCode: 48, code: 'Digit0', shiftKey: ')', key: '0' },\n    Digit1: { keyCode: 49, code: 'Digit1', shiftKey: '!', key: '1' },\n    Digit2: { keyCode: 50, code: 'Digit2', shiftKey: '@', key: '2' },\n    Digit3: { keyCode: 51, code: 'Digit3', shiftKey: '#', key: '3' },\n    Digit4: { keyCode: 52, code: 'Digit4', shiftKey: '$', key: '4' },\n    Digit5: { keyCode: 53, code: 'Digit5', shiftKey: '%', key: '5' },\n    Digit6: { keyCode: 54, code: 'Digit6', shiftKey: '^', key: '6' },\n    Digit7: { keyCode: 55, code: 'Digit7', shiftKey: '&', key: '7' },\n    Digit8: { keyCode: 56, code: 'Digit8', shiftKey: '*', key: '8' },\n    Digit9: { keyCode: 57, code: 'Digit9', shiftKey: '(', key: '9' },\n    KeyA: { keyCode: 65, code: 'KeyA', shiftKey: 'A', key: 'a' },\n    KeyB: { keyCode: 66, code: 'KeyB', shiftKey: 'B', key: 'b' },\n    KeyC: { keyCode: 67, code: 'KeyC', shiftKey: 'C', key: 'c' },\n    KeyD: { keyCode: 68, code: 'KeyD', shiftKey: 'D', key: 'd' },\n    KeyE: { keyCode: 69, code: 'KeyE', shiftKey: 'E', key: 'e' },\n    KeyF: { keyCode: 70, code: 'KeyF', shiftKey: 'F', key: 'f' },\n    KeyG: { keyCode: 71, code: 'KeyG', shiftKey: 'G', key: 'g' },\n    KeyH: { keyCode: 72, code: 'KeyH', shiftKey: 'H', key: 'h' },\n    KeyI: { keyCode: 73, code: 'KeyI', shiftKey: 'I', key: 'i' },\n    KeyJ: { keyCode: 74, code: 'KeyJ', shiftKey: 'J', key: 'j' },\n    KeyK: { keyCode: 75, code: 'KeyK', shiftKey: 'K', key: 'k' },\n    KeyL: { keyCode: 76, code: 'KeyL', shiftKey: 'L', key: 'l' },\n    KeyM: { keyCode: 77, code: 'KeyM', shiftKey: 'M', key: 'm' },\n    KeyN: { keyCode: 78, code: 'KeyN', shiftKey: 'N', key: 'n' },\n    KeyO: { keyCode: 79, code: 'KeyO', shiftKey: 'O', key: 'o' },\n    KeyP: { keyCode: 80, code: 'KeyP', shiftKey: 'P', key: 'p' },\n    KeyQ: { keyCode: 81, code: 'KeyQ', shiftKey: 'Q', key: 'q' },\n    KeyR: { keyCode: 82, code: 'KeyR', shiftKey: 'R', key: 'r' },\n    KeyS: { keyCode: 83, code: 'KeyS', shiftKey: 'S', key: 's' },\n    KeyT: { keyCode: 84, code: 'KeyT', shiftKey: 'T', key: 't' },\n    KeyU: { keyCode: 85, code: 'KeyU', shiftKey: 'U', key: 'u' },\n    KeyV: { keyCode: 86, code: 'KeyV', shiftKey: 'V', key: 'v' },\n    KeyW: { keyCode: 87, code: 'KeyW', shiftKey: 'W', key: 'w' },\n    KeyX: { keyCode: 88, code: 'KeyX', shiftKey: 'X', key: 'x' },\n    KeyY: { keyCode: 89, code: 'KeyY', shiftKey: 'Y', key: 'y' },\n    KeyZ: { keyCode: 90, code: 'KeyZ', shiftKey: 'Z', key: 'z' },\n    MetaLeft: { keyCode: 91, code: 'MetaLeft', key: 'Meta', location: 1 },\n    MetaRight: { keyCode: 92, code: 'MetaRight', key: 'Meta', location: 2 },\n    ContextMenu: { keyCode: 93, code: 'ContextMenu', key: 'ContextMenu' },\n    NumpadMultiply: {\n        keyCode: 106,\n        code: 'NumpadMultiply',\n        key: '*',\n        location: 3,\n    },\n    NumpadAdd: { keyCode: 107, code: 'NumpadAdd', key: '+', location: 3 },\n    NumpadSubtract: {\n        keyCode: 109,\n        code: 'NumpadSubtract',\n        key: '-',\n        location: 3,\n    },\n    NumpadDivide: { keyCode: 111, code: 'NumpadDivide', key: '/', location: 3 },\n    F1: { keyCode: 112, code: 'F1', key: 'F1' },\n    F2: { keyCode: 113, code: 'F2', key: 'F2' },\n    F3: { keyCode: 114, code: 'F3', key: 'F3' },\n    F4: { keyCode: 115, code: 'F4', key: 'F4' },\n    F5: { keyCode: 116, code: 'F5', key: 'F5' },\n    F6: { keyCode: 117, code: 'F6', key: 'F6' },\n    F7: { keyCode: 118, code: 'F7', key: 'F7' },\n    F8: { keyCode: 119, code: 'F8', key: 'F8' },\n    F9: { keyCode: 120, code: 'F9', key: 'F9' },\n    F10: { keyCode: 121, code: 'F10', key: 'F10' },\n    F11: { keyCode: 122, code: 'F11', key: 'F11' },\n    F12: { keyCode: 123, code: 'F12', key: 'F12' },\n    F13: { keyCode: 124, code: 'F13', key: 'F13' },\n    F14: { keyCode: 125, code: 'F14', key: 'F14' },\n    F15: { keyCode: 126, code: 'F15', key: 'F15' },\n    F16: { keyCode: 127, code: 'F16', key: 'F16' },\n    F17: { keyCode: 128, code: 'F17', key: 'F17' },\n    F18: { keyCode: 129, code: 'F18', key: 'F18' },\n    F19: { keyCode: 130, code: 'F19', key: 'F19' },\n    F20: { keyCode: 131, code: 'F20', key: 'F20' },\n    F21: { keyCode: 132, code: 'F21', key: 'F21' },\n    F22: { keyCode: 133, code: 'F22', key: 'F22' },\n    F23: { keyCode: 134, code: 'F23', key: 'F23' },\n    F24: { keyCode: 135, code: 'F24', key: 'F24' },\n    NumLock: { keyCode: 144, code: 'NumLock', key: 'NumLock' },\n    ScrollLock: { keyCode: 145, code: 'ScrollLock', key: 'ScrollLock' },\n    AudioVolumeMute: {\n        keyCode: 173,\n        code: 'AudioVolumeMute',\n        key: 'AudioVolumeMute',\n    },\n    AudioVolumeDown: {\n        keyCode: 174,\n        code: 'AudioVolumeDown',\n        key: 'AudioVolumeDown',\n    },\n    AudioVolumeUp: { keyCode: 175, code: 'AudioVolumeUp', key: 'AudioVolumeUp' },\n    MediaTrackNext: {\n        keyCode: 176,\n        code: 'MediaTrackNext',\n        key: 'MediaTrackNext',\n    },\n    MediaTrackPrevious: {\n        keyCode: 177,\n        code: 'MediaTrackPrevious',\n        key: 'MediaTrackPrevious',\n    },\n    MediaStop: { keyCode: 178, code: 'MediaStop', key: 'MediaStop' },\n    MediaPlayPause: {\n        keyCode: 179,\n        code: 'MediaPlayPause',\n        key: 'MediaPlayPause',\n    },\n    Semicolon: { keyCode: 186, code: 'Semicolon', shiftKey: ':', key: ';' },\n    Equal: { keyCode: 187, code: 'Equal', shiftKey: '+', key: '=' },\n    NumpadEqual: { keyCode: 187, code: 'NumpadEqual', key: '=', location: 3 },\n    Comma: { keyCode: 188, code: 'Comma', shiftKey: '<', key: ',' },\n    Minus: { keyCode: 189, code: 'Minus', shiftKey: '_', key: '-' },\n    Period: { keyCode: 190, code: 'Period', shiftKey: '>', key: '.' },\n    Slash: { keyCode: 191, code: 'Slash', shiftKey: '?', key: '/' },\n    Backquote: { keyCode: 192, code: 'Backquote', shiftKey: '~', key: '`' },\n    BracketLeft: { keyCode: 219, code: 'BracketLeft', shiftKey: '{', key: '[' },\n    Backslash: { keyCode: 220, code: 'Backslash', shiftKey: '|', key: '\\\\' },\n    BracketRight: { keyCode: 221, code: 'BracketRight', shiftKey: '}', key: ']' },\n    Quote: { keyCode: 222, code: 'Quote', shiftKey: '\"', key: \"'\" },\n    AltGraph: { keyCode: 225, code: 'AltGraph', key: 'AltGraph' },\n    Props: { keyCode: 247, code: 'Props', key: 'CrSel' },\n    Cancel: { keyCode: 3, key: 'Cancel', code: 'Abort' },\n    Clear: { keyCode: 12, key: 'Clear', code: 'Numpad5', location: 3 },\n    Shift: { keyCode: 16, key: 'Shift', code: 'ShiftLeft', location: 1 },\n    Control: { keyCode: 17, key: 'Control', code: 'ControlLeft', location: 1 },\n    Alt: { keyCode: 18, key: 'Alt', code: 'AltLeft', location: 1 },\n    Accept: { keyCode: 30, key: 'Accept' },\n    ModeChange: { keyCode: 31, key: 'ModeChange' },\n    ' ': { keyCode: 32, key: ' ', code: 'Space' },\n    Print: { keyCode: 42, key: 'Print' },\n    Execute: { keyCode: 43, key: 'Execute', code: 'Open' },\n    '\\u0000': { keyCode: 46, key: '\\u0000', code: 'NumpadDecimal', location: 3 },\n    a: { keyCode: 65, key: 'a', code: 'KeyA' },\n    b: { keyCode: 66, key: 'b', code: 'KeyB' },\n    c: { keyCode: 67, key: 'c', code: 'KeyC' },\n    d: { keyCode: 68, key: 'd', code: 'KeyD' },\n    e: { keyCode: 69, key: 'e', code: 'KeyE' },\n    f: { keyCode: 70, key: 'f', code: 'KeyF' },\n    g: { keyCode: 71, key: 'g', code: 'KeyG' },\n    h: { keyCode: 72, key: 'h', code: 'KeyH' },\n    i: { keyCode: 73, key: 'i', code: 'KeyI' },\n    j: { keyCode: 74, key: 'j', code: 'KeyJ' },\n    k: { keyCode: 75, key: 'k', code: 'KeyK' },\n    l: { keyCode: 76, key: 'l', code: 'KeyL' },\n    m: { keyCode: 77, key: 'm', code: 'KeyM' },\n    n: { keyCode: 78, key: 'n', code: 'KeyN' },\n    o: { keyCode: 79, key: 'o', code: 'KeyO' },\n    p: { keyCode: 80, key: 'p', code: 'KeyP' },\n    q: { keyCode: 81, key: 'q', code: 'KeyQ' },\n    r: { keyCode: 82, key: 'r', code: 'KeyR' },\n    s: { keyCode: 83, key: 's', code: 'KeyS' },\n    t: { keyCode: 84, key: 't', code: 'KeyT' },\n    u: { keyCode: 85, key: 'u', code: 'KeyU' },\n    v: { keyCode: 86, key: 'v', code: 'KeyV' },\n    w: { keyCode: 87, key: 'w', code: 'KeyW' },\n    x: { keyCode: 88, key: 'x', code: 'KeyX' },\n    y: { keyCode: 89, key: 'y', code: 'KeyY' },\n    z: { keyCode: 90, key: 'z', code: 'KeyZ' },\n    Meta: { keyCode: 91, key: 'Meta', code: 'MetaLeft', location: 1 },\n    '*': { keyCode: 106, key: '*', code: 'NumpadMultiply', location: 3 },\n    '+': { keyCode: 107, key: '+', code: 'NumpadAdd', location: 3 },\n    '-': { keyCode: 109, key: '-', code: 'NumpadSubtract', location: 3 },\n    '/': { keyCode: 111, key: '/', code: 'NumpadDivide', location: 3 },\n    ';': { keyCode: 186, key: ';', code: 'Semicolon' },\n    '=': { keyCode: 187, key: '=', code: 'Equal' },\n    ',': { keyCode: 188, key: ',', code: 'Comma' },\n    '.': { keyCode: 190, key: '.', code: 'Period' },\n    '`': { keyCode: 192, key: '`', code: 'Backquote' },\n    '[': { keyCode: 219, key: '[', code: 'BracketLeft' },\n    '\\\\': { keyCode: 220, key: '\\\\', code: 'Backslash' },\n    ']': { keyCode: 221, key: ']', code: 'BracketRight' },\n    \"'\": { keyCode: 222, key: \"'\", code: 'Quote' },\n    Attn: { keyCode: 246, key: 'Attn' },\n    CrSel: { keyCode: 247, key: 'CrSel', code: 'Props' },\n    ExSel: { keyCode: 248, key: 'ExSel' },\n    EraseEof: { keyCode: 249, key: 'EraseEof' },\n    Play: { keyCode: 250, key: 'Play' },\n    ZoomOut: { keyCode: 251, key: 'ZoomOut' },\n    ')': { keyCode: 48, key: ')', code: 'Digit0' },\n    '!': { keyCode: 49, key: '!', code: 'Digit1' },\n    '@': { keyCode: 50, key: '@', code: 'Digit2' },\n    '#': { keyCode: 51, key: '#', code: 'Digit3' },\n    $: { keyCode: 52, key: '$', code: 'Digit4' },\n    '%': { keyCode: 53, key: '%', code: 'Digit5' },\n    '^': { keyCode: 54, key: '^', code: 'Digit6' },\n    '&': { keyCode: 55, key: '&', code: 'Digit7' },\n    '(': { keyCode: 57, key: '(', code: 'Digit9' },\n    A: { keyCode: 65, key: 'A', code: 'KeyA' },\n    B: { keyCode: 66, key: 'B', code: 'KeyB' },\n    C: { keyCode: 67, key: 'C', code: 'KeyC' },\n    D: { keyCode: 68, key: 'D', code: 'KeyD' },\n    E: { keyCode: 69, key: 'E', code: 'KeyE' },\n    F: { keyCode: 70, key: 'F', code: 'KeyF' },\n    G: { keyCode: 71, key: 'G', code: 'KeyG' },\n    H: { keyCode: 72, key: 'H', code: 'KeyH' },\n    I: { keyCode: 73, key: 'I', code: 'KeyI' },\n    J: { keyCode: 74, key: 'J', code: 'KeyJ' },\n    K: { keyCode: 75, key: 'K', code: 'KeyK' },\n    L: { keyCode: 76, key: 'L', code: 'KeyL' },\n    M: { keyCode: 77, key: 'M', code: 'KeyM' },\n    N: { keyCode: 78, key: 'N', code: 'KeyN' },\n    O: { keyCode: 79, key: 'O', code: 'KeyO' },\n    P: { keyCode: 80, key: 'P', code: 'KeyP' },\n    Q: { keyCode: 81, key: 'Q', code: 'KeyQ' },\n    R: { keyCode: 82, key: 'R', code: 'KeyR' },\n    S: { keyCode: 83, key: 'S', code: 'KeyS' },\n    T: { keyCode: 84, key: 'T', code: 'KeyT' },\n    U: { keyCode: 85, key: 'U', code: 'KeyU' },\n    V: { keyCode: 86, key: 'V', code: 'KeyV' },\n    W: { keyCode: 87, key: 'W', code: 'KeyW' },\n    X: { keyCode: 88, key: 'X', code: 'KeyX' },\n    Y: { keyCode: 89, key: 'Y', code: 'KeyY' },\n    Z: { keyCode: 90, key: 'Z', code: 'KeyZ' },\n    ':': { keyCode: 186, key: ':', code: 'Semicolon' },\n    '<': { keyCode: 188, key: '<', code: 'Comma' },\n    _: { keyCode: 189, key: '_', code: 'Minus' },\n    '>': { keyCode: 190, key: '>', code: 'Period' },\n    '?': { keyCode: 191, key: '?', code: 'Slash' },\n    '~': { keyCode: 192, key: '~', code: 'Backquote' },\n    '{': { keyCode: 219, key: '{', code: 'BracketLeft' },\n    '|': { keyCode: 220, key: '|', code: 'Backslash' },\n    '}': { keyCode: 221, key: '}', code: 'BracketRight' },\n    '\"': { keyCode: 222, key: '\"', code: 'Quote' },\n    SoftLeft: { key: 'SoftLeft', code: 'SoftLeft', location: 4 },\n    SoftRight: { key: 'SoftRight', code: 'SoftRight', location: 4 },\n    Camera: { keyCode: 44, key: 'Camera', code: 'Camera', location: 4 },\n    Call: { key: 'Call', code: 'Call', location: 4 },\n    EndCall: { keyCode: 95, key: 'EndCall', code: 'EndCall', location: 4 },\n    VolumeDown: {\n        keyCode: 182,\n        key: 'VolumeDown',\n        code: 'VolumeDown',\n        location: 4,\n    },\n    VolumeUp: { keyCode: 183, key: 'VolumeUp', code: 'VolumeUp', location: 4 },\n};\n//# sourceMappingURL=USKeyboardLayout.js.map","/**\n * @license\n * Copyright 2017 Google Inc.\n * SPDX-License-Identifier: Apache-2.0\n */\nimport { Keyboard, Mouse, MouseButton, Touchscreen, } from '../api/Input.js';\nimport { _keyDefinitions, } from '../common/USKeyboardLayout.js';\nimport { assert } from '../util/assert.js';\n/**\n * @internal\n */\nexport class CdpKeyboard extends Keyboard {\n    #client;\n    #pressedKeys = new Set();\n    _modifiers = 0;\n    constructor(client) {\n        super();\n        this.#client = client;\n    }\n    updateClient(client) {\n        this.#client = client;\n    }\n    async down(key, options = {\n        text: undefined,\n        commands: [],\n    }) {\n        const description = this.#keyDescriptionForString(key);\n        const autoRepeat = this.#pressedKeys.has(description.code);\n        this.#pressedKeys.add(description.code);\n        this._modifiers |= this.#modifierBit(description.key);\n        const text = options.text === undefined ? description.text : options.text;\n        await this.#client.send('Input.dispatchKeyEvent', {\n            type: text ? 'keyDown' : 'rawKeyDown',\n            modifiers: this._modifiers,\n            windowsVirtualKeyCode: description.keyCode,\n            code: description.code,\n            key: description.key,\n            text: text,\n            unmodifiedText: text,\n            autoRepeat,\n            location: description.location,\n            isKeypad: description.location === 3,\n            commands: options.commands,\n        });\n    }\n    #modifierBit(key) {\n        if (key === 'Alt') {\n            return 1;\n        }\n        if (key === 'Control') {\n            return 2;\n        }\n        if (key === 'Meta') {\n            return 4;\n        }\n        if (key === 'Shift') {\n            return 8;\n        }\n        return 0;\n    }\n    #keyDescriptionForString(keyString) {\n        const shift = this._modifiers & 8;\n        const description = {\n            key: '',\n            keyCode: 0,\n            code: '',\n            text: '',\n            location: 0,\n        };\n        const definition = _keyDefinitions[keyString];\n        assert(definition, `Unknown key: \"${keyString}\"`);\n        if (definition.key) {\n            description.key = definition.key;\n        }\n        if (shift && definition.shiftKey) {\n            description.key = definition.shiftKey;\n        }\n        if (definition.keyCode) {\n            description.keyCode = definition.keyCode;\n        }\n        if (shift && definition.shiftKeyCode) {\n            description.keyCode = definition.shiftKeyCode;\n        }\n        if (definition.code) {\n            description.code = definition.code;\n        }\n        if (definition.location) {\n            description.location = definition.location;\n        }\n        if (description.key.length === 1) {\n            description.text = description.key;\n        }\n        if (definition.text) {\n            description.text = definition.text;\n        }\n        if (shift && definition.shiftText) {\n            description.text = definition.shiftText;\n        }\n        // if any modifiers besides shift are pressed, no text should be sent\n        if (this._modifiers & ~8) {\n            description.text = '';\n        }\n        return description;\n    }\n    async up(key) {\n        const description = this.#keyDescriptionForString(key);\n        this._modifiers &= ~this.#modifierBit(description.key);\n        this.#pressedKeys.delete(description.code);\n        await this.#client.send('Input.dispatchKeyEvent', {\n            type: 'keyUp',\n            modifiers: this._modifiers,\n            key: description.key,\n            windowsVirtualKeyCode: description.keyCode,\n            code: description.code,\n            location: description.location,\n        });\n    }\n    async sendCharacter(char) {\n        await this.#client.send('Input.insertText', { text: char });\n    }\n    charIsKey(char) {\n        return !!_keyDefinitions[char];\n    }\n    async type(text, options = {}) {\n        const delay = options.delay || undefined;\n        for (const char of text) {\n            if (this.charIsKey(char)) {\n                await this.press(char, { delay });\n            }\n            else {\n                if (delay) {\n                    await new Promise(f => {\n                        return setTimeout(f, delay);\n                    });\n                }\n                await this.sendCharacter(char);\n            }\n        }\n    }\n    async press(key, options = {}) {\n        const { delay = null } = options;\n        await this.down(key, options);\n        if (delay) {\n            await new Promise(f => {\n                return setTimeout(f, options.delay);\n            });\n        }\n        await this.up(key);\n    }\n}\nconst getFlag = (button) => {\n    switch (button) {\n        case MouseButton.Left:\n            return 1 /* MouseButtonFlag.Left */;\n        case MouseButton.Right:\n            return 2 /* MouseButtonFlag.Right */;\n        case MouseButton.Middle:\n            return 4 /* MouseButtonFlag.Middle */;\n        case MouseButton.Back:\n            return 8 /* MouseButtonFlag.Back */;\n        case MouseButton.Forward:\n            return 16 /* MouseButtonFlag.Forward */;\n    }\n};\n/**\n * This should match\n * https://source.chromium.org/chromium/chromium/src/+/refs/heads/main:content/browser/renderer_host/input/web_input_event_builders_mac.mm;drc=a61b95c63b0b75c1cfe872d9c8cdf927c226046e;bpv=1;bpt=1;l=221.\n */\nconst getButtonFromPressedButtons = (buttons) => {\n    if (buttons & 1 /* MouseButtonFlag.Left */) {\n        return MouseButton.Left;\n    }\n    else if (buttons & 2 /* MouseButtonFlag.Right */) {\n        return MouseButton.Right;\n    }\n    else if (buttons & 4 /* MouseButtonFlag.Middle */) {\n        return MouseButton.Middle;\n    }\n    else if (buttons & 8 /* MouseButtonFlag.Back */) {\n        return MouseButton.Back;\n    }\n    else if (buttons & 16 /* MouseButtonFlag.Forward */) {\n        return MouseButton.Forward;\n    }\n    return 'none';\n};\n/**\n * @internal\n */\nexport class CdpMouse extends Mouse {\n    #client;\n    #keyboard;\n    constructor(client, keyboard) {\n        super();\n        this.#client = client;\n        this.#keyboard = keyboard;\n    }\n    updateClient(client) {\n        this.#client = client;\n    }\n    #_state = {\n        position: { x: 0, y: 0 },\n        buttons: 0 /* MouseButtonFlag.None */,\n    };\n    get #state() {\n        return Object.assign({ ...this.#_state }, ...this.#transactions);\n    }\n    // Transactions can run in parallel, so we store each of thme in this array.\n    #transactions = [];\n    #createTransaction() {\n        const transaction = {};\n        this.#transactions.push(transaction);\n        const popTransaction = () => {\n            this.#transactions.splice(this.#transactions.indexOf(transaction), 1);\n        };\n        return {\n            update: (updates) => {\n                Object.assign(transaction, updates);\n            },\n            commit: () => {\n                this.#_state = { ...this.#_state, ...transaction };\n                popTransaction();\n            },\n            rollback: popTransaction,\n        };\n    }\n    /**\n     * This is a shortcut for a typical update, commit/rollback lifecycle based on\n     * the error of the action.\n     */\n    async #withTransaction(action) {\n        const { update, commit, rollback } = this.#createTransaction();\n        try {\n            await action(update);\n            commit();\n        }\n        catch (error) {\n            rollback();\n            throw error;\n        }\n    }\n    async reset() {\n        const actions = [];\n        for (const [flag, button] of [\n            [1 /* MouseButtonFlag.Left */, MouseButton.Left],\n            [4 /* MouseButtonFlag.Middle */, MouseButton.Middle],\n            [2 /* MouseButtonFlag.Right */, MouseButton.Right],\n            [16 /* MouseButtonFlag.Forward */, MouseButton.Forward],\n            [8 /* MouseButtonFlag.Back */, MouseButton.Back],\n        ]) {\n            if (this.#state.buttons & flag) {\n                actions.push(this.up({ button: button }));\n            }\n        }\n        if (this.#state.position.x !== 0 || this.#state.position.y !== 0) {\n            actions.push(this.move(0, 0));\n        }\n        await Promise.all(actions);\n    }\n    async move(x, y, options = {}) {\n        const { steps = 1 } = options;\n        const from = this.#state.position;\n        const to = { x, y };\n        for (let i = 1; i <= steps; i++) {\n            await this.#withTransaction(updateState => {\n                updateState({\n                    position: {\n                        x: from.x + (to.x - from.x) * (i / steps),\n                        y: from.y + (to.y - from.y) * (i / steps),\n                    },\n                });\n                const { buttons, position } = this.#state;\n                return this.#client.send('Input.dispatchMouseEvent', {\n                    type: 'mouseMoved',\n                    modifiers: this.#keyboard._modifiers,\n                    buttons,\n                    button: getButtonFromPressedButtons(buttons),\n                    ...position,\n                });\n            });\n        }\n    }\n    async down(options = {}) {\n        const { button = MouseButton.Left, clickCount = 1 } = options;\n        const flag = getFlag(button);\n        if (!flag) {\n            throw new Error(`Unsupported mouse button: ${button}`);\n        }\n        if (this.#state.buttons & flag) {\n            throw new Error(`'${button}' is already pressed.`);\n        }\n        await this.#withTransaction(updateState => {\n            updateState({\n                buttons: this.#state.buttons | flag,\n            });\n            const { buttons, position } = this.#state;\n            return this.#client.send('Input.dispatchMouseEvent', {\n                type: 'mousePressed',\n                modifiers: this.#keyboard._modifiers,\n                clickCount,\n                buttons,\n                button,\n                ...position,\n            });\n        });\n    }\n    async up(options = {}) {\n        const { button = MouseButton.Left, clickCount = 1 } = options;\n        const flag = getFlag(button);\n        if (!flag) {\n            throw new Error(`Unsupported mouse button: ${button}`);\n        }\n        if (!(this.#state.buttons & flag)) {\n            throw new Error(`'${button}' is not pressed.`);\n        }\n        await this.#withTransaction(updateState => {\n            updateState({\n                buttons: this.#state.buttons & ~flag,\n            });\n            const { buttons, position } = this.#state;\n            return this.#client.send('Input.dispatchMouseEvent', {\n                type: 'mouseReleased',\n                modifiers: this.#keyboard._modifiers,\n                clickCount,\n                buttons,\n                button,\n                ...position,\n            });\n        });\n    }\n    async click(x, y, options = {}) {\n        const { delay, count = 1, clickCount = count } = options;\n        if (count < 1) {\n            throw new Error('Click must occur a positive number of times.');\n        }\n        const actions = [this.move(x, y)];\n        if (clickCount === count) {\n            for (let i = 1; i < count; ++i) {\n                actions.push(this.down({ ...options, clickCount: i }), this.up({ ...options, clickCount: i }));\n            }\n        }\n        actions.push(this.down({ ...options, clickCount }));\n        if (typeof delay === 'number') {\n            await Promise.all(actions);\n            actions.length = 0;\n            await new Promise(resolve => {\n                setTimeout(resolve, delay);\n            });\n        }\n        actions.push(this.up({ ...options, clickCount }));\n        await Promise.all(actions);\n    }\n    async wheel(options = {}) {\n        const { deltaX = 0, deltaY = 0 } = options;\n        const { position, buttons } = this.#state;\n        await this.#client.send('Input.dispatchMouseEvent', {\n            type: 'mouseWheel',\n            pointerType: 'mouse',\n            modifiers: this.#keyboard._modifiers,\n            deltaY,\n            deltaX,\n            buttons,\n            ...position,\n        });\n    }\n    async drag(start, target) {\n        const promise = new Promise(resolve => {\n            this.#client.once('Input.dragIntercepted', event => {\n                return resolve(event.data);\n            });\n        });\n        await this.move(start.x, start.y);\n        await this.down();\n        await this.move(target.x, target.y);\n        return await promise;\n    }\n    async dragEnter(target, data) {\n        await this.#client.send('Input.dispatchDragEvent', {\n            type: 'dragEnter',\n            x: target.x,\n            y: target.y,\n            modifiers: this.#keyboard._modifiers,\n            data,\n        });\n    }\n    async dragOver(target, data) {\n        await this.#client.send('Input.dispatchDragEvent', {\n            type: 'dragOver',\n            x: target.x,\n            y: target.y,\n            modifiers: this.#keyboard._modifiers,\n            data,\n        });\n    }\n    async drop(target, data) {\n        await this.#client.send('Input.dispatchDragEvent', {\n            type: 'drop',\n            x: target.x,\n            y: target.y,\n            modifiers: this.#keyboard._modifiers,\n            data,\n        });\n    }\n    async dragAndDrop(start, target, options = {}) {\n        const { delay = null } = options;\n        const data = await this.drag(start, target);\n        await this.dragEnter(target, data);\n        await this.dragOver(target, data);\n        if (delay) {\n            await new Promise(resolve => {\n                return setTimeout(resolve, delay);\n            });\n        }\n        await this.drop(target, data);\n        await this.up();\n    }\n}\n/**\n * @internal\n */\nexport class CdpTouchscreen extends Touchscreen {\n    #client;\n    #keyboard;\n    constructor(client, keyboard) {\n        super();\n        this.#client = client;\n        this.#keyboard = keyboard;\n    }\n    updateClient(client) {\n        this.#client = client;\n    }\n    async touchStart(x, y) {\n        await this.#client.send('Input.dispatchTouchEvent', {\n            type: 'touchStart',\n            touchPoints: [\n                {\n                    x: Math.round(x),\n                    y: Math.round(y),\n                    radiusX: 0.5,\n                    radiusY: 0.5,\n                    force: 0.5,\n                },\n            ],\n            modifiers: this.#keyboard._modifiers,\n        });\n    }\n    async touchMove(x, y) {\n        await this.#client.send('Input.dispatchTouchEvent', {\n            type: 'touchMove',\n            touchPoints: [\n                {\n                    x: Math.round(x),\n                    y: Math.round(y),\n                    radiusX: 0.5,\n                    radiusY: 0.5,\n                    force: 0.5,\n                },\n            ],\n            modifiers: this.#keyboard._modifiers,\n        });\n    }\n    async touchEnd() {\n        await this.#client.send('Input.dispatchTouchEvent', {\n            type: 'touchEnd',\n            touchPoints: [],\n            modifiers: this.#keyboard._modifiers,\n        });\n    }\n}\n//# sourceMappingURL=Input.js.map","import { getReadableAsTypedArray, getReadableFromProtocolStream, } from '../common/util.js';\nimport { assert } from '../util/assert.js';\nimport { Deferred } from '../util/Deferred.js';\nimport { isErrorLike } from '../util/ErrorLike.js';\n/**\n * The Tracing class exposes the tracing audit interface.\n * @remarks\n * You can use `tracing.start` and `tracing.stop` to create a trace file\n * which can be opened in Chrome DevTools or {@link https://chromedevtools.github.io/timeline-viewer/ | timeline viewer}.\n *\n * @example\n *\n * ```ts\n * await page.tracing.start({path: 'trace.json'});\n * await page.goto('https://www.google.com');\n * await page.tracing.stop();\n * ```\n *\n * @public\n */\nexport class Tracing {\n    #client;\n    #recording = false;\n    #path;\n    /**\n     * @internal\n     */\n    constructor(client) {\n        this.#client = client;\n    }\n    /**\n     * @internal\n     */\n    updateClient(client) {\n        this.#client = client;\n    }\n    /**\n     * Starts a trace for the current page.\n     * @remarks\n     * Only one trace can be active at a time per browser.\n     *\n     * @param options - Optional `TracingOptions`.\n     */\n    async start(options = {}) {\n        assert(!this.#recording, 'Cannot start recording trace while already recording trace.');\n        const defaultCategories = [\n            '-*',\n            'devtools.timeline',\n            'v8.execute',\n            'disabled-by-default-devtools.timeline',\n            'disabled-by-default-devtools.timeline.frame',\n            'toplevel',\n            'blink.console',\n            'blink.user_timing',\n            'latencyInfo',\n            'disabled-by-default-devtools.timeline.stack',\n            'disabled-by-default-v8.cpu_profiler',\n        ];\n        const { path, screenshots = false, categories = defaultCategories } = options;\n        if (screenshots) {\n            categories.push('disabled-by-default-devtools.screenshot');\n        }\n        const excludedCategories = categories\n            .filter(cat => {\n            return cat.startsWith('-');\n        })\n            .map(cat => {\n            return cat.slice(1);\n        });\n        const includedCategories = categories.filter(cat => {\n            return !cat.startsWith('-');\n        });\n        this.#path = path;\n        this.#recording = true;\n        await this.#client.send('Tracing.start', {\n            transferMode: 'ReturnAsStream',\n            traceConfig: {\n                excludedCategories,\n                includedCategories,\n            },\n        });\n    }\n    /**\n     * Stops a trace started with the `start` method.\n     * @returns Promise which resolves to buffer with trace data.\n     */\n    async stop() {\n        const contentDeferred = Deferred.create();\n        this.#client.once('Tracing.tracingComplete', async (event) => {\n            try {\n                assert(event.stream, 'Missing \"stream\"');\n                const readable = await getReadableFromProtocolStream(this.#client, event.stream);\n                const typedArray = await getReadableAsTypedArray(readable, this.#path);\n                contentDeferred.resolve(typedArray ?? undefined);\n            }\n            catch (error) {\n                if (isErrorLike(error)) {\n                    contentDeferred.reject(error);\n                }\n                else {\n                    contentDeferred.reject(new Error(`Unknown error: ${error}`));\n                }\n            }\n        });\n        await this.#client.send('Tracing.end');\n        this.#recording = false;\n        return await contentDeferred.valueOrThrow();\n    }\n}\n//# sourceMappingURL=Tracing.js.map","/**\n * @license\n * Copyright 2018 Google Inc.\n * SPDX-License-Identifier: Apache-2.0\n */\nimport { UnsupportedOperation } from '../common/Errors.js';\nimport { EventEmitter } from '../common/EventEmitter.js';\nimport { TimeoutSettings } from '../common/TimeoutSettings.js';\nimport { withSourcePuppeteerURLIfNone } from '../common/util.js';\n/**\n * This class represents a\n * {@link https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API | WebWorker}.\n *\n * @remarks\n * The events `workercreated` and `workerdestroyed` are emitted on the page\n * object to signal the worker lifecycle.\n *\n * @example\n *\n * ```ts\n * page.on('workercreated', worker =>\n *   console.log('Worker created: ' + worker.url())\n * );\n * page.on('workerdestroyed', worker =>\n *   console.log('Worker destroyed: ' + worker.url())\n * );\n *\n * console.log('Current workers:');\n * for (const worker of page.workers()) {\n *   console.log('  ' + worker.url());\n * }\n * ```\n *\n * @public\n */\nexport class WebWorker extends EventEmitter {\n    /**\n     * @internal\n     */\n    timeoutSettings = new TimeoutSettings();\n    #url;\n    /**\n     * @internal\n     */\n    constructor(url) {\n        super();\n        this.#url = url;\n    }\n    /**\n     * The URL of this web worker.\n     */\n    url() {\n        return this.#url;\n    }\n    /**\n     * Evaluates a given function in the {@link WebWorker | worker}.\n     *\n     * @remarks If the given function returns a promise,\n     * {@link WebWorker.evaluate | evaluate} will wait for the promise to resolve.\n     *\n     * As a rule of thumb, if the return value of the given function is more\n     * complicated than a JSON object (e.g. most classes), then\n     * {@link WebWorker.evaluate | evaluate} will _likely_ return some truncated\n     * value (or `{}`). This is because we are not returning the actual return\n     * value, but a deserialized version as a result of transferring the return\n     * value through a protocol to Puppeteer.\n     *\n     * In general, you should use\n     * {@link WebWorker.evaluateHandle | evaluateHandle} if\n     * {@link WebWorker.evaluate | evaluate} cannot serialize the return value\n     * properly or you need a mutable {@link JSHandle | handle} to the return\n     * object.\n     *\n     * @param func - Function to be evaluated.\n     * @param args - Arguments to pass into `func`.\n     * @returns The result of `func`.\n     */\n    async evaluate(func, ...args) {\n        func = withSourcePuppeteerURLIfNone(this.evaluate.name, func);\n        return await this.mainRealm().evaluate(func, ...args);\n    }\n    /**\n     * Evaluates a given function in the {@link WebWorker | worker}.\n     *\n     * @remarks If the given function returns a promise,\n     * {@link WebWorker.evaluate | evaluate} will wait for the promise to resolve.\n     *\n     * In general, you should use\n     * {@link WebWorker.evaluateHandle | evaluateHandle} if\n     * {@link WebWorker.evaluate | evaluate} cannot serialize the return value\n     * properly or you need a mutable {@link JSHandle | handle} to the return\n     * object.\n     *\n     * @param func - Function to be evaluated.\n     * @param args - Arguments to pass into `func`.\n     * @returns A {@link JSHandle | handle} to the return value of `func`.\n     */\n    async evaluateHandle(func, ...args) {\n        func = withSourcePuppeteerURLIfNone(this.evaluateHandle.name, func);\n        return await this.mainRealm().evaluateHandle(func, ...args);\n    }\n    async close() {\n        throw new UnsupportedOperation('WebWorker.close() is not supported');\n    }\n}\n//# sourceMappingURL=WebWorker.js.map","import { CDPSessionEvent } from '../api/CDPSession.js';\nimport { TargetType } from '../api/Target.js';\nimport { WebWorker } from '../api/WebWorker.js';\nimport { TimeoutSettings } from '../common/TimeoutSettings.js';\nimport { debugError } from '../common/util.js';\nimport { ExecutionContext } from './ExecutionContext.js';\nimport { IsolatedWorld } from './IsolatedWorld.js';\nimport { CdpJSHandle } from './JSHandle.js';\n/**\n * @internal\n */\nexport class CdpWebWorker extends WebWorker {\n    #world;\n    #client;\n    #id;\n    #targetType;\n    constructor(client, url, targetId, targetType, consoleAPICalled, exceptionThrown) {\n        super(url);\n        this.#id = targetId;\n        this.#client = client;\n        this.#targetType = targetType;\n        this.#world = new IsolatedWorld(this, new TimeoutSettings());\n        this.#client.once('Runtime.executionContextCreated', async (event) => {\n            this.#world.setContext(new ExecutionContext(client, event.context, this.#world));\n        });\n        this.#world.emitter.on('consoleapicalled', async (event) => {\n            try {\n                return consoleAPICalled(event.type, event.args.map((object) => {\n                    return new CdpJSHandle(this.#world, object);\n                }), event.stackTrace);\n            }\n            catch (err) {\n                debugError(err);\n            }\n        });\n        this.#client.on('Runtime.exceptionThrown', exceptionThrown);\n        this.#client.once(CDPSessionEvent.Disconnected, () => {\n            this.#world.dispose();\n        });\n        // This might fail if the target is closed before we receive all execution contexts.\n        this.#client.send('Runtime.enable').catch(debugError);\n    }\n    mainRealm() {\n        return this.#world;\n    }\n    get client() {\n        return this.#client;\n    }\n    async close() {\n        switch (this.#targetType) {\n            case TargetType.SERVICE_WORKER:\n            case TargetType.SHARED_WORKER: {\n                // For service and shared workers we need to close the target and detach to allow\n                // the worker to stop.\n                await this.client.connection()?.send('Target.closeTarget', {\n                    targetId: this.#id,\n                });\n                await this.client.connection()?.send('Target.detachFromTarget', {\n                    sessionId: this.client.id(),\n                });\n                break;\n            }\n            default:\n                await this.evaluate(() => {\n                    self.close();\n                });\n        }\n    }\n}\n//# sourceMappingURL=WebWorker.js.map","/**\n * @license\n * Copyright 2017 Google Inc.\n * SPDX-License-Identifier: Apache-2.0\n */\nvar __addDisposableResource = (this && this.__addDisposableResource) || function (env, value, async) {\n    if (value !== null && value !== void 0) {\n        if (typeof value !== \"object\" && typeof value !== \"function\") throw new TypeError(\"Object expected.\");\n        var dispose, inner;\n        if (async) {\n            if (!Symbol.asyncDispose) throw new TypeError(\"Symbol.asyncDispose is not defined.\");\n            dispose = value[Symbol.asyncDispose];\n        }\n        if (dispose === void 0) {\n            if (!Symbol.dispose) throw new TypeError(\"Symbol.dispose is not defined.\");\n            dispose = value[Symbol.dispose];\n            if (async) inner = dispose;\n        }\n        if (typeof dispose !== \"function\") throw new TypeError(\"Object not disposable.\");\n        if (inner) dispose = function() { try { inner.call(this); } catch (e) { return Promise.reject(e); } };\n        env.stack.push({ value: value, dispose: dispose, async: async });\n    }\n    else if (async) {\n        env.stack.push({ async: true });\n    }\n    return value;\n};\nvar __disposeResources = (this && this.__disposeResources) || (function (SuppressedError) {\n    return function (env) {\n        function fail(e) {\n            env.error = env.hasError ? new SuppressedError(e, env.error, \"An error was suppressed during disposal.\") : e;\n            env.hasError = true;\n        }\n        function next() {\n            while (env.stack.length) {\n                var rec = env.stack.pop();\n                try {\n                    var result = rec.dispose && rec.dispose.call(rec.value);\n                    if (rec.async) return Promise.resolve(result).then(next, function(e) { fail(e); return next(); });\n                }\n                catch (e) {\n                    fail(e);\n                }\n            }\n            if (env.hasError) throw env.error;\n        }\n        return next();\n    };\n})(typeof SuppressedError === \"function\" ? SuppressedError : function (error, suppressed, message) {\n    var e = new Error(message);\n    return e.name = \"SuppressedError\", e.error = error, e.suppressed = suppressed, e;\n});\nimport { firstValueFrom, from, raceWith } from '../../third_party/rxjs/rxjs.js';\nimport { CDPSessionEvent } from '../api/CDPSession.js';\nimport { Page, } from '../api/Page.js';\nimport { ConsoleMessage, } from '../common/ConsoleMessage.js';\nimport { TargetCloseError } from '../common/Errors.js';\nimport { EventEmitter } from '../common/EventEmitter.js';\nimport { FileChooser } from '../common/FileChooser.js';\nimport { NetworkManagerEvent } from '../common/NetworkManagerEvents.js';\nimport { debugError, evaluationString, getReadableAsTypedArray, getReadableFromProtocolStream, parsePDFOptions, timeout, validateDialogType, } from '../common/util.js';\nimport { assert } from '../util/assert.js';\nimport { Deferred } from '../util/Deferred.js';\nimport { AsyncDisposableStack } from '../util/disposable.js';\nimport { isErrorLike } from '../util/ErrorLike.js';\nimport { Binding } from './Binding.js';\nimport { CdpCDPSession } from './CDPSession.js';\nimport { isTargetClosedError } from './Connection.js';\nimport { Coverage } from './Coverage.js';\nimport { CdpDialog } from './Dialog.js';\nimport { EmulationManager } from './EmulationManager.js';\nimport { FirefoxTargetManager } from './FirefoxTargetManager.js';\nimport { FrameManager } from './FrameManager.js';\nimport { FrameManagerEvent } from './FrameManagerEvents.js';\nimport { CdpKeyboard, CdpMouse, CdpTouchscreen } from './Input.js';\nimport { MAIN_WORLD } from './IsolatedWorlds.js';\nimport { releaseObject } from './JSHandle.js';\nimport { Tracing } from './Tracing.js';\nimport { createClientError, pageBindingInitString, valueFromRemoteObject, } from './utils.js';\nimport { CdpWebWorker } from './WebWorker.js';\nfunction convertConsoleMessageLevel(method) {\n    switch (method) {\n        case 'warning':\n            return 'warn';\n        default:\n            return method;\n    }\n}\n/**\n * @internal\n */\nexport class CdpPage extends Page {\n    static async _create(client, target, defaultViewport) {\n        const page = new CdpPage(client, target);\n        await page.#initialize();\n        if (defaultViewport) {\n            try {\n                await page.setViewport(defaultViewport);\n            }\n            catch (err) {\n                if (isErrorLike(err) && isTargetClosedError(err)) {\n                    debugError(err);\n                }\n                else {\n                    throw err;\n                }\n            }\n        }\n        return page;\n    }\n    #closed = false;\n    #targetManager;\n    #primaryTargetClient;\n    #primaryTarget;\n    #tabTargetClient;\n    #tabTarget;\n    #keyboard;\n    #mouse;\n    #touchscreen;\n    #frameManager;\n    #emulationManager;\n    #tracing;\n    #bindings = new Map();\n    #exposedFunctions = new Map();\n    #coverage;\n    #viewport;\n    #workers = new Map();\n    #fileChooserDeferreds = new Set();\n    #sessionCloseDeferred = Deferred.create();\n    #serviceWorkerBypassed = false;\n    #userDragInterceptionEnabled = false;\n    constructor(client, target) {\n        super();\n        this.#primaryTargetClient = client;\n        this.#tabTargetClient = client.parentSession();\n        assert(this.#tabTargetClient, 'Tab target session is not defined.');\n        this.#tabTarget = this.#tabTargetClient._target();\n        assert(this.#tabTarget, 'Tab target is not defined.');\n        this.#primaryTarget = target;\n        this.#targetManager = target._targetManager();\n        this.#keyboard = new CdpKeyboard(client);\n        this.#mouse = new CdpMouse(client, this.#keyboard);\n        this.#touchscreen = new CdpTouchscreen(client, this.#keyboard);\n        this.#frameManager = new FrameManager(client, this, this._timeoutSettings);\n        this.#emulationManager = new EmulationManager(client);\n        this.#tracing = new Tracing(client);\n        this.#coverage = new Coverage(client);\n        this.#viewport = null;\n        const frameManagerEmitter = new EventEmitter(this.#frameManager);\n        frameManagerEmitter.on(FrameManagerEvent.FrameAttached, frame => {\n            this.emit(\"frameattached\" /* PageEvent.FrameAttached */, frame);\n        });\n        frameManagerEmitter.on(FrameManagerEvent.FrameDetached, frame => {\n            this.emit(\"framedetached\" /* PageEvent.FrameDetached */, frame);\n        });\n        frameManagerEmitter.on(FrameManagerEvent.FrameNavigated, frame => {\n            this.emit(\"framenavigated\" /* PageEvent.FrameNavigated */, frame);\n        });\n        frameManagerEmitter.on(FrameManagerEvent.ConsoleApiCalled, ([world, event]) => {\n            this.#onConsoleAPI(world, event);\n        });\n        frameManagerEmitter.on(FrameManagerEvent.BindingCalled, ([world, event]) => {\n            void this.#onBindingCalled(world, event);\n        });\n        const networkManagerEmitter = new EventEmitter(this.#frameManager.networkManager);\n        networkManagerEmitter.on(NetworkManagerEvent.Request, request => {\n            this.emit(\"request\" /* PageEvent.Request */, request);\n        });\n        networkManagerEmitter.on(NetworkManagerEvent.RequestServedFromCache, request => {\n            this.emit(\"requestservedfromcache\" /* PageEvent.RequestServedFromCache */, request);\n        });\n        networkManagerEmitter.on(NetworkManagerEvent.Response, response => {\n            this.emit(\"response\" /* PageEvent.Response */, response);\n        });\n        networkManagerEmitter.on(NetworkManagerEvent.RequestFailed, request => {\n            this.emit(\"requestfailed\" /* PageEvent.RequestFailed */, request);\n        });\n        networkManagerEmitter.on(NetworkManagerEvent.RequestFinished, request => {\n            this.emit(\"requestfinished\" /* PageEvent.RequestFinished */, request);\n        });\n        this.#tabTargetClient.on(CDPSessionEvent.Swapped, this.#onActivation.bind(this));\n        this.#tabTargetClient.on(CDPSessionEvent.Ready, this.#onSecondaryTarget.bind(this));\n        this.#targetManager.on(\"targetGone\" /* TargetManagerEvent.TargetGone */, this.#onDetachedFromTarget);\n        this.#tabTarget._isClosedDeferred\n            .valueOrThrow()\n            .then(() => {\n            this.#targetManager.off(\"targetGone\" /* TargetManagerEvent.TargetGone */, this.#onDetachedFromTarget);\n            this.emit(\"close\" /* PageEvent.Close */, undefined);\n            this.#closed = true;\n        })\n            .catch(debugError);\n        this.#setupPrimaryTargetListeners();\n        this.#attachExistingTargets();\n    }\n    #attachExistingTargets() {\n        const queue = [];\n        for (const childTarget of this.#targetManager.getChildTargets(this.#primaryTarget)) {\n            queue.push(childTarget);\n        }\n        let idx = 0;\n        while (idx < queue.length) {\n            const next = queue[idx];\n            idx++;\n            const session = next._session();\n            if (session) {\n                this.#onAttachedToTarget(session);\n            }\n            for (const childTarget of this.#targetManager.getChildTargets(next)) {\n                queue.push(childTarget);\n            }\n        }\n    }\n    async #onActivation(newSession) {\n        this.#primaryTargetClient = newSession;\n        assert(this.#primaryTargetClient instanceof CdpCDPSession, 'CDPSession is not instance of CDPSessionImpl');\n        this.#primaryTarget = this.#primaryTargetClient._target();\n        assert(this.#primaryTarget, 'Missing target on swap');\n        this.#keyboard.updateClient(newSession);\n        this.#mouse.updateClient(newSession);\n        this.#touchscreen.updateClient(newSession);\n        this.#emulationManager.updateClient(newSession);\n        this.#tracing.updateClient(newSession);\n        this.#coverage.updateClient(newSession);\n        await this.#frameManager.swapFrameTree(newSession);\n        this.#setupPrimaryTargetListeners();\n    }\n    async #onSecondaryTarget(session) {\n        assert(session instanceof CdpCDPSession);\n        if (session._target()._subtype() !== 'prerender') {\n            return;\n        }\n        this.#frameManager.registerSpeculativeSession(session).catch(debugError);\n        this.#emulationManager\n            .registerSpeculativeSession(session)\n            .catch(debugError);\n    }\n    /**\n     * Sets up listeners for the primary target. The primary target can change\n     * during a navigation to a prerended page.\n     */\n    #setupPrimaryTargetListeners() {\n        const clientEmitter = new EventEmitter(this.#primaryTargetClient);\n        clientEmitter.on(CDPSessionEvent.Ready, this.#onAttachedToTarget);\n        clientEmitter.on(CDPSessionEvent.Disconnected, () => {\n            this.#sessionCloseDeferred.reject(new TargetCloseError('Target closed'));\n        });\n        clientEmitter.on('Page.domContentEventFired', () => {\n            this.emit(\"domcontentloaded\" /* PageEvent.DOMContentLoaded */, undefined);\n        });\n        clientEmitter.on('Page.loadEventFired', () => {\n            this.emit(\"load\" /* PageEvent.Load */, undefined);\n        });\n        clientEmitter.on('Page.javascriptDialogOpening', this.#onDialog.bind(this));\n        clientEmitter.on('Runtime.exceptionThrown', this.#handleException.bind(this));\n        clientEmitter.on('Inspector.targetCrashed', this.#onTargetCrashed.bind(this));\n        clientEmitter.on('Performance.metrics', this.#emitMetrics.bind(this));\n        clientEmitter.on('Log.entryAdded', this.#onLogEntryAdded.bind(this));\n        clientEmitter.on('Page.fileChooserOpened', this.#onFileChooser.bind(this));\n    }\n    #onDetachedFromTarget = (target) => {\n        const sessionId = target._session()?.id();\n        const worker = this.#workers.get(sessionId);\n        if (!worker) {\n            return;\n        }\n        this.#workers.delete(sessionId);\n        this.emit(\"workerdestroyed\" /* PageEvent.WorkerDestroyed */, worker);\n    };\n    #onAttachedToTarget = (session) => {\n        assert(session instanceof CdpCDPSession);\n        this.#frameManager.onAttachedToTarget(session._target());\n        if (session._target()._getTargetInfo().type === 'worker') {\n            const worker = new CdpWebWorker(session, session._target().url(), session._target()._targetId, session._target().type(), this.#addConsoleMessage.bind(this), this.#handleException.bind(this));\n            this.#workers.set(session.id(), worker);\n            this.emit(\"workercreated\" /* PageEvent.WorkerCreated */, worker);\n        }\n        session.on(CDPSessionEvent.Ready, this.#onAttachedToTarget);\n    };\n    async #initialize() {\n        try {\n            await Promise.all([\n                this.#frameManager.initialize(this.#primaryTargetClient),\n                this.#primaryTargetClient.send('Performance.enable'),\n                this.#primaryTargetClient.send('Log.enable'),\n            ]);\n        }\n        catch (err) {\n            if (isErrorLike(err) && isTargetClosedError(err)) {\n                debugError(err);\n            }\n            else {\n                throw err;\n            }\n        }\n    }\n    async #onFileChooser(event) {\n        const env_1 = { stack: [], error: void 0, hasError: false };\n        try {\n            if (!this.#fileChooserDeferreds.size) {\n                return;\n            }\n            const frame = this.#frameManager.frame(event.frameId);\n            assert(frame, 'This should never happen.');\n            // This is guaranteed to be an HTMLInputElement handle by the event.\n            const handle = __addDisposableResource(env_1, (await frame.worlds[MAIN_WORLD].adoptBackendNode(event.backendNodeId)), false);\n            const fileChooser = new FileChooser(handle.move(), event);\n            for (const promise of this.#fileChooserDeferreds) {\n                promise.resolve(fileChooser);\n            }\n            this.#fileChooserDeferreds.clear();\n        }\n        catch (e_1) {\n            env_1.error = e_1;\n            env_1.hasError = true;\n        }\n        finally {\n            __disposeResources(env_1);\n        }\n    }\n    _client() {\n        return this.#primaryTargetClient;\n    }\n    isServiceWorkerBypassed() {\n        return this.#serviceWorkerBypassed;\n    }\n    isDragInterceptionEnabled() {\n        return this.#userDragInterceptionEnabled;\n    }\n    isJavaScriptEnabled() {\n        return this.#emulationManager.javascriptEnabled;\n    }\n    async waitForFileChooser(options = {}) {\n        const needsEnable = this.#fileChooserDeferreds.size === 0;\n        const { timeout = this._timeoutSettings.timeout() } = options;\n        const deferred = Deferred.create({\n            message: `Waiting for \\`FileChooser\\` failed: ${timeout}ms exceeded`,\n            timeout,\n        });\n        if (options.signal) {\n            options.signal.addEventListener('abort', () => {\n                deferred.reject(options.signal?.reason);\n            }, { once: true });\n        }\n        this.#fileChooserDeferreds.add(deferred);\n        let enablePromise;\n        if (needsEnable) {\n            enablePromise = this.#primaryTargetClient.send('Page.setInterceptFileChooserDialog', {\n                enabled: true,\n            });\n        }\n        try {\n            const [result] = await Promise.all([\n                deferred.valueOrThrow(),\n                enablePromise,\n            ]);\n            return result;\n        }\n        catch (error) {\n            this.#fileChooserDeferreds.delete(deferred);\n            throw error;\n        }\n    }\n    async setGeolocation(options) {\n        return await this.#emulationManager.setGeolocation(options);\n    }\n    target() {\n        return this.#primaryTarget;\n    }\n    browser() {\n        return this.#primaryTarget.browser();\n    }\n    browserContext() {\n        return this.#primaryTarget.browserContext();\n    }\n    #onTargetCrashed() {\n        this.emit(\"error\" /* PageEvent.Error */, new Error('Page crashed!'));\n    }\n    #onLogEntryAdded(event) {\n        const { level, text, args, source, url, lineNumber } = event.entry;\n        if (args) {\n            args.map(arg => {\n                void releaseObject(this.#primaryTargetClient, arg);\n            });\n        }\n        if (source !== 'worker') {\n            this.emit(\"console\" /* PageEvent.Console */, new ConsoleMessage(convertConsoleMessageLevel(level), text, [], [{ url, lineNumber }]));\n        }\n    }\n    mainFrame() {\n        return this.#frameManager.mainFrame();\n    }\n    get keyboard() {\n        return this.#keyboard;\n    }\n    get touchscreen() {\n        return this.#touchscreen;\n    }\n    get coverage() {\n        return this.#coverage;\n    }\n    get tracing() {\n        return this.#tracing;\n    }\n    frames() {\n        return this.#frameManager.frames();\n    }\n    workers() {\n        return Array.from(this.#workers.values());\n    }\n    async setRequestInterception(value) {\n        return await this.#frameManager.networkManager.setRequestInterception(value);\n    }\n    async setBypassServiceWorker(bypass) {\n        this.#serviceWorkerBypassed = bypass;\n        return await this.#primaryTargetClient.send('Network.setBypassServiceWorker', { bypass });\n    }\n    async setDragInterception(enabled) {\n        this.#userDragInterceptionEnabled = enabled;\n        return await this.#primaryTargetClient.send('Input.setInterceptDrags', {\n            enabled,\n        });\n    }\n    async setOfflineMode(enabled) {\n        return await this.#frameManager.networkManager.setOfflineMode(enabled);\n    }\n    async emulateNetworkConditions(networkConditions) {\n        return await this.#frameManager.networkManager.emulateNetworkConditions(networkConditions);\n    }\n    setDefaultNavigationTimeout(timeout) {\n        this._timeoutSettings.setDefaultNavigationTimeout(timeout);\n    }\n    setDefaultTimeout(timeout) {\n        this._timeoutSettings.setDefaultTimeout(timeout);\n    }\n    getDefaultTimeout() {\n        return this._timeoutSettings.timeout();\n    }\n    async queryObjects(prototypeHandle) {\n        assert(!prototypeHandle.disposed, 'Prototype JSHandle is disposed!');\n        assert(prototypeHandle.id, 'Prototype JSHandle must not be referencing primitive value');\n        const response = await this.mainFrame().client.send('Runtime.queryObjects', {\n            prototypeObjectId: prototypeHandle.id,\n        });\n        return this.mainFrame()\n            .mainRealm()\n            .createCdpHandle(response.objects);\n    }\n    async cookies(...urls) {\n        const originalCookies = (await this.#primaryTargetClient.send('Network.getCookies', {\n            urls: urls.length ? urls : [this.url()],\n        })).cookies;\n        const unsupportedCookieAttributes = ['sourcePort'];\n        const filterUnsupportedAttributes = (cookie) => {\n            for (const attr of unsupportedCookieAttributes) {\n                delete cookie[attr];\n            }\n            return cookie;\n        };\n        return originalCookies.map(filterUnsupportedAttributes).map(cookie => {\n            return {\n                ...cookie,\n                // TODO: a breaking change is needed in Puppeteer types to support other\n                // partition keys.\n                partitionKey: cookie.partitionKey\n                    ? cookie.partitionKey.topLevelSite\n                    : undefined,\n            };\n        });\n    }\n    async deleteCookie(...cookies) {\n        const pageURL = this.url();\n        for (const cookie of cookies) {\n            const item = {\n                ...cookie,\n                // TODO: a breaking change neeeded to change the partition key\n                // type in Puppeteer.\n                partitionKey: cookie.partitionKey\n                    ? { topLevelSite: cookie.partitionKey, hasCrossSiteAncestor: false }\n                    : undefined,\n            };\n            if (!cookie.url && pageURL.startsWith('http')) {\n                item.url = pageURL;\n            }\n            await this.#primaryTargetClient.send('Network.deleteCookies', item);\n            if (pageURL.startsWith('http') && !item.partitionKey) {\n                const url = new URL(pageURL);\n                // Delete also cookies from the page's partition.\n                await this.#primaryTargetClient.send('Network.deleteCookies', {\n                    ...item,\n                    partitionKey: {\n                        topLevelSite: url.origin.replace(`:${url.port}`, ''),\n                        hasCrossSiteAncestor: false,\n                    },\n                });\n            }\n        }\n    }\n    async setCookie(...cookies) {\n        const pageURL = this.url();\n        const startsWithHTTP = pageURL.startsWith('http');\n        const items = cookies.map(cookie => {\n            const item = Object.assign({}, cookie);\n            if (!item.url && startsWithHTTP) {\n                item.url = pageURL;\n            }\n            assert(item.url !== 'about:blank', `Blank page can not have cookie \"${item.name}\"`);\n            assert(!String.prototype.startsWith.call(item.url || '', 'data:'), `Data URL page can not have cookie \"${item.name}\"`);\n            return item;\n        });\n        await this.deleteCookie(...items);\n        if (items.length) {\n            await this.#primaryTargetClient.send('Network.setCookies', {\n                cookies: items.map(cookieParam => {\n                    return {\n                        ...cookieParam,\n                        partitionKey: cookieParam.partitionKey\n                            ? {\n                                // TODO: a breaking change neeeded to change the partition key\n                                // type in Puppeteer.\n                                topLevelSite: cookieParam.partitionKey,\n                                hasCrossSiteAncestor: false,\n                            }\n                            : undefined,\n                    };\n                }),\n            });\n        }\n    }\n    async exposeFunction(name, pptrFunction) {\n        if (this.#bindings.has(name)) {\n            throw new Error(`Failed to add page binding with name ${name}: window['${name}'] already exists!`);\n        }\n        const source = pageBindingInitString('exposedFun', name);\n        let binding;\n        switch (typeof pptrFunction) {\n            case 'function':\n                binding = new Binding(name, pptrFunction, source);\n                break;\n            default:\n                binding = new Binding(name, pptrFunction.default, source);\n                break;\n        }\n        this.#bindings.set(name, binding);\n        const [{ identifier }] = await Promise.all([\n            this.#frameManager.evaluateOnNewDocument(source),\n            this.#frameManager.addExposedFunctionBinding(binding),\n        ]);\n        this.#exposedFunctions.set(name, identifier);\n    }\n    async removeExposedFunction(name) {\n        const exposedFunctionId = this.#exposedFunctions.get(name);\n        if (!exposedFunctionId) {\n            throw new Error(`Function with name \"${name}\" does not exist`);\n        }\n        // #bindings must be updated together with #exposedFunctions.\n        const binding = this.#bindings.get(name);\n        this.#exposedFunctions.delete(name);\n        this.#bindings.delete(name);\n        await Promise.all([\n            this.#frameManager.removeScriptToEvaluateOnNewDocument(exposedFunctionId),\n            this.#frameManager.removeExposedFunctionBinding(binding),\n        ]);\n    }\n    async authenticate(credentials) {\n        return await this.#frameManager.networkManager.authenticate(credentials);\n    }\n    async setExtraHTTPHeaders(headers) {\n        return await this.#frameManager.networkManager.setExtraHTTPHeaders(headers);\n    }\n    async setUserAgent(userAgent, userAgentMetadata) {\n        return await this.#frameManager.networkManager.setUserAgent(userAgent, userAgentMetadata);\n    }\n    async metrics() {\n        const response = await this.#primaryTargetClient.send('Performance.getMetrics');\n        return this.#buildMetricsObject(response.metrics);\n    }\n    #emitMetrics(event) {\n        this.emit(\"metrics\" /* PageEvent.Metrics */, {\n            title: event.title,\n            metrics: this.#buildMetricsObject(event.metrics),\n        });\n    }\n    #buildMetricsObject(metrics) {\n        const result = {};\n        for (const metric of metrics || []) {\n            if (supportedMetrics.has(metric.name)) {\n                result[metric.name] = metric.value;\n            }\n        }\n        return result;\n    }\n    #handleException(exception) {\n        this.emit(\"pageerror\" /* PageEvent.PageError */, createClientError(exception.exceptionDetails));\n    }\n    #onConsoleAPI(world, event) {\n        const values = event.args.map(arg => {\n            return world.createCdpHandle(arg);\n        });\n        this.#addConsoleMessage(convertConsoleMessageLevel(event.type), values, event.stackTrace);\n    }\n    async #onBindingCalled(world, event) {\n        let payload;\n        try {\n            payload = JSON.parse(event.payload);\n        }\n        catch {\n            // The binding was either called by something in the page or it was\n            // called before our wrapper was initialized.\n            return;\n        }\n        const { type, name, seq, args, isTrivial } = payload;\n        if (type !== 'exposedFun') {\n            return;\n        }\n        const context = world.context;\n        if (!context) {\n            return;\n        }\n        const binding = this.#bindings.get(name);\n        await binding?.run(context, seq, args, isTrivial);\n    }\n    #addConsoleMessage(eventType, args, stackTrace) {\n        if (!this.listenerCount(\"console\" /* PageEvent.Console */)) {\n            args.forEach(arg => {\n                return arg.dispose();\n            });\n            return;\n        }\n        const textTokens = [];\n        // eslint-disable-next-line max-len -- The comment is long.\n        // eslint-disable-next-line rulesdir/use-using -- These are not owned by this function.\n        for (const arg of args) {\n            const remoteObject = arg.remoteObject();\n            if (remoteObject.objectId) {\n                textTokens.push(arg.toString());\n            }\n            else {\n                textTokens.push(valueFromRemoteObject(remoteObject));\n            }\n        }\n        const stackTraceLocations = [];\n        if (stackTrace) {\n            for (const callFrame of stackTrace.callFrames) {\n                stackTraceLocations.push({\n                    url: callFrame.url,\n                    lineNumber: callFrame.lineNumber,\n                    columnNumber: callFrame.columnNumber,\n                });\n            }\n        }\n        const message = new ConsoleMessage(convertConsoleMessageLevel(eventType), textTokens.join(' '), args, stackTraceLocations);\n        this.emit(\"console\" /* PageEvent.Console */, message);\n    }\n    #onDialog(event) {\n        const type = validateDialogType(event.type);\n        const dialog = new CdpDialog(this.#primaryTargetClient, type, event.message, event.defaultPrompt);\n        this.emit(\"dialog\" /* PageEvent.Dialog */, dialog);\n    }\n    async reload(options) {\n        const [result] = await Promise.all([\n            this.waitForNavigation({\n                ...options,\n                ignoreSameDocumentNavigation: true,\n            }),\n            this.#primaryTargetClient.send('Page.reload'),\n        ]);\n        return result;\n    }\n    async createCDPSession() {\n        return await this.target().createCDPSession();\n    }\n    async goBack(options = {}) {\n        return await this.#go(-1, options);\n    }\n    async goForward(options = {}) {\n        return await this.#go(+1, options);\n    }\n    async #go(delta, options) {\n        const history = await this.#primaryTargetClient.send('Page.getNavigationHistory');\n        const entry = history.entries[history.currentIndex + delta];\n        if (!entry) {\n            return null;\n        }\n        const result = await Promise.all([\n            this.waitForNavigation(options),\n            this.#primaryTargetClient.send('Page.navigateToHistoryEntry', {\n                entryId: entry.id,\n            }),\n        ]);\n        return result[0];\n    }\n    async bringToFront() {\n        await this.#primaryTargetClient.send('Page.bringToFront');\n    }\n    async setJavaScriptEnabled(enabled) {\n        return await this.#emulationManager.setJavaScriptEnabled(enabled);\n    }\n    async setBypassCSP(enabled) {\n        await this.#primaryTargetClient.send('Page.setBypassCSP', { enabled });\n    }\n    async emulateMediaType(type) {\n        return await this.#emulationManager.emulateMediaType(type);\n    }\n    async emulateCPUThrottling(factor) {\n        return await this.#emulationManager.emulateCPUThrottling(factor);\n    }\n    async emulateMediaFeatures(features) {\n        return await this.#emulationManager.emulateMediaFeatures(features);\n    }\n    async emulateTimezone(timezoneId) {\n        return await this.#emulationManager.emulateTimezone(timezoneId);\n    }\n    async emulateIdleState(overrides) {\n        return await this.#emulationManager.emulateIdleState(overrides);\n    }\n    async emulateVisionDeficiency(type) {\n        return await this.#emulationManager.emulateVisionDeficiency(type);\n    }\n    async setViewport(viewport) {\n        const needsReload = await this.#emulationManager.emulateViewport(viewport);\n        this.#viewport = viewport;\n        if (needsReload) {\n            await this.reload();\n        }\n    }\n    viewport() {\n        return this.#viewport;\n    }\n    async evaluateOnNewDocument(pageFunction, ...args) {\n        const source = evaluationString(pageFunction, ...args);\n        return await this.#frameManager.evaluateOnNewDocument(source);\n    }\n    async removeScriptToEvaluateOnNewDocument(identifier) {\n        return await this.#frameManager.removeScriptToEvaluateOnNewDocument(identifier);\n    }\n    async setCacheEnabled(enabled = true) {\n        await this.#frameManager.networkManager.setCacheEnabled(enabled);\n    }\n    async _screenshot(options) {\n        const env_2 = { stack: [], error: void 0, hasError: false };\n        try {\n            const { fromSurface, omitBackground, optimizeForSpeed, quality, clip: userClip, type, captureBeyondViewport, } = options;\n            const isFirefox = this.target()._targetManager() instanceof FirefoxTargetManager;\n            const stack = __addDisposableResource(env_2, new AsyncDisposableStack(), true);\n            // Firefox omits background by default; it's not configurable.\n            if (!isFirefox && omitBackground && (type === 'png' || type === 'webp')) {\n                await this.#emulationManager.setTransparentBackgroundColor();\n                stack.defer(async () => {\n                    await this.#emulationManager\n                        .resetDefaultBackgroundColor()\n                        .catch(debugError);\n                });\n            }\n            let clip = userClip;\n            if (clip && !captureBeyondViewport) {\n                const viewport = await this.mainFrame()\n                    .isolatedRealm()\n                    .evaluate(() => {\n                    const { height, pageLeft: x, pageTop: y, width, } = window.visualViewport;\n                    return { x, y, height, width };\n                });\n                clip = getIntersectionRect(clip, viewport);\n            }\n            // We need to do these spreads because Firefox doesn't allow unknown options.\n            const { data } = await this.#primaryTargetClient.send('Page.captureScreenshot', {\n                format: type,\n                ...(optimizeForSpeed ? { optimizeForSpeed } : {}),\n                ...(quality !== undefined ? { quality: Math.round(quality) } : {}),\n                ...(clip ? { clip: { ...clip, scale: clip.scale ?? 1 } } : {}),\n                ...(!fromSurface ? { fromSurface } : {}),\n                captureBeyondViewport,\n            });\n            return data;\n        }\n        catch (e_2) {\n            env_2.error = e_2;\n            env_2.hasError = true;\n        }\n        finally {\n            const result_1 = __disposeResources(env_2);\n            if (result_1)\n                await result_1;\n        }\n    }\n    async createPDFStream(options = {}) {\n        const { timeout: ms = this._timeoutSettings.timeout() } = options;\n        const { landscape, displayHeaderFooter, headerTemplate, footerTemplate, printBackground, scale, width: paperWidth, height: paperHeight, margin, pageRanges, preferCSSPageSize, omitBackground, tagged: generateTaggedPDF, outline: generateDocumentOutline, waitForFonts, } = parsePDFOptions(options);\n        if (omitBackground) {\n            await this.#emulationManager.setTransparentBackgroundColor();\n        }\n        if (waitForFonts) {\n            await firstValueFrom(from(this.mainFrame()\n                .isolatedRealm()\n                .evaluate(() => {\n                return document.fonts.ready;\n            })).pipe(raceWith(timeout(ms))));\n        }\n        const printCommandPromise = this.#primaryTargetClient.send('Page.printToPDF', {\n            transferMode: 'ReturnAsStream',\n            landscape,\n            displayHeaderFooter,\n            headerTemplate,\n            footerTemplate,\n            printBackground,\n            scale,\n            paperWidth,\n            paperHeight,\n            marginTop: margin.top,\n            marginBottom: margin.bottom,\n            marginLeft: margin.left,\n            marginRight: margin.right,\n            pageRanges,\n            preferCSSPageSize,\n            generateTaggedPDF,\n            generateDocumentOutline,\n        });\n        const result = await firstValueFrom(from(printCommandPromise).pipe(raceWith(timeout(ms))));\n        if (omitBackground) {\n            await this.#emulationManager.resetDefaultBackgroundColor();\n        }\n        assert(result.stream, '`stream` is missing from `Page.printToPDF');\n        return await getReadableFromProtocolStream(this.#primaryTargetClient, result.stream);\n    }\n    async pdf(options = {}) {\n        const { path = undefined } = options;\n        const readable = await this.createPDFStream(options);\n        const typedArray = await getReadableAsTypedArray(readable, path);\n        assert(typedArray, 'Could not create typed array');\n        return typedArray;\n    }\n    async close(options = { runBeforeUnload: undefined }) {\n        const env_3 = { stack: [], error: void 0, hasError: false };\n        try {\n            const _guard = __addDisposableResource(env_3, await this.browserContext().waitForScreenshotOperations(), false);\n            const connection = this.#primaryTargetClient.connection();\n            assert(connection, 'Protocol error: Connection closed. Most likely the page has been closed.');\n            const runBeforeUnload = !!options.runBeforeUnload;\n            if (runBeforeUnload) {\n                await this.#primaryTargetClient.send('Page.close');\n            }\n            else {\n                await connection.send('Target.closeTarget', {\n                    targetId: this.#primaryTarget._targetId,\n                });\n                await this.#tabTarget._isClosedDeferred.valueOrThrow();\n            }\n        }\n        catch (e_3) {\n            env_3.error = e_3;\n            env_3.hasError = true;\n        }\n        finally {\n            __disposeResources(env_3);\n        }\n    }\n    isClosed() {\n        return this.#closed;\n    }\n    get mouse() {\n        return this.#mouse;\n    }\n    /**\n     * This method is typically coupled with an action that triggers a device\n     * request from an api such as WebBluetooth.\n     *\n     * :::caution\n     *\n     * This must be called before the device request is made. It will not return a\n     * currently active device prompt.\n     *\n     * :::\n     *\n     * @example\n     *\n     * ```ts\n     * const [devicePrompt] = Promise.all([\n     *   page.waitForDevicePrompt(),\n     *   page.click('#connect-bluetooth'),\n     * ]);\n     * await devicePrompt.select(\n     *   await devicePrompt.waitForDevice(({name}) => name.includes('My Device'))\n     * );\n     * ```\n     */\n    async waitForDevicePrompt(options = {}) {\n        return await this.mainFrame().waitForDevicePrompt(options);\n    }\n}\nconst supportedMetrics = new Set([\n    'Timestamp',\n    'Documents',\n    'Frames',\n    'JSEventListeners',\n    'Nodes',\n    'LayoutCount',\n    'RecalcStyleCount',\n    'LayoutDuration',\n    'RecalcStyleDuration',\n    'ScriptDuration',\n    'TaskDuration',\n    'JSHeapUsedSize',\n    'JSHeapTotalSize',\n]);\n/** @see https://w3c.github.io/webdriver-bidi/#rectangle-intersection */\nfunction getIntersectionRect(clip, viewport) {\n    // Note these will already be normalized.\n    const x = Math.max(clip.x, viewport.x);\n    const y = Math.max(clip.y, viewport.y);\n    return {\n        x,\n        y,\n        width: Math.max(Math.min(clip.x + clip.width, viewport.x + viewport.width) - x, 0),\n        height: Math.max(Math.min(clip.y + clip.height, viewport.y + viewport.height) - y, 0),\n    };\n}\n//# sourceMappingURL=Page.js.map","/**\n * @license\n * Copyright 2019 Google Inc.\n * SPDX-License-Identifier: Apache-2.0\n */\nimport { Target, TargetType } from '../api/Target.js';\nimport { debugError } from '../common/util.js';\nimport { Deferred } from '../util/Deferred.js';\nimport { CdpCDPSession } from './CDPSession.js';\nimport { CdpPage } from './Page.js';\nimport { CdpWebWorker } from './WebWorker.js';\n/**\n * @internal\n */\nexport var InitializationStatus;\n(function (InitializationStatus) {\n    InitializationStatus[\"SUCCESS\"] = \"success\";\n    InitializationStatus[\"ABORTED\"] = \"aborted\";\n})(InitializationStatus || (InitializationStatus = {}));\n/**\n * @internal\n */\nexport class CdpTarget extends Target {\n    #browserContext;\n    #session;\n    #targetInfo;\n    #targetManager;\n    #sessionFactory;\n    #childTargets = new Set();\n    _initializedDeferred = Deferred.create();\n    _isClosedDeferred = Deferred.create();\n    _targetId;\n    /**\n     * To initialize the target for use, call initialize.\n     *\n     * @internal\n     */\n    constructor(targetInfo, session, browserContext, targetManager, sessionFactory) {\n        super();\n        this.#session = session;\n        this.#targetManager = targetManager;\n        this.#targetInfo = targetInfo;\n        this.#browserContext = browserContext;\n        this._targetId = targetInfo.targetId;\n        this.#sessionFactory = sessionFactory;\n        if (this.#session && this.#session instanceof CdpCDPSession) {\n            this.#session._setTarget(this);\n        }\n    }\n    async asPage() {\n        const session = this._session();\n        if (!session) {\n            return await this.createCDPSession().then(client => {\n                return CdpPage._create(client, this, null);\n            });\n        }\n        return await CdpPage._create(session, this, null);\n    }\n    _subtype() {\n        return this.#targetInfo.subtype;\n    }\n    _session() {\n        return this.#session;\n    }\n    _addChildTarget(target) {\n        this.#childTargets.add(target);\n    }\n    _removeChildTarget(target) {\n        this.#childTargets.delete(target);\n    }\n    _childTargets() {\n        return this.#childTargets;\n    }\n    _sessionFactory() {\n        if (!this.#sessionFactory) {\n            throw new Error('sessionFactory is not initialized');\n        }\n        return this.#sessionFactory;\n    }\n    createCDPSession() {\n        if (!this.#sessionFactory) {\n            throw new Error('sessionFactory is not initialized');\n        }\n        return this.#sessionFactory(false).then(session => {\n            session._setTarget(this);\n            return session;\n        });\n    }\n    url() {\n        return this.#targetInfo.url;\n    }\n    type() {\n        const type = this.#targetInfo.type;\n        switch (type) {\n            case 'page':\n                return TargetType.PAGE;\n            case 'background_page':\n                return TargetType.BACKGROUND_PAGE;\n            case 'service_worker':\n                return TargetType.SERVICE_WORKER;\n            case 'shared_worker':\n                return TargetType.SHARED_WORKER;\n            case 'browser':\n                return TargetType.BROWSER;\n            case 'webview':\n                return TargetType.WEBVIEW;\n            case 'tab':\n                return TargetType.TAB;\n            default:\n                return TargetType.OTHER;\n        }\n    }\n    _targetManager() {\n        if (!this.#targetManager) {\n            throw new Error('targetManager is not initialized');\n        }\n        return this.#targetManager;\n    }\n    _getTargetInfo() {\n        return this.#targetInfo;\n    }\n    browser() {\n        if (!this.#browserContext) {\n            throw new Error('browserContext is not initialized');\n        }\n        return this.#browserContext.browser();\n    }\n    browserContext() {\n        if (!this.#browserContext) {\n            throw new Error('browserContext is not initialized');\n        }\n        return this.#browserContext;\n    }\n    opener() {\n        const { openerId } = this.#targetInfo;\n        if (!openerId) {\n            return;\n        }\n        return this.browser()\n            .targets()\n            .find(target => {\n            return target._targetId === openerId;\n        });\n    }\n    _targetInfoChanged(targetInfo) {\n        this.#targetInfo = targetInfo;\n        this._checkIfInitialized();\n    }\n    _initialize() {\n        this._initializedDeferred.resolve(InitializationStatus.SUCCESS);\n    }\n    _isTargetExposed() {\n        return this.type() !== TargetType.TAB && !this._subtype();\n    }\n    _checkIfInitialized() {\n        if (!this._initializedDeferred.resolved()) {\n            this._initializedDeferred.resolve(InitializationStatus.SUCCESS);\n        }\n    }\n}\n/**\n * @internal\n */\nexport class PageTarget extends CdpTarget {\n    #defaultViewport;\n    pagePromise;\n    constructor(targetInfo, session, browserContext, targetManager, sessionFactory, defaultViewport) {\n        super(targetInfo, session, browserContext, targetManager, sessionFactory);\n        this.#defaultViewport = defaultViewport ?? undefined;\n    }\n    _initialize() {\n        this._initializedDeferred\n            .valueOrThrow()\n            .then(async (result) => {\n            if (result === InitializationStatus.ABORTED) {\n                return;\n            }\n            const opener = this.opener();\n            if (!(opener instanceof PageTarget)) {\n                return;\n            }\n            if (!opener || !opener.pagePromise || this.type() !== 'page') {\n                return true;\n            }\n            const openerPage = await opener.pagePromise;\n            if (!openerPage.listenerCount(\"popup\" /* PageEvent.Popup */)) {\n                return true;\n            }\n            const popupPage = await this.page();\n            openerPage.emit(\"popup\" /* PageEvent.Popup */, popupPage);\n            return true;\n        })\n            .catch(debugError);\n        this._checkIfInitialized();\n    }\n    async page() {\n        if (!this.pagePromise) {\n            const session = this._session();\n            this.pagePromise = (session\n                ? Promise.resolve(session)\n                : this._sessionFactory()(/* isAutoAttachEmulated=*/ false)).then(client => {\n                return CdpPage._create(client, this, this.#defaultViewport ?? null);\n            });\n        }\n        return (await this.pagePromise) ?? null;\n    }\n    _checkIfInitialized() {\n        if (this._initializedDeferred.resolved()) {\n            return;\n        }\n        if (this._getTargetInfo().url !== '') {\n            this._initializedDeferred.resolve(InitializationStatus.SUCCESS);\n        }\n    }\n}\n/**\n * @internal\n */\nexport class DevToolsTarget extends PageTarget {\n}\n/**\n * @internal\n */\nexport class WorkerTarget extends CdpTarget {\n    #workerPromise;\n    async worker() {\n        if (!this.#workerPromise) {\n            const session = this._session();\n            // TODO(einbinder): Make workers send their console logs.\n            this.#workerPromise = (session\n                ? Promise.resolve(session)\n                : this._sessionFactory()(/* isAutoAttachEmulated=*/ false)).then(client => {\n                return new CdpWebWorker(client, this._getTargetInfo().url, this._targetId, this.type(), () => { } /* consoleAPICalled */, () => { } /* exceptionThrown */);\n            });\n        }\n        return await this.#workerPromise;\n    }\n}\n/**\n * @internal\n */\nexport class OtherTarget extends CdpTarget {\n}\n//# sourceMappingURL=Target.js.map","/**\n * @license\n * Copyright 2022 Google Inc.\n * SPDX-License-Identifier: Apache-2.0\n */\nimport { CDPSession, CDPSessionEvent } from '../api/CDPSession.js';\nimport { EventEmitter } from '../common/EventEmitter.js';\nimport { debugError } from '../common/util.js';\nimport { assert } from '../util/assert.js';\nimport { Deferred } from '../util/Deferred.js';\nimport { CdpTarget, InitializationStatus } from './Target.js';\nfunction isPageTargetBecomingPrimary(target, newTargetInfo) {\n    return Boolean(target._subtype()) && !newTargetInfo.subtype;\n}\n/**\n * ChromeTargetManager uses the CDP's auto-attach mechanism to intercept\n * new targets and allow the rest of Puppeteer to configure listeners while\n * the target is paused.\n *\n * @internal\n */\nexport class ChromeTargetManager extends EventEmitter {\n    #connection;\n    /**\n     * Keeps track of the following events: 'Target.targetCreated',\n     * 'Target.targetDestroyed', 'Target.targetInfoChanged'.\n     *\n     * A target becomes discovered when 'Target.targetCreated' is received.\n     * A target is removed from this map once 'Target.targetDestroyed' is\n     * received.\n     *\n     * `targetFilterCallback` has no effect on this map.\n     */\n    #discoveredTargetsByTargetId = new Map();\n    /**\n     * A target is added to this map once ChromeTargetManager has created\n     * a Target and attached at least once to it.\n     */\n    #attachedTargetsByTargetId = new Map();\n    /**\n     * Tracks which sessions attach to which target.\n     */\n    #attachedTargetsBySessionId = new Map();\n    /**\n     * If a target was filtered out by `targetFilterCallback`, we still receive\n     * events about it from CDP, but we don't forward them to the rest of Puppeteer.\n     */\n    #ignoredTargets = new Set();\n    #targetFilterCallback;\n    #targetFactory;\n    #attachedToTargetListenersBySession = new WeakMap();\n    #detachedFromTargetListenersBySession = new WeakMap();\n    #initializeDeferred = Deferred.create();\n    #targetsIdsForInit = new Set();\n    #waitForInitiallyDiscoveredTargets = true;\n    #discoveryFilter = [{}];\n    constructor(connection, targetFactory, targetFilterCallback, waitForInitiallyDiscoveredTargets = true) {\n        super();\n        this.#connection = connection;\n        this.#targetFilterCallback = targetFilterCallback;\n        this.#targetFactory = targetFactory;\n        this.#waitForInitiallyDiscoveredTargets = waitForInitiallyDiscoveredTargets;\n        this.#connection.on('Target.targetCreated', this.#onTargetCreated);\n        this.#connection.on('Target.targetDestroyed', this.#onTargetDestroyed);\n        this.#connection.on('Target.targetInfoChanged', this.#onTargetInfoChanged);\n        this.#connection.on(CDPSessionEvent.SessionDetached, this.#onSessionDetached);\n        this.#setupAttachmentListeners(this.#connection);\n    }\n    #storeExistingTargetsForInit = () => {\n        if (!this.#waitForInitiallyDiscoveredTargets) {\n            return;\n        }\n        for (const [targetId, targetInfo,] of this.#discoveredTargetsByTargetId.entries()) {\n            const targetForFilter = new CdpTarget(targetInfo, undefined, undefined, this, undefined);\n            // Only wait for pages and frames (except those from extensions)\n            // to auto-attach.\n            const isPageOrFrame = targetInfo.type === 'page' || targetInfo.type === 'iframe';\n            const isExtension = targetInfo.url.startsWith('chrome-extension://');\n            if ((!this.#targetFilterCallback ||\n                this.#targetFilterCallback(targetForFilter)) &&\n                isPageOrFrame &&\n                !isExtension) {\n                this.#targetsIdsForInit.add(targetId);\n            }\n        }\n    };\n    async initialize() {\n        await this.#connection.send('Target.setDiscoverTargets', {\n            discover: true,\n            filter: this.#discoveryFilter,\n        });\n        this.#storeExistingTargetsForInit();\n        await this.#connection.send('Target.setAutoAttach', {\n            waitForDebuggerOnStart: true,\n            flatten: true,\n            autoAttach: true,\n            filter: [\n                {\n                    type: 'page',\n                    exclude: true,\n                },\n                ...this.#discoveryFilter,\n            ],\n        });\n        this.#finishInitializationIfReady();\n        await this.#initializeDeferred.valueOrThrow();\n    }\n    getChildTargets(target) {\n        return target._childTargets();\n    }\n    dispose() {\n        this.#connection.off('Target.targetCreated', this.#onTargetCreated);\n        this.#connection.off('Target.targetDestroyed', this.#onTargetDestroyed);\n        this.#connection.off('Target.targetInfoChanged', this.#onTargetInfoChanged);\n        this.#connection.off(CDPSessionEvent.SessionDetached, this.#onSessionDetached);\n        this.#removeAttachmentListeners(this.#connection);\n    }\n    getAvailableTargets() {\n        return this.#attachedTargetsByTargetId;\n    }\n    #setupAttachmentListeners(session) {\n        const listener = (event) => {\n            void this.#onAttachedToTarget(session, event);\n        };\n        assert(!this.#attachedToTargetListenersBySession.has(session));\n        this.#attachedToTargetListenersBySession.set(session, listener);\n        session.on('Target.attachedToTarget', listener);\n        const detachedListener = (event) => {\n            return this.#onDetachedFromTarget(session, event);\n        };\n        assert(!this.#detachedFromTargetListenersBySession.has(session));\n        this.#detachedFromTargetListenersBySession.set(session, detachedListener);\n        session.on('Target.detachedFromTarget', detachedListener);\n    }\n    #removeAttachmentListeners(session) {\n        const listener = this.#attachedToTargetListenersBySession.get(session);\n        if (listener) {\n            session.off('Target.attachedToTarget', listener);\n            this.#attachedToTargetListenersBySession.delete(session);\n        }\n        if (this.#detachedFromTargetListenersBySession.has(session)) {\n            session.off('Target.detachedFromTarget', this.#detachedFromTargetListenersBySession.get(session));\n            this.#detachedFromTargetListenersBySession.delete(session);\n        }\n    }\n    #onSessionDetached = (session) => {\n        this.#removeAttachmentListeners(session);\n    };\n    #onTargetCreated = async (event) => {\n        this.#discoveredTargetsByTargetId.set(event.targetInfo.targetId, event.targetInfo);\n        this.emit(\"targetDiscovered\" /* TargetManagerEvent.TargetDiscovered */, event.targetInfo);\n        // The connection is already attached to the browser target implicitly,\n        // therefore, no new CDPSession is created and we have special handling\n        // here.\n        if (event.targetInfo.type === 'browser' && event.targetInfo.attached) {\n            if (this.#attachedTargetsByTargetId.has(event.targetInfo.targetId)) {\n                return;\n            }\n            const target = this.#targetFactory(event.targetInfo, undefined);\n            target._initialize();\n            this.#attachedTargetsByTargetId.set(event.targetInfo.targetId, target);\n        }\n    };\n    #onTargetDestroyed = (event) => {\n        const targetInfo = this.#discoveredTargetsByTargetId.get(event.targetId);\n        this.#discoveredTargetsByTargetId.delete(event.targetId);\n        this.#finishInitializationIfReady(event.targetId);\n        if (targetInfo?.type === 'service_worker' &&\n            this.#attachedTargetsByTargetId.has(event.targetId)) {\n            // Special case for service workers: report TargetGone event when\n            // the worker is destroyed.\n            const target = this.#attachedTargetsByTargetId.get(event.targetId);\n            if (target) {\n                this.emit(\"targetGone\" /* TargetManagerEvent.TargetGone */, target);\n                this.#attachedTargetsByTargetId.delete(event.targetId);\n            }\n        }\n    };\n    #onTargetInfoChanged = (event) => {\n        this.#discoveredTargetsByTargetId.set(event.targetInfo.targetId, event.targetInfo);\n        if (this.#ignoredTargets.has(event.targetInfo.targetId) ||\n            !this.#attachedTargetsByTargetId.has(event.targetInfo.targetId) ||\n            !event.targetInfo.attached) {\n            return;\n        }\n        const target = this.#attachedTargetsByTargetId.get(event.targetInfo.targetId);\n        if (!target) {\n            return;\n        }\n        const previousURL = target.url();\n        const wasInitialized = target._initializedDeferred.value() === InitializationStatus.SUCCESS;\n        if (isPageTargetBecomingPrimary(target, event.targetInfo)) {\n            const session = target?._session();\n            assert(session, 'Target that is being activated is missing a CDPSession.');\n            session.parentSession()?.emit(CDPSessionEvent.Swapped, session);\n        }\n        target._targetInfoChanged(event.targetInfo);\n        if (wasInitialized && previousURL !== target.url()) {\n            this.emit(\"targetChanged\" /* TargetManagerEvent.TargetChanged */, {\n                target,\n                wasInitialized,\n                previousURL,\n            });\n        }\n    };\n    #onAttachedToTarget = async (parentSession, event) => {\n        const targetInfo = event.targetInfo;\n        const session = this.#connection.session(event.sessionId);\n        if (!session) {\n            throw new Error(`Session ${event.sessionId} was not created.`);\n        }\n        const silentDetach = async () => {\n            await session.send('Runtime.runIfWaitingForDebugger').catch(debugError);\n            // We don't use `session.detach()` because that dispatches all commands on\n            // the connection instead of the parent session.\n            await parentSession\n                .send('Target.detachFromTarget', {\n                sessionId: session.id(),\n            })\n                .catch(debugError);\n        };\n        if (!this.#connection.isAutoAttached(targetInfo.targetId)) {\n            return;\n        }\n        // Special case for service workers: being attached to service workers will\n        // prevent them from ever being destroyed. Therefore, we silently detach\n        // from service workers unless the connection was manually created via\n        // `page.worker()`. To determine this, we use\n        // `this.#connection.isAutoAttached(targetInfo.targetId)`. In the future, we\n        // should determine if a target is auto-attached or not with the help of\n        // CDP.\n        if (targetInfo.type === 'service_worker') {\n            this.#finishInitializationIfReady(targetInfo.targetId);\n            await silentDetach();\n            if (this.#attachedTargetsByTargetId.has(targetInfo.targetId)) {\n                return;\n            }\n            const target = this.#targetFactory(targetInfo);\n            target._initialize();\n            this.#attachedTargetsByTargetId.set(targetInfo.targetId, target);\n            this.emit(\"targetAvailable\" /* TargetManagerEvent.TargetAvailable */, target);\n            return;\n        }\n        const isExistingTarget = this.#attachedTargetsByTargetId.has(targetInfo.targetId);\n        const target = isExistingTarget\n            ? this.#attachedTargetsByTargetId.get(targetInfo.targetId)\n            : this.#targetFactory(targetInfo, session, parentSession instanceof CDPSession ? parentSession : undefined);\n        if (this.#targetFilterCallback && !this.#targetFilterCallback(target)) {\n            this.#ignoredTargets.add(targetInfo.targetId);\n            this.#finishInitializationIfReady(targetInfo.targetId);\n            await silentDetach();\n            return;\n        }\n        this.#setupAttachmentListeners(session);\n        if (isExistingTarget) {\n            session._setTarget(target);\n            this.#attachedTargetsBySessionId.set(session.id(), this.#attachedTargetsByTargetId.get(targetInfo.targetId));\n        }\n        else {\n            target._initialize();\n            this.#attachedTargetsByTargetId.set(targetInfo.targetId, target);\n            this.#attachedTargetsBySessionId.set(session.id(), target);\n        }\n        const parentTarget = parentSession instanceof CDPSession\n            ? parentSession._target()\n            : null;\n        parentTarget?._addChildTarget(target);\n        parentSession.emit(CDPSessionEvent.Ready, session);\n        this.#targetsIdsForInit.delete(target._targetId);\n        if (!isExistingTarget) {\n            this.emit(\"targetAvailable\" /* TargetManagerEvent.TargetAvailable */, target);\n        }\n        this.#finishInitializationIfReady();\n        // TODO: the browser might be shutting down here. What do we do with the\n        // error?\n        await Promise.all([\n            session.send('Target.setAutoAttach', {\n                waitForDebuggerOnStart: true,\n                flatten: true,\n                autoAttach: true,\n                filter: this.#discoveryFilter,\n            }),\n            session.send('Runtime.runIfWaitingForDebugger'),\n        ]).catch(debugError);\n    };\n    #finishInitializationIfReady(targetId) {\n        targetId !== undefined && this.#targetsIdsForInit.delete(targetId);\n        if (this.#targetsIdsForInit.size === 0) {\n            this.#initializeDeferred.resolve();\n        }\n    }\n    #onDetachedFromTarget = (parentSession, event) => {\n        const target = this.#attachedTargetsBySessionId.get(event.sessionId);\n        this.#attachedTargetsBySessionId.delete(event.sessionId);\n        if (!target) {\n            return;\n        }\n        if (parentSession instanceof CDPSession) {\n            parentSession._target()._removeChildTarget(target);\n        }\n        this.#attachedTargetsByTargetId.delete(target._targetId);\n        this.emit(\"targetGone\" /* TargetManagerEvent.TargetGone */, target);\n    };\n}\n//# sourceMappingURL=ChromeTargetManager.js.map","/**\n * @license\n * Copyright 2017 Google Inc.\n * SPDX-License-Identifier: Apache-2.0\n */\nimport { Browser as BrowserBase, } from '../api/Browser.js';\nimport { CDPSessionEvent } from '../api/CDPSession.js';\nimport { CdpBrowserContext } from './BrowserContext.js';\nimport { ChromeTargetManager } from './ChromeTargetManager.js';\nimport { FirefoxTargetManager } from './FirefoxTargetManager.js';\nimport { DevToolsTarget, InitializationStatus, OtherTarget, PageTarget, WorkerTarget, } from './Target.js';\n/**\n * @internal\n */\nexport class CdpBrowser extends BrowserBase {\n    protocol = 'cdp';\n    static async _create(product, connection, contextIds, acceptInsecureCerts, defaultViewport, process, closeCallback, targetFilterCallback, isPageTargetCallback, waitForInitiallyDiscoveredTargets = true) {\n        const browser = new CdpBrowser(product, connection, contextIds, defaultViewport, process, closeCallback, targetFilterCallback, isPageTargetCallback, waitForInitiallyDiscoveredTargets);\n        if (acceptInsecureCerts) {\n            await connection.send('Security.setIgnoreCertificateErrors', {\n                ignore: true,\n            });\n        }\n        await browser._attach();\n        return browser;\n    }\n    #defaultViewport;\n    #process;\n    #connection;\n    #closeCallback;\n    #targetFilterCallback;\n    #isPageTargetCallback;\n    #defaultContext;\n    #contexts = new Map();\n    #targetManager;\n    constructor(product, connection, contextIds, defaultViewport, process, closeCallback, targetFilterCallback, isPageTargetCallback, waitForInitiallyDiscoveredTargets = true) {\n        super();\n        product = product || 'chrome';\n        this.#defaultViewport = defaultViewport;\n        this.#process = process;\n        this.#connection = connection;\n        this.#closeCallback = closeCallback || (() => { });\n        this.#targetFilterCallback =\n            targetFilterCallback ||\n                (() => {\n                    return true;\n                });\n        this.#setIsPageTargetCallback(isPageTargetCallback);\n        if (product === 'firefox') {\n            this.#targetManager = new FirefoxTargetManager(connection, this.#createTarget, this.#targetFilterCallback);\n        }\n        else {\n            this.#targetManager = new ChromeTargetManager(connection, this.#createTarget, this.#targetFilterCallback, waitForInitiallyDiscoveredTargets);\n        }\n        this.#defaultContext = new CdpBrowserContext(this.#connection, this);\n        for (const contextId of contextIds) {\n            this.#contexts.set(contextId, new CdpBrowserContext(this.#connection, this, contextId));\n        }\n    }\n    #emitDisconnected = () => {\n        this.emit(\"disconnected\" /* BrowserEvent.Disconnected */, undefined);\n    };\n    async _attach() {\n        this.#connection.on(CDPSessionEvent.Disconnected, this.#emitDisconnected);\n        this.#targetManager.on(\"targetAvailable\" /* TargetManagerEvent.TargetAvailable */, this.#onAttachedToTarget);\n        this.#targetManager.on(\"targetGone\" /* TargetManagerEvent.TargetGone */, this.#onDetachedFromTarget);\n        this.#targetManager.on(\"targetChanged\" /* TargetManagerEvent.TargetChanged */, this.#onTargetChanged);\n        this.#targetManager.on(\"targetDiscovered\" /* TargetManagerEvent.TargetDiscovered */, this.#onTargetDiscovered);\n        await this.#targetManager.initialize();\n    }\n    _detach() {\n        this.#connection.off(CDPSessionEvent.Disconnected, this.#emitDisconnected);\n        this.#targetManager.off(\"targetAvailable\" /* TargetManagerEvent.TargetAvailable */, this.#onAttachedToTarget);\n        this.#targetManager.off(\"targetGone\" /* TargetManagerEvent.TargetGone */, this.#onDetachedFromTarget);\n        this.#targetManager.off(\"targetChanged\" /* TargetManagerEvent.TargetChanged */, this.#onTargetChanged);\n        this.#targetManager.off(\"targetDiscovered\" /* TargetManagerEvent.TargetDiscovered */, this.#onTargetDiscovered);\n    }\n    process() {\n        return this.#process ?? null;\n    }\n    _targetManager() {\n        return this.#targetManager;\n    }\n    #setIsPageTargetCallback(isPageTargetCallback) {\n        this.#isPageTargetCallback =\n            isPageTargetCallback ||\n                ((target) => {\n                    return (target.type() === 'page' ||\n                        target.type() === 'background_page' ||\n                        target.type() === 'webview');\n                });\n    }\n    _getIsPageTargetCallback() {\n        return this.#isPageTargetCallback;\n    }\n    async createBrowserContext(options = {}) {\n        const { proxyServer, proxyBypassList } = options;\n        const { browserContextId } = await this.#connection.send('Target.createBrowserContext', {\n            proxyServer,\n            proxyBypassList: proxyBypassList && proxyBypassList.join(','),\n        });\n        const context = new CdpBrowserContext(this.#connection, this, browserContextId);\n        this.#contexts.set(browserContextId, context);\n        return context;\n    }\n    browserContexts() {\n        return [this.#defaultContext, ...Array.from(this.#contexts.values())];\n    }\n    defaultBrowserContext() {\n        return this.#defaultContext;\n    }\n    async _disposeContext(contextId) {\n        if (!contextId) {\n            return;\n        }\n        await this.#connection.send('Target.disposeBrowserContext', {\n            browserContextId: contextId,\n        });\n        this.#contexts.delete(contextId);\n    }\n    #createTarget = (targetInfo, session) => {\n        const { browserContextId } = targetInfo;\n        const context = browserContextId && this.#contexts.has(browserContextId)\n            ? this.#contexts.get(browserContextId)\n            : this.#defaultContext;\n        if (!context) {\n            throw new Error('Missing browser context');\n        }\n        const createSession = (isAutoAttachEmulated) => {\n            return this.#connection._createSession(targetInfo, isAutoAttachEmulated);\n        };\n        const otherTarget = new OtherTarget(targetInfo, session, context, this.#targetManager, createSession);\n        if (targetInfo.url?.startsWith('devtools://')) {\n            return new DevToolsTarget(targetInfo, session, context, this.#targetManager, createSession, this.#defaultViewport ?? null);\n        }\n        if (this.#isPageTargetCallback(otherTarget)) {\n            return new PageTarget(targetInfo, session, context, this.#targetManager, createSession, this.#defaultViewport ?? null);\n        }\n        if (targetInfo.type === 'service_worker' ||\n            targetInfo.type === 'shared_worker') {\n            return new WorkerTarget(targetInfo, session, context, this.#targetManager, createSession);\n        }\n        return otherTarget;\n    };\n    #onAttachedToTarget = async (target) => {\n        if (target._isTargetExposed() &&\n            (await target._initializedDeferred.valueOrThrow()) ===\n                InitializationStatus.SUCCESS) {\n            this.emit(\"targetcreated\" /* BrowserEvent.TargetCreated */, target);\n            target.browserContext().emit(\"targetcreated\" /* BrowserContextEvent.TargetCreated */, target);\n        }\n    };\n    #onDetachedFromTarget = async (target) => {\n        target._initializedDeferred.resolve(InitializationStatus.ABORTED);\n        target._isClosedDeferred.resolve();\n        if (target._isTargetExposed() &&\n            (await target._initializedDeferred.valueOrThrow()) ===\n                InitializationStatus.SUCCESS) {\n            this.emit(\"targetdestroyed\" /* BrowserEvent.TargetDestroyed */, target);\n            target.browserContext().emit(\"targetdestroyed\" /* BrowserContextEvent.TargetDestroyed */, target);\n        }\n    };\n    #onTargetChanged = ({ target }) => {\n        this.emit(\"targetchanged\" /* BrowserEvent.TargetChanged */, target);\n        target.browserContext().emit(\"targetchanged\" /* BrowserContextEvent.TargetChanged */, target);\n    };\n    #onTargetDiscovered = (targetInfo) => {\n        this.emit(\"targetdiscovered\" /* BrowserEvent.TargetDiscovered */, targetInfo);\n    };\n    wsEndpoint() {\n        return this.#connection.url();\n    }\n    async newPage() {\n        return await this.#defaultContext.newPage();\n    }\n    async _createPageInContext(contextId) {\n        const { targetId } = await this.#connection.send('Target.createTarget', {\n            url: 'about:blank',\n            browserContextId: contextId || undefined,\n        });\n        const target = (await this.waitForTarget(t => {\n            return t._targetId === targetId;\n        }));\n        if (!target) {\n            throw new Error(`Missing target for page (id = ${targetId})`);\n        }\n        const initialized = (await target._initializedDeferred.valueOrThrow()) ===\n            InitializationStatus.SUCCESS;\n        if (!initialized) {\n            throw new Error(`Failed to create target for page (id = ${targetId})`);\n        }\n        const page = await target.page();\n        if (!page) {\n            throw new Error(`Failed to create a page for context (id = ${contextId})`);\n        }\n        return page;\n    }\n    targets() {\n        return Array.from(this.#targetManager.getAvailableTargets().values()).filter(target => {\n            return (target._isTargetExposed() &&\n                target._initializedDeferred.value() === InitializationStatus.SUCCESS);\n        });\n    }\n    target() {\n        const browserTarget = this.targets().find(target => {\n            return target.type() === 'browser';\n        });\n        if (!browserTarget) {\n            throw new Error('Browser target is not found');\n        }\n        return browserTarget;\n    }\n    async version() {\n        const version = await this.#getVersion();\n        return version.product;\n    }\n    async userAgent() {\n        const version = await this.#getVersion();\n        return version.userAgent;\n    }\n    async close() {\n        await this.#closeCallback.call(null);\n        await this.disconnect();\n    }\n    disconnect() {\n        this.#targetManager.dispose();\n        this.#connection.dispose();\n        this._detach();\n        return Promise.resolve();\n    }\n    get connected() {\n        return !this.#connection._closed;\n    }\n    #getVersion() {\n        return this.#connection.send('Browser.getVersion');\n    }\n    get debugInfo() {\n        return {\n            pendingProtocolErrors: this.#connection.getPendingProtocolErrors(),\n        };\n    }\n}\n//# sourceMappingURL=Browser.js.map","// Copyright (c) 2022 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\nimport * as puppeteer from '../../third_party/puppeteer/puppeteer.js';\nclass Transport {\n    #connection;\n    constructor(connection) {\n        this.#connection = connection;\n    }\n    send(data) {\n        this.#connection.sendRawMessage(data);\n    }\n    close() {\n        void this.#connection.disconnect();\n    }\n    set onmessage(cb) {\n        this.#connection.setOnMessage((message) => {\n            const data = (message);\n            if (!data.sessionId) {\n                return;\n            }\n            return cb(JSON.stringify({\n                ...data,\n                // Puppeteer is expecting to use the default session, but we give it a non-default session in #connection.\n                // Replace that sessionId with undefined so Puppeteer treats it as default.\n                sessionId: data.sessionId === this.#connection.getSessionId() ? undefined : data.sessionId,\n            }));\n        });\n    }\n    set onclose(cb) {\n        const prev = this.#connection.getOnDisconnect();\n        this.#connection.setOnDisconnect(reason => {\n            if (prev) {\n                prev(reason);\n            }\n            if (cb) {\n                cb();\n            }\n        });\n    }\n}\nclass PuppeteerConnection extends puppeteer.Connection {\n    async onMessage(message) {\n        const msgObj = JSON.parse(message);\n        if (msgObj.sessionId && !this._sessions.has(msgObj.sessionId)) {\n            return;\n        }\n        void super.onMessage(message);\n    }\n}\nexport class PuppeteerConnectionHelper {\n    static async connectPuppeteerToConnectionViaTab(options) {\n        const { connection, rootTargetId, isPageTargetCallback } = options;\n        // Pass an empty message handler because it will be overwritten by puppeteer anyways.\n        const transport = new Transport(connection);\n        // url is an empty string in this case parallel to:\n        // https://github.com/puppeteer/puppeteer/blob/f63a123ecef86693e6457b07437a96f108f3e3c5/src/common/BrowserConnector.ts#L72\n        const puppeteerConnection = new PuppeteerConnection('', transport);\n        const browserPromise = puppeteer.Browser._create('chrome', puppeteerConnection, [] /* contextIds */, false /* ignoreHTTPSErrors */, undefined /* defaultViewport */, undefined /* process */, undefined /* closeCallback */, undefined, target => isPageTargetCallback(target._getTargetInfo()), false /* waitForInitiallyDiscoveredTargets */);\n        const [, browser] = await Promise.all([\n            puppeteerConnection._createSession({ targetId: rootTargetId }, /* emulateAutoAttach= */ true),\n            browserPromise,\n        ]);\n        await browser.waitForTarget(t => t.type() === 'page');\n        const pages = await browser.pages();\n        return { page: pages[0], browser, puppeteerConnection };\n    }\n}\n//# sourceMappingURL=PuppeteerConnection.js.map","// Copyright 2023 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\nimport * as Common from '../../../core/common/common.js';\nimport * as SDK from '../../../core/sdk/sdk.js';\nimport * as PuppeteerService from '../../../services/puppeteer/puppeteer.js';\nimport * as PuppeteerReplay from '../../../third_party/puppeteer-replay/puppeteer-replay.js';\nconst speedDelayMap = {\n    [\"normal\" /* PlayRecordingSpeed.NORMAL */]: 0,\n    [\"slow\" /* PlayRecordingSpeed.SLOW */]: 500,\n    [\"very_slow\" /* PlayRecordingSpeed.VERY_SLOW */]: 1000,\n    [\"extremely_slow\" /* PlayRecordingSpeed.EXTREMELY_SLOW */]: 2000,\n};\nexport const defaultTimeout = 5000; // ms\nfunction isPageTarget(target) {\n    // Treat DevTools targets as page targets too.\n    return (Common.ParsedURL.schemeIs(target.url, 'devtools:') || target.type === 'page' ||\n        target.type === 'background_page' || target.type === 'webview');\n}\nexport class RecordingPlayer extends Common.ObjectWrapper.ObjectWrapper {\n    #stopPromise;\n    #resolveStopPromise;\n    userFlow;\n    speed;\n    timeout;\n    breakpointIndexes;\n    steppingOver = false;\n    aborted = false;\n    abortPromise;\n    #abortResolveFn;\n    #runner;\n    constructor(userFlow, { speed, breakpointIndexes = new Set(), }) {\n        super();\n        this.userFlow = userFlow;\n        this.speed = speed;\n        this.timeout = userFlow.timeout || defaultTimeout;\n        this.breakpointIndexes = breakpointIndexes;\n        this.#stopPromise = new Promise(resolve => {\n            this.#resolveStopPromise = resolve;\n        });\n        this.abortPromise = new Promise(resolve => {\n            this.#abortResolveFn = resolve;\n        });\n    }\n    #resolveAndRefreshStopPromise() {\n        this.#resolveStopPromise?.();\n        this.#stopPromise = new Promise(resolve => {\n            this.#resolveStopPromise = resolve;\n        });\n    }\n    static async connectPuppeteer() {\n        const rootTarget = SDK.TargetManager.TargetManager.instance().rootTarget();\n        if (!rootTarget) {\n            throw new Error('Could not find the root target');\n        }\n        const primaryPageTarget = SDK.TargetManager.TargetManager.instance().primaryPageTarget();\n        if (!primaryPageTarget) {\n            throw new Error('Could not find the primary page target');\n        }\n        const childTargetManager = primaryPageTarget.model(SDK.ChildTargetManager.ChildTargetManager);\n        if (!childTargetManager) {\n            throw new Error('Could not get childTargetManager');\n        }\n        const resourceTreeModel = primaryPageTarget.model(SDK.ResourceTreeModel.ResourceTreeModel);\n        if (!resourceTreeModel) {\n            throw new Error('Could not get resource tree model');\n        }\n        const mainFrame = resourceTreeModel.mainFrame;\n        if (!mainFrame) {\n            throw new Error('Could not find main frame');\n        }\n        const rootChildTargetManager = rootTarget.model(SDK.ChildTargetManager.ChildTargetManager);\n        if (!rootChildTargetManager) {\n            throw new Error('Could not find the child target manager class for the root target');\n        }\n        // Pass an empty message handler because it will be overwritten by puppeteer anyways.\n        const result = await rootChildTargetManager.createParallelConnection(() => { });\n        const connection = result.connection;\n        const mainTargetId = await childTargetManager.getParentTargetId();\n        const rootTargetId = await rootChildTargetManager.getParentTargetId();\n        const { page, browser, puppeteerConnection } = await PuppeteerService.PuppeteerConnection.PuppeteerConnectionHelper.connectPuppeteerToConnectionViaTab({\n            connection,\n            rootTargetId: rootTargetId,\n            isPageTargetCallback: isPageTarget,\n        });\n        if (!page) {\n            throw new Error('could not find main page!');\n        }\n        browser.on('targetdiscovered', (targetInfo) => {\n            // Pop-ups opened by the main target won't be auto-attached. Therefore,\n            // we need to create a session for them explicitly. We user openedId\n            // and type to classify a target as requiring a session.\n            if (targetInfo.type !== 'page') {\n                return;\n            }\n            if (targetInfo.targetId === mainTargetId) {\n                return;\n            }\n            if (targetInfo.openerId !== mainTargetId) {\n                return;\n            }\n            void puppeteerConnection._createSession(targetInfo, \n            /* emulateAutoAttach= */ true);\n        });\n        return { page, browser };\n    }\n    static async disconnectPuppeteer(browser) {\n        try {\n            const pages = await browser.pages();\n            for (const page of pages) {\n                const client = page._client();\n                await client.send('Network.disable');\n                await client.send('Page.disable');\n                await client.send('Log.disable');\n                await client.send('Performance.disable');\n                await client.send('Runtime.disable');\n                await client.send('Emulation.clearDeviceMetricsOverride');\n                await client.send('Emulation.setAutomationOverride', { enabled: false });\n                for (const frame of page.frames()) {\n                    const client = frame.client;\n                    await client.send('Network.disable');\n                    await client.send('Page.disable');\n                    await client.send('Log.disable');\n                    await client.send('Performance.disable');\n                    await client.send('Runtime.disable');\n                    await client.send('Emulation.setAutomationOverride', { enabled: false });\n                }\n            }\n            await browser.disconnect();\n        }\n        catch (err) {\n            console.error('Error disconnecting Puppeteer', err.message);\n        }\n    }\n    async stop() {\n        await Promise.race([this.#stopPromise, this.abortPromise]);\n    }\n    abort() {\n        this.aborted = true;\n        this.#abortResolveFn?.();\n        this.#runner?.abort();\n    }\n    disposeForTesting() {\n        this.#resolveStopPromise?.();\n        this.#abortResolveFn?.();\n    }\n    continue() {\n        this.steppingOver = false;\n        this.#resolveAndRefreshStopPromise();\n    }\n    stepOver() {\n        this.steppingOver = true;\n        this.#resolveAndRefreshStopPromise();\n    }\n    updateBreakpointIndexes(breakpointIndexes) {\n        this.breakpointIndexes = breakpointIndexes;\n    }\n    async play() {\n        const { page, browser } = await RecordingPlayer.connectPuppeteer();\n        this.aborted = false;\n        const player = this;\n        class ExtensionWithBreak extends PuppeteerReplay.PuppeteerRunnerExtension {\n            #speed;\n            constructor(browser, page, { timeout, speed, }) {\n                super(browser, page, { timeout });\n                this.#speed = speed;\n            }\n            async beforeEachStep(step, flow) {\n                let resolver = () => { };\n                const promise = new Promise(r => {\n                    resolver = r;\n                });\n                player.dispatchEventToListeners(\"Step\" /* Events.STEP */, {\n                    step,\n                    resolve: resolver,\n                });\n                await promise;\n                const currentStepIndex = flow.steps.indexOf(step);\n                const shouldStopAtCurrentStep = player.steppingOver || player.breakpointIndexes.has(currentStepIndex);\n                const shouldWaitForSpeed = step.type !== 'setViewport' && step.type !== 'navigate' && !player.aborted;\n                if (shouldStopAtCurrentStep) {\n                    player.dispatchEventToListeners(\"Stop\" /* Events.STOP */);\n                    await player.stop();\n                    player.dispatchEventToListeners(\"Continue\" /* Events.CONTINUE */);\n                }\n                else if (shouldWaitForSpeed) {\n                    await Promise.race([\n                        new Promise(resolve => setTimeout(resolve, speedDelayMap[this.#speed])),\n                        player.abortPromise,\n                    ]);\n                }\n            }\n            async runStep(step, flow) {\n                // When replaying on a DevTools target we skip setViewport and navigate steps\n                // because navigation and viewport changes are not supported there.\n                if (Common.ParsedURL.schemeIs(page?.url(), 'devtools:') &&\n                    (step.type === 'setViewport' || step.type === 'navigate')) {\n                    return;\n                }\n                // Focus the target in case it's not focused.\n                await this.page.bringToFront();\n                await super.runStep(step, flow);\n            }\n        }\n        const extension = new ExtensionWithBreak(browser, page, {\n            timeout: this.timeout,\n            speed: this.speed,\n        });\n        this.#runner = await PuppeteerReplay.createRunner(this.userFlow, extension);\n        let error;\n        try {\n            await this.#runner.run();\n        }\n        catch (err) {\n            error = err;\n            console.error('Replay error', err.message);\n        }\n        finally {\n            await RecordingPlayer.disconnectPuppeteer(browser);\n        }\n        if (this.aborted) {\n            this.dispatchEventToListeners(\"Abort\" /* Events.ABORT */);\n        }\n        else if (error) {\n            this.dispatchEventToListeners(\"Error\" /* Events.ERROR */, error);\n        }\n        else {\n            this.dispatchEventToListeners(\"Done\" /* Events.DONE */);\n        }\n    }\n}\n//# sourceMappingURL=RecordingPlayer.js.map","// Copyright 2023 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\nimport * as Common from '../../../core/common/common.js';\n/**\n * SharedObject is similar to a C++ shared pointer, i.e. a reference counted\n * object.\n *\n * A object is \"created\" whenever there are no acquirers and it's then acquired.\n * Subsequent acquirers use the same object. Only until all acquirers release\n * will the object be \"destroyed\".\n *\n * Using an object after it's destroyed is undefined behavior.\n *\n * The definition of \"created\" and \"destroyed\" is dependent on the functions\n * passed into the constructor.\n */\nexport class SharedObject {\n    #mutex = new Common.Mutex.Mutex();\n    #counter = 0;\n    #value;\n    #create;\n    #destroy;\n    constructor(create, destroy) {\n        this.#create = create;\n        this.#destroy = destroy;\n    }\n    /**\n     * @returns The shared object and a release function. If the release function\n     * throws, you may attempt to call it again (however this probably implies\n     * your destroy function is bad).\n     */\n    async acquire() {\n        await this.#mutex.run(async () => {\n            if (this.#counter === 0) {\n                this.#value = await this.#create();\n            }\n            ++this.#counter;\n        });\n        return [this.#value, this.#release.bind(this, { released: false })];\n    }\n    /**\n     * Automatically perform an acquire and release.\n     *\n     * **If the release fails**, then this will throw and the object will be\n     * permanently alive. This is expected to be a fatal error and you should\n     * debug your destroy function.\n     */\n    async run(action) {\n        const [value, release] = await this.acquire();\n        try {\n            const result = await action(value);\n            return result;\n        }\n        finally {\n            await release();\n        }\n    }\n    async #release(state) {\n        if (state.released) {\n            throw new Error('Attempted to release object multiple times.');\n        }\n        try {\n            state.released = true;\n            await this.#mutex.run(async () => {\n                if (this.#counter === 1) {\n                    await this.#destroy(this.#value);\n                    this.#value = undefined;\n                }\n                --this.#counter;\n            });\n        }\n        catch (error) {\n            state.released = false;\n            throw error;\n        }\n    }\n}\n//# sourceMappingURL=SharedObject.js.map","// Copyright 2023 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\nimport * as SharedObject from './SharedObject.js';\n// Setting this to `true` enables extra logging for the injected scripts.\nconst isDebugBuild = false;\nconst DEVTOOLS_RECORDER_WORLD_NAME = 'devtools_recorder';\nclass InjectedScript {\n    static #injectedScript;\n    static async get() {\n        if (!this.#injectedScript) {\n            this.#injectedScript = (await fetch(new URL('../injected/injected.generated.js', import.meta.url)))\n                .text();\n        }\n        return this.#injectedScript;\n    }\n}\nexport { DEVTOOLS_RECORDER_WORLD_NAME, InjectedScript, SharedObject, isDebugBuild };\n//# sourceMappingURL=util.js.map","// Copyright 2023 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\nimport { StepType, } from './Schema.js';\nimport * as PuppeteerReplay from '../../../third_party/puppeteer-replay/puppeteer-replay.js';\nexport function createViewportStep(viewport) {\n    return {\n        type: StepType.SetViewport,\n        width: viewport.clientWidth,\n        height: viewport.clientHeight,\n        // TODO read real parameters here\n        deviceScaleFactor: 1,\n        isMobile: false,\n        hasTouch: false,\n        isLandscape: false,\n    };\n}\nexport function createEmulateNetworkConditionsStep(conditions) {\n    return { type: StepType.EmulateNetworkConditions, ...conditions };\n}\nexport function areSelectorsEqual(stepA, stepB) {\n    if ('selectors' in stepA && 'selectors' in stepB) {\n        return JSON.stringify(stepA.selectors) === JSON.stringify(stepB.selectors);\n    }\n    return !('selectors' in stepA) && !('selectors' in stepB);\n}\nexport const minTimeout = 1;\nexport const maxTimeout = 30000;\nexport const parse = PuppeteerReplay.parse;\nexport const parseStep = PuppeteerReplay.parseStep;\n//# sourceMappingURL=SchemaUtils.js.map","// Copyright 2023 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\nimport * as SDK from '../../../core/sdk/sdk.js';\nexport function getTargetName(target) {\n    if (SDK.TargetManager.TargetManager.instance().primaryPageTarget() === target) {\n        return 'main';\n    }\n    return target.id() === 'main' ? 'main' : target.inspectedURL();\n}\n/**\n * Returns the context for an SDK target and frame.\n * The frame is identified by the path in the resource tree model.\n * And the target is identified by `getTargetName`.\n */\nexport function getTargetFrameContext(target, frame) {\n    const path = [];\n    while (frame) {\n        const parentFrame = frame.sameTargetParentFrame();\n        if (!parentFrame) {\n            break;\n        }\n        const childFrames = parentFrame.childFrames;\n        const index = childFrames.indexOf(frame);\n        path.unshift(index);\n        frame = parentFrame;\n    }\n    return { target: getTargetName(target), frame: path };\n}\nexport async function evaluateInAllFrames(worldName, target, expression) {\n    const runtimeModel = target.model(SDK.RuntimeModel.RuntimeModel);\n    const executionContexts = runtimeModel.executionContexts();\n    const resourceTreeModel = target.model(SDK.ResourceTreeModel.ResourceTreeModel);\n    for (const frame of resourceTreeModel.frames()) {\n        const executionContext = executionContexts.find(context => context.frameId === frame.id);\n        if (!executionContext) {\n            continue;\n        }\n        // Note: it would return previously created world if it exists for the frame.\n        const { executionContextId } = await target.pageAgent().invoke_createIsolatedWorld({ frameId: frame.id, worldName });\n        await target.runtimeAgent().invoke_evaluate({\n            expression,\n            includeCommandLineAPI: true,\n            contextId: executionContextId,\n        });\n    }\n}\nexport function findTargetByExecutionContext(targets, executionContextId) {\n    for (const target of targets) {\n        const runtimeModel = target.model(SDK.RuntimeModel.RuntimeModel);\n        if (!runtimeModel) {\n            continue;\n        }\n        for (const context of runtimeModel.executionContexts()) {\n            if (context.id === executionContextId) {\n                return target;\n            }\n        }\n    }\n    return;\n}\nexport function findFrameIdByExecutionContext(targets, executionContextId) {\n    for (const target of targets) {\n        const runtimeModel = target.model(SDK.RuntimeModel.RuntimeModel);\n        if (!runtimeModel) {\n            continue;\n        }\n        for (const context of runtimeModel.executionContexts()) {\n            if (context.id === executionContextId && context.frameId !== undefined) {\n                return context.frameId;\n            }\n        }\n    }\n    return;\n}\nexport const isFrameTargetInfo = (target) => {\n    return target.type === 'page' || target.type === 'iframe';\n};\n//# sourceMappingURL=SDKUtils.js.map","// Copyright 2023 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\nimport * as Common from '../../../core/common/common.js';\nimport * as Platform from '../../../core/platform/platform.js';\nimport * as SDK from '../../../core/sdk/sdk.js';\nimport * as UI from '../../../ui/legacy/legacy.js';\nimport * as Util from '../util/util.js';\nimport { AssertedEventType, StepType, } from './Schema.js';\nimport { areSelectorsEqual, createEmulateNetworkConditionsStep, createViewportStep } from './SchemaUtils.js';\nimport { evaluateInAllFrames, getTargetFrameContext } from './SDKUtils.js';\nconst formatAsJSLiteral = Platform.StringUtilities.formatAsJSLiteral;\nconst unrelatedNavigationTypes = new Set([\n    'typed',\n    'address_bar',\n    'auto_bookmark',\n    'auto_subframe',\n    'generated',\n    'auto_toplevel',\n    'reload',\n    'keyword',\n    'keyword_generated',\n]);\nconst createShortcuts = (descriptors) => {\n    const shortcuts = [];\n    for (const shortcut of descriptors) {\n        for (const key of shortcut) {\n            const shortcutBase = { meta: false, ctrl: false, shift: false, alt: false, keyCode: -1 };\n            const { keyCode, modifiers } = UI.KeyboardShortcut.KeyboardShortcut.keyCodeAndModifiersFromKey(key);\n            shortcutBase.keyCode = keyCode;\n            const modifiersMap = UI.KeyboardShortcut.Modifiers;\n            shortcutBase.ctrl = Boolean(modifiers & modifiersMap.Ctrl);\n            shortcutBase.meta = Boolean(modifiers & modifiersMap.Meta);\n            shortcutBase.shift = Boolean(modifiers & modifiersMap.Shift);\n            shortcutBase.shift = Boolean(modifiers & modifiersMap.Alt);\n            if (shortcutBase.keyCode !== -1) {\n                shortcuts.push(shortcutBase);\n            }\n        }\n    }\n    return shortcuts;\n};\nconst evaluateInAllTargets = async (worldName, targets, expression) => {\n    await Promise.all(targets.map(target => evaluateInAllFrames(worldName, target, expression)));\n};\nconst RecorderBinding = Object.freeze({\n    addStep: 'addStep',\n    stopShortcut: 'stopShortcut',\n});\nexport class RecordingSession extends Common.ObjectWrapper.ObjectWrapper {\n    #target;\n    #pageAgent;\n    #targetAgent;\n    #networkManager;\n    #resourceTreeModel;\n    #targets = new Map();\n    #lastNavigationEntryIdByTarget = new Map();\n    #lastNavigationHistoryByTarget = new Map();\n    #scriptIdentifiers = new Map();\n    #runtimeEventDescriptors = new Map();\n    #childTargetEventDescriptors = new Map();\n    #mutex = new Common.Mutex.Mutex();\n    #userFlow;\n    #stepsPendingNavigationByTargetId = new Map();\n    #started = false;\n    #selectorTypesToRecord = [];\n    constructor(target, opts) {\n        super();\n        this.#target = target;\n        this.#pageAgent = target.pageAgent();\n        this.#targetAgent = target.targetAgent();\n        this.#networkManager = SDK.NetworkManager.MultitargetNetworkManager.instance();\n        const resourceTreeModel = target.model(SDK.ResourceTreeModel.ResourceTreeModel);\n        if (!resourceTreeModel) {\n            throw new Error('ResourceTreeModel is missing for the target: ' + target.id());\n        }\n        this.#resourceTreeModel = resourceTreeModel;\n        this.#target = target;\n        this.#userFlow = { title: opts.title, selectorAttribute: opts.selectorAttribute, steps: [] };\n        this.#selectorTypesToRecord = opts.selectorTypesToRecord;\n    }\n    /**\n     * @returns - A deep copy of the session's current user flow.\n     */\n    cloneUserFlow() {\n        return structuredClone(this.#userFlow);\n    }\n    /**\n     * Overwrites the session's current user flow with the given one.\n     *\n     * This method will not dispatch an `recordingupdated` event.\n     */\n    overwriteUserFlow(flow) {\n        this.#userFlow = structuredClone(flow);\n    }\n    async start() {\n        if (this.#started) {\n            throw new Error('The session has started');\n        }\n        this.#started = true;\n        this.#networkManager.addEventListener(\"ConditionsChanged\" /* SDK.NetworkManager.MultitargetNetworkManager.Events.CONDITIONS_CHANGED */, this.#appendCurrentNetworkStep, this);\n        await this.#appendInitialSteps();\n        // Focus the target so that events can be captured without additional actions.\n        await this.#pageAgent.invoke_bringToFront();\n        await this.#setUpTarget(this.#target);\n    }\n    async stop() {\n        // Wait for any remaining updates.\n        await this.#dispatchRecordingUpdate();\n        // Create a deadlock for the remaining events.\n        void this.#mutex.acquire();\n        await Promise.all([...this.#targets.values()].map(this.#tearDownTarget));\n        this.#networkManager.removeEventListener(\"ConditionsChanged\" /* SDK.NetworkManager.MultitargetNetworkManager.Events.CONDITIONS_CHANGED */, this.#appendCurrentNetworkStep, this);\n    }\n    async #appendInitialSteps() {\n        // Quick validation before doing anything.\n        const mainFrame = this.#resourceTreeModel.mainFrame;\n        if (!mainFrame) {\n            throw new Error('Could not find mainFrame.');\n        }\n        // Network step.\n        if (this.#networkManager.networkConditions() !== SDK.NetworkManager.NoThrottlingConditions) {\n            this.#appendCurrentNetworkStep();\n        }\n        // Viewport step.\n        const { cssLayoutViewport } = await this.#target.pageAgent().invoke_getLayoutMetrics();\n        this.#appendStep(createViewportStep(cssLayoutViewport));\n        // Navigation step.\n        const history = await this.#resourceTreeModel.navigationHistory();\n        if (history) {\n            const entry = history.entries[history.currentIndex];\n            this.#lastNavigationEntryIdByTarget.set(this.#target.id(), entry.id);\n            this.#lastNavigationHistoryByTarget.set(this.#target.id(), history.entries.map(entry => entry.id));\n            this.#userFlow.steps.push({\n                type: StepType.Navigate,\n                url: entry.url,\n                assertedEvents: [{ type: AssertedEventType.Navigation, url: entry.url, title: entry.title }],\n            });\n        }\n        else {\n            this.#userFlow.steps.push({\n                type: StepType.Navigate,\n                url: mainFrame.url,\n                assertedEvents: [\n                    { type: AssertedEventType.Navigation, url: mainFrame.url, title: await this.#getDocumentTitle(this.#target) },\n                ],\n            });\n        }\n        // Commit\n        void this.#dispatchRecordingUpdate();\n    }\n    async #getDocumentTitle(target) {\n        const response = await target.runtimeAgent().invoke_evaluate({ expression: 'document.title' });\n        return response.result?.value || '';\n    }\n    #appendCurrentNetworkStep() {\n        const networkConditions = this.#networkManager.networkConditions();\n        this.#appendStep(createEmulateNetworkConditionsStep(networkConditions));\n    }\n    #updateTimeout;\n    #updateListeners = [];\n    #dispatchRecordingUpdate() {\n        if (this.#updateTimeout) {\n            clearTimeout(this.#updateTimeout);\n        }\n        this.#updateTimeout = setTimeout(() => {\n            // Making a copy to prevent mutations of this.userFlow by event consumers.\n            this.dispatchEventToListeners(\"recordingupdated\" /* Events.RECORDING_UPDATED */, structuredClone(this.#userFlow));\n            this.#updateTimeout = undefined;\n            for (const resolve of this.#updateListeners) {\n                resolve();\n            }\n            this.#updateListeners.length = 0;\n        }, 100);\n        return new Promise(resolve => {\n            this.#updateListeners.push(resolve);\n        });\n    }\n    get #previousStep() {\n        return this.#userFlow.steps.slice(-1)[0];\n    }\n    /**\n     * Contains keys that are pressed related to a change step.\n     */\n    #pressedChangeKeys = new Set();\n    /**\n     * Shift-reduces a given step into the user flow.\n     */\n    #appendStep(step) {\n        switch (step.type) {\n            case 'doubleClick': {\n                for (let j = this.#userFlow.steps.length - 1; j > 0; j--) {\n                    const previousStep = this.#userFlow.steps[j];\n                    if (previousStep.type === 'click') {\n                        step.selectors = previousStep.selectors;\n                        this.#userFlow.steps.splice(j, 1);\n                        break;\n                    }\n                }\n                break;\n            }\n            case 'change': {\n                const previousStep = this.#previousStep;\n                if (!previousStep) {\n                    break;\n                }\n                switch (previousStep.type) {\n                    // Merging changes.\n                    case 'change':\n                        if (!areSelectorsEqual(step, previousStep)) {\n                            break;\n                        }\n                        this.#userFlow.steps[this.#userFlow.steps.length - 1] = step;\n                        void this.#dispatchRecordingUpdate();\n                        return;\n                    // Ignore key downs resulting in inputs.\n                    case 'keyDown':\n                        this.#pressedChangeKeys.add(previousStep.key);\n                        this.#userFlow.steps.pop();\n                        this.#appendStep(step);\n                        return;\n                }\n                break;\n            }\n            case 'keyDown': {\n                // This can happen if there are successive keydown's from a repeated key\n                // for example.\n                if (this.#pressedChangeKeys.has(step.key)) {\n                    return;\n                }\n                break;\n            }\n            case 'keyUp': {\n                // Ignore key ups coming from change inputs.\n                if (this.#pressedChangeKeys.has(step.key)) {\n                    this.#pressedChangeKeys.delete(step.key);\n                    return;\n                }\n                break;\n            }\n        }\n        this.#userFlow.steps.push(step);\n        void this.#dispatchRecordingUpdate();\n    }\n    #handleBeforeUnload(context, sdkTarget) {\n        const lastStep = this.#userFlow.steps[this.#userFlow.steps.length - 1];\n        if (lastStep && !lastStep.assertedEvents?.find(event => event.type === AssertedEventType.Navigation)) {\n            const target = context.target || 'main';\n            const frameSelector = (context.frame || []).join(',');\n            const lastStepTarget = lastStep.target || 'main';\n            const lastStepFrameSelector = (('frame' in lastStep ? lastStep.frame : []) || []).join(',');\n            if (target === lastStepTarget && frameSelector === lastStepFrameSelector) {\n                lastStep.assertedEvents = [{ type: AssertedEventType.Navigation }];\n                this.#stepsPendingNavigationByTargetId.set(sdkTarget.id(), lastStep);\n                void this.#dispatchRecordingUpdate();\n            }\n        }\n    }\n    #replaceUnloadWithNavigation(target, event) {\n        const stepPendingNavigation = this.#stepsPendingNavigationByTargetId.get(target.id());\n        if (!stepPendingNavigation) {\n            return;\n        }\n        const step = stepPendingNavigation;\n        if (!step.assertedEvents) {\n            return;\n        }\n        const navigationEvent = step.assertedEvents.find(event => event.type === AssertedEventType.Navigation);\n        if (!navigationEvent || navigationEvent.url) {\n            return;\n        }\n        navigationEvent.url = event.url;\n        navigationEvent.title = event.title;\n        void this.#dispatchRecordingUpdate();\n    }\n    #handleStopShortcutBinding(event) {\n        const shortcutLength = Number(event.data.payload);\n        // Look for one less step as the last one gets consumed before creating a step\n        for (let index = 0; index < shortcutLength - 1; index++) {\n            this.#userFlow.steps.pop();\n        }\n        this.dispatchEventToListeners(\"recordingstopped\" /* Events.RECORDING_STOPPED */, structuredClone(this.#userFlow));\n    }\n    #receiveBindingCalled(target, event) {\n        switch (event.data.name) {\n            case RecorderBinding.stopShortcut:\n                this.#handleStopShortcutBinding(event);\n                return;\n            case RecorderBinding.addStep:\n                this.#handleAddStepBinding(target, event);\n                return;\n            default:\n                return;\n        }\n    }\n    #handleAddStepBinding(target, event) {\n        const executionContextId = event.data.executionContextId;\n        let frameId;\n        const runtimeModel = target.model(SDK.RuntimeModel.RuntimeModel);\n        if (runtimeModel) {\n            for (const context of runtimeModel.executionContexts()) {\n                if (context.id === executionContextId) {\n                    frameId = context.frameId;\n                    break;\n                }\n            }\n        }\n        if (!frameId) {\n            throw new Error('No execution context found for the binding call + ' + JSON.stringify(event.data));\n        }\n        const step = JSON.parse(event.data.payload);\n        const resourceTreeModel = target.model(SDK.ResourceTreeModel.ResourceTreeModel);\n        const frame = resourceTreeModel.frameForId(frameId);\n        if (!frame) {\n            throw new Error('Could not find frame.');\n        }\n        const context = getTargetFrameContext(target, frame);\n        if (step.type === 'beforeUnload') {\n            this.#handleBeforeUnload(context, target);\n            return;\n        }\n        // TODO: type-safe parsing from client steps to internal step format.\n        switch (step.type) {\n            case 'change': {\n                this.#appendStep({\n                    type: 'change',\n                    value: step.value,\n                    selectors: step.selectors,\n                    frame: context.frame.length ? context.frame : undefined,\n                    target: context.target,\n                });\n                break;\n            }\n            case 'doubleClick': {\n                this.#appendStep({\n                    type: 'doubleClick',\n                    target: context.target,\n                    selectors: step.selectors,\n                    offsetY: step.offsetY,\n                    offsetX: step.offsetX,\n                    frame: context.frame.length ? context.frame : undefined,\n                    deviceType: step.deviceType,\n                    button: step.button,\n                });\n                break;\n            }\n            case 'click': {\n                this.#appendStep({\n                    type: 'click',\n                    target: context.target,\n                    selectors: step.selectors,\n                    offsetY: step.offsetY,\n                    offsetX: step.offsetX,\n                    frame: context.frame.length ? context.frame : undefined,\n                    duration: step.duration,\n                    deviceType: step.deviceType,\n                    button: step.button,\n                });\n                break;\n            }\n            case 'keyUp': {\n                this.#appendStep({\n                    type: 'keyUp',\n                    key: step.key,\n                    frame: context.frame.length ? context.frame : undefined,\n                    target: context.target,\n                });\n                break;\n            }\n            case 'keyDown': {\n                this.#appendStep({\n                    type: 'keyDown',\n                    frame: context.frame.length ? context.frame : undefined,\n                    target: context.target,\n                    key: step.key,\n                });\n                break;\n            }\n            default:\n                throw new Error('Unhandled client event');\n        }\n    }\n    #getStopShortcuts() {\n        const descriptors = UI.ShortcutRegistry.ShortcutRegistry.instance()\n            .shortcutsForAction('chrome-recorder.start-recording')\n            .map(key => key.descriptors.map(press => press.key));\n        return createShortcuts(descriptors);\n    }\n    static get #allowUntrustedEvents() {\n        try {\n            // This setting is set during the test to work around the fact that Puppeteer cannot\n            // send trusted change and input events.\n            Common.Settings.Settings.instance().settingForTest('untrusted-recorder-events');\n            return true;\n        }\n        catch {\n        }\n        return false;\n    }\n    #setUpTarget = async (target) => {\n        if (target.type() !== SDK.Target.Type.FRAME) {\n            return;\n        }\n        this.#targets.set(target.id(), target);\n        const a11yModel = target.model(SDK.AccessibilityModel.AccessibilityModel);\n        Platform.assertNotNullOrUndefined(a11yModel);\n        await a11yModel.resumeModel();\n        await this.#addBindings(target);\n        await this.#injectApplicationScript(target);\n        const childTargetManager = target.model(SDK.ChildTargetManager.ChildTargetManager);\n        Platform.assertNotNullOrUndefined(childTargetManager);\n        this.#childTargetEventDescriptors.set(target, [\n            childTargetManager.addEventListener(\"TargetCreated\" /* SDK.ChildTargetManager.Events.TARGET_CREATED */, this.#receiveTargetCreated.bind(this, target)),\n            childTargetManager.addEventListener(\"TargetDestroyed\" /* SDK.ChildTargetManager.Events.TARGET_DESTROYED */, this.#receiveTargetClosed.bind(this, target)),\n            childTargetManager.addEventListener(\"TargetInfoChanged\" /* SDK.ChildTargetManager.Events.TARGET_INFO_CHANGED */, this.#receiveTargetInfoChanged.bind(this, target)),\n        ]);\n        await Promise.all(childTargetManager.childTargets().map(this.#setUpTarget));\n    };\n    #tearDownTarget = async (target) => {\n        const descriptors = this.#childTargetEventDescriptors.get(target);\n        if (descriptors) {\n            Common.EventTarget.removeEventListeners(descriptors);\n        }\n        await this.#injectCleanUpScript(target);\n        await this.#removeBindings(target);\n    };\n    async #addBindings(target) {\n        const runtimeModel = target.model(SDK.RuntimeModel.RuntimeModel);\n        Platform.assertNotNullOrUndefined(runtimeModel);\n        this.#runtimeEventDescriptors.set(target, [runtimeModel.addEventListener(SDK.RuntimeModel.Events.BindingCalled, this.#receiveBindingCalled.bind(this, target))]);\n        await Promise.all(Object.values(RecorderBinding)\n            .map(name => runtimeModel.addBinding({ name, executionContextName: Util.DEVTOOLS_RECORDER_WORLD_NAME })));\n    }\n    async #removeBindings(target) {\n        await Promise.all(Object.values(RecorderBinding).map(name => target.runtimeAgent().invoke_removeBinding({ name })));\n        const descriptors = this.#runtimeEventDescriptors.get(target);\n        if (descriptors) {\n            Common.EventTarget.removeEventListeners(descriptors);\n        }\n    }\n    async #injectApplicationScript(target) {\n        const injectedScript = await Util.InjectedScript.get();\n        const script = `\n      ${injectedScript};DevToolsRecorder.startRecording({getAccessibleName, getAccessibleRole}, {\n        debug: ${Util.isDebugBuild},\n        allowUntrustedEvents: ${RecordingSession.#allowUntrustedEvents},\n        selectorTypesToRecord: ${JSON.stringify(this.#selectorTypesToRecord)},\n        selectorAttribute: ${this.#userFlow.selectorAttribute ? formatAsJSLiteral(this.#userFlow.selectorAttribute) : undefined},\n        stopShortcuts: ${JSON.stringify(this.#getStopShortcuts())},\n      });\n    `;\n        const [{ identifier }] = await Promise.all([\n            target.pageAgent().invoke_addScriptToEvaluateOnNewDocument({ source: script, worldName: Util.DEVTOOLS_RECORDER_WORLD_NAME, includeCommandLineAPI: true }),\n            evaluateInAllFrames(Util.DEVTOOLS_RECORDER_WORLD_NAME, target, script),\n        ]);\n        this.#scriptIdentifiers.set(target.id(), identifier);\n    }\n    async #injectCleanUpScript(target) {\n        const scriptId = this.#scriptIdentifiers.get(target.id());\n        if (!scriptId) {\n            return;\n        }\n        await target.pageAgent().invoke_removeScriptToEvaluateOnNewDocument({ identifier: scriptId });\n        await evaluateInAllTargets(Util.DEVTOOLS_RECORDER_WORLD_NAME, [...this.#targets.values()], 'DevToolsRecorder.stopRecording()');\n    }\n    #receiveTargetCreated(target, event) {\n        void this.#handleEvent({ type: 'targetCreated', event, target });\n    }\n    #receiveTargetClosed(eventTarget, event) {\n        // TODO(alexrudenko): target here appears to be the parent target of the target that is closed.\n        // Therefore, we need to find the real target via the targets map.\n        const childTarget = this.#targets.get(event.data);\n        if (childTarget) {\n            void this.#handleEvent({ type: 'targetClosed', event, target: childTarget });\n        }\n    }\n    #receiveTargetInfoChanged(eventTarget, event) {\n        const target = this.#targets.get(event.data.targetId) || eventTarget;\n        void this.#handleEvent({ type: 'targetInfoChanged', event, target });\n    }\n    #handleEvent(event) {\n        return this.#mutex.run(async () => {\n            try {\n                if (Util.isDebugBuild) {\n                    console.time(`Processing ${JSON.stringify(event)}`);\n                }\n                switch (event.type) {\n                    case 'targetClosed':\n                        await this.#handleTargetClosed(event);\n                        break;\n                    case 'targetCreated':\n                        await this.#handleTargetCreated(event);\n                        break;\n                    case 'targetInfoChanged':\n                        await this.#handleTargetInfoChanged(event);\n                        break;\n                }\n                if (Util.isDebugBuild) {\n                    console.timeEnd(`Processing ${JSON.stringify(event)}`);\n                }\n            }\n            catch (err) {\n                console.error('Error happened while processing recording events: ', err.message, err.stack);\n            }\n        });\n    }\n    async #handleTargetCreated(event) {\n        if (event.event.data.type !== 'page' && event.event.data.type !== 'iframe') {\n            return;\n        }\n        await this.#targetAgent.invoke_attachToTarget({ targetId: event.event.data.targetId, flatten: true });\n        const target = SDK.TargetManager.TargetManager.instance().targets().find(t => t.id() === event.event.data.targetId);\n        if (!target) {\n            throw new Error('Could not find target.');\n        }\n        // Generally an new target implies all other targets are not waiting for something special in their event buffers, so we flush them here.\n        await this.#setUpTarget(target);\n        // Emitted for e2e tests.\n        window.dispatchEvent(new Event('recorderAttachedToTarget'));\n    }\n    async #handleTargetClosed(event) {\n        const stepPendingNavigation = this.#stepsPendingNavigationByTargetId.get(event.target.id());\n        if (stepPendingNavigation) {\n            delete stepPendingNavigation.assertedEvents;\n            this.#stepsPendingNavigationByTargetId.delete(event.target.id());\n        }\n        // TODO(alexrudenko): figure out how this works with sections\n        // TODO(alexrudenko): Ignore close events as they only matter for popups but cause more trouble than benefits\n        // const closeStep: CloseStep = {\n        //   type: 'close',\n        //   target: getTargetName(event.target),\n        // };\n        // this.appendStep(closeStep);\n    }\n    async #handlePageNavigation(resourceTreeModel, target) {\n        const history = await resourceTreeModel.navigationHistory();\n        if (!history) {\n            return false;\n        }\n        const entry = history.entries[history.currentIndex];\n        const prevId = this.#lastNavigationEntryIdByTarget.get(target.id());\n        if (prevId === entry.id) {\n            return true;\n        }\n        this.#lastNavigationEntryIdByTarget.set(target.id(), entry.id);\n        const lastHistory = this.#lastNavigationHistoryByTarget.get(target.id()) || [];\n        this.#lastNavigationHistoryByTarget.set(target.id(), history.entries.map(entry => entry.id));\n        if (unrelatedNavigationTypes.has(entry.transitionType) || lastHistory.includes(entry.id)) {\n            const stepPendingNavigation = this.#stepsPendingNavigationByTargetId.get(target.id());\n            if (stepPendingNavigation) {\n                delete stepPendingNavigation.assertedEvents;\n                this.#stepsPendingNavigationByTargetId.delete(target.id());\n            }\n            this.#appendStep({\n                type: StepType.Navigate,\n                url: entry.url,\n                assertedEvents: [{ type: AssertedEventType.Navigation, url: entry.url, title: entry.title }],\n            });\n        }\n        else {\n            this.#replaceUnloadWithNavigation(target, { type: AssertedEventType.Navigation, url: entry.url, title: entry.title });\n        }\n        return true;\n    }\n    async #handleTargetInfoChanged(event) {\n        if (event.event.data.type !== 'page' && event.event.data.type !== 'iframe') {\n            return;\n        }\n        const target = event.target;\n        const resourceTreeModel = target.model(SDK.ResourceTreeModel.ResourceTreeModel);\n        if (!resourceTreeModel) {\n            throw new Error('ResourceTreeModel is missing in handleNavigation');\n        }\n        if (event.event.data.type === 'iframe') {\n            this.#replaceUnloadWithNavigation(target, { type: AssertedEventType.Navigation, url: event.event.data.url, title: await this.#getDocumentTitle(target) });\n        }\n        else if (event.event.data.type === 'page') {\n            if (await this.#handlePageNavigation(resourceTreeModel, target)) {\n                return;\n            }\n            // Needed for #getDocumentTitle to return something meaningful.\n            await this.#waitForDOMContentLoadedWithTimeout(resourceTreeModel, 500);\n            this.#replaceUnloadWithNavigation(target, { type: AssertedEventType.Navigation, url: event.event.data.url, title: await this.#getDocumentTitle(target) });\n        }\n    }\n    async #waitForDOMContentLoadedWithTimeout(resourceTreeModel, timeout) {\n        let resolver = () => Promise.resolve();\n        const contentLoadedPromise = new Promise(resolve => {\n            resolver = resolve;\n        });\n        const onDomContentLoaded = () => {\n            resourceTreeModel.removeEventListener(SDK.ResourceTreeModel.Events.DOMContentLoaded, onDomContentLoaded);\n            resolver();\n        };\n        resourceTreeModel.addEventListener(SDK.ResourceTreeModel.Events.DOMContentLoaded, onDomContentLoaded);\n        await Promise.any([\n            contentLoadedPromise,\n            new Promise(resolve => setTimeout(() => {\n                resourceTreeModel.removeEventListener(SDK.ResourceTreeModel.Events.DOMContentLoaded, onDomContentLoaded);\n                resolve();\n            }, timeout)),\n        ]);\n    }\n}\n//# sourceMappingURL=RecordingSession.js.map","// Copyright 2023 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\nimport * as Common from '../../../core/common/common.js';\nlet instance = null;\nclass UUIDGenerator {\n    next() {\n        // @ts-ignore\n        return crypto.randomUUID();\n    }\n}\nexport class RecordingStorage {\n    #recordingsSetting;\n    #mutex = new Common.Mutex.Mutex();\n    #idGenerator = new UUIDGenerator();\n    constructor() {\n        this.#recordingsSetting = Common.Settings.Settings.instance().createSetting('recorder-recordings-ng', []);\n    }\n    clearForTest() {\n        this.#recordingsSetting.set([]);\n        this.#idGenerator = new UUIDGenerator();\n    }\n    setIdGeneratorForTest(idGenerator) {\n        this.#idGenerator = idGenerator;\n    }\n    async saveRecording(flow) {\n        const release = await this.#mutex.acquire();\n        try {\n            const recordings = await this.#recordingsSetting.forceGet();\n            const storageName = this.#idGenerator.next();\n            const recording = { storageName, flow };\n            recordings.push(recording);\n            this.#recordingsSetting.set(recordings);\n            return recording;\n        }\n        finally {\n            release();\n        }\n    }\n    async updateRecording(storageName, flow) {\n        const release = await this.#mutex.acquire();\n        try {\n            const recordings = await this.#recordingsSetting.forceGet();\n            const recording = recordings.find(recording => recording.storageName === storageName);\n            if (!recording) {\n                throw new Error('No recording is found during updateRecording');\n            }\n            recording.flow = flow;\n            this.#recordingsSetting.set(recordings);\n            return recording;\n        }\n        finally {\n            release();\n        }\n    }\n    async deleteRecording(storageName) {\n        const release = await this.#mutex.acquire();\n        try {\n            const recordings = await this.#recordingsSetting.forceGet();\n            this.#recordingsSetting.set(recordings.filter(recording => recording.storageName !== storageName));\n        }\n        finally {\n            release();\n        }\n    }\n    getRecording(storageName) {\n        const recordings = this.#recordingsSetting.get();\n        return recordings.find(recording => recording.storageName === storageName);\n    }\n    getRecordings() {\n        return this.#recordingsSetting.get();\n    }\n    static instance() {\n        if (!instance) {\n            instance = new RecordingStorage();\n        }\n        return instance;\n    }\n}\n//# sourceMappingURL=RecordingStorage.js.map","// Copyright 2023 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\nimport * as Common from '../../../core/common/common.js';\nlet instance = null;\n// Default size of storage\nconst DEFAULT_MAX_STORAGE_SIZE = 50 * 1024 * 1024;\n/**\n * This class stores the screenshots taken for a specific recording\n * in a settings object. The total storage size is limited to 50 MB\n * by default and the least recently accessed screenshots will be\n * deleted first.\n */\nexport class ScreenshotStorage {\n    #screenshotSettings;\n    #screenshots;\n    #maxStorageSize;\n    constructor(maxStorageSize = DEFAULT_MAX_STORAGE_SIZE) {\n        this.#screenshotSettings = Common.Settings.Settings.instance().createSetting('recorder-screenshots', []);\n        this.#screenshots = this.#loadFromSettings();\n        this.#maxStorageSize = maxStorageSize;\n    }\n    clear() {\n        this.#screenshotSettings.set([]);\n        this.#screenshots = new Map();\n    }\n    getScreenshotForSection(recordingName, index) {\n        const screenshot = this.#screenshots.get(this.#calculateKey(recordingName, index));\n        if (!screenshot) {\n            return null;\n        }\n        this.#syncWithSettings(screenshot);\n        return screenshot.data;\n    }\n    storeScreenshotForSection(recordingName, index, data) {\n        const screenshot = { recordingName, index, data };\n        this.#screenshots.set(this.#calculateKey(recordingName, index), screenshot);\n        this.#syncWithSettings(screenshot);\n    }\n    deleteScreenshotsForRecording(recordingName) {\n        for (const [key, entry] of this.#screenshots) {\n            if (entry.recordingName === recordingName) {\n                this.#screenshots.delete(key);\n            }\n        }\n        this.#syncWithSettings();\n    }\n    #calculateKey(recordingName, index) {\n        return `${recordingName}:${index}`;\n    }\n    #loadFromSettings() {\n        const screenshots = new Map();\n        const data = this.#screenshotSettings.get();\n        for (const item of data) {\n            screenshots.set(this.#calculateKey(item.recordingName, item.index), item);\n        }\n        return screenshots;\n    }\n    #syncWithSettings(modifiedScreenshot) {\n        if (modifiedScreenshot) {\n            const key = this.#calculateKey(modifiedScreenshot.recordingName, modifiedScreenshot.index);\n            // Make sure that the modified screenshot is moved to the end of the map\n            // as the JS Map remembers the original insertion order of the keys.\n            this.#screenshots.delete(key);\n            this.#screenshots.set(key, modifiedScreenshot);\n        }\n        const screenshots = [];\n        let currentStorageSize = 0;\n        // Take screenshots from the end of the list until the size constraint is met.\n        for (const [key, screenshot] of Array\n            .from(this.#screenshots.entries())\n            .reverse()) {\n            if (currentStorageSize < this.#maxStorageSize) {\n                currentStorageSize += screenshot.data.length;\n                screenshots.push(screenshot);\n            }\n            else {\n                // Delete all screenshots that exceed the storage limit.\n                this.#screenshots.delete(key);\n            }\n        }\n        this.#screenshotSettings.set(screenshots.reverse());\n    }\n    static instance(opts = { forceNew: null, maxStorageSize: DEFAULT_MAX_STORAGE_SIZE }) {\n        const { forceNew, maxStorageSize } = opts;\n        if (!instance || forceNew) {\n            instance = new ScreenshotStorage(maxStorageSize);\n        }\n        return instance;\n    }\n}\n//# sourceMappingURL=ScreenshotStorage.js.map","// Copyright 2023 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\nimport * as SDK from '../../../core/sdk/sdk.js';\nconst SCREENSHOT_WIDTH = 160; // px\nconst SCREENSHOT_MAX_HEIGHT = 240; // px\nasync function captureScreenshot() {\n    const mainTarget = SDK.TargetManager.TargetManager.instance().primaryPageTarget();\n    if (!mainTarget) {\n        throw new Error('Could not find main target');\n    }\n    const { data } = await mainTarget.pageAgent().invoke_captureScreenshot({});\n    if (!data) {\n        // 1x1 px empty image.\n        return 'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7';\n    }\n    return ('data:image/png;base64,' + data);\n}\nexport async function resizeScreenshot(data) {\n    const img = new Image();\n    const promise = new Promise(resolve => {\n        img.onload = resolve;\n    });\n    img.src = data;\n    await promise;\n    const canvas = document.createElement('canvas');\n    const context = canvas.getContext('2d');\n    if (!context) {\n        throw new Error('Could not create context.');\n    }\n    const aspectRatio = img.width / img.height;\n    canvas.width = SCREENSHOT_WIDTH;\n    canvas.height = Math.min(SCREENSHOT_MAX_HEIGHT, SCREENSHOT_WIDTH / aspectRatio);\n    const bitmap = await createImageBitmap(img, {\n        resizeWidth: SCREENSHOT_WIDTH,\n        resizeQuality: 'high',\n    });\n    context.drawImage(bitmap, 0, 0);\n    return canvas.toDataURL('image/png');\n}\nexport async function takeScreenshot() {\n    const data = await captureScreenshot();\n    return await resizeScreenshot(data);\n}\n//# sourceMappingURL=ScreenshotUtils.js.map","// Copyright 2023 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\nfunction startNewSection(step) {\n    const navigationEvent = step.assertedEvents?.find(event => event.type === 'navigation');\n    if (step.type === 'navigate') {\n        return {\n            title: navigationEvent?.title || '',\n            url: step.url,\n            steps: [],\n            causingStep: step,\n        };\n    }\n    if (navigationEvent) {\n        return {\n            title: navigationEvent.title || '',\n            url: navigationEvent.url || '',\n            steps: [],\n        };\n    }\n    return null;\n}\nexport function buildSections(steps) {\n    let currentSection = null;\n    const sections = [];\n    for (const step of steps) {\n        if (currentSection) {\n            currentSection.steps.push(step);\n        }\n        else if (step.type === 'navigate') {\n            currentSection = startNewSection(step);\n            continue;\n        }\n        else {\n            currentSection = { title: 'Current page', url: '', steps: [step] };\n        }\n        const nextSection = startNewSection(step);\n        if (nextSection) {\n            if (currentSection) {\n                sections.push(currentSection);\n            }\n            currentSection = nextSection;\n        }\n    }\n    if (currentSection && (!sections.length || currentSection.steps.length)) {\n        sections.push(currentSection);\n    }\n    return sections;\n}\n//# sourceMappingURL=Section.js.map","// Copyright 2023 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\nimport * as UI from '../../../ui/legacy/legacy.js';\nexport function getTooltipForActions(translation, action) {\n    let title = translation;\n    const shortcuts = UI.ShortcutRegistry.ShortcutRegistry.instance().shortcutsForAction(action);\n    for (const shortcut of shortcuts) {\n        title += ` - ${shortcut.title()}`;\n    }\n    return title;\n}\n//# sourceMappingURL=Tooltip.js.map","// Copyright 2024 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n// IMPORTANT: this file is auto generated. Please do not edit this file.\n/* istanbul ignore file */\nconst styles = new CSSStyleSheet();\nstyles.replaceSync(\n`/*\n * Copyright 2023 The Chromium Authors. All rights reserved.\n * Use of this source code is governed by a BSD-style license that can be\n * found in the LICENSE file.\n */\n\n* {\n  margin: 0;\n  padding: 0;\n  outline: none;\n  box-sizing: border-box;\n  font-size: inherit;\n}\n\n.wrapper {\n  padding: 24px;\n  flex: 1;\n}\n\nh1 {\n  font-size: 18px;\n  line-height: 24px;\n  letter-spacing: 0.02em;\n  color: var(--sys-color-on-surface);\n  margin: 0;\n  font-weight: normal;\n}\n\n.row-label {\n  font-weight: 500;\n  font-size: 11px;\n  line-height: 16px;\n  letter-spacing: 0.8px;\n  text-transform: uppercase;\n  color: var(--sys-color-secondary);\n  margin-bottom: 8px;\n  margin-top: 32px;\n  display: flex;\n  align-items: center;\n  gap: 3px;\n}\n\n.footer {\n  display: flex;\n  justify-content: center;\n  border-top: 1px solid var(--sys-color-divider);\n  padding: 12px;\n  background: var(--sys-color-cdt-base-container);\n}\n\n.controls {\n  display: flex;\n}\n\n.error {\n  margin: 16px 0 0;\n  padding: 8px;\n  background: var(--sys-color-error-container);\n  color: var(--sys-color-error);\n}\n\n.row-label .link:focus-visible {\n  outline: var(--sys-color-state-focus-ring) auto 1px;\n}\n\n.header-wrapper {\n  display: flex;\n  align-items: baseline;\n  justify-content: space-between;\n}\n\n.checkbox-label {\n  display: inline-flex;\n  align-items: center;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  gap: 4px;\n  line-height: 1.1;\n  padding: 4px;\n}\n\n.checkbox-container {\n  display: flex;\n  flex-flow: row wrap;\n  gap: 10px;\n}\n\ninput[type=\"checkbox\"]:focus-visible {\n  outline: var(--sys-color-state-focus-ring) auto 1px;\n}\n\ndevtools-icon[name=\"help\"] {\n  width: 16px;\n  height: 16px;\n}\n\n/*# sourceURL=createRecordingView.css */\n`);\n\nexport default styles;\n","// Copyright 2023 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n/* eslint-disable rulesdir/inject_checkbox_styles */\nimport '../../../ui/legacy/legacy.js';\nimport '../../../ui/components/icon_button/icon_button.js';\nimport './ControlButton.js';\nimport * as i18n from '../../../core/i18n/i18n.js';\nimport * as Buttons from '../../../ui/components/buttons/buttons.js';\nimport * as Input from '../../../ui/components/input/input.js';\nimport * as LitHtml from '../../../ui/lit-html/lit-html.js';\nimport * as VisualLogging from '../../../ui/visual_logging/visual_logging.js';\nimport * as Models from '../models/models.js';\nimport createRecordingViewStyles from './createRecordingView.css.js';\nconst { html, Directives: { ifDefined } } = LitHtml;\nconst UIStrings = {\n    /**\n     * @description The label for the input where the user enters a name for the new recording.\n     */\n    recordingName: 'Recording name',\n    /**\n     * @description The button that start the recording with selected options.\n     */\n    startRecording: 'Start recording',\n    /**\n     * @description The title of the page that contains the form for creating a new recording.\n     */\n    createRecording: 'Create a new recording',\n    /**\n     * @description The error message that is shown if the user tries to create a recording without a name.\n     */\n    recordingNameIsRequired: 'Recording name is required',\n    /**\n     * @description The label for the input where the user enters an attribute to be used for selector generation.\n     */\n    selectorAttribute: 'Selector attribute',\n    /**\n     * @description The title for the close button where the user cancels a recording and returns back to previous view.\n     */\n    cancelRecording: 'Cancel recording',\n    /**\n     * @description Label indicating a CSS (Cascading Style Sheets) selector type\n     * (https://developer.mozilla.org/en-US/docs/Web/CSS). The label is used on a\n     * checkbox which users can tick if they are interesting in recording CSS\n     * selectors.\n     */\n    selectorTypeCSS: 'CSS',\n    /**\n     * @description Label indicating a piercing CSS (Cascading Style Sheets)\n     * selector type\n     * (https://pptr.dev/guides/query-selectors#pierce-selectors-pierce). These\n     * type of selectors behave like CSS selectors, but can pierce through\n     * ShadowDOM. The label is used on a checkbox which users can tick if they are\n     * interesting in recording CSS selectors.\n     */\n    selectorTypePierce: 'Pierce',\n    /**\n     * @description Label indicating a ARIA (Accessible Rich Internet\n     * Applications) selector type\n     * (https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA). The\n     * label is used on a checkbox which users can tick if they are interesting in\n     * recording ARIA selectors.\n     */\n    selectorTypeARIA: 'ARIA',\n    /**\n     * @description Label indicating a text selector type. The label is used on a\n     * checkbox which users can tick if they are interesting in recording text\n     * selectors.\n     */\n    selectorTypeText: 'Text',\n    /**\n     * @description Label indicating a XPath (XML Path Language) selector type\n     * (https://en.wikipedia.org/wiki/XPath). The label is used on a checkbox\n     * which users can tick if they are interesting in recording text selectors.\n     */\n    selectorTypeXPath: 'XPath',\n    /**\n     * @description The label for the input that allows specifying selector types\n     * that should be used during the recordering.\n     */\n    selectorTypes: 'Selector types to record',\n    /**\n     * @description The error message that shows up if the user turns off\n     * necessary selectors.\n     */\n    includeNecessarySelectors: 'You must choose CSS, Pierce, or XPath as one of your options. Only these selectors are guaranteed to be recorded since ARIA and text selectors may not be unique.',\n    /**\n     * @description Title of a link to the developer documentation.\n     */\n    learnMore: 'Learn more',\n};\nconst str_ = i18n.i18n.registerUIStrings('panels/recorder/components/CreateRecordingView.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\nexport class RecordingStartedEvent extends Event {\n    static eventName = 'recordingstarted';\n    name;\n    selectorAttribute;\n    selectorTypesToRecord;\n    constructor(name, selectorTypesToRecord, selectorAttribute) {\n        super(RecordingStartedEvent.eventName, {});\n        this.name = name;\n        this.selectorAttribute = selectorAttribute || undefined;\n        this.selectorTypesToRecord = selectorTypesToRecord;\n    }\n}\nexport class RecordingCancelledEvent extends Event {\n    static eventName = 'recordingcancelled';\n    constructor() {\n        super(RecordingCancelledEvent.eventName);\n    }\n}\nexport class CreateRecordingView extends HTMLElement {\n    #shadow = this.attachShadow({ mode: 'open' });\n    #defaultRecordingName = '';\n    #error;\n    #recorderSettings;\n    constructor() {\n        super();\n        this.setAttribute('jslog', `${VisualLogging.section('create-recording-view')}`);\n    }\n    connectedCallback() {\n        this.#shadow.adoptedStyleSheets = [\n            createRecordingViewStyles,\n            Input.textInputStyles,\n            Input.checkboxStyles,\n        ];\n        this.#render();\n        this.#shadow.querySelector('input')?.focus();\n    }\n    set data(data) {\n        this.#recorderSettings = data.recorderSettings;\n        this.#defaultRecordingName = this.#recorderSettings.defaultTitle;\n    }\n    #onKeyDown(event) {\n        if (this.#error) {\n            this.#error = undefined;\n            this.#render();\n        }\n        const keyboardEvent = event;\n        if (keyboardEvent.key === 'Enter') {\n            this.startRecording();\n            event.stopPropagation();\n            event.preventDefault();\n        }\n    }\n    startRecording() {\n        const nameInput = this.#shadow.querySelector('#user-flow-name');\n        if (!nameInput) {\n            throw new Error('input#user-flow-name not found');\n        }\n        if (!this.#recorderSettings) {\n            throw new Error('settings not set');\n        }\n        if (!nameInput.value.trim()) {\n            this.#error = new Error(i18nString(UIStrings.recordingNameIsRequired));\n            this.#render();\n            return;\n        }\n        const selectorTypeElements = this.#shadow.querySelectorAll('.selector-type input[type=checkbox]');\n        const selectorTypesToRecord = [];\n        for (const selectorType of selectorTypeElements) {\n            const checkbox = selectorType;\n            const checkboxValue = checkbox.value;\n            if (checkbox.checked) {\n                selectorTypesToRecord.push(checkboxValue);\n            }\n        }\n        if (!selectorTypesToRecord.includes(Models.Schema.SelectorType.CSS) &&\n            !selectorTypesToRecord.includes(Models.Schema.SelectorType.XPath) &&\n            !selectorTypesToRecord.includes(Models.Schema.SelectorType.Pierce)) {\n            this.#error = new Error(i18nString(UIStrings.includeNecessarySelectors));\n            this.#render();\n            return;\n        }\n        for (const selectorType of Object.values(Models.Schema.SelectorType)) {\n            this.#recorderSettings.setSelectorByType(selectorType, selectorTypesToRecord.includes(selectorType));\n        }\n        const selectorAttributeEl = this.#shadow.querySelector('#selector-attribute');\n        const selectorAttribute = selectorAttributeEl.value.trim();\n        this.#recorderSettings.selectorAttribute = selectorAttribute;\n        this.dispatchEvent(new RecordingStartedEvent(nameInput.value.trim(), selectorTypesToRecord, selectorAttribute));\n    }\n    #dispatchRecordingCancelled() {\n        this.dispatchEvent(new RecordingCancelledEvent());\n    }\n    #onInputFocus = () => {\n        this.#shadow.querySelector('#user-flow-name')?.select();\n    };\n    #render() {\n        const selectorTypeToLabel = new Map([\n            [Models.Schema.SelectorType.ARIA, i18nString(UIStrings.selectorTypeARIA)],\n            [Models.Schema.SelectorType.CSS, i18nString(UIStrings.selectorTypeCSS)],\n            [Models.Schema.SelectorType.Text, i18nString(UIStrings.selectorTypeText)],\n            [\n                Models.Schema.SelectorType.XPath,\n                i18nString(UIStrings.selectorTypeXPath),\n            ],\n            [\n                Models.Schema.SelectorType.Pierce,\n                i18nString(UIStrings.selectorTypePierce),\n            ],\n        ]);\n        // clang-format off\n        LitHtml.render(html `\n        <div class=\"wrapper\">\n          <div class=\"header-wrapper\">\n            <h1>${i18nString(UIStrings.createRecording)}</h1>\n            <devtools-button\n              title=${i18nString(UIStrings.cancelRecording)}\n              jslog=${VisualLogging.close().track({ click: true })}\n              .data=${{\n            variant: \"icon\" /* Buttons.Button.Variant.ICON */,\n            size: \"SMALL\" /* Buttons.Button.Size.SMALL */,\n            iconName: 'cross',\n        }}\n              @click=${this.#dispatchRecordingCancelled}\n            ></devtools-button>\n          </div>\n          <label class=\"row-label\" for=\"user-flow-name\">${i18nString(UIStrings.recordingName)}</label>\n          <input\n            value=${this.#defaultRecordingName}\n            @focus=${this.#onInputFocus}\n            @keydown=${this.#onKeyDown}\n            jslog=${VisualLogging.textField('user-flow-name').track({ change: true })}\n            class=\"devtools-text-input\"\n            id=\"user-flow-name\"\n          />\n          <label class=\"row-label\" for=\"selector-attribute\">\n            <span>${i18nString(UIStrings.selectorAttribute)}</span>\n            <x-link\n              class=\"link\" href=\"https://g.co/devtools/recorder#selector\"\n              title=${i18nString(UIStrings.learnMore)}\n              jslog=${VisualLogging.link('recorder-selector-help').track({ click: true })}>\n              <devtools-icon name=\"help\">\n              </devtools-icon>\n            </x-link>\n          </label>\n          <input\n            value=${ifDefined(this.#recorderSettings?.selectorAttribute)}\n            placeholder=\"data-testid\"\n            @keydown=${this.#onKeyDown}\n            jslog=${VisualLogging.textField('selector-attribute').track({ change: true })}\n            class=\"devtools-text-input\"\n            id=\"selector-attribute\"\n          />\n          <label class=\"row-label\">\n            <span>${i18nString(UIStrings.selectorTypes)}</span>\n            <x-link\n              class=\"link\" href=\"https://g.co/devtools/recorder#selector\"\n              title=${i18nString(UIStrings.learnMore)}\n              jslog=${VisualLogging.link('recorder-selector-help').track({ click: true })}>\n              <devtools-icon name=\"help\">\n              </devtools-icon>\n            </x-link>\n          </label>\n          <div class=\"checkbox-container\">\n            ${Object.values(Models.Schema.SelectorType).map(selectorType => {\n            const checked = this.#recorderSettings?.getSelectorByType(selectorType);\n            return html `\n                  <label class=\"checkbox-label selector-type\">\n                    <input\n                      @keydown=${this.#onKeyDown}\n                      .value=${selectorType}\n                      jslog=${VisualLogging.toggle().track({ click: true }).context(`selector-${selectorType}`)}\n                      ?checked=${checked}\n                      type=\"checkbox\"\n                    />\n                    ${selectorTypeToLabel.get(selectorType) || selectorType}\n                  </label>\n                `;\n        })}\n          </div>\n\n          ${this.#error &&\n            html `\n          <div class=\"error\" role=\"alert\">\n            ${this.#error.message}\n          </div>\n        `}\n        </div>\n        <div class=\"footer\">\n          <div class=\"controls\">\n            <devtools-control-button\n              @click=${this.startRecording}\n              .label=${i18nString(UIStrings.startRecording)}\n              .shape=${'circle'}\n              jslog=${VisualLogging.action(\"chrome-recorder.start-recording\" /* Actions.RecorderActions.START_RECORDING */).track({ click: true })}\n              title=${Models.Tooltip.getTooltipForActions(i18nString(UIStrings.startRecording), \"chrome-recorder.start-recording\" /* Actions.RecorderActions.START_RECORDING */)}\n            ></devtools-control-button>\n          </div>\n        </div>\n      `, this.#shadow, { host: this });\n        // clang-format on\n    }\n}\ncustomElements.define('devtools-create-recording-view', CreateRecordingView);\n//# sourceMappingURL=CreateRecordingView.js.map","// Copyright 2024 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n// IMPORTANT: this file is auto generated. Please do not edit this file.\n/* istanbul ignore file */\nconst styles = new CSSStyleSheet();\nstyles.replaceSync(\n`/*\n * Copyright 2023 The Chromium Authors. All rights reserved.\n * Use of this source code is governed by a BSD-style license that can be\n * found in the LICENSE file.\n */\n\n* {\n  margin: 0;\n  padding: 0;\n  box-sizing: border-box;\n  font-size: inherit;\n}\n\n*:focus,\n*:focus-visible {\n  outline: none;\n}\n\n.wrapper {\n  padding: 24px;\n}\n\n.header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  flex-wrap: wrap;\n  gap: 10px;\n}\n\nh1 {\n  font-size: 16px;\n  line-height: 19px;\n  color: var(--sys-color-on-surface);\n  font-weight: normal;\n}\n\n.icon,\n.icon devtools-icon {\n  width: 20px;\n  height: 20px;\n  color: var(--sys-color-primary);\n}\n\n.table {\n  margin-top: 35px;\n}\n\n.title {\n  font-size: 13px;\n  color: var(--sys-color-on-surface);\n  margin-left: 10px;\n  flex: 1;\n  overflow-x: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n}\n\n.row {\n  display: flex;\n  align-items: center;\n  padding-right: 5px;\n  height: 28px;\n  border-bottom: 1px solid var(--sys-color-divider);\n}\n\n.row:focus-within,\n.row:hover {\n  background-color: var(--sys-color-state-hover-on-subtle);\n}\n\n.row:last-child {\n  border-bottom: none;\n}\n\n.actions {\n  display: flex;\n  align-items: center;\n}\n\n.actions button {\n  border: none;\n  background-color: transparent;\n  width: 24px;\n  height: 24px;\n  border-radius: 50%;\n}\n\n.actions .divider {\n  width: 1px;\n  height: 17px;\n  background-color: var(--sys-color-divider);\n  margin: 0 6px;\n}\n\n/*# sourceURL=recordingListView.css */\n`);\n\nexport default styles;\n","// Copyright 2023 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\nimport '../../../ui/components/icon_button/icon_button.js';\nimport * as i18n from '../../../core/i18n/i18n.js';\nimport * as Buttons from '../../../ui/components/buttons/buttons.js';\nimport * as ComponentHelpers from '../../../ui/components/helpers/helpers.js';\nimport * as LitHtml from '../../../ui/lit-html/lit-html.js';\nimport * as VisualLogging from '../../../ui/visual_logging/visual_logging.js';\nimport * as Models from '../models/models.js';\nimport recordingListViewStyles from './recordingListView.css.js';\nconst { html } = LitHtml;\nconst UIStrings = {\n    /**\n     *@description The title of the page that contains a list of saved recordings that the user has..\n     */\n    savedRecordings: 'Saved recordings',\n    /**\n     * @description The title of the button that leads to create a new recording page.\n     */\n    createRecording: 'Create a new recording',\n    /**\n     * @description The title of the button that is shown next to each of the recordings and that triggers playing of the recording.\n     */\n    playRecording: 'Play recording',\n    /**\n     * @description The title of the button that is shown next to each of the recordings and that triggers deletion of the recording.\n     */\n    deleteRecording: 'Delete recording',\n    /**\n     * @description The title of the row corresponding to a recording. By clicking on the row, the user open the recording for editing.\n     */\n    openRecording: 'Open recording',\n};\nconst str_ = i18n.i18n.registerUIStrings('panels/recorder/components/RecordingListView.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\nexport class CreateRecordingEvent extends Event {\n    static eventName = 'createrecording';\n    constructor() {\n        super(CreateRecordingEvent.eventName);\n    }\n}\nexport class DeleteRecordingEvent extends Event {\n    storageName;\n    static eventName = 'deleterecording';\n    constructor(storageName) {\n        super(DeleteRecordingEvent.eventName);\n        this.storageName = storageName;\n    }\n}\nexport class OpenRecordingEvent extends Event {\n    storageName;\n    static eventName = 'openrecording';\n    constructor(storageName) {\n        super(OpenRecordingEvent.eventName);\n        this.storageName = storageName;\n    }\n}\nexport class PlayRecordingEvent extends Event {\n    storageName;\n    static eventName = 'playrecording';\n    constructor(storageName) {\n        super(PlayRecordingEvent.eventName);\n        this.storageName = storageName;\n    }\n}\nexport class RecordingListView extends HTMLElement {\n    #shadow = this.attachShadow({ mode: 'open' });\n    #props = {\n        recordings: [],\n        replayAllowed: true,\n    };\n    constructor() {\n        super();\n    }\n    connectedCallback() {\n        this.#shadow.adoptedStyleSheets = [recordingListViewStyles];\n        void ComponentHelpers.ScheduledRender.scheduleRender(this, this.#render);\n    }\n    set recordings(recordings) {\n        this.#props.recordings = recordings;\n        void ComponentHelpers.ScheduledRender.scheduleRender(this, this.#render);\n    }\n    set replayAllowed(value) {\n        this.#props.replayAllowed = value;\n        void ComponentHelpers.ScheduledRender.scheduleRender(this, this.#render);\n    }\n    #onCreateClick() {\n        this.dispatchEvent(new CreateRecordingEvent());\n    }\n    #onDeleteClick(storageName, event) {\n        event.stopPropagation();\n        this.dispatchEvent(new DeleteRecordingEvent(storageName));\n    }\n    #onOpenClick(storageName, event) {\n        event.stopPropagation();\n        this.dispatchEvent(new OpenRecordingEvent(storageName));\n    }\n    #onPlayRecordingClick(storageName, event) {\n        event.stopPropagation();\n        this.dispatchEvent(new PlayRecordingEvent(storageName));\n    }\n    #onKeyDown(storageName, event) {\n        if (event.key !== 'Enter') {\n            return;\n        }\n        this.#onOpenClick(storageName, event);\n    }\n    #stopPropagation(event) {\n        event.stopPropagation();\n    }\n    #render = () => {\n        // clang-format off\n        LitHtml.render(html `\n        <div class=\"wrapper\">\n          <div class=\"header\">\n            <h1>${i18nString(UIStrings.savedRecordings)}</h1>\n            <devtools-button\n              .variant=${\"primary\" /* Buttons.Button.Variant.PRIMARY */}\n              @click=${this.#onCreateClick}\n              title=${Models.Tooltip.getTooltipForActions(i18nString(UIStrings.createRecording), \"chrome-recorder.create-recording\" /* Actions.RecorderActions.CREATE_RECORDING */)}\n              .jslogContext=${'create-recording'}\n            >\n              ${i18nString(UIStrings.createRecording)}\n            </devtools-button>\n          </div>\n          <div class=\"table\">\n            ${this.#props.recordings.map(recording => {\n            return html `\n                  <div\n                    role=\"button\"\n                    tabindex=\"0\"\n                    aria-label=${i18nString(UIStrings.openRecording)}\n                    class=\"row\"\n                    @keydown=${this.#onKeyDown.bind(this, recording.storageName)}\n                    @click=${this.#onOpenClick.bind(this, recording.storageName)}\n                    jslog=${VisualLogging.item()\n                .track({ click: true })\n                .context('recording')}>\n                    <div class=\"icon\">\n                      <devtools-icon name=\"flow\">\n                      </devtools-icon>\n                    </div>\n                    <div class=\"title\">${recording.name}</div>\n                    <div class=\"actions\">\n                      ${this.#props.replayAllowed\n                ? html `\n                              <devtools-button\n                                title=${i18nString(UIStrings.playRecording)}\n                                .data=${{\n                    variant: \"icon\" /* Buttons.Button.Variant.ICON */,\n                    iconName: 'play',\n                    jslogContext: 'play-recording',\n                }}\n                                @click=${this.#onPlayRecordingClick.bind(this, recording.storageName)}\n                                @keydown=${this.#stopPropagation}\n                              ></devtools-button>\n                              <div class=\"divider\"></div>`\n                : ''}\n                      <devtools-button\n                        class=\"delete-recording-button\"\n                        title=${i18nString(UIStrings.deleteRecording)}\n                        .data=${{\n                variant: \"icon\" /* Buttons.Button.Variant.ICON */,\n                iconName: 'bin',\n                jslogContext: 'delete-recording',\n            }}\n                        @click=${this.#onDeleteClick.bind(this, recording.storageName)}\n                        @keydown=${this.#stopPropagation}\n                      ></devtools-button>\n                    </div>\n                  </div>\n                `;\n        })}\n          </div>\n        </div>\n      `, this.#shadow, { host: this });\n        // clang-format on\n    };\n}\ncustomElements.define('devtools-recording-list-view', RecordingListView);\n//# sourceMappingURL=RecordingListView.js.map","// Copyright 2023 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\nimport * as Common from '../../../core/common/common.js';\nimport * as Extensions from '../../../models/extensions/extensions.js';\nlet instance = null;\nexport class ExtensionManager extends Common.ObjectWrapper.ObjectWrapper {\n    static instance() {\n        if (!instance) {\n            instance = new ExtensionManager();\n        }\n        return instance;\n    }\n    #views = new Map();\n    constructor() {\n        super();\n        this.attach();\n    }\n    attach() {\n        const pluginManager = Extensions.RecorderPluginManager.RecorderPluginManager.instance();\n        pluginManager.addEventListener(\"pluginAdded\" /* Extensions.RecorderPluginManager.Events.PLUGIN_ADDED */, this.#handlePlugin);\n        pluginManager.addEventListener(\"pluginRemoved\" /* Extensions.RecorderPluginManager.Events.PLUGIN_REMOVED */, this.#handlePlugin);\n        pluginManager.addEventListener(\"viewRegistered\" /* Extensions.RecorderPluginManager.Events.VIEW_REGISTERED */, this.#handleView);\n        for (const descriptor of pluginManager.views()) {\n            this.#handleView({ data: descriptor });\n        }\n    }\n    detach() {\n        const pluginManager = Extensions.RecorderPluginManager.RecorderPluginManager.instance();\n        pluginManager.removeEventListener(\"pluginAdded\" /* Extensions.RecorderPluginManager.Events.PLUGIN_ADDED */, this.#handlePlugin);\n        pluginManager.removeEventListener(\"pluginRemoved\" /* Extensions.RecorderPluginManager.Events.PLUGIN_REMOVED */, this.#handlePlugin);\n        pluginManager.removeEventListener(\"viewRegistered\" /* Extensions.RecorderPluginManager.Events.VIEW_REGISTERED */, this.#handleView);\n        this.#views.clear();\n    }\n    extensions() {\n        return Extensions.RecorderPluginManager.RecorderPluginManager.instance().plugins();\n    }\n    getView(descriptorId) {\n        const view = this.#views.get(descriptorId);\n        if (!view) {\n            throw new Error('View not found');\n        }\n        return view;\n    }\n    #handlePlugin = () => {\n        this.dispatchEventToListeners(\"extensionsUpdated\" /* Events.EXTENSIONS_UPDATED */, this.extensions());\n    };\n    #handleView = (event) => {\n        const descriptor = event.data;\n        if (!this.#views.has(descriptor.id)) {\n            this.#views.set(descriptor.id, new ExtensionIframe(descriptor));\n        }\n    };\n}\nclass ExtensionIframe {\n    #descriptor;\n    #iframe;\n    #isShowing = false;\n    #isLoaded = false;\n    constructor(descriptor) {\n        this.#descriptor = descriptor;\n        this.#iframe = document.createElement('iframe');\n        this.#iframe.src = descriptor.pagePath;\n        this.#iframe.onload = this.#onIframeLoad;\n    }\n    #onIframeLoad = () => {\n        this.#isLoaded = true;\n        if (this.#isShowing) {\n            this.#descriptor.onShown();\n        }\n    };\n    show() {\n        if (this.#isShowing) {\n            return;\n        }\n        this.#isShowing = true;\n        if (this.#isLoaded) {\n            this.#descriptor.onShown();\n        }\n    }\n    hide() {\n        if (!this.#isShowing) {\n            return;\n        }\n        this.#isShowing = false;\n        this.#isLoaded = false;\n        this.#descriptor.onHidden();\n    }\n    frame() {\n        return this.#iframe;\n    }\n}\n//# sourceMappingURL=ExtensionManager.js.map","// Copyright 2024 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n// IMPORTANT: this file is auto generated. Please do not edit this file.\n/* istanbul ignore file */\nconst styles = new CSSStyleSheet();\nstyles.replaceSync(\n`/*\n * Copyright 2023 The Chromium Authors. All rights reserved.\n * Use of this source code is governed by a BSD-style license that can be\n * found in the LICENSE file.\n */\n\n* {\n  margin: 0;\n  padding: 0;\n  outline: none;\n  box-sizing: border-box;\n  font-size: inherit;\n}\n\n.extension-view {\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n}\n\nmain {\n  flex: 1;\n}\n\niframe {\n  border: none;\n  height: 100%;\n  width: 100%;\n}\n\nheader {\n  display: flex;\n  padding: 3px 8px;\n  justify-content: space-between;\n  border-bottom: 1px solid var(--sys-color-divider);\n}\n\nheader > div {\n  align-self: center;\n}\n\n.icon {\n  display: block;\n  width: 16px;\n  height: 16px;\n  color: var(--sys-color-secondary);\n}\n\n.title {\n  display: flex;\n  flex-direction: row;\n  gap: 6px;\n  color: var(--sys-color-secondary);\n  align-items: center;\n  font-weight: 500;\n}\n\n/*# sourceURL=extensionView.css */\n`);\n\nexport default styles;\n","// Copyright 2023 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\nimport '../../../ui/legacy/legacy.js';\nimport '../../../ui/components/icon_button/icon_button.js';\nimport * as i18n from '../../../core/i18n/i18n.js';\nimport * as Buttons from '../../../ui/components/buttons/buttons.js';\nimport * as LitHtml from '../../../ui/lit-html/lit-html.js';\nimport * as VisualLogging from '../../../ui/visual_logging/visual_logging.js';\nimport * as Extensions from '../extensions/extensions.js';\nimport extensionViewStyles from './extensionView.css.js';\nconst { html } = LitHtml;\nconst UIStrings = {\n    /**\n     * @description The button label that closes the panel that shows the extension content inside the Recorder panel.\n     */\n    closeView: 'Close',\n    /**\n     * @description The label that indicates that the content shown is provided by a browser extension.\n     */\n    extension: 'Content provided by a browser extension',\n};\nconst str_ = i18n.i18n.registerUIStrings('panels/recorder/components/ExtensionView.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\nexport class ClosedEvent extends Event {\n    static eventName = 'recorderextensionviewclosed';\n    constructor() {\n        super(ClosedEvent.eventName, { bubbles: true, composed: true });\n    }\n}\nexport class ExtensionView extends HTMLElement {\n    #shadow = this.attachShadow({ mode: 'open' });\n    #descriptor;\n    constructor() {\n        super();\n        this.setAttribute('jslog', `${VisualLogging.section('extension-view')}`);\n    }\n    connectedCallback() {\n        this.#shadow.adoptedStyleSheets = [extensionViewStyles];\n        this.#render();\n    }\n    disconnectedCallback() {\n        if (!this.#descriptor) {\n            return;\n        }\n        Extensions.ExtensionManager.ExtensionManager.instance().getView(this.#descriptor.id).hide();\n    }\n    set descriptor(descriptor) {\n        this.#descriptor = descriptor;\n        this.#render();\n        Extensions.ExtensionManager.ExtensionManager.instance().getView(descriptor.id).show();\n    }\n    #closeView() {\n        this.dispatchEvent(new ClosedEvent());\n    }\n    #render() {\n        if (!this.#descriptor) {\n            return;\n        }\n        const iframe = Extensions.ExtensionManager.ExtensionManager.instance().getView(this.#descriptor.id).frame();\n        // clang-format off\n        LitHtml.render(html `\n        <div class=\"extension-view\">\n          <header>\n            <div class=\"title\">\n              <devtools-icon\n                class=\"icon\"\n                title=${i18nString(UIStrings.extension)}\n                name=\"extension\">\n              </devtools-icon>\n              ${this.#descriptor.title}\n            </div>\n            <devtools-button\n              title=${i18nString(UIStrings.closeView)}\n              jslog=${VisualLogging.close().track({ click: true })}\n              .data=${{\n            variant: \"icon\" /* Buttons.Button.Variant.ICON */,\n            size: \"SMALL\" /* Buttons.Button.Size.SMALL */,\n            iconName: 'cross',\n        }}\n              @click=${this.#closeView}\n            ></devtools-button>\n          </header>\n          <main>\n            ${iframe}\n          </main>\n      </div>\n    `, this.#shadow, { host: this });\n        // clang-format on\n    }\n}\ncustomElements.define('devtools-recorder-extension-view', ExtensionView);\n//# sourceMappingURL=ExtensionView.js.map","// Copyright 2023 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\nimport * as Host from '../../../core/host/host.js';\nimport * as i18n from '../../../core/i18n/i18n.js';\nimport * as ComponentHelpers from '../../../ui/components/helpers/helpers.js';\nimport * as LitHtml from '../../../ui/lit-html/lit-html.js';\nimport * as VisualLogging from '../../../ui/visual_logging/visual_logging.js';\nconst { html } = LitHtml;\nconst UIStrings = {\n    /**\n     * @description Replay button label\n     */\n    Replay: 'Replay',\n    /**\n     * @description Button label for the normal speed replay option\n     */\n    ReplayNormalButtonLabel: 'Normal speed',\n    /**\n     * @description Item label for the normal speed replay option\n     */\n    ReplayNormalItemLabel: 'Normal (Default)',\n    /**\n     * @description Button label for the slow speed replay option\n     */\n    ReplaySlowButtonLabel: 'Slow speed',\n    /**\n     * @description Item label for the slow speed replay option\n     */\n    ReplaySlowItemLabel: 'Slow',\n    /**\n     * @description Button label for the very slow speed replay option\n     */\n    ReplayVerySlowButtonLabel: 'Very slow speed',\n    /**\n     * @description Item label for the very slow speed replay option\n     */\n    ReplayVerySlowItemLabel: 'Very slow',\n    /**\n     * @description Button label for the extremely slow speed replay option\n     */\n    ReplayExtremelySlowButtonLabel: 'Extremely slow speed',\n    /**\n     * @description Item label for the slow speed replay option\n     */\n    ReplayExtremelySlowItemLabel: 'Extremely slow',\n    /**\n     * @description Label for a group of items in the replay menu that indicate various replay speeds (e.g., Normal, Fast, Slow).\n     */\n    speedGroup: 'Speed',\n    /**\n     * @description Label for a group of items in the replay menu that indicate various extensions that can be used for replay.\n     */\n    extensionGroup: 'Extensions',\n};\nconst items = [\n    {\n        value: \"normal\" /* PlayRecordingSpeed.NORMAL */,\n        buttonIconName: 'play',\n        buttonLabel: () => i18nString(UIStrings.ReplayNormalButtonLabel),\n        label: () => i18nString(UIStrings.ReplayNormalItemLabel),\n    },\n    {\n        value: \"slow\" /* PlayRecordingSpeed.SLOW */,\n        buttonIconName: 'play',\n        buttonLabel: () => i18nString(UIStrings.ReplaySlowButtonLabel),\n        label: () => i18nString(UIStrings.ReplaySlowItemLabel),\n    },\n    {\n        value: \"very_slow\" /* PlayRecordingSpeed.VERY_SLOW */,\n        buttonIconName: 'play',\n        buttonLabel: () => i18nString(UIStrings.ReplayVerySlowButtonLabel),\n        label: () => i18nString(UIStrings.ReplayVerySlowItemLabel),\n    },\n    {\n        value: \"extremely_slow\" /* PlayRecordingSpeed.EXTREMELY_SLOW */,\n        buttonIconName: 'play',\n        buttonLabel: () => i18nString(UIStrings.ReplayExtremelySlowButtonLabel),\n        label: () => i18nString(UIStrings.ReplayExtremelySlowItemLabel),\n    },\n];\nconst replaySpeedToMetricSpeedMap = {\n    [\"normal\" /* PlayRecordingSpeed.NORMAL */]: 1 /* Host.UserMetrics.RecordingReplaySpeed.NORMAL */,\n    [\"slow\" /* PlayRecordingSpeed.SLOW */]: 2 /* Host.UserMetrics.RecordingReplaySpeed.SLOW */,\n    [\"very_slow\" /* PlayRecordingSpeed.VERY_SLOW */]: 3 /* Host.UserMetrics.RecordingReplaySpeed.VERY_SLOW */,\n    [\"extremely_slow\" /* PlayRecordingSpeed.EXTREMELY_SLOW */]: 4 /* Host.UserMetrics.RecordingReplaySpeed.EXTREMELY_SLOW */,\n};\nconst str_ = i18n.i18n.registerUIStrings('panels/recorder/components/ReplaySection.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\nexport class StartReplayEvent extends Event {\n    speed;\n    extension;\n    static eventName = 'startreplay';\n    constructor(speed, extension) {\n        super(StartReplayEvent.eventName, { bubbles: true, composed: true });\n        this.speed = speed;\n        this.extension = extension;\n    }\n}\nconst REPLAY_EXTENSION_PREFIX = 'extension';\nexport class ReplaySection extends HTMLElement {\n    #shadow = this.attachShadow({ mode: 'open' });\n    #boundRender = this.#render.bind(this);\n    #props = { disabled: false };\n    #settings;\n    #replayExtensions = [];\n    set data(data) {\n        this.#settings = data.settings;\n        this.#replayExtensions = data.replayExtensions;\n    }\n    get disabled() {\n        return this.#props.disabled;\n    }\n    set disabled(disabled) {\n        this.#props.disabled = disabled;\n        void ComponentHelpers.ScheduledRender.scheduleRender(this, this.#boundRender);\n    }\n    connectedCallback() {\n        void ComponentHelpers.ScheduledRender.scheduleRender(this, this.#boundRender);\n    }\n    #handleSelectMenuSelected(event) {\n        const speed = event.value;\n        if (this.#settings && event.value) {\n            this.#settings.speed = speed;\n            this.#settings.replayExtension = '';\n        }\n        Host.userMetrics.recordingReplaySpeed(replaySpeedToMetricSpeedMap[speed]);\n        void ComponentHelpers.ScheduledRender.scheduleRender(this, this.#boundRender);\n    }\n    #handleSelectButtonClick(event) {\n        event.stopPropagation();\n        if (event.value && event.value.startsWith(REPLAY_EXTENSION_PREFIX)) {\n            if (this.#settings) {\n                this.#settings.replayExtension = event.value;\n            }\n            const extensionIdx = Number(event.value.substring(REPLAY_EXTENSION_PREFIX.length));\n            this.dispatchEvent(new StartReplayEvent(\"normal\" /* PlayRecordingSpeed.NORMAL */, this.#replayExtensions[extensionIdx]));\n            void ComponentHelpers.ScheduledRender.scheduleRender(this, this.#boundRender);\n            return;\n        }\n        this.dispatchEvent(new StartReplayEvent(this.#settings ? this.#settings.speed : \"normal\" /* PlayRecordingSpeed.NORMAL */));\n        void ComponentHelpers.ScheduledRender.scheduleRender(this, this.#boundRender);\n    }\n    #render() {\n        const groups = [{ name: i18nString(UIStrings.speedGroup), items }];\n        if (this.#replayExtensions.length) {\n            groups.push({\n                name: i18nString(UIStrings.extensionGroup),\n                items: this.#replayExtensions.map((extension, idx) => {\n                    return {\n                        value: REPLAY_EXTENSION_PREFIX + idx,\n                        buttonIconName: 'play',\n                        buttonLabel: () => extension.getName(),\n                        label: () => extension.getName(),\n                    };\n                }),\n            });\n        }\n        // clang-format off\n        LitHtml.render(html `\n    <devtools-select-button\n      @selectmenuselected=${this.#handleSelectMenuSelected}\n      @selectbuttonclick=${this.#handleSelectButtonClick}\n      .variant=${\"primary\" /* SelectButtonVariant.PRIMARY */}\n      .showItemDivider=${false}\n      .disabled=${this.#props.disabled}\n      .action=${\"chrome-recorder.replay-recording\" /* Actions.RecorderActions.REPLAY_RECORDING */}\n      .value=${this.#settings?.replayExtension || this.#settings?.speed || ''}\n      .buttonLabel=${i18nString(UIStrings.Replay)}\n      .groups=${groups}\n      jslog=${VisualLogging.action(\"chrome-recorder.replay-recording\" /* Actions.RecorderActions.REPLAY_RECORDING */).track({ click: true })}>\n    </devtools-select-button>`, this.#shadow, { host: this });\n        // clang-format on\n    }\n}\ncustomElements.define('devtools-replay-section', ReplaySection);\n//# sourceMappingURL=ReplaySection.js.map","// Copyright 2024 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n// IMPORTANT: this file is auto generated. Please do not edit this file.\n/* istanbul ignore file */\nconst styles = new CSSStyleSheet();\nstyles.replaceSync(\n`/*\n * Copyright 2023 The Chromium Authors. All rights reserved.\n * Use of this source code is governed by a BSD-style license that can be\n * found in the LICENSE file.\n */\n\n* {\n  padding: 0;\n  margin: 0;\n  box-sizing: border-box;\n  font-size: inherit;\n}\n\n.wrapper {\n  display: flex;\n  flex-direction: row;\n  flex: 1;\n  height: 100%;\n}\n\n.main {\n  overflow: hidden;\n  display: flex;\n  flex-direction: column;\n  flex: 1;\n}\n\n.sections {\n  flex: 1;\n  min-height: 0;\n  overflow: hidden auto;\n  background-color: var(--sys-color-cdt-base-container);\n  z-index: 0;\n  position: relative;\n  container: sections / inline-size; /* stylelint-disable-line property-no-unknown */\n}\n\n.section {\n  display: flex;\n  padding: 0 16px;\n  gap: 8px;\n  position: relative;\n}\n\n.section::after {\n  content: \"\";\n  border-bottom: 1px solid var(--sys-color-divider);\n  position: absolute;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  z-index: -1;\n}\n\n.section:last-child {\n  /* Make sure there is enough space for the context menu. */\n  margin-bottom: 70px;\n}\n\n.section:last-child::after {\n  content: none;\n}\n\n.screenshot-wrapper {\n  flex: 0 0 80px;\n  padding-top: 32px;\n  z-index: 2; /* We want this to be on top of \\\\'.step-overlay\\\\' */\n}\n\n/* stylelint-disable-next-line at-rule-no-unknown */\n@container sections (max-width: 400px) {\n  .screenshot-wrapper {\n    display: none;\n  }\n}\n\n.screenshot {\n  object-fit: cover;\n  object-position: top center;\n  max-width: 100%;\n  width: 200px;\n  height: auto;\n  border: 1px solid var(--sys-color-divider);\n  border-radius: 1px;\n}\n\n.content {\n  flex: 1;\n  min-width: 0;\n}\n\n.steps {\n  flex: 1;\n  position: relative;\n  align-self: flex-start;\n  overflow: visible;\n}\n\n.step {\n  position: relative;\n  padding-left: 40px;\n  margin: 16px 0;\n}\n\n.step .action {\n  font-size: 13px;\n  line-height: 16px;\n  letter-spacing: 0.03em;\n}\n\n.recording {\n  color: var(--sys-color-primary);\n  font-style: italic;\n  margin-top: 8px;\n  margin-bottom: 0;\n}\n\n.add-assertion-button {\n  margin-top: 8px;\n}\n\n.details {\n  max-width: 240px;\n  display: flex;\n  flex-direction: column;\n  align-items: flex-end;\n}\n\n.url {\n  font-size: 12px;\n  line-height: 16px;\n  letter-spacing: 0.03em;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  color: var(--sys-color-secondary);\n  max-width: 100%;\n  margin-bottom: 16px;\n}\n\n.header {\n  align-items: center;\n  border-bottom: 1px solid var(--sys-color-divider);\n  display: flex;\n  flex-wrap: wrap;\n  gap: 10px;\n  justify-content: space-between;\n  padding: 16px;\n}\n\n.header-title-wrapper {\n  max-width: 100%;\n}\n\n.header-title {\n  align-items: center;\n  display: flex;\n  flex: 1;\n  max-width: 100%;\n}\n\n.header-title::before {\n  content: \"\";\n  min-width: 12px;\n  height: 12px;\n  display: inline-block;\n  background: var(--sys-color-primary);\n  border-radius: 50%;\n  margin-right: 7px;\n}\n\n#title-input {\n  box-sizing: content-box;\n  font-family: inherit;\n  font-size: 18px;\n  line-height: 22px;\n  letter-spacing: 0.02em;\n  padding: 1px 4px;\n  border: 1px solid transparent;\n  border-radius: 1px;\n  word-break: break-all;\n}\n\n#title-input:hover {\n  border-color: var(--input-outline);\n}\n\n#title-input.has-error {\n  border-color: var(--sys-color-error);\n}\n\n#title-input.disabled {\n  color: var(--sys-color-state-disabled);\n}\n\n.title-input-error-text {\n  margin-top: 4px;\n  margin-left: 19px;\n  color: var(--sys-color-error);\n}\n\n.title-button-bar {\n  padding-left: 2px;\n  display: flex;\n}\n\n#title-input:focus + .title-button-bar {\n  display: none;\n}\n\n.settings-row {\n  padding: 16px 28px;\n  border-bottom: 1px solid var(--sys-color-divider);\n  display: flex;\n  flex-flow: row wrap;\n  justify-content: space-between;\n}\n\n.settings-title {\n  font-size: 14px;\n  line-height: 24px;\n  letter-spacing: 0.03em;\n  color: var(--sys-color-on-surface);\n  display: flex;\n  align-items: center;\n  align-content: center;\n  gap: 5px;\n  width: fit-content;\n}\n\n.settings {\n  margin-top: 4px;\n  display: flex;\n  font-size: 12px;\n  line-height: 20px;\n  letter-spacing: 0.03em;\n  color: var(--sys-color-on-surface-subtle);\n}\n\n.settings.expanded {\n  gap: 10px;\n}\n\n.settings .separator {\n  width: 1px;\n  height: 20px;\n  background-color: var(--sys-color-divider);\n  margin: 0 5px;\n}\n\n.actions {\n  display: flex;\n  align-items: center;\n  flex-wrap: wrap;\n  gap: 12px;\n}\n\n.actions .separator {\n  width: 1px;\n  height: 24px;\n  background-color: var(--sys-color-divider);\n}\n\n.is-recording .header-title::before {\n  background: var(--sys-color-error-bright);\n}\n\n.footer {\n  display: flex;\n  justify-content: center;\n  border-top: 1px solid var(--sys-color-divider);\n  padding: 12px;\n  background: var(--sys-color-cdt-base-container);\n  z-index: 1;\n}\n\n.controls {\n  align-items: center;\n  display: flex;\n  justify-content: center;\n  position: relative;\n  width: 100%;\n}\n\n.chevron {\n  width: 14px;\n  height: 14px;\n  transform: rotate(-90deg);\n  color: var(--sys-color-on-surface);\n}\n\n.expanded .chevron {\n  transform: rotate(0);\n}\n\n.editable-setting {\n  display: flex;\n  flex-direction: row;\n  gap: 12px;\n  align-items: center;\n}\n\n.editable-setting devtools-select-menu {\n  height: 32px;\n}\n\n.editable-setting .devtools-text-input {\n  width: fit-content;\n}\n\n.wrapping-label {\n  display: inline-flex;\n  align-items: center;\n  gap: 12px;\n}\n\n.text-editor {\n  height: 100%;\n  overflow: auto;\n}\n\n.section-toolbar {\n  display: flex;\n  align-items: center;\n  padding: 3px 5px;\n  justify-content: space-between;\n  gap: 3px;\n}\n\n.section-toolbar > devtools-select-menu {\n  height: 24px;\n  min-width: 50px;\n}\n\n.sections .section-toolbar {\n  justify-content: flex-end;\n}\n\ndevtools-split-view {\n  flex: 1 1 0%;\n  min-height: 0;\n}\n\n[slot=\"sidebar\"] {\n  display: flex;\n  flex-direction: column;\n  overflow: auto;\n  height: 100%;\n  width: 100%;\n}\n\n[slot=\"sidebar\"] .section-toolbar {\n  border-bottom: 1px solid var(--sys-color-divider);\n}\n\n.show-code {\n  margin-right: 14px;\n  margin-top: 8px;\n}\n\ndevtools-recorder-extension-view {\n  flex: 1;\n}\n\n/*# sourceURL=recordingView.css */\n`);\n\nexport default styles;\n","// Copyright 2023 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\nimport '../../../ui/components/icon_button/icon_button.js';\nimport '../../../ui/components/split_view/split_view.js';\nimport './ExtensionView.js';\nimport './ControlButton.js';\nimport './ReplaySection.js';\nimport * as Host from '../../../core/host/host.js';\nimport * as i18n from '../../../core/i18n/i18n.js';\nimport * as Platform from '../../../core/platform/platform.js';\nimport * as SDK from '../../../core/sdk/sdk.js';\nimport * as CodeMirror from '../../../third_party/codemirror.next/codemirror.next.js';\nimport * as Buttons from '../../../ui/components/buttons/buttons.js';\nimport * as CodeHighlighter from '../../../ui/components/code_highlighter/code_highlighter.js';\nimport * as Dialogs from '../../../ui/components/dialogs/dialogs.js';\nimport * as Input from '../../../ui/components/input/input.js';\nimport * as TextEditor from '../../../ui/components/text_editor/text_editor.js';\nimport * as LitHtml from '../../../ui/lit-html/lit-html.js';\nimport * as VisualLogging from '../../../ui/visual_logging/visual_logging.js';\nimport * as Models from '../models/models.js';\nimport recordingViewStyles from './recordingView.css.js';\nconst { html } = LitHtml;\nconst UIStrings = {\n    /**\n     * @description Depicts that the recording was done on a mobile device (e.g., a smartphone or tablet).\n     */\n    mobile: 'Mobile',\n    /**\n     * @description Depicts that the recording was done on a desktop device (e.g., on a PC or laptop).\n     */\n    desktop: 'Desktop',\n    /**\n     * @description Network latency in milliseconds.\n     * @example {10} value\n     */\n    latency: 'Latency: {value} ms',\n    /**\n     * @description Upload speed.\n     * @example {42 kB} value\n     */\n    upload: 'Upload: {value}',\n    /**\n     * @description Download speed.\n     * @example {8 kB} value\n     */\n    download: 'Download: {value}',\n    /**\n     * @description Title of the button to edit replay settings.\n     */\n    editReplaySettings: 'Edit replay settings',\n    /**\n     * @description Title of the section that contains replay settings.\n     */\n    replaySettings: 'Replay settings',\n    /**\n     * @description The string is shown when a default value is used for some replay settings.\n     */\n    default: 'Default',\n    /**\n     * @description The title of the section with environment settings.\n     */\n    environment: 'Environment',\n    /**\n     * @description The title of the screenshot image that is shown for every section in the recordign view.\n     */\n    screenshotForSection: 'Screenshot for this section',\n    /**\n     * @description The title of the button that edits the current recording's title.\n     */\n    editTitle: 'Edit title',\n    /**\n     * @description The error for when the title is missing.\n     */\n    requiredTitleError: 'Title is required',\n    /**\n     * @description The status text that is shown while the recording is ongoing.\n     */\n    recording: 'Recording…',\n    /**\n     * @description The title of the button to end the current recording.\n     */\n    endRecording: 'End recording',\n    /**\n     * @description The title of the button while the recording is being ended.\n     */\n    recordingIsBeingStopped: 'Stopping recording…',\n    /**\n     * @description The text that describes a timeout setting of {value} milliseconds.\n     * @example {1000} value\n     */\n    timeout: 'Timeout: {value} ms',\n    /**\n     * @description The label for the input that allows entering network throttling configuration.\n     */\n    network: 'Network',\n    /**\n     * @description The label for the input that allows entering timeout (a number in ms) configuration.\n     */\n    timeoutLabel: 'Timeout',\n    /**\n     * @description The text in a tooltip for the timeout input that explains what timeout settings do.\n     */\n    timeoutExplanation: 'The timeout setting (in milliseconds) applies to every action when replaying the recording. For example, if a DOM element identified by a CSS selector does not appear on the page within the specified timeout, the replay fails with an error.',\n    /**\n     * @description The label for the button that cancels replaying.\n     */\n    cancelReplay: 'Cancel replay',\n    /**\n     * @description Button title that shows the code view when clicked.\n     */\n    showCode: 'Show code',\n    /**\n     * @description Button title that hides the code view when clicked.\n     */\n    hideCode: 'Hide code',\n    /**\n     * @description Button title that adds an assertion to the step editor.\n     */\n    addAssertion: 'Add assertion',\n    /**\n     * @description The title of the button that open current recording in Performance panel.\n     */\n    performancePanel: 'Performance panel',\n};\nconst str_ = i18n.i18n.registerUIStrings('panels/recorder/components/RecordingView.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\nexport class RecordingFinishedEvent extends Event {\n    static eventName = 'recordingfinished';\n    constructor() {\n        super(RecordingFinishedEvent.eventName);\n    }\n}\nexport class PlayRecordingEvent extends Event {\n    static eventName = 'playrecording';\n    data;\n    constructor(data = {\n        targetPanel: \"chrome-recorder\" /* TargetPanel.DEFAULT */,\n        speed: \"normal\" /* PlayRecordingSpeed.NORMAL */,\n    }) {\n        super(PlayRecordingEvent.eventName);\n        this.data = data;\n    }\n}\nexport class AbortReplayEvent extends Event {\n    static eventName = 'abortreplay';\n    constructor() {\n        super(AbortReplayEvent.eventName);\n    }\n}\nexport class RecordingChangedEvent extends Event {\n    static eventName = 'recordingchanged';\n    data;\n    constructor(currentStep, newStep) {\n        super(RecordingChangedEvent.eventName);\n        this.data = { currentStep, newStep };\n    }\n}\nexport class AddAssertionEvent extends Event {\n    static eventName = 'addassertion';\n    constructor() {\n        super(AddAssertionEvent.eventName);\n    }\n}\nexport class RecordingTitleChangedEvent extends Event {\n    static eventName = 'recordingtitlechanged';\n    title;\n    constructor(title) {\n        super(RecordingTitleChangedEvent.eventName, {});\n        this.title = title;\n    }\n}\nexport class NetworkConditionsChanged extends Event {\n    static eventName = 'networkconditionschanged';\n    data;\n    constructor(data) {\n        super(NetworkConditionsChanged.eventName, {\n            composed: true,\n            bubbles: true,\n        });\n        this.data = data;\n    }\n}\nexport class TimeoutChanged extends Event {\n    static eventName = 'timeoutchanged';\n    data;\n    constructor(data) {\n        super(TimeoutChanged.eventName, { composed: true, bubbles: true });\n        this.data = data;\n    }\n}\nconst networkConditionPresets = [\n    SDK.NetworkManager.NoThrottlingConditions,\n    SDK.NetworkManager.OfflineConditions,\n    SDK.NetworkManager.Slow3GConditions,\n    SDK.NetworkManager.Slow4GConditions,\n    SDK.NetworkManager.Fast4GConditions,\n];\nfunction converterIdToFlowMetric(converterId) {\n    switch (converterId) {\n        case \"puppeteer\" /* Models.ConverterIds.ConverterIds.PUPPETEER */:\n        case \"puppeteer-firefox\" /* Models.ConverterIds.ConverterIds.PUPPETEER_FIREFOX */:\n            return 1 /* Host.UserMetrics.RecordingCopiedToClipboard.COPIED_RECORDING_WITH_PUPPETEER */;\n        case \"json\" /* Models.ConverterIds.ConverterIds.JSON */:\n            return 2 /* Host.UserMetrics.RecordingCopiedToClipboard.COPIED_RECORDING_WITH_JSON */;\n        case \"@puppeteer/replay\" /* Models.ConverterIds.ConverterIds.REPLAY */:\n            return 3 /* Host.UserMetrics.RecordingCopiedToClipboard.COPIED_RECORDING_WITH_REPLAY */;\n        default:\n            return 4 /* Host.UserMetrics.RecordingCopiedToClipboard.COPIED_RECORDING_WITH_EXTENSION */;\n    }\n}\nfunction converterIdToStepMetric(converterId) {\n    switch (converterId) {\n        case \"puppeteer\" /* Models.ConverterIds.ConverterIds.PUPPETEER */:\n        case \"puppeteer-firefox\" /* Models.ConverterIds.ConverterIds.PUPPETEER_FIREFOX */:\n            return 5 /* Host.UserMetrics.RecordingCopiedToClipboard.COPIED_STEP_WITH_PUPPETEER */;\n        case \"json\" /* Models.ConverterIds.ConverterIds.JSON */:\n            return 6 /* Host.UserMetrics.RecordingCopiedToClipboard.COPIED_STEP_WITH_JSON */;\n        case \"@puppeteer/replay\" /* Models.ConverterIds.ConverterIds.REPLAY */:\n            return 7 /* Host.UserMetrics.RecordingCopiedToClipboard.COPIED_STEP_WITH_REPLAY */;\n        default:\n            return 8 /* Host.UserMetrics.RecordingCopiedToClipboard.COPIED_STEP_WITH_EXTENSION */;\n    }\n}\nexport class RecordingView extends HTMLElement {\n    #shadow = this.attachShadow({ mode: 'open' });\n    #replayState = { isPlaying: false, isPausedOnBreakpoint: false };\n    #userFlow = null;\n    #isRecording = false;\n    #recordingTogglingInProgress = false;\n    #isTitleInvalid = false;\n    #currentStep;\n    #steps = [];\n    #currentError;\n    #sections = [];\n    #settings;\n    #recorderSettings;\n    #lastReplayResult;\n    #breakpointIndexes = new Set();\n    #selectedStep;\n    #replaySettingsExpanded = false;\n    #replayAllowed = true;\n    #builtInConverters = [];\n    #extensionConverters = [];\n    #replayExtensions;\n    #showCodeView = false;\n    #code = '';\n    #converterId = '';\n    #editorState;\n    #sourceMap;\n    #extensionDescriptor;\n    #onCopyBound = this.#onCopy.bind(this);\n    constructor() {\n        super();\n    }\n    set data(data) {\n        this.#isRecording = data.isRecording;\n        this.#replayState = data.replayState;\n        this.#recordingTogglingInProgress = data.recordingTogglingInProgress;\n        this.#currentStep = data.currentStep;\n        this.#userFlow = data.recording;\n        this.#steps = this.#userFlow.steps;\n        this.#sections = data.sections;\n        this.#settings = data.settings;\n        this.#recorderSettings = data.recorderSettings;\n        this.#currentError = data.currentError;\n        this.#lastReplayResult = data.lastReplayResult;\n        this.#replayAllowed = data.replayAllowed;\n        this.#isTitleInvalid = false;\n        this.#breakpointIndexes = data.breakpointIndexes;\n        this.#builtInConverters = data.builtInConverters;\n        this.#extensionConverters = data.extensionConverters;\n        this.#replayExtensions = data.replayExtensions;\n        this.#extensionDescriptor = data.extensionDescriptor;\n        this.#converterId = this.#recorderSettings?.preferredCopyFormat ?? data.builtInConverters[0]?.getId();\n        void this.#convertToCode();\n        this.#render();\n    }\n    connectedCallback() {\n        this.#shadow.adoptedStyleSheets = [\n            recordingViewStyles,\n            Input.textInputStyles,\n        ];\n        document.addEventListener('copy', this.#onCopyBound);\n        this.#render();\n    }\n    disconnectedCallback() {\n        document.removeEventListener('copy', this.#onCopyBound);\n    }\n    scrollToBottom() {\n        const wrapper = this.shadowRoot?.querySelector('.sections');\n        if (!wrapper) {\n            return;\n        }\n        wrapper.scrollTop = wrapper.scrollHeight;\n    }\n    #dispatchAddAssertionEvent() {\n        this.dispatchEvent(new AddAssertionEvent());\n    }\n    #dispatchRecordingFinished() {\n        this.dispatchEvent(new RecordingFinishedEvent());\n    }\n    #handleAbortReplay() {\n        this.dispatchEvent(new AbortReplayEvent());\n    }\n    #handleTogglePlaying(event) {\n        this.dispatchEvent(new PlayRecordingEvent({\n            targetPanel: \"chrome-recorder\" /* TargetPanel.DEFAULT */,\n            speed: event.speed,\n            extension: event.extension,\n        }));\n    }\n    #getStepState(step) {\n        if (!this.#currentStep) {\n            return \"default\" /* State.DEFAULT */;\n        }\n        if (step === this.#currentStep) {\n            if (this.#currentError) {\n                return \"error\" /* State.ERROR */;\n            }\n            if (!this.#replayState.isPlaying) {\n                return \"success\" /* State.SUCCESS */;\n            }\n            if (this.#replayState.isPausedOnBreakpoint) {\n                return \"stopped\" /* State.STOPPED */;\n            }\n            return \"current\" /* State.CURRENT */;\n        }\n        const currentIndex = this.#steps.indexOf(this.#currentStep);\n        if (currentIndex === -1) {\n            return \"default\" /* State.DEFAULT */;\n        }\n        const index = this.#steps.indexOf(step);\n        return index < currentIndex ? \"success\" /* State.SUCCESS */ : \"outstanding\" /* State.OUTSTANDING */;\n    }\n    #getSectionState(section) {\n        const currentStep = this.#currentStep;\n        if (!currentStep) {\n            return \"default\" /* State.DEFAULT */;\n        }\n        const currentSection = this.#sections.find(section => section.steps.includes(currentStep));\n        if (!currentSection) {\n            if (this.#currentError) {\n                return \"error\" /* State.ERROR */;\n            }\n        }\n        if (section === currentSection) {\n            return \"success\" /* State.SUCCESS */;\n        }\n        const index = this.#sections.indexOf(currentSection);\n        const ownIndex = this.#sections.indexOf(section);\n        return index >= ownIndex ? \"success\" /* State.SUCCESS */ : \"outstanding\" /* State.OUTSTANDING */;\n    }\n    #renderStep(section, step, isLastSection) {\n        const stepIndex = this.#steps.indexOf(step);\n        // clang-format off\n        return html `\n      <devtools-step-view\n      @click=${this.#onStepClick}\n      @mouseover=${this.#onStepHover}\n      @copystep=${this.#onCopyStepEvent}\n      .data=${{\n            step,\n            state: this.#getStepState(step),\n            error: this.#currentStep === step ? this.#currentError : undefined,\n            isFirstSection: false,\n            isLastSection: isLastSection && this.#steps[this.#steps.length - 1] === step,\n            isStartOfGroup: false,\n            isEndOfGroup: section.steps[section.steps.length - 1] === step,\n            stepIndex,\n            hasBreakpoint: this.#breakpointIndexes.has(stepIndex),\n            sectionIndex: -1,\n            isRecording: this.#isRecording,\n            isPlaying: this.#replayState.isPlaying,\n            removable: this.#steps.length > 1,\n            builtInConverters: this.#builtInConverters,\n            extensionConverters: this.#extensionConverters,\n            isSelected: this.#selectedStep === step,\n            recorderSettings: this.#recorderSettings,\n        }}\n      jslog=${VisualLogging.section('step').track({ click: true })}\n      ></devtools-step-view>\n    `;\n        // clang-format on\n    }\n    #onStepHover = (event) => {\n        const stepView = event.target;\n        const step = stepView.step || stepView.section?.causingStep;\n        if (!step || this.#selectedStep) {\n            return;\n        }\n        this.#highlightCodeForStep(step);\n    };\n    #onStepClick(event) {\n        event.stopPropagation();\n        const stepView = event.target;\n        const selectedStep = stepView.step || stepView.section?.causingStep || null;\n        if (this.#selectedStep === selectedStep) {\n            return;\n        }\n        this.#selectedStep = selectedStep;\n        this.#render();\n        if (selectedStep) {\n            this.#highlightCodeForStep(selectedStep, /* scroll=*/ true);\n        }\n    }\n    #onWrapperClick() {\n        if (this.#selectedStep === undefined) {\n            return;\n        }\n        this.#selectedStep = undefined;\n        this.#render();\n    }\n    #onReplaySettingsKeydown(event) {\n        if (event.key !== 'Enter') {\n            return;\n        }\n        event.preventDefault();\n        this.#onToggleReplaySettings(event);\n    }\n    #onToggleReplaySettings(event) {\n        event.stopPropagation();\n        this.#replaySettingsExpanded = !this.#replaySettingsExpanded;\n        this.#render();\n    }\n    #onNetworkConditionsChange(event) {\n        const preset = networkConditionPresets.find(preset => preset.i18nTitleKey === event.itemValue);\n        this.dispatchEvent(new NetworkConditionsChanged(preset?.i18nTitleKey === SDK.NetworkManager.NoThrottlingConditions.i18nTitleKey ? undefined : preset));\n    }\n    #onTimeoutInput(event) {\n        const target = event.target;\n        if (!target.checkValidity()) {\n            target.reportValidity();\n            return;\n        }\n        this.dispatchEvent(new TimeoutChanged(Number(target.value)));\n    }\n    #onTitleBlur = (event) => {\n        const target = event.target;\n        const title = target.innerText.trim();\n        if (!title) {\n            this.#isTitleInvalid = true;\n            this.#render();\n            return;\n        }\n        this.dispatchEvent(new RecordingTitleChangedEvent(title));\n    };\n    #onTitleInputKeyDown = (event) => {\n        switch (event.code) {\n            case 'Escape':\n            case 'Enter':\n                event.target.blur();\n                event.stopPropagation();\n                break;\n        }\n    };\n    #onEditTitleButtonClick = () => {\n        const input = this.#shadow.getElementById('title-input');\n        input.focus();\n        const range = document.createRange();\n        range.selectNodeContents(input);\n        range.collapse(false);\n        const selection = window.getSelection();\n        selection?.removeAllRanges();\n        selection?.addRange(range);\n    };\n    #onSelectMenuLabelClick = (event) => {\n        const target = event.target;\n        if (target.matches('.wrapping-label')) {\n            target.querySelector('devtools-select-menu')?.click();\n        }\n    };\n    async #copyCurrentSelection(step) {\n        let converter = [\n            ...this.#builtInConverters,\n            ...this.#extensionConverters,\n        ]\n            .find(converter => converter.getId() === this.#recorderSettings?.preferredCopyFormat);\n        if (!converter) {\n            converter = this.#builtInConverters[0];\n        }\n        if (!converter) {\n            throw new Error('No default converter found');\n        }\n        let text = '';\n        if (step) {\n            text = await converter.stringifyStep(step);\n        }\n        else if (this.#userFlow) {\n            [text] = await converter.stringify(this.#userFlow);\n        }\n        Host.InspectorFrontendHost.InspectorFrontendHostInstance.copyText(text);\n        const metric = step ? converterIdToStepMetric(converter.getId()) : converterIdToFlowMetric(converter.getId());\n        Host.userMetrics.recordingCopiedToClipboard(metric);\n    }\n    #onCopyStepEvent(event) {\n        event.stopPropagation();\n        void this.#copyCurrentSelection(event.step);\n    }\n    async #onCopy(event) {\n        if (event.target !== document.body) {\n            return;\n        }\n        event.preventDefault();\n        await this.#copyCurrentSelection(this.#selectedStep);\n        Host.userMetrics.keyboardShortcutFired(\"chrome-recorder.copy-recording-or-step\" /* Actions.RecorderActions.COPY_RECORDING_OR_STEP */);\n    }\n    #renderSettings() {\n        if (!this.#settings) {\n            return html ``;\n        }\n        const environmentFragments = [];\n        if (this.#settings.viewportSettings) {\n            // clang-format off\n            environmentFragments.push(html `<div>${this.#settings.viewportSettings.isMobile\n                ? i18nString(UIStrings.mobile)\n                : i18nString(UIStrings.desktop)}</div>`);\n            environmentFragments.push(html `<div class=\"separator\"></div>`);\n            environmentFragments.push(html `<div>${this.#settings.viewportSettings.width}×${this.#settings.viewportSettings.height} px</div>`);\n            // clang-format on\n        }\n        const replaySettingsFragments = [];\n        if (!this.#replaySettingsExpanded) {\n            if (this.#settings.networkConditionsSettings) {\n                if (this.#settings.networkConditionsSettings.title) {\n                    // clang-format off\n                    replaySettingsFragments.push(html `<div>${this.#settings.networkConditionsSettings.title}</div>`);\n                    // clang-format on\n                }\n                else {\n                    // clang-format off\n                    replaySettingsFragments.push(html `<div>\n            ${i18nString(UIStrings.download, {\n                        value: Platform.NumberUtilities.bytesToString(this.#settings.networkConditionsSettings.download),\n                    })},\n            ${i18nString(UIStrings.upload, {\n                        value: Platform.NumberUtilities.bytesToString(this.#settings.networkConditionsSettings.upload),\n                    })},\n            ${i18nString(UIStrings.latency, {\n                        value: this.#settings.networkConditionsSettings.latency,\n                    })}\n          </div>`);\n                    // clang-format on\n                }\n            }\n            else {\n                // clang-format off\n                replaySettingsFragments.push(html `<div>${SDK.NetworkManager.NoThrottlingConditions.title instanceof Function\n                    ? SDK.NetworkManager.NoThrottlingConditions.title()\n                    : SDK.NetworkManager.NoThrottlingConditions.title}</div>`);\n                // clang-format on\n            }\n            // clang-format off\n            replaySettingsFragments.push(html `<div class=\"separator\"></div>`);\n            replaySettingsFragments.push(html `<div>${i18nString(UIStrings.timeout, {\n                value: this.#settings.timeout || Models.RecordingPlayer.defaultTimeout,\n            })}</div>`);\n            // clang-format on\n        }\n        else {\n            // clang-format off\n            const selectedOption = this.#settings.networkConditionsSettings?.i18nTitleKey ||\n                SDK.NetworkManager.NoThrottlingConditions.i18nTitleKey;\n            const selectedOptionTitle = networkConditionPresets.find(preset => preset.i18nTitleKey === selectedOption);\n            let menuButtonTitle = '';\n            if (selectedOptionTitle) {\n                menuButtonTitle =\n                    selectedOptionTitle.title instanceof Function\n                        ? selectedOptionTitle.title()\n                        : selectedOptionTitle.title;\n            }\n            replaySettingsFragments.push(html `<div class=\"editable-setting\">\n        <label class=\"wrapping-label\" @click=${this.#onSelectMenuLabelClick}>\n          ${i18nString(UIStrings.network)}\n          <devtools-select-menu\n            @selectmenuselected=${this.#onNetworkConditionsChange}\n            .disabled=${!this.#steps.find(step => step.type === 'navigate')}\n            .showDivider=${true}\n            .showArrow=${true}\n            .sideButton=${false}\n            .showSelectedItem=${true}\n            .showConnector=${false}\n            .jslogContext=${'network-conditions'}\n            .position=${\"bottom\" /* Dialogs.Dialog.DialogVerticalPosition.BOTTOM */}\n            .buttonTitle=${menuButtonTitle}\n          >\n            ${networkConditionPresets.map(condition => {\n                return html `<devtools-menu-item\n                .value=${condition.i18nTitleKey || ''}\n                .selected=${selectedOption === condition.i18nTitleKey}\n                jslog=${VisualLogging.item(Platform.StringUtilities.toKebabCase(condition.i18nTitleKey || ''))}\n              >\n                ${condition.title instanceof Function\n                    ? condition.title()\n                    : condition.title}\n              </devtools-menu-item>`;\n            })}\n          </devtools-select-menu>\n        </label>\n      </div>`);\n            replaySettingsFragments.push(html `<div class=\"editable-setting\">\n        <label class=\"wrapping-label\" title=${i18nString(UIStrings.timeoutExplanation)}>\n          ${i18nString(UIStrings.timeoutLabel)}\n          <input\n            @input=${this.#onTimeoutInput}\n            required\n            min=${Models.SchemaUtils.minTimeout}\n            max=${Models.SchemaUtils.maxTimeout}\n            value=${this.#settings.timeout || Models.RecordingPlayer.defaultTimeout}\n            jslog=${VisualLogging.textField('timeout').track({ change: true })}\n            class=\"devtools-text-input\"\n            type=\"number\">\n        </label>\n      </div>`);\n            // clang-format on\n        }\n        const isEditable = !this.#isRecording && !this.#replayState.isPlaying;\n        const replaySettingsButtonClassMap = {\n            'settings-title': true,\n            expanded: this.#replaySettingsExpanded,\n        };\n        const replaySettingsClassMap = {\n            expanded: this.#replaySettingsExpanded,\n            settings: true,\n        };\n        // clang-format off\n        return html `\n      <div class=\"settings-row\">\n        <div class=\"settings-container\">\n          <div\n            class=${LitHtml.Directives.classMap(replaySettingsButtonClassMap)}\n            @keydown=${isEditable && this.#onReplaySettingsKeydown}\n            @click=${isEditable && this.#onToggleReplaySettings}\n            tabindex=\"0\"\n            role=\"button\"\n            jslog=${VisualLogging.action('replay-settings').track({ click: true })}\n            aria-label=${i18nString(UIStrings.editReplaySettings)}>\n            <span>${i18nString(UIStrings.replaySettings)}</span>\n            ${isEditable\n            ? html `<devtools-icon\n                    class=\"chevron\"\n                    name=\"triangle-down\">\n                  </devtools-icon>`\n            : ''}\n          </div>\n          <div class=${LitHtml.Directives.classMap(replaySettingsClassMap)}>\n            ${replaySettingsFragments.length\n            ? replaySettingsFragments\n            : html `<div>${i18nString(UIStrings.default)}</div>`}\n          </div>\n        </div>\n        <div class=\"settings-container\">\n          <div class=\"settings-title\">${i18nString(UIStrings.environment)}</div>\n          <div class=\"settings\">\n            ${environmentFragments.length\n            ? environmentFragments\n            : html `<div>${i18nString(UIStrings.default)}</div>`}\n          </div>\n        </div>\n      </div>\n    `;\n        // clang-format on\n    }\n    #getCurrentConverter() {\n        const currentConverter = [\n            ...(this.#builtInConverters || []),\n            ...(this.#extensionConverters || []),\n        ].find(converter => converter.getId() === this.#converterId);\n        if (!currentConverter) {\n            return this.#builtInConverters[0];\n        }\n        return currentConverter;\n    }\n    #renderTimelineArea() {\n        if (this.#extensionDescriptor) {\n            // clang-format off\n            return html `\n        <devtools-recorder-extension-view .descriptor=${this.#extensionDescriptor}>\n        </devtools-recorder-extension-view>\n      `;\n            // clang-format on\n        }\n        const currentConverter = this.#getCurrentConverter();\n        const converterFormatName = currentConverter?.getFormatName();\n        // clang-format off\n        return !this.#showCodeView\n            ? this.#renderSections()\n            : html `\n        <devtools-split-view>\n          <div slot=\"main\">\n            ${this.#renderSections()}\n          </div>\n          <div slot=\"sidebar\" jslog=${VisualLogging.pane('source-code').track({ resize: true })}>\n            <div class=\"section-toolbar\" jslog=${VisualLogging.toolbar()}>\n              <devtools-select-menu\n                @selectmenuselected=${this.#onCodeFormatChange}\n                .showDivider=${true}\n                .showArrow=${true}\n                .sideButton=${false}\n                .showSelectedItem=${true}\n                .showConnector=${false}\n                .position=${\"bottom\" /* Dialogs.Dialog.DialogVerticalPosition.BOTTOM */}\n                .buttonTitle=${converterFormatName || ''}\n                .jslogContext=${'code-format'}\n              >\n                ${this.#builtInConverters.map(converter => {\n                return html `<devtools-menu-item\n                    .value=${converter.getId()}\n                    .selected=${this.#converterId === converter.getId()}\n                    jslog=${VisualLogging.action().track({ click: true }).context(`converter-${Platform.StringUtilities.toKebabCase(converter.getId())}`)}\n                  >\n                    ${converter.getFormatName()}\n                  </devtools-menu-item>`;\n            })}\n                ${this.#extensionConverters.map(converter => {\n                return html `<devtools-menu-item\n                    .value=${converter.getId()}\n                    .selected=${this.#converterId === converter.getId()}\n                    jslog=${VisualLogging.action().track({ click: true }).context('converter-extension')}\n                  >\n                    ${converter.getFormatName()}\n                  </devtools-menu-item>`;\n            })}\n              </devtools-select-menu>\n              <devtools-button\n                title=${Models.Tooltip.getTooltipForActions(i18nString(UIStrings.hideCode), \"chrome-recorder.toggle-code-view\" /* Actions.RecorderActions.TOGGLE_CODE_VIEW */)}\n                .data=${{\n                variant: \"icon\" /* Buttons.Button.Variant.ICON */,\n                size: \"SMALL\" /* Buttons.Button.Size.SMALL */,\n                iconName: 'cross',\n            }}\n                @click=${this.showCodeToggle}\n                jslog=${VisualLogging.close().track({ click: true })}\n              ></devtools-button>\n            </div>\n            ${this.#renderTextEditor()}\n          </div>\n        </devtools-split-view>\n      `;\n        // clang-format on\n    }\n    #renderTextEditor() {\n        if (!this.#editorState) {\n            throw new Error('Unexpected: trying to render the text editor without editorState');\n        }\n        // clang-format off\n        return html `\n      <div class=\"text-editor\" jslog=${VisualLogging.textField().track({ change: true })}>\n        <devtools-text-editor .state=${this.#editorState}></devtools-text-editor>\n      </div>\n    `;\n        // clang-format on\n    }\n    #renderScreenshot(section) {\n        if (!section.screenshot) {\n            return null;\n        }\n        // clang-format off\n        return html `\n      <img class=\"screenshot\" src=${section.screenshot} alt=${i18nString(UIStrings.screenshotForSection)} />\n    `;\n        // clang-format on\n    }\n    #renderReplayOrAbortButton() {\n        if (this.#replayState.isPlaying) {\n            return html `\n        <devtools-button .jslogContext=${'abort-replay'} @click=${this.#handleAbortReplay} .iconName=${'pause'} .variant=${\"outlined\" /* Buttons.Button.Variant.OUTLINED */}>\n          ${i18nString(UIStrings.cancelReplay)}\n        </devtools-button>`;\n        }\n        // clang-format off\n        return html `<devtools-replay-section\n        .data=${{\n            settings: this.#recorderSettings,\n            replayExtensions: this.#replayExtensions,\n        }}\n        .disabled=${this.#replayState.isPlaying}\n        @startreplay=${this.#handleTogglePlaying}\n        >\n      </devtools-replay-section>`;\n        // clang-format on\n    }\n    #handleMeasurePerformanceClickEvent(event) {\n        event.stopPropagation();\n        this.dispatchEvent(new PlayRecordingEvent({\n            targetPanel: \"timeline\" /* TargetPanel.PERFORMANCE_PANEL */,\n            speed: \"normal\" /* PlayRecordingSpeed.NORMAL */,\n        }));\n    }\n    showCodeToggle = () => {\n        this.#showCodeView = !this.#showCodeView;\n        Host.userMetrics.recordingCodeToggled(this.#showCodeView ? 1 /* Host.UserMetrics.RecordingCodeToggled.CODE_SHOWN */ :\n            2 /* Host.UserMetrics.RecordingCodeToggled.CODE_HIDDEN */);\n        void this.#convertToCode();\n    };\n    #convertToCode = async () => {\n        if (!this.#userFlow) {\n            return;\n        }\n        const converter = this.#getCurrentConverter();\n        if (!converter) {\n            return;\n        }\n        const [code, sourceMap] = await converter.stringify(this.#userFlow);\n        this.#code = code;\n        this.#sourceMap = sourceMap;\n        this.#sourceMap?.shift();\n        const mediaType = converter.getMediaType();\n        const languageSupport = mediaType ? await CodeHighlighter.CodeHighlighter.languageFromMIME(mediaType) : null;\n        this.#editorState = CodeMirror.EditorState.create({\n            doc: this.#code,\n            extensions: [\n                TextEditor.Config.baseConfiguration(this.#code),\n                CodeMirror.EditorState.readOnly.of(true),\n                CodeMirror.EditorView.lineWrapping,\n                languageSupport ? languageSupport : [],\n            ],\n        });\n        this.#render();\n        // Used by tests.\n        this.dispatchEvent(new Event('code-generated'));\n    };\n    #highlightCodeForStep = (step, scroll = false) => {\n        if (!this.#sourceMap) {\n            return;\n        }\n        const stepIndex = this.#steps.indexOf(step);\n        if (stepIndex === -1) {\n            return;\n        }\n        const editor = this.#shadow.querySelector('devtools-text-editor');\n        if (!editor) {\n            return;\n        }\n        const cm = editor.editor;\n        if (!cm) {\n            return;\n        }\n        const line = this.#sourceMap[stepIndex * 2];\n        const length = this.#sourceMap[stepIndex * 2 + 1];\n        let selection = editor.createSelection({ lineNumber: line + length, columnNumber: 0 }, { lineNumber: line, columnNumber: 0 });\n        const lastLine = editor.state.doc.lineAt(selection.main.anchor);\n        selection = editor.createSelection({ lineNumber: line + length - 1, columnNumber: lastLine.length + 1 }, { lineNumber: line, columnNumber: 0 });\n        cm.dispatch({\n            selection,\n            effects: scroll ?\n                [\n                    CodeMirror.EditorView.scrollIntoView(selection.main, {\n                        y: 'nearest',\n                    }),\n                ] :\n                undefined,\n        });\n    };\n    #onCodeFormatChange = (event) => {\n        this.#converterId = event.itemValue;\n        if (this.#recorderSettings) {\n            this.#recorderSettings.preferredCopyFormat = event.itemValue;\n        }\n        void this.#convertToCode();\n    };\n    #renderSections() {\n        // clang-format off\n        return html `\n      <div class=\"sections\">\n      ${!this.#showCodeView\n            ? html `<div class=\"section-toolbar\">\n        <devtools-button\n          @click=${this.showCodeToggle}\n          class=\"show-code\"\n          .data=${{\n                variant: \"outlined\" /* Buttons.Button.Variant.OUTLINED */,\n                title: Models.Tooltip.getTooltipForActions(i18nString(UIStrings.showCode), \"chrome-recorder.toggle-code-view\" /* Actions.RecorderActions.TOGGLE_CODE_VIEW */),\n            }}\n          jslog=${VisualLogging.toggleSubpane(\"chrome-recorder.toggle-code-view\" /* Actions.RecorderActions.TOGGLE_CODE_VIEW */).track({ click: true })}\n        >\n          ${i18nString(UIStrings.showCode)}\n        </devtools-button>\n      </div>`\n            : ''}\n      ${this.#sections.map((section, i) => html `\n            <div class=\"section\">\n              <div class=\"screenshot-wrapper\">\n                ${this.#renderScreenshot(section)}\n              </div>\n              <div class=\"content\">\n                <div class=\"steps\">\n                  <devtools-step-view\n                    @click=${this.#onStepClick}\n                    @mouseover=${this.#onStepHover}\n                    .data=${{\n            section,\n            state: this.#getSectionState(section),\n            isStartOfGroup: true,\n            isEndOfGroup: section.steps.length === 0,\n            isFirstSection: i === 0,\n            isLastSection: i === this.#sections.length - 1 &&\n                section.steps.length === 0,\n            isSelected: this.#selectedStep === (section.causingStep || null),\n            sectionIndex: i,\n            isRecording: this.#isRecording,\n            isPlaying: this.#replayState.isPlaying,\n            error: this.#getSectionState(section) === \"error\" /* State.ERROR */\n                ? this.#currentError\n                : undefined,\n            hasBreakpoint: false,\n            removable: this.#steps.length > 1 && section.causingStep,\n        }}\n                  >\n                  </devtools-step-view>\n                  ${section.steps.map(step => this.#renderStep(section, step, i === this.#sections.length - 1))}\n                  ${!this.#recordingTogglingInProgress && this.#isRecording && i === this.#sections.length - 1 ? html `<devtools-button\n                    class=\"step add-assertion-button\"\n                    .data=${{\n            variant: \"outlined\" /* Buttons.Button.Variant.OUTLINED */,\n            title: i18nString(UIStrings.addAssertion),\n            jslogContext: 'add-assertion',\n        }}\n                    @click=${this.#dispatchAddAssertionEvent}\n                  >${i18nString(UIStrings.addAssertion)}</devtools-button>` : undefined}\n                  ${this.#isRecording && i === this.#sections.length - 1\n            ? html `<div class=\"step recording\">${i18nString(UIStrings.recording)}</div>`\n            : null}\n                </div>\n              </div>\n            </div>\n      `)}\n      </div>\n    `;\n        // clang-format on\n    }\n    #renderHeader() {\n        if (!this.#userFlow) {\n            return '';\n        }\n        const { title } = this.#userFlow;\n        const isTitleEditable = !this.#replayState.isPlaying && !this.#isRecording;\n        // clang-format off\n        return html `\n      <div class=\"header\">\n        <div class=\"header-title-wrapper\">\n          <div class=\"header-title\">\n            <span @blur=${this.#onTitleBlur}\n                  @keydown=${this.#onTitleInputKeyDown}\n                  id=\"title-input\"\n                  .contentEditable=${isTitleEditable ? 'true' : 'false'}\n                  jslog=${VisualLogging.value('title').track({ change: true })}\n                  class=${LitHtml.Directives.classMap({\n            'has-error': this.#isTitleInvalid,\n            disabled: !isTitleEditable,\n        })}\n                  .innerText=${LitHtml.Directives.live(title)}></span>\n            <div class=\"title-button-bar\">\n              <devtools-button\n                @click=${this.#onEditTitleButtonClick}\n                .data=${{\n            disabled: !isTitleEditable,\n            variant: \"toolbar\" /* Buttons.Button.Variant.TOOLBAR */,\n            iconName: 'edit',\n            title: i18nString(UIStrings.editTitle),\n            jslogContext: 'edit-title',\n        }}\n              ></devtools-button>\n            </div>\n          </div>\n          ${this.#isTitleInvalid\n            ? html `<div class=\"title-input-error-text\">\n            ${i18nString(UIStrings.requiredTitleError)}\n          </div>`\n            : ''}\n        </div>\n        ${!this.#isRecording && this.#replayAllowed\n            ? html `<div class=\"actions\">\n                <devtools-button\n                  @click=${this.#handleMeasurePerformanceClickEvent}\n                  .data=${{\n                disabled: this.#replayState.isPlaying,\n                variant: \"outlined\" /* Buttons.Button.Variant.OUTLINED */,\n                iconName: 'performance',\n                title: i18nString(UIStrings.performancePanel),\n                jslogContext: 'measure-performance',\n            }}\n                >\n                  ${i18nString(UIStrings.performancePanel)}\n                </devtools-button>\n                <div class=\"separator\"></div>\n                ${this.#renderReplayOrAbortButton()}\n              </div>`\n            : ''}\n      </div>`;\n        // clang-format on\n    }\n    #renderFooter() {\n        if (!this.#isRecording) {\n            return '';\n        }\n        const translation = this.#recordingTogglingInProgress ? i18nString(UIStrings.recordingIsBeingStopped) :\n            i18nString(UIStrings.endRecording);\n        // clang-format off\n        return html `\n      <div class=\"footer\">\n        <div class=\"controls\">\n          <devtools-control-button\n            jslog=${VisualLogging.toggle('toggle-recording').track({ click: true })}\n            @click=${this.#dispatchRecordingFinished}\n            .disabled=${this.#recordingTogglingInProgress}\n            .shape=${'square'}\n            .label=${translation}\n            title=${Models.Tooltip.getTooltipForActions(translation, \"chrome-recorder.start-recording\" /* Actions.RecorderActions.START_RECORDING */)}\n          >\n          </devtools-control-button>\n        </div>\n      </div>\n    `;\n        // clang-format on\n    }\n    #render() {\n        const classNames = {\n            wrapper: true,\n            'is-recording': this.#isRecording,\n            'is-playing': this.#replayState.isPlaying,\n            'was-successful': this.#lastReplayResult === \"Success\" /* Models.RecordingPlayer.ReplayResult.SUCCESS */,\n            'was-failure': this.#lastReplayResult === \"Failure\" /* Models.RecordingPlayer.ReplayResult.FAILURE */,\n        };\n        // clang-format off\n        LitHtml.render(html `\n      <div @click=${this.#onWrapperClick} class=${LitHtml.Directives.classMap(classNames)}>\n        <div class=\"main\">\n          ${this.#renderHeader()}\n          ${this.#extensionDescriptor\n            ? html `\n            <devtools-recorder-extension-view .descriptor=${this.#extensionDescriptor}>\n            </devtools-recorder-extension-view>\n          `\n            : html `\n            ${this.#renderSettings()}\n            ${this.#renderTimelineArea()}\n          `}\n          ${this.#renderFooter()}\n        </div>\n      </div>\n    `, this.#shadow, { host: this });\n        // clang-format on\n    }\n}\ncustomElements.define('devtools-recording-view', RecordingView);\n//# sourceMappingURL=RecordingView.js.map","// Copyright 2024 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n// IMPORTANT: this file is auto generated. Please do not edit this file.\n/* istanbul ignore file */\nconst styles = new CSSStyleSheet();\nstyles.replaceSync(\n`/*\n * Copyright 2023 The Chromium Authors. All rights reserved.\n * Use of this source code is governed by a BSD-style license that can be\n * found in the LICENSE file.\n */\n\n.select-button {\n  display: flex;\n  gap: 12px;\n}\n\n.select-button devtools-button {\n  position: relative; /* Needed for outline to appear on top of the next element */\n}\n\n.select-menu-item-content-with-icon {\n  display: flex;\n  align-items: center;\n}\n\n/* .select-menu-item-content-with-icon::before {\n  content: \"\";\n  position: relative;\n  left: 0;\n  top: 0;\n  background-color: var(--sys-color-on-surface);\n  display: inline-block;\n  mask-repeat: no-repeat;\n  mask-position: center;\n  width: 24px;\n  height: 24px;\n  margin-right: 4px;\n  mask-image: var(--item-mask-icon);\n} */\n\n/* devtools-select-menu {\n  height: var(--override-select-menu-height, 24px);\n  border-radius: 0 4px 4px 0;\n  box-sizing: border-box;\n\n  --override-select-menu-show-button-outline: var(--sys-color-state-focus-ring);\n  --override-select-menu-label-with-arrow-padding: 0;\n  --override-select-menu-border: none;\n  --override-select-menu-show-button-padding: 0 6px 0 0;\n} */\n\n/* devtools-select-menu.primary {\n  border: none;\n  border-left: 1px solid var(--override-icon-and-text-color);\n\n  --override-icon-and-text-color: var(--sys-color-cdt-base-container);\n  --override-select-menu-arrow-color: var(--override-icon-and-text-color);\n  --override-divider-color: var(--override-icon-and-text-color);\n  --override-select-menu-background-color: var(--sys-color-primary);\n  --override-select-menu-active-background-color:\n    var(\n      --override-select-menu-background-color\n    );\n} */\n\n/* devtools-select-menu.primary:hover {\n  --override-select-menu-background-color: color-mix(in sRGB, var(--sys-color-primary), var(--sys-color-state-hover-on-prominent) 10%);\n} */\n\n/* devtools-select-menu[disabled].primary,\ndevtools-select-menu[disabled].primary:hover {\n  --override-icon-and-text-color: var(--sys-color-state-disabled);\n  --override-select-menu-background-color: var(--sys-color-cdt-base-container-elevation-1);\n} */\n\n/*# sourceURL=selectButton.css */\n`);\n\nexport default styles;\n","// Copyright 2023 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\nimport '../../../ui/components/menus/menus.js';\nimport * as Platform from '../../../core/platform/platform.js';\nimport * as Buttons from '../../../ui/components/buttons/buttons.js';\nimport * as Dialogs from '../../../ui/components/dialogs/dialogs.js';\nimport * as ComponentHelpers from '../../../ui/components/helpers/helpers.js';\nimport * as LitHtml from '../../../ui/lit-html/lit-html.js';\nimport * as VisualLogging from '../../../ui/visual_logging/visual_logging.js';\nimport * as Models from '../models/models.js';\nimport selectButtonStyles from './selectButton.css.js';\nconst { html, Directives: { ifDefined, classMap } } = LitHtml;\nexport class SelectButtonClickEvent extends Event {\n    value;\n    static eventName = 'selectbuttonclick';\n    constructor(value) {\n        super(SelectButtonClickEvent.eventName, { bubbles: true, composed: true });\n        this.value = value;\n    }\n}\nexport class SelectMenuSelectedEvent extends Event {\n    value;\n    static eventName = 'selectmenuselected';\n    constructor(value) {\n        super(SelectMenuSelectedEvent.eventName, { bubbles: true, composed: true });\n        this.value = value;\n    }\n}\nexport class SelectButton extends HTMLElement {\n    #shadow = this.attachShadow({ mode: 'open' });\n    #props = {\n        disabled: false,\n        value: '',\n        items: [],\n        buttonLabel: '',\n        groups: [],\n        variant: \"primary\" /* Variant.PRIMARY */,\n    };\n    connectedCallback() {\n        this.#shadow.adoptedStyleSheets = [selectButtonStyles];\n        void ComponentHelpers.ScheduledRender.scheduleRender(this, this.#render);\n    }\n    get disabled() {\n        return this.#props.disabled;\n    }\n    set disabled(disabled) {\n        this.#props.disabled = disabled;\n        void ComponentHelpers.ScheduledRender.scheduleRender(this, this.#render);\n    }\n    get items() {\n        return this.#props.items;\n    }\n    set items(items) {\n        this.#props.items = items;\n        void ComponentHelpers.ScheduledRender.scheduleRender(this, this.#render);\n    }\n    set buttonLabel(buttonLabel) {\n        this.#props.buttonLabel = buttonLabel;\n    }\n    set groups(groups) {\n        this.#props.groups = groups;\n        void ComponentHelpers.ScheduledRender.scheduleRender(this, this.#render);\n    }\n    get value() {\n        return this.#props.value;\n    }\n    set value(value) {\n        this.#props.value = value;\n        void ComponentHelpers.ScheduledRender.scheduleRender(this, this.#render);\n    }\n    get variant() {\n        return this.#props.variant;\n    }\n    set variant(variant) {\n        this.#props.variant = variant;\n        void ComponentHelpers.ScheduledRender.scheduleRender(this, this.#render);\n    }\n    set action(value) {\n        this.#props.action = value;\n        void ComponentHelpers.ScheduledRender.scheduleRender(this, this.#render);\n    }\n    #handleClick(ev) {\n        ev.stopPropagation();\n        this.dispatchEvent(new SelectButtonClickEvent(this.#props.value));\n    }\n    #handleSelectMenuSelect(evt) {\n        this.dispatchEvent(new SelectMenuSelectedEvent(evt.itemValue));\n        void ComponentHelpers.ScheduledRender.scheduleRender(this, this.#render);\n    }\n    #renderSelectItem(item, selectedItem) {\n        // clang-format off\n        return html `\n      <devtools-menu-item .value=${item.value} .selected=${item.value === selectedItem.value} jslog=${VisualLogging.item(Platform.StringUtilities.toKebabCase(item.value)).track({ click: true })}>\n        ${item.label()}\n      </devtools-menu-item>\n    `;\n        // clang-format on\n    }\n    #renderSelectGroup(group, selectedItem) {\n        // clang-format off\n        return html `\n      <devtools-menu-group .name=${group.name}>\n        ${group.items.map(item => this.#renderSelectItem(item, selectedItem))}\n      </devtools-menu-group>\n    `;\n        // clang-format on\n    }\n    #getTitle(label) {\n        return this.#props.action ? Models.Tooltip.getTooltipForActions(label, this.#props.action) : '';\n    }\n    #render = () => {\n        const hasGroups = Boolean(this.#props.groups.length);\n        const items = hasGroups ? this.#props.groups.flatMap(group => group.items) : this.#props.items;\n        const selectedItem = items.find(item => item.value === this.#props.value) || items[0];\n        if (!selectedItem) {\n            return;\n        }\n        const classes = {\n            primary: this.#props.variant === \"primary\" /* Variant.PRIMARY */,\n            secondary: this.#props.variant === \"outlined\" /* Variant.OUTLINED */,\n        };\n        const buttonVariant = this.#props.variant === \"outlined\" /* Variant.OUTLINED */ ? \"outlined\" /* Buttons.Button.Variant.OUTLINED */ : \"primary\" /* Buttons.Button.Variant.PRIMARY */;\n        const menuLabel = selectedItem.buttonLabel ? selectedItem.buttonLabel() : selectedItem.label();\n        // clang-format off\n        LitHtml.render(html `\n      <div class=\"select-button\" title=${ifDefined(this.#getTitle(menuLabel))}>\n      <devtools-select-menu\n          class=${classMap(classes)}\n          @selectmenuselected=${this.#handleSelectMenuSelect}\n          ?disabled=${this.#props.disabled}\n          .showArrow=${true}\n          .sideButton=${false}\n          .showSelectedItem=${true}\n          .disabled=${this.#props.disabled}\n          .buttonTitle=${() => html `${menuLabel}`}\n          .position=${\"bottom\" /* Dialogs.Dialog.DialogVerticalPosition.BOTTOM */}\n          .horizontalAlignment=${\"right\" /* Dialogs.Dialog.DialogHorizontalAlignment.RIGHT */}\n        >\n          ${hasGroups\n            ? this.#props.groups.map(group => this.#renderSelectGroup(group, selectedItem))\n            : this.#props.items.map(item => this.#renderSelectItem(item, selectedItem))}\n        </devtools-select-menu>\n        ${selectedItem\n            ? html `\n        <devtools-button\n            .disabled=${this.#props.disabled}\n            .variant=${buttonVariant}\n            .iconName=${selectedItem.buttonIconName}\n            @click=${this.#handleClick}>\n            ${this.#props.buttonLabel}\n        </devtools-button>`\n            : ''}\n      </div>`, this.#shadow, { host: this });\n        // clang-format on\n    };\n}\ncustomElements.define('devtools-select-button', SelectButton);\n//# sourceMappingURL=SelectButton.js.map","// Copyright 2024 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n// IMPORTANT: this file is auto generated. Please do not edit this file.\n/* istanbul ignore file */\nconst styles = new CSSStyleSheet();\nstyles.replaceSync(\n`/*\n * Copyright 2023 The Chromium Authors. All rights reserved.\n * Use of this source code is governed by a BSD-style license that can be\n * found in the LICENSE file.\n */\n\n* {\n  margin: 0;\n  padding: 0;\n  box-sizing: border-box;\n  font-weight: normal;\n  font-size: inherit;\n}\n\n:host {\n  flex: 1;\n  display: block;\n  overflow: auto;\n}\n\n.wrapper {\n  padding: 24px;\n  background-color: var(--sys-color-cdt-base-container);\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n}\n\n.fit-content {\n  width: fit-content;\n}\n\n.align-right {\n  width: auto;\n  display: flex;\n  flex-direction: row;\n  justify-content: flex-end;\n}\n\n/*# sourceURL=startView.css */\n`);\n\nexport default styles;\n","// Copyright 2023 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\nimport '../../../ui/legacy/legacy.js';\nimport '../../../ui/components/panel_introduction_steps/panel_introduction_steps.js';\nimport '../../../ui/components/panel_feedback/panel_feedback.js';\nimport * as i18n from '../../../core/i18n/i18n.js';\nimport * as Buttons from '../../../ui/components/buttons/buttons.js';\nimport * as ComponentHelpers from '../../../ui/components/helpers/helpers.js';\nimport * as LitHtml from '../../../ui/lit-html/lit-html.js';\nimport * as VisualLogging from '../../../ui/visual_logging/visual_logging.js';\nimport startViewStyles from './startView.css.js';\nconst { html } = LitHtml;\nconst UIStrings = {\n    /**\n     * @description The header of the start page in the Recorder panel.\n     */\n    header: 'Measure performance across an entire user journey',\n    /**\n     * @description The Recorder start page contains a list of steps that the user can do. This is the text of the first step.\n     */\n    step1: 'Record a common user journey on your website or app',\n    /**\n     * @description The Recorder start page contains a list of steps that the user can do. This is the text of the second step.\n     */\n    step2: 'Replay the recording to check if the flow is working',\n    /**\n     * @description The Recorder start page contains a list of steps that the user can do. This is the text of the third step.\n     */\n    step3: 'Generate a detailed performance trace or export a Puppeteer script for testing',\n    /**\n     * @description The title of the button that leads to the page for creating a new recording.\n     */\n    createRecording: 'Create a new recording',\n    /**\n     * @description The link title in the Preview feature box leading to an article documenting the recorder feature.\n     */\n    quickStart: 'Quick start: learn the new Recorder panel in DevTools',\n};\nconst str_ = i18n.i18n.registerUIStrings('panels/recorder/components/StartView.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\nexport const FEEDBACK_URL = 'https://goo.gle/recorder-feedback';\nconst DOC_URL = 'https://developer.chrome.com/docs/devtools/recorder';\nexport class CreateRecordingEvent extends Event {\n    static eventName = 'createrecording';\n    constructor() {\n        super(CreateRecordingEvent.eventName);\n    }\n}\nexport class StartView extends HTMLElement {\n    #shadow = this.attachShadow({ mode: 'open' });\n    constructor() {\n        super();\n        this.setAttribute('jslog', `${VisualLogging.section('start-view')}`);\n    }\n    connectedCallback() {\n        this.#shadow.adoptedStyleSheets = [startViewStyles];\n        void ComponentHelpers.ScheduledRender.scheduleRender(this, this.#render);\n    }\n    #onClick() {\n        this.dispatchEvent(new CreateRecordingEvent());\n    }\n    #render = () => {\n        // clang-format off\n        LitHtml.render(html `\n        <div class=\"wrapper\">\n          <devtools-panel-introduction-steps>\n            <span slot=\"title\">${i18nString(UIStrings.header)}</span>\n            <span slot=\"step-1\">${i18nString(UIStrings.step1)}</span>\n            <span slot=\"step-2\">${i18nString(UIStrings.step2)}</span>\n            <span slot=\"step-3\">${i18nString(UIStrings.step3)}</span>\n          </devtools-panel-introduction-steps>\n          <div class=\"fit-content\">\n            <devtools-button .variant=${\"primary\" /* Buttons.Button.Variant.PRIMARY */} @click=${this.#onClick}\n              .jslogContext=${\"chrome-recorder.create-recording\" /* Actions.RecorderActions.CREATE_RECORDING */}>\n              ${i18nString(UIStrings.createRecording)}\n            </devtools-button>\n          </div>\n          <devtools-panel-feedback .data=${{\n            feedbackUrl: FEEDBACK_URL,\n            quickStartUrl: DOC_URL,\n            quickStartLinkText: i18nString(UIStrings.quickStart),\n        }}>\n          </devtools-panel-feedback>\n          <div class=\"align-right\">\n            <devtools-feedback-button .data=${{\n            feedbackUrl: FEEDBACK_URL,\n        }}>\n            </devtools-feedback-button>\n          </div>\n        </div>\n      `, this.#shadow, { host: this });\n        // clang-format on\n    };\n}\ncustomElements.define('devtools-start-view', StartView);\n//# sourceMappingURL=StartView.js.map","// Copyright 2023 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\nimport * as Common from '../../../core/common/common.js';\nimport * as Platform from '../../../core/platform/platform.js';\nimport * as SDK from '../../../core/sdk/sdk.js';\nimport * as Models from '../models/models.js';\nimport * as Util from '../util/util.js';\nconst BINDING_NAME = 'captureSelectors';\nexport class SelectorPickedEvent extends Event {\n    static eventName = 'selectorpicked';\n    data;\n    constructor(data) {\n        super(SelectorPickedEvent.eventName, { bubbles: true, composed: true });\n        this.data = data;\n    }\n}\nexport class RequestSelectorAttributeEvent extends Event {\n    static eventName = 'requestselectorattribute';\n    send;\n    constructor(send) {\n        super(RequestSelectorAttributeEvent.eventName, {\n            bubbles: true,\n            composed: true,\n        });\n        this.send = send;\n    }\n}\nexport class SelectorPicker {\n    static get #targetManager() {\n        return SDK.TargetManager.TargetManager.instance();\n    }\n    #element;\n    #selectorAttribute;\n    #activeMutex = new Common.Mutex.Mutex();\n    active = false;\n    constructor(element) {\n        this.#element = element;\n    }\n    start = () => {\n        return this.#activeMutex.run(async () => {\n            if (this.active) {\n                return;\n            }\n            this.active = true;\n            this.#selectorAttribute = await new Promise((resolve, reject) => {\n                const timeout = setTimeout(reject, 1000);\n                this.#element.dispatchEvent(new RequestSelectorAttributeEvent(attribute => {\n                    clearTimeout(timeout);\n                    resolve(attribute);\n                }));\n            });\n            SelectorPicker.#targetManager.observeTargets(this);\n            this.#element.requestUpdate();\n        });\n    };\n    stop = () => {\n        return this.#activeMutex.run(async () => {\n            if (!this.active) {\n                return;\n            }\n            this.active = false;\n            SelectorPicker.#targetManager.unobserveTargets(this);\n            SelectorPicker.#targetManager.targets().map(this.targetRemoved.bind(this));\n            this.#selectorAttribute = undefined;\n            this.#element.requestUpdate();\n        });\n    };\n    toggle = () => {\n        if (!this.active) {\n            return this.start();\n        }\n        return this.stop();\n    };\n    #targetMutexes = new Map();\n    targetAdded(target) {\n        if (target.type() !== SDK.Target.Type.FRAME) {\n            return;\n        }\n        let mutex = this.#targetMutexes.get(target);\n        if (!mutex) {\n            mutex = new Common.Mutex.Mutex();\n            this.#targetMutexes.set(target, mutex);\n        }\n        void mutex.run(async () => {\n            await this.#addBindings(target);\n            await this.#injectApplicationScript(target);\n        });\n    }\n    targetRemoved(target) {\n        const mutex = this.#targetMutexes.get(target);\n        if (!mutex) {\n            return;\n        }\n        void mutex.run(async () => {\n            try {\n                await this.#injectCleanupScript(target);\n                await this.#removeBindings(target);\n            }\n            catch {\n            }\n        });\n    }\n    #handleBindingCalledEvent = (event) => {\n        if (event.data.name !== BINDING_NAME) {\n            return;\n        }\n        const contextId = event.data.executionContextId;\n        const frames = SDK.TargetManager.TargetManager.instance().targets();\n        const contextTarget = Models.SDKUtils.findTargetByExecutionContext(frames, contextId);\n        const frameId = Models.SDKUtils.findFrameIdByExecutionContext(frames, contextId);\n        if (!contextTarget || !frameId) {\n            throw new Error(`No execution context found for the binding call + ${JSON.stringify(event.data)}`);\n        }\n        const model = contextTarget.model(SDK.ResourceTreeModel.ResourceTreeModel);\n        if (!model) {\n            throw new Error(`ResourceTreeModel instance is missing for the target: ${contextTarget.id()}`);\n        }\n        const frame = model.frameForId(frameId);\n        if (!frame) {\n            throw new Error('Frame is not found');\n        }\n        this.#element.dispatchEvent(new SelectorPickedEvent({\n            ...JSON.parse(event.data.payload),\n            ...Models.SDKUtils.getTargetFrameContext(contextTarget, frame),\n        }));\n        void this.stop();\n    };\n    #scriptIdentifier = new Map();\n    async #injectApplicationScript(target) {\n        const injectedScript = await Util.InjectedScript.get();\n        const script = `${injectedScript};DevToolsRecorder.startSelectorPicker({getAccessibleName, getAccessibleRole}, ${JSON.stringify(this.#selectorAttribute ? this.#selectorAttribute : undefined)}, ${Util.isDebugBuild})`;\n        const [{ identifier }] = await Promise.all([\n            target.pageAgent().invoke_addScriptToEvaluateOnNewDocument({\n                source: script,\n                worldName: Util.DEVTOOLS_RECORDER_WORLD_NAME,\n                includeCommandLineAPI: true,\n            }),\n            Models.SDKUtils.evaluateInAllFrames(Util.DEVTOOLS_RECORDER_WORLD_NAME, target, script),\n        ]);\n        this.#scriptIdentifier.set(target, identifier);\n    }\n    async #injectCleanupScript(target) {\n        const identifier = this.#scriptIdentifier.get(target);\n        Platform.assertNotNullOrUndefined(identifier);\n        this.#scriptIdentifier.delete(target);\n        await target.pageAgent().invoke_removeScriptToEvaluateOnNewDocument({ identifier });\n        const script = 'DevToolsRecorder.stopSelectorPicker()';\n        await Models.SDKUtils.evaluateInAllFrames(Util.DEVTOOLS_RECORDER_WORLD_NAME, target, script);\n    }\n    async #addBindings(target) {\n        const model = target.model(SDK.RuntimeModel.RuntimeModel);\n        Platform.assertNotNullOrUndefined(model);\n        model.addEventListener(SDK.RuntimeModel.Events.BindingCalled, this.#handleBindingCalledEvent);\n        await model.addBinding({\n            name: BINDING_NAME,\n            executionContextName: Util.DEVTOOLS_RECORDER_WORLD_NAME,\n        });\n    }\n    async #removeBindings(target) {\n        await target.runtimeAgent().invoke_removeBinding({ name: BINDING_NAME });\n        const model = target.model(SDK.RuntimeModel.RuntimeModel);\n        Platform.assertNotNullOrUndefined(model);\n        model.removeEventListener(SDK.RuntimeModel.Events.BindingCalled, this.#handleBindingCalledEvent);\n    }\n}\n//# sourceMappingURL=SelectorPicker.js.map","// Copyright 2024 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n// IMPORTANT: this file is auto generated. Please do not edit this file.\n/* istanbul ignore file */\nconst styles = new CSSStyleSheet();\nstyles.replaceSync(\n`/*\n * Copyright 2023 The Chromium Authors. All rights reserved.\n * Use of this source code is governed by a BSD-style license that can be\n * found in the LICENSE file.\n */\n\n* {\n  box-sizing: border-box;\n  padding: 0;\n  margin: 0;\n  font-size: inherit;\n}\n\n:host {\n  display: block;\n}\n\n.row {\n  display: flex;\n  flex-direction: row;\n  color: var(--sys-color-token-property-special);\n  font-family: var(--monospace-font-family);\n  font-size: var(--monospace-font-size);\n  align-items: center;\n  line-height: 18px;\n  margin-top: 3px;\n}\n\n.row devtools-button {\n  line-height: 1;\n  margin-left: 0.5em;\n}\n\n.separator {\n  margin-right: 0.5em;\n  color: var(--sys-color-on-surface);\n}\n\n.padded {\n  margin-left: 2em;\n}\n\n.padded.double {\n  margin-left: 4em;\n}\n\n.selector-picker {\n  width: 18px;\n  height: 18px;\n}\n\n.inline-button {\n  width: 18px;\n  height: 18px;\n  opacity: 0%;\n  visibility: hidden;\n  transition: opacity 200ms;\n  flex-shrink: 0;\n}\n\n.row:focus-within .inline-button,\n.row:hover .inline-button {\n  opacity: 100%;\n  visibility: visible;\n}\n\n.wrapped.row {\n  flex-wrap: wrap;\n}\n\n.gap.row {\n  gap: 5px;\n}\n\n.gap.row devtools-button {\n  margin-left: 0;\n}\n\n.regular-font {\n  font-family: inherit;\n  font-size: inherit;\n}\n\n.no-margin {\n  margin: 0;\n}\n\n.row-buttons {\n  margin-top: 3px;\n}\n\n.error {\n  margin: 3px 0 6px;\n  padding: 8px 12px;\n  background: var(--sys-color-error-container);\n  color: var(--sys-color-error);\n}\n\n/*# sourceURL=stepEditor.css */\n`);\n\nexport default styles;\n","// Copyright 2023 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\nexport const mod = (a, n) => {\n    return ((a % n) + n) % n;\n};\nexport function assert(predicate, message = 'Assertion failed!') {\n    if (!predicate) {\n        throw new Error(message);\n    }\n}\nexport const deepFreeze = (object) => {\n    for (const name of Reflect.ownKeys(object)) {\n        const value = object[name];\n        if ((value && typeof value === 'object') || typeof value === 'function') {\n            deepFreeze(value);\n        }\n    }\n    return Object.freeze(object);\n};\nexport class InsertAssignment {\n    value;\n    constructor(value) {\n        this.value = value;\n    }\n}\nexport class ArrayAssignments {\n    value;\n    constructor(value) {\n        this.value = value;\n    }\n}\nexport const immutableDeepAssign = (object, assignments) => {\n    if (assignments instanceof ArrayAssignments) {\n        assert(Array.isArray(object), `Expected an array. Got ${typeof object}.`);\n        const updatedObject = [...object];\n        const keys = Object.keys(assignments.value)\n            .sort((a, b) => Number(b) - Number(a));\n        for (const key of keys) {\n            const update = assignments.value[Number(key)];\n            if (update === undefined) {\n                updatedObject.splice(Number(key), 1);\n            }\n            else if (update instanceof InsertAssignment) {\n                updatedObject.splice(Number(key), 0, update.value);\n            }\n            else {\n                updatedObject[Number(key)] = immutableDeepAssign(updatedObject[key], update);\n            }\n        }\n        return Object.freeze(updatedObject);\n    }\n    if (typeof assignments === 'object' && !Array.isArray(assignments)) {\n        assert(!Array.isArray(object), 'Expected an object. Got an array.');\n        const updatedObject = { ...object };\n        const keys = Object.keys(assignments);\n        for (const key of keys) {\n            const update = assignments[key];\n            if (update === undefined) {\n                delete updatedObject[key];\n            }\n            else {\n                updatedObject[key] = immutableDeepAssign(updatedObject[key], update);\n            }\n        }\n        return Object.freeze(updatedObject);\n    }\n    return assignments;\n};\n//# sourceMappingURL=util.js.map","// Copyright 2023 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport * as Host from '../../../core/host/host.js';\nimport * as i18n from '../../../core/i18n/i18n.js';\nimport * as Platform from '../../../core/platform/platform.js';\nimport * as Buttons from '../../../ui/components/buttons/buttons.js';\nimport * as SuggestionInput from '../../../ui/components/suggestion_input/suggestion_input.js';\nimport * as LitHtml from '../../../ui/lit-html/lit-html.js';\nimport * as VisualLogging from '../../../ui/visual_logging/visual_logging.js';\nimport * as Controllers from '../controllers/controllers.js';\nimport * as Models from '../models/models.js';\nimport * as Util from '../util/util.js';\nimport stepEditorStyles from './stepEditor.css.js';\nimport { ArrayAssignments, assert, deepFreeze, immutableDeepAssign, InsertAssignment, } from './util.js';\nconst { html, Decorators, Directives, LitElement } = LitHtml;\nconst { customElement, property, state } = Decorators;\nconst { live } = Directives;\nconst typeConverters = Object.freeze({\n    string: (value) => value.trim(),\n    number: (value) => {\n        const number = parseFloat(value);\n        if (Number.isNaN(number)) {\n            return 0;\n        }\n        return number;\n    },\n    boolean: (value) => {\n        if (value.toLowerCase() === 'true') {\n            return true;\n        }\n        return false;\n    },\n});\nconst dataTypeByAttribute = Object.freeze({\n    selectors: 'string',\n    offsetX: 'number',\n    offsetY: 'number',\n    target: 'string',\n    frame: 'number',\n    assertedEvents: 'string',\n    value: 'string',\n    key: 'string',\n    operator: 'string',\n    count: 'number',\n    expression: 'string',\n    x: 'number',\n    y: 'number',\n    url: 'string',\n    type: 'string',\n    timeout: 'number',\n    duration: 'number',\n    button: 'string',\n    deviceType: 'string',\n    width: 'number',\n    height: 'number',\n    deviceScaleFactor: 'number',\n    isMobile: 'boolean',\n    hasTouch: 'boolean',\n    isLandscape: 'boolean',\n    download: 'number',\n    upload: 'number',\n    latency: 'number',\n    name: 'string',\n    parameters: 'string',\n    visible: 'boolean',\n    properties: 'string',\n    attributes: 'string',\n});\nconst defaultValuesByAttribute = deepFreeze({\n    selectors: [['.cls']],\n    offsetX: 1,\n    offsetY: 1,\n    target: 'main',\n    frame: [0],\n    assertedEvents: [\n        { type: 'navigation', url: 'https://example.com', title: 'Title' },\n    ],\n    value: 'Value',\n    key: 'Enter',\n    operator: '>=',\n    count: 1,\n    expression: 'true',\n    x: 0,\n    y: 0,\n    url: 'https://example.com',\n    timeout: 5000,\n    duration: 50,\n    deviceType: 'mouse',\n    button: 'primary',\n    type: 'click',\n    width: 800,\n    height: 600,\n    deviceScaleFactor: 1,\n    isMobile: false,\n    hasTouch: false,\n    isLandscape: true,\n    download: 1000,\n    upload: 1000,\n    latency: 25,\n    name: 'customParam',\n    parameters: '{}',\n    properties: '{}',\n    attributes: [{ name: 'attribute', value: 'value' }],\n    visible: true,\n});\nconst attributesByType = deepFreeze({\n    [Models.Schema.StepType.Click]: {\n        required: ['selectors', 'offsetX', 'offsetY'],\n        optional: [\n            'assertedEvents',\n            'button',\n            'deviceType',\n            'duration',\n            'frame',\n            'target',\n            'timeout',\n        ],\n    },\n    [Models.Schema.StepType.DoubleClick]: {\n        required: ['offsetX', 'offsetY', 'selectors'],\n        optional: [\n            'assertedEvents',\n            'button',\n            'deviceType',\n            'frame',\n            'target',\n            'timeout',\n        ],\n    },\n    [Models.Schema.StepType.Hover]: {\n        required: ['selectors'],\n        optional: ['assertedEvents', 'frame', 'target', 'timeout'],\n    },\n    [Models.Schema.StepType.Change]: {\n        required: ['selectors', 'value'],\n        optional: ['assertedEvents', 'frame', 'target', 'timeout'],\n    },\n    [Models.Schema.StepType.KeyDown]: {\n        required: ['key'],\n        optional: ['assertedEvents', 'target', 'timeout'],\n    },\n    [Models.Schema.StepType.KeyUp]: {\n        required: ['key'],\n        optional: ['assertedEvents', 'target', 'timeout'],\n    },\n    [Models.Schema.StepType.Scroll]: {\n        required: [],\n        optional: ['assertedEvents', 'frame', 'target', 'timeout', 'x', 'y'],\n    },\n    [Models.Schema.StepType.Close]: {\n        required: [],\n        optional: ['assertedEvents', 'target', 'timeout'],\n    },\n    [Models.Schema.StepType.Navigate]: {\n        required: ['url'],\n        optional: ['assertedEvents', 'target', 'timeout'],\n    },\n    [Models.Schema.StepType.WaitForElement]: {\n        required: ['selectors'],\n        optional: [\n            'assertedEvents',\n            'attributes',\n            'count',\n            'frame',\n            'operator',\n            'properties',\n            'target',\n            'timeout',\n            'visible',\n        ],\n    },\n    [Models.Schema.StepType.WaitForExpression]: {\n        required: ['expression'],\n        optional: ['assertedEvents', 'frame', 'target', 'timeout'],\n    },\n    [Models.Schema.StepType.CustomStep]: {\n        required: ['name', 'parameters'],\n        optional: ['assertedEvents', 'target', 'timeout'],\n    },\n    [Models.Schema.StepType.EmulateNetworkConditions]: {\n        required: ['download', 'latency', 'upload'],\n        optional: ['assertedEvents', 'target', 'timeout'],\n    },\n    [Models.Schema.StepType.SetViewport]: {\n        required: [\n            'deviceScaleFactor',\n            'hasTouch',\n            'height',\n            'isLandscape',\n            'isMobile',\n            'width',\n        ],\n        optional: ['assertedEvents', 'target', 'timeout'],\n    },\n});\nconst UIStrings = {\n    /**\n     *@description The text that is disabled when the steps were not saved due to an error. The error message itself is always in English and not translated.\n     *@example {Saving failed} error\n     */\n    notSaved: 'Not saved: {error}',\n    /**\n     *@description The button title that adds a new attribute to the form.\n     *@example {timeout} attributeName\n     */\n    addAttribute: 'Add {attributeName}',\n    /**\n     *@description The title of a button that deletes an attribute from the form.\n     */\n    deleteRow: 'Delete row',\n    /**\n     *@description The title of a button that allows you to select an element on the page and update CSS/ARIA selectors.\n     */\n    selectorPicker: 'Select an element in the page to update selectors',\n    /**\n     *@description The title of a button that adds a new input field for the entry of the frame index. Frame index is the number of the frame within the page's frame tree.\n     */\n    addFrameIndex: 'Add frame index within the frame tree',\n    /**\n     *@description The title of a button that removes a frame index field from the form.\n     */\n    removeFrameIndex: 'Remove frame index',\n    /**\n     *@description The title of a button that adds a field to input a part of a selector in the editor form.\n     */\n    addSelectorPart: 'Add a selector part',\n    /**\n     *@description The title of a button that removes a field to input a part of a selector in the editor form.\n     */\n    removeSelectorPart: 'Remove a selector part',\n    /**\n     *@description The title of a button that adds a field to input a selector in the editor form.\n     */\n    addSelector: 'Add a selector',\n    /**\n     *@description The title of a button that removes a field to input a selector in the editor form.\n     */\n    removeSelector: 'Remove a selector',\n    /**\n     *@description The error message display when a user enters a type in the input not associates with any existing types.\n     */\n    unknownActionType: 'Unknown action type.',\n};\nconst str_ = i18n.i18n.registerUIStrings('panels/recorder/components/StepEditor.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\nexport class StepEditedEvent extends Event {\n    static eventName = 'stepedited';\n    data;\n    constructor(step) {\n        super(StepEditedEvent.eventName, { bubbles: true, composed: true });\n        this.data = step;\n    }\n}\n// Makes use of the fact that JSON values get their undefined values cleaned\n// after stringification.\nconst cleanUndefineds = (value) => {\n    return JSON.parse(JSON.stringify(value));\n};\nexport class EditorState {\n    static #puppeteer = new Util.SharedObject.SharedObject(() => Models.RecordingPlayer.RecordingPlayer.connectPuppeteer(), ({ browser }) => Models.RecordingPlayer.RecordingPlayer.disconnectPuppeteer(browser));\n    static async default(type) {\n        const state = { type };\n        const attributes = attributesByType[state.type];\n        let promise = Promise.resolve();\n        for (const attribute of attributes.required) {\n            promise = Promise.all([\n                promise,\n                (async () => Object.assign(state, {\n                    [attribute]: await this.defaultByAttribute(state, attribute),\n                }))(),\n            ]);\n        }\n        await promise;\n        return Object.freeze(state);\n    }\n    static async defaultByAttribute(_state, attribute) {\n        return this.#puppeteer.run(puppeteer => {\n            switch (attribute) {\n                case 'assertedEvents': {\n                    return immutableDeepAssign(defaultValuesByAttribute.assertedEvents, new ArrayAssignments({\n                        0: {\n                            url: puppeteer.page.url() || defaultValuesByAttribute.assertedEvents[0].url,\n                        },\n                    }));\n                }\n                case 'url': {\n                    return puppeteer.page.url() || defaultValuesByAttribute.url;\n                }\n                case 'height': {\n                    return (puppeteer.page.evaluate(() => visualViewport.height) ||\n                        defaultValuesByAttribute.height);\n                }\n                case 'width': {\n                    return (puppeteer.page.evaluate(() => visualViewport.width) ||\n                        defaultValuesByAttribute.width);\n                }\n                default: {\n                    return defaultValuesByAttribute[attribute];\n                }\n            }\n        });\n    }\n    static fromStep(step) {\n        const state = structuredClone(step);\n        for (const key of ['parameters', 'properties']) {\n            if (key in step && step[key] !== undefined) {\n                // @ts-ignore Potential infinite type instantiation.\n                state[key] = JSON.stringify(step[key]);\n            }\n        }\n        if ('attributes' in step && step.attributes) {\n            state.attributes = [];\n            for (const [name, value] of Object.entries(step.attributes)) {\n                state.attributes.push({ name, value });\n            }\n        }\n        if ('selectors' in step) {\n            state.selectors = step.selectors.map(selector => {\n                if (typeof selector === 'string') {\n                    return [selector];\n                }\n                return [...selector];\n            });\n        }\n        return deepFreeze(state);\n    }\n    static toStep(state) {\n        const step = structuredClone(state);\n        for (const key of ['parameters', 'properties']) {\n            const value = state[key];\n            if (value) {\n                Object.assign(step, { [key]: JSON.parse(value) });\n            }\n        }\n        if (state.attributes) {\n            if (state.attributes.length !== 0) {\n                const attributes = {};\n                for (const { name, value } of state.attributes) {\n                    Object.assign(attributes, { [name]: value });\n                }\n                Object.assign(step, { attributes });\n            }\n            else if ('attributes' in step) {\n                delete step.attributes;\n            }\n        }\n        if (state.selectors) {\n            const selectors = state.selectors.filter(selector => selector.length > 0).map(selector => {\n                if (selector.length === 1) {\n                    return selector[0];\n                }\n                return [...selector];\n            });\n            if (selectors.length !== 0) {\n                Object.assign(step, { selectors });\n            }\n            else if ('selectors' in step) {\n                // @ts-expect-error We want to trigger an error in the parsing phase.\n                delete step.selectors;\n            }\n        }\n        if (state.frame && state.frame.length === 0 && 'frame' in step) {\n            delete step.frame;\n        }\n        return cleanUndefineds(Models.SchemaUtils.parseStep(step));\n    }\n}\n/**\n * @fires RequestSelectorAttributeEvent#requestselectorattribute\n * @fires SelectorPickedEvent#selectorpicked\n */\nlet RecorderSelectorPickerButton = class RecorderSelectorPickerButton extends LitElement {\n    static styles = [stepEditorStyles];\n    #picker = new Controllers.SelectorPicker.SelectorPicker(this);\n    constructor() {\n        super();\n        this.disabled = false;\n    }\n    #handleClickEvent = (event) => {\n        event.preventDefault();\n        event.stopPropagation();\n        void this.#picker.toggle();\n    };\n    disconnectedCallback() {\n        super.disconnectedCallback();\n        void this.#picker.stop();\n    }\n    render() {\n        if (this.disabled) {\n            return;\n        }\n        return html `<devtools-button\n      @click=${this.#handleClickEvent}\n      .title=${i18nString(UIStrings.selectorPicker)}\n      class=\"selector-picker\"\n      .size=${\"SMALL\" /* Buttons.Button.Size.SMALL */}\n      .iconName=${'select-element'}\n      .active=${this.#picker.active}\n      .variant=${\"icon\" /* Buttons.Button.Variant.ICON */}\n      jslog=${VisualLogging.toggle('selector-picker').track({\n            click: true,\n        })}\n    ></devtools-button>`;\n    }\n};\n__decorate([\n    property({ type: Boolean })\n], RecorderSelectorPickerButton.prototype, \"disabled\", void 0);\nRecorderSelectorPickerButton = __decorate([\n    customElement('devtools-recorder-selector-picker-button')\n], RecorderSelectorPickerButton);\n/**\n * @fires RequestSelectorAttributeEvent#requestselectorattribute\n * @fires StepEditedEvent#stepedited\n */\nlet StepEditor = class StepEditor extends LitElement {\n    static styles = [stepEditorStyles];\n    #renderedAttributes = new Set();\n    constructor() {\n        super();\n        this.state = { type: Models.Schema.StepType.WaitForElement };\n        this.isTypeEditable = true;\n        this.disabled = false;\n    }\n    createRenderRoot() {\n        const root = super.createRenderRoot();\n        root.addEventListener('keydown', this.#handleKeyDownEvent);\n        return root;\n    }\n    set step(step) {\n        this.state = deepFreeze(EditorState.fromStep(step));\n        this.error = undefined;\n    }\n    #commit(updatedState) {\n        try {\n            this.dispatchEvent(new StepEditedEvent(EditorState.toStep(updatedState)));\n            // Note we don't need to update this variable since it will come from up\n            // the tree, but processing up the tree is asynchronous implying we cannot\n            // reliably know when the state will come back down. Since we need to\n            // focus the DOM elements that may be created as a result of this new\n            // state, we set it here for waiting on the updateComplete promise later.\n            this.state = updatedState;\n        }\n        catch (error) {\n            this.error = error.message;\n        }\n    }\n    #handleSelectorPickedEvent = (event) => {\n        event.preventDefault();\n        event.stopPropagation();\n        this.#commit(immutableDeepAssign(this.state, {\n            target: event.data.target,\n            frame: event.data.frame,\n            selectors: event.data.selectors.map(selector => typeof selector === 'string' ? [selector] : selector),\n            offsetX: event.data.offsetX,\n            offsetY: event.data.offsetY,\n        }));\n    };\n    #handleAddOrRemoveClick = (assignments, query, metric) => event => {\n        event.preventDefault();\n        event.stopPropagation();\n        this.#commit(immutableDeepAssign(this.state, assignments));\n        this.#ensureFocus(query);\n        if (metric) {\n            Host.userMetrics.recordingEdited(metric);\n        }\n    };\n    #handleKeyDownEvent = (event) => {\n        assert(event instanceof KeyboardEvent);\n        if (event.target instanceof SuggestionInput.SuggestionInput.SuggestionInput && event.key === 'Enter') {\n            event.preventDefault();\n            event.stopPropagation();\n            const elements = this.renderRoot.querySelectorAll('devtools-suggestion-input');\n            const element = [...elements].findIndex(value => value === event.target);\n            if (element >= 0 && element + 1 < elements.length) {\n                elements[element + 1].focus();\n            }\n            else {\n                event.target.blur();\n            }\n        }\n    };\n    #handleInputBlur = (opts) => event => {\n        assert(event.target instanceof SuggestionInput.SuggestionInput.SuggestionInput);\n        if (event.target.disabled) {\n            return;\n        }\n        const dataType = dataTypeByAttribute[opts.attribute];\n        const value = typeConverters[dataType](event.target.value);\n        const assignments = opts.from.bind(this)(value);\n        if (!assignments) {\n            return;\n        }\n        this.#commit(immutableDeepAssign(this.state, assignments));\n        if (opts.metric) {\n            Host.userMetrics.recordingEdited(opts.metric);\n        }\n    };\n    #handleTypeInputBlur = async (event) => {\n        assert(event.target instanceof SuggestionInput.SuggestionInput.SuggestionInput);\n        if (event.target.disabled) {\n            return;\n        }\n        const value = event.target.value;\n        if (value === this.state.type) {\n            return;\n        }\n        if (!Object.values(Models.Schema.StepType).includes(value)) {\n            this.error = i18nString(UIStrings.unknownActionType);\n            return;\n        }\n        this.#commit(await EditorState.default(value));\n        Host.userMetrics.recordingEdited(9 /* Host.UserMetrics.RecordingEdited.TYPE_CHANGED */);\n    };\n    #handleAddRowClickEvent = async (event) => {\n        event.preventDefault();\n        event.stopPropagation();\n        const attribute = event.target.dataset.attribute;\n        this.#commit(immutableDeepAssign(this.state, {\n            [attribute]: await EditorState.defaultByAttribute(this.state, attribute),\n        }));\n        this.#ensureFocus(`[data-attribute=${attribute}].attribute devtools-suggestion-input`);\n    };\n    #renderInlineButton(opts) {\n        if (this.disabled) {\n            return;\n        }\n        return html `\n      <devtools-button\n        title=${opts.title}\n        .size=${\"SMALL\" /* Buttons.Button.Size.SMALL */}\n        .iconName=${opts.iconName}\n        .variant=${\"icon\" /* Buttons.Button.Variant.ICON */}\n        jslog=${VisualLogging.action(opts.class).track({\n            click: true,\n        })}\n        class=\"inline-button ${opts.class}\"\n        @click=${opts.onClick}\n      ></devtools-button>\n    `;\n    }\n    #renderDeleteButton(attribute) {\n        if (this.disabled) {\n            return;\n        }\n        const attributes = attributesByType[this.state.type];\n        const optional = [...attributes.optional].includes(attribute);\n        if (!optional || this.disabled) {\n            return;\n        }\n        // clang-format off\n        return html `<devtools-button\n      .size=${\"SMALL\" /* Buttons.Button.Size.SMALL */}\n      .iconName=${'bin'}\n      .variant=${\"icon\" /* Buttons.Button.Variant.ICON */}\n      .title=${i18nString(UIStrings.deleteRow)}\n      class=\"inline-button delete-row\"\n      data-attribute=${attribute}\n      jslog=${VisualLogging.action('delete').track({ click: true })}\n      @click=${(event) => {\n            event.preventDefault();\n            event.stopPropagation();\n            this.#commit(immutableDeepAssign(this.state, { [attribute]: undefined }));\n        }}\n    ></devtools-button>`;\n        // clang-format on\n    }\n    #renderTypeRow(editable) {\n        this.#renderedAttributes.add('type');\n        // clang-format off\n        return html `<div class=\"row attribute\" data-attribute=\"type\" jslog=${VisualLogging.treeItem('type')}>\n      <div>type<span class=\"separator\">:</span></div>\n      <devtools-suggestion-input\n        .disabled=${!editable || this.disabled}\n        .options=${Object.values(Models.Schema.StepType)}\n        .placeholder=${defaultValuesByAttribute.type}\n        .value=${live(this.state.type)}\n        @blur=${this.#handleTypeInputBlur}\n      ></devtools-suggestion-input>\n    </div>`;\n        // clang-format on\n    }\n    #renderRow(attribute) {\n        this.#renderedAttributes.add(attribute);\n        const attributeValue = this.state[attribute]?.toString();\n        if (attributeValue === undefined) {\n            return;\n        }\n        // clang-format off\n        return html `<div class=\"row attribute\" data-attribute=${attribute} jslog=${VisualLogging.treeItem(Platform.StringUtilities.toKebabCase(attribute))}>\n      <div>${attribute}<span class=\"separator\">:</span></div>\n      <devtools-suggestion-input\n        .disabled=${this.disabled}\n        .placeholder=${defaultValuesByAttribute[attribute].toString()}\n        .value=${live(attributeValue)}\n        .mimeType=${(() => {\n            switch (attribute) {\n                case 'expression':\n                    return 'text/javascript';\n                case 'properties':\n                    return 'application/json';\n                default:\n                    return '';\n            }\n        })()}\n        @blur=${this.#handleInputBlur({\n            attribute,\n            from(value) {\n                if (this.state[attribute] === undefined) {\n                    return;\n                }\n                switch (attribute) {\n                    case 'properties':\n                        Host.userMetrics.recordingAssertion(2 /* Host.UserMetrics.RecordingAssertion.PROPERTY_ASSERTION_EDITED */);\n                        break;\n                }\n                return { [attribute]: value };\n            },\n            metric: 10 /* Host.UserMetrics.RecordingEdited.OTHER_EDITING */,\n        })}\n      ></devtools-suggestion-input>\n      ${this.#renderDeleteButton(attribute)}\n    </div>`;\n        // clang-format on\n    }\n    #renderFrameRow() {\n        this.#renderedAttributes.add('frame');\n        if (this.state.frame === undefined) {\n            return;\n        }\n        // clang-format off\n        return html `\n      <div class=\"attribute\" data-attribute=\"frame\" jslog=${VisualLogging.treeItem('frame')}>\n        <div class=\"row\">\n          <div>frame<span class=\"separator\">:</span></div>\n          ${this.#renderDeleteButton('frame')}\n        </div>\n        ${this.state.frame.map((frame, index, frames) => {\n            return html `\n            <div class=\"padded row\">\n              <devtools-suggestion-input\n                .disabled=${this.disabled}\n                .placeholder=${defaultValuesByAttribute.frame[0].toString()}\n                .value=${live(frame.toString())}\n                data-path=${`frame.${index}`}\n                @blur=${this.#handleInputBlur({\n                attribute: 'frame',\n                from(value) {\n                    if (this.state.frame?.[index] === undefined) {\n                        return;\n                    }\n                    return {\n                        frame: new ArrayAssignments({ [index]: value }),\n                    };\n                },\n                metric: 10 /* Host.UserMetrics.RecordingEdited.OTHER_EDITING */,\n            })}\n              ></devtools-suggestion-input>\n              ${this.#renderInlineButton({\n                class: 'add-frame',\n                title: i18nString(UIStrings.addFrameIndex),\n                iconName: 'plus',\n                onClick: this.#handleAddOrRemoveClick({\n                    frame: new ArrayAssignments({\n                        [index + 1]: new InsertAssignment(defaultValuesByAttribute.frame[0]),\n                    }),\n                }, `devtools-suggestion-input[data-path=\"frame.${index + 1}\"]`, 10 /* Host.UserMetrics.RecordingEdited.OTHER_EDITING */),\n            })}\n              ${this.#renderInlineButton({\n                class: 'remove-frame',\n                title: i18nString(UIStrings.removeFrameIndex),\n                iconName: 'minus',\n                onClick: this.#handleAddOrRemoveClick({\n                    frame: new ArrayAssignments({ [index]: undefined }),\n                }, `devtools-suggestion-input[data-path=\"frame.${Math.min(index, frames.length - 2)}\"]`, 10 /* Host.UserMetrics.RecordingEdited.OTHER_EDITING */),\n            })}\n            </div>\n          `;\n        })}\n      </div>\n    `;\n        // clang-format on\n    }\n    #renderSelectorsRow() {\n        this.#renderedAttributes.add('selectors');\n        if (this.state.selectors === undefined) {\n            return;\n        }\n        // clang-format off\n        return html `<div class=\"attribute\" data-attribute=\"selectors\" jslog=${VisualLogging.treeItem('selectors')}>\n      <div class=\"row\">\n        <div>selectors<span class=\"separator\">:</span></div>\n        <devtools-recorder-selector-picker-button\n          @selectorpicked=${this.#handleSelectorPickedEvent}\n          .disabled=${this.disabled}\n        ></devtools-recorder-selector-picker-button>\n        ${this.#renderDeleteButton('selectors')}\n      </div>\n      ${this.state.selectors.map((selector, index, selectors) => {\n            return html `<div class=\"padded row\" data-selector-path=${index}>\n            <div>selector #${index + 1}<span class=\"separator\">:</span></div>\n            ${this.#renderInlineButton({\n                class: 'add-selector',\n                title: i18nString(UIStrings.addSelector),\n                iconName: 'plus',\n                onClick: this.#handleAddOrRemoveClick({\n                    selectors: new ArrayAssignments({\n                        [index + 1]: new InsertAssignment(structuredClone(defaultValuesByAttribute.selectors[0])),\n                    }),\n                }, `devtools-suggestion-input[data-path=\"selectors.${index + 1}.0\"]`, 4 /* Host.UserMetrics.RecordingEdited.SELECTOR_ADDED */),\n            })}\n            ${this.#renderInlineButton({\n                class: 'remove-selector',\n                title: i18nString(UIStrings.removeSelector),\n                iconName: 'minus',\n                onClick: this.#handleAddOrRemoveClick({ selectors: new ArrayAssignments({ [index]: undefined }) }, `devtools-suggestion-input[data-path=\"selectors.${Math.min(index, selectors.length - 2)}.0\"]`, 5 /* Host.UserMetrics.RecordingEdited.SELECTOR_REMOVED */),\n            })}\n          </div>\n          ${selector.map((part, partIndex, parts) => {\n                return html `<div\n              class=\"double padded row\"\n              data-selector-path=\"${index}.${partIndex}\"\n            >\n              <devtools-suggestion-input\n                .disabled=${this.disabled}\n                .placeholder=${defaultValuesByAttribute.selectors[0][0]}\n                .value=${live(part)}\n                data-path=${`selectors.${index}.${partIndex}`}\n                @blur=${this.#handleInputBlur({\n                    attribute: 'selectors',\n                    from(value) {\n                        if (this.state.selectors?.[index]?.[partIndex] === undefined) {\n                            return;\n                        }\n                        return {\n                            selectors: new ArrayAssignments({\n                                [index]: new ArrayAssignments({\n                                    [partIndex]: value,\n                                }),\n                            }),\n                        };\n                    },\n                    metric: 7 /* Host.UserMetrics.RecordingEdited.SELECTOR_PART_EDITED */,\n                })}\n              ></devtools-suggestion-input>\n              ${this.#renderInlineButton({\n                    class: 'add-selector-part',\n                    title: i18nString(UIStrings.addSelectorPart),\n                    iconName: 'plus',\n                    onClick: this.#handleAddOrRemoveClick({\n                        selectors: new ArrayAssignments({\n                            [index]: new ArrayAssignments({\n                                [partIndex + 1]: new InsertAssignment(defaultValuesByAttribute.selectors[0][0]),\n                            }),\n                        }),\n                    }, `devtools-suggestion-input[data-path=\"selectors.${index}.${partIndex + 1}\"]`, 6 /* Host.UserMetrics.RecordingEdited.SELECTOR_PART_ADDED */),\n                })}\n              ${this.#renderInlineButton({\n                    class: 'remove-selector-part',\n                    title: i18nString(UIStrings.removeSelectorPart),\n                    iconName: 'minus',\n                    onClick: this.#handleAddOrRemoveClick({\n                        selectors: new ArrayAssignments({\n                            [index]: new ArrayAssignments({\n                                [partIndex]: undefined,\n                            }),\n                        }),\n                    }, `devtools-suggestion-input[data-path=\"selectors.${index}.${Math.min(partIndex, parts.length - 2)}\"]`, 8 /* Host.UserMetrics.RecordingEdited.SELECTOR_PART_REMOVED */),\n                })}\n            </div>`;\n            })}`;\n        })}\n    </div>`;\n        // clang-format on\n    }\n    #renderAssertedEvents() {\n        this.#renderedAttributes.add('assertedEvents');\n        if (this.state.assertedEvents === undefined) {\n            return;\n        }\n        // clang-format off\n        return html `<div class=\"attribute\" data-attribute=\"assertedEvents\" jslog=${VisualLogging.treeItem('asserted-events')}>\n      <div class=\"row\">\n        <div>asserted events<span class=\"separator\">:</span></div>\n        ${this.#renderDeleteButton('assertedEvents')}\n      </div>\n      ${this.state.assertedEvents.map((event, index) => {\n            return html ` <div class=\"padded row\" jslog=${VisualLogging.treeItem('event-type')}>\n            <div>type<span class=\"separator\">:</span></div>\n            <div>${event.type}</div>\n          </div>\n          <div class=\"padded row\" jslog=${VisualLogging.treeItem('event-title')}>\n            <div>title<span class=\"separator\">:</span></div>\n            <devtools-suggestion-input\n              .disabled=${this.disabled}\n              .placeholder=${defaultValuesByAttribute.assertedEvents[0].title}\n              .value=${live(event.title ?? '')}\n              @blur=${this.#handleInputBlur({\n                attribute: 'assertedEvents',\n                from(value) {\n                    if (this.state.assertedEvents?.[index]?.title === undefined) {\n                        return;\n                    }\n                    return {\n                        assertedEvents: new ArrayAssignments({\n                            [index]: { title: value },\n                        }),\n                    };\n                },\n                metric: 10 /* Host.UserMetrics.RecordingEdited.OTHER_EDITING */,\n            })}\n            ></devtools-suggestion-input>\n          </div>\n          <div class=\"padded row\" jslog=${VisualLogging.treeItem('event-url')}>\n            <div>url<span class=\"separator\">:</span></div>\n            <devtools-suggestion-input\n              .disabled=${this.disabled}\n              .placeholder=${defaultValuesByAttribute.assertedEvents[0].url}\n              .value=${live(event.url ?? '')}\n              @blur=${this.#handleInputBlur({\n                attribute: 'url',\n                from(value) {\n                    if (this.state.assertedEvents?.[index]?.url === undefined) {\n                        return;\n                    }\n                    return {\n                        assertedEvents: new ArrayAssignments({\n                            [index]: { url: value },\n                        }),\n                    };\n                },\n                metric: 10 /* Host.UserMetrics.RecordingEdited.OTHER_EDITING */,\n            })}\n            ></devtools-suggestion-input>\n          </div>`;\n        })}\n    </div> `;\n        // clang-format on\n    }\n    #renderAttributesRow() {\n        this.#renderedAttributes.add('attributes');\n        if (this.state.attributes === undefined) {\n            return;\n        }\n        // clang-format off\n        return html `<div class=\"attribute\" data-attribute=\"attributes\" jslog=${VisualLogging.treeItem('attributes')}>\n      <div class=\"row\">\n        <div>attributes<span class=\"separator\">:</span></div>\n        ${this.#renderDeleteButton('attributes')}\n      </div>\n      ${this.state.attributes.map(({ name, value }, index, attributes) => {\n            return html `<div class=\"padded row\" jslog=${VisualLogging.treeItem('attribute')}>\n          <devtools-suggestion-input\n            .disabled=${this.disabled}\n            .placeholder=${defaultValuesByAttribute.attributes[0].name}\n            .value=${live(name)}\n            data-path=${`attributes.${index}.name`}\n            jslog=${VisualLogging.key().track({ change: true })}\n            @blur=${this.#handleInputBlur({\n                attribute: 'attributes',\n                from(name) {\n                    if (this.state.attributes?.[index]?.name === undefined) {\n                        return;\n                    }\n                    Host.userMetrics.recordingAssertion(3 /* Host.UserMetrics.RecordingAssertion.ATTRIBUTE_ASSERTION_EDITED */);\n                    return {\n                        attributes: new ArrayAssignments({ [index]: { name } }),\n                    };\n                },\n                metric: 10 /* Host.UserMetrics.RecordingEdited.OTHER_EDITING */,\n            })}\n          ></devtools-suggestion-input>\n          <span class=\"separator\">:</span>\n          <devtools-suggestion-input\n            .disabled=${this.disabled}\n            .placeholder=${defaultValuesByAttribute.attributes[0].value}\n            .value=${live(value)}\n            data-path=${`attributes.${index}.value`}\n            @blur=${this.#handleInputBlur({\n                attribute: 'attributes',\n                from(value) {\n                    if (this.state.attributes?.[index]?.value === undefined) {\n                        return;\n                    }\n                    Host.userMetrics.recordingAssertion(3 /* Host.UserMetrics.RecordingAssertion.ATTRIBUTE_ASSERTION_EDITED */);\n                    return {\n                        attributes: new ArrayAssignments({ [index]: { value } }),\n                    };\n                },\n                metric: 10 /* Host.UserMetrics.RecordingEdited.OTHER_EDITING */,\n            })}\n          ></devtools-suggestion-input>\n          ${this.#renderInlineButton({\n                class: 'add-attribute-assertion',\n                title: i18nString(UIStrings.addSelectorPart),\n                iconName: 'plus',\n                onClick: this.#handleAddOrRemoveClick({\n                    attributes: new ArrayAssignments({\n                        [index + 1]: new InsertAssignment((() => {\n                            {\n                                const names = new Set(attributes.map(({ name }) => name));\n                                const defaultAttribute = defaultValuesByAttribute.attributes[0];\n                                let name = defaultAttribute.name;\n                                let i = 0;\n                                while (names.has(name)) {\n                                    ++i;\n                                    name = `${defaultAttribute.name}-${i}`;\n                                }\n                                return { ...defaultAttribute, name };\n                            }\n                        })()),\n                    }),\n                }, `devtools-suggestion-input[data-path=\"attributes.${index + 1}.name\"]`, 10 /* Host.UserMetrics.RecordingEdited.OTHER_EDITING */),\n            })}\n          ${this.#renderInlineButton({\n                class: 'remove-attribute-assertion',\n                title: i18nString(UIStrings.removeSelectorPart),\n                iconName: 'minus',\n                onClick: this.#handleAddOrRemoveClick({ attributes: new ArrayAssignments({ [index]: undefined }) }, `devtools-suggestion-input[data-path=\"attributes.${Math.min(index, attributes.length - 2)}.value\"]`, 10 /* Host.UserMetrics.RecordingEdited.OTHER_EDITING */),\n            })}\n        </div>`;\n        })}\n    </div>`;\n        // clang-format on\n    }\n    #renderAddRowButtons() {\n        const attributes = attributesByType[this.state.type];\n        return [...attributes.optional].filter(attr => this.state[attr] === undefined).map(attr => {\n            // clang-format off\n            return html `<devtools-button\n          .variant=${\"outlined\" /* Buttons.Button.Variant.OUTLINED */}\n          class=\"add-row\"\n          data-attribute=${attr}\n          jslog=${VisualLogging.action(`add-${Platform.StringUtilities.toKebabCase(attr)}`)}\n          @click=${this.#handleAddRowClickEvent}\n        >\n          ${i18nString(UIStrings.addAttribute, {\n                attributeName: attr,\n            })}\n        </devtools-button>`;\n            // clang-format on\n        });\n    }\n    #ensureFocus = (query) => {\n        void this.updateComplete.then(() => {\n            const node = this.renderRoot.querySelector(query);\n            node?.focus();\n        });\n    };\n    render() {\n        this.#renderedAttributes = new Set();\n        // clang-format off\n        const result = html `\n      <div class=\"wrapper\" jslog=${VisualLogging.tree('step-editor')}>\n        ${this.#renderTypeRow(this.isTypeEditable)} ${this.#renderRow('target')}\n        ${this.#renderFrameRow()} ${this.#renderSelectorsRow()}\n        ${this.#renderRow('deviceType')} ${this.#renderRow('button')}\n        ${this.#renderRow('url')} ${this.#renderRow('x')}\n        ${this.#renderRow('y')} ${this.#renderRow('offsetX')}\n        ${this.#renderRow('offsetY')} ${this.#renderRow('value')}\n        ${this.#renderRow('key')} ${this.#renderRow('operator')}\n        ${this.#renderRow('count')} ${this.#renderRow('expression')}\n        ${this.#renderRow('duration')} ${this.#renderAssertedEvents()}\n        ${this.#renderRow('timeout')} ${this.#renderRow('width')}\n        ${this.#renderRow('height')} ${this.#renderRow('deviceScaleFactor')}\n        ${this.#renderRow('isMobile')} ${this.#renderRow('hasTouch')}\n        ${this.#renderRow('isLandscape')} ${this.#renderRow('download')}\n        ${this.#renderRow('upload')} ${this.#renderRow('latency')}\n        ${this.#renderRow('name')} ${this.#renderRow('parameters')}\n        ${this.#renderRow('visible')} ${this.#renderRow('properties')}\n        ${this.#renderAttributesRow()}\n        ${this.error\n            ? html `\n              <div class=\"error\">\n                ${i18nString(UIStrings.notSaved, {\n                error: this.error,\n            })}\n              </div>\n            `\n            : undefined}\n        ${!this.disabled\n            ? html `<div\n              class=\"row-buttons wrapped gap row regular-font no-margin\"\n            >\n              ${this.#renderAddRowButtons()}\n            </div>`\n            : undefined}\n      </div>\n    `;\n        // clang-format on\n        for (const key of Object.keys(dataTypeByAttribute)) {\n            if (!this.#renderedAttributes.has(key)) {\n                throw new Error(`The editable attribute ${key} does not have UI`);\n            }\n        }\n        return result;\n    }\n};\n__decorate([\n    state()\n], StepEditor.prototype, \"state\", void 0);\n__decorate([\n    state()\n], StepEditor.prototype, \"error\", void 0);\n__decorate([\n    property({ type: Boolean })\n], StepEditor.prototype, \"isTypeEditable\", void 0);\n__decorate([\n    property({ type: Boolean })\n], StepEditor.prototype, \"disabled\", void 0);\nStepEditor = __decorate([\n    customElement('devtools-recorder-step-editor')\n], StepEditor);\nexport { StepEditor };\n//# sourceMappingURL=StepEditor.js.map","// Copyright 2024 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n// IMPORTANT: this file is auto generated. Please do not edit this file.\n/* istanbul ignore file */\nconst styles = new CSSStyleSheet();\nstyles.replaceSync(\n`/*\n * Copyright 2023 The Chromium Authors. All rights reserved.\n * Use of this source code is governed by a BSD-style license that can be\n * found in the LICENSE file.\n */\n\n* {\n  margin: 0;\n  padding: 0;\n  box-sizing: border-box;\n  font-size: inherit;\n}\n\n.timeline-section {\n  position: relative;\n  padding: 16px 0 16px 40px;\n  margin-left: 8px;\n\n  --override-color-recording-successful-text: #36a854;\n  --override-color-recording-successful-background: #e6f4ea;\n}\n\n.overlay {\n  position: absolute;\n  width: 100vw;\n  height: 100%;\n  /* Offset of 32px for spacing and 80px for screenshot */\n  left: calc(-32px - 80px);\n  top: 0;\n  z-index: -1;\n  pointer-events: none;\n}\n\n/* stylelint-disable-next-line at-rule-no-unknown */\n@container (max-width: 400px) {\n  .overlay {\n    /* Offset of 32px for spacing */\n    left: -32px;\n  }\n}\n\n:hover .overlay {\n  background: var(--sys-color-state-hover-on-subtle);\n}\n\n.is-selected .overlay {\n  background: var(--sys-color-tonal-container);\n}\n\n:host-context(.is-stopped) .overlay {\n  background: var(--sys-color-state-ripple-primary);\n  outline: 1px solid var(--sys-color-state-focus-ring);\n  z-index: 4;\n}\n\n.is-start-of-group {\n  padding-top: 28px;\n}\n\n.is-end-of-group {\n  padding-bottom: 24px;\n}\n\n.icon {\n  position: absolute;\n  left: 4px;\n  transform: translateX(-50%);\n  z-index: 2;\n}\n\n.bar {\n  position: absolute;\n  left: 4px;\n  display: block;\n  transform: translateX(-50%);\n  top: 18px;\n  height: calc(100% + 8px);\n  z-index: 1; /* We want this to be below of \\\\'.overlay\\\\' for stopped case */\n}\n\n.bar .background {\n  fill: var(--sys-color-state-hover-on-subtle);\n}\n\n.bar .line {\n  fill: var(--sys-color-primary);\n}\n\n.is-first-section .bar {\n  top: 32px;\n  height: calc(100% - 8px);\n  display: none;\n}\n\n.is-first-section:not(.is-last-section) .bar {\n  display: block;\n}\n\n.is-last-section .bar .line {\n  display: none;\n}\n\n.is-last-section .bar .background {\n  display: none;\n}\n\n:host-context(.is-error) .bar .line {\n  fill: var(--sys-color-error);\n}\n\n:host-context(.is-error) .bar .background {\n  fill: var(--sys-color-error-container);\n}\n\n:host-context(.was-successful) .bar .background {\n  animation: flash-background 2s;\n}\n\n:host-context(.was-successful) .bar .line {\n  animation: flash-line 2s;\n}\n\n@keyframes flash-background {\n  25% {\n    fill: var(--override-color-recording-successful-background);\n  }\n\n  75% {\n    fill: var(--override-color-recording-successful-background);\n  }\n}\n\n@keyframes flash-line {\n  25% {\n    fill: var(--override-color-recording-successful-text);\n  }\n\n  75% {\n    fill: var(--override-color-recording-successful-text);\n  }\n}\n\n/*# sourceURL=timelineSection.css */\n`);\n\nexport default styles;\n","// Copyright 2023 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\nimport * as LitHtml from '../../../ui/lit-html/lit-html.js';\nimport timelineSectionStyles from './timelineSection.css.js';\nconst { html } = LitHtml;\nexport class TimelineSection extends HTMLElement {\n    #isEndOfGroup = false;\n    #isStartOfGroup = false;\n    #isFirstSection = false;\n    #isLastSection = false;\n    #isSelected = false;\n    constructor() {\n        super();\n        const shadowRoot = this.attachShadow({ mode: 'open' });\n        shadowRoot.adoptedStyleSheets = [timelineSectionStyles];\n    }\n    set data(data) {\n        this.#isFirstSection = data.isFirstSection;\n        this.#isLastSection = data.isLastSection;\n        this.#isEndOfGroup = data.isEndOfGroup;\n        this.#isStartOfGroup = data.isStartOfGroup;\n        this.#isSelected = data.isSelected;\n        this.#render();\n    }\n    connectedCallback() {\n        this.#render();\n    }\n    #render() {\n        const classes = {\n            'timeline-section': true,\n            'is-end-of-group': this.#isEndOfGroup,\n            'is-start-of-group': this.#isStartOfGroup,\n            'is-first-section': this.#isFirstSection,\n            'is-last-section': this.#isLastSection,\n            'is-selected': this.#isSelected,\n        };\n        // clang-format off\n        LitHtml.render(html `\n      <div class=${LitHtml.Directives.classMap(classes)}>\n        <div class=\"overlay\"></div>\n        <div class=\"icon\"><slot name=\"icon\"></slot></div>\n        <svg width=\"24\" height=\"100%\" class=\"bar\">\n          <rect class=\"line\" x=\"7\" y=\"0\" width=\"2\" height=\"100%\" />\n        </svg>\n        <slot></slot>\n      </div>\n    `, this.shadowRoot, { host: this });\n        // clang-format on\n    }\n}\ncustomElements.define('devtools-timeline-section', TimelineSection);\n//# sourceMappingURL=TimelineSection.js.map","// Copyright 2024 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n// IMPORTANT: this file is auto generated. Please do not edit this file.\n/* istanbul ignore file */\nconst styles = new CSSStyleSheet();\nstyles.replaceSync(\n`/*\n * Copyright 2023 The Chromium Authors. All rights reserved.\n * Use of this source code is governed by a BSD-style license that can be\n * found in the LICENSE file.\n */\n\n* {\n  margin: 0;\n  padding: 0;\n  box-sizing: border-box;\n  font-size: inherit;\n}\n\n.title-container {\n  /* 18px for 3 dot menu icon */\n  max-width: calc(100% - 18px);\n  font-size: 13px;\n  line-height: 16px;\n  letter-spacing: 0.03em;\n  display: flex;\n  flex-direction: row;\n  gap: 3px;\n  outline-offset: 3px;\n}\n\n.action {\n  display: flex;\n  align-items: flex-start;\n}\n\n.title {\n  flex: 1;\n  min-width: 0;\n}\n\n.is-start-of-group .title {\n  font-weight: bold;\n}\n\n.error-icon {\n  display: none;\n}\n\n.breakpoint-icon {\n  visibility: hidden;\n  cursor: pointer;\n  opacity: 0%;\n  fill: var(--sys-color-primary);\n  stroke: #1a73e8; /* stylelint-disable-line plugin/use_theme_colors */\n  transform: translate(-1.92px, -3px);\n}\n\n.circle-icon {\n  fill: var(--sys-color-primary);\n  stroke: var(--sys-color-cdt-base-container);\n  stroke-width: 4px;\n  r: 5px;\n  cx: 8px;\n  cy: 8px;\n}\n\n.is-start-of-group .circle-icon {\n  r: 7px;\n  fill: var(--sys-color-cdt-base-container);\n  stroke: var(--sys-color-primary);\n  stroke-width: 2px;\n}\n\n.step.is-success .circle-icon {\n  fill: var(--sys-color-primary);\n  stroke: var(--sys-color-primary);\n}\n\n.step.is-current .circle-icon {\n  stroke-dasharray: 24 10;\n  animation: rotate 1s linear infinite;\n  fill: var(--sys-color-cdt-base-container);\n  stroke: var(--sys-color-primary);\n  stroke-width: 2px;\n}\n\n.error {\n  margin: 16px 0 0;\n  padding: 8px;\n  background: var(--sys-color-error-container);\n  color: var(--sys-color-error);\n  position: relative;\n}\n\n@keyframes rotate {\n  0% {\n    transform: translate(8px, 8px) rotate(0) translate(-8px, -8px);\n  }\n\n  100% {\n    transform: translate(8px, 8px) rotate(360deg) translate(-8px, -8px);\n  }\n}\n\n.step.is-error .circle-icon {\n  fill: var(--sys-color-error);\n  stroke: var(--sys-color-error);\n}\n\n.step.is-error .error-icon {\n  display: block;\n  transform: translate(4px, 4px);\n}\n\n:host-context(.was-successful) .circle-icon {\n  animation: flash-circle 2s;\n}\n\n:host-context(.was-successful) .breakpoint-icon {\n  animation: flash-breakpoint-icon 2s;\n}\n\n@keyframes flash-circle {\n  25% {\n    fill: var(--override-color-recording-successful-text);\n    stroke: var(--override-color-recording-successful-text);\n  }\n\n  75% {\n    fill: var(--override-color-recording-successful-text);\n    stroke: var(--override-color-recording-successful-text);\n  }\n}\n\n@keyframes flash-breakpoint-icon {\n  25% {\n    fill: var(--override-color-recording-successful-text);\n    stroke: var(--override-color-recording-successful-text);\n  }\n\n  75% {\n    fill: var(--override-color-recording-successful-text);\n    stroke: var(--override-color-recording-successful-text);\n  }\n}\n\n.chevron {\n  width: 14px;\n  height: 14px;\n  transition: 200ms;\n  position: absolute;\n  top: 18px;\n  left: 24px;\n  transform: rotate(-90deg);\n  color: var(--sys-color-on-surface);\n}\n\n.expanded .chevron {\n  transform: rotate(0deg);\n}\n\n.is-start-of-group .chevron {\n  top: 34px;\n}\n\n.details {\n  display: none;\n  margin-top: 8px;\n  position: relative;\n}\n\n.expanded .details {\n  display: block;\n}\n\n.step-details {\n  overflow: auto;\n}\n\ndevtools-recorder-step-editor {\n  border: 1px solid var(--sys-color-neutral-outline);\n  padding: 3px 6px 6px;\n  margin-left: -6px;\n  border-radius: 3px;\n}\n\ndevtools-recorder-step-editor:hover {\n  border: 1px solid var(--sys-color-neutral-outline);\n}\n\ndevtools-recorder-step-editor.is-selected {\n  background-color: color-mix(in sRGB, var(--sys-color-tonal-container), var(--sys-color-cdt-base-container) 50%);\n  border: 1px solid var(--sys-color-tonal-outline);\n}\n\n.summary {\n  display: flex;\n  flex-flow: row nowrap;\n}\n\n.filler {\n  flex-grow: 1;\n}\n\n.subtitle {\n  font-weight: normal;\n  color: var(--sys-color-on-surface-subtle);\n  word-break: break-all;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n.main-title {\n  word-break: break-all;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n.step-actions {\n  border: none;\n  border-radius: 0;\n  height: 24px;\n\n  --override-select-menu-show-button-border-radius: 0;\n  --override-select-menu-show-button-outline: none;\n  --override-select-menu-show-button-padding: 0;\n}\n\n.step.has-breakpoint .circle-icon {\n  visibility: hidden;\n}\n\n.step:not(.is-start-of-group).has-breakpoint .breakpoint-icon {\n  visibility: visible;\n  opacity: 100%;\n}\n\n.step:not(.is-start-of-group):not(.has-breakpoint) .icon:hover .circle-icon {\n  transition: opacity 0.2s;\n  opacity: 0%;\n}\n\n.step:not(.is-start-of-group):not(.has-breakpoint) .icon:hover .error-icon {\n  visibility: hidden;\n}\n\n.step:not(.is-start-of-group):not(.has-breakpoint) .icon:hover .breakpoint-icon {\n  transition: opacity 0.2s;\n  visibility: visible;\n  opacity: 50%;\n}\n\n/*# sourceURL=stepView.css */\n`);\n\nexport default styles;\n","// Copyright 2023 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n/* Some view input callbacks might be handled outside of LitHtml and we\n   bind all of them upfront. We disable the lit_html_host_this since we\n   do not define any host for LitHtml.render and the rule is not happy\n   about it. */\n/* eslint-disable rulesdir/lit_html_host_this */\nimport '../../../ui/components/icon_button/icon_button.js';\nimport './StepEditor.js';\nimport './TimelineSection.js';\nimport * as i18n from '../../../core/i18n/i18n.js';\nimport * as Platform from '../../../core/platform/platform.js';\nimport * as Buttons from '../../../ui/components/buttons/buttons.js';\nimport * as Menus from '../../../ui/components/menus/menus.js';\nimport * as UI from '../../../ui/legacy/legacy.js';\nimport * as LitHtml from '../../../ui/lit-html/lit-html.js';\nimport * as VisualLogging from '../../../ui/visual_logging/visual_logging.js';\nimport * as Models from '../models/models.js';\nimport stepViewStyles from './stepView.css.js';\nconst { html } = LitHtml;\nconst UIStrings = {\n    /**\n     *@description Title for the step type that configures the viewport\n     */\n    setViewportClickTitle: 'Set viewport',\n    /**\n     *@description Title for the customStep step type\n     */\n    customStepTitle: 'Custom step',\n    /**\n     *@description Title for the click step type\n     */\n    clickStepTitle: 'Click',\n    /**\n     *@description Title for the double click step type\n     */\n    doubleClickStepTitle: 'Double click',\n    /**\n     *@description Title for the hover step type\n     */\n    hoverStepTitle: 'Hover',\n    /**\n     *@description Title for the emulateNetworkConditions step type\n     */\n    emulateNetworkConditionsStepTitle: 'Emulate network conditions',\n    /**\n     *@description Title for the change step type\n     */\n    changeStepTitle: 'Change',\n    /**\n     *@description Title for the close step type\n     */\n    closeStepTitle: 'Close',\n    /**\n     *@description Title for the scroll step type\n     */\n    scrollStepTitle: 'Scroll',\n    /**\n     *@description Title for the key up step type. `up` refers to the state of the keyboard key: it's released, i.e., up. It does not refer to the down arrow key specifically.\n     */\n    keyUpStepTitle: 'Key up',\n    /**\n     *@description Title for the navigate step type\n     */\n    navigateStepTitle: 'Navigate',\n    /**\n     *@description Title for the key down step type. `down` refers to the state of the keyboard key: it's pressed, i.e., down. It does not refer to the down arrow key specifically.\n     */\n    keyDownStepTitle: 'Key down',\n    /**\n     *@description Title for the waitForElement step type\n     */\n    waitForElementStepTitle: 'Wait for element',\n    /**\n     *@description Title for the waitForExpression step type\n     */\n    waitForExpressionStepTitle: 'Wait for expression',\n    /**\n     *@description Title for elements with role button\n     */\n    elementRoleButton: 'Button',\n    /**\n     *@description Title for elements with role input\n     */\n    elementRoleInput: 'Input',\n    /**\n     *@description Default title for elements without a specific role\n     */\n    elementRoleFallback: 'Element',\n    /**\n     *@description The title of the button in the step's context menu that adds a new step before the current one.\n     */\n    addStepBefore: 'Add step before',\n    /**\n     *@description The title of the button in the step's context menu that adds a new step after the current one.\n     */\n    addStepAfter: 'Add step after',\n    /**\n     *@description The title of the button in the step's context menu that removes the step.\n     */\n    removeStep: 'Remove step',\n    /**\n     *@description The title of the button that open the step's context menu.\n     */\n    openStepActions: 'Open step actions',\n    /**\n     *@description The title of the button in the step's context menu that adds a breakpoint.\n     */\n    addBreakpoint: 'Add breakpoint',\n    /**\n     *@description The title of the button in the step's context menu that removes a breakpoint.\n     */\n    removeBreakpoint: 'Remove breakpoint',\n    /**\n     * @description A menu item item in the context menu that expands another menu which list all\n     * the formats the user can copy the recording as.\n     */\n    copyAs: 'Copy as',\n    /**\n     * @description The title of the menu group that holds actions on recording steps.\n     */\n    stepManagement: 'Manage steps',\n    /**\n     * @description The title of the menu group that holds actions related to breakpoints.\n     */\n    breakpoints: 'Breakpoints',\n};\nconst str_ = i18n.i18n.registerUIStrings('panels/recorder/components/StepView.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\nexport class CaptureSelectorsEvent extends Event {\n    static eventName = 'captureselectors';\n    data;\n    constructor(step) {\n        super(CaptureSelectorsEvent.eventName, { bubbles: true, composed: true });\n        this.data = step;\n    }\n}\nexport class StopSelectorsCaptureEvent extends Event {\n    static eventName = 'stopselectorscapture';\n    constructor() {\n        super(StopSelectorsCaptureEvent.eventName, {\n            bubbles: true,\n            composed: true,\n        });\n    }\n}\nexport class CopyStepEvent extends Event {\n    static eventName = 'copystep';\n    step;\n    constructor(step) {\n        super(CopyStepEvent.eventName, { bubbles: true, composed: true });\n        this.step = step;\n    }\n}\nexport class StepChanged extends Event {\n    static eventName = 'stepchanged';\n    currentStep;\n    newStep;\n    constructor(currentStep, newStep) {\n        super(StepChanged.eventName, { bubbles: true, composed: true });\n        this.currentStep = currentStep;\n        this.newStep = newStep;\n    }\n}\nexport class AddStep extends Event {\n    static eventName = 'addstep';\n    position;\n    stepOrSection;\n    constructor(stepOrSection, position) {\n        super(AddStep.eventName, { bubbles: true, composed: true });\n        this.stepOrSection = stepOrSection;\n        this.position = position;\n    }\n}\nexport class RemoveStep extends Event {\n    static eventName = 'removestep';\n    step;\n    constructor(step) {\n        super(RemoveStep.eventName, { bubbles: true, composed: true });\n        this.step = step;\n    }\n}\nexport class AddBreakpointEvent extends Event {\n    static eventName = 'addbreakpoint';\n    index;\n    constructor(index) {\n        super(AddBreakpointEvent.eventName, { bubbles: true, composed: true });\n        this.index = index;\n    }\n}\nexport class RemoveBreakpointEvent extends Event {\n    static eventName = 'removebreakpoint';\n    index;\n    constructor(index) {\n        super(RemoveBreakpointEvent.eventName, { bubbles: true, composed: true });\n        this.index = index;\n    }\n}\nconst COPY_ACTION_PREFIX = 'copy-step-as-';\nfunction getStepTypeTitle(input) {\n    if (input.section) {\n        return input.section.title ? input.section.title : html `<span class=\"fallback\">(No Title)</span>`;\n    }\n    if (!input.step) {\n        throw new Error('Missing both step and section');\n    }\n    switch (input.step.type) {\n        case Models.Schema.StepType.CustomStep:\n            return i18nString(UIStrings.customStepTitle);\n        case Models.Schema.StepType.SetViewport:\n            return i18nString(UIStrings.setViewportClickTitle);\n        case Models.Schema.StepType.Click:\n            return i18nString(UIStrings.clickStepTitle);\n        case Models.Schema.StepType.DoubleClick:\n            return i18nString(UIStrings.doubleClickStepTitle);\n        case Models.Schema.StepType.Hover:\n            return i18nString(UIStrings.hoverStepTitle);\n        case Models.Schema.StepType.EmulateNetworkConditions:\n            return i18nString(UIStrings.emulateNetworkConditionsStepTitle);\n        case Models.Schema.StepType.Change:\n            return i18nString(UIStrings.changeStepTitle);\n        case Models.Schema.StepType.Close:\n            return i18nString(UIStrings.closeStepTitle);\n        case Models.Schema.StepType.Scroll:\n            return i18nString(UIStrings.scrollStepTitle);\n        case Models.Schema.StepType.KeyUp:\n            return i18nString(UIStrings.keyUpStepTitle);\n        case Models.Schema.StepType.KeyDown:\n            return i18nString(UIStrings.keyDownStepTitle);\n        case Models.Schema.StepType.WaitForElement:\n            return i18nString(UIStrings.waitForElementStepTitle);\n        case Models.Schema.StepType.WaitForExpression:\n            return i18nString(UIStrings.waitForExpressionStepTitle);\n        case Models.Schema.StepType.Navigate:\n            return i18nString(UIStrings.navigateStepTitle);\n    }\n}\nfunction getElementRoleTitle(role) {\n    switch (role) {\n        case 'button':\n            return i18nString(UIStrings.elementRoleButton);\n        case 'input':\n            return i18nString(UIStrings.elementRoleInput);\n        default:\n            return i18nString(UIStrings.elementRoleFallback);\n    }\n}\nfunction getSelectorPreview(step) {\n    if (!step || !('selectors' in step)) {\n        return '';\n    }\n    const ariaSelector = step.selectors.flat().find(selector => selector.startsWith('aria/'));\n    if (!ariaSelector) {\n        return '';\n    }\n    const m = ariaSelector.match(/^aria\\/(.+?)(\\[role=\"(.+)\"\\])?$/);\n    if (!m) {\n        return '';\n    }\n    return `${getElementRoleTitle(m[3])} \"${m[1]}\"`;\n}\nfunction getSectionPreview(section) {\n    if (!section) {\n        return '';\n    }\n    return section.url;\n}\nfunction renderStepActions(input) {\n    // clang-format off\n    return html `\n    <devtools-button\n      class=\"step-actions\"\n      title=${i18nString(UIStrings.openStepActions)}\n      aria-label=${i18nString(UIStrings.openStepActions)}\n      @click=${input.onStepContextMenu}\n      @keydown=${(event) => {\n        event.stopPropagation();\n    }}\n      jslog=${VisualLogging.dropDown('step-actions').track({ click: true })}\n      .data=${{\n        variant: \"icon\" /* Buttons.Button.Variant.ICON */,\n        iconName: 'dots-vertical',\n        title: i18nString(UIStrings.openStepActions),\n    }}\n    ></devtools-button>\n  `;\n    // clang-format on\n}\nfunction viewFunction(input, _output, target) {\n    if (!input.step && !input.section) {\n        return;\n    }\n    const stepClasses = {\n        step: true,\n        expanded: input.showDetails,\n        'is-success': input.state === \"success\" /* State.SUCCESS */,\n        'is-current': input.state === \"current\" /* State.CURRENT */,\n        'is-outstanding': input.state === \"outstanding\" /* State.OUTSTANDING */,\n        'is-error': input.state === \"error\" /* State.ERROR */,\n        'is-stopped': input.state === \"stopped\" /* State.STOPPED */,\n        'is-start-of-group': input.isStartOfGroup,\n        'is-first-section': input.isFirstSection,\n        'has-breakpoint': input.hasBreakpoint,\n    };\n    const isExpandable = Boolean(input.step);\n    const mainTitle = getStepTypeTitle({\n        step: input.step,\n        section: input.section,\n    });\n    const subtitle = input.step ? getSelectorPreview() : getSectionPreview();\n    // clang-format off\n    LitHtml.render(html `\n    <devtools-timeline-section .data=${{\n        isFirstSection: input.isFirstSection,\n        isLastSection: input.isLastSection,\n        isStartOfGroup: input.isStartOfGroup,\n        isEndOfGroup: input.isEndOfGroup,\n        isSelected: input.isSelected,\n    }} @contextmenu=${input.onStepContextMenu} data-step-index=${input.stepIndex} data-section-index=${input.sectionIndex} class=${LitHtml.Directives.classMap(stepClasses)}>\n      <svg slot=\"icon\" width=\"24\" height=\"24\" height=\"100%\" class=\"icon\">\n        <circle class=\"circle-icon\"/>\n        <g class=\"error-icon\">\n          <path d=\"M1.5 1.5L6.5 6.5\" stroke=\"white\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n          <path d=\"M1.5 6.5L6.5 1.5\" stroke=\"white\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n        </g>\n        <path @click=${input.onBreakpointClick} jslog=${VisualLogging.action('breakpoint').track({ click: true })} class=\"breakpoint-icon\" d=\"M2.5 5.5H17.7098L21.4241 12L17.7098 18.5H2.5V5.5Z\"/>\n      </svg>\n      <div class=\"summary\">\n        <div class=\"title-container ${isExpandable ? 'action' : ''}\"\n          @click=${isExpandable && input.toggleShowDetails}\n          @keydown=${isExpandable && input.onToggleShowDetailsKeydown}\n          tabindex=\"0\"\n          jslog=${VisualLogging.sectionHeader().track({ click: true })}\n          aria-role=${isExpandable ? 'button' : ''}\n          aria-label=${isExpandable ? 'Show details for step' : ''}\n        >\n          ${isExpandable\n        ? html `<devtools-icon\n                  class=\"chevron\"\n                  jslog=${VisualLogging.expand().track({ click: true })}\n                  name=\"triangle-down\">\n                </devtools-icon>`\n        : ''}\n          <div class=\"title\">\n            <div class=\"main-title\" title=${mainTitle}>${mainTitle}</div>\n            <div class=\"subtitle\" title=${subtitle}>${subtitle}</div>\n          </div>\n        </div>\n        <div class=\"filler\"></div>\n        ${renderStepActions(input)}\n      </div>\n      <div class=\"details\">\n        ${input.step &&\n        html `<devtools-recorder-step-editor\n          class=${input.isSelected ? 'is-selected' : ''}\n          .step=${input.step}\n          .disabled=${input.isPlaying}\n          @stepedited=${input.stepEdited}>\n        </devtools-recorder-step-editor>`}\n        ${input.section?.causingStep &&\n        html `<devtools-recorder-step-editor\n          .step=${input.section.causingStep}\n          .isTypeEditable=${false}\n          .disabled=${input.isPlaying}\n          @stepedited=${input.stepEdited}>\n        </devtools-recorder-step-editor>`}\n      </div>\n      ${input.error &&\n        html `\n        <div class=\"error\" role=\"alert\">\n          ${input.error.message}\n        </div>\n      `}\n    </devtools-timeline-section>\n  `, target);\n    // clang-format on\n}\nexport class StepView extends HTMLElement {\n    #shadow = this.attachShadow({ mode: 'open' });\n    #observer = new IntersectionObserver(result => {\n        this.#viewInput.isVisible = result[0].isIntersecting;\n    });\n    #viewInput = {\n        state: \"default\" /* State.DEFAULT */,\n        showDetails: false,\n        isEndOfGroup: false,\n        isStartOfGroup: false,\n        stepIndex: 0,\n        sectionIndex: 0,\n        isFirstSection: false,\n        isLastSection: false,\n        isRecording: false,\n        isPlaying: false,\n        isVisible: false,\n        hasBreakpoint: false,\n        removable: true,\n        builtInConverters: [],\n        extensionConverters: [],\n        isSelected: false,\n        recorderSettings: undefined,\n        actions: [],\n        stepEdited: this.#stepEdited.bind(this),\n        onBreakpointClick: this.#onBreakpointClick.bind(this),\n        handleStepAction: this.#handleStepAction.bind(this),\n        toggleShowDetails: this.#toggleShowDetails.bind(this),\n        onToggleShowDetailsKeydown: this.#onToggleShowDetailsKeydown.bind(this),\n        onStepContextMenu: this.#onStepContextMenu.bind(this),\n    };\n    #view = viewFunction;\n    constructor(view) {\n        super();\n        if (view) {\n            this.#view = view;\n        }\n        this.setAttribute('jslog', `${VisualLogging.section('step-view')}`);\n    }\n    set data(data) {\n        const prevState = this.#viewInput.state;\n        this.#viewInput.step = data.step;\n        this.#viewInput.section = data.section;\n        this.#viewInput.state = data.state;\n        this.#viewInput.error = data.error;\n        this.#viewInput.isEndOfGroup = data.isEndOfGroup;\n        this.#viewInput.isStartOfGroup = data.isStartOfGroup;\n        this.#viewInput.stepIndex = data.stepIndex;\n        this.#viewInput.sectionIndex = data.sectionIndex;\n        this.#viewInput.isFirstSection = data.isFirstSection;\n        this.#viewInput.isLastSection = data.isLastSection;\n        this.#viewInput.isRecording = data.isRecording;\n        this.#viewInput.isPlaying = data.isPlaying;\n        this.#viewInput.hasBreakpoint = data.hasBreakpoint;\n        this.#viewInput.removable = data.removable;\n        this.#viewInput.builtInConverters = data.builtInConverters;\n        this.#viewInput.extensionConverters = data.extensionConverters;\n        this.#viewInput.isSelected = data.isSelected;\n        this.#viewInput.recorderSettings = data.recorderSettings;\n        this.#viewInput.actions = this.#getActions();\n        this.#render();\n        if (this.#viewInput.state !== prevState && this.#viewInput.state === 'current' && !this.#viewInput.isVisible) {\n            this.scrollIntoView();\n        }\n    }\n    get step() {\n        return this.#viewInput.step;\n    }\n    get section() {\n        return this.#viewInput.section;\n    }\n    connectedCallback() {\n        this.#shadow.adoptedStyleSheets = [stepViewStyles];\n        this.#observer.observe(this);\n        this.#render();\n    }\n    disconnectedCallback() {\n        this.#observer.unobserve(this);\n    }\n    #toggleShowDetails() {\n        this.#viewInput.showDetails = !this.#viewInput.showDetails;\n        this.#render();\n    }\n    #onToggleShowDetailsKeydown(event) {\n        const keyboardEvent = event;\n        if (keyboardEvent.key === 'Enter' || keyboardEvent.key === ' ') {\n            this.#toggleShowDetails();\n            event.stopPropagation();\n            event.preventDefault();\n        }\n    }\n    #stepEdited(event) {\n        const step = this.#viewInput.step || this.#viewInput.section?.causingStep;\n        if (!step) {\n            throw new Error('Expected step.');\n        }\n        this.dispatchEvent(new StepChanged(step, event.data));\n    }\n    #handleStepAction(event) {\n        switch (event.itemValue) {\n            case 'add-step-before': {\n                const stepOrSection = this.#viewInput.step || this.#viewInput.section;\n                if (!stepOrSection) {\n                    throw new Error('Expected step or section.');\n                }\n                this.dispatchEvent(new AddStep(stepOrSection, \"before\" /* AddStepPosition.BEFORE */));\n                break;\n            }\n            case 'add-step-after': {\n                const stepOrSection = this.#viewInput.step || this.#viewInput.section;\n                if (!stepOrSection) {\n                    throw new Error('Expected step or section.');\n                }\n                this.dispatchEvent(new AddStep(stepOrSection, \"after\" /* AddStepPosition.AFTER */));\n                break;\n            }\n            case 'remove-step': {\n                const causingStep = this.#viewInput.section?.causingStep;\n                if (!this.#viewInput.step && !causingStep) {\n                    throw new Error('Expected step.');\n                }\n                this.dispatchEvent(new RemoveStep(this.#viewInput.step || causingStep));\n                break;\n            }\n            case 'add-breakpoint': {\n                if (!this.#viewInput.step) {\n                    throw new Error('Expected step');\n                }\n                this.dispatchEvent(new AddBreakpointEvent(this.#viewInput.stepIndex));\n                break;\n            }\n            case 'remove-breakpoint': {\n                if (!this.#viewInput.step) {\n                    throw new Error('Expected step');\n                }\n                this.dispatchEvent(new RemoveBreakpointEvent(this.#viewInput.stepIndex));\n                break;\n            }\n            default: {\n                const actionId = event.itemValue;\n                if (!actionId.startsWith(COPY_ACTION_PREFIX)) {\n                    throw new Error('Unknown step action.');\n                }\n                const copyStep = this.#viewInput.step || this.#viewInput.section?.causingStep;\n                if (!copyStep) {\n                    throw new Error('Step not found.');\n                }\n                const converterId = actionId.substring(COPY_ACTION_PREFIX.length);\n                if (this.#viewInput.recorderSettings) {\n                    this.#viewInput.recorderSettings.preferredCopyFormat = converterId;\n                }\n                this.dispatchEvent(new CopyStepEvent(structuredClone(copyStep)));\n            }\n        }\n    }\n    #onBreakpointClick() {\n        if (this.#viewInput.hasBreakpoint) {\n            this.dispatchEvent(new RemoveBreakpointEvent(this.#viewInput.stepIndex));\n        }\n        else {\n            this.dispatchEvent(new AddBreakpointEvent(this.#viewInput.stepIndex));\n        }\n        this.#render();\n    }\n    #getActions = () => {\n        const actions = [];\n        if (!this.#viewInput.isPlaying) {\n            if (this.#viewInput.step) {\n                actions.push({\n                    id: 'add-step-before',\n                    label: i18nString(UIStrings.addStepBefore),\n                    group: 'stepManagement',\n                    groupTitle: i18nString(UIStrings.stepManagement),\n                });\n            }\n            actions.push({\n                id: 'add-step-after',\n                label: i18nString(UIStrings.addStepAfter),\n                group: 'stepManagement',\n                groupTitle: i18nString(UIStrings.stepManagement),\n            });\n            if (this.#viewInput.removable) {\n                actions.push({\n                    id: 'remove-step',\n                    group: 'stepManagement',\n                    groupTitle: i18nString(UIStrings.stepManagement),\n                    label: i18nString(UIStrings.removeStep),\n                });\n            }\n        }\n        if (this.#viewInput.step && !this.#viewInput.isRecording) {\n            if (this.#viewInput.hasBreakpoint) {\n                actions.push({\n                    id: 'remove-breakpoint',\n                    label: i18nString(UIStrings.removeBreakpoint),\n                    group: 'breakPointManagement',\n                    groupTitle: i18nString(UIStrings.breakpoints),\n                });\n            }\n            else {\n                actions.push({\n                    id: 'add-breakpoint',\n                    label: i18nString(UIStrings.addBreakpoint),\n                    group: 'breakPointManagement',\n                    groupTitle: i18nString(UIStrings.breakpoints),\n                });\n            }\n        }\n        if (this.#viewInput.step) {\n            for (const converter of this.#viewInput.builtInConverters || []) {\n                actions.push({\n                    id: COPY_ACTION_PREFIX + Platform.StringUtilities.toKebabCase(converter.getId()),\n                    label: converter.getFormatName(),\n                    group: 'copy',\n                    groupTitle: i18nString(UIStrings.copyAs),\n                });\n            }\n            for (const converter of this.#viewInput.extensionConverters || []) {\n                actions.push({\n                    id: COPY_ACTION_PREFIX + Platform.StringUtilities.toKebabCase(converter.getId()),\n                    label: converter.getFormatName(),\n                    group: 'copy',\n                    groupTitle: i18nString(UIStrings.copyAs),\n                    jslogContext: COPY_ACTION_PREFIX + 'extension',\n                });\n            }\n        }\n        return actions;\n    };\n    #onStepContextMenu(event) {\n        const buttonElement = event.target instanceof Buttons.Button.Button ? event.target : undefined;\n        const menu = new UI.ContextMenu.ContextMenu(event, {\n            x: buttonElement?.getBoundingClientRect().left,\n            y: buttonElement?.getBoundingClientRect().bottom,\n        });\n        const actions = this.#getActions();\n        const copyActions = actions.filter(item => item.id.startsWith(COPY_ACTION_PREFIX));\n        const otherActions = actions.filter(item => !item.id.startsWith(COPY_ACTION_PREFIX));\n        for (const item of otherActions) {\n            const section = menu.section(item.group);\n            section.appendItem(item.label, () => {\n                this.#handleStepAction(new Menus.Menu.MenuItemSelectedEvent(item.id));\n            }, { jslogContext: item.id });\n        }\n        const preferredCopyAction = copyActions.find(item => item.id === COPY_ACTION_PREFIX + this.#viewInput.recorderSettings?.preferredCopyFormat);\n        if (preferredCopyAction) {\n            menu.section('copy').appendItem(preferredCopyAction.label, () => {\n                this.#handleStepAction(new Menus.Menu.MenuItemSelectedEvent(preferredCopyAction.id));\n            }, { jslogContext: preferredCopyAction.id });\n        }\n        if (copyActions.length) {\n            const copyAs = menu.section('copy').appendSubMenuItem(i18nString(UIStrings.copyAs), false, 'copy');\n            for (const item of copyActions) {\n                if (item === preferredCopyAction) {\n                    continue;\n                }\n                copyAs.section(item.group).appendItem(item.label, () => {\n                    this.#handleStepAction(new Menus.Menu.MenuItemSelectedEvent(item.id));\n                }, { jslogContext: item.id });\n            }\n        }\n        void menu.show();\n    }\n    #render() {\n        const output = {};\n        this.#view(this.#viewInput, output, this.#shadow);\n    }\n}\ncustomElements.define('devtools-step-view', StepView);\n//# sourceMappingURL=StepView.js.map","// Copyright 2023 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\nimport * as PuppeteerReplay from '../../../third_party/puppeteer-replay/puppeteer-replay.js';\nexport const EXTENSION_PREFIX = 'extension_';\nexport class ExtensionConverter {\n    #idx;\n    #extension;\n    constructor(idx, extension) {\n        this.#idx = idx;\n        this.#extension = extension;\n    }\n    getId() {\n        return EXTENSION_PREFIX + this.#idx;\n    }\n    getFormatName() {\n        return this.#extension.getName();\n    }\n    getMediaType() {\n        return this.#extension.getMediaType();\n    }\n    getFilename(flow) {\n        const fileExtension = this.#mediaTypeToExtension(this.#extension.getMediaType());\n        return `${flow.title}${fileExtension}`;\n    }\n    async stringify(flow) {\n        const text = await this.#extension.stringify(flow);\n        const sourceMap = PuppeteerReplay.parseSourceMap(text);\n        return [PuppeteerReplay.stripSourceMap(text), sourceMap];\n    }\n    async stringifyStep(step) {\n        return await this.#extension.stringifyStep(step);\n    }\n    #mediaTypeToExtension(mediaType) {\n        // See https://www.iana.org/assignments/media-types/media-types.xhtml\n        switch (mediaType) {\n            case 'application/json':\n                return '.json';\n            case 'application/javascript':\n            case 'text/javascript':\n                return '.js';\n            case 'application/typescript':\n            case 'text/typescript':\n                return '.ts';\n            default:\n                // TODO: think of exhaustive mapping once the feature gets traction.\n                return '';\n        }\n    }\n}\n//# sourceMappingURL=ExtensionConverter.js.map","// Copyright 2023 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\nimport * as PuppeteerReplay from '../../../third_party/puppeteer-replay/puppeteer-replay.js';\nimport * as Models from '../models/models.js';\nexport class JSONConverter {\n    #indent;\n    constructor(indent) {\n        this.#indent = indent;\n    }\n    getId() {\n        return \"json\" /* Models.ConverterIds.ConverterIds.JSON */;\n    }\n    getFormatName() {\n        return 'JSON';\n    }\n    getFilename(flow) {\n        return `${flow.title}.json`;\n    }\n    async stringify(flow) {\n        const text = await PuppeteerReplay.stringify(flow, {\n            extension: new PuppeteerReplay.JSONStringifyExtension(),\n            indentation: this.#indent,\n        });\n        const sourceMap = PuppeteerReplay.parseSourceMap(text);\n        return [PuppeteerReplay.stripSourceMap(text), sourceMap];\n    }\n    async stringifyStep(step) {\n        return await PuppeteerReplay.stringifyStep(step, {\n            extension: new PuppeteerReplay.JSONStringifyExtension(),\n            indentation: this.#indent,\n        });\n    }\n    getMediaType() {\n        return 'application/json';\n    }\n}\n//# sourceMappingURL=JSONConverter.js.map","// Copyright 2023 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\nimport * as PuppeteerReplay from '../../../third_party/puppeteer-replay/puppeteer-replay.js';\nimport * as Models from '../models/models.js';\nexport class LighthouseConverter {\n    #indent;\n    constructor(indent) {\n        this.#indent = indent;\n    }\n    getId() {\n        return \"lighthouse\" /* Models.ConverterIds.ConverterIds.LIGHTHOUSE */;\n    }\n    getFormatName() {\n        return 'Puppeteer (including Lighthouse analysis)';\n    }\n    getFilename(flow) {\n        return `${flow.title}.js`;\n    }\n    async stringify(flow) {\n        const text = await PuppeteerReplay.stringify(flow, {\n            extension: new PuppeteerReplay.LighthouseStringifyExtension(),\n            indentation: this.#indent,\n        });\n        const sourceMap = PuppeteerReplay.parseSourceMap(text);\n        return [PuppeteerReplay.stripSourceMap(text), sourceMap];\n    }\n    async stringifyStep(step) {\n        // LighthouseStringifyExtension maintains state between steps, it cannot create a Lighthouse flow from a single step.\n        // If we need to stringify a single step, we should return just the Puppeteer code without Lighthouse analysis.\n        return await PuppeteerReplay.stringifyStep(step, {\n            indentation: this.#indent,\n        });\n    }\n    getMediaType() {\n        return 'text/javascript';\n    }\n}\n//# sourceMappingURL=LighthouseConverter.js.map","// Copyright 2023 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\nimport * as PuppeteerReplay from '../../../third_party/puppeteer-replay/puppeteer-replay.js';\nimport * as Models from '../models/models.js';\nexport class PuppeteerConverter {\n    #indent;\n    #extension;\n    constructor(indent) {\n        this.#indent = indent;\n        this.#extension = this.createExtension();\n    }\n    getId() {\n        return \"puppeteer\" /* Models.ConverterIds.ConverterIds.PUPPETEER */;\n    }\n    createExtension() {\n        return new PuppeteerReplay.PuppeteerStringifyExtension();\n    }\n    getFormatName() {\n        return 'Puppeteer';\n    }\n    getFilename(flow) {\n        return `${flow.title}.js`;\n    }\n    async stringify(flow) {\n        const text = await PuppeteerReplay.stringify(flow, {\n            indentation: this.#indent,\n            extension: this.#extension,\n        });\n        const sourceMap = PuppeteerReplay.parseSourceMap(text);\n        return [PuppeteerReplay.stripSourceMap(text), sourceMap];\n    }\n    async stringifyStep(step) {\n        return await PuppeteerReplay.stringifyStep(step, {\n            indentation: this.#indent,\n            extension: this.#extension,\n        });\n    }\n    getMediaType() {\n        return 'text/javascript';\n    }\n}\n//# sourceMappingURL=PuppeteerConverter.js.map","// Copyright 2023 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\nimport * as PuppeteerReplay from '../../../third_party/puppeteer-replay/puppeteer-replay.js';\nimport * as Models from '../models/models.js';\nimport { PuppeteerConverter } from './PuppeteerConverter.js';\nexport class PuppeteerFirefoxConverter extends PuppeteerConverter {\n    getId() {\n        return \"puppeteer-firefox\" /* Models.ConverterIds.ConverterIds.PUPPETEER_FIREFOX */;\n    }\n    createExtension() {\n        return new PuppeteerReplay.PuppeteerStringifyExtension('firefox');\n    }\n    getFormatName() {\n        return 'Puppeteer (for Firefox)';\n    }\n}\n//# sourceMappingURL=PuppeteerFirefoxConverter.js.map","// Copyright 2023 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\nimport * as PuppeteerReplay from '../../../third_party/puppeteer-replay/puppeteer-replay.js';\nimport * as Models from '../models/models.js';\nexport class PuppeteerReplayConverter {\n    #indent;\n    constructor(indent) {\n        this.#indent = indent;\n    }\n    getId() {\n        return \"@puppeteer/replay\" /* Models.ConverterIds.ConverterIds.REPLAY */;\n    }\n    getFormatName() {\n        return '@puppeteer/replay';\n    }\n    getFilename(flow) {\n        return `${flow.title}.js`;\n    }\n    async stringify(flow) {\n        const text = await PuppeteerReplay.stringify(flow, {\n            extension: new PuppeteerReplay.PuppeteerReplayStringifyExtension(),\n            indentation: this.#indent,\n        });\n        const sourceMap = PuppeteerReplay.parseSourceMap(text);\n        return [PuppeteerReplay.stripSourceMap(text), sourceMap];\n    }\n    async stringifyStep(step) {\n        return await PuppeteerReplay.stringifyStep(step, {\n            extension: new PuppeteerReplay.PuppeteerReplayStringifyExtension(),\n        });\n    }\n    getMediaType() {\n        return 'text/javascript';\n    }\n}\n//# sourceMappingURL=PuppeteerReplayConverter.js.map","// Copyright 2024 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n// IMPORTANT: this file is auto generated. Please do not edit this file.\n/* istanbul ignore file */\nconst styles = new CSSStyleSheet();\nstyles.replaceSync(\n`/*\n * Copyright 2023 The Chromium Authors. All rights reserved.\n * Use of this source code is governed by a BSD-style license that can be\n * found in the LICENSE file.\n */\n\n* {\n  margin: 0;\n  padding: 0;\n  box-sizing: border-box;\n  font-size: inherit;\n}\n\n*:focus,\n*:focus-visible {\n  outline: none;\n}\n\n:host {\n  overflow-x: auto;\n}\n\n:host,\ndevtools-recording-view,\ndevtools-create-recording-view {\n  display: flex;\n  flex-direction: column;\n  flex: 1;\n  min-height: 0;\n}\n\n.wrapper {\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n}\n\n.header {\n  background-color: var(--sys-color-cdt-base-container);\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  border-bottom: 1px solid var(--sys-color-divider);\n  padding: 0 5px;\n  min-height: 29px;\n  max-height: 29px;\n  gap: 3px;\n}\n\n.separator {\n  background-color: var(--sys-color-divider);\n  width: 1px;\n  height: 17px;\n  margin: 0;\n}\n\nselect {\n  border-radius: 2px;\n  border: 1px solid transparent;\n  height: 24px;\n  max-width: 180px;\n  min-width: 140px;\n  padding: 0 5px;\n  position: relative;\n  color: var(--sys-color-on-surface);\n  background-color: var(--sys-color-cdt-base-container);\n  text-overflow: ellipsis;\n}\n\nselect:disabled {\n  color: var(--sys-color-state-disabled);\n}\n\nselect:not([disabled]):hover,\nselect:not([disabled]):focus-visible,\nselect:not([disabled]):active {\n  background-color: var(--sys-color-state-hover-on-subtle);\n}\n\nselect:not([disabled]):focus-visible {\n  box-shadow: 0 0 0 2px var(--sys-color-state-focus-ring);\n}\n\nselect option {\n  background-color: var(--sys-color-cdt-base-container);\n  color: var(--sys-color-on-surface);\n}\n\ndevtools-menu {\n  width: 0;\n  height: 0;\n  position: absolute;\n}\n\ndevtools-recording-list-view {\n  overflow: auto;\n}\n\n.error {\n  color: var(--sys-color-error);\n  border: 1px solid var(--sys-color-error);\n  background-color: var(--sys-color-error-container);\n  padding: 4px;\n}\n\n.feedback {\n  margin-left: auto;\n  margin-right: 4px;\n}\n\n.feedback .x-link {\n  letter-spacing: 0.03em;\n  text-decoration-line: underline;\n  font-size: 9px;\n  line-height: 16px;\n  color: var(--sys-color-on-surface-subtle);\n  outline-offset: 3px;\n}\n\n.feedback .x-link:focus-visible {\n  outline: -webkit-focus-ring-color auto 1px;\n}\n\ndevtools-shortcut-dialog {\n  padding-right: 6px;\n}\n\n/*# sourceURL=recorderController.css */\n`);\n\nexport default styles;\n","// Copyright 2023 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\nexport class ReplayFinishedEvent extends Event {\n    static eventName = 'replayfinished';\n    constructor() {\n        super(ReplayFinishedEvent.eventName, { bubbles: true, composed: true });\n    }\n}\nexport class RecordingStateChangedEvent extends Event {\n    recording;\n    static eventName = 'recordingstatechanged';\n    constructor(recording) {\n        super(RecordingStateChangedEvent.eventName, {\n            bubbles: true,\n            composed: true,\n        });\n        this.recording = recording;\n    }\n}\n//# sourceMappingURL=RecorderEvents.js.map","// Copyright 2023 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport * as Common from '../../core/common/common.js';\nimport * as Host from '../../core/host/host.js';\nimport * as i18n from '../../core/i18n/i18n.js';\nimport * as Platform from '../../core/platform/platform.js';\nimport * as SDK from '../../core/sdk/sdk.js';\nimport * as Bindings from '../../models/bindings/bindings.js';\nimport * as PublicExtensions from '../../models/extensions/extensions.js';\nimport * as Emulation from '../../panels/emulation/emulation.js';\nimport * as Timeline from '../../panels/timeline/timeline.js';\nimport * as Tracing from '../../services/tracing/tracing.js';\nimport * as Buttons from '../../ui/components/buttons/buttons.js';\nimport * as ComponentHelpers from '../../ui/components/helpers/helpers.js';\nimport * as UI from '../../ui/legacy/legacy.js';\nimport * as LitHtml from '../../ui/lit-html/lit-html.js';\nimport * as VisualLogging from '../../ui/visual_logging/visual_logging.js';\nimport * as Components from './components/components.js';\nimport * as Converters from './converters/converters.js';\nimport * as Extensions from './extensions/extensions.js';\nimport * as Models from './models/models.js';\nimport recorderControllerStyles from './recorderController.css.js';\nimport * as Events from './RecorderEvents.js';\nconst { html, Decorators, LitElement } = LitHtml;\nconst { customElement, state } = Decorators;\nconst UIStrings = {\n    /**\n     * @description The title of the button that leads to a page for creating a new recording.\n     */\n    createRecording: 'Create a new recording',\n    /**\n     * @description The title of the button that allows importing a recording.\n     */\n    importRecording: 'Import recording',\n    /**\n     * @description The title of the button that deletes the recording\n     */\n    deleteRecording: 'Delete recording',\n    /**\n     * @description The title of the select if user has no saved recordings\n     */\n    noRecordings: 'No recordings',\n    /**\n     * @description The title of the select option for one or more recording\n     * number followed by this text - `1 recording(s)` or `4 recording(s)`\n     */\n    numberOfRecordings: 'recording(s)',\n    /**\n     * @description The title of the button that continues the replay\n     */\n    continueReplay: 'Continue',\n    /**\n     * @description The title of the button that executes only one step in the replay\n     */\n    stepOverReplay: 'Execute one step',\n    /**\n     * @description The title of the button that opens a menu with various options of exporting a recording to file.\n     */\n    exportRecording: 'Export',\n    /**\n     * @description The title of shortcut for starting and stopping recording.\n     */\n    startStopRecording: 'Start/Stop recording',\n    /**\n     * @description The title of shortcut for replaying recording.\n     */\n    replayRecording: 'Replay recording',\n    /**\n     * @description The title of shortcut for copying a recording or selected step.\n     */\n    copyShortcut: 'Copy recording or selected step',\n    /**\n     * @description The title of shortcut for toggling code view.\n     */\n    toggleCode: 'Toggle code view',\n    /**\n     * @description The title of the menu group in the export menu of the Recorder\n     * panel that is followed by the list of built-in export formats.\n     */\n    export: 'Export',\n    /**\n     * @description The title of the menu group in the export menu of the Recorder\n     * panel that is followed by the list of export formats available via browser\n     * extensions.\n     */\n    exportViaExtensions: 'Export via extensions',\n    /**\n     * @description The title of the menu option that leads to a page that lists\n     * all browsers extensions available for Recorder.\n     */\n    getExtensions: 'Get extensions…',\n    /**\n     * @description The button label that leads to the feedback form for Recorder.\n     */\n    sendFeedback: 'Send feedback',\n};\nconst str_ = i18n.i18n.registerUIStrings('panels/recorder/RecorderController.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\nconst GET_EXTENSIONS_MENU_ITEM = 'get-extensions-link';\nconst GET_EXTENSIONS_URL = 'https://goo.gle/recorder-extension-list';\nconst CONVERTER_ID_TO_METRIC = {\n    [\"json\" /* Models.ConverterIds.ConverterIds.JSON */]: 2 /* Host.UserMetrics.RecordingExported.TO_JSON */,\n    [\"@puppeteer/replay\" /* Models.ConverterIds.ConverterIds.REPLAY */]: 3 /* Host.UserMetrics.RecordingExported.TO_PUPPETEER_REPLAY */,\n    [\"puppeteer\" /* Models.ConverterIds.ConverterIds.PUPPETEER */]: 1 /* Host.UserMetrics.RecordingExported.TO_PUPPETEER */,\n    [\"puppeteer-firefox\" /* Models.ConverterIds.ConverterIds.PUPPETEER_FIREFOX */]: 1 /* Host.UserMetrics.RecordingExported.TO_PUPPETEER */,\n    [\"lighthouse\" /* Models.ConverterIds.ConverterIds.LIGHTHOUSE */]: 5 /* Host.UserMetrics.RecordingExported.TO_LIGHTHOUSE */,\n};\nlet RecorderController = class RecorderController extends LitElement {\n    static styles = [recorderControllerStyles];\n    #storage = Models.RecordingStorage.RecordingStorage.instance();\n    #screenshotStorage = Models.ScreenshotStorage.ScreenshotStorage.instance();\n    // TODO: we keep the functionality to allow/disallow replay but right now it's not used.\n    // It can be used to decide if we allow replay on a certain target for example.\n    #replayAllowed = true;\n    #replayState = { isPlaying: false, isPausedOnBreakpoint: false };\n    #fileSelector;\n    #exportMenuButton;\n    #stepBreakpointIndexes = new Set();\n    #builtInConverters;\n    #recorderSettings = new Models.RecorderSettings.RecorderSettings();\n    #shortcutHelper = new Models.RecorderShortcutHelper.RecorderShortcutHelper();\n    constructor() {\n        super();\n        this.isRecording = false;\n        this.isToggling = false;\n        this.exportMenuExpanded = false;\n        this.currentPage = \"StartPage\" /* Pages.START_PAGE */;\n        if (this.#storage.getRecordings().length) {\n            this.#setCurrentPage(\"AllRecordingsPage\" /* Pages.ALL_RECORDINGS_PAGE */);\n        }\n        const textEditorIndent = Common.Settings.Settings.instance().moduleSetting('text-editor-indent').get();\n        this.#builtInConverters = Object.freeze([\n            new Converters.JSONConverter.JSONConverter(textEditorIndent),\n            new Converters.PuppeteerReplayConverter.PuppeteerReplayConverter(textEditorIndent),\n            new Converters.PuppeteerConverter.PuppeteerConverter(textEditorIndent),\n            new Converters.PuppeteerFirefoxConverter.PuppeteerFirefoxConverter(textEditorIndent),\n            new Converters.LighthouseConverter.LighthouseConverter(textEditorIndent),\n        ]);\n        const extensionManager = Extensions.ExtensionManager.ExtensionManager.instance();\n        this.#updateExtensions(extensionManager.extensions());\n        extensionManager.addEventListener(\"extensionsUpdated\" /* Extensions.ExtensionManager.Events.EXTENSIONS_UPDATED */, event => {\n            this.#updateExtensions(event.data);\n        });\n        // used in e2e tests only.\n        this.addEventListener('setrecording', (event) => this.#onSetRecording(event));\n    }\n    disconnectedCallback() {\n        super.disconnectedCallback();\n        if (this.currentRecordingSession) {\n            void this.currentRecordingSession.stop();\n        }\n    }\n    #updateExtensions(extensions) {\n        this.extensionConverters =\n            extensions.filter(extension => extension.getCapabilities().includes('export')).map((extension, idx) => {\n                return new Converters.ExtensionConverter.ExtensionConverter(idx, extension);\n            });\n        this.replayExtensions = extensions.filter(extension => extension.getCapabilities().includes('replay'));\n    }\n    setIsRecordingStateForTesting(isRecording) {\n        this.isRecording = isRecording;\n    }\n    setRecordingStateForTesting(state) {\n        this.#replayState.isPlaying = state.isPlaying;\n        this.#replayState.isPausedOnBreakpoint = state.isPausedOnBreakpoint;\n    }\n    setCurrentPageForTesting(page) {\n        this.#setCurrentPage(page);\n    }\n    getCurrentPageForTesting() {\n        return this.currentPage;\n    }\n    getCurrentRecordingForTesting() {\n        return this.currentRecording;\n    }\n    getStepBreakpointIndexesForTesting() {\n        return [...this.#stepBreakpointIndexes.values()];\n    }\n    /**\n     * We should clear errors on every new action in the controller.\n     * TODO: think how to make handle this centrally so that in no case\n     * the error remains shown for longer than needed. Maybe a timer?\n     */\n    #clearError() {\n        this.importError = undefined;\n    }\n    async #importFile(file) {\n        const outputStream = new Common.StringOutputStream.StringOutputStream();\n        const reader = new Bindings.FileUtils.ChunkedFileReader(file, \n        /* chunkSize */ 10000000);\n        const success = await reader.read(outputStream);\n        if (!success) {\n            throw reader.error();\n        }\n        let flow;\n        try {\n            flow = Models.SchemaUtils.parse(JSON.parse(outputStream.data()));\n        }\n        catch (error) {\n            this.importError = error;\n            return;\n        }\n        this.#setCurrentRecording(await this.#storage.saveRecording(flow));\n        this.#setCurrentPage(\"RecordingPage\" /* Pages.RECORDING_PAGE */);\n        this.#clearError();\n    }\n    setCurrentRecordingForTesting(recording) {\n        this.#setCurrentRecording(recording);\n    }\n    getSectionsForTesting() {\n        return this.sections;\n    }\n    #setCurrentRecording(recording, opts = {}) {\n        const { keepBreakpoints = false, updateSession = false } = opts;\n        this.recordingPlayer?.abort();\n        this.currentStep = undefined;\n        this.recordingError = undefined;\n        this.lastReplayResult = undefined;\n        this.recordingPlayer = undefined;\n        this.#replayState.isPlaying = false;\n        this.#replayState.isPausedOnBreakpoint = false;\n        this.#stepBreakpointIndexes = keepBreakpoints ? this.#stepBreakpointIndexes : new Set();\n        if (recording) {\n            this.currentRecording = recording;\n            this.sections = Models.Section.buildSections(recording.flow.steps);\n            this.settings = this.#buildSettings(recording.flow);\n            if (updateSession && this.currentRecordingSession) {\n                this.currentRecordingSession.overwriteUserFlow(recording.flow);\n            }\n        }\n        else {\n            this.currentRecording = undefined;\n            this.sections = undefined;\n            this.settings = undefined;\n        }\n        this.#updateScreenshotsForSections();\n    }\n    #setCurrentPage(page) {\n        if (page === this.currentPage) {\n            return;\n        }\n        this.previousPage = this.currentPage;\n        this.currentPage = page;\n    }\n    #buildSettings(flow) {\n        const steps = flow.steps;\n        const navigateStepIdx = steps.findIndex(step => step.type === 'navigate');\n        const settings = { timeout: flow.timeout };\n        for (let i = navigateStepIdx - 1; i >= 0; i--) {\n            const step = steps[i];\n            if (!settings.viewportSettings && step.type === 'setViewport') {\n                settings.viewportSettings = step;\n            }\n            if (!settings.networkConditionsSettings && step.type === 'emulateNetworkConditions') {\n                settings.networkConditionsSettings = { ...step };\n                for (const preset of [SDK.NetworkManager.OfflineConditions, SDK.NetworkManager.Slow3GConditions,\n                    SDK.NetworkManager.Slow4GConditions, SDK.NetworkManager.Fast4GConditions]) {\n                    // Using i18nTitleKey as a title here because we only want to compare the parameters of the network conditions.\n                    if (SDK.NetworkManager.networkConditionsEqual({ ...preset, title: preset.i18nTitleKey || '' }, { ...step, title: preset.i18nTitleKey || '' })) {\n                        settings.networkConditionsSettings.title = preset.title instanceof Function ? preset.title() : preset.title;\n                        settings.networkConditionsSettings.i18nTitleKey = preset.i18nTitleKey;\n                    }\n                }\n            }\n        }\n        return settings;\n    }\n    #getMainTarget() {\n        const target = SDK.TargetManager.TargetManager.instance().primaryPageTarget();\n        if (!target) {\n            throw new Error('Missing main page target');\n        }\n        return target;\n    }\n    #getSectionFromStep(step) {\n        if (!this.sections) {\n            return null;\n        }\n        for (const section of this.sections) {\n            if (section.steps.indexOf(step) !== -1) {\n                return section;\n            }\n        }\n        return null;\n    }\n    #updateScreenshotsForSections() {\n        if (!this.sections || !this.currentRecording) {\n            return;\n        }\n        const storageName = this.currentRecording.storageName;\n        for (let i = 0; i < this.sections.length; i++) {\n            const screenshot = this.#screenshotStorage.getScreenshotForSection(storageName, i);\n            this.sections[i].screenshot = screenshot || undefined;\n        }\n        this.requestUpdate();\n    }\n    #onAbortReplay() {\n        this.recordingPlayer?.abort();\n    }\n    async #onPlayViaExtension(extension) {\n        if (!this.currentRecording || !this.#replayAllowed) {\n            return;\n        }\n        const pluginManager = PublicExtensions.RecorderPluginManager.RecorderPluginManager.instance();\n        const promise = pluginManager.once(\"showViewRequested\" /* PublicExtensions.RecorderPluginManager.Events.SHOW_VIEW_REQUESTED */);\n        extension.replay(this.currentRecording.flow);\n        const descriptor = await promise;\n        this.viewDescriptor = descriptor;\n        Host.userMetrics.recordingReplayStarted(3 /* Host.UserMetrics.RecordingReplayStarted.REPLAY_VIA_EXTENSION */);\n    }\n    async #onPlayRecording(event) {\n        if (!this.currentRecording || !this.#replayAllowed) {\n            return;\n        }\n        if (this.viewDescriptor) {\n            this.viewDescriptor = undefined;\n        }\n        if (event.data.extension) {\n            return this.#onPlayViaExtension(event.data.extension);\n        }\n        Host.userMetrics.recordingReplayStarted(event.data.targetPanel !== \"chrome-recorder\" /* Components.RecordingView.TargetPanel.DEFAULT */ ?\n            2 /* Host.UserMetrics.RecordingReplayStarted.REPLAY_WITH_PERFORMANCE_TRACING */ :\n            1 /* Host.UserMetrics.RecordingReplayStarted.REPLAY_ONLY */);\n        this.#replayState.isPlaying = true;\n        this.currentStep = undefined;\n        this.recordingError = undefined;\n        this.lastReplayResult = undefined;\n        const currentRecording = this.currentRecording;\n        this.#clearError();\n        await this.#disableDeviceModeIfEnabled();\n        this.recordingPlayer = new Models.RecordingPlayer.RecordingPlayer(this.currentRecording.flow, { speed: event.data.speed, breakpointIndexes: this.#stepBreakpointIndexes });\n        const withPerformanceTrace = event.data.targetPanel === \"timeline\" /* Components.RecordingView.TargetPanel.PERFORMANCE_PANEL */;\n        const sectionsWithScreenshot = new Set();\n        this.recordingPlayer.addEventListener(\"Step\" /* Models.RecordingPlayer.Events.STEP */, async ({ data: { step, resolve } }) => {\n            this.currentStep = step;\n            const currentSection = this.#getSectionFromStep(step);\n            if (this.sections && currentSection && !sectionsWithScreenshot.has(currentSection)) {\n                sectionsWithScreenshot.add(currentSection);\n                const currentSectionIndex = this.sections.indexOf(currentSection);\n                const screenshot = await Models.ScreenshotUtils.takeScreenshot();\n                currentSection.screenshot = screenshot;\n                Models.ScreenshotStorage.ScreenshotStorage.instance().storeScreenshotForSection(currentRecording.storageName, currentSectionIndex, screenshot);\n            }\n            resolve();\n        });\n        this.recordingPlayer.addEventListener(\"Stop\" /* Models.RecordingPlayer.Events.STOP */, () => {\n            this.#replayState.isPausedOnBreakpoint = true;\n            this.requestUpdate();\n        });\n        this.recordingPlayer.addEventListener(\"Continue\" /* Models.RecordingPlayer.Events.CONTINUE */, () => {\n            this.#replayState.isPausedOnBreakpoint = false;\n            this.requestUpdate();\n        });\n        this.recordingPlayer.addEventListener(\"Error\" /* Models.RecordingPlayer.Events.ERROR */, ({ data: error }) => {\n            this.recordingError = error;\n            if (!withPerformanceTrace) {\n                this.#replayState.isPlaying = false;\n                this.recordingPlayer = undefined;\n            }\n            this.lastReplayResult = \"Failure\" /* Models.RecordingPlayer.ReplayResult.FAILURE */;\n            const errorMessage = error.message.toLowerCase();\n            if (errorMessage.startsWith('could not find element')) {\n                Host.userMetrics.recordingReplayFinished(2 /* Host.UserMetrics.RecordingReplayFinished.TIMEOUT_ERROR_SELECTORS */);\n            }\n            else if (errorMessage.startsWith('waiting for target failed')) {\n                Host.userMetrics.recordingReplayFinished(3 /* Host.UserMetrics.RecordingReplayFinished.TIMEOUT_ERROR_TARGET */);\n            }\n            else {\n                Host.userMetrics.recordingReplayFinished(4 /* Host.UserMetrics.RecordingReplayFinished.OTHER_ERROR */);\n            }\n        });\n        this.recordingPlayer.addEventListener(\"Done\" /* Models.RecordingPlayer.Events.DONE */, () => {\n            if (!withPerformanceTrace) {\n                this.#replayState.isPlaying = false;\n                this.recordingPlayer = undefined;\n            }\n            this.lastReplayResult = \"Success\" /* Models.RecordingPlayer.ReplayResult.SUCCESS */;\n            // Dispatch an event for e2e testing.\n            this.dispatchEvent(new Events.ReplayFinishedEvent());\n            Host.userMetrics.recordingReplayFinished(1 /* Host.UserMetrics.RecordingReplayFinished.SUCCESS */);\n        });\n        this.recordingPlayer.addEventListener(\"Abort\" /* Models.RecordingPlayer.Events.ABORT */, () => {\n            this.currentStep = undefined;\n            this.recordingError = undefined;\n            this.lastReplayResult = undefined;\n            this.#replayState.isPlaying = false;\n        });\n        let resolveWithEvents = (_events) => { };\n        const eventsPromise = new Promise((resolve) => {\n            resolveWithEvents = resolve;\n        });\n        let performanceTracing = null;\n        switch (event.data?.targetPanel) {\n            case \"timeline\" /* Components.RecordingView.TargetPanel.PERFORMANCE_PANEL */:\n                performanceTracing = new Tracing.PerformanceTracing.PerformanceTracing(this.#getMainTarget(), {\n                    tracingBufferUsage() { },\n                    eventsRetrievalProgress() { },\n                    tracingComplete(events) {\n                        resolveWithEvents(events);\n                    },\n                });\n                break;\n        }\n        if (performanceTracing) {\n            await performanceTracing.start();\n        }\n        this.#setTouchEmulationAllowed(false);\n        await this.recordingPlayer.play();\n        this.#setTouchEmulationAllowed(true);\n        if (performanceTracing) {\n            await performanceTracing.stop();\n            const events = await eventsPromise;\n            this.#replayState.isPlaying = false;\n            this.recordingPlayer = undefined;\n            await UI.InspectorView.InspectorView.instance().showPanel(event.data?.targetPanel);\n            switch (event.data?.targetPanel) {\n                case \"timeline\" /* Components.RecordingView.TargetPanel.PERFORMANCE_PANEL */:\n                    Timeline.TimelinePanel.TimelinePanel.instance().loadFromEvents(events);\n                    break;\n            }\n        }\n    }\n    async #disableDeviceModeIfEnabled() {\n        try {\n            const deviceModeWrapper = Emulation.DeviceModeWrapper.DeviceModeWrapper.instance();\n            if (deviceModeWrapper.isDeviceModeOn()) {\n                deviceModeWrapper.toggleDeviceMode();\n                const emulationModel = this.#getMainTarget().model(SDK.EmulationModel.EmulationModel);\n                await emulationModel?.emulateDevice(null);\n            }\n        }\n        catch {\n            // in the hosted mode, when the DeviceMode toolbar is not supported,\n            // Emulation.DeviceModeWrapper.DeviceModeWrapper.instance throws an exception.\n        }\n    }\n    #setTouchEmulationAllowed(touchEmulationAllowed) {\n        const emulationModel = this.#getMainTarget().model(SDK.EmulationModel.EmulationModel);\n        emulationModel?.setTouchEmulationAllowed(touchEmulationAllowed);\n    }\n    async #onSetRecording(event) {\n        const json = JSON.parse(event.detail);\n        this.#setCurrentRecording(await this.#storage.saveRecording(Models.SchemaUtils.parse(json)));\n        this.#setCurrentPage(\"RecordingPage\" /* Pages.RECORDING_PAGE */);\n        this.#clearError();\n    }\n    // Used by e2e tests to inspect the current recording.\n    getUserFlow() {\n        return this.currentRecording?.flow;\n    }\n    async #handleRecordingChanged(event) {\n        if (!this.currentRecording) {\n            throw new Error('Current recording expected to be defined.');\n        }\n        const recording = {\n            ...this.currentRecording,\n            flow: {\n                ...this.currentRecording.flow,\n                steps: this.currentRecording.flow.steps.map(step => step === event.currentStep ? event.newStep : step),\n            },\n        };\n        this.#setCurrentRecording(await this.#storage.updateRecording(recording.storageName, recording.flow), { keepBreakpoints: true, updateSession: true });\n    }\n    async #handleStepAdded(event) {\n        if (!this.currentRecording) {\n            throw new Error('Current recording expected to be defined.');\n        }\n        const stepOrSection = event.stepOrSection;\n        let step;\n        let position = event.position;\n        if ('steps' in stepOrSection) {\n            // section\n            const sectionIdx = this.sections?.indexOf(stepOrSection);\n            if (sectionIdx === undefined || sectionIdx === -1) {\n                throw new Error('There is no section to add a step to');\n            }\n            if (event.position === \"after\" /* Components.StepView.AddStepPosition.AFTER */) {\n                if (this.sections?.[sectionIdx].steps.length) {\n                    step = this.sections?.[sectionIdx].steps[0];\n                    position = \"before\" /* Components.StepView.AddStepPosition.BEFORE */;\n                }\n                else {\n                    step = this.sections?.[sectionIdx].causingStep;\n                    position = \"after\" /* Components.StepView.AddStepPosition.AFTER */;\n                }\n            }\n            else {\n                if (sectionIdx <= 0) {\n                    throw new Error('There is no section to add a step to');\n                }\n                const prevSection = this.sections?.[sectionIdx - 1];\n                step = prevSection?.steps[prevSection.steps.length - 1];\n                position = \"after\" /* Components.StepView.AddStepPosition.AFTER */;\n            }\n        }\n        else {\n            // step\n            step = stepOrSection;\n        }\n        if (!step) {\n            throw new Error('Anchor step is not found when adding a step');\n        }\n        const steps = this.currentRecording.flow.steps;\n        const currentIndex = steps.indexOf(step);\n        const indexToInsertAt = currentIndex + (position === \"before\" /* Components.StepView.AddStepPosition.BEFORE */ ? 0 : 1);\n        steps.splice(indexToInsertAt, 0, { type: Models.Schema.StepType.WaitForElement, selectors: ['body'] });\n        const recording = { ...this.currentRecording, flow: { ...this.currentRecording.flow, steps } };\n        Host.userMetrics.recordingEdited(2 /* Host.UserMetrics.RecordingEdited.STEP_ADDED */);\n        this.#stepBreakpointIndexes = new Set([...this.#stepBreakpointIndexes.values()].map(breakpointIndex => {\n            if (indexToInsertAt > breakpointIndex) {\n                return breakpointIndex;\n            }\n            return breakpointIndex + 1;\n        }));\n        this.#setCurrentRecording(await this.#storage.updateRecording(recording.storageName, recording.flow), { keepBreakpoints: true, updateSession: true });\n    }\n    async #handleRecordingTitleChanged(event) {\n        if (!this.currentRecording) {\n            throw new Error('Current recording expected to be defined.');\n        }\n        const flow = { ...this.currentRecording.flow, title: event.title };\n        this.#setCurrentRecording(await this.#storage.updateRecording(this.currentRecording.storageName, flow));\n    }\n    async #handleStepRemoved(event) {\n        if (!this.currentRecording) {\n            throw new Error('Current recording expected to be defined.');\n        }\n        const steps = this.currentRecording.flow.steps;\n        const currentIndex = steps.indexOf(event.step);\n        steps.splice(currentIndex, 1);\n        const flow = { ...this.currentRecording.flow, steps };\n        Host.userMetrics.recordingEdited(3 /* Host.UserMetrics.RecordingEdited.STEP_REMOVED */);\n        this.#stepBreakpointIndexes = new Set([...this.#stepBreakpointIndexes.values()]\n            .map(breakpointIndex => {\n            if (currentIndex > breakpointIndex) {\n                return breakpointIndex;\n            }\n            if (currentIndex === breakpointIndex) {\n                return -1;\n            }\n            return breakpointIndex - 1;\n        })\n            .filter(index => index >= 0));\n        this.#setCurrentRecording(await this.#storage.updateRecording(this.currentRecording.storageName, flow), { keepBreakpoints: true, updateSession: true });\n    }\n    async #onNetworkConditionsChanged(event) {\n        if (!this.currentRecording) {\n            throw new Error('Current recording expected to be defined.');\n        }\n        const navigateIdx = this.currentRecording.flow.steps.findIndex(step => step.type === 'navigate');\n        if (navigateIdx === -1) {\n            throw new Error('Current recording does not have a navigate step');\n        }\n        const emulateNetworkConditionsIdx = this.currentRecording.flow.steps.findIndex((step, idx) => {\n            if (idx >= navigateIdx) {\n                return false;\n            }\n            return step.type === 'emulateNetworkConditions';\n        });\n        if (!event.data) {\n            // Delete step if present.\n            if (emulateNetworkConditionsIdx !== -1) {\n                this.currentRecording.flow.steps.splice(emulateNetworkConditionsIdx, 1);\n            }\n        }\n        else if (emulateNetworkConditionsIdx === -1) {\n            // Insert at the first position.\n            this.currentRecording.flow.steps.splice(0, 0, Models.SchemaUtils.createEmulateNetworkConditionsStep({ download: event.data.download, upload: event.data.upload, latency: event.data.latency }));\n        }\n        else {\n            // Update existing step.\n            const step = this.currentRecording.flow.steps[emulateNetworkConditionsIdx];\n            step.download = event.data.download;\n            step.upload = event.data.upload;\n            step.latency = event.data.latency;\n        }\n        this.#setCurrentRecording(await this.#storage.updateRecording(this.currentRecording.storageName, this.currentRecording.flow));\n    }\n    async #onTimeoutChanged(event) {\n        if (!this.currentRecording) {\n            throw new Error('Current recording expected to be defined.');\n        }\n        this.currentRecording.flow.timeout = event.data;\n        this.#setCurrentRecording(await this.#storage.updateRecording(this.currentRecording.storageName, this.currentRecording.flow));\n    }\n    async #onDeleteRecording(event) {\n        event.stopPropagation();\n        if (event instanceof Components.RecordingListView.DeleteRecordingEvent) {\n            await this.#storage.deleteRecording(event.storageName);\n            this.#screenshotStorage.deleteScreenshotsForRecording(event.storageName);\n            this.requestUpdate();\n        }\n        else {\n            if (!this.currentRecording) {\n                return;\n            }\n            await this.#storage.deleteRecording(this.currentRecording.storageName);\n            this.#screenshotStorage.deleteScreenshotsForRecording(this.currentRecording.storageName);\n        }\n        if ((await this.#storage.getRecordings()).length) {\n            this.#setCurrentPage(\"AllRecordingsPage\" /* Pages.ALL_RECORDINGS_PAGE */);\n        }\n        else {\n            this.#setCurrentPage(\"StartPage\" /* Pages.START_PAGE */);\n        }\n        this.#setCurrentRecording(undefined);\n        this.#clearError();\n    }\n    #onCreateNewRecording(event) {\n        event?.stopPropagation();\n        this.#setCurrentPage(\"CreateRecordingPage\" /* Pages.CREATE_RECORDING_PAGE */);\n        this.#clearError();\n    }\n    async #onRecordingStarted(event) {\n        // Recording is not available in device mode.\n        await this.#disableDeviceModeIfEnabled();\n        // Setting up some variables to notify the user we are initializing a recording.\n        this.isToggling = true;\n        this.#clearError();\n        // -- Recording logic starts here --\n        Host.userMetrics.recordingToggled(1 /* Host.UserMetrics.RecordingToggled.RECORDING_STARTED */);\n        this.currentRecordingSession = new Models.RecordingSession.RecordingSession(this.#getMainTarget(), {\n            title: event.name,\n            selectorAttribute: event.selectorAttribute,\n            selectorTypesToRecord: event.selectorTypesToRecord.length ? event.selectorTypesToRecord :\n                Object.values(Models.Schema.SelectorType),\n        });\n        this.#setCurrentRecording(await this.#storage.saveRecording(this.currentRecordingSession.cloneUserFlow()));\n        let previousSectionIndex = -1;\n        let screenshotPromise;\n        const takeScreenshot = async (currentRecording) => {\n            if (!this.sections) {\n                throw new Error('Could not find sections.');\n            }\n            const currentSectionIndex = this.sections.length - 1;\n            const currentSection = this.sections[currentSectionIndex];\n            if (screenshotPromise || previousSectionIndex === currentSectionIndex) {\n                return;\n            }\n            screenshotPromise = Models.ScreenshotUtils.takeScreenshot();\n            const screenshot = await screenshotPromise;\n            screenshotPromise = undefined;\n            currentSection.screenshot = screenshot;\n            Models.ScreenshotStorage.ScreenshotStorage.instance().storeScreenshotForSection(currentRecording.storageName, currentSectionIndex, screenshot);\n            previousSectionIndex = currentSectionIndex;\n            this.#updateScreenshotsForSections();\n        };\n        this.currentRecordingSession.addEventListener(\"recordingupdated\" /* Models.RecordingSession.Events.RECORDING_UPDATED */, async ({ data }) => {\n            if (!this.currentRecording) {\n                throw new Error('No current recording found');\n            }\n            this.#setCurrentRecording(await this.#storage.updateRecording(this.currentRecording.storageName, data));\n            const recordingView = this.shadowRoot?.querySelector('devtools-recording-view');\n            recordingView?.scrollToBottom();\n            await takeScreenshot(this.currentRecording);\n        });\n        this.currentRecordingSession.addEventListener(\"recordingstopped\" /* Models.RecordingSession.Events.RECORDING_STOPPED */, async ({ data }) => {\n            if (!this.currentRecording) {\n                throw new Error('No current recording found');\n            }\n            Host.userMetrics.keyboardShortcutFired(\"chrome-recorder.start-recording\" /* Actions.RecorderActions.START_RECORDING */);\n            this.#setCurrentRecording(await this.#storage.updateRecording(this.currentRecording.storageName, data));\n            await this.#onRecordingFinished();\n        });\n        await this.currentRecordingSession.start();\n        // -- Recording logic ends here --\n        // Setting up some variables to notify the user we are finished initialization.\n        this.isToggling = false;\n        this.isRecording = true;\n        this.#setCurrentPage(\"RecordingPage\" /* Pages.RECORDING_PAGE */);\n        // Dispatch an event for e2e testing.\n        this.dispatchEvent(new Events.RecordingStateChangedEvent(this.currentRecording.flow));\n    }\n    async #onRecordingFinished() {\n        if (!this.currentRecording || !this.currentRecordingSession) {\n            throw new Error('Recording was never started');\n        }\n        // Setting up some variables to notify the user we are finalizing a recording.\n        this.isToggling = true;\n        this.#clearError();\n        // -- Recording logic starts here --\n        Host.userMetrics.recordingToggled(2 /* Host.UserMetrics.RecordingToggled.RECORDING_FINISHED */);\n        await this.currentRecordingSession.stop();\n        this.currentRecordingSession = undefined;\n        // -- Recording logic ends here --\n        // Setting up some variables to notify the user we are finished finalizing.\n        this.isToggling = false;\n        this.isRecording = false;\n        // Dispatch an event for e2e testing.\n        this.dispatchEvent(new Events.RecordingStateChangedEvent(this.currentRecording.flow));\n    }\n    async #onRecordingCancelled() {\n        if (this.previousPage) {\n            this.#setCurrentPage(this.previousPage);\n        }\n    }\n    async #onRecordingSelected(event) {\n        const storageName = event instanceof Components.RecordingListView.OpenRecordingEvent ||\n            event instanceof Components.RecordingListView.PlayRecordingEvent ?\n            event.storageName :\n            event.target?.value;\n        this.#setCurrentRecording(await this.#storage.getRecording(storageName));\n        if (this.currentRecording) {\n            this.#setCurrentPage(\"RecordingPage\" /* Pages.RECORDING_PAGE */);\n        }\n        else if (storageName === \"StartPage\" /* Pages.START_PAGE */) {\n            this.#setCurrentPage(\"StartPage\" /* Pages.START_PAGE */);\n        }\n        else if (storageName === \"AllRecordingsPage\" /* Pages.ALL_RECORDINGS_PAGE */) {\n            this.#setCurrentPage(\"AllRecordingsPage\" /* Pages.ALL_RECORDINGS_PAGE */);\n        }\n    }\n    async #onExportOptionSelected(event) {\n        if (typeof event.itemValue !== 'string') {\n            throw new Error('Invalid export option value');\n        }\n        if (event.itemValue === GET_EXTENSIONS_MENU_ITEM) {\n            Host.InspectorFrontendHost.InspectorFrontendHostInstance.openInNewTab(GET_EXTENSIONS_URL);\n            return;\n        }\n        if (!this.currentRecording) {\n            throw new Error('No recording selected');\n        }\n        const id = event.itemValue;\n        const byId = (converter) => converter.getId() === id;\n        const converter = this.#builtInConverters.find(byId) || this.extensionConverters.find(byId);\n        if (!converter) {\n            throw new Error('No recording selected');\n        }\n        const [content] = await converter.stringify(this.currentRecording.flow);\n        await this.#exportContent(converter.getFilename(this.currentRecording.flow), content);\n        const builtInMetric = CONVERTER_ID_TO_METRIC[converter.getId()];\n        if (builtInMetric) {\n            Host.userMetrics.recordingExported(builtInMetric);\n        }\n        else if (converter.getId().startsWith(Converters.ExtensionConverter.EXTENSION_PREFIX)) {\n            Host.userMetrics.recordingExported(4 /* Host.UserMetrics.RecordingExported.TO_EXTENSION */);\n        }\n        else {\n            throw new Error('Could not find a metric for the export option with id = ' + id);\n        }\n    }\n    async #exportContent(suggestedName, data) {\n        try {\n            const handle = await window.showSaveFilePicker({ suggestedName });\n            const writable = await handle.createWritable();\n            await writable.write(data);\n            await writable.close();\n        }\n        catch (error) {\n            // If the user aborts the action no need to report it, otherwise do.\n            if (error.name === 'AbortError') {\n                return;\n            }\n            throw error;\n        }\n    }\n    async #handleAddAssertionEvent() {\n        if (!this.currentRecordingSession || !this.currentRecording) {\n            return;\n        }\n        const flow = this.currentRecordingSession.cloneUserFlow();\n        flow.steps.push({ type: 'waitForElement', selectors: [['.cls']] });\n        this.#setCurrentRecording(await this.#storage.updateRecording(this.currentRecording.storageName, flow), { keepBreakpoints: true, updateSession: true });\n        Host.userMetrics.recordingAssertion(1 /* Host.UserMetrics.RecordingAssertion.ASSERTION_ADDED */);\n        await this.updateComplete;\n        this.renderRoot.querySelector('devtools-recording-view')\n            ?.shadowRoot?.querySelector('.section:last-child devtools-step-view:last-of-type')\n            ?.shadowRoot?.querySelector('.action')\n            ?.click();\n    }\n    #onImportRecording(event) {\n        event.stopPropagation();\n        this.#clearError();\n        this.#fileSelector = UI.UIUtils.createFileSelectorElement(this.#importFile.bind(this));\n        this.#fileSelector.click();\n    }\n    async #onPlayRecordingByName(event) {\n        await this.#onRecordingSelected(event);\n        await this.#onPlayRecording(new Components.RecordingView.PlayRecordingEvent({ targetPanel: \"chrome-recorder\" /* Components.RecordingView.TargetPanel.DEFAULT */, speed: this.#recorderSettings.speed }));\n    }\n    #onAddBreakpoint = (event) => {\n        this.#stepBreakpointIndexes.add(event.index);\n        this.recordingPlayer?.updateBreakpointIndexes(this.#stepBreakpointIndexes);\n        this.requestUpdate();\n    };\n    #onRemoveBreakpoint = (event) => {\n        this.#stepBreakpointIndexes.delete(event.index);\n        this.recordingPlayer?.updateBreakpointIndexes(this.#stepBreakpointIndexes);\n        this.requestUpdate();\n    };\n    #onExtensionViewClosed() {\n        this.viewDescriptor = undefined;\n    }\n    handleActions(actionId) {\n        if (!this.isActionPossible(actionId)) {\n            return;\n        }\n        switch (actionId) {\n            case \"chrome-recorder.create-recording\" /* Actions.RecorderActions.CREATE_RECORDING */:\n                this.#onCreateNewRecording();\n                return;\n            case \"chrome-recorder.start-recording\" /* Actions.RecorderActions.START_RECORDING */:\n                if (this.currentPage !== \"CreateRecordingPage\" /* Pages.CREATE_RECORDING_PAGE */ && !this.isRecording) {\n                    this.#shortcutHelper.handleShortcut(this.#onRecordingStarted.bind(this, new Components.CreateRecordingView.RecordingStartedEvent(this.#recorderSettings.defaultTitle, this.#recorderSettings.defaultSelectors, this.#recorderSettings.selectorAttribute)));\n                }\n                else if (this.currentPage === \"CreateRecordingPage\" /* Pages.CREATE_RECORDING_PAGE */) {\n                    const view = this.renderRoot.querySelector('devtools-create-recording-view');\n                    if (view) {\n                        this.#shortcutHelper.handleShortcut(view.startRecording.bind(view));\n                    }\n                }\n                else if (this.isRecording) {\n                    void this.#onRecordingFinished();\n                }\n                return;\n            case \"chrome-recorder.replay-recording\" /* Actions.RecorderActions.REPLAY_RECORDING */:\n                void this.#onPlayRecording(new Components.RecordingView.PlayRecordingEvent({ targetPanel: \"chrome-recorder\" /* Components.RecordingView.TargetPanel.DEFAULT */, speed: this.#recorderSettings.speed }));\n                return;\n            case \"chrome-recorder.toggle-code-view\" /* Actions.RecorderActions.TOGGLE_CODE_VIEW */: {\n                const view = this.renderRoot.querySelector('devtools-recording-view');\n                if (view) {\n                    view.showCodeToggle();\n                }\n                return;\n            }\n        }\n    }\n    isActionPossible(actionId) {\n        switch (actionId) {\n            case \"chrome-recorder.create-recording\" /* Actions.RecorderActions.CREATE_RECORDING */:\n                return !this.isRecording && !this.#replayState.isPlaying;\n            case \"chrome-recorder.start-recording\" /* Actions.RecorderActions.START_RECORDING */:\n                return !this.#replayState.isPlaying;\n            case \"chrome-recorder.replay-recording\" /* Actions.RecorderActions.REPLAY_RECORDING */:\n                return (this.currentPage === \"RecordingPage\" /* Pages.RECORDING_PAGE */ && !this.#replayState.isPlaying);\n            case \"chrome-recorder.toggle-code-view\" /* Actions.RecorderActions.TOGGLE_CODE_VIEW */:\n                return this.currentPage === \"RecordingPage\" /* Pages.RECORDING_PAGE */;\n            case \"chrome-recorder.copy-recording-or-step\" /* Actions.RecorderActions.COPY_RECORDING_OR_STEP */:\n                // This action is handled in the RecordingView\n                // It relies on browser `copy` event.\n                return false;\n        }\n    }\n    #getShortcutsInfo() {\n        const getBindingForAction = (action) => {\n            const shortcuts = UI.ShortcutRegistry.ShortcutRegistry.instance().shortcutsForAction(action);\n            return shortcuts.map(shortcut => shortcut.title());\n        };\n        return [\n            {\n                title: i18nString(UIStrings.startStopRecording),\n                bindings: getBindingForAction(\"chrome-recorder.start-recording\" /* Actions.RecorderActions.START_RECORDING */),\n            },\n            {\n                title: i18nString(UIStrings.replayRecording),\n                bindings: getBindingForAction(\"chrome-recorder.replay-recording\" /* Actions.RecorderActions.REPLAY_RECORDING */),\n            },\n            { title: i18nString(UIStrings.copyShortcut), bindings: [`${Host.Platform.isMac() ? '⌘ C' : 'Ctrl+C'}`] },\n            {\n                title: i18nString(UIStrings.toggleCode),\n                bindings: getBindingForAction(\"chrome-recorder.toggle-code-view\" /* Actions.RecorderActions.TOGGLE_CODE_VIEW */),\n            },\n        ];\n    }\n    #renderCurrentPage() {\n        switch (this.currentPage) {\n            case \"StartPage\" /* Pages.START_PAGE */:\n                return this.#renderStartPage();\n            case \"AllRecordingsPage\" /* Pages.ALL_RECORDINGS_PAGE */:\n                return this.#renderAllRecordingsPage();\n            case \"RecordingPage\" /* Pages.RECORDING_PAGE */:\n                return this.#renderRecordingPage();\n            case \"CreateRecordingPage\" /* Pages.CREATE_RECORDING_PAGE */:\n                return this.#renderCreateRecordingPage();\n        }\n    }\n    #renderAllRecordingsPage() {\n        const recordings = this.#storage.getRecordings();\n        // clang-format off\n        return html `\n      <devtools-recording-list-view\n        .recordings=${recordings.map(recording => ({\n            storageName: recording.storageName,\n            name: recording.flow.title,\n        }))}\n        .replayAllowed=${this.#replayAllowed}\n        @createrecording=${this.#onCreateNewRecording}\n        @deleterecording=${this.#onDeleteRecording}\n        @openrecording=${this.#onRecordingSelected}\n        @playrecording=${this.#onPlayRecordingByName}\n        >\n      </devtools-recording-list-view>\n    `;\n        // clang-format on\n    }\n    #renderStartPage() {\n        // clang-format off\n        return html `\n      <devtools-start-view\n        @createrecording=${this.#onCreateNewRecording}\n      ></devtools-start-view>\n    `;\n        // clang-format on\n    }\n    #renderRecordingPage() {\n        // clang-format off\n        return html `\n      <devtools-recording-view\n        .data=${{\n            recording: this.currentRecording?.flow,\n            replayState: this.#replayState,\n            isRecording: this.isRecording,\n            recordingTogglingInProgress: this.isToggling,\n            currentStep: this.currentStep,\n            currentError: this.recordingError,\n            sections: this.sections,\n            settings: this.settings,\n            recorderSettings: this.#recorderSettings,\n            lastReplayResult: this.lastReplayResult,\n            replayAllowed: this.#replayAllowed,\n            breakpointIndexes: this.#stepBreakpointIndexes,\n            builtInConverters: this.#builtInConverters,\n            extensionConverters: this.extensionConverters,\n            replayExtensions: this.replayExtensions,\n            extensionDescriptor: this.viewDescriptor,\n        }}\n        @networkconditionschanged=${this.#onNetworkConditionsChanged}\n        @timeoutchanged=${this.#onTimeoutChanged}\n        @requestselectorattribute=${(event) => {\n            event.send(this.currentRecording?.flow.selectorAttribute);\n        }}\n        @recordingfinished=${this.#onRecordingFinished}\n        @stepchanged=${this.#handleRecordingChanged.bind(this)}\n        @recordingtitlechanged=${this.#handleRecordingTitleChanged.bind(this)}\n        @addstep=${this.#handleStepAdded.bind(this)}\n        @removestep=${this.#handleStepRemoved.bind(this)}\n        @addbreakpoint=${this.#onAddBreakpoint}\n        @removebreakpoint=${this.#onRemoveBreakpoint}\n        @playrecording=${this.#onPlayRecording}\n        @abortreplay=${this.#onAbortReplay}\n        @recorderextensionviewclosed=${this.#onExtensionViewClosed}\n        @addassertion=${this.#handleAddAssertionEvent}\n      ></devtools-recording-view>\n    `;\n        // clang-format on\n    }\n    #renderCreateRecordingPage() {\n        // clang-format off\n        return html `\n      <devtools-create-recording-view\n        .data=${{\n            recorderSettings: this.#recorderSettings,\n        }}\n        @recordingstarted=${this.#onRecordingStarted}\n        @recordingcancelled=${this.#onRecordingCancelled}\n      ></devtools-create-recording-view>\n    `;\n        // clang-format on\n    }\n    #getExportMenuButton = () => {\n        if (!this.#exportMenuButton) {\n            throw new Error('#exportMenuButton not found');\n        }\n        return this.#exportMenuButton;\n    };\n    #onExportRecording(event) {\n        event.stopPropagation();\n        this.#clearError();\n        this.exportMenuExpanded = !this.exportMenuExpanded;\n    }\n    #onExportMenuClosed() {\n        this.exportMenuExpanded = false;\n    }\n    render() {\n        const recordings = this.#storage.getRecordings();\n        const selectValue = this.currentRecording ? this.currentRecording.storageName : this.currentPage;\n        // clang-format off\n        const values = [\n            recordings.length === 0\n                ? {\n                    value: \"StartPage\" /* Pages.START_PAGE */,\n                    name: i18nString(UIStrings.noRecordings),\n                    selected: selectValue === \"StartPage\" /* Pages.START_PAGE */,\n                }\n                : {\n                    value: \"AllRecordingsPage\" /* Pages.ALL_RECORDINGS_PAGE */,\n                    name: `${recordings.length} ${i18nString(UIStrings.numberOfRecordings)}`,\n                    selected: selectValue === \"AllRecordingsPage\" /* Pages.ALL_RECORDINGS_PAGE */,\n                },\n            ...recordings.map(recording => ({\n                value: recording.storageName,\n                name: recording.flow.title,\n                selected: selectValue === recording.storageName,\n            })),\n        ];\n        return html `\n        <div class=\"wrapper\">\n          <div class=\"header\" jslog=${VisualLogging.toolbar()}>\n            <devtools-button\n              @click=${this.#onCreateNewRecording}\n              .data=${{\n            variant: \"toolbar\" /* Buttons.Button.Variant.TOOLBAR */,\n            iconName: 'plus',\n            disabled: this.#replayState.isPlaying ||\n                this.isRecording ||\n                this.isToggling,\n            title: Models.Tooltip.getTooltipForActions(i18nString(UIStrings.createRecording), \"chrome-recorder.create-recording\" /* Actions.RecorderActions.CREATE_RECORDING */),\n            jslogContext: \"chrome-recorder.create-recording\" /* Actions.RecorderActions.CREATE_RECORDING */,\n        }}\n            ></devtools-button>\n            <div class=\"separator\"></div>\n            <select\n              .disabled=${recordings.length === 0 ||\n            this.#replayState.isPlaying ||\n            this.isRecording ||\n            this.isToggling}\n              @click=${(e) => e.stopPropagation()}\n              @change=${this.#onRecordingSelected}\n              jslog=${VisualLogging.dropDown('recordings').track({ change: true })}\n            >\n              ${LitHtml.Directives.repeat(values, item => item.value, item => {\n            return html `<option .selected=${item.selected} value=${item.value}>${item.name}</option>`;\n        })}\n            </select>\n            <div class=\"separator\"></div>\n            <devtools-button\n              @click=${this.#onImportRecording}\n              .data=${{\n            variant: \"toolbar\" /* Buttons.Button.Variant.TOOLBAR */,\n            iconName: 'import',\n            title: i18nString(UIStrings.importRecording),\n            jslogContext: 'import-recording',\n        }}\n            ></devtools-button>\n            <devtools-button\n              id='origin'\n              @click=${this.#onExportRecording}\n              on-render=${ComponentHelpers.Directives.nodeRenderedCallback(node => {\n            this.#exportMenuButton = node;\n        })}\n              .data=${{\n            variant: \"toolbar\" /* Buttons.Button.Variant.TOOLBAR */,\n            iconName: 'download',\n            title: i18nString(UIStrings.exportRecording),\n            disabled: !this.currentRecording,\n        }}\n              jslog=${VisualLogging.dropDown('export-recording').track({ click: true })}\n            ></devtools-button>\n            <devtools-menu\n              @menucloserequest=${this.#onExportMenuClosed}\n              @menuitemselected=${this.#onExportOptionSelected}\n              .origin=${this.#getExportMenuButton}\n              .showDivider=${false}\n              .showSelectedItem=${false}\n              .showConnector=${false}\n              .open=${this.exportMenuExpanded}\n            >\n              <devtools-menu-group .name=${i18nString(UIStrings.export)}>\n                ${LitHtml.Directives.repeat(this.#builtInConverters, converter => {\n            return html `\n                    <devtools-menu-item\n                      .value=${converter.getId()}\n                      jslog=${VisualLogging.item(`converter-${Platform.StringUtilities.toKebabCase(converter.getId())}`).track({ click: true })}>\n                      ${converter.getFormatName()}\n                    </devtools-menu-item>\n                  `;\n        })}\n              </devtools-menu-group>\n              <devtools-menu-group .name=${i18nString(UIStrings.exportViaExtensions)}>\n                ${LitHtml.Directives.repeat(this.extensionConverters, converter => {\n            return html `\n                    <devtools-menu-item\n                     .value=${converter.getId()}\n                      jslog=${VisualLogging.item('converter-extension').track({ click: true })}>\n                    ${converter.getFormatName()}\n                    </devtools-menu-item>\n                  `;\n        })}\n                <devtools-menu-item .value=${GET_EXTENSIONS_MENU_ITEM}>\n                  ${i18nString(UIStrings.getExtensions)}\n                </devtools-menu-item>\n              </devtools-menu-group>\n            </devtools-menu>\n            <devtools-button\n              @click=${this.#onDeleteRecording}\n              .data=${{\n            variant: \"toolbar\" /* Buttons.Button.Variant.TOOLBAR */,\n            iconName: 'bin',\n            disabled: !this.currentRecording ||\n                this.#replayState.isPlaying ||\n                this.isRecording ||\n                this.isToggling,\n            title: i18nString(UIStrings.deleteRecording),\n            jslogContext: 'delete-recording',\n        }}\n            ></devtools-button>\n            <div class=\"separator\"></div>\n            <devtools-button\n              @click=${() => this.recordingPlayer?.continue()}\n              .data=${{\n            variant: \"primary_toolbar\" /* Buttons.Button.Variant.PRIMARY_TOOLBAR */,\n            iconName: 'resume',\n            disabled: !this.recordingPlayer ||\n                !this.#replayState.isPausedOnBreakpoint,\n            title: i18nString(UIStrings.continueReplay),\n            jslogContext: 'continue-replay',\n        }}\n            ></devtools-button>\n            <devtools-button\n              @click=${() => this.recordingPlayer?.stepOver()}\n              .data=${{\n            variant: \"toolbar\" /* Buttons.Button.Variant.TOOLBAR */,\n            iconName: 'step-over',\n            disabled: !this.recordingPlayer ||\n                !this.#replayState.isPausedOnBreakpoint,\n            title: i18nString(UIStrings.stepOverReplay),\n            jslogContext: 'step-over',\n        }}\n            ></devtools-button>\n            <div class=\"feedback\">\n              <x-link class=\"x-link\" href=${Components.StartView.FEEDBACK_URL} jslog=${VisualLogging.link('feedback').track({ click: true })}>${i18nString(UIStrings.sendFeedback)}</x-link>\n            </div>\n            <div class=\"separator\"></div>\n            <devtools-shortcut-dialog\n              .data=${{\n            shortcuts: this.#getShortcutsInfo(),\n        }} jslog=${VisualLogging.action('show-shortcuts').track({ click: true })}\n            ></devtools-shortcut-dialog>\n          </div>\n          ${this.importError\n            ? html `<div class='error'>Import error: ${this.importError.message}</div>`\n            : ''}\n          ${this.#renderCurrentPage()}\n        </div>\n      `;\n        // clang-format on\n    }\n};\n__decorate([\n    state()\n], RecorderController.prototype, \"currentRecordingSession\", void 0);\n__decorate([\n    state()\n], RecorderController.prototype, \"currentRecording\", void 0);\n__decorate([\n    state()\n], RecorderController.prototype, \"currentStep\", void 0);\n__decorate([\n    state()\n], RecorderController.prototype, \"recordingError\", void 0);\n__decorate([\n    state()\n], RecorderController.prototype, \"isRecording\", void 0);\n__decorate([\n    state()\n], RecorderController.prototype, \"isToggling\", void 0);\n__decorate([\n    state()\n], RecorderController.prototype, \"recordingPlayer\", void 0);\n__decorate([\n    state()\n], RecorderController.prototype, \"lastReplayResult\", void 0);\n__decorate([\n    state()\n], RecorderController.prototype, \"currentPage\", void 0);\n__decorate([\n    state()\n], RecorderController.prototype, \"previousPage\", void 0);\n__decorate([\n    state()\n], RecorderController.prototype, \"sections\", void 0);\n__decorate([\n    state()\n], RecorderController.prototype, \"settings\", void 0);\n__decorate([\n    state()\n], RecorderController.prototype, \"importError\", void 0);\n__decorate([\n    state()\n], RecorderController.prototype, \"exportMenuExpanded\", void 0);\n__decorate([\n    state()\n], RecorderController.prototype, \"extensionConverters\", void 0);\n__decorate([\n    state()\n], RecorderController.prototype, \"replayExtensions\", void 0);\n__decorate([\n    state()\n], RecorderController.prototype, \"viewDescriptor\", void 0);\nRecorderController = __decorate([\n    customElement('devtools-recorder-controller')\n], RecorderController);\nexport { RecorderController };\n//# sourceMappingURL=RecorderController.js.map","// Copyright 2023 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\nimport * as UI from '../../ui/legacy/legacy.js';\nimport * as VisualLogging from '../../ui/visual_logging/visual_logging.js';\nimport { RecorderController } from './RecorderController.js';\nlet recorderPanelInstance;\nexport class RecorderPanel extends UI.Panel.Panel {\n    static panelName = 'chrome-recorder';\n    #controller;\n    constructor() {\n        super(RecorderPanel.panelName);\n        this.element.setAttribute('jslog', `${VisualLogging.panel('chrome-recorder').track({ resize: true })}`);\n        this.#controller = new RecorderController();\n        this.contentElement.append(this.#controller);\n        this.contentElement.style.minWidth = '400px';\n    }\n    static instance(opts = { forceNew: null }) {\n        const { forceNew } = opts;\n        if (!recorderPanelInstance || forceNew) {\n            recorderPanelInstance = new RecorderPanel();\n        }\n        return recorderPanelInstance;\n    }\n    wasShown() {\n        UI.Context.Context.instance().setFlavor(RecorderPanel, this);\n        // Focus controller so shortcuts become active\n        this.#controller.focus();\n    }\n    willHide() {\n        UI.Context.Context.instance().setFlavor(RecorderPanel, null);\n    }\n    handleActions(actionId) {\n        this.#controller.handleActions(actionId);\n    }\n    isActionPossible(actionId) {\n        return this.#controller.isActionPossible(actionId);\n    }\n}\nexport class ActionDelegate {\n    handleAction(_context, actionId) {\n        void (async () => {\n            await UI.ViewManager.ViewManager.instance().showView(RecorderPanel.panelName);\n            const view = UI.ViewManager.ViewManager.instance().view(RecorderPanel.panelName);\n            if (view) {\n                const widget = (await view.widget());\n                widget.handleActions(actionId);\n            }\n        })();\n        return true;\n    }\n}\n//# sourceMappingURL=RecorderPanel.js.map"],"file":"assets/recorder-DTpf9ZRT.js"}