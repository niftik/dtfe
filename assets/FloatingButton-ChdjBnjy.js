import{dd as d,de as x,an as a,cP as w,ap as l,bv as m,ao as E,ba as I,aU as S,df as A,cO as g,dg as L,bM as b,dh as k,aO as T,aP as M}from"./inspector-CyOA7R9n.js";import{d as U}from"./Debouncer-BW_30p93.js";import{C as c,s as B}from"./swatchPopover.css-CdLS3b97.js";import{B as y}from"./BezierUI-Cu0bTMGR.js";class u{static parse(e){const t=c.parse(e);return t||d.parse(e)||null}}const Y=x,O=500;class f{#t;#e;#s;#i;#r;#a;#n;constructor({bezier:e,container:t,onBezierChange:i}){this.#e=e,this.#t=new y({width:150,height:250,marginTop:50,controlPointRadius:7,shouldDrawLine:!0}),this.#s=a(t,"svg","bezier-curve"),this.#n=i,w(this.#s,this.dragStart.bind(this),this.dragMove.bind(this),this.dragEnd.bind(this),"default")}dragStart(e){this.#i=new l(e.x,e.y);const t=this.#t;this.#r=new l(m((e.offsetX-t.radius)/t.curveWidth(),0,1),(t.curveHeight()+t.marginTop+t.radius-e.offsetY)/t.curveHeight());const i=this.#r.distanceTo(this.#e.controlPoints[0])<this.#r.distanceTo(this.#e.controlPoints[1]);return this.#a=i?0:1,this.#e.controlPoints[this.#a]=this.#r,this.#n(this.#e),e.consume(!0),!0}updateControlPosition(e,t){if(this.#i===void 0||this.#r===void 0||this.#a===void 0)return;const i=(e-this.#i.x)/this.#t.curveWidth(),s=(t-this.#i.y)/this.#t.curveHeight(),n=new l(m(this.#r.x+i,0,1),this.#r.y-s);this.#e.controlPoints[this.#a]=n}dragMove(e){this.updateControlPosition(e.x,e.y),this.#n(this.#e)}dragEnd(e){this.updateControlPosition(e.x,e.y),this.#n(this.#e)}setBezier(e){this.#e=e,this.draw()}draw(){this.#t.drawCurve(this.#e,this.#s)}}class P{params;renderedPositions;constructor(e){this.params=e}#t(){return this.params.width-this.params.pointRadius*2}#e(){return this.params.height-this.params.pointRadius*2-this.params.marginTop*2}#s(e,t,i,s){const n=a(e,"circle","bezier-control-circle");n.setAttribute("jslog",`${E("bezier.linear-control-circle").track({drag:!0,dblclick:!0})}`),n.setAttribute("data-point-index",String(s)),n.setAttribute("cx",String(t)),n.setAttribute("cy",String(i)),n.setAttribute("r",String(this.params.pointRadius))}timingPointToPosition(e){return{x:e.input/100*this.#t()+this.params.pointRadius,y:(1-e.output)*this.#e()+this.params.pointRadius}}positionToTimingPoint(e){return{input:(e.x-this.params.pointRadius)/this.#t()*100,output:1-(e.y-this.params.pointRadius)/this.#e()}}draw(e,t){t.setAttribute("width",String(this.#t())),t.setAttribute("height",String(this.#e())),t.removeChildren();const i=a(t,"g"),s=e.points().map(r=>this.timingPointToPosition(r));this.renderedPositions=s;let n=s[0];for(let r=1;r<s.length;r++){const h=s[r],p=a(i,"path","bezier-path linear-path");p.setAttribute("d",`M ${n.x} ${n.y} L ${h.x} ${h.y}`),p.setAttribute("data-line-index",String(r)),n=h}for(let r=0;r<s.length;r++){const h=s[r];this.#s(i,h.x,h.y,r)}}}class v{#t;#e;#s;#i;#r;#a;#n;#o;constructor({model:e,container:t,onChange:i}){this.#t=e,this.#e=i,this.#s=new P({width:150,height:250,pointRadius:7,marginTop:50}),this.#o=a(t,"svg","bezier-curve linear"),w(this.#o,this.#l.bind(this),this.#u.bind(this),this.#p.bind(this),"default")}#d(e,t){const i=this.#s.positionToTimingPoint({x:e.offsetX,y:e.offsetY});this.#t.addPoint(i,t),this.#i=void 0,this.#n=void 0}#c(e,t){if(this.#i=t,this.#n={x:e.x,y:e.y},clearTimeout(this.#r),this.#a===this.#i){this.#t.removePoint(this.#i),this.#a=void 0,this.#i=void 0,this.#n=void 0;return}this.#a=this.#i,this.#r=window.setTimeout(()=>{this.#a=void 0},O)}#l(e){return e.target instanceof SVGElement?e.target.dataset.lineIndex!==void 0?(this.#d(e,Number(e.target.dataset.lineIndex)),e.consume(!0),!0):e.target.dataset.pointIndex!==void 0?(this.#c(e,Number(e.target.dataset.pointIndex)),e.consume(!0),!0):!1:!1}#h(e,t){if(this.#i===void 0||this.#n===void 0)return;const i=this.#s.renderedPositions?.[this.#i];if(!i)return;const s=e-this.#n.x,n=t-this.#n.y;this.#n={x:e,y:t};const r={x:i.x+s,y:i.y+n};this.#t.setPoint(this.#i,this.#s.positionToTimingPoint(r))}#u(e){this.#h(e.x,e.y),this.#e(this.#t)}#p(e){this.#h(e.x,e.y),this.#e(this.#t)}setCSSLinearEasingModel(e){this.#t=e,this.draw()}draw(){this.#s.draw(this.#t,this.#o)}}class R{#t;#e;constructor(){this.#t=new P({width:40,height:40,marginTop:0,pointRadius:2}),this.#e=new y({width:40,height:40,marginTop:0,controlPointRadius:2,shouldDrawLine:!1})}draw(e,t){e instanceof c?this.#t.draw(e,t):e instanceof d&&this.#e.drawCurve(e,t)}}class ${#t;#e;#s;#i;#r;#a;#n;constructor({model:e,onChange:t}){this.#t=document.createElement("div"),this.#t.className="animation-timing-ui",this.#t.style.width="150px",this.#t.style.height="250px",this.#e=document.createElement("div"),this.#e.classList.add("bezier-ui-container"),this.#s=document.createElement("div"),this.#s.classList.add("linear-easing-ui-container"),this.#t.appendChild(this.#e),this.#t.appendChild(this.#s),this.#i=e,this.#r=t,this.#i instanceof d?this.#a=new f({bezier:this.#i,container:this.#e,onBezierChange:this.#r}):this.#i instanceof c&&(this.#n=new v({model:this.#i,container:this.#s,onChange:this.#r}))}element(){return this.#t}setModel(e){this.#i=e,this.#i instanceof d?this.#a?this.#a.setBezier(this.#i):this.#a=new f({bezier:this.#i,container:this.#e,onBezierChange:this.#r}):this.#i instanceof c&&(this.#n?this.#n.setCSSLinearEasingModel(this.#i):this.#n=new v({model:this.#i,container:this.#s,onChange:this.#r})),this.draw()}draw(){this.#s.classList.toggle("hidden",!(this.#i instanceof c)),this.#e.classList.toggle("hidden",!(this.#i instanceof d)),this.#a&&this.#a.draw(),this.#n&&this.#n.draw()}}const D=300;class V extends I(S){model;previewElement;previewOnion;outerContainer;selectedCategory;presetsContainer;presetUI;presetCategories;animationTimingUI;header;label;previewAnimation;debouncedStartPreviewAnimation;constructor(e){super(!0),this.model=e,this.contentElement.tabIndex=0,this.contentElement.setAttribute("jslog",`${A("bezierEditor").parent("mapped").track({keydown:"Enter|Escape"})}`),this.setDefaultFocusedElement(this.contentElement),this.element.style.overflowY="auto",this.previewElement=this.contentElement.createChild("div","bezier-preview-container"),this.previewElement.setAttribute("jslog",`${g().track({click:!0})}`),this.previewElement.createChild("div","bezier-preview-animation"),this.previewElement.addEventListener("click",this.startPreviewAnimation.bind(this)),this.previewOnion=this.contentElement.createChild("div","bezier-preview-onion"),this.previewOnion.setAttribute("jslog",`${g().track({click:!0})}`),this.previewOnion.addEventListener("click",this.startPreviewAnimation.bind(this)),this.outerContainer=this.contentElement.createChild("div","bezier-container"),this.selectedCategory=null,this.presetsContainer=this.outerContainer.createChild("div","bezier-presets"),this.presetUI=new R,this.presetCategories=[];for(let s=0;s<C.length;s++){const n=this.createCategory(C[s]);n&&(this.presetCategories[s]=n,this.presetsContainer.appendChild(this.presetCategories[s].icon))}this.debouncedStartPreviewAnimation=U(this.startPreviewAnimation.bind(this),D),this.animationTimingUI=new $({model:this.model,onChange:s=>{this.setModel(s),this.onchange(),this.unselectPresets(),this.debouncedStartPreviewAnimation()}}),this.animationTimingUI.element().setAttribute("jslog",`${L().track({click:!0,drag:!0})}`),this.outerContainer.appendChild(this.animationTimingUI.element()),this.header=this.contentElement.createChild("div","bezier-header");const t=this.createPresetModifyIcon(this.header,"bezier-preset-minus","M 12 6 L 8 10 L 12 14");t.addEventListener("click",this.presetModifyClicked.bind(this,!1)),t.setAttribute("jslog",`${b("bezier.prev-preset").track({click:!0})}`);const i=this.createPresetModifyIcon(this.header,"bezier-preset-plus","M 8 6 L 12 10 L 8 14");i.addEventListener("click",this.presetModifyClicked.bind(this,!0)),i.setAttribute("jslog",`${b("bezier.next-preset").track({click:!0})}`),this.label=this.header.createChild("span","source-code bezier-display-value")}setModel(e){this.model=e,this.animationTimingUI?.setModel(this.model),this.updateUI()}wasShown(){this.registerCSSFiles([B]),this.unselectPresets();for(const e of this.presetCategories)for(let t=0;t<e.presets.length;t++)this.model.asCSSText()===e.presets[t].value&&(e.presetIndex=t,this.presetCategorySelected(e));this.updateUI(),this.startPreviewAnimation()}onchange(){this.updateUI(),this.dispatchEventToListeners("BezierChanged",this.model.asCSSText())}updateUI(){const e=this.selectedCategory?this.selectedCategory.presets[this.selectedCategory.presetIndex].name:this.model.asCSSText().replace(/\s(-\d\.\d)/g,"$1");this.label.textContent=e,this.animationTimingUI?.draw()}createCategory(e){const t=u.parse(e[0].value);if(!t)return null;const i=document.createElement("div");i.classList.add("bezier-preset-category"),i.setAttribute("jslog",`${k().track({click:!0}).context(e[0].name)}`);const s=a(i,"svg","bezier-preset monospace"),n={presets:e,presetIndex:0,icon:i};return this.presetUI.draw(t,s),s.addEventListener("click",this.presetCategorySelected.bind(this,n)),n}createPresetModifyIcon(e,t,i){const s=a(e,"svg","bezier-preset-modify "+t);return s.setAttribute("width","20"),s.setAttribute("height","20"),a(s,"path").setAttribute("d",i),s}unselectPresets(){for(const e of this.presetCategories)e.icon.classList.remove("bezier-preset-selected");this.selectedCategory=null,this.header.classList.remove("bezier-header-active")}presetCategorySelected(e,t){if(this.selectedCategory===e)return;this.unselectPresets(),this.header.classList.add("bezier-header-active"),this.selectedCategory=e,this.selectedCategory.icon.classList.add("bezier-preset-selected");const i=u.parse(e.presets[e.presetIndex].value);i&&(this.setModel(i),this.onchange(),this.startPreviewAnimation()),t&&t.consume(!0)}presetModifyClicked(e,t){if(this.selectedCategory===null)return;const i=this.selectedCategory.presets.length;this.selectedCategory.presetIndex=(this.selectedCategory.presetIndex+(e?1:-1)+i)%i;const s=this.selectedCategory.presets[this.selectedCategory.presetIndex].value,n=u.parse(s);n&&(this.setModel(n),this.onchange(),this.startPreviewAnimation())}startPreviewAnimation(){this.previewOnion.removeChildren(),this.previewAnimation&&this.previewAnimation.cancel();const e=1600,t=20,i=[{offset:0,transform:"translateX(0px)",opacity:1},{offset:1,transform:"translateX(218px)",opacity:1}];this.previewAnimation=this.previewElement.animate(i,{easing:this.model.asCSSText(),duration:e}),this.previewOnion.removeChildren();for(let s=0;s<=t;s++){const r=this.previewOnion.createChild("div","bezier-preview-animation").animate([{transform:"translateX(0px)",easing:this.model.asCSSText()},{transform:"translateX(218px)"}],{duration:e,fill:"forwards"});r.pause(),r.currentTime=e*s/t}}}const C=[[{name:"linear",value:"linear"},{name:"elastic",value:"linear(0 0%, 0.22 2.1%, 0.86 6.5%, 1.11 8.6%, 1.3 10.7%, 1.35 11.8%, 1.37 12.9%, 1.37 13.7%, 1.36 14.5%, 1.32 16.2%, 1.03 21.8%, 0.94 24%, 0.89 25.9%, 0.88 26.85%, 0.87 27.8%, 0.87 29.25%, 0.88 30.7%, 0.91 32.4%, 0.98 36.4%, 1.01 38.3%, 1.04 40.5%, 1.05 42.7%, 1.05 44.1%, 1.04 45.7%, 1 53.3%, 0.99 55.4%, 0.98 57.5%, 0.99 60.7%, 1 68.1%, 1.01 72.2%, 1 86.7%, 1 100%)"},{name:"bounce",value:"linear(0 0%, 0 2.27%, 0.02 4.53%, 0.04 6.8%, 0.06 9.07%, 0.1 11.33%, 0.14 13.6%, 0.25 18.15%, 0.39 22.7%, 0.56 27.25%, 0.77 31.8%, 1 36.35%, 0.89 40.9%, 0.85 43.18%, 0.81 45.45%, 0.79 47.72%, 0.77 50%, 0.75 52.27%, 0.75 54.55%, 0.75 56.82%, 0.77 59.1%, 0.79 61.38%, 0.81 63.65%, 0.85 65.93%, 0.89 68.2%, 1 72.7%, 0.97 74.98%, 0.95 77.25%, 0.94 79.53%, 0.94 81.8%, 0.94 84.08%, 0.95 86.35%, 0.97 88.63%, 1 90.9%, 0.99 93.18%, 0.98 95.45%, 0.99 97.73%, 1 100%)"},{name:"emphasized",value:"linear(0 0%, 0 1.8%, 0.01 3.6%, 0.03 6.35%, 0.07 9.1%, 0.13 11.4%, 0.19 13.4%, 0.27 15%, 0.34 16.1%, 0.54 18.35%, 0.66 20.6%, 0.72 22.4%, 0.77 24.6%, 0.81 27.3%, 0.85 30.4%, 0.88 35.1%, 0.92 40.6%, 0.94 47.2%, 0.96 55%, 0.98 64%, 0.99 74.4%, 1 86.4%, 1 100%)"}],[{name:"ease-in-out",value:"ease-in-out"},{name:"In Out · Sine",value:"cubic-bezier(0.45, 0.05, 0.55, 0.95)"},{name:"In Out · Quadratic",value:"cubic-bezier(0.46, 0.03, 0.52, 0.96)"},{name:"In Out · Cubic",value:"cubic-bezier(0.65, 0.05, 0.36, 1)"},{name:"Fast Out, Slow In",value:"cubic-bezier(0.4, 0, 0.2, 1)"},{name:"In Out · Back",value:"cubic-bezier(0.68, -0.55, 0.27, 1.55)"}],[{name:"Fast Out, Linear In",value:"cubic-bezier(0.4, 0, 1, 1)"},{name:"ease-in",value:"ease-in"},{name:"In · Sine",value:"cubic-bezier(0.47, 0, 0.75, 0.72)"},{name:"In · Quadratic",value:"cubic-bezier(0.55, 0.09, 0.68, 0.53)"},{name:"In · Cubic",value:"cubic-bezier(0.55, 0.06, 0.68, 0.19)"},{name:"In · Back",value:"cubic-bezier(0.6, -0.28, 0.74, 0.05)"}],[{name:"ease-out",value:"ease-out"},{name:"Out · Sine",value:"cubic-bezier(0.39, 0.58, 0.57, 1)"},{name:"Out · Quadratic",value:"cubic-bezier(0.25, 0.46, 0.45, 0.94)"},{name:"Out · Cubic",value:"cubic-bezier(0.22, 0.61, 0.36, 1)"},{name:"Linear Out, Slow In",value:"cubic-bezier(0, 0, 0.2, 1)"},{name:"Out · Back",value:"cubic-bezier(0.18, 0.89, 0.32, 1.28)"}]],z=new CSSStyleSheet;z.replaceSync(`/*
 * Copyright 2024 The Chromium Authors. All rights reserved.
 * Use of this source code is governed by a BSD-style license that can be
 * found in the LICENSE file.
 */

:host {
  width: fit-content;
  height: fit-content;
}

.floating-button {
  padding: 0;
  margin: 0;
  background: 0;
  border: 0;
  position: relative;
  width: var(--sys-size-8);
  height: var(--sys-size-8);
  background-color: var(--sys-color-surface);
  box-shadow: var(--sys-elevation-level2);
  border-radius: var(--sys-shape-corner-extra-small);
  display: flex;
  justify-content: center;
  align-items: center;

  :host-context(.theme-with-dark-background) & {
    border: 1px solid var(--sys-color-neutral-outline);
  }

  & .icon {
    width: var(--sys-size-7);
    height: var(--sys-size-7);
  }

  &:not(:disabled):hover::after,
  &:not(:disabled):hover::before {
    content: "";
    height: 100%;
    width: 100%;
    border-radius: inherit;
    position: absolute;
    top: 0;
    left: 0;
  }

  &:not(:disabled):hover::after {
    background-color: var(--sys-color-state-hover-on-subtle);
  }

  &:not(:disabled):active::before {
    background-color: var(--sys-color-state-ripple-neutral-on-subtle);
  }

  &:focus-visible {
    outline: 2px solid var(--sys-color-state-focus-ring);
    outline-offset: 2px;
  }

  &:disabled .icon {
    color: var(--sys-color-state-disabled);
  }
}

/*# sourceURL=floatingButton.css */
`);const{html:N}=M;class j extends HTMLElement{#t=this.attachShadow({mode:"open"});#e;constructor(e){super(),this.#e=e}connectedCallback(){this.#t.adoptedStyleSheets=[z],this.#s()}set data(e){this.#e=e}#s(){T(N`<button class="floating-button" .disabled=${!!this.#e.disabled}><devtools-icon class="icon" name=${this.#e.iconName}></devtools-icon></button>`,this.#t,{host:this})}}customElements.define("devtools-floating-button",j);export{u as A,V as B,j as F,Y as L};
//# sourceMappingURL=FloatingButton-ChdjBnjy.js.map
