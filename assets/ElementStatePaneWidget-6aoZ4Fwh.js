import{aq as Zt,aW as Rr,aY as Dr,jt as Fr,dB as ls,bk as et,aP as ds,f3 as cs,ju as ft,aU as gt,jv as hs,i as he,as as se,b as G,g as q,l as de,iq as $e,r as ee,bu as Ce,cH as T,u as L,dR as A,cB as Br,aR as Vr,fd as fe,dQ as P,aS as _r,jw as Li,c$ as wt,is as N,jx as Hr,dd as Ur,jy as kn,jz as $t,jA as jr,jB as yt,jC as us,h as xe,cC as ii,bi as Me,bS as w,ct as en,cJ as si,fk as ps,jD as $r,jE as Wr,hw as oi,jF as ms,A as We,jG as fs,jH as zr,jI as Gr,jJ as Kr,jK as Yr,jL as ri,aj as O,bE as qr,c7 as Oe,dj as ve,cA as Mn,b_ as Xr,bh as gs,bq as ue,b0 as U,I as Le,eZ as Ae,cm as je,f0 as Ai,cc as ze,V as Ve,jM as Qr,jN as Jr,cR as ai,aK as ki,jO as Wt,jP as Zr,jQ as ea,jR as ta,cb as li,aZ as di,b2 as ys,bl as tn,bG as na,e8 as ia,c3 as sa,bJ as bs,jS as ge,bN as On,bA as Ge,ef as Es,gR as oa,jT as Tt,hZ as ra,jU as Dt,gZ as Mi,jV as dt,gY as zt,jW as Nt,gT as aa,ec as Je,ed as Gt,jX as la,jY as da,jZ as ca,j_ as ha,j$ as ua,ba as Cs,e6 as pa,c4 as tt,aX as ma,eP as fa,dy as ga,iy as Ss,k0 as ci,at as ya,d0 as hi,bH as ba,eB as Oi,i1 as Ke,dX as Rn,ir as Ea,e_ as ws,k1 as Ca,cM as Ri,k2 as ui,gS as Sa,k3 as wa,k4 as vs,k5 as va,k6 as xa,b4 as ye,ex as xs,k7 as Ta,d2 as bt,cv as Na,k8 as Di,e as Pa,ha as Fi,b3 as Ia,hV as La,hd as Aa,j as ka,eb as Ts,hb as Ft,em as Ma,d_ as Oa,bZ as Ra,k9 as Ye,aJ as Pt,en as Da,fA as Fa,X as Ba,U as Va,eh as _a,fD as Ha,fE as Ua,ej as ja,ka as $a,ag as Bi,cY as hn,kb as It,b5 as Vi,cZ as un,d3 as Wa,kc as za,kd as Ga,cn as Ka,gf as Ya,bD as qa,cw as Dn,gX as Lt,cp as Xa,ke as Qa,C as Ns,kf as pn,bd as Ja,cd as _i,fX as Za,kg as el,bm as be,iX as Hi,g4 as tl,bz as nl,kh as il,ki as sl,eX as Ui,ck as ol,a as rl,c5 as Ps,kj as ji,dG as al,kk as ll,jo as dl,jp as cl,c9 as hl,kl as ul,eR as $i,km as pl,bw as Fn,kn as Wi,dk as ml}from"./inspector-CyOA7R9n.js";import{E as fl}from"./EventListenersView-ZykD45RN.js";import{i as gl,U as at}from"./UserVisibleError-YMOzvDSx.js";import{T as pi,d as yl}from"./TreeOutline-CeMGdnsP.js";import{m as bl,n as El,F as Cl,G as Sl,o as wl,p as At,q as vl,l as xl,r as Tl,s as Nl,t as Pl,u as Ee,R as pe,v as Il,w as Ll,x as Al,y as kl,z as Ml,B as Ol}from"./StylePropertyEditor-BEGc-Ch4.js";import{S as Rl,i as Dl}from"./cssOverview.css-C_I9lWrq.js";import{A as Is,L as Fl,B as Bl,F as Vl}from"./FloatingButton-ChdjBnjy.js";import{d as _l,a as nt,c as Ls,e as Hl,F as Ul,f as jl,g as $l,h as Wl,L as As,i as zl,b as vt,j as mi,V as ks,k as zi,B as Gl,l as Ms,m as Kl,n as Yl}from"./swatchPopover.css-CdLS3b97.js";import{l as Be}from"./Helper-Wu6lA3aw.js";import{P as Kt}from"./PopoverHelper-fEnxzApM.js";import{w as kt}from"./WorkspaceDiff-_8IW6Oi2.js";import{P as Bt,b as ql}from"./utils-C4_HKhgT.js";import{A as Xl}from"./emulation-CRgKT_2f.js";class Ql extends Zt{popover;hideProxy;boundOnKeyDown;boundFocusOut;isHidden;anchorElement;view;hiddenCallback;focusRestorer;constructor(){super(),this.popover=new Rr,this.popover.setSizeBehavior("MeasureContent"),this.popover.setMarginBehavior("Arrow"),this.popover.element.addEventListener("mousedown",e=>e.consume(),!1),this.hideProxy=this.hide.bind(this,!0),this.boundOnKeyDown=this.onKeyDown.bind(this),this.boundFocusOut=this.onFocusOut.bind(this),this.isHidden=!0,this.anchorElement=null}onFocusOut(e){const t=e.relatedTarget;this.isHidden||!t||!this.view||t.isSelfOrDescendant(this.view.contentElement)||this.hideProxy()}setAnchorElement(e){this.anchorElement=e}isShowing(e){return this.popover.isShowing()&&(e&&this.view===e||!e)}show(e,t,n){if(this.popover.isShowing()){if(this.anchorElement===t)return;this.hide(!0)}Dr(e.contentElement,t),this.popover.registerCSSFiles([_l]),this.dispatchEventToListeners("WillShowPopover"),this.isHidden=!1,this.anchorElement=t,this.view=e,this.hiddenCallback=n,this.reposition(),e.focus();const i=this.popover.element.ownerDocument;i.addEventListener("mousedown",this.hideProxy,!1),i.defaultView&&i.defaultView.addEventListener("resize",this.hideProxy,!1),this.view.contentElement.addEventListener("keydown",this.boundOnKeyDown,!1)}reposition(){if(!(this.isHidden||!this.view)){if(this.view.contentElement.removeEventListener("focusout",this.boundFocusOut,!1),this.view.show(this.popover.contentElement),this.anchorElement){let e=this.anchorElement.boxInWindow();if(nt.isColorSwatch(this.anchorElement)){const t=this.anchorElement;if(!t.anchorBox)return;e=t.anchorBox}this.popover.setContentAnchorBox(e),this.popover.show(this.anchorElement.ownerDocument)}this.view.contentElement.addEventListener("focusout",this.boundFocusOut,!1),this.focusRestorer||(this.focusRestorer=new Fr(this.view))}}hide(e){if(this.isHidden)return;const t=this.popover.element.ownerDocument;this.isHidden=!0,this.popover.hide(),t.removeEventListener("mousedown",this.hideProxy,!1),t.defaultView&&t.defaultView.removeEventListener("resize",this.hideProxy,!1),this.hiddenCallback&&this.hiddenCallback.call(null,!!e),this.focusRestorer&&this.focusRestorer.restore(),this.anchorElement=null,this.view&&(this.view.detach(),this.view.contentElement.removeEventListener("keydown",this.boundOnKeyDown,!1),this.view.contentElement.removeEventListener("focusout",this.boundFocusOut,!1),delete this.view)}onKeyDown(e){if(e.key==="Enter"){this.hide(!0),e.consume(!0);return}e.key===ls&&(this.hide(!1),e.consume(!0))}}const{html:Jl}=ds;function Zl(l){return l.numChildren()===0&&l.role()?.value!=="Iframe"}function Bn(l){const t=et.instance().getFrame(l)?.resourceTreeModel().target().model(cs);if(!t)throw Error("Could not instantiate model for frameId");return t}async function fi(l){const t=await Bn(l).requestRootNode(l);if(!t)throw Error("No accessibility root for frame");return t}function Gi(l){let e;if(l instanceof ft?e=l.body?.frameId():e=l.frameId(),!e)throw Error("No frameId for DOM node");return e}async function Os(l){let e=Gi(l);const n=await Bn(e).requestAndLoadSubTreeToNode(l);if(!n)throw Error("Could not retrieve accessibility node for inspected DOM node");const i=et.instance().getOutermostFrame()?.id;if(!i)return n;for(;e!==i;){const s=await et.instance().getFrame(e)?.getOwnerDOMNodeOrDocument();if(!s)break;e=Gi(s);const r=await Bn(e).requestAndLoadSubTreeToNode(s);n.push(...r||[])}return n}async function ed(l){if(l.role()?.value==="Iframe"){const e=await l.deferredDOMNode()?.resolvePromise();if(!e)throw new Error("Could not find corresponding DOMNode");const t=e.frameOwnerFrameId();if(!t)throw Error("No owner frameId on iframe node");return[await fi(t)]}return l.accessibilityModel().requestAXChildren(l.id(),l.getFrameId()||void 0)}async function gi(l){const e=l;return Zl(l)?[{treeNodeData:e,id:Et(l)}]:[{treeNodeData:e,children:async()=>{const t=await ed(l);return(await Promise.all(t.map(i=>gi(i)))).flat(1)},id:Et(l)}]}function Rs(l){const e=l.treeNodeData,t=e.name()?.value||"",n=e.role()?.value||"",i=e.properties()||[],s=e.ignored(),o=Et(e);return Jl`<devtools-accessibility-tree-node .data=${{name:t,role:n,ignored:s,properties:i,id:o}}></devtools-accessibility-tree-node>`}function Et(l){return l.getFrameId()+"#"+l.id()}const xc=Object.freeze(Object.defineProperty({__proto__:null,accessibilityNodeRenderer:Rs,getNodeAndAncestorsFromDOMNode:Os,getNodeId:Et,getRootNode:fi,sdkNodeToAXTreeNodes:gi},Symbol.toStringTag,{value:"Module"})),Ds=new CSSStyleSheet;Ds.replaceSync(`/**
 * Copyright 2022 The Chromium Authors. All rights reserved.
 * Use of this source code is governed by a BSD-style license that can be
 * found in the LICENSE file.
 */

.accessibility-tree-view-container {
  height: 100%;
  overflow: auto;
}

/*# sourceURL=accessibilityTreeView.css */
`);class Fs extends gt{accessibilityTreeComponent;toggleButton;inspectedDOMNode=null;root=null;constructor(e,t){super(),this.toggleButton=e,this.accessibilityTreeComponent=t;const n=this.contentElement.createChild("div");n.classList.add("accessibility-tree-view-container"),n.setAttribute("jslog",`${hs("full-accessibility")}`),n.appendChild(this.toggleButton),n.appendChild(this.accessibilityTreeComponent),he.instance().observeModels(cs,this,{scoped:!0}),this.accessibilityTreeComponent.addEventListener("itemselected",i=>{const o=i.data.node.treeNodeData;if(!o.isDOMNode())return;const r=o.deferredDOMNode();r&&r.resolve(a=>{a&&(this.inspectedDOMNode=a,k.instance().revealAndSelectNode(a,!0,!1))})}),this.accessibilityTreeComponent.addEventListener("itemmouseover",i=>{i.data.node.treeNodeData.highlightDOMNode()}),this.accessibilityTreeComponent.addEventListener("itemmouseout",()=>{se.hideDOMNodeHighlight()})}async wasShown(){await this.refreshAccessibilityTree(),this.inspectedDOMNode&&await this.loadSubTreeIntoAccessibilityModel(this.inspectedDOMNode),this.registerCSSFiles([Ds])}async refreshAccessibilityTree(){if(!this.root){const e=et.instance().getOutermostFrame()?.id;if(!e)throw Error("No top frame");if(this.root=await fi(e),!this.root)throw Error("No root")}await this.renderTree(),await this.accessibilityTreeComponent.expandRecursively(1)}async renderTree(){if(!this.root)return;const e=await gi(this.root);this.accessibilityTreeComponent.data={defaultRenderer:Rs,tree:e,filter:t=>t.ignored()||t.role()?.value==="generic"&&!t.name()?.value?"FLATTEN":"SHOW"}}async loadSubTreeIntoAccessibilityModel(e){const t=await Os(e),n=t.find(i=>i.backendDOMNodeId()===e.backendNodeId());n&&(await this.accessibilityTreeComponent.expandNodeIds(t.map(i=>i.getFrameId()+"#"+i.id())),await this.accessibilityTreeComponent.focusNodeId(Et(n)))}async revealAndSelectNode(e){e!==this.inspectedDOMNode&&(this.inspectedDOMNode=e,this.isShowing()&&await this.loadSubTreeIntoAccessibilityModel(e))}async selectedNodeChanged(e){this.isShowing()||e===this.inspectedDOMNode||(e.ownerDocument&&(e.nodeName()==="HTML"||e.nodeName()==="BODY")?this.inspectedDOMNode=e.ownerDocument:this.inspectedDOMNode=e)}treeUpdated({data:e}){if(!e.root){this.renderTree();return}const t=et.instance().getOutermostFrame()?.id;if(e.root?.getFrameId()!==t){this.renderTree();return}this.root=e.root,this.accessibilityTreeComponent.collapseAllNodes(),this.refreshAccessibilityTree()}modelAdded(e){e.addEventListener("TreeUpdated",this.treeUpdated,this)}modelRemoved(e){e.removeEventListener("TreeUpdated",this.treeUpdated,this)}}const Tc=Object.freeze(Object.defineProperty({__proto__:null,AccessibilityTreeView:Fs},Symbol.toStringTag,{value:"Module"})),yi={openCubicBezierEditor:"Open cubic bezier editor",openShadowEditor:"Open shadow editor"},td=G("panels/elements/ColorSwatchPopoverIcon.ts",yi),Bs=q.bind(void 0,td);class Vs{treeElement;swatchPopoverHelper;swatch;boundBezierChanged;boundOnScroll;bezierEditor;scrollerElement;originalPropertyText;constructor({treeElement:e,swatchPopoverHelper:t,swatch:n}){this.treeElement=e,this.swatchPopoverHelper=t,this.swatch=n,de.install(this.swatch.iconElement(),Bs(yi.openCubicBezierEditor)),this.swatch.iconElement().addEventListener("click",this.iconClick.bind(this),!1),this.swatch.iconElement().addEventListener("mousedown",i=>i.consume(),!1),this.boundBezierChanged=this.bezierChanged.bind(this),this.boundOnScroll=this.onScroll.bind(this)}iconClick(e){if(e.consume(!0),this.swatchPopoverHelper.isShowing()){this.swatchPopoverHelper.hide(!0);return}const t=Is.parse(this.swatch.bezierText())||Fl;this.bezierEditor=new Bl(t),this.bezierEditor.addEventListener("BezierChanged",this.boundBezierChanged),this.swatchPopoverHelper.show(this.bezierEditor,this.swatch.iconElement(),this.onPopoverHidden.bind(this)),this.scrollerElement=this.swatch.enclosingNodeOrSelfWithClass("style-panes-wrapper"),this.scrollerElement&&this.scrollerElement.addEventListener("scroll",this.boundOnScroll,!1),this.originalPropertyText=this.treeElement.property.propertyText,this.treeElement.parentPane().setEditingStyle(!0);const n=$e.instance().propertyUILocation(this.treeElement.property,!1);n&&ee(n,!0)}bezierChanged(e){this.swatch.setBezierText(e.data),this.treeElement.applyStyleText(this.treeElement.renderedPropertyText(),!1)}onScroll(e){this.swatchPopoverHelper.hide(!0)}onPopoverHidden(e){this.scrollerElement&&this.scrollerElement.removeEventListener("scroll",this.boundOnScroll,!1),this.bezierEditor&&this.bezierEditor.removeEventListener("BezierChanged",this.boundBezierChanged),this.bezierEditor=void 0;const t=e?this.treeElement.renderedPropertyText():this.originalPropertyText||"";this.treeElement.applyStyleText(t,!0),this.treeElement.parentPane().setEditingStyle(!1),delete this.originalPropertyText}}class it extends Zt{treeElement;swatchPopoverHelper;swatch;contrastInfo;boundSpectrumChanged;boundOnScroll;spectrum;scrollerElement;originalPropertyText;constructor(e,t,n){super(),this.treeElement=e,this.swatchPopoverHelper=t,this.swatch=n,this.swatch.addEventListener(Ls.eventName,this.iconClick.bind(this)),this.contrastInfo=null,this.boundSpectrumChanged=this.spectrumChanged.bind(this),this.boundOnScroll=this.onScroll.bind(this)}generateCSSVariablesPalette(){const e=this.treeElement.matchedStyles(),t=this.treeElement.property.ownerStyle,n=e.availableCSSVariables(t),i=[],s=[];for(const o of n){if(o===this.treeElement.property.name)continue;const r=e.computeCSSVariable(t,o);!r||!Ce(r.value)||(i.push(r.value),s.push(o))}return{title:"CSS Variables",mutable:!1,matchUserFormat:!0,colors:i,colorNames:s}}setContrastInfo(e){this.contrastInfo=e}iconClick(e){e.consume(!0),this.showPopover()}async toggleEyeDropper(){await this.spectrum?.toggleColorPicker()}showPopover(){if(this.swatchPopoverHelper.isShowing()){this.swatchPopoverHelper.hide(!0);return}const e=this.swatch.getColor();if(!e)return;this.spectrum=new Rl(this.contrastInfo),this.spectrum.setColor(e),this.spectrum.addPalette(this.generateCSSVariablesPalette()),this.spectrum.addEventListener("SizeChanged",this.spectrumResized,this),this.spectrum.addEventListener("ColorChanged",this.boundSpectrumChanged),this.swatchPopoverHelper.show(this.spectrum,this.swatch,this.onPopoverHidden.bind(this)),this.scrollerElement=this.swatch.enclosingNodeOrSelfWithClass("style-panes-wrapper"),this.scrollerElement&&this.scrollerElement.addEventListener("scroll",this.boundOnScroll,!1),this.originalPropertyText=this.treeElement.property.propertyText,this.treeElement.parentPane().setEditingStyle(!0);const t=$e.instance().propertyUILocation(this.treeElement.property,!1);t&&ee(t,!0),T.instance().setFlavor(it,this),L.colorPickerOpenedFrom(1)}spectrumResized(){this.swatchPopoverHelper.reposition()}async spectrumChanged(e){const t=Ce(e.data);if(!t)return;const n=this.spectrum?this.spectrum.colorName():void 0,i=n&&n.startsWith("--")?`var(${n})`:t.getAuthoredText()??t.asString();this.swatch.renderColor(t);const s=this.swatch.firstElementChild;s&&(s.remove(),this.swatch.createChild("span").textContent=i),i&&this.dispatchEventToListeners("colorchanged",i)}onScroll(e){this.swatchPopoverHelper.hide(!0)}onPopoverHidden(e){this.scrollerElement&&this.scrollerElement.removeEventListener("scroll",this.boundOnScroll,!1),this.spectrum&&this.spectrum.removeEventListener("ColorChanged",this.boundSpectrumChanged),this.spectrum=void 0;const t=e?this.treeElement.renderedPropertyText():this.originalPropertyText||"";this.treeElement.applyStyleText(t,!0),this.treeElement.parentPane().setEditingStyle(!1),delete this.originalPropertyText,T.instance().setFlavor(it,null)}}class _s extends Zt{treeElement;swatchPopoverHelper;shadowSwatch;iconElement;boundShadowChanged;boundOnScroll;cssShadowEditor;scrollerElement;originalPropertyText;constructor(e,t,n){super(),this.treeElement=e,this.swatchPopoverHelper=t,this.shadowSwatch=n,this.iconElement=n.iconElement(),de.install(this.iconElement,Bs(yi.openShadowEditor)),this.iconElement.addEventListener("click",this.iconClick.bind(this),!1),this.iconElement.addEventListener("mousedown",i=>i.consume(),!1),this.boundShadowChanged=this.shadowChanged.bind(this),this.boundOnScroll=this.onScroll.bind(this)}iconClick(e){e.consume(!0),this.showPopover()}showPopover(){if(this.swatchPopoverHelper.isShowing()){this.swatchPopoverHelper.hide(!0);return}this.cssShadowEditor=new Hl,this.cssShadowEditor.setModel(this.shadowSwatch.model()),this.cssShadowEditor.addEventListener("ShadowChanged",this.boundShadowChanged),this.swatchPopoverHelper.show(this.cssShadowEditor,this.iconElement,this.onPopoverHidden.bind(this)),this.scrollerElement=this.iconElement.enclosingNodeOrSelfWithClass("style-panes-wrapper"),this.scrollerElement&&this.scrollerElement.addEventListener("scroll",this.boundOnScroll,!1),this.originalPropertyText=this.treeElement.property.propertyText,this.treeElement.parentPane().setEditingStyle(!0);const e=$e.instance().propertyUILocation(this.treeElement.property,!1);e&&ee(e,!0)}shadowChanged(e){this.dispatchEventToListeners("shadowChanged",e.data)}onScroll(e){this.swatchPopoverHelper.hide(!0)}onPopoverHidden(e){this.scrollerElement&&this.scrollerElement.removeEventListener("scroll",this.boundOnScroll,!1),this.cssShadowEditor&&this.cssShadowEditor.removeEventListener("ShadowChanged",this.boundShadowChanged),this.cssShadowEditor=void 0;const t=e?this.treeElement.renderedPropertyText():this.originalPropertyText||"";this.treeElement.applyStyleText(t,!0),this.treeElement.parentPane().setEditingStyle(!1),delete this.originalPropertyText}}class Hs{treeElementMap;swatchPopoverHelper;section;parentPane;fontEditor;scrollerElement;boundFontChanged;boundOnScroll;boundResized;constructor(e,t){this.treeElementMap=new Map,this.swatchPopoverHelper=e,this.section=t,this.parentPane=null,this.fontEditor=null,this.scrollerElement=null,this.boundFontChanged=this.fontChanged.bind(this),this.boundOnScroll=this.onScroll.bind(this),this.boundResized=this.fontEditorResized.bind(this)}fontChanged(e){const{propertyName:t,value:n}=e.data,i=this.treeElementMap.get(t);this.updateFontProperty(t,n,i)}async updateFontProperty(e,t,n){if(n&&n.treeOutline&&n.valueElement&&n.property.parsedOk&&n.property.range){let i=!1;n.valueElement.textContent=t,n.property.value=t;let s;const o=n.property.name;t.length?s=n.renderedPropertyText():(s="",i=!0,this.fixIndex(n.property.index)),this.treeElementMap.set(o,n),await n.applyStyleText(s,!0),i&&this.treeElementMap.delete(o)}else if(t.length){const i=this.section.addNewBlankProperty();i&&(i.property.name=e,i.property.value=t,i.updateTitle(),await i.applyStyleText(i.renderedPropertyText(),!0),this.treeElementMap.set(i.property.name,i))}this.section.onpopulate(),this.swatchPopoverHelper.reposition()}fontEditorResized(){this.swatchPopoverHelper.reposition()}fixIndex(e){for(const t of this.treeElementMap.values())t.property.index>e&&(t.property.index-=1)}createPropertyValueMap(){const e=new Map;for(const t of this.treeElementMap){const n=t[0],i=t[1];i.property.value.length?e.set(n,i.property.value):this.treeElementMap.delete(n)}return e}registerFontProperty(e){const t=e.property.name;if(this.treeElementMap.has(t)){const n=this.treeElementMap.get(t);(!e.overloaded()||n&&n.overloaded())&&this.treeElementMap.set(t,e)}else this.treeElementMap.set(t,e)}async showPopover(e,t){if(this.swatchPopoverHelper.isShowing()){this.swatchPopoverHelper.hide(!0);return}this.parentPane=t;const n=this.createPropertyValueMap();this.fontEditor=new Ul(n),this.fontEditor.addEventListener("FontChanged",this.boundFontChanged),this.fontEditor.addEventListener("FontEditorResized",this.boundResized),this.swatchPopoverHelper.show(this.fontEditor,e,this.onPopoverHidden.bind(this)),this.scrollerElement=e.enclosingNodeOrSelfWithClass("style-panes-wrapper"),this.scrollerElement&&this.scrollerElement.addEventListener("scroll",this.boundOnScroll,!1),this.parentPane.setEditingStyle(!0)}onScroll(){this.swatchPopoverHelper.hide(!0)}onPopoverHidden(){this.scrollerElement&&this.scrollerElement.removeEventListener("scroll",this.boundOnScroll,!1),this.section.onpopulate(),this.fontEditor&&this.fontEditor.removeEventListener("FontChanged",this.boundFontChanged),this.fontEditor=null,this.parentPane&&this.parentPane.setEditingStyle(!1),this.section.resetToolbars(),this.section.onpopulate()}}const Nc=Object.freeze(Object.defineProperty({__proto__:null,BezierPopoverIcon:Vs,ColorSwatchPopoverIcon:it,FontEditorSectionManager:Hs,ShadowSwatchPopoverHelper:_s},Symbol.toStringTag,{value:"Module"}));class nn extends Zt{nodeInternal;cssModelInternal;eventListeners;frameResizedTimer;computedStylePromise;constructor(){super(),this.nodeInternal=T.instance().flavor(A),this.cssModelInternal=null,this.eventListeners=[],T.instance().addFlavorChangeListener(A,this.onNodeChanged,this)}node(){return this.nodeInternal}cssModel(){return this.cssModelInternal&&this.cssModelInternal.isEnabled()?this.cssModelInternal:null}onNodeChanged(e){this.nodeInternal=e.data,this.updateModel(this.nodeInternal?this.nodeInternal.domModel().cssModel():null),this.onComputedStyleChanged(null)}updateModel(e){if(this.cssModelInternal===e)return;Br(this.eventListeners),this.cssModelInternal=e;const t=e?e.domModel():null,n=e?e.target().model(Vr):null;e&&t&&n&&(this.eventListeners=[e.addEventListener(fe.StyleSheetAdded,this.onComputedStyleChanged,this),e.addEventListener(fe.StyleSheetRemoved,this.onComputedStyleChanged,this),e.addEventListener(fe.StyleSheetChanged,this.onComputedStyleChanged,this),e.addEventListener(fe.FontsUpdated,this.onComputedStyleChanged,this),e.addEventListener(fe.MediaQueryResultChanged,this.onComputedStyleChanged,this),e.addEventListener(fe.PseudoStateForced,this.onComputedStyleChanged,this),e.addEventListener(fe.ModelWasEnabled,this.onComputedStyleChanged,this),t.addEventListener(P.DOMMutated,this.onDOMModelChanged,this),n.addEventListener(_r.FrameResized,this.onFrameResized,this)])}onComputedStyleChanged(e){delete this.computedStylePromise,this.dispatchEventToListeners("ComputedStyleChanged",e?.data??null)}onDOMModelChanged(e){const t=e.data;!this.nodeInternal||this.nodeInternal!==t&&t.parentNode!==this.nodeInternal.parentNode&&!t.isAncestor(this.nodeInternal)||this.onComputedStyleChanged(null)}onFrameResized(){function e(){this.onComputedStyleChanged(null),delete this.frameResizedTimer}this.frameResizedTimer&&clearTimeout(this.frameResizedTimer),this.frameResizedTimer=window.setTimeout(e.bind(this),100)}elementNode(){const e=this.node();return e?e.enclosingElementOrSelf():null}async fetchComputedStyle(){const e=this.elementNode(),t=this.cssModel();if(!e||!t)return null;const n=e.id;if(!n)return null;return this.computedStylePromise||(this.computedStylePromise=t.getComputedStyle(n).then(i.bind(this,e))),this.computedStylePromise;function i(s,o){return s===this.elementNode()&&o?new Us(s,o):null}}}class Us{node;computedStyle;constructor(e,t){this.node=e,this.computedStyle=t}}const Pc=Object.freeze(Object.defineProperty({__proto__:null,ComputedStyle:Us,ComputedStyleModel:nn},Symbol.toStringTag,{value:"Module"})),js=new CSSStyleSheet;js.replaceSync(`/*
 * Copyright (c) 2015 The Chromium Authors. All rights reserved.
 * Use of this source code is governed by a BSD-style license that can be
 * found in the LICENSE file.
 */

.styles-sidebar-pane-toolbar {
  border-bottom: 1px solid var(--sys-color-divider);
  flex-shrink: 0;
}

.styles-sidebar-computed-style-widget {
  min-height: auto;
}

.styles-pane-toolbar {
  width: 100%;
}

/*# sourceURL=computedStyleSidebarPane.css */
`);class st{getLinkElement;getDOMNode;popover;constructor(e,t,n){this.getLinkElement=t,this.getDOMNode=n,this.popover=new Kt(e,this.handleRequest.bind(this),"elements.image-preview"),this.popover.setHasPadding(!0),this.popover.setTimeout(0,100)}handleRequest(e){const t=this.getLinkElement(e);if(!t)return null;const n=mn.get(t);return n?{box:t.boxInWindow(),hide:void 0,show:async i=>{const s=this.getDOMNode(t);if(!s)return!1;const o=await Li.loadDimensionsForNode(s),r=await Li.build(s.domModel().target(),n,!0,{imageAltText:void 0,precomputedFeatures:o,align:"center"});return r&&i.contentElement.appendChild(r),!!r}}:null}hide(){this.popover.hidePopover()}static setImageUrl(e,t){return mn.set(e,t),e}static getImageURL(e){return mn.get(e)}}const mn=new WeakMap,$s=new CSSStyleSheet;$s.replaceSync(`/**
 * Copyright 2016 The Chromium Authors. All rights reserved.
 * Use of this source code is governed by a BSD-style license that can be
 * found in the LICENSE file.
 */

:host {
  user-select: text;
}

.platform-fonts {
  flex-shrink: 0;
}

.font-usage {
  color: var(--sys-color-token-subtle);
  padding-left: 3px;
}

.title {
  padding: 0 5px;
  border-top: 1px solid;
  border-bottom: 1px solid;
  border-color: var(--sys-color-divider);
  white-space: nowrap;
  text-overflow: ellipsis;
  overflow: hidden;
  height: 24px;
  background-color: var(--sys-color-surface2);
  display: flex;
  align-items: center;
}

.font-stats-item {
  padding: 5px 1em;

  div {
    margin-bottom: 2px;
  }

  &:not(:last-child) {
    border-bottom: 1px solid var(--sys-color-divider);
  }
}

/*# sourceURL=platformFontsWidget.css */
`);const Pe={renderedFonts:"Rendered Fonts",familyName:"Family name",postScriptName:"PostScript name",fontOrigin:"Font origin",networkResource:"Network resource",localFile:"Local file",dGlyphs:"{n, plural, =1 {(# glyph)} other {(# glyphs)}}"},nd=G("panels/elements/PlatformFontsWidget.ts",Pe),Mt=q.bind(void 0,nd);class Ws extends wt{sharedModel;sectionTitle;fontStatsSection;constructor(e){super(!0),this.sharedModel=e,this.sharedModel.addEventListener("ComputedStyleChanged",this.update,this),this.sectionTitle=document.createElement("div"),this.sectionTitle.classList.add("title"),this.contentElement.classList.add("platform-fonts"),this.contentElement.appendChild(this.sectionTitle),this.sectionTitle.textContent=Mt(Pe.renderedFonts),this.fontStatsSection=this.contentElement.createChild("div","stats-section")}doUpdate(){const e=this.sharedModel.cssModel(),t=this.sharedModel.node();return!t||!e?Promise.resolve():e.getPlatformFonts(t.id).then(this.refreshUI.bind(this,t))}refreshUI(e,t){if(this.sharedModel.node()!==e)return;this.fontStatsSection.removeChildren();const n=!t||!t.length;if(this.sectionTitle.classList.toggle("hidden",n),!(n||!t)){t.sort(function(i,s){return s.glyphCount-i.glyphCount});for(const i of t){const s=this.fontStatsSection.createChild("div","font-stats-item"),o=s.createChild("div");o.textContent=`${Pe.familyName}: ${i.familyName}`;const r=s.createChild("div");r.textContent=`${Pe.postScriptName}: ${i.postScriptName}`;const a=s.createChild("div"),d=i.isCustomFont?Mt(Pe.networkResource):Mt(Pe.localFile);a.textContent=`${Pe.fontOrigin}: ${d}`;const c=a.createChild("span","font-usage"),h=i.glyphCount;c.textContent=Mt(Pe.dGlyphs,{n:h})}}}wasShown(){super.wasShown(),this.registerCSSFiles([$s])}}const Ic=Object.freeze(Object.defineProperty({__proto__:null,PlatformFontsWidget:Ws},Symbol.toStringTag,{value:"Module"})),D=$t,Q=jr,bi=yt;class Yt{text;node;constructor(e,t){this.text=e,this.node=t}computedText(){return this.text}}class zs extends Q(Yt){accepts(e){return N().isAngleAwareProperty(e)}matches(e,t){if(e.name!=="NumberLiteral")return null;const n=e.getChild("Unit");return!n||!["deg","grad","rad","turn"].includes(t.ast.text(n))?null:new Yt(t.ast.text(e),e)}}function Ki(l,e){if(l.type.name!=="NumberLiteral")return null;const t=e.text(l);return Number(t.substring(0,t.length-e.text(l.getChild("Unit")).length))}class qt{text;node;space;color1;color2;constructor(e,t,n,i,s){this.text=e,this.node=t,this.space=n,this.color1=i,this.color2=s}}class Gs extends Q(qt){accepts(e){return N().isColorAwareProperty(e)}matches(e,t){if(e.name!=="CallExpression"||t.ast.text(e.getChild("Callee"))!=="color-mix")return null;const n=bi("--property",t.getComputedText(e));if(!n)return null;const i=D.declValue(n.tree);if(!i)return null;const s=D.callArgs(i);if(s.length!==3)return null;const[o,r,a]=s;if(o.length<2||n.text(D.stripComments(o).next().value)!=="in"||r.length<1||a.length<1)return null;const d=r.filter(p=>p.type.name==="NumberLiteral"&&n.text(p.getChild("Unit"))==="%"),c=a.filter(p=>p.type.name==="NumberLiteral"&&n.text(p.getChild("Unit"))==="%");if(d.length>1||c.length>1||d[0]&&c[0]&&(Ki(d[0],n)??0)===0&&(Ki(c[0],n)??0)===0)return null;const h=D.callArgs(e);return h.length!==3?null:new qt(t.ast.text(e),e,h[0],h[1],h[2])}}class Vn{url;text;node;constructor(e,t,n){this.url=e,this.text=t,this.node=n}}class Ks extends Q(Vn){matches(e,t){if(e.name!=="CallLiteral")return null;const n=e.getChild("CallTag");if(!n||t.ast.text(n)!=="url")return null;const[,i,s,o]=D.siblings(n);if(t.ast.text(i)!=="("||s.name!=="ParenthesizedContent"&&s.name!=="StringLiteral"||t.ast.text(o)!==")")return null;const r=t.ast.text(s),a=s.name==="StringLiteral"?r.substr(1,r.length-2):r.trim();return new Vn(a,t.ast.text(e),e)}}class _n{text;node;constructor(e,t){this.text=e,this.node=t}}class Ys extends Q(_n){matches(e,t){const n=t.ast.text(e);return e.name==="CallExpression"&&t.ast.text(e.getChild("Callee"))==="linear-gradient"?new _n(n,e):null}accepts(e){return["background","background-image","-webkit-mask-image"].includes(e)}}class _e{text;node;currentColorCallback;computedText;constructor(e,t,n){this.text=e,this.node=t,this.currentColorCallback=n,this.computedText=n}}class sn extends Q(_e){currentColorCallback;constructor(e){super(),this.currentColorCallback=e}accepts(e){return N().isColorAwareProperty(e)}matches(e,t){const n=t.ast.text(e);if(e.name==="ColorLiteral")return new _e(n,e);if(e.name==="ValueName"){if(Hr.has(n))return new _e(n,e);if(n.toLowerCase()==="currentcolor"&&this.currentColorCallback){const i=this.currentColorCallback;return new _e(n,e,()=>i()??n)}}if(e.name==="CallExpression"){const i=e.getChild("Callee");if(i&&t.ast.text(i).match(/^(rgba?|hsla?|hwba?|lab|lch|oklab|oklch|color)$/))return new _e(n,e)}return null}}class Hn{text;node;light;dark;constructor(e,t,n,i){this.text=e,this.node=t,this.light=n,this.dark=i}}class qs extends Q(Hn){accepts(e){return N().isColorAwareProperty(e)}matches(e,t){if(e.name!=="CallExpression"||t.ast.text(e.getChild("Callee"))!=="light-dark")return null;const n=D.callArgs(e);return n.length!==2||n[0].length===0||n[1].length===0?null:new Hn(t.ast.text(e),e,n[0],n[1])}}class ct{text;node;propertyName;constructor(e,t,n){this.text=e,this.node=t,this.propertyName=n}}class He extends Q(ct){static isLinkableNameProperty(e){return["animation","animation-name","font-palette","position-try-fallbacks","position-try"].includes(e)}static identifierAnimationLonghandMap=new Map(Object.entries({normal:"direction",alternate:"direction",reverse:"direction","alternate-reverse":"direction",none:"fill-mode",forwards:"fill-mode",backwards:"fill-mode",both:"fill-mode",running:"play-state",paused:"play-state",infinite:"iteration-count",linear:"easing-function",ease:"easing-function","ease-in":"easing-function","ease-out":"easing-function","ease-in-out":"easing-function"}));matchAnimationNameInShorthand(e,t){const n=t.ast.text(e);if(!He.identifierAnimationLonghandMap.has(n))return new ct(n,e,"animation");const s=D.split(D.siblings(D.declValue(t.ast.tree))).find(d=>d[0].from<=e.from&&d[d.length-1].to>=e.to);if(!s)return null;const o=t.getComputedTextRange(s[0],e),r=bi("--p",o);if(!r)return null;const a=He.identifierAnimationLonghandMap.get(n);for(let d=D.declValue(r.tree);d?.nextSibling;d=d.nextSibling)if(d.name==="ValueName"){const c=He.identifierAnimationLonghandMap.get(r.text(d));if(c&&c===a)return new ct(n,e,"animation")}return null}accepts(e){return He.isLinkableNameProperty(e)}matches(e,t){const{propertyName:n}=t.ast,i=t.ast.text(e),s=e.parent;if(!s)return null;const o=s.name==="Declaration",r=s.name==="ArgList"&&s.prevSibling?.name==="Callee"&&t.ast.text(s.prevSibling)==="var",a=o||r,d=n==="position-try"||n==="position-try-fallbacks";return!n||e.name!=="ValueName"&&e.name!=="VariableName"||!a||e.name==="ValueName"&&d?null:n==="animation"?this.matchAnimationNameInShorthand(e,t):new ct(i,e,n)}}class Un{text;node;constructor(e,t){this.text=e,this.node=t}}class Xs extends Q(Un){accepts(e){return N().isBezierAwareProperty(e)}matches(e,t){const n=t.ast.text(e),i=e.name==="ValueName"&&Ur.KeywordValues.has(n),s=e.name==="CallExpression"&&["cubic-bezier","linear"].includes(t.ast.text(e.getChild("Callee")));return!i&&!s||!Is.parse(n)?null:new Un(n,e)}}class jn{text;node;constructor(e,t){this.text=e,this.node=t}}class Qs extends Q(jn){matches(e,t){return e.name==="StringLiteral"?new jn(t.ast.text(e),e):null}}class $n{text;node;shadowType;constructor(e,t,n){this.text=e,this.node=t,this.shadowType=n}}class Js extends Q($n){accepts(e){return N().isShadowProperty(e)}matches(e,t){if(e.name!=="Declaration")return null;const n=D.siblings(D.declValue(e)),i=t.ast.textRange(n[0],n[n.length-1]);return new $n(i,e,t.ast.propertyName==="text-shadow"?"textShadow":"boxShadow")}}class Wn{text;node;constructor(e,t){this.text=e,this.node=t}}class Zs extends Q(Wn){accepts(e){return N().isFontAwareProperty(e)}matches(e,t){if(e.name==="Declaration")return null;const n=t.ast.propertyName==="font-family"?jl:$l,i=t.ast.text(e);return n.test(i)?new Wn(i,e):null}}class zn{text;node;constructor(e,t){this.text=e,this.node=t}}class eo extends Q(zn){matches(e,t){const n=t.ast.text(e),s=new RegExp(`^${Wl.source}$`).exec(n);return!s||s.index!==0?null:new zn(s[0],e)}}class Vt{text;node;isFlex;constructor(e,t,n){this.text=e,this.node=t,this.isFlex=n}}class Ct extends Q(Vt){static FLEX=["flex","inline-flex","block flex","inline flex"];static GRID=["grid","inline-grid","block grid","inline grid"];accepts(e){return e==="display"}matches(e,t){if(e.name!=="Declaration")return null;const n=D.siblings(D.declValue(e));if(n.length<1)return null;const s=n.filter(o=>o.name!=="Important").map(o=>t.getComputedText(o).trim()).filter(o=>o).join(" ");return Ct.FLEX.includes(s)?new Vt(t.ast.text(e),e,!0):Ct.GRID.includes(s)?new Vt(t.ast.text(e),e,!1):null}}class Gn{text;node;lines;constructor(e,t,n){this.text=e,this.node=t,this.lines=n}}class to extends Q(Gn){accepts(e){return N().isGridAreaDefiningProperty(e)}matches(e,t){if(e.name!=="Declaration"||t.hasUnresolvedVars(e))return null;const n=[];let i=[],s=!1,o=!1;function r(c,h=!1){for(const p of c)if(t.getMatch(p)instanceof us){const g=bi("--property",t.getComputedText(p));if(!g)continue;const f=D.siblings(D.declValue(g.tree));if(f.length===0)continue;f[0].name==="StringLiteral"&&!s||f[0].name==="LineNames"&&!o?(n.push(i),i=[p]):i.push(p),r(f,!0)}else p.name==="BinaryExpression"?r(D.siblings(p.firstChild)):p.name==="StringLiteral"?(h||(s?i.push(p):(n.push(i),i=[p])),o=!0,s=!1):p.name==="LineNames"?(h||(o?i.push(p):(n.push(i),i=[p])),s=!o,o=!o):h||i.push(p)}const a=D.siblings(D.declValue(e));r(a),n.push(i);const d=t.ast.textRange(a[0],a[a.length-1]);return new Gn(d,e,n.filter(c=>c.length>0))}}class _t{text;node;functionName;constructor(e,t,n){this.text=e,this.node=t,this.functionName=n}}class no extends Q(_t){anchorFunction(e,t){if(e.name!=="CallExpression")return null;const n=t.ast.text(e.getChild("Callee"));return n==="anchor"||n==="anchor-size"?n:null}matches(e,t){if(e.name==="VariableName"){let s=e.parent;return!s||s.name!=="ArgList"||(s=s.parent,!s||!this.anchorFunction(s,t))?null:new _t(t.ast.text(e),e,null)}const n=this.anchorFunction(e,t);if(!n)return null;const i=D.children(e.getChild("ArgList"));return n==="anchor"&&i.length<=2||i.find(s=>s.name==="VariableName")?null:new _t(t.ast.text(e),e,n)}}class Kn{text;matching;node;constructor(e,t,n){this.text=e,this.matching=t,this.node=n}}class io extends Q(Kn){accepts(e){return e==="position-anchor"}matches(e,t){if(e.name!=="VariableName")return null;const n=t.ast.text(e);return new Kn(n,t,e)}}class Yn{text;node;property;matchedStyles;constructor(e,t,n,i){this.text=e,this.node=t,this.property=n,this.matchedStyles=i}resolveProperty(){return this.matchedStyles.resolveGlobalKeyword(this.property,this.text)}computedText(){return this.resolveProperty()?.value??null}}class so extends Q(Yn){property;matchedStyles;constructor(e,t){super(),this.property=e,this.matchedStyles=t}matches(e,t){const n=e.parent;if(e.name!=="ValueName"||n?.name!=="Declaration"||Array.from(D.stripComments(D.siblings(D.declValue(n)))).some(s=>!D.equals(s,e)))return null;const i=t.ast.text(e);return kn.isCSSWideKeyword(i)?new Yn(i,e,this.property,this.matchedStyles):null}}class qn{text;node;preamble;fallbacks;constructor(e,t,n,i){this.text=e,this.node=t,this.preamble=n,this.fallbacks=i}}class oo extends Q(qn){accepts(e){return e==="position-try"||e==="position-try-fallbacks"}matches(e,t){if(e.name!=="Declaration")return null;let n=[];const i=D.siblings(D.declValue(e)),s=D.split(i);if(t.ast.propertyName==="position-try")for(const[r,a]of s[0].entries()){const d=t.getComputedText(a);if(kn.isCSSWideKeyword(d))return null;if(kn.isPositionTryOrderKeyword(d)){n=s[0].splice(0,r+1);break}}const o=t.ast.textRange(i[0],i[i.length-1]);return new qn(o,e,n,s)}}const Lc=Object.freeze(Object.defineProperty({__proto__:null,AnchorFunctionMatch:_t,AnchorFunctionMatcher:no,AngleMatch:Yt,AngleMatcher:zs,BezierMatch:Un,BezierMatcher:Xs,CSSWideKeywordMatch:Yn,CSSWideKeywordMatcher:so,ColorMatch:_e,ColorMatcher:sn,ColorMixMatch:qt,ColorMixMatcher:Gs,FlexGridMatch:Vt,FlexGridMatcher:Ct,FontMatch:Wn,FontMatcher:Zs,GridTemplateMatch:Gn,GridTemplateMatcher:to,LengthMatch:zn,LengthMatcher:eo,LightDarkColorMatch:Hn,LightDarkColorMatcher:qs,LinearGradientMatch:_n,LinearGradientMatcher:Ys,LinkableNameMatch:ct,LinkableNameMatcher:He,PositionAnchorMatch:Kn,PositionAnchorMatcher:io,PositionTryMatch:qn,PositionTryMatcher:oo,ShadowMatch:$n,ShadowMatcher:Js,StringMatch:jn,StringMatcher:Qs,URLMatch:Vn,URLMatcher:Ks},Symbol.toStringTag,{value:"Module"})),id=["Layout","Text","Appearance","Animation","CSS Variables","Grid","Flex","Table","Generated Content","Other"],sd=new Map([["Layout",["display","margin","padding","height","width","position","top","right","bottom","left","z-index","float","clear","overflow","resize","clip","visibility","box-sizing","align-content","align-items","align-self","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","justify-content","order","inline-size","block-size","min-inline-size","min-block-size","max-inline-size","max-block-size","min-width","max-width","min-height","max-height"]],["Text",["font","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","font-smoothing","direction","tab-size","text-align","text-align-last","text-decoration","text-decoration-color","text-decoration-line","text-decoration-style","text-indent","text-justify","text-overflow","text-shadow","text-transform","text-size-adjust","line-height","vertical-align","letter-spacing","word-spacing","white-space","word-break","word-wrap"]],["Appearance",["color","outline","outline-color","outline-offset","outline-style","Outline-width","border","border-image","background","cursor","box-shadow","≈","tap-highlight-color"]],["Animation",["animation","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","transition","transition-delay","transition-duration","transition-property","transition-timing-function"]],["Grid",["grid","grid-column","grid-row","order","place-items","place-content","place-self"]],["Flex",["flex","order","place-items","place-content","place-self"]],["Table",["border-collapse","border-spacing","caption-side","empty-cells","table-layout"]],["Generated Content",["content","quotes","counter-reset","counter-increment"]]]),ut=new Map;for(const[l,e]of sd)for(const t of e)ut.has(t)||ut.set(t,[]),ut.get(t).push(l);const Yi=l=>ut.has(l)?ut.get(l):l.startsWith("--")?["CSS Variables"]:[],od=l=>{const e=N(),t=e.canonicalPropertyName(l),n=Yi(t);if(n.length>0)return n;const i=e.getShorthands(t);if(i)for(const s of i){const o=Yi(s);if(o.length>0)return o}return["Other"]};class Ei extends gt{computedStyleModelInternal;updateThrottler;updateWhenVisible;constructor(e){super(!0,e),this.element.classList.add("flex-none"),this.computedStyleModelInternal=new nn,this.computedStyleModelInternal.addEventListener("ComputedStyleChanged",this.onCSSModelChanged,this),this.updateThrottler=new xe(100),this.updateWhenVisible=!1}node(){return this.computedStyleModelInternal.node()}cssModel(){return this.computedStyleModelInternal.cssModel()}computedStyleModel(){return this.computedStyleModelInternal}async doUpdate(){}update(){if(this.updateWhenVisible=!this.isShowing(),this.updateWhenVisible)return;this.updateThrottler.schedule(e.bind(this));function e(){return this.isShowing()?this.doUpdate():Promise.resolve()}}wasShown(){super.wasShown(),this.updateWhenVisible&&this.update()}onCSSModelChanged(e){}}const Ac=Object.freeze(Object.defineProperty({__proto__:null,ElementsSidebarPane:Ei},Symbol.toStringTag,{value:"Module"})),ro=new CSSStyleSheet;ro.replaceSync(`/**
 * Copyright 2022 The Chromium Authors. All rights reserved.
 * Use of this source code is governed by a BSD-style license that can be
 * found in the LICENSE file.
 */

.styles-layers-pane {
  overflow: hidden;
  padding-left: 2px;
  background-color: var(--sys-color-cdt-base-container);
  border-bottom: 1px solid var(--sys-color-divider);
  margin-top: 0;
  padding-bottom: 2px;
}

.styles-layers-pane > div {
  font-weight: bold;
  margin: 8px 4px 6px;
}

.styles-layers-pane > table {
  width: 100%;
  border-spacing: 0;
}

.styles-layers-pane td {
  padding: 0;
}

/*# sourceURL=layersWidget.css */
`);const Ci={cssLayersTitle:"CSS layers",toggleCSSLayers:"Toggle CSS Layers view"},rd=G("panels/elements/LayersWidget.ts",Ci),ao=q.bind(void 0,rd);let fn;class rt extends ii{cssModel;layerTreeComponent=new pi;constructor(){super(!0),this.contentElement.className="styles-layers-pane",this.contentElement.setAttribute("jslog",`${Me("css-layers")}`),w(this.contentElement.createChild("div"),ao(Ci.cssLayersTitle)),this.contentElement.appendChild(this.layerTreeComponent),T.instance().addFlavorChangeListener(A,this.update,this)}updateModel(e){this.cssModel!==e&&(this.cssModel&&this.cssModel.removeEventListener(fe.StyleSheetChanged,this.update,this),this.cssModel=e,this.cssModel&&this.cssModel.addEventListener(fe.StyleSheetChanged,this.update,this))}async wasShown(){return super.wasShown(),this.registerCSSFiles([ro]),this.update()}async update(){if(!this.isShowing())return;let e=T.instance().flavor(A);if(e&&(e=e.enclosingElementOrSelf()),!e||(this.updateModel(e.domModel().cssModel()),!this.cssModel))return;const t=i=>s=>{const o=s.subLayers,r=ps.readableLayerName(s.name),a=s.order+": "+r,d=i?i+"."+r:r;return o?{treeNodeData:a,id:d,children:()=>Promise.resolve(o.sort((c,h)=>c.order-h.order).map(t(d)))}:{treeNodeData:a,id:d}},n=await this.cssModel.getRootLayer(e.id);this.layerTreeComponent.data={defaultRenderer:yl,tree:[t("")(n)]},await this.layerTreeComponent.expandRecursively(5)}async revealLayer(e){return this.isShowing()||k.instance().showToolbarPane(this,pt.instance().item()),await this.update(),this.layerTreeComponent.expandToAndSelectTreeNodeId("implicit outer layer."+e)}static instance(e={forceNew:null}){const{forceNew:t}=e;return(!fn||t)&&(fn=new rt),fn}}let gn,pt=class lo{button;constructor(){this.button=new en(ao(Ci.toggleCSSLayers),"layers","layers-filled"),this.button.setVisible(!1),this.button.addEventListener("Click",this.clicked,this),this.button.element.classList.add("monospace"),this.button.element.setAttribute("jslog",`${si("css-layers").track({click:!0})}`)}static instance(e={forceNew:null}){const{forceNew:t}=e;return(!gn||t)&&(gn=new lo),gn}clicked(){const e=rt.instance();k.instance().showToolbarPane(e.isShowing()?null:e,this.button)}item(){return this.button}};const kc=Object.freeze(Object.defineProperty({__proto__:null,ButtonProvider:pt,LayersWidget:rt},Symbol.toStringTag,{value:"Module"})),j=(l,e)=>e===void 0?_(l):'<code class="unbreakable-text"><span class="property">'+l+"</span>: "+e+"</code>",_=l=>'<code class="unbreakable-text"><span class="property">'+l+"</span></code>",Re=l=>'<code class="unbreakable-text">'+l+"</code>",De=l=>{if(!l)return!1;const e=l.get("display");return e==="flex"||e==="inline-flex"},ad=new Set(["block","flow-root","inline-block","list-item","table-caption","table-cell"]),ld=l=>{if(!l)return!1;const e=l.get("display");if(!e)return!1;const t=e.split(" ");return t.length>3?!1:t.length===3?t[2]==="list-item":t.length===2?t[1]==="list-item"&&t[0]!=="inline":ad.has(t[0])},dd=l=>l?l.get("display")==="inline":!1,cd=new Set(["audio","canvas","embed","iframe","img","input","object","video"]),hd=l=>l?cd.has(l):!1,Fe=l=>{if(!l)return!1;const e=l.get("display");return e==="grid"||e==="inline-grid"},ud=l=>{if(!l)return!1;const e=l.get("column-width"),t=l.get("column-count");return e!=="auto"||t!=="auto"},M={ruleViolatedBySameElementRuleReason:"The {REASON_PROPERTY_DECLARATION_CODE} property prevents {AFFECTED_PROPERTY_DECLARATION_CODE} from having an effect.",ruleViolatedBySameElementRuleFix:"Try setting {PROPERTY_NAME} to something other than {PROPERTY_VALUE}.",ruleViolatedBySameElementRuleChangeFlexOrGrid:"Try adding {DISPLAY_GRID_RULE} or {DISPLAY_FLEX_RULE} to make this element into a container.",ruleViolatedBySameElementRuleChangeSuggestion:"Try setting the {EXISTING_PROPERTY_DECLARATION} property to {TARGET_PROPERTY_DECLARATION}.",ruleViolatedByParentElementRuleReason:"The {REASON_PROPERTY_DECLARATION_CODE} property on the parent element prevents {AFFECTED_PROPERTY_DECLARATION_CODE} from having an effect.",ruleViolatedByParentElementRuleFix:"Try setting the {EXISTING_PARENT_ELEMENT_RULE} property on the parent to {TARGET_PARENT_ELEMENT_RULE}.",fontVariationSettingsWarning:"Value for setting “{PH1}” {PH2} is outside the supported range [{PH3}, {PH4}] for font-family “{PH5}”.",flexGridContainerPropertyRuleReason:"This element is a {CONTAINER_DISPLAY_NAME} item, i.e. a child of a {CONTAINER_DISPLAY_NAME} container, but {PROPERTY_NAME} only applies to containers.",flexGridContainerPropertyRuleFix:"Try setting the {PROPERTY_NAME} on the container element or use {ALTERNATIVE_PROPERTY_NAME} instead."},pd=G("panels/elements/CSSRuleValidator.ts",M),R=q.bind(void 0,pd);class ne{#e;#t;#n;constructor(e,t,n){this.#e=e,this.#t=t,this.#n=n}getMessage(){return this.#e}getPossibleFixMessage(){return this.#t}getLearnMoreLink(){return this.#n}}class oe{getMetricType(){return 0}#e;constructor(e){this.#e=e}getApplicableProperties(){return this.#e}}class co extends oe{constructor(){super(["align-content"])}getMetricType(){return 1}getHint(e,t){if(!t)return;const n=De(t);if(!n&&!ld(t)&&!Fe(t)){const o=j("display",t?.get("display")),r=_("align-content");return new ne(R(M.ruleViolatedBySameElementRuleReason,{REASON_PROPERTY_DECLARATION_CODE:o,AFFECTED_PROPERTY_DECLARATION_CODE:r}),R(M.ruleViolatedBySameElementRuleFix,{PROPERTY_NAME:_("display"),PROPERTY_VALUE:Re(t?.get("display"))}))}if(!n||t.get("flex-wrap")!=="nowrap")return;const i=j("flex-wrap","nowrap"),s=_("align-content");return new ne(R(M.ruleViolatedBySameElementRuleReason,{REASON_PROPERTY_DECLARATION_CODE:i,AFFECTED_PROPERTY_DECLARATION_CODE:s}),R(M.ruleViolatedBySameElementRuleFix,{PROPERTY_NAME:_("flex-wrap"),PROPERTY_VALUE:Re("nowrap")}))}}class ho extends oe{constructor(){super(["flex","flex-basis","flex-grow","flex-shrink"])}getMetricType(){return 2}getHint(e,t,n){if(!n||De(n))return;const i=j("display",n?.get("display")),s=_(e),o=j("display","flex");return new ne(R(M.ruleViolatedByParentElementRuleReason,{REASON_PROPERTY_DECLARATION_CODE:i,AFFECTED_PROPERTY_DECLARATION_CODE:s}),R(M.ruleViolatedByParentElementRuleFix,{EXISTING_PARENT_ELEMENT_RULE:i,TARGET_PARENT_ELEMENT_RULE:o}))}}class uo extends oe{constructor(){super(["flex-direction","flex-flow","flex-wrap"])}getMetricType(){return 3}getHint(e,t){if(!t||De(t))return;const n=j("display",t?.get("display")),i=j("display","flex"),s=_(e);return new ne(R(M.ruleViolatedBySameElementRuleReason,{REASON_PROPERTY_DECLARATION_CODE:n,AFFECTED_PROPERTY_DECLARATION_CODE:s}),R(M.ruleViolatedBySameElementRuleChangeSuggestion,{EXISTING_PROPERTY_DECLARATION:n,TARGET_PROPERTY_DECLARATION:i}))}}class po extends oe{constructor(){super(["grid","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-template","grid-template-areas","grid-template-columns","grid-template-rows"])}getMetricType(){return 4}getHint(e,t){if(Fe(t))return;const n=j("display",t?.get("display")),i=j("display","grid"),s=_(e);return new ne(R(M.ruleViolatedBySameElementRuleReason,{REASON_PROPERTY_DECLARATION_CODE:n,AFFECTED_PROPERTY_DECLARATION_CODE:s}),R(M.ruleViolatedBySameElementRuleChangeSuggestion,{EXISTING_PROPERTY_DECLARATION:n,TARGET_PROPERTY_DECLARATION:i}))}}class mo extends oe{constructor(){super(["grid-area","grid-column","grid-row","grid-row-end","grid-row-start","justify-self"])}getMetricType(){return 5}getHint(e,t,n){if(!n||Fe(n))return;const i=j("display",n?.get("display")),s=j("display","grid"),o=_(e);return new ne(R(M.ruleViolatedByParentElementRuleReason,{REASON_PROPERTY_DECLARATION_CODE:i,AFFECTED_PROPERTY_DECLARATION_CODE:o}),R(M.ruleViolatedByParentElementRuleFix,{EXISTING_PARENT_ELEMENT_RULE:i,TARGET_PARENT_ELEMENT_RULE:s}))}}class fo extends oe{constructor(){super(["place-self","align-self","order"])}getMetricType(){return 12}getHint(e,t,n){if(!n||De(n)||Fe(n))return;const i=j("display",n?.get("display")),s=`${j("display","flex")} or ${j("display","grid")}`,o=_(e);return new ne(R(M.ruleViolatedByParentElementRuleReason,{REASON_PROPERTY_DECLARATION_CODE:i,AFFECTED_PROPERTY_DECLARATION_CODE:o}),R(M.ruleViolatedByParentElementRuleFix,{EXISTING_PARENT_ELEMENT_RULE:i,TARGET_PARENT_ELEMENT_RULE:s}))}}class go extends oe{constructor(){super(["justify-content","place-content","align-items"])}getMetricType(){return 6}getHint(e,t,n){if(!t||De(t)||Fe(t))return;if(n&&(De(n)||Fe(n))){const o=Re(n.get("display")),r=_(e),a=_(e==="justify-content"?"justify-self":"align-self");return new ne(R(M.flexGridContainerPropertyRuleReason,{CONTAINER_DISPLAY_NAME:o,PROPERTY_NAME:r}),R(M.flexGridContainerPropertyRuleFix,{PROPERTY_NAME:r,ALTERNATIVE_PROPERTY_NAME:a}))}const i=j("display",t.get("display")),s=_(e);return new ne(R(M.ruleViolatedBySameElementRuleReason,{REASON_PROPERTY_DECLARATION_CODE:i,AFFECTED_PROPERTY_DECLARATION_CODE:s}),R(M.ruleViolatedBySameElementRuleChangeFlexOrGrid,{DISPLAY_GRID_RULE:j("display","grid"),DISPLAY_FLEX_RULE:j("display","flex")}))}}class yo extends oe{constructor(){super(["gap","column-gap","row-gap","grid-gap","grid-column-gap","grid-column-end","grid-row-gap"])}getMetricType(){return 7}getHint(e,t){if(!t||ud(t)||De(t)||Fe(t))return;const n=j("display",t?.get("display")),i=_(e);return new ne(R(M.ruleViolatedBySameElementRuleReason,{REASON_PROPERTY_DECLARATION_CODE:n,AFFECTED_PROPERTY_DECLARATION_CODE:i}),R(M.ruleViolatedBySameElementRuleFix,{PROPERTY_NAME:_("display"),PROPERTY_VALUE:Re(t?.get("display"))}))}}class bo extends oe{constructor(){super(["padding","padding-top","padding-right","padding-bottom","padding-left"])}getMetricType(){return 8}getHint(e,t){const n=t?.get("display");if(!n||!["table-row-group","table-header-group","table-footer-group","table-row","table-column-group","table-column"].includes(n))return;const s=j("display",t?.get("display")),o=_(e);return new ne(R(M.ruleViolatedBySameElementRuleReason,{REASON_PROPERTY_DECLARATION_CODE:s,AFFECTED_PROPERTY_DECLARATION_CODE:o}),R(M.ruleViolatedBySameElementRuleFix,{PROPERTY_NAME:_("display"),PROPERTY_VALUE:Re(t?.get("display"))}))}}class Eo extends oe{constructor(){super(["top","right","bottom","left"])}getMetricType(){return 9}getHint(e,t){const n=t?.get("position");if(!n||n!=="static")return;const i=j("position",t?.get("position")),s=_(e);return new ne(R(M.ruleViolatedBySameElementRuleReason,{REASON_PROPERTY_DECLARATION_CODE:i,AFFECTED_PROPERTY_DECLARATION_CODE:s}),R(M.ruleViolatedBySameElementRuleFix,{PROPERTY_NAME:_("position"),PROPERTY_VALUE:Re(t?.get("position"))}))}}class Co extends oe{constructor(){super(["z-index"])}getMetricType(){return 10}getHint(e,t,n){const i=t?.get("position");if(!i||["absolute","relative","fixed","sticky"].includes(i)||De(n)||Fe(n))return;const s=j("position",t?.get("position")),o=_(e);return new ne(R(M.ruleViolatedBySameElementRuleReason,{REASON_PROPERTY_DECLARATION_CODE:s,AFFECTED_PROPERTY_DECLARATION_CODE:o}),R(M.ruleViolatedBySameElementRuleFix,{PROPERTY_NAME:_("position"),PROPERTY_VALUE:Re(t?.get("position"))}))}}class So extends oe{constructor(){super(["width","height"])}getMetricType(){return 11}getHint(e,t,n,i){if(!t||!i||!dd(t)||hd(i))return;const s=j("display",t?.get("display")),o=_(e);return new ne(R(M.ruleViolatedBySameElementRuleReason,{REASON_PROPERTY_DECLARATION_CODE:s,AFFECTED_PROPERTY_DECLARATION_CODE:o}),R(M.ruleViolatedBySameElementRuleFix,{PROPERTY_NAME:_("display"),PROPERTY_VALUE:Re(t?.get("display"))}))}}class wo extends oe{constructor(){super(["font-variation-settings"])}getMetricType(){return 13}getHint(e,t,n,i,s){if(!t)return;const o=t.get("font-variation-settings");if(!o)return;const r=t.get("font-family");if(!r)return;const a=new Set($r(r)),d=(s||[]).filter(p=>a.has(p.getFontFamily())),c=Wr(o),h=[];for(const p of c)for(const g of d){const f=g.getVariationAxisByTag(p.tag);f&&(p.value<f.minValue||p.value>f.maxValue)&&h.push(R(M.fontVariationSettingsWarning,{PH1:p.tag,PH2:p.value,PH3:f.minValue,PH4:f.maxValue,PH5:g.getFontFamily()}))}if(h.length)return new ne(h.join(" "),"")}}const md=[co,uo,go,ho,fo,wo,po,mo,yo,bo,Eo,So,Co],fd=()=>{const l=new Map;for(const e of md){const t=new e,n=t.getApplicableProperties();for(const i of n){let s=l.get(i);s===void 0&&(s=[]),s.push(t),l.set(i,s)}}return l},Xn=fd(),Mc=Object.freeze(Object.defineProperty({__proto__:null,AlignContentValidator:co,CSSRuleValidator:oe,FlexContainerValidator:uo,FlexGridValidator:go,FlexItemValidator:ho,FlexOrGridItemValidator:fo,FontVariationSettingsValidator:wo,GridContainerValidator:po,GridItemValidator:mo,Hint:ne,MulticolFlexGridValidator:yo,PaddingValidator:bo,PositionValidator:Eo,SizingValidator:So,ZIndexValidator:Co,cssRuleValidatorsMap:Xn},Symbol.toStringTag,{value:"Module"}));function Qn(l){const{name:e,value:t}=l,n=e.startsWith("--")?`'${e}'`:e.replace(/-([a-z])/gi,(s,o)=>o.toUpperCase()),i=`'${t.replaceAll("'","\\'")}'`;return`${n}: ${i}`}const Oc=Object.freeze(Object.defineProperty({__proto__:null,getCssDeclarationAsJavascriptProperty:Qn},Symbol.toStringTag,{value:"Module"})),le=$t,gd=Cl,yd=Sl,Xt=new WeakMap,J={shiftClickToChangeColorFormat:"Shift + Click to change color format.",openColorPickerS:"Open color picker. {PH1}",togglePropertyAndContinueEditing:"Toggle property and continue editing",revealInSourcesPanel:"Reveal in Sources panel",copyDeclaration:"Copy declaration",copyProperty:"Copy property",copyValue:"Copy value",copyRule:"Copy rule",copyAllDeclarations:"Copy all declarations",copyAllCSSChanges:"Copy all CSS changes",viewComputedValue:"View computed value",flexboxEditorButton:"Open `flexbox` editor",gridEditorButton:"Open `grid` editor",copyCssDeclarationAsJs:"Copy declaration as JS",copyAllCssDeclarationsAsJs:"Copy all declarations as JS"},bd=G("panels/elements/StylePropertyTreeElement.ts",J),te=q.bind(void 0,bd),yn=new WeakMap;class vo{#e;constructor(e){this.#e=e}matcher(){return new Ct}render(e,t){const n=`${this.#e.section().getSectionIdx()}_${this.#e.section().nextEditorTriggerButtonIdx}`,i=ke.createTriggerButton(this.#e.parentPane(),this.#e.section(),e.isFlex?gd:yd,e.isFlex?te(J.flexboxEditorButton):te(J.gridEditorButton),n);i.setAttribute("jslog",`${oi().track({click:!0}).context(e.isFlex?"flex":"grid")}`),this.#e.section().nextEditorTriggerButtonIdx++,i.addEventListener("click",()=>{L.swatchActivated(e.isFlex?6:5)});const s=this.#e.parentPane().swatchPopoverHelper();return s.isShowing(ke.instance())&&ke.instance().getTriggerKey()===n&&s.setAnchorElement(i),[...B.render(le.siblings(le.declValue(e.node)),t).nodes,i]}}class xo{#e;constructor(e){this.#e=e}matcher(){return new so(this.#e.property,this.#e.matchedStyles())}render(e,t){const n=e.resolveProperty();if(!n)return[document.createTextNode(e.text)];const i=new As;if(w(i,e.text),i.data={text:e.text,isDefined:!!n,onLinkActivate:()=>n&&this.#e.parentPane().jumpToDeclaration(n),jslogContext:"css-wide-keyword-link"},N().isColorAwareProperty(n.name)||N().isCustomProperty(n.name)){const s=Ce(t.matchedResult.getComputedText(e.node));if(s)return[new xt(this.#e).renderColorSwatch(s,i)]}return[i]}}class To{#e;#t;constructor(e,t){this.#e=e,this.#t=t}matcher(){return new ms(this.computedText.bind(this))}resolveVariable(e){return this.#s.computeCSSVariable(this.#t,e.name)}fallbackValue(e){return e.fallback.length===0||e.matching.hasUnresolvedVarsRange(e.fallback[0],e.fallback[e.fallback.length-1])?null:e.matching.getComputedTextRange(e.fallback[0],e.fallback[e.fallback.length-1])}computedText(e){return this.resolveVariable(e)?.value??this.fallbackValue(e)}render(e,t){const n=e.fallback.length>0?B.render(e.fallback,t):void 0,{declaration:i,value:s}=this.resolveVariable(e)??{},o=!s,r=s??this.fallbackValue(e),a=new zl;if(a.data={computedValue:r,variableName:e.name,fromFallback:o,fallbackText:e.fallback.map(h=>t.ast.text(h)).join(" "),onLinkActivate:h=>this.#i(i??h)},n?.nodes.length){a.appendChild(document.createTextNode(`var(${e.name}`));const h=a.appendChild(document.createElement("span"));h.appendChild(document.createTextNode(", ")),h.slot="fallback",n.nodes.forEach(p=>h.appendChild(p)),a.appendChild(document.createTextNode(")"))}else w(a,e.text);a.link&&this.#n.addPopover(a.link,{contents:()=>this.#e.getVariablePopoverContents(e.name,s??null),jslogContext:"elements.css-var"});const d=r&&Ce(r);if(!d)return[a];const c=new xt(this.#e).renderColorSwatch(d,a);return t.addControl("color",c),o&&n?.cssControls.get("color")?.forEach(h=>h.addEventListener(vt.eventName,p=>{c.setColor(p.data.color)})),[c]}get#n(){return this.#e.parentPane()}get#s(){return this.#e.matchedStyles()}#i(e){L.actionTaken(We.CustomPropertyLinkClicked),L.swatchActivated(0),typeof e=="string"?this.#n.jumpToProperty(e)||this.#n.jumpToProperty("initial-value",e,ot):e.declaration instanceof fs?this.#n.revealProperty(e.declaration):e.declaration instanceof zr&&this.#n.jumpToProperty("initial-value",e.name,ot)}}class No{matcher(){return new Ys}render(e,t){const n=le.children(e.node),{nodes:i,cssControls:s}=B.render(n,t),o=s.get("angle"),r=o?.length===1?o[0]:null;if(r instanceof mi){r.updateProperty(t.matchedResult.getComputedText(e.node));const d=le.callArgs(e.node)[0]?.find(h=>t.matchedResult.getMatch(h)instanceof Yt),c=d&&t.matchedResult.getMatch(d);c&&r.addEventListener(ks.eventName,h=>{r.updateProperty(t.matchedResult.getComputedText(e.node,new Map([[c,h.data.value]])))})}return i}}let xt=class{treeElement;constructor(e){this.treeElement=e}matcher(){const e=()=>this.treeElement.getComputedStyle("color");return new sn(e)}#e(e,t){const n=document.createElement("span");if(e.node.name==="ColorLiteral"||e.node.name==="ValueName")return n.appendChild(document.createTextNode(e.text)),{valueChild:n};const{cssControls:i}=B.renderInto(le.children(e.node),t,n);return{valueChild:n,cssControls:i}}render(e,t){const{valueChild:n,cssControls:i}=this.#e(e,t);let s=t.matchedResult.getComputedText(e.node);if(e.node.name==="CallExpression"&&s.match(/^[^)]*\(\W*from\W+/)&&!t.matchedResult.hasUnresolvedVars(e.node)&&CSS.supports("color",s)){const a=document.body.appendChild(document.createElement("span"));a.style.backgroundColor=s,s=window.getComputedStyle(a).backgroundColor?.toString()||s,a.remove()}const o=Ce(s);if(!o)return[document.createTextNode(s)];const r=this.renderColorSwatch(o,n);if(t.addControl("color",r),i&&e.node.name==="CallExpression"&&t.ast.text(e.node.getChild("Callee")).match(/^(hsla?|hwba?)/)){const[a]=i.get("angle")??[];a instanceof mi&&(a.updateProperty(r.getColor()?.asString()??""),a.addEventListener(ks.eventName,d=>{const c=Gr(d.data.value),h=r.getColor();!c||!h||(h.is("hsl")||h.is("hsla")?r.setColor(new Kr(c,h.s,h.l,h.alpha)):(h.is("hwb")||h.is("hwba"))&&r.setColor(new Yr(c,h.w,h.b,h.alpha)),a.updateProperty(r.getColor()?.asString()??""))}))}return[r]}renderColorSwatch(e,t){const n=this.treeElement.editable(),i=te(J.shiftClickToChangeColorFormat),s=n?te(J.openColorPickerS,{PH1:i}):"",o=new nt(s);o.setReadonly(!n),e&&o.renderColor(e),t||(t=o.createChild("span"),e&&(t.textContent=e.getAuthoredText()??e.asString())),o.appendChild(t);const r=()=>{this.treeElement.applyStyleText(this.treeElement.renderedPropertyText(),!1)};if(o.addEventListener(Ls.eventName,()=>{L.swatchActivated(2)}),o.addEventListener(vt.eventName,r),n){const a=new it(this.treeElement,this.treeElement.parentPane().swatchPopoverHelper(),o);a.addEventListener("colorchanged",d=>{const c=Ce(d.data);c&&o.setColorText(c)}),this.#t(a)}return o}async#t(e){const t=this.treeElement.parentPane().cssModel(),n=this.treeElement.node();if(this.treeElement.property.name!=="color"||!t||!n||typeof n.id>"u")return;const i=new Dl(await t.getBackgroundColors(n.id));e.setContrastInfo(i)}};class Po{#e;constructor(e){this.#e=e}matcher(){return new qs}render(e,t){const n=document.createElement("span");n.appendChild(document.createTextNode("light-dark("));const i=n.appendChild(document.createElement("span"));n.appendChild(document.createTextNode(", "));const s=n.appendChild(document.createElement("span"));n.appendChild(document.createTextNode(")"));const{cssControls:o}=B.renderInto(e.light,t,i),{cssControls:r}=B.renderInto(e.dark,t,s);if(t.matchedResult.hasUnresolvedVars(e.node))return[n];if(!Ce(t.matchedResult.getComputedTextRange(e.light[0],e.light[e.light.length-1])))return[n];const d=new xt(this.#e).renderColorSwatch(void 0,n);return t.addControl("color",d),this.applyColorScheme(e,t,d,i,s,o,r),[d]}async applyColorScheme(e,t,n,i,s,o,r){const a=await this.#t(e);if(!a)return;(a===e.light?o:r).get("color")?.forEach(g=>g.addEventListener(vt.eventName,f=>n.setColor(f.data.color)));const c=a===e.light?s:i,h=t.matchedResult.getComputedTextRange(a[0],a[a.length-1]),p=h&&Ce(h);c.style.textDecoration="line-through",p&&n.renderColor(p)}async#t(e){const t=this.#e.getComputedStyle("color-scheme")?.split(" ")??[],n=t.includes("light"),i=t.includes("dark");if(!i&&!n)return e.light;if(!n)return e.dark;if(!i)return e.light;switch(await this.#e.parentPane().cssModel()?.colorScheme()){case"dark":return e.dark;case"light":return e.light;default:return}}}class Io{#e;constructor(e){this.#e=e}render(e,t){const n=(h,p)=>{if(h instanceof zi||h instanceof nt){h instanceof nt?h.addEventListener(vt.eventName,f=>p(f.data.color.getAuthoredText()??f.data.color.asString())):h.addEventListener("colorChanged",f=>p(f.data.text));const g=h.getText();if(g)return p(g),!0}return!1},i=document.createElement("span");i.appendChild(document.createTextNode("color-mix(")),B.renderInto(e.space,t,i),i.appendChild(document.createTextNode(", "));const s=B.renderInto(e.color1,t,i).cssControls.get("color")??[];i.appendChild(document.createTextNode(", "));const o=B.renderInto(e.color2,t,i).cssControls.get("color")??[];if(i.appendChild(document.createTextNode(")")),t.matchedResult.hasUnresolvedVars(e.node)||s.length!==1||o.length!==1)return[i];const r=new zi;if(!n(s[0],h=>r.setFirstColor(h))||!n(o[0],h=>r.setSecondColor(h)))return[i];const a=e.space.map(h=>t.matchedResult.getComputedText(h)).join(" "),d=e.color1.map(h=>t.matchedResult.getComputedText(h)).join(" "),c=e.color2.map(h=>t.matchedResult.getComputedText(h)).join(" ");return r.appendChild(i),r.setColorMixText(`color-mix(${a}, ${d}, ${c})`),r.setRegisterPopoverCallback(h=>{h.icon&&this.#e.addPopover(h.icon,{contents:()=>{const p=h.mixedColor();if(!p)return;const g=document.createElement("span");g.style.padding="11px 7px";const f=p.as("hex"),u=f.isGamutClipped()?p.asString():f.asString();if(u)return g.appendChild(document.createTextNode(u)),g},jslogContext:"elements.css-color-mix"})}),t.addControl("color",r),[r]}matcher(){return new Gs}}class Lo{#e;constructor(e){this.#e=e}render(e,t){const n=e.text;if(!this.#e.editable())return[document.createTextNode(n)];const i=new mi;i.setAttribute("jslog",`${oi().track({click:!0}).context("css-angle")}`);const s=document.createElement("span");return s.textContent=n,i.data={angleText:n,containingPane:this.#e.parentPane().element.enclosingNodeOrSelfWithClass("style-panes-wrapper")},i.append(s),i.addEventListener("popovertoggled",({data:o})=>{const r=this.#e.section();r&&(o.open&&(this.#e.parentPane().hideAllPopovers(),this.#e.parentPane().activeCSSAngle=i,L.swatchActivated(7)),r.element.classList.toggle("has-open-popover",o.open),this.#e.parentPane().setEditingStyle(o.open),o.open||this.#e.applyStyleText(this.#e.renderedPropertyText(),!0))}),i.addEventListener("valuechanged",async({data:o})=>{s.textContent=o.value,await this.#e.applyStyleText(this.#e.renderedPropertyText(),!1)}),i.addEventListener("unitchanged",({data:o})=>{s.textContent=o.value}),t.addControl("angle",i),[i]}matcher(){return new zs}}class Ao{#e;constructor(e){this.#e=e}#t(e){switch(e.propertyName){case"animation":case"animation-name":return{jslogContext:"css-animation-name",metric:1,ruleBlock:"@keyframes",isDefined:!!this.#e.matchedStyles().keyframes().find(t=>t.name().text===e.text)};case"font-palette":return{jslogContext:"css-font-palette",metric:null,ruleBlock:"@font-palette-values",isDefined:this.#e.matchedStyles().fontPaletteValuesRule()?.name().text===e.text};case"position-try":case"position-try-fallbacks":return{jslogContext:"css-position-try",metric:10,ruleBlock:"@position-try",isDefined:!!this.#e.matchedStyles().positionTryRules().find(t=>t.name().text===e.text)}}}render(e){const t=new As;w(t,e.text);const{metric:n,jslogContext:i,ruleBlock:s,isDefined:o}=this.#t(e);return t.data={text:e.text,isDefined:o,onLinkActivate:()=>{n&&L.swatchActivated(n),this.#e.parentPane().jumpToSectionBlock(`${s} ${e.text}`)},jslogContext:i},[t]}matcher(){return new He}}class ko{#e;constructor(e){this.#e=e}render(e){return[this.renderSwatch(e)]}renderSwatch(e){if(!this.#e.editable())return document.createTextNode(e.text);const t=this.#e.parentPane().swatchPopoverHelper(),n=Gl.create();return n.iconElement().addEventListener("click",()=>{L.swatchActivated(3)}),n.setBezierText(e.text),new Vs({treeElement:this.#e,swatchPopoverHelper:t,swatch:n}),n}matcher(){return new Xs}}class Mo{#e;#t;#n;constructor(e,t,n){this.#t=e,this.#e=t,this.#n=n}isBoxShadow(){return this.#t==="boxShadow"}inset(){return!!this.#e.find(e=>e.propertyType==="inset")}#s(e){return this.#e.find(t=>t.propertyType===e)?.length??Ms.zero()}offsetX(){return this.#s("x")}offsetY(){return this.#s("y")}blurRadius(){return this.#s("blur")}spreadRadius(){return this.#s("spread")}#i(e){return!!(e.expansionContext&&e.source)}#o(e){if(this.#i(e)){const t=e.source;this.#e.filter(n=>n.source===t).forEach(n=>{n.source=null})}}#r(e){const t=this.#e.findIndex(i=>i.propertyType===e),n=t>=0?this.#e[t]:void 0;return n&&this.#o(n),{property:n,index:t}}setInset(e){if(!this.isBoxShadow())return;const{property:t,index:n}=this.#r("inset");t?e||this.#e.splice(n,1):this.#e.unshift({value:"inset",source:null,expansionContext:null,propertyType:"inset"})}#a(e,t){const{property:n}=this.#r(t);if(n)n.value=e.asCSSText(),n.length=e,n.source=null;else{const i=1+this.#e.findLastIndex(s=>s.propertyType==="y"||t==="spread"&&s.propertyType==="blur");i>0&&i<this.#e.length&&this.#i(this.#e[i])&&this.#e[i-1].source===this.#e[i].source&&this.#o(this.#e[i]),this.#e.splice(i,0,{value:e.asCSSText(),length:e,source:null,expansionContext:null,propertyType:t})}}setOffsetX(e){this.#a(e,"x")}setOffsetY(e){this.#a(e,"y")}setBlurRadius(e){this.#a(e,"blur")}setSpreadRadius(e){this.isBoxShadow()&&this.#a(e,"spread")}renderContents(e){e.removeChildren();const t=e.createChild("span");let n=null;for(const i of this.#e)(!i.source||i.source!==n)&&(i!==this.#e[0]&&t.append(" "),i.source?t.append(...B.render(i.source,this.#n).nodes):typeof i.value=="string"?t.append(i.value):t.append(...B.render(i.value,i.expansionContext??this.#n).nodes)),n=i.source}}class Oo{#e;constructor(e){this.#e=e}shadowModel(e,t,n){const i=[],s=["spread","blur","y","x"];let o=!0;const r=e.map(a=>({value:a,source:a,match:n.matchedResult.getMatch(a),expansionContext:null}));for(let a=r.shift();a;a=r.shift()){const{value:d,source:c,match:h,expansionContext:p}=a,g=(p??n).ast.text(d);if(d.name==="NumberLiteral"){if(!o)return null;const f=s.pop();if(f===void 0||f==="spread"&&t==="textShadow")return null;const u=Ms.parse(g);if(!u)return null;i.push({value:d,source:c,length:u,propertyType:f,expansionContext:p})}else if(h instanceof us){const f=n.matchedResult.getComputedText(d),u=yt("--property",f);if(!u)return null;const m=ri.walkExcludingSuccessors(u,[new sn]);if(m.hasUnresolvedVars(m.ast.tree))return null;r.unshift(...le.siblings(le.declValue(m.ast.tree)).map(y=>({value:y,source:d,match:m.getMatch(y),expansionContext:new Qt(u,n.renderers,m)})))}else if(o=s.length===4,d.name==="ValueName"&&g.toLowerCase()==="inset"){if(t==="textShadow"||i.find(({propertyType:f})=>f==="inset"))return null;i.push({value:d,source:c,propertyType:"inset",expansionContext:p})}else if(h instanceof _e||h instanceof qt){if(i.find(({propertyType:f})=>f==="color"))return null;i.push({value:d,source:c,propertyType:"color",expansionContext:p})}else if(d.name!=="Comment"&&d.name!=="Important")return null}return s.length>2?null:new Mo(t,i,n)}render(e,t){const n=le.split(le.siblings(le.declValue(e.node))),i=[];for(const s of n){const o=this.shadowModel(s,e.shadowType,t),r=s.find(c=>c.name==="Important");if(s!==n[0]&&i.push(document.createTextNode(", ")),!o){const{nodes:c}=B.render(s,t);i.push(...c);continue}const a=new Kl(o);a.setAttribute("jslog",`${oi("css-shadow").track({click:!0})}`),a.iconElement().addEventListener("click",()=>{L.swatchActivated(4)}),o.renderContents(a),new _s(this.#e,this.#e.parentPane().swatchPopoverHelper(),a).addEventListener("shadowChanged",()=>{o.renderContents(a),this.#e.applyStyleText(this.#e.renderedPropertyText(),!1)}),i.push(a),r&&i.push(document.createTextNode(" "),...B.render(r,t).nodes)}return i}matcher(){return new Js}}class Ro{treeElement;constructor(e){this.treeElement=e}render(e){return this.treeElement.section().registerFontProperty(this.treeElement),[document.createTextNode(e.text)]}matcher(){return new Zs}}class Do{render(e,t){if(e.lines.length<=1)return B.render(le.siblings(le.declValue(e.node)),t).nodes;const n=O.instance().moduleSetting("text-editor-indent").get(),i=document.createDocumentFragment();for(const s of e.lines){const o=B.render(s,t),r=qr`<br /><span class='styles-clipboard-only'>${n.repeat(2)}</span>`;i.append(r,...o.nodes)}return[i]}matcher(){return new to}}class Fo{#e;constructor(e){this.#e=e}render(e,t){const n=e.text;if(!this.#e.editable())return[document.createTextNode(n)];const i=new Yl,s=document.createElement("span");s.textContent=n,i.data={lengthText:n},i.append(s);const o=a=>{const{data:d}=a;s.textContent=d.value,this.#e.parentPane().setEditingStyle(!0),this.#e.applyStyleText(this.#e.renderedPropertyText(),!1)},r=()=>{this.#e.parentPane().setEditingStyle(!1)};return i.addEventListener("valuechanged",o),i.addEventListener("draggingfinished",r),[i]}matcher(){return new eo}}async function Bo(l,e,t){const n=await e.node()?.getAnchorBySpecifier(t.identifier)??void 0,i=new wl({identifier:t.identifier,anchorNode:n,needsSpace:t.needsSpace,onLinkActivate:()=>{n&&ee(n,!1)},onMouseEnter:()=>{n?.highlight()},onMouseLeave:()=>{se.hideDOMNodeHighlight()}});l.removeChildren(),l.appendChild(i)}class Vo{#e;constructor(e){this.#e=e}anchorDecoratedForTest(){}async#t(e,t,n){await Bo(e,this.#e,{identifier:n,needsSpace:t}),this.anchorDecoratedForTest()}render(e,t){const n=document.createElement("span");if(e.node.name==="VariableName")n.appendChild(document.createTextNode(e.text)),this.#t(n,!1,e.text);else{n.appendChild(document.createTextNode(`${e.functionName}(`));const i=document.createElement("span");n.appendChild(i);const o=le.children(e.node.getChild("ArgList")).splice(1);this.#t(i,o.length>1),B.renderInto(o,t,n)}return[n]}matcher(){return new no}}class _o{#e;constructor(e){this.#e=e}anchorDecoratedForTest(){}render(e){const t=document.createElement("span");return t.appendChild(document.createTextNode(e.text)),Bo(t,this.#e,{identifier:e.text,needsSpace:!1}).then(()=>this.anchorDecoratedForTest()),[t]}matcher(){return new io}}class Ho{#e;constructor(e){this.#e=e}render(e,t){const n=[];if(e.preamble.length>0){const{nodes:i}=B.render(e.preamble,t);n.push(...i)}for(const[i,s]of e.fallbacks.entries()){const o=document.createElement("span");i>0&&o.appendChild(document.createTextNode(", ")),i!==this.#e.matchedStyles().activePositionFallbackIndex()&&(o.style.textDecoration="line-through"),B.renderInto(s,t,o),n.push(o)}return n}matcher(){return new oo}}class Z extends Oe{style;matchedStylesInternal;property;inheritedInternal;overloadedInternal;parentPaneInternal;#e;isShorthand;applyStyleThrottler;newProperty;expandedDueToFilter;valueElement;nameElement;expandElement;originalPropertyText;hasBeenEditedIncrementally;prompt;lastComputedValue;computedStyles=null;parentsComputedStyles=null;contextForTest;#t;#n=void 0;constructor({stylesPane:e,section:t,matchedStyles:n,property:i,isShorthand:s,inherited:o,overloaded:r,newProperty:a}){const d=i.name.startsWith("--")?"custom-property":i.name;super("",s,d),this.style=i.ownerStyle,this.matchedStylesInternal=n,this.property=i,this.inheritedInternal=o,this.overloadedInternal=r,this.selectable=!1,this.parentPaneInternal=e,this.#e=t,this.isShorthand=s,this.applyStyleThrottler=new xe(0),this.newProperty=a,this.newProperty&&(this.listItemElement.textContent=""),this.expandedDueToFilter=!1,this.valueElement=null,this.nameElement=null,this.expandElement=null,this.originalPropertyText="",this.hasBeenEditedIncrementally=!1,this.prompt=null,this.lastComputedValue=null,this.#t=i.propertyText||""}async gridNames(){if(!N().isGridNameAwareProperty(this.name))return new Set;for(let e=this.parentPaneInternal.node()?.parentNode;e;e=e?.parentNode){const t=await this.parentPaneInternal.cssModel()?.getComputedStyle(e.id),n=t?.get("display");if(!(n==="grid"||n==="inline-grid"))continue;const s=(o,r)=>{const a=t?.get(o);if(!a)return[];const d=yt(o,a);return d?ta.findAll(d,c=>c.name===r).map(c=>d.text(c)):[]};return N().isGridAreaNameAwareProperty(this.name)?new Set(s("grid-template-areas","StringLiteral")?.flatMap(o=>o.substring(1,o.length-1).split(/\s+/).filter(r=>!r.match(/^\.*$/)))):N().isGridColumnNameAwareProperty(this.name)?new Set(s("grid-template-columns","LineName")):new Set(s("grid-template-rows","LineName"))}return new Set}matchedStyles(){return this.matchedStylesInternal}editable(){const e=this.parent instanceof Z&&this.parent.isShorthand,t=!!(this.style.styleSheetId&&this.style.range);return!e&&t}inherited(){return this.inheritedInternal}overloaded(){return this.overloadedInternal}setOverloaded(e){e!==this.overloadedInternal&&(this.overloadedInternal=e,this.updateState())}setComputedStyles(e){this.computedStyles=e}getComputedStyle(e){return this.computedStyles?.get(e)??null}setParentsComputedStyles(e){this.parentsComputedStyles=e}get name(){return this.property.name}get value(){return this.property.value}updateFilter(){const e=this.parentPaneInternal.filterRegex(),t=e!==null&&(e.test(this.property.name)||e.test(this.property.value));this.listItemElement.classList.toggle("filter-match",t),this.onpopulate();let n=!1;for(let i=0;i<this.childCount();++i){const s=this.childAt(i);!s||s&&!s.updateFilter()||(n=!0)}return e?n&&!this.expanded?(this.expand(),this.expandedDueToFilter=!0):!n&&this.expanded&&this.expandedDueToFilter&&(this.collapse(),this.expandedDueToFilter=!1):(this.expandedDueToFilter&&this.collapse(),this.expandedDueToFilter=!1),t}renderedPropertyText(){return!this.nameElement||!this.valueElement?"":this.nameElement.textContent+": "+this.valueElement.textContent}updateState(){if(!this.listItemElement)return;this.style.isPropertyImplicit(this.name)?this.listItemElement.classList.add("implicit"):this.listItemElement.classList.remove("implicit"),!this.property.parsedOk&&ce.ignoreErrorsForProperty(this.property)?this.listItemElement.classList.add("has-ignorable-error"):this.listItemElement.classList.remove("has-ignorable-error"),this.inherited()?this.listItemElement.classList.add("inherited"):this.listItemElement.classList.remove("inherited"),this.overloaded()?this.listItemElement.classList.add("overloaded"):this.listItemElement.classList.remove("overloaded"),this.property.disabled?this.listItemElement.classList.add("disabled"):this.listItemElement.classList.remove("disabled"),this.listItemElement.classList.toggle("changed",this.isPropertyChanged(this.property))}node(){return this.parentPaneInternal.node()}parentPane(){return this.parentPaneInternal}section(){return this.#e}updatePane(){this.#e.refreshUpdate(this)}async toggleDisabled(e){if(!this.style.range)return;this.parentPaneInternal.setUserOperation(!0);const n=await this.property.setDisabled(e);this.parentPaneInternal.setUserOperation(!1),n&&(this.matchedStylesInternal.resetActiveProperties(),this.updatePane(),this.styleTextAppliedForTest())}isPropertyChanged(e){return ve.isEnabled("styles-pane-css-changes")?this.#t!==e.propertyText||this.parentPane().isPropertyChanged(e):!1}async onpopulate(){if(this.#n||(this.#n=await this.gridNames()),this.childCount()||!this.isShorthand)return;const e=this.property.getLonghandProperties(),t=this.style.leadingProperties();for(const n of e){const i=n.name;let s=!1,o=!1;s=this.#e.isPropertyInherited(i),o=this.matchedStylesInternal.propertyState(n)==="Overloaded",t.find(d=>d.name===i&&d.activeInStyle())&&(o=!0);const a=new Z({stylesPane:this.parentPaneInternal,section:this.#e,matchedStyles:this.matchedStylesInternal,property:n,isShorthand:!1,inherited:s,overloaded:o,newProperty:!1});a.setComputedStyles(this.computedStyles),a.setParentsComputedStyles(this.parentsComputedStyles),this.appendChild(a)}}onattach(){this.updateTitle(),this.listItemElement.addEventListener("mousedown",e=>{e.button===0&&yn.set(this.parentPaneInternal,this)},!1),this.listItemElement.addEventListener("mouseup",this.mouseUp.bind(this)),this.listItemElement.addEventListener("click",e=>{if(!e.target)return;!e.target.hasSelection()&&e.target!==this.listItemElement&&e.consume(!0)}),this.listItemElement.addEventListener("contextmenu",this.handleCopyContextMenuEvent.bind(this))}onexpand(){this.updateExpandElement()}oncollapse(){this.updateExpandElement()}updateExpandElement(){this.expandElement&&(this.expanded?this.expandElement.name="triangle-down":this.expandElement.name="triangle-right")}#s(e){const t=this.matchedStyles().getRegisteredProperty(e);return t?{registration:t,goToDefinition:()=>this.parentPaneInternal.jumpToSection(e,ot)}:void 0}getVariablePopoverContents(e,t){return new bl({variableName:e,value:t??void 0,details:this.#s(e)})}#i(e,t){const n=yt("--unused",t);if(!n)return null;const i=ri.walk(n,[new ms(o=>{const r=this.matchedStylesInternal.computeCSSVariable(e,o.name)?.value;return r!==void 0?r:o.fallback.length===0||o.matching.hasUnresolvedVarsRange(o.fallback[0],o.fallback[o.fallback.length-1])?null:o.matching.getComputedTextRange(o.fallback[0],o.fallback[o.fallback.length-1])})]),s=$t.siblings($t.declValue(i.ast.tree));return i.getComputedTextRange(s[0],s[s.length-1])}refreshIfComputedValueChanged(){this.#n=void 0;const e=this.#i(this.property.ownerStyle,this.property.value);e!==this.lastComputedValue&&(this.lastComputedValue=e,this.innerUpdateTitle())}updateTitle(){this.lastComputedValue=this.#i(this.property.ownerStyle,this.property.value),this.innerUpdateTitle()}innerUpdateTitle(){this.updateState(),this.isExpandable()&&(this.expandElement=Mn("triangle-right","expand-icon"),this.expandElement.setAttribute("jslog",`${Xr().track({click:!0})}`));const e=this.property.parsedOk?[new To(this,this.style),new xt(this),new Io(this.parentPaneInternal),new rn(this.style.parentRule,this.node()),new Lo(this),new Ao(this),new ko(this),new an,new Oo(this),new xo(this),new Po(this),new Do,new No,new Vo(this),new _o(this),new vo(this),new Ho(this),new Ro(this)]:[];if(!ve.isEnabled("css-type-component-length-deprecate")&&this.property.parsedOk&&e.push(new Fo(this)),this.listItemElement.removeChildren(),this.valueElement=B.renderValueElement(this.name,this.value,e),this.nameElement=B.renderNameElement(this.name),this.property.name.startsWith("--")&&this.nameElement&&this.parentPaneInternal.addPopover(this.nameElement,{contents:()=>this.getVariablePopoverContents(this.property.name,this.matchedStylesInternal.computeCSSVariable(this.style,this.property.name)?.value??null),jslogContext:"elements.css-var"}),!this.treeOutline)return;const t=O.instance().moduleSetting("text-editor-indent").get();if(w(this.listItemElement.createChild("span","styles-clipboard-only"),t.repeat(this.section().nestingLevel+1)+(this.property.disabled?"/* ":"")),this.nameElement&&this.listItemElement.appendChild(this.nameElement),this.valueElement){const i=this.valueElement.firstElementChild&&this.valueElement.firstElementChild.tagName==="BR"?":":": ";this.listItemElement.createChild("span","styles-name-value-separator").textContent=i,this.expandElement&&(this.listItemElement.appendChild(this.expandElement),this.updateExpandElement()),this.listItemElement.appendChild(this.valueElement);const s=this.listItemElement.createChild("span","styles-semicolon");s.textContent=";",s.onmouseup=this.mouseUp.bind(this),this.property.disabled&&w(this.listItemElement.createChild("span","styles-clipboard-only")," */")}if(this.property.parsedOk)this.updateAuthoringHint();else{this.listItemElement.classList.add("not-parsed-ok");const n=this.#s(this.property.name),i=n?new El(n):null;this.listItemElement.insertBefore(this.parentPaneInternal.createExclamationMark(this.property,i),this.listItemElement.firstChild),N().isCSSPropertyName(this.property.name)&&this.listItemElement.classList.add("invalid-property-value")}if(this.property.activeInStyle()||this.listItemElement.classList.add("inactive"),this.updateFilter(),this.property.parsedOk&&this.parent&&this.parent.root){const n=document.createElement("input");n.classList.add("enabled-button","small"),n.type="checkbox",n.checked=!this.property.disabled,n.setAttribute("jslog",`${gs().track({click:!0})}`),n.addEventListener("mousedown",s=>s.consume(),!1),n.addEventListener("click",s=>{this.toggleDisabled(!this.property.disabled),s.consume()},!1),this.nameElement&&this.valueElement&&ue(n,`${this.nameElement.textContent} ${this.valueElement.textContent}`);const i=Mn("copy","copy");de.install(i,te(J.copyDeclaration)),i.addEventListener("click",()=>{const s=`${this.property.name}: ${this.property.value};`;U.copyText(s),L.styleTextCopied(1)}),this.listItemElement.append(i),this.listItemElement.insertBefore(n,this.listItemElement.firstChild)}}updateAuthoringHint(){this.listItemElement.classList.remove("inactive-property");const e=this.listItemElement.querySelector(".hint");e&&(Xt.delete(e),e?.closest(".hint-wrapper")?.remove());const t=this.property.name;if(!Xn.has(t)||this.node()?.isSVGNode())return;const i=this.parentPaneInternal.cssModel()?.fontFaces()||[],s=this.node()?.localName();for(const o of Xn.get(t)||[]){const r=o.getHint(t,this.computedStyles||void 0,this.parentsComputedStyles||void 0,s?.toLowerCase(),i);if(r){L.cssHintShown(o.getMetricType());const a=document.createElement("span");a.classList.add("hint-wrapper");const d=new Le;d.data={iconName:"info",color:"var(--icon-default)",width:"14px",height:"14px"},d.classList.add("hint"),a.append(d),Xt.set(d,r),this.listItemElement.append(a),this.listItemElement.classList.add("inactive-property");break}}}mouseUp(e){const t=yn.get(this.parentPaneInternal);if(yn.delete(this.parentPaneInternal),!t||this.listItemElement.hasSelection()||Ae(e.target)||e.composedPath()[0]instanceof HTMLButtonElement||(e.consume(!0),e.target===this.listItemElement))return;let n=e.target;if(je.eventHasCtrlEquivalentKey(e)&&this.#e.navigable){this.navigateToSource(n);return}this.expandElement&&n===this.expandElement||this.#e.editable&&(n=n.enclosingNodeOrSelfWithClass("webkit-css-property")||n.enclosingNodeOrSelfWithClass("value")||n.enclosingNodeOrSelfWithClass("styles-semicolon"),!n||n===this.nameElement?(Ai(this.nameElement,e),this.startEditingName()):(Ai(this.valueElement,e),this.startEditingValue()))}handleContextMenuEvent(e,t){const n=new ze(t);if(this.property.parsedOk&&this.parent&&this.parent.root){const s=this.parentPaneInternal.focusedSectionIndex();n.defaultSection().appendCheckboxItem(te(J.togglePropertyAndContinueEditing),async()=>{if(this.treeOutline){const o=this.treeOutline.rootElement().indexOfChild(this);this.editingCancelled(null,e),await this.toggleDisabled(!this.property.disabled),t.consume(),this.parentPaneInternal.continueEditingElement(s,o)}},{checked:!this.property.disabled,jslogContext:"toggle-property-and-continue-editing"})}const i=this.navigateToSource.bind(this);n.defaultSection().appendItem(te(J.revealInSourcesPanel),i,{jslogContext:"reveal-in-sources-panel"}),n.show()}handleCopyContextMenuEvent(e){if(!e.target)return;this.createCopyContextMenu(e).show()}createCopyContextMenu(e){const t=new ze(e);return t.headerSection().appendItem(te(J.copyDeclaration),()=>{const n=`${this.property.name}: ${this.property.value};`;U.copyText(n),L.styleTextCopied(3)},{jslogContext:"copy-declaration"}),t.headerSection().appendItem(te(J.copyProperty),()=>{U.copyText(this.property.name),L.styleTextCopied(4)},{jslogContext:"copy-property"}),t.headerSection().appendItem(te(J.copyValue),()=>{U.copyText(this.property.value),L.styleTextCopied(5)},{jslogContext:"copy-value"}),t.headerSection().appendItem(te(J.copyRule),()=>{const n=ce.formatLeadingProperties(this.#e).ruleText;U.copyText(n),L.styleTextCopied(7)},{jslogContext:"copy-rule"}),t.headerSection().appendItem(te(J.copyCssDeclarationAsJs),this.copyCssDeclarationAsJs.bind(this),{jslogContext:"copy-css-declaration-as-js"}),t.clipboardSection().appendItem(te(J.copyAllDeclarations),()=>{const n=ce.formatLeadingProperties(this.#e).allDeclarationText;U.copyText(n),L.styleTextCopied(8)},{jslogContext:"copy-all-declarations"}),t.clipboardSection().appendItem(te(J.copyAllCssDeclarationsAsJs),this.copyAllCssDeclarationAsJs.bind(this),{jslogContext:"copy-all-css-declarations-as-js"}),t.defaultSection().appendItem(te(J.copyAllCSSChanges),async()=>{const n=await this.parentPane().getFormattedChanges();U.copyText(n),L.styleTextCopied(2)},{jslogContext:"copy-all-css-changes"}),t.footerSection().appendItem(te(J.viewComputedValue),()=>{this.viewComputedValue()},{jslogContext:"view-computed-value"}),t}async viewComputedValue(){const e=k.instance().getComputedStyleWidget();e.isShowing()||await Ve.instance().showView("Computed");let t="";this.isShorthand?t="^"+this.property.name+"-":t="^"+this.property.name+"$";const n=new RegExp(t,"i");await e.filterComputedStyles(n),e.input.setValue(this.property.name),e.input.element.focus()}copyCssDeclarationAsJs(){const e=Qn(this.property);U.copyText(e),L.styleTextCopied(6)}copyAllCssDeclarationAsJs(){const t=this.#e.style().leadingProperties().filter(n=>!n.disabled).map(Qn);U.copyText(t.join(`,
`)),L.styleTextCopied(9)}navigateToSource(e,t){if(!this.#e.navigable)return;const n=e===this.nameElement,i=$e.instance().propertyUILocation(this.property,n);i&&ee(i,t)}startEditingValue(){const e={expanded:this.expanded,hasChildren:this.isExpandable(),isEditingName:!1,originalProperty:this.property,previousContent:this.value};if(N().isGridAreaDefiningProperty(this.name)){const t=Qr.splitStringByRegexes(this.value,[Jr]);e.previousContent=t.map(n=>n.value.trim()).join(`
`)}this.#o(e)}startEditingName(){const e={expanded:this.expanded,hasChildren:this.isExpandable(),isEditingName:!0,originalProperty:this.property,previousContent:this.name.split(`
`).map(t=>t.trim()).join(`
`)};this.#o(e)}#o(e){if(this.contextForTest=e,this.parent instanceof Z&&this.parent.isShorthand)return;const t=e.isEditingName?this.nameElement:this.valueElement;if(!t||Ae(t))return;this.setExpandable(!1),t.parentElement?.classList.add("child-editing"),t.textContent=e.previousContent;function n(r,a){const c=a.clipboardData;if(!c)return;const h=c.getData("Text");if(!h)return;const p=h.indexOf(":");if(p<0)return;const g=h.substring(0,p).trim(),f=h.substring(p+1).trim();a.preventDefault(),typeof r.originalName>"u"&&(this.nameElement&&(r.originalName=this.nameElement.textContent||""),this.valueElement&&(r.originalValue=this.valueElement.textContent||"")),this.property.name=g,this.property.value=f,this.nameElement&&(this.nameElement.textContent=g,this.nameElement.normalize()),this.valueElement&&(this.valueElement.textContent=f,this.valueElement.normalize());const u=a.target;this.editingCommitted(u.textContent||"",r,"forward")}function i(r,a){let c=a.target.textContent;r.isEditingName||(c=this.value||c),this.editingCommitted(c||"",r,"")}this.originalPropertyText=this.property.propertyText||"",this.parentPaneInternal.setEditingStyle(!0,this),t.parentElement?.scrollIntoViewIfNeeded(!1),this.prompt=new er(this,e.isEditingName,Array.from(this.#n??[])),this.prompt.setAutocompletionTimeout(0),this.prompt.addEventListener("TextChanged",()=>{this.applyFreeFlowStyleTextEdit(e)});const s=this.property.getInvalidStringForInvalidProperty();s&&ai(s);const o=this.prompt.attachAndStartEditing(t,i.bind(this,e));this.navigateToSource(t,!0),o.addEventListener("keydown",this.editingNameValueKeyDown.bind(this,e),!1),o.addEventListener("keypress",this.editingNameValueKeyPress.bind(this,e),!1),e.isEditingName&&(o.addEventListener("paste",n.bind(this,e),!1),o.addEventListener("contextmenu",this.handleContextMenuEvent.bind(this,e),!1)),t.getComponentSelection()?.selectAllChildren(t)}editingNameValueKeyDown(e,t){if(t.handled)return;const n=t,i=n.target;let s;if(n.key==="Enter"&&!n.shiftKey||e.isEditingName&&n.key===" ")s="forward";else if(n.keyCode===ki.Esc.code||n.key===ls)s="cancel";else if(!e.isEditingName&&this.newProperty&&n.keyCode===ki.Backspace.code){const o=i.getComponentSelection();o&&o.isCollapsed&&!o.focusOffset&&(t.preventDefault(),s="backward")}else n.key==="Tab"&&(s=n.shiftKey?"backward":"forward",t.preventDefault());if(s){switch(s){case"cancel":this.editingCancelled(null,e);break;case"forward":case"backward":this.editingCommitted(i.textContent||"",e,s);break}t.consume();return}}editingNameValueKeyPress(e,t){function n(d,c){let h="";for(let p=0;p<c;++p){const g=d[p];g==="\\"&&h!==""?++p:!h&&(g==='"'||g==="'")?h=g:h===g&&(h="")}return!h}const i=t,s=i.target,o=String.fromCharCode(i.charCode),r=this.#r(s);if(e.isEditingName?o===":":o===";"&&r!==null&&n(s.textContent||"",r)){t.consume(!0),this.editingCommitted(s.textContent||"",e,"forward");return}}#r(e){const t=e.getComponentSelection();if(!t?.containsNode(e,!0))return null;let n=t.anchorOffset,i=t.anchorNode;for(;i!==e;){for(;i?.previousSibling;)i=i.previousSibling,n+=i.textContent?.length??0;i=i?.parentNodeOrShadowHost()??null}return n}async applyFreeFlowStyleTextEdit(e){if(!this.prompt||!this.parentPaneInternal.node())return;const t=this.prompt.text();if(e.isEditingName&&t.includes(":")){this.editingCommitted(t,e,"forward");return}const n=this.prompt.textWithCurrentSuggestion();if(n.includes(";"))return;const i=this.parentPaneInternal.node();if(i&&!!i.pseudoType()){if(this.name.toLowerCase()==="content")return;const o=n.trim().toLowerCase();if(o.startsWith("content:")||o==="display: none")return}e.isEditingName?n.includes(":")?await this.applyStyleText(n,!1):this.hasBeenEditedIncrementally&&await this.applyOriginalStyle(e):this.nameElement&&await this.applyStyleText(`${this.nameElement.textContent}: ${n}`,!1)}kickFreeFlowStyleEditForTest(){const e=this.contextForTest;return this.applyFreeFlowStyleTextEdit(e)}editingEnded(e){this.setExpandable(e.hasChildren),e.expanded&&this.expand();const t=e.isEditingName?this.nameElement:this.valueElement;t&&t.parentElement&&t.parentElement.classList.remove("child-editing"),this.parentPaneInternal.setEditingStyle(!1)}editingCancelled(e,t){this.removePrompt(),this.hasBeenEditedIncrementally?this.applyOriginalStyle(t):this.newProperty&&this.treeOutline&&this.treeOutline.removeChild(this),this.updateTitle(),this.editingEnded(t)}async applyOriginalStyle(e){await this.applyStyleText(this.originalPropertyText,!1,e.originalProperty)}findSibling(e){let t=this;do{const n=e==="forward"?t.nextSibling:t.previousSibling;t=n instanceof Z?n:null}while(t&&t.inherited());return t}async editingCommitted(e,t,n){this.removePrompt(),this.editingEnded(t);const i=t.isEditingName;if(!this.nameElement||!this.valueElement)return;const s=this.nameElement.textContent||"",o=i&&s.includes(":")||!this.property;let r=!1,a=!1;const d=typeof t.originalName<"u",c=d&&(this.nameElement.textContent!==t.originalName||this.valueElement.textContent!==t.originalValue),h=d&&i&&this.valueElement.textContent!==t.originalValue;let p=this;const g=i!==(n==="forward"),f=this.newProperty&&!e&&(g||i);(n==="forward"&&(!i||h)||n==="backward"&&i)&&(p=p.findSibling(n),p||(n==="forward"&&(!this.newProperty||e)?r=!0:n==="backward"&&(a=!0)));let u=-1;p!==null&&this.treeOutline&&(u=this.treeOutline.rootElement().indexOfChild(p));const m=Wt(e),y=this.newProperty&&(h||g||!n&&!i||i&&m||o);if((e!==t.previousContent||c)&&!this.newProperty||y){let C;o?C=this.nameElement.textContent:m||this.newProperty&&Wt(this.valueElement.textContent||"")?C="":i?C=e+": "+this.property.value:C=this.property.name+": "+e,await this.applyStyleText(C||"",!0),b.call(this,this.newProperty,!m,this.#e)}else i?this.property.name=e:this.property.value=e,!d&&!this.newProperty&&this.updateTitle(),b.call(this,this.newProperty,!1,this.#e);function b(C,S,I){if(!n){this.parentPaneInternal.resetFocus();return}if(p&&p.parent){i?p.startEditingValue():p.startEditingName();return}if(p&&!p.parent){const F=I.propertiesTreeOutline.rootElement();if(n==="forward"&&m&&!i&&--u,u>=F.childCount()&&!this.newProperty)r=!0;else{const re=u>=0?F.childAt(u):null;if(re){C&&m?n==="forward"?re.startEditingName():re.startEditingValue():!i||h?re.startEditingName():re.startEditingValue();return}C||(a=!0)}}if(r){if(C&&!S&&i!==(n==="backward"))return;I.addNewBlankProperty().startEditingName();return}if(f){p=this.findSibling(n);const F=p||n==="backward"?I:I.nextEditableSibling();F&&(F.style().parentRule?F.startEditingSelector():F.moveEditorFromSelector(n));return}a&&(I.style().parentRule?I.startEditingSelector():I.moveEditorFromSelector(n))}}removePrompt(){this.prompt&&(this.prompt.detach(),this.prompt=null)}styleTextAppliedForTest(){}applyStyleText(e,t,n){return this.applyStyleThrottler.schedule(this.innerApplyStyleText.bind(this,e,t,n))}async innerApplyStyleText(e,t,n){if(!this.treeOutline||!this.property||!this.style.range)return;const s=this.hasBeenEditedIncrementally;if(e=e.replace(/[\xA0\t]/g," ").trim(),!e.length&&t&&this.newProperty&&!s){this.parent&&this.parent.removeChild(this);return}const o=this.parentPaneInternal.node();this.parentPaneInternal.setUserOperation(!0),e+=Zr(e),e+=")".repeat(ea(e)),e.length&&!/;\s*$/.test(e)&&(e+=";");const r=!this.newProperty||s;let a=await this.property.setText(e,t,r);s&&t&&!a&&(t=!1,a=await this.property.setText(this.originalPropertyText,t,r)),this.parentPaneInternal.setUserOperation(!1);const d=n||this.style.propertyAt(this.property.index),c=this.property.index<this.style.allProperties().length;if(!a||!d&&c){t&&(this.newProperty?this.treeOutline.removeChild(this):this.updateTitle()),this.styleTextAppliedForTest();return}d&&(this.listItemElement.classList.toggle("changed",this.isPropertyChanged(d)),this.parentPane().updateChangeStatus()),this.matchedStylesInternal.resetActiveProperties(),this.hasBeenEditedIncrementally=!0;const h=t&&!e.length;h?this.#e.resetToolbars():!h&&d&&(this.property=d),o===this.node()&&this.updatePane(),this.styleTextAppliedForTest()}ondblclick(){return!0}isEventWithinDisclosureTriangle(e){return e.target===this.expandElement}}const Dc=Object.freeze(Object.defineProperty({__proto__:null,AnchorFunctionRenderer:Vo,AngleRenderer:Lo,BezierRenderer:ko,CSSWideKeywordRenderer:xo,ColorMixRenderer:Io,ColorRenderer:xt,FlexGridRenderer:vo,FontRenderer:Ro,GridTemplateRenderer:Do,LengthRenderer:Fo,LightDarkColorRenderer:Po,LinearGradientRenderer:No,LinkableNameRenderer:Ao,PositionAnchorRenderer:_o,PositionTryRenderer:Ho,ShadowModel:Mo,ShadowRenderer:Oo,StylePropertyTreeElement:Z,VariableRenderer:To,activeHints:Xt},Symbol.toStringTag,{value:"Module"}));let bn=null;class ke extends gt{editor;pane;section;editorContainer;#e;constructor(){super(!0),this.contentElement.tabIndex=0,this.setDefaultFocusedElement(this.contentElement),this.editorContainer=document.createElement("div"),this.contentElement.appendChild(this.editorContainer),this.onPropertySelected=this.onPropertySelected.bind(this),this.onPropertyDeselected=this.onPropertyDeselected.bind(this)}getSection(){return this.section}async onPropertySelected(e){if(!this.section)return;const t=qi(this.section,e.data.name);t.property.value=e.data.value,t.updateTitle(),await t.applyStyleText(t.renderedPropertyText(),!1),await this.render()}async onPropertyDeselected(e){if(!this.section)return;await qi(this.section,e.data.name).applyStyleText("",!1),await this.render()}bindContext(e,t){this.pane=e,this.section=t,this.editor?.addEventListener("propertyselected",this.onPropertySelected),this.editor?.addEventListener("propertydeselected",this.onPropertyDeselected)}setTriggerKey(e){this.#e=e}getTriggerKey(){return this.#e}unbindContext(){this.pane=void 0,this.section=void 0,this.editor?.removeEventListener("propertyselected",this.onPropertySelected),this.editor?.removeEventListener("propertydeselected",this.onPropertyDeselected)}async render(){this.editor&&(this.editor.data={authoredProperties:this.section?Sd(this.section,this.editor.getEditableProperties()):new Map,computedProperties:this.pane?await Cd(this.pane):new Map})}static instance(){return bn||(bn=new ke),bn}setEditor(e){this.editor instanceof e||(this.contentElement.removeChildren(),this.editor=new e,this.contentElement.appendChild(this.editor))}static createTriggerButton(e,t,n,i,s){const o=Ed(i);return o.onclick=async r=>{r.stopPropagation();const a=e.swatchPopoverHelper(),d=ke.instance();d.setEditor(n),d.bindContext(e,t),d.setTriggerKey(s),await d.render();const c=o.enclosingNodeOrSelfWithClass("style-panes-wrapper"),h=()=>{a.hide(!0)};a.show(d,o,()=>{d.unbindContext(),c&&c.removeEventListener("scroll",h)}),c&&c.addEventListener("scroll",h)},o}}function Ed(l){const e=new li;return e.data={variant:"icon",size:"SMALL",iconName:"flex-wrap",title:l,jslogContext:"flex-wrap"},e.classList.add("styles-pane-button"),e.onmouseup=t=>{t.stopPropagation()},e}function qi(l,e){const t=l.propertiesTreeOutline.rootElement().children().find(i=>i instanceof Z&&i.property.name===e);if(t)return t;const n=l.addNewBlankProperty();return n.property.name=e,n}async function Cd(l){const t=await l.computedStyleModel().fetchComputedStyle();return t?t.computedStyle:new Map}function Sd(l,e){const t=new Map,n=new Set(e.map(i=>i.propertyName));for(const i of l.style().leadingProperties())n.has(i.name)&&t.set(i.name,i.value);return t}const Fc=Object.freeze(Object.defineProperty({__proto__:null,StyleEditorWidget:ke},Symbol.toStringTag,{value:"Module"})),Si=new CSSStyleSheet;Si.replaceSync(`/*
 * Copyright 2018 The Chromium Authors. All rights reserved.
 * Use of this source code is governed by a BSD-style license that can be
 * found in the LICENSE file.
 */

:host {
  display: inline;
}

.node-link {
  cursor: pointer;
  display: inline;
  pointer-events: auto;
  outline-offset: 2px;

  /* If the element has lots of classes, don't let the label get too wide */
  text-overflow: ellipsis;
  overflow: hidden;
  max-width: min(100%, 550px);

  &:focus-visible {
    outline-width: unset;
  }

  &.dynamic-link:hover {
    text-decoration: underline;
  }
}

.node-label-name {
  color: var(--sys-color-token-property-special);

  .dynamic-link & {
    color: var(--text-link);
  }
}

.node-label-class,
.node-label-pseudo {
  color: var(--sys-color-token-attribute);
}

/*# sourceURL=domLinkifier.css */
`);const Uo={node:"<node>"},wd=G("panels/elements/DOMLinkifier.ts",Uo),vd=q.bind(void 0,wd),jo=function(l,e,t){const n=l,i=l.nodeType()===Node.ELEMENT_NODE&&l.pseudoType();if(i&&l.parentNode&&(l=l.parentNode),l.isViewTransitionPseudoNode()){const d=e.createChild("span","extra node-label-pseudo"),c=`::${n.pseudoType()}(${n.pseudoIdentifier()})`;w(d,c),de.install(e,t.tooltip||c);return}const s=e.createChild("span","node-label-name");if(t.textContent){s.textContent=t.textContent,de.install(e,t.tooltip||t.textContent);return}let o=l.nodeNameInCorrectCase();s.textContent=o;const r=l.getAttribute("id");if(r){const d=e.createChild("span","node-label-id"),c="#"+r;o+=c,w(d,c),s.classList.add("extra")}const a=l.getAttribute("class");if(a){const d=a.split(/\s+/);if(d.length){const c=new Set,h=e.createChild("span","extra node-label-class");for(let p=0;p<d.length;++p){const g=d[p];if(g&&!c.has(g)){const f="."+g;o+=f,w(h,f),c.add(g)}}}}if(i){const d=n.pseudoIdentifier(),c=e.createChild("span","extra node-label-pseudo");let h="::"+n.pseudoType();d&&(h+=`(${d})`),w(c,h),o+=h}de.install(e,t.tooltip||o)},$o=function(l,e={tooltip:void 0,preventKeyboardFocus:void 0,textContent:void 0,isDynamicLink:!1}){if(!l)return document.createTextNode(vd(Uo.node));const t=document.createElement("span");t.classList.add("monospace");const i=di(t,{cssFile:[Si],delegatesFocus:void 0}).createChild("button","node-link text-button link-style");return i.classList.toggle("dynamic-link",e.isDynamicLink),i.setAttribute("jslog",`${ys("node").track({click:!0,keydown:"Enter"})}`),jo(l,i,e),i.addEventListener("click",()=>(ee(l,!1),!1),!1),i.addEventListener("mouseover",l.highlight.bind(l,void 0),!1),i.addEventListener("mouseleave",()=>se.hideDOMNodeHighlight(),!1),e.preventKeyboardFocus&&(i.tabIndex=-1),t},wi=function(l,e={tooltip:void 0,preventKeyboardFocus:void 0}){const t=document.createElement("div"),i=di(t,{cssFile:[Si],delegatesFocus:void 0}).createChild("button","node-link text-button link-style");i.setAttribute("jslog",`${ys("node").track({click:!0})}`),i.createChild("slot"),i.addEventListener("click",l.resolve.bind(l,s),!1),i.addEventListener("mousedown",o=>o.consume(),!1),e.preventKeyboardFocus&&(i.tabIndex=-1);function s(o){ee(o)}return t};let En;class vi{static instance(e={forceNew:null}){const{forceNew:t}=e;return(!En||t)&&(En=new vi),En}linkify(e,t){if(e instanceof A)return $o(e,t);if(e instanceof tn)return wi(e,t);throw new Error("Can't linkify non-node")}}const Bc=Object.freeze(Object.defineProperty({__proto__:null,Linkifier:vi,decorateNodeLabel:jo,linkifyDeferredNodeReference:wi,linkifyNodeReference:$o},Symbol.toStringTag,{value:"Module"})),Wo=new CSSStyleSheet;Wo.replaceSync(`/*
 * Copyright 2016 The Chromium Authors. All rights reserved.
 * Use of this source code is governed by a BSD-style license that can be
 * found in the LICENSE file.
 */

.has-ignorable-error .webkit-css-property {
  color: inherit;
}

.tree-outline {
  padding: 0;
}

.tree-outline li {
  margin-left: 12px;
  padding-left: 22px;
  white-space: normal;
  text-overflow: ellipsis;
  cursor: auto;
  display: block;

  &::before {
    display: none;
  }

  .webkit-css-property {
    margin-left: -22px; /* outdent the first line of longhand properties (in an expanded shorthand) to compensate for the "padding-left" shift in .tree-outline li */
  }

  &.not-parsed-ok {
    margin-left: 0;

    .exclamation-mark {
      display: inline-block;
      position: relative;
      width: 11px;
      height: 10px;
      margin: 0 7px 0 0;
      top: 1px;
      left: -36px; /* outdent to compensate for the top-level property indent */
      user-select: none;
      cursor: default;
      z-index: 1;
      mask: var(--image-file-warning-filled) center / 14px no-repeat;
      background-color: var(--icon-warning);
    }

    &.has-ignorable-error .exclamation-mark {
      background-color: unset;
    }
  }

  &.filter-match {
    background-color: var(--sys-color-tonal-container);
  }

  &.editing {
    margin-left: 10px;
    text-overflow: clip;
  }

  &.editing-sub-part {
    padding: 3px 6px 8px 18px;
    margin: -1px -6px -8px;
    text-overflow: clip;
  }

  &.child-editing {
    word-wrap: break-word !important; /* stylelint-disable-line declaration-no-important */
    white-space: normal !important; /* stylelint-disable-line declaration-no-important */
    padding-left: 0;
  }

  .info {
    padding-top: 4px;
    padding-bottom: 3px;
  }
}

.tree-outline > li {
  padding-left: 38px;
  clear: both;
  min-height: 14px;

  .webkit-css-property {
    margin-left: -38px; /* outdent the first line of the top-level properties to compensate for the "padding-left" shift in .tree-outline > li */
  }

  &.child-editing {
    .text-prompt {
      white-space: pre-wrap;
    }

    .webkit-css-property {
      margin-left: 0;
    }
  }
}

ol:not(.tree-outline) {
  display: none;
  margin: 0;
  padding-inline-start: 12px;
  list-style: none;
}

ol.expanded {
  display: block;
}

.enabled-button {
  visibility: hidden;
  float: left;
  font-size: 10px;
  margin: 0;
  vertical-align: top;
  position: relative;
  z-index: 1;
  width: 18px;
  left: -40px; /* original -2px + (-38px) to compensate for the first line outdent */
  top: 0.5px;
  height: 13px;
}

input.enabled-button.small {
  &:hover::after,
  &:active::before {
    left: 3px;
  }
}

.overloaded:not(.has-ignorable-error, .invalid-property-value),
.inactive:not(.invalid-property-value),
.disabled,
.not-parsed-ok:not(.has-ignorable-error, .invalid-property-value),
.not-parsed-ok.invalid-property-value .value {
  text-decoration: line-through;
}

.implicit,
.inherited,
.inactive-property {
  opacity: 50%;
}

.changed {
  background-color: var(--sys-color-tertiary-container);

  &::after {
    content: "";
    position: absolute;
    left: -4px;
    top: 0;
    width: 2px;
    height: 100%;
    background-color: var(--sys-color-tertiary);
  }
}

.copy {
  display: none;

  .changed:hover & {
    position: absolute;
    right: -4px;
    top: 0;
    bottom: 0;
    margin: auto;
    display: inline-block;
    cursor: pointer;
    transform: scale(0.9);
  }
}

.hint-wrapper {
  align-items: center;
  display: inline-block;
  margin-left: 3px;
  max-height: 13px;
  max-width: 13px;
  vertical-align: middle;
}

.hint {
  cursor: pointer;
  display: block;
  position: relative;
  left: -1.5px;
  top: -1.5px;
}

.has-ignorable-error {
  color: var(--sys-color-state-disabled);
}

:host-context(.no-affect) .tree-outline li {
  opacity: 50%;

  &.editing {
    opacity: 100%;
  }
}

:host-context(.styles-panel-hovered:not(.read-only)) .webkit-css-property:hover,
:host-context(.styles-panel-hovered:not(.read-only)) .value:hover {
  text-decoration: underline;
  cursor: default;
}

.styles-name-value-separator {
  display: inline-block;
  width: 14px;
  text-decoration: inherit;
  white-space: pre;
}

.styles-clipboard-only {
  display: inline-block;
  width: 0;
  opacity: 0%;
  pointer-events: none;
  white-space: pre;

  .tree-outline li.child-editing & {
    display: none;
  }
}

.styles-pane-button {
  height: 15px;
  margin: 0 0 0 6px;
  position: absolute;
  top: -1px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
}
/* Matched styles */

:host-context(.matched-styles) .tree-outline li {
  margin-left: 0 !important; /* stylelint-disable-line declaration-no-important */
}

.expand-icon {
  user-select: none;
  margin-left: -6px;
  margin-right: 2px;
  margin-bottom: -4px;

  .tree-outline li:not(.parent) & {
    display: none;
  }
}

:host-context(.matched-styles:not(.read-only):hover) li:not(.child-editing) .enabled-button,
:host-context(.matched-styles:not(.read-only)) .tree-outline li.disabled:not(.child-editing) .enabled-button {
  visibility: visible;
}

:host-context(.matched-styles) ol.expanded {
  margin-left: 16px;
}

.devtools-link-styled-trim {
  display: inline-block;
  overflow: hidden;
  white-space: nowrap;
  text-overflow: ellipsis;
  max-width: 80%;
  vertical-align: bottom;
}

devtools-css-angle,
devtools-css-length {
  display: inline-block;
}

/*# sourceURL=stylePropertiesTreeOutline.css */
`);const ie={insertStyleRuleBelow:"Insert style rule below",constructedStylesheet:"constructed stylesheet",userAgentStylesheet:"user agent stylesheet",injectedStylesheet:"injected stylesheet",viaInspector:"via inspector",styleAttribute:"`style` attribute",sattributesStyle:"{PH1}[Attributes Style]",showAllPropertiesSMore:"Show all properties ({PH1} more)",copySelector:"Copy `selector`",copyRule:"Copy rule",copyAllDeclarations:"Copy all declarations",copyAllCSSChanges:"Copy all CSS changes",cssSelector:"`CSS` selector"},xd=G("panels/elements/StylePropertiesSection.ts",ie),ae=q.bind(void 0,xd),Xi="<style>",Td=50;class z{parentPane;styleInternal;matchedStyles;computedStyles;parentsComputedStyles;editable;hoverTimer;willCauseCancelEditing;forceShowAll;originalPropertiesCount;element;#e;titleElement;propertiesTreeOutline;showAllButton;selectorElement;newStyleRuleToolbar;fontEditorToolbar;fontEditorSectionManager;fontEditorButton;selectedSinceMouseDown;elementToSelectorIndex;navigable;selectorRefElement;hoverableSelectorsMode;isHiddenInternal;nestingLevel=0;#t;#n;nextEditorTriggerButtonIdx=1;sectionIdx=0;static#s=new WeakMap;#i;constructor(e,t,n,i,s,o,r){this.#i=r,this.parentPane=e,this.sectionIdx=i,this.styleInternal=n,this.matchedStyles=t,this.computedStyles=s,this.parentsComputedStyles=o,this.editable=!!(n.styleSheetId&&n.range),this.hoverTimer=null,this.willCauseCancelEditing=!1,this.forceShowAll=!1,this.originalPropertiesCount=n.leadingProperties().length;const a=n.parentRule,d=this.headerText();this.element=document.createElement("div"),this.element.classList.add("styles-section"),this.element.classList.add("matched-styles"),this.element.classList.add("monospace"),this.element.setAttribute("jslog",`${na("style-properties").track({keydown:"ArrowUp|ArrowDown|ArrowLeft|ArrowRight|Enter|Space"})}`),ue(this.element,`${d}, css selector`),this.element.tabIndex=-1,ia(this.element),this.element.addEventListener("keydown",this.onKeyDown.bind(this),!1),e.sectionByElement.set(this.element,this),this.#e=this.element.createChild("div","style-rule"),this.#t=document.createElement("div"),this.#t.classList.add("ancestor-rule-list"),this.element.prepend(this.#t),this.#n=document.createElement("div"),this.#n.classList.add("ancestor-closing-braces"),this.element.append(this.#n),this.updateAncestorRuleList(),this.titleElement=this.#e.createChild("div","styles-section-title "+(a?"styles-selector":"")),this.propertiesTreeOutline=new sa,this.propertiesTreeOutline.setFocusable(!1),this.propertiesTreeOutline.registerCSSFiles([Wo]),this.propertiesTreeOutline.element.classList.add("style-properties","matched-styles","monospace"),this.#e.appendChild(this.propertiesTreeOutline.element),this.showAllButton=bs("",this.showAllItems.bind(this),{className:"styles-show-all",jslogContext:"elements.show-all-style-properties"}),this.#e.appendChild(this.showAllButton);const c=O.instance().moduleSetting("text-editor-indent").get(),h=document.createElement("div");if(h.createChild("span","styles-clipboard-only").textContent=c.repeat(this.nestingLevel),h.classList.add("selector-container"),this.selectorElement=document.createElement("span"),ue(this.selectorElement,ae(ie.cssSelector)),this.selectorElement.classList.add("selector"),this.selectorElement.textContent=d,h.appendChild(this.selectorElement),this.selectorElement.addEventListener("mouseenter",this.onMouseEnterSelector.bind(this),!1),this.selectorElement.addEventListener("mouseleave",this.onMouseOutSelector.bind(this),!1),d.length>0||!(a instanceof ge)){const p=h.createChild("span","sidebar-pane-open-brace");p.textContent=d.length>0?" {":"{";const g=this.#e.createChild("div","sidebar-pane-closing-brace");g.createChild("span","styles-clipboard-only").textContent=c.repeat(this.nestingLevel),g.createChild("span").textContent="}"}else this.titleElement.classList.add("hidden");if(a){const p=new On(ae(ie.insertStyleRuleBelow),"plus",void 0,"elements.new-style-rule");p.addEventListener("Click",this.onNewRuleClick,this),p.setSize("SMALL"),p.element.tabIndex=-1,this.newStyleRuleToolbar||(this.newStyleRuleToolbar=new Ge("sidebar-pane-section-toolbar new-rule-toolbar",this.element)),this.newStyleRuleToolbar.appendToolbarItem(p),Es(this.newStyleRuleToolbar.element)}if(ve.isEnabled("font-editor")&&this.editable&&(this.fontEditorToolbar=new Ge("sidebar-pane-section-toolbar",this.#e),this.fontEditorSectionManager=new Hs(this.parentPane.swatchPopoverHelper(),this),this.fontEditorButton=new On("Font Editor","custom-typography",void 0,"font-editor"),this.fontEditorButton.addEventListener("Click",()=>{this.onFontEditorButtonClicked()},this),this.fontEditorButton.element.addEventListener("keydown",p=>{oa(p)&&(p.consume(!0),this.onFontEditorButtonClicked())},!1),this.fontEditorToolbar.appendToolbarItem(this.fontEditorButton),this.styleInternal.type===Tt.Inline?this.newStyleRuleToolbar&&this.newStyleRuleToolbar.element.classList.add("shifted-toolbar"):this.fontEditorToolbar.element.classList.add("font-toolbar-hidden")),this.selectorElement.addEventListener("click",this.handleSelectorClick.bind(this),!1),this.selectorElement.setAttribute("jslog",`${ra("selector").track({click:!0,change:!0})}`),this.element.addEventListener("contextmenu",this.handleContextMenuEvent.bind(this),!1),this.element.addEventListener("mousedown",this.handleEmptySpaceMouseDown.bind(this),!1),this.element.addEventListener("click",this.handleEmptySpaceClick.bind(this),!1),this.element.addEventListener("mousemove",this.onMouseMove.bind(this),!1),this.element.addEventListener("mouseleave",this.onMouseLeave.bind(this),!1),this.selectedSinceMouseDown=!1,this.elementToSelectorIndex=new WeakMap,a){if(a.isUserAgent()||a.isInjected())this.editable=!1;else if(a.styleSheetId){const p=a.cssModel().styleSheetHeaderForId(a.styleSheetId);this.navigable=p&&!p.isAnonymousInlineStyleSheet()}}this.selectorRefElement=document.createElement("div"),this.selectorRefElement.classList.add("styles-section-subtitle"),this.element.prepend(this.selectorRefElement),this.updateRuleOrigin(),this.titleElement.appendChild(h),this.navigable&&this.element.classList.add("navigable"),this.editable||(this.element.classList.add("read-only"),this.propertiesTreeOutline.element.classList.add("read-only")),this.hoverableSelectorsMode=!1,this.isHiddenInternal=!1,this.markSelectorMatches(),this.onpopulate()}setComputedStyles(e){this.computedStyles=e}setParentsComputedStyles(e){this.parentsComputedStyles=e}updateAuthoringHint(){let e=this.propertiesTreeOutline.firstChild();for(;e;)e instanceof Z&&(e.setComputedStyles(this.computedStyles),e.setParentsComputedStyles(this.parentsComputedStyles),e.updateAuthoringHint()),e=e.nextSibling}setSectionIdx(e){this.sectionIdx=e,this.onpopulate()}getSectionIdx(){return this.sectionIdx}registerFontProperty(e){this.fontEditorSectionManager&&this.fontEditorSectionManager.registerFontProperty(e),this.fontEditorToolbar&&(this.fontEditorToolbar.element.classList.remove("font-toolbar-hidden"),this.newStyleRuleToolbar&&this.newStyleRuleToolbar.element.classList.add("shifted-toolbar"))}resetToolbars(){this.parentPane.swatchPopoverHelper().isShowing()||this.styleInternal.type===Tt.Inline||(this.fontEditorToolbar&&this.fontEditorToolbar.element.classList.add("font-toolbar-hidden"),this.newStyleRuleToolbar&&this.newStyleRuleToolbar.element.classList.remove("shifted-toolbar"))}static createRuleOriginNode(e,t,n){if(!n)return document.createTextNode("");const i=z.getRuleLocationFromCSSRule(n),s=n.styleSheetId?e.cssModel().styleSheetHeaderForId(n.styleSheetId):null;function o(){return n&&i&&n.styleSheetId&&s&&(!s.isAnonymousInlineStyleSheet()||e.cssModel().sourceMapManager().sourceMapForClient(s))?z.linkifyRuleLocation(e.cssModel(),t,n.styleSheetId,i):null}function r(c){if(s?.ownerNode){const h=wi(s.ownerNode,{preventKeyboardFocus:!1,tooltip:void 0});return h.textContent=c,h}return null}if(s?.isMutable&&!s.isViaInspector()){const c=s.isConstructedByNew()&&!s.sourceMapURL?null:o();if(c)return c;const h=s.isConstructedByNew()?ae(ie.constructedStylesheet):Xi,p=r(h);return p||document.createTextNode(h)}const a=o();if(a)return a;if(n.isUserAgent())return document.createTextNode(ae(ie.userAgentStylesheet));if(n.isInjected())return document.createTextNode(ae(ie.injectedStylesheet));if(n.isViaInspector())return document.createTextNode(ae(ie.viaInspector));const d=r(Xi);return d||document.createTextNode("")}createRuleOriginNode(e,t,n){return z.createRuleOriginNode(e,t,n)}static getRuleLocationFromCSSRule(e){let t;return e instanceof ge?t=e.style.range:e instanceof Dt&&(t=e.key().range),t}static tryNavigateToRuleLocation(e,t){if(!t)return;const n=this.getRuleLocationFromCSSRule(t),i=t.styleSheetId?e.cssModel().styleSheetHeaderForId(t.styleSheetId):null;if(n&&t.styleSheetId&&i&&!i.isAnonymousInlineStyleSheet()){const s=this.getCSSSelectorLocation(e.cssModel(),t.styleSheetId,n);this.revealSelectorSource(s,!0)}}static linkifyRuleLocation(e,t,n,i){const s=this.getCSSSelectorLocation(e,n,i);return t.linkifyCSSLocation(s)}static getCSSSelectorLocation(e,t,n){const i=e.styleSheetHeaderForId(t),s=i.lineNumberInSource(n.startLine),o=i.columnNumberInSource(n.startLine,n.startColumn);return new Mi(i,s,o)}getFocused(){return this.propertiesTreeOutline.shadowRoot.activeElement||null}focusNext(e){const t=this.getFocused();t&&(t.tabIndex=-1),e.focus(),this.propertiesTreeOutline.shadowRoot.contains(e)&&(e.tabIndex=0)}ruleNavigation(e){if(e.altKey||e.ctrlKey||e.metaKey||e.shiftKey)return;const t=this.getFocused();let n=null;const i=Array.from(this.propertiesTreeOutline.shadowRoot.querySelectorAll("[tabindex]"));if(i.length===0)return;const s=t?i.indexOf(t):-1;if(e.key==="ArrowLeft")n=i[s-1]||this.element;else if(e.key==="ArrowRight")n=i[s+1]||this.element;else if(e.key==="ArrowUp"||e.key==="ArrowDown"){this.focusNext(this.element);return}n&&(this.focusNext(n),e.consume(!0))}onKeyDown(e){const t=e;if(!(dt()||!this.editable||t.altKey||t.ctrlKey||t.metaKey))switch(t.key){case"Enter":case" ":this.startEditingAtFirstPosition(),t.consume(!0);break;case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"ArrowDown":this.ruleNavigation(t);break;default:t.key.length===1&&this.addNewBlankProperty(0).startEditingName();break}}setSectionHovered(e){this.element.classList.toggle("styles-panel-hovered",e),this.propertiesTreeOutline.element.classList.toggle("styles-panel-hovered",e),this.hoverableSelectorsMode!==e&&(this.hoverableSelectorsMode=e,this.markSelectorMatches())}onMouseLeave(e){this.setSectionHovered(!1),this.parentPane.setActiveProperty(null)}onMouseMove(e){const t=je.eventHasCtrlEquivalentKey(e);this.setSectionHovered(t);const n=this.propertiesTreeOutline.treeElementFromEvent(e);n instanceof Z?this.parentPane.setActiveProperty(n):this.parentPane.setActiveProperty(null);const i=this.element.getComponentSelection();!this.selectedSinceMouseDown&&i&&i.toString()&&(this.selectedSinceMouseDown=!0)}onFontEditorButtonClicked(){this.fontEditorSectionManager&&this.fontEditorButton&&this.fontEditorSectionManager.showPopover(this.fontEditorButton.element,this.parentPane)}style(){return this.styleInternal}headerText(){if(this.#i)return this.#i;const e=this.matchedStyles.nodeForStyle(this.styleInternal);return this.styleInternal.type===Tt.Inline?this.matchedStyles.isInherited(this.styleInternal)?ae(ie.styleAttribute):"element.style":e&&this.styleInternal.type===Tt.Attributes?ae(ie.sattributesStyle,{PH1:e.nodeNameInCorrectCase()}):this.styleInternal.parentRule instanceof ge?this.styleInternal.parentRule.selectorText():""}onMouseOutSelector(){this.hoverTimer&&clearTimeout(this.hoverTimer),se.hideDOMNodeHighlight()}onMouseEnterSelector(){this.hoverTimer&&clearTimeout(this.hoverTimer),this.hoverTimer=window.setTimeout(this.highlight.bind(this),300)}highlight(e="all"){se.hideDOMNodeHighlight();const t=this.parentPane.node();if(!t)return;const n=this.styleInternal.parentRule&&this.styleInternal.parentRule instanceof ge?this.styleInternal.parentRule.selectorText():void 0;t.domModel().overlayModel().highlightInOverlay({node:t,selectorList:n},e)}firstSibling(){const e=this.element.parentElement;if(!e)return null;let t=e.firstChild;for(;t;){const n=this.parentPane.sectionByElement.get(t);if(n)return n;t=t.nextSibling}return null}findCurrentOrNextVisible(e,t){if(!this.isHidden())return this;if(this===t)return null;t||(t=this);let n=null;const i=e?this.nextSibling():this.previousSibling();if(i)n=i.findCurrentOrNextVisible(e,t);else{const s=e?this.firstSibling():this.lastSibling();s&&(n=s.findCurrentOrNextVisible(e,t))}return n}lastSibling(){const e=this.element.parentElement;if(!e)return null;let t=e.lastChild;for(;t;){const n=this.parentPane.sectionByElement.get(t);if(n)return n;t=t.previousSibling}return null}nextSibling(){let e=this.element;do e=e.nextSibling;while(e&&!this.parentPane.sectionByElement.has(e));if(e)return this.parentPane.sectionByElement.get(e)}previousSibling(){let e=this.element;do e=e.previousSibling;while(e&&!this.parentPane.sectionByElement.has(e));if(e)return this.parentPane.sectionByElement.get(e)}onNewRuleClick(e){e.data.consume();const t=this.styleInternal.parentRule;if(!t||!t.style.range||t.styleSheetId===void 0)return;const n=zt.createFromLocation(t.style.range.endLine,t.style.range.endColumn+1);this.parentPane.addBlankSection(this,t.styleSheetId,n)}styleSheetEdited(e){const t=this.styleInternal.parentRule;t?t.rebase(e):this.styleInternal.rebase(e),this.updateAncestorRuleList(),this.updateRuleOrigin()}createAncestorRules(e){let t=0,n=0,i=0,s=0,o=0;this.nestingLevel=0;const r=O.instance().moduleSetting("text-editor-indent").get();for(const d of e.ruleTypes){let c;switch(d){case"MediaRule":c=this.createMediaElement(e.media[t++]);break;case"ContainerRule":c=this.createContainerQueryElement(e.containerQueries[n++]);break;case"ScopeRule":c=this.createScopeElement(e.scopes[i++]);break;case"SupportsRule":c=this.createSupportsElement(e.supports[s++]);break;case"StyleRule":c=this.createNestingElement(e.nestingSelectors?.[o++]);break}if(c){this.#t.prepend(c);const h=document.createElement("div");h.createChild("span","styles-clipboard-only").textContent=r.repeat(this.nestingLevel),h.style.paddingLeft=`${this.nestingLevel}ch`,h.append("}"),this.#n.prepend(h),this.nestingLevel++}}this.headerText().length===0&&this.nestingLevel--;let a=0;for(const d of this.#t.children){const c=document.createElement("span");c.classList.add("styles-clipboard-only"),c.setAttribute("slot","indent"),c.textContent=r.repeat(a),d.prepend(c),d.style.paddingLeft=`${a}ch`,a++}}createMediaElement(e){if(!e.text||!e.text.includes("(")&&e.text!=="print")return;let n="",i="",s;switch(e.source){case Nt.LINKED_SHEET:case Nt.INLINE_SHEET:{i=`media="${e.text}"`;break}case Nt.MEDIA_RULE:{n="@media",i=e.text,e.styleSheetId&&(s=this.handleQueryRuleClick.bind(this,e));break}case Nt.IMPORT_RULE:{i=`@import ${e.text}`;break}}const o=new At;return o.data={queryPrefix:n,queryText:i,onQueryTextClick:s,jslogContext:"media-query"},o}createContainerQueryElement(e){if(!e.text)return;let t;e.styleSheetId&&(t=this.handleQueryRuleClick.bind(this,e));const n=new At;return n.data={queryPrefix:"@container",queryName:e.name,queryText:e.text,onQueryTextClick:t,jslogContext:"container-query"},/^style\(.*\)/.test(e.text)||this.addContainerForContainerQuery(e),n}createScopeElement(e){let t;e.styleSheetId&&(t=this.handleQueryRuleClick.bind(this,e));const n=new At;return n.data={queryPrefix:"@scope",queryText:e.text,onQueryTextClick:t,jslogContext:"scope"},n}createSupportsElement(e){if(!e.text)return;let t;e.styleSheetId&&(t=this.handleQueryRuleClick.bind(this,e));const n=new At;return n.data={queryPrefix:"@supports",queryText:e.text,onQueryTextClick:t,jslogContext:"supports"},n}createNestingElement(e){if(!e)return;const t=document.createElement("div");return t.textContent=`${e} {`,t}async addContainerForContainerQuery(e){const t=await e.getContainerForNode(this.matchedStyles.node().id);if(!t)return;const n=new vl;n.data={container:Be(t.containerNode),queryName:e.name,onContainerLinkClick:i=>{i.preventDefault(),k.instance().revealAndSelectNode(t.containerNode,!0,!0),t.containerNode.scrollIntoView()}},n.addEventListener("queriedsizerequested",async()=>{const i=await t.getContainerSizeDetails();i&&n.updateContainerQueriedSizeDetails(i)}),this.#t.prepend(n)}updateAncestorRuleList(){this.#t.removeChildren(),this.#n.removeChildren(),this.styleInternal.parentRule&&this.styleInternal.parentRule instanceof ge&&this.createAncestorRules(this.styleInternal.parentRule),this.#e.style.paddingLeft=`${this.nestingLevel}ch`}isPropertyInherited(e){return this.matchedStyles.isInherited(this.styleInternal)?!N().isPropertyInherited(e):!1}nextEditableSibling(){let e=this;do e=e.nextSibling();while(e&&!e.editable);if(!e)for(e=this.firstSibling();e&&!e.editable;)e=e.nextSibling();return e&&e.editable?e:null}previousEditableSibling(){let e=this;do e=e.previousSibling();while(e&&!e.editable);if(!e)for(e=this.lastSibling();e&&!e.editable;)e=e.previousSibling();return e&&e.editable?e:null}refreshUpdate(e){this.parentPane.refreshUpdate(this,e)}updateVarFunctions(e){if(!e.property.name.startsWith("--"))return;let t=this.propertiesTreeOutline.firstChild();for(;t;)t!==e&&t instanceof Z&&t.refreshIfComputedValueChanged(),t=t.traverseNextTreeElement(!1,null,!0)}update(e){const t=this.headerText();if(this.selectorElement.textContent=t,this.titleElement.classList.toggle("hidden",t.length===0),this.markSelectorMatches(),e)this.onpopulate();else{let n=this.propertiesTreeOutline.firstChild();for(;n&&n instanceof Z;)n.setOverloaded(this.isPropertyOverloaded(n.property)),n=n.traverseNextTreeElement(!1,null,!0)}}showAllItems(e){e&&e.consume(),!this.forceShowAll&&(this.forceShowAll=!0,this.onpopulate())}onpopulate(){this.parentPane.setActiveProperty(null),this.nextEditorTriggerButtonIdx=1,this.propertiesTreeOutline.removeChildren();const e=this.styleInternal;let t=0;const n=e.leadingProperties(),i=Td+n.length-this.originalPropertiesCount;for(const s of n){if(!this.forceShowAll&&t>=i)break;t++;const o=s.getLonghandProperties().length>0,r=this.isPropertyInherited(s.name),a=this.isPropertyOverloaded(s);if(e.parentRule&&e.parentRule.isUserAgent()&&r)continue;const d=new Z({stylesPane:this.parentPane,section:this,matchedStyles:this.matchedStyles,property:s,isShorthand:o,inherited:r,overloaded:a,newProperty:!1});d.setComputedStyles(this.computedStyles),d.setParentsComputedStyles(this.parentsComputedStyles),this.propertiesTreeOutline.appendChild(d)}t<n.length?(this.showAllButton.classList.remove("hidden"),this.showAllButton.textContent=ae(ie.showAllPropertiesSMore,{PH1:n.length-t})):this.showAllButton.classList.add("hidden")}isPropertyOverloaded(e){return this.matchedStyles.propertyState(e)==="Overloaded"}updateFilter(){let e=!1;this.showAllItems();for(const i of this.propertiesTreeOutline.rootElement().children())if(i instanceof Z){const s=i.updateFilter();e=e||s}const t=this.parentPane.filterRegex(),n=!e&&t!==null&&!t.test(this.element.deepTextContent());return this.isHiddenInternal=n,this.element.classList.toggle("hidden",n),!n&&this.styleInternal.parentRule&&this.markSelectorHighlights(),!n}isHidden(){return this.isHiddenInternal}markSelectorMatches(){const e=this.styleInternal.parentRule;if(!e||!(e instanceof ge))return;const t=this.matchedStyles.getMatchingSelectors(e),n=new Array(e.selectors.length).fill(!1);for(const s of t)n[s]=!0;if(this.parentPane.isEditingStyle)return;const i=z.renderSelectors(e.selectors,n,this.elementToSelectorIndex);this.selectorElement.removeChildren(),this.selectorElement.appendChild(i),this.markSelectorHighlights()}static getSpecificityStoredForNodeElement(e){return z.#s.get(e)}static renderSelectors(e,t,n){const i=document.createDocumentFragment();for(const[s,o]of e.entries()){s&&w(i,", ");const r=document.createElement("span");r.classList.add("simple-selector"),r.classList.toggle("selector-matches",t[s]),o.specificity&&z.#s.set(r,o.specificity),n.set(r,s),r.textContent=e[s].text,i.append(r)}return i}markSelectorHighlights(){const e=this.selectorElement.getElementsByClassName("simple-selector"),t=this.parentPane.filterRegex();for(let n=0;n<e.length;++n){const i=t!==null&&t.test(e[n].textContent||"");e[n].classList.toggle("filter-match",i)}}addNewBlankProperty(e=this.propertiesTreeOutline.rootElement().childCount()){const t=this.styleInternal.newBlankProperty(e),n=new Z({stylesPane:this.parentPane,section:this,matchedStyles:this.matchedStyles,property:t,isShorthand:!1,inherited:!1,overloaded:!1,newProperty:!0});return this.propertiesTreeOutline.insertChild(n,t.index),n}handleEmptySpaceMouseDown(){this.willCauseCancelEditing=this.parentPane.isEditingStyle,this.selectedSinceMouseDown=!1}handleEmptySpaceClick(e){if(!this.editable||this.element.hasSelection()||this.willCauseCancelEditing||this.selectedSinceMouseDown)return;const t=e.target;if(t.classList.contains("header")||this.element.classList.contains("read-only")||t.enclosingNodeOrSelfWithClass("ancestor-rule-list")){e.consume();return}const n=aa(e),i=n&&Oe.getTreeElementBylistItemNode(n);i&&i instanceof Z?this.addNewBlankProperty(i.property.index+1).startEditingName():t.classList.contains("selector-container")||t.classList.contains("styles-section-subtitle")?this.addNewBlankProperty(0).startEditingName():this.addNewBlankProperty().startEditingName(),e.consume(!0)}handleQueryRuleClick(e,t){const n=t.currentTarget;if(Ae(n))return;if(je.eventHasCtrlEquivalentKey(t)&&this.navigable){const r=e.rawLocation();if(!r){t.consume(!0);return}const a=$e.instance().rawLocationToUILocation(r);a&&ee(a),t.consume(!0);return}if(!this.editable)return;const i=new Je(this.editingMediaCommitted.bind(this,e),this.editingMediaCancelled.bind(this,n),void 0,this.editingMediaBlurHandler.bind(this));Gt.startEditing(n,i);const s=n.getComponentSelection();s&&s.selectAllChildren(n),this.parentPane.setEditingStyle(!0),n.enclosingNodeOrSelfWithClass("query").classList.add("editing-query"),t.consume(!0)}editingMediaFinished(e){this.parentPane.setEditingStyle(!1),e.enclosingNodeOrSelfWithClass("query").classList.remove("editing-query")}editingMediaCancelled(e){this.editingMediaFinished(e),this.markSelectorMatches();const t=e.getComponentSelection();t&&t.collapse(e,0)}editingMediaBlurHandler(){return!0}async editingMediaCommitted(e,t,n,i,s,o){this.parentPane.setEditingStyle(!1),this.editingMediaFinished(t),n&&(n=n.trim()),this.parentPane.setUserOperation(!0);const r=this.parentPane.cssModel();if(r&&e.styleSheetId){const a=e.range;let d=!1;e instanceof la?d=await r.setContainerQueryText(e.styleSheetId,a,n):e instanceof da?d=await r.setSupportsText(e.styleSheetId,a,n):e instanceof ca?d=await r.setScopeText(e.styleSheetId,a,n):d=await r.setMediaText(e.styleSheetId,a,n),d&&(this.matchedStyles.resetActiveProperties(),this.parentPane.refreshUpdate(this)),this.parentPane.setUserOperation(!1),this.editingMediaTextCommittedForTest()}}editingMediaTextCommittedForTest(){}handleSelectorClick(e){const t=e.target;if(t){if(je.eventHasCtrlEquivalentKey(e)&&this.navigable&&t.classList.contains("simple-selector")){const n=this.elementToSelectorIndex.get(t);n&&this.navigateToSelectorSource(n,!0),e.consume(!0);return}this.element.hasSelection()||(this.startEditingAtFirstPosition(),e.consume(!0))}}handleContextMenuEvent(e){if(!e.target)return;const n=new ze(e);n.clipboardSection().appendItem(ae(ie.copySelector),()=>{const i=this.headerText();U.copyText(i),L.styleTextCopied(10)},{jslogContext:"copy-selector"}),n.clipboardSection().appendItem(ae(ie.copyRule),()=>{const i=ce.formatLeadingProperties(this).ruleText;U.copyText(i),L.styleTextCopied(7)},{jslogContext:"copy-rule"}),n.clipboardSection().appendItem(ae(ie.copyAllDeclarations),()=>{const i=ce.formatLeadingProperties(this).allDeclarationText;U.copyText(i),L.styleTextCopied(8)},{jslogContext:"copy-all-declarations"}),n.clipboardSection().appendItem(ae(ie.copyAllCSSChanges),async()=>{const i=await this.parentPane.getFormattedChanges();U.copyText(i),L.styleTextCopied(2)},{jslogContext:"copy-all-css-changes"}),n.show()}navigateToSelectorSource(e,t){const n=this.parentPane.cssModel();if(!n)return;const i=this.styleInternal.parentRule;if(!i||i.styleSheetId===void 0)return;const s=n.styleSheetHeaderForId(i.styleSheetId);if(!s)return;const o=new Mi(s,i.lineNumberInSource(e),i.columnNumberInSource(e));z.revealSelectorSource(o,t)}static revealSelectorSource(e,t){const n=$e.instance().rawLocationToUILocation(e);n&&ee(n,!t)}startEditingAtFirstPosition(){if(this.editable){if(!this.styleInternal.parentRule){this.moveEditorFromSelector("forward");return}this.startEditingSelector()}}startEditingSelector(){const e=this.selectorElement;if(Ae(e))return;e.scrollIntoViewIfNeeded(!1);const t=e.textContent;t!==null&&(e.textContent=t.replace(/\s+/g," ").trim());const n=new Je(this.editingSelectorCommitted.bind(this),this.editingSelectorCancelled.bind(this));Gt.startEditing(this.selectorElement,n);const i=e.getComponentSelection();i&&i.selectAllChildren(e),this.parentPane.setEditingStyle(!0),e.classList.contains("simple-selector")&&this.navigateToSelectorSource(0,!1)}moveEditorFromSelector(e){if(this.markSelectorMatches(),!!e)if(e==="forward"){let n=this.propertiesTreeOutline.firstChild();for(;n&&n.inherited();){const i=n.nextSibling;n=i instanceof Z?i:null}n?n.startEditingName():this.addNewBlankProperty().startEditingName()}else{const t=this.previousEditableSibling();if(!t)return;t.addNewBlankProperty().startEditingName()}}editingSelectorCommitted(e,t,n,i,s){if(this.editingSelectorEnded(),t&&(t=t.trim()),t===n){this.selectorElement.textContent=t,this.moveEditorFromSelector(s);return}const o=this.styleInternal.parentRule;if(!o)return;function r(){this.parentPane.setUserOperation(!1),this.moveEditorFromSelector(s),this.editingSelectorCommittedForTest()}this.parentPane.setUserOperation(!0),this.setHeaderText(o,t).then(r.bind(this))}setHeaderText(e,t){function n(o,r){return r?this.matchedStyles.recomputeMatchingSelectors(o).then(i.bind(this,o)):Promise.resolve()}function i(o){const r=this.matchedStyles.getMatchingSelectors(o).length>0;this.propertiesTreeOutline.element.classList.toggle("no-affect",!r),this.matchedStyles.resetActiveProperties(),this.parentPane.refreshUpdate(this)}if(!(e instanceof ge))return Promise.resolve();const s=e.selectorRange();return s?(this.#i=void 0,e.setSelectorText(t).then(n.bind(this,e,!!s))):Promise.resolve()}editingSelectorCommittedForTest(){}updateRuleOrigin(){this.selectorRefElement.removeChildren(),this.selectorRefElement.appendChild(this.createRuleOriginNode(this.matchedStyles,this.parentPane.linkifier,this.styleInternal.parentRule))}editingSelectorEnded(){this.parentPane.setEditingStyle(!1)}editingSelectorCancelled(){this.editingSelectorEnded(),this.markSelectorMatches()}closestPropertyForEditing(e){const t=this.propertiesTreeOutline.rootElement();return e>=t.childCount()?t.lastChild():t.childAt(e)}}class Ht extends z{normal;ruleLocation;styleSheetId;constructor(e,t,n,i,s,o,r){const a=e.cssModel(),d=ge.createDummyRule(a,n);super(e,t,d.style,r,null,null),this.normal=!1,this.ruleLocation=s,this.styleSheetId=i,this.selectorRefElement.removeChildren(),this.selectorRefElement.appendChild(z.linkifyRuleLocation(a,this.parentPane.linkifier,i,this.actualRuleLocation())),o&&o.parentRule&&o.parentRule instanceof ge&&this.createAncestorRules(o.parentRule),this.element.classList.add("blank-section")}actualRuleLocation(){const t=this.rulePrefix().split(`
`),n=t[t.length-1],i=new zt(0,0,t.length-1,n?n.length:0);return this.ruleLocation.rebaseAfterTextEdit(zt.createFromLocation(0,0),i)}rulePrefix(){return this.ruleLocation.startLine===0&&this.ruleLocation.startColumn===0?"":`

`}get isBlank(){return!this.normal}editingSelectorCommitted(e,t,n,i,s){if(!this.isBlank){super.editingSelectorCommitted(e,t,n,i,s);return}function o(c){return c?this.matchedStyles.addNewRule(c,this.matchedStyles.node()).then(r.bind(this,c)):(this.editingSelectorCancelled(),this.editingSelectorCommittedForTest(),Promise.resolve())}function r(c){const h=this.matchedStyles.getMatchingSelectors(c).length>0;this.makeNormal(c),h||this.propertiesTreeOutline.element.classList.add("no-affect"),this.updateRuleOrigin(),this.parentPane.setUserOperation(!1),this.editingSelectorEnded(),this.element.parentElement&&this.moveEditorFromSelector(s),this.markSelectorMatches(),this.editingSelectorCommittedForTest()}t&&(t=t.trim()),this.parentPane.setUserOperation(!0);const a=this.parentPane.cssModel(),d=this.rulePrefix()+t+" {}";a&&a.addRule(this.styleSheetId,d,this.ruleLocation).then(o.bind(this))}editingSelectorCancelled(){if(this.parentPane.setUserOperation(!1),!this.isBlank){super.editingSelectorCancelled();return}this.editingSelectorEnded(),this.parentPane.removeSection(this)}makeNormal(e){this.element.classList.remove("blank-section"),this.styleInternal=e.style,this.normal=!0}}class zo extends z{constructor(e,t,n,i,s,o){super(e,t,n,i,null,null,s),o||this.element.classList.add("hidden"),this.selectorElement.className="property-registration-key"}async setHeaderText(e,t){!(e instanceof ha)||!e.propertyName().range||await e.setPropertyName(t)&&this.parentPane.forceUpdate()}createRuleOriginNode(e,t,n){return n?super.createRuleOriginNode(e,t,n):document.createTextNode("CSS.registerProperty")}}class Go extends z{constructor(e,t,n,i){super(e,t,n,i,null,null),this.selectorElement.className="font-palette-values-key"}}class Ko extends z{constructor(e,t,n,i,s){super(e,t,n,i,null,null),this.selectorElement.className="position-try-values-key",this.propertiesTreeOutline.element.classList.toggle("no-affect",!s)}}class Yo extends z{constructor(e,t,n,i){super(e,t,n,i,null,null),this.selectorElement.className="keyframe-key"}headerText(){return this.styleInternal.parentRule instanceof Dt?this.styleInternal.parentRule.key().text:""}setHeaderText(e,t){function n(s){s&&this.parentPane.refreshUpdate(this)}return!(e instanceof Dt)||!e.key().range?Promise.resolve():e.setKeyText(t).then(n.bind(this))}isPropertyInherited(e){return!1}isPropertyOverloaded(e){return!1}markSelectorHighlights(){}markSelectorMatches(){this.styleInternal.parentRule instanceof Dt&&(this.selectorElement.textContent=this.styleInternal.parentRule.key().text)}highlight(){}}class qo extends z{isPropertyInherited(e){return!1}}const Vc=Object.freeze(Object.defineProperty({__proto__:null,BlankStylePropertiesSection:Ht,FontPaletteValuesRuleSection:Go,HighlightPseudoStylePropertiesSection:qo,KeyframePropertiesSection:Yo,PositionTryRuleSection:Ko,RegisteredPropertiesSection:zo,StylePropertiesSection:z},Symbol.toStringTag,{value:"Module"}));class Xo{styleSidebarPane;constructor(e){this.styleSidebarPane=e}highlightProperty(e){for(const i of this.styleSidebarPane.allSections())for(let s=i.propertiesTreeOutline.firstChild();s;s=s.nextSibling)s.onpopulate();const t=this.styleSidebarPane.allSections().find(i=>i.style().leadingProperties().includes(e));if(!t)return;t.showAllItems();const n=this.findTreeElementFromSection(i=>i.property===e,t);n&&(n.parent&&n.parent.expand(),this.scrollAndHighlightTreeElement(n),t.element.focus())}findAndHighlightSectionBlock(e){const t=this.styleSidebarPane.getSectionBlockByName(e);if(!t||t.sections.length===0)return;const[n]=t.sections;n.showAllItems(),Bt.highlightElement(t.titleElement())}findAndHighlightSection(e,t){const n=this.styleSidebarPane.getSectionBlockByName(t),i=n?.sections.find(s=>s.headerText()===e);!i||!n||(n.expand(!0),i.showAllItems(),Bt.highlightElement(i.element))}findAndHighlightPropertyName(e,t,n){const i=n?this.styleSidebarPane.getSectionBlockByName(n):void 0,s=i?.sections??this.styleSidebarPane.allSections();if(!s)return!1;for(const o of s){if(t&&o.headerText()!==t||!o.style().hasActiveProperty(e))continue;i?.expand(!0),o.showAllItems();const r=this.findTreeElementFromSection(a=>a.property.name===e&&!a.overloaded(),o);if(r)return this.scrollAndHighlightTreeElement(r),o.element.focus(),!0}return!1}findTreeElementAndSection(e){for(const t of this.styleSidebarPane.allSections()){const n=this.findTreeElementFromSection(e,t);if(n)return{treeElement:n,section:t}}return{treeElement:null,section:null}}findTreeElementFromSection(e,t){let n=t.propertiesTreeOutline.firstChild();for(;n&&n instanceof Z;){if(e(n))return n;n=n.traverseNextTreeElement(!1,null,!0)}return null}scrollAndHighlightTreeElement(e){Bt.highlightElement(e.listItemElement)}}const _c=Object.freeze(Object.defineProperty({__proto__:null,StylePropertyHighlighter:Xo},Symbol.toStringTag,{value:"Module"})),Qo=new CSSStyleSheet;Qo.replaceSync(`/**
 * Copyright 2017 The Chromium Authors. All rights reserved.
 * Use of this source code is governed by a BSD-style license that can be
 * found in the LICENSE file.
 */

.styles-section {
  min-height: 18px;
  white-space: nowrap;
  user-select: text;
  border-bottom: 1px solid var(--sys-color-divider);
  position: relative;
  overflow: hidden;
  padding: 2px 2px 4px 4px;

  &:last-child {
    border-bottom: none;
  }

  &.has-open-popover {
    z-index: 1;
  }

  &.read-only {
    background-color: var(--sys-color-cdt-base-container);
    font-style: italic;
  }

  &:focus-visible,
  &.read-only:focus-visible {
    background-color: var(--sys-color-state-focus-highlight);
  }

  .simple-selector.filter-match {
    background-color: var(--sys-color-tonal-container);
    color: var(--sys-color-on-surface);
  }

  .devtools-link {
    user-select: none;
  }

  .styles-section-subtitle devtools-icon {
    margin-bottom: -4px;
  }

  .styles-section-subtitle .devtools-link {
    color: var(--sys-color-on-surface);
    text-decoration-color: var(--sys-color-neutral-bright);
    outline-offset: 0;
  }

  .selector,
  .try-rule-selector-element,
  .ancestor-rule-list,
  .ancestor-closing-braces {
    color: var(--app-color-element-sidebar-subtitle);
  }

  .ancestor-rule-list,
  .styles-section-title {
    overflow-wrap: break-word;
    white-space: normal;
  }

  .ancestor-rule-list devtools-css-query {
    display: block;
  }

  .simple-selector.selector-matches,
  &.keyframe-key {
    color: var(--sys-color-on-surface);
  }

  .style-properties {
    margin: 0;
    padding: 2px 4px 0 0;
    list-style: none;
    clear: both;
    display: flex;
  }

  &.matched-styles .style-properties {
    padding-left: 0;
  }

  & span.simple-selector:hover {
    text-decoration: var(--override-styles-section-text-hover-text-decoration);
    cursor: var(--override-styles-section-text-hover-cursor);
  }

  &.styles-panel-hovered:not(.read-only),
  &.styles-panel-hovered:not(.read-only) devtools-css-query {
    --override-styles-section-text-hover-text-decoration: underline;
    --override-styles-section-text-hover-cursor: default;
  }
}

.sidebar-pane-closing-brace {
  clear: both;
}

.styles-section-subtitle {
  color: var(--sys-color-token-subtle);
  float: right;
  padding: var(--sys-size-2) var(--sys-size-2) 0 var(--sys-size-8);
  max-width: 100%;
  height: 15px;
  margin-bottom: -1px;
}

.styles-section-subtitle * {
  text-overflow: ellipsis;
  overflow: hidden;
  white-space: nowrap;
  max-width: 100%;
}

.sidebar-pane-open-brace,
.sidebar-pane-closing-brace {
  color: var(--sys-color-on-surface);
}

@keyframes styles-element-state-pane-slidein {
  from {
    margin-top: -60px;
  }

  to {
    margin-top: 0;
  }
}

@keyframes styles-element-state-pane-slideout {
  from {
    margin-top: 0;
  }

  to {
    margin-top: -60px;
  }
}

.styles-sidebar-toolbar-pane {
  position: relative;
  animation-duration: 0.1s;
  animation-direction: normal;
}

.styles-sidebar-toolbar-pane-container {
  position: relative;
  overflow: hidden;
  flex-shrink: 0;
}

.styles-selector {
  cursor: text;
}

/* TODO(changhaohan): restructure this in relation to stylePropertiesTreeOutline.css. */
.styles-clipboard-only {
  display: inline-block;
  width: 0;
  opacity: 0%;
  pointer-events: none;
  white-space: pre;
}

.styles-sidebar-pane-toolbar-container {
  flex-shrink: 0;
  overflow: hidden;
  position: sticky;
  top: 0;
  background-color: var(--sys-color-cdt-base-container);
  z-index: 2;
}

.styles-sidebar-pane-toolbar {
  border-bottom: 1px solid var(--sys-color-divider);
}

.styles-pane-toolbar {
  width: 100%;
}

.font-toolbar-hidden {
  visibility: hidden;
}

.sidebar-separator {
  background-color: var(--sys-color-surface2);
  padding: 0 5px;
  border-bottom: 1px solid var(--sys-color-divider);
  color: var(--sys-color-on-surface-subtle);
  white-space: nowrap;
  text-overflow: ellipsis;
  overflow: hidden;
  line-height: 22px;

  > span.monospace {
    max-width: 180px;
    display: inline-block;
    overflow: hidden;
    text-overflow: ellipsis;
    vertical-align: middle;
    margin-left: 2px;
  }

  &.layer-separator {
    display: flex;
  }

  &.empty-section {
    border-bottom: none;
  }
}

.sidebar-pane-section-toolbar {
  position: absolute;
  right: 0;
  bottom: -1px;
  z-index: 0;

  &.new-rule-toolbar {
    visibility: hidden;
    margin-bottom: 5px;

    --toolbar-height: 16px;
  }

  &.shifted-toolbar {
    padding-right: 32px;
  }
}

.styles-pane:not(.is-editing-style) .styles-section.matched-styles:not(.read-only):hover .sidebar-pane-section-toolbar.new-rule-toolbar {
  visibility: visible;
}

.styles-show-all {
  padding: 4px;
  margin-left: 16px;
  text-overflow: ellipsis;
  overflow: hidden;
  max-width: -webkit-fill-available;
}

@media (forced-colors: active) {
  .sidebar-pane-section-toolbar {
    forced-color-adjust: none;
    border-color: 1px solid ButtonText;
    background-color: ButtonFace;
  }

  .styles-section {
    &:focus-visible,
    &.read-only:focus-visible {
      forced-color-adjust: none;
      background-color: Highlight;
    }

    .styles-section-subtitle {
      .devtools-link {
        color: linktext;
        text-decoration-color: linktext;

        &:focus-visible {
          color: HighlightText;
        }
      }
    }

    &:focus-visible *,
    &.read-only:focus-visible *,
    &:focus-visible .styles-section-subtitle .devtools-link {
      color: HighlightText;
      text-decoration-color: HighlightText;
    }

    &:focus-visible .sidebar-pane-section-toolbar {
      background-color: ButtonFace;
    }

    &:focus-visible {
      --webkit-css-property-color: HighlightText;
    }
  }
}

.spinner::before {
  --dimension: 24px;

  margin-top: 2em;
  left: calc(50% - var(--dimension) / 2);
}

.section-block-expand-icon {
  margin-bottom: -4px;
}

/*# sourceURL=stylesSidebarPane.css */
`);class on{#e=new Map;fetchPromiseForTest;constructor(e){if(!e){this.fetchPromiseForTest=Promise.resolve();return}this.fetchPromiseForTest=fetch(`${e}third_party/vscode.web-custom-data/browsers.css-data.json`).then(t=>t.json()).then(t=>{for(const n of t.properties)this.#e.set(n.name,n)}).catch()}static create(){const e=ua();return new on(e?.base??"")}findCssProperty(e){return this.#e.get(e)}}const Hc=Object.freeze(Object.defineProperty({__proto__:null,WebCustomData:on},Symbol.toStringTag,{value:"Module"})),Y={noMatchingSelectorOrStyle:"No matching selector or style",visibleSelectors:"{n, plural, =1 {# visible selector listed below} other {# visible selectors listed below}}",invalidPropertyValue:"Invalid property value",unknownPropertyName:"Unknown property name",pseudoSElement:"Pseudo ::{PH1} element",inheritedFroms:"Inherited from ",inheritedFromSPseudoOf:"Inherited from ::{PH1} pseudo of ",incrementdecrementWithMousewheelOne:"Increment/decrement with mousewheel or up/down keys. {PH1}: R ±1, Shift: G ±1, {PH2}: B ±1",incrementdecrementWithMousewheelHundred:"Increment/decrement with mousewheel or up/down keys. {PH1}: ±100, Shift: ±10, {PH2}: ±0.1",invalidString:"{PH1}, property name: {PH2}, property value: {PH3}",toggleRenderingEmulations:"Toggle common rendering emulations",automaticDarkMode:"Automatic dark mode",copyAllCSSChanges:"Copy CSS changes",copiedToClipboard:"Copied to clipboard",layer:"Layer",clickToRevealLayer:"Click to reveal layer in layer tree",specificity:"Specificity: {PH1}"},Nd=G("panels/elements/StylesSidebarPane.ts",Y),X=q.bind(void 0,Nd),Qi=500,Pd=5,ot="@property",Id=[{mode:"padding",properties:["padding"]},{mode:"border",properties:["border"]},{mode:"margin",properties:["margin"]},{mode:"gap",properties:["gap","grid-gap"]},{mode:"column-gap",properties:["column-gap","grid-column-gap"]},{mode:"row-gap",properties:["row-gap","grid-row-gap"]},{mode:"grid-template-columns",properties:["grid-template-columns"]},{mode:"grid-template-rows",properties:["grid-template-rows"]},{mode:"grid-template-areas",properties:["grid-areas"]},{mode:"justify-content",properties:["justify-content"]},{mode:"align-content",properties:["align-content"]},{mode:"align-items",properties:["align-items"]},{mode:"flexibility",properties:["flex","flex-basis","flex-grow","flex-shrink"]}];let Ot;class ce extends Cs(Ei){currentToolbarPane;animatedToolbarPane;pendingWidget;pendingWidgetToggle;toolbar;toolbarPaneElement;lastFilterChange;visibleSections;noMatchesElement;sectionsContainer;sectionByElement;swatchPopoverHelperInternal;linkifier;decorator;lastRevealedProperty;userOperation;isEditingStyle;filterRegexInternal;isActivePropertyHighlighted;initialUpdateCompleted;hasMatchedStyles;sectionBlocks;idleCallbackManager;needsForceUpdate;resizeThrottler;scrollerElement;boundOnScroll;imagePreviewPopover;#e;#t;#n;#s=new WeakMap;activeCSSAngle;#i=new Map;#o;#r;#a;static instance(e){return(!Ot||e?.forceNew)&&(Ot=new ce),Ot}constructor(){super(!0),this.setMinimumSize(96,26),this.registerCSSFiles([Qo]),O.instance().moduleSetting("text-editor-indent").addChangeListener(this.update.bind(this)),this.currentToolbarPane=null,this.animatedToolbarPane=null,this.pendingWidget=null,this.pendingWidgetToggle=null,this.toolbar=null,this.lastFilterChange=null,this.visibleSections=null,this.toolbarPaneElement=this.createStylesSidebarToolbar(),this.computedStyleModelInternal=new nn,this.noMatchesElement=this.contentElement.createChild("div","gray-info-message hidden"),this.noMatchesElement.textContent=X(Y.noMatchingSelectorOrStyle),this.sectionsContainer=this.contentElement.createChild("div"),pa(this.sectionsContainer),this.sectionsContainer.addEventListener("keydown",this.sectionsContainerKeyDown.bind(this),!1),this.sectionsContainer.addEventListener("focusin",this.sectionsContainerFocusChanged.bind(this),!1),this.sectionsContainer.addEventListener("focusout",this.sectionsContainerFocusChanged.bind(this),!1),this.sectionByElement=new WeakMap,this.swatchPopoverHelperInternal=new Ql,this.swatchPopoverHelperInternal.addEventListener("WillShowPopover",this.hideAllPopovers,this),this.linkifier=new tt(Ld,!0),this.decorator=new Xo(this),this.lastRevealedProperty=null,this.userOperation=!1,this.isEditingStyle=!1,this.filterRegexInternal=null,this.isActivePropertyHighlighted=!1,this.initialUpdateCompleted=!1,this.hasMatchedStyles=!1,this.contentElement.classList.add("styles-pane"),this.sectionBlocks=[],this.idleCallbackManager=null,this.needsForceUpdate=!1,Ot=this,T.instance().addFlavorChangeListener(A,this.forceUpdate,this),this.contentElement.addEventListener("copy",this.clipboardCopy.bind(this)),this.resizeThrottler=new xe(100),this.boundOnScroll=this.onScroll.bind(this),this.imagePreviewPopover=new st(this.contentElement,t=>{const n=t.composedPath()[0];return n instanceof Element?n:null},()=>this.node()),this.activeCSSAngle=null;const e=O.instance().moduleSetting("show-css-property-documentation-on-hover");e.addChangeListener(t=>{const n=t.data?1:2;L.cssPropertyDocumentation(n)}),this.#t=new Kt(this.contentElement,t=>{const n=t.composedPath()[0],i=t.composedPath()[2];if(!n||!(n instanceof Element))return null;if(i instanceof Element&&i.matches(".hint")){const s=Xt.get(i);if(s)return this.#t.jslogContext="elements.css-hint",{box:n.boxInWindow(),show:async o=>{const r=new xl(s);return o.contentElement.appendChild(r),!0}}}if(e.get()&&n.matches(".webkit-css-property")){this.#e||(this.#e=on.create());const s=n.textContent,o=s&&this.#e.findCssProperty(s);if(o)return this.#t.jslogContext="elements.css-property-doc",{box:n.boxInWindow(),show:async r=>{const a=new Tl(o);return r.contentElement.appendChild(a),L.cssPropertyDocumentation(0),!0}}}if(n.matches(".simple-selector")){const s=z.getSpecificityStoredForNodeElement(n);return this.#t.jslogContext="elements.css-selector-specificity",{box:n.boxInWindow(),show:async o=>{o.setIgnoreLeftMargin(!0);const r=document.createElement("span");return r.textContent=X(Y.specificity,{PH1:s?`(${s.a},${s.b},${s.c})`:"(?,?,?)"}),o.contentElement.appendChild(r),!0}}}return null}),this.#t.setDisableOnClick(!0),this.#t.setTimeout(300),this.#t.setHasPadding(!0),this.#n=new Kt(this.contentElement,t=>{for(let n=t.composedPath().length-1;n>=0;--n){const i=t.composedPath()[n],s=this.#s.get(i),o=s?s.contents():void 0;if(o)return{box:i.boxInWindow(),show:async r=>(r.setJsLog(`${ma(`${s?.jslogContext??"elements.generic-sidebar-popover"}`).parent("popoverParent")}`),r.contentElement.classList.add("borderless-popover"),r.contentElement.appendChild(o),!0)}}return null},"elements.generic-sidebar-popover"),this.#n.setDisableOnClick(!0),this.#n.setTimeout(500,200)}addPopover(e,t){this.#s.set(e,t)}onScroll(e){this.hideAllPopovers()}swatchPopoverHelper(){return this.swatchPopoverHelperInternal}setUserOperation(e){this.userOperation=e}createExclamationMark(e,t){const n=document.createElement("span");n.classList.add("exclamation-mark");const i=N().isCSSPropertyName(e.name)?X(Y.invalidPropertyValue):X(Y.unknownPropertyName);t===null?de.install(n,i):this.addPopover(n,{contents:()=>t});const s=X(Y.invalidString,{PH1:i,PH2:e.name,PH3:e.value});return e.setDisplayedStringForInvalidProperty(s),n}static ignoreErrorsForProperty(e){function t(s){return!s.startsWith("-webkit-")&&/^[-_][\w\d]+-\w/.test(s)}const n=e.name.toLowerCase();if(n.charAt(0)==="_"||n==="filter"||n.startsWith("scrollbar-")||t(n))return!0;const i=e.value.toLowerCase();return!!(i.endsWith("\\9")||t(i))}static formatLeadingProperties(e){const t=e.headerText(),n=O.instance().moduleSetting("text-editor-indent").get(),i=e.style(),s=[];for(const a of i.leadingProperties())a.disabled?s.push(`${n}/* ${a.name}: ${a.value}; */`):s.push(`${n}${a.name}: ${a.value};`);const o=s.join(`
`),r=`${t} {
${o}
}`;return{allDeclarationText:o,ruleText:r}}revealProperty(e){this.decorator.highlightProperty(e),this.lastRevealedProperty=e,this.update()}jumpToProperty(e,t,n){return this.decorator.findAndHighlightPropertyName(e,t,n)}jumpToDeclaration(e){e.declaration instanceof fs?this.revealProperty(e.declaration):this.jumpToProperty("initial-value",e.name,ot)}jumpToSection(e,t){this.decorator.findAndHighlightSection(e,t)}jumpToSectionBlock(e){this.decorator.findAndHighlightSectionBlock(e)}forceUpdate(){this.needsForceUpdate=!0,this.swatchPopoverHelperInternal.hide(),this.#r?.abort(),this.resetCache(),this.update()}sectionsContainerKeyDown(e){const t=fa(this.sectionsContainer.ownerDocument);if(!t)return;const n=this.sectionByElement.get(t);if(!n)return;let i=null,s=!1;switch(e.key){case"ArrowUp":case"ArrowLeft":{i=n.previousSibling()||n.lastSibling(),s=!1;break}case"ArrowDown":case"ArrowRight":{i=n.nextSibling()||n.firstSibling(),s=!0;break}case"Home":{i=n.firstSibling(),s=!0;break}case"End":{i=n.lastSibling(),s=!1;break}}i&&this.filterRegexInternal&&(i=i.findCurrentOrNextVisible(s)),i&&(i.element.focus(),e.consume(!0))}sectionsContainerFocusChanged(){this.resetFocus()}resetFocus(){if(this.noMatchesElement.classList.contains("hidden")&&this.sectionBlocks[0]&&this.sectionBlocks[0].sections[0]){const e=this.sectionBlocks[0].sections[0].findCurrentOrNextVisible(!0);e&&(e.element.tabIndex=this.sectionsContainer.hasFocus()?-1:0)}}onAddButtonLongClick(e){const t=this.cssModel();if(!t)return;const n=t.styleSheetHeaders().filter(r),i=[];for(let a=0;a<n.length;++a){const d=n[a],c=this.createNewRuleInStyleSheet.bind(this,d);i.push({text:ga(d.resourceURL()),handler:c})}i.sort(o);const s=new ze(e);for(let a=0;a<i.length;++a){const d=i[a];s.defaultSection().appendItem(d.text,d.handler,{jslogContext:"style-sheet-header"})}s.footerSection().appendItem("inspector-stylesheet",this.createNewRuleInViaInspectorStyleSheet.bind(this),{jslogContext:"inspector-stylesheet"}),s.show();function o(a,d){return Ss(a.text,d.text)}function r(a){return!a.isViaInspector()&&!a.isInline&&!!a.resourceURL()}}onFilterChanged(e){const t=e.data?new RegExp(ci(e.data),"i"):null;this.lastFilterChange=Date.now(),this.filterRegexInternal=t,this.updateFilter(),this.resetFocus(),setTimeout(()=>{this.lastFilterChange&&(Date.now()-this.lastFilterChange<Qi||ai(this.visibleSections?X(Y.visibleSelectors,{n:this.visibleSections}):X(Y.noMatchingSelectorOrStyle)))},Qi)}refreshUpdate(e,t){if(t)for(const i of this.allSections())i instanceof Ht&&i.isBlank||i.updateVarFunctions(t);if(this.isEditingStyle)return;const n=this.node();if(n){for(const i of this.allSections())i instanceof Ht&&i.isBlank||i.update(i===e);this.filterRegexInternal&&this.updateFilter(),this.swatchPopoverHelper().reposition(),this.nodeStylesUpdatedForTest(n,!1)}}async doUpdate(){this.#r?.abort(),this.#r=new AbortController,await this.#l(this.#r.signal);const e=this?.contentElement?.enclosingNodeOrSelfWithClass("style-panes-wrapper")?.parentElement?.querySelectorAll(".style-panes-wrapper");if(e.length>0)for(const t of e)this.scrollerElement=t,this.scrollerElement.addEventListener("scroll",this.boundOnScroll,!1)}async#l(e){this.initialUpdateCompleted||window.setTimeout(()=>{e.aborted||this.initialUpdateCompleted||this.sectionsContainer.createChild("span","spinner")},200);const t=await this.fetchMatchedCascade();if(e.aborted)return;const n=this.node()?.id,i=t?.getParentLayoutNodeId(),[s,o]=await Promise.all([this.fetchComputedStylesFor(n),this.fetchComputedStylesFor(i)]);e.aborted||(await this.innerRebuildUpdate(e,t,s,o),!e.aborted&&(this.initialUpdateCompleted||(this.initialUpdateCompleted=!0,this.appendToolbarItem(this.createRenderingShortcuts()),ve.isEnabled("styles-pane-css-changes")&&(this.#o=this.createCopyAllChangesButton(),this.appendToolbarItem(this.#o),this.#o.element.classList.add("hidden")),this.dispatchEventToListeners("InitialUpdateCompleted")),this.nodeStylesUpdatedForTest(this.node(),!0),this.dispatchEventToListeners("StylesUpdateCompleted",{hasMatchedStyles:this.hasMatchedStyles})))}async fetchComputedStylesFor(e){const t=this.node();return t===null||e===void 0?null:await t.domModel().cssModel().getComputedStyle(e)}onResize(){this.resizeThrottler.schedule(this.innerResize.bind(this))}innerResize(){const e=this.contentElement.getBoundingClientRect().width+"px";return this.allSections().forEach(t=>{t.propertiesTreeOutline.element.style.width=e}),this.hideAllPopovers(),Promise.resolve()}resetCache(){const e=this.cssModel();e&&e.discardCachedMatchedCascade()}fetchMatchedCascade(){const e=this.node();if(!e||!this.cssModel())return Promise.resolve(null);const t=this.cssModel();if(!t)return Promise.resolve(null);return t.cachedMatchedCascadeForNode(e).then(n.bind(this));function n(i){return i&&i.node()===this.node()?i:null}}setEditingStyle(e,t){this.isEditingStyle!==e&&(this.contentElement.classList.toggle("is-editing-style",e),this.isEditingStyle=e,this.setActiveProperty(null))}setActiveProperty(e){if(this.isActivePropertyHighlighted&&se.hideDOMNodeHighlight(),this.isActivePropertyHighlighted=!1,!this.node()||!e||e.overloaded()||e.inherited())return;const t=e.property.ownerStyle.parentRule,n=t instanceof ge?t.selectorText():void 0;for(const{properties:i,mode:s}of Id){if(!i.includes(e.name))continue;const o=this.node();if(o){o.domModel().overlayModel().highlightInOverlay({node:this.node(),selectorList:n},s),this.isActivePropertyHighlighted=!0;break}}}onCSSModelChanged(e){const t=e?.data&&"edit"in e.data?e.data.edit:null;if(t){for(const n of this.allSections())n.styleSheetEdited(t);this.refreshComputedStyles();return}if(this.userOperation||this.isEditingStyle){this.refreshComputedStyles();return}this.resetCache(),this.update()}async refreshComputedStyles(){this.#a?.abort(),this.#r=new AbortController;const e=this.#r.signal,t=await this.fetchMatchedCascade(),n=this.node()?.id,i=t?.getParentLayoutNodeId(),[s,o]=await Promise.all([this.fetchComputedStylesFor(n),this.fetchComputedStylesFor(i)]);if(!e.aborted)for(const r of this.allSections())r.setComputedStyles(s),r.setParentsComputedStyles(o),r.updateAuthoringHint()}focusedSectionIndex(){let e=0;for(const t of this.sectionBlocks)for(const n of t.sections){if(n.element.hasFocus())return e;e++}return-1}continueEditingElement(e,t){const n=this.allSections()[e];if(n){const i=n.closestPropertyForEditing(t);if(!i){n.element.focus();return}i.startEditingName()}}async innerRebuildUpdate(e,t,n,i){if(this.needsForceUpdate)this.needsForceUpdate=!1;else if(this.isEditingStyle||this.userOperation)return;const s=this.focusedSectionIndex();this.linkifier.reset();const o=this.sectionBlocks.map(u=>u.sections).flat();this.sectionBlocks=[];const r=this.node();if(this.hasMatchedStyles=t!==null&&r!==null,!this.hasMatchedStyles){this.sectionsContainer.removeChildren(),this.noMatchesElement.classList.remove("hidden");return}const a=await this.rebuildSectionsForMatchedStyleRules(t,n,i);if(e.aborted)return;this.sectionBlocks=a;const d=this.sectionBlocks.map(u=>u.sections).flat(),c=ke.instance(),h=c.getSection();if(h){c.unbindContext();for(const[u,m]of o.entries())h===m&&u<d.length&&c.bindContext(this,d[u])}this.sectionsContainer.removeChildren();const p=document.createDocumentFragment();let g=0,f=null;for(const u of this.sectionBlocks){const m=u.titleElement();m&&p.appendChild(m);for(const y of u.sections)p.appendChild(y.element),g===s&&(f=y.element),g++}this.sectionsContainer.appendChild(p),f&&f.focus(),s>=g&&this.sectionBlocks[0].sections[0].element.focus(),this.sectionsContainerFocusChanged(),this.filterRegexInternal?this.updateFilter():this.noMatchesElement.classList.toggle("hidden",this.sectionBlocks.length>0),this.lastRevealedProperty&&(this.decorator.highlightProperty(this.lastRevealedProperty),this.lastRevealedProperty=null),this.swatchPopoverHelper().reposition(),L.panelLoaded("elements","DevTools.Launch.Elements"),this.dispatchEventToListeners("StylesUpdateCompleted",{hasMatchedStyles:!1})}nodeStylesUpdatedForTest(e,t){}rebuildSectionsForMatchedStyleRulesForTest(e,t,n){return this.rebuildSectionsForMatchedStyleRules(e,t,n)}async rebuildSectionsForMatchedStyleRules(e,t,n){this.idleCallbackManager&&this.idleCallbackManager.discard(),this.idleCallbackManager=new Jo;const i=[new W(null)];let s=0,o=null,r=null,a=!1;const d=u=>{const m=u.parentRule;if(m instanceof ge){const y=m.layers;if((y.length||r)&&r!==y){const b=W.createLayerBlock(m);i.push(b),a=!0,r=y}}};pt.instance().item().setVisible(!1);const c=new Set;for(const u of e.nodeStyles()){if(ve.isEnabled("styles-pane-css-changes")&&u.parentRule){const b=u.parentRule.resourceURL();b&&!c.has(b)&&(await this.trackURLForChanges(b),c.add(b))}const m=e.isInherited(u)?e.nodeForStyle(u):null;if(m&&m!==o){o=m;const b=await W.createInheritedNodeBlock(o);i.push(b)}d(u);const y=i[i.length-1];y&&this.idleCallbackManager.schedule(()=>{const b=new z(this,e,u,s,t,n);s++,y.sections.push(b)})}const h=Array.from(e.customHighlightPseudoNames()).map(u=>({highlightName:u,pseudoType:"highlight",pseudoStyles:e.customHighlightPseudoStyles(u)})),p=[...e.pseudoTypes()].map(u=>({highlightName:null,pseudoType:u,pseudoStyles:e.pseudoStyles(u)})),g=h.concat(p).sort((u,m)=>u.pseudoType==="before"&&m.pseudoType!=="before"?-1:u.pseudoType!=="before"&&m.pseudoType==="before"?1:u.pseudoType<m.pseudoType?-1:u.pseudoType>m.pseudoType?1:0);for(const u of g){o=null;for(let m=0;m<u.pseudoStyles.length;++m){const y=u.pseudoStyles[m],b=e.isInherited(y)?e.nodeForStyle(y):null;if(m===0||b!==o)if(r=null,b){const S=await W.createInheritedPseudoTypeBlock(u.pseudoType,u.highlightName,b);i.push(S)}else{const S=W.createPseudoTypeBlock(u.pseudoType,u.highlightName);i.push(S)}o=b,d(y);const C=i[i.length-1];this.idleCallbackManager.schedule(()=>{const S=new qo(this,e,y,s,t,n);s++,C.sections.push(S)})}}for(const u of e.keyframes()){const m=W.createKeyframesBlock(u.name().text);for(const y of u.keyframes())this.idleCallbackManager.schedule(()=>{m.sections.push(new Yo(this,e,y.style,s)),s++});i.push(m)}const f=e.fontPaletteValuesRule();if(f){const u=W.createFontPaletteValuesRuleBlock(f.name().text);this.idleCallbackManager.schedule(()=>{u.sections.push(new Go(this,e,f.style,s)),s++}),i.push(u)}for(const u of e.positionTryRules()){const m=W.createPositionTryBlock(u.name().text);this.idleCallbackManager.schedule(()=>{m.sections.push(new Ko(this,e,u.style,s,u.active())),s++}),i.push(m)}if(e.registeredProperties().length>0){const u=e.registeredProperties().length<=Pd,m=W.createRegisteredPropertiesBlock(u);for(const y of e.registeredProperties())this.idleCallbackManager.schedule(()=>{m.sections.push(new zo(this,e,y.style(),s,y.propertyName(),u)),s++});i.push(m)}return a?pt.instance().item().setVisible(!0):rt.instance().isShowing()&&k.instance().showToolbarPane(null,pt.instance().item()),await this.idleCallbackManager.awaitDone(),i}async createNewRuleInViaInspectorStyleSheet(){const e=this.cssModel(),t=this.node();if(!e||!t)return;this.setUserOperation(!0);const n=await e.requestViaInspectorStylesheet(t.frameId());this.setUserOperation(!1),await this.createNewRuleInStyleSheet(n)}async createNewRuleInStyleSheet(e){if(!e)return;const n=((await e.requestContent()).content||"").split(`
`),i=zt.createFromLocation(n.length-1,n[n.length-1].length);this.sectionBlocks&&this.sectionBlocks.length>0&&this.addBlankSection(this.sectionBlocks[0].sections[0],e.id,i)}addBlankSection(e,t,n){const i=this.node(),s=new Ht(this,e.matchedStyles,i?i.simpleSelector():"",t,n,e.style(),0);this.sectionsContainer.insertBefore(s.element,e.element.nextSibling);for(const r of this.sectionBlocks){const a=r.sections.indexOf(e);a!==-1&&(r.sections.splice(a+1,0,s),s.startEditingSelector())}let o=0;for(const r of this.sectionBlocks)for(const a of r.sections)a.setSectionIdx(o),o++}removeSection(e){for(const t of this.sectionBlocks){const n=t.sections.indexOf(e);n!==-1&&(t.sections.splice(n,1),e.element.remove())}}filterRegex(){return this.filterRegexInternal}updateFilter(){let e=!1,t=0;for(const n of this.sectionBlocks)t+=n.updateFilter(),e=!!t||e;this.noMatchesElement.classList.toggle("hidden",!!e),this.visibleSections=t}wasShown(){T.instance().setFlavor(ce,this),super.wasShown()}willHide(){this.hideAllPopovers(),super.willHide(),T.instance().setFlavor(ce,null)}hideAllPopovers(){this.swatchPopoverHelperInternal.hide(),this.imagePreviewPopover.hide(),this.activeCSSAngle&&(this.activeCSSAngle.minify(),this.activeCSSAngle=null),this.#t?.hidePopover(),this.#n?.hidePopover()}getSectionBlockByName(e){return this.sectionBlocks.find(t=>t.titleElement()?.textContent===e)}allSections(){let e=[];for(const t of this.sectionBlocks)e=e.concat(t.sections);return e}async trackURLForChanges(e){const t=this.#i.get(e);t&&kt().unsubscribeFromDiffChange(t.uiSourceCode,t.diffChangeCallback);const n=ya.instance().uiSourceCodeForURL(e);if(!n)return;const i=this.refreshChangedLines.bind(this,n);kt().subscribeToDiffChange(n,i);const s={uiSourceCode:n,changedLines:new Set,diffChangeCallback:i};this.#i.set(e,s),await this.refreshChangedLines(s.uiSourceCode)}isPropertyChanged(e){const t=e.ownerStyle.parentRule?.resourceURL();if(!t)return!1;const n=this.#i.get(t);if(!n)return!1;const{changedLines:i,formattedCurrentMapping:s}=n,o=$e.instance().propertyUILocation(e,!0);if(!o)return!1;if(!s)return i.has(o.lineNumber+1);const r=s.originalToFormatted(o.lineNumber,o.columnNumber)[0];return i.has(r+1)}updateChangeStatus(){if(!this.#o)return;let e=!1;for(const t of this.#i.values())if(t.changedLines.size>0){e=!0;break}this.#o.element.classList.toggle("hidden",!e)}async refreshChangedLines(e){const t=this.#i.get(e.url());if(!t)return;const n=await kt().requestDiff(e,{shouldFormatDiff:!0}),i=new Set;if(t.changedLines=i,!n)return;const{diff:s,formattedCurrentMapping:o}=n,{rows:r}=ql(s);for(const a of r)a.type==="addition"&&i.add(a.currentLineNumber);t.formattedCurrentMapping=o}async getFormattedChanges(){let e="";for(const[t,{uiSourceCode:n}]of this.#i){const i=await kt().requestDiff(n,{shouldFormatDiff:!0});if(!i||i?.diff.length<2)continue;const s=await Bt.formatCSSChangesFromDiff(i.diff);s.length>0&&(e+=`/* ${tr(t)} */

${s}

`)}return e}clipboardCopy(e){L.actionTaken(We.StyleRuleCopied)}createStylesSidebarToolbar(){const e=this.contentElement.createChild("div","styles-sidebar-pane-toolbar-container"),t=e.createChild("div","hbox styles-sidebar-pane-toolbar"),n=new Ge("styles-pane-toolbar",t),i=new hi(void 0,1,1,void 0,void 0,!1);return i.addEventListener("TextChanged",this.onFilterChanged,this),n.appendToolbarItem(i),n.appendItemsAtLocation("styles-sidebarpane-toolbar"),this.toolbar=n,e.createChild("div","styles-sidebar-toolbar-pane-container").createChild("div","styles-sidebar-toolbar-pane")}showToolbarPane(e,t){this.pendingWidgetToggle&&this.pendingWidgetToggle.setToggled(!1),this.pendingWidgetToggle=t,this.animatedToolbarPane?this.pendingWidget=e:this.startToolbarPaneAnimation(e),e&&t&&t.setToggled(!0)}appendToolbarItem(e){this.toolbar&&this.toolbar.appendToolbarItem(e)}startToolbarPaneAnimation(e){if(e===this.currentToolbarPane)return;if(e&&this.currentToolbarPane){this.currentToolbarPane.detach(),e.show(this.toolbarPaneElement),this.currentToolbarPane=e,this.currentToolbarPane.focus();return}this.animatedToolbarPane=e,this.currentToolbarPane?this.toolbarPaneElement.style.animationName="styles-element-state-pane-slideout":e&&(this.toolbarPaneElement.style.animationName="styles-element-state-pane-slidein"),e&&e.show(this.toolbarPaneElement);const t=n.bind(this);this.toolbarPaneElement.addEventListener("animationend",t,!1);function n(){this.toolbarPaneElement.style.removeProperty("animation-name"),this.toolbarPaneElement.removeEventListener("animationend",t,!1),this.currentToolbarPane&&this.currentToolbarPane.detach(),this.currentToolbarPane=this.animatedToolbarPane,this.currentToolbarPane&&this.currentToolbarPane.focus(),this.animatedToolbarPane=null,this.pendingWidget&&(this.startToolbarPaneAnimation(this.pendingWidget),this.pendingWidget=null)}}createRenderingShortcuts(){const e=O.instance().moduleSetting("emulated-css-media-feature-prefers-color-scheme"),t=O.instance().moduleSetting("emulate-auto-dark-mode"),n=(s,o)=>`${s?"✓ ":""}${o}`,i=new en(X(Y.toggleRenderingEmulations),"brush","brush-filled",void 0,!1);return i.element.setAttribute("jslog",`${ba("rendering-emulations").track({click:!0})}`),i.element.addEventListener("click",s=>{const o=i.element.getBoundingClientRect(),r=new ze(s,{x:o.left,y:o.bottom}),a=e.get(),d=a==="light",c=a==="dark",h=t.get(),p=n(d,"prefers-color-scheme: light"),g=n(c,"prefers-color-scheme: dark"),f=n(h,X(Y.automaticDarkMode));r.defaultSection().appendItem(p,()=>{t.set(!1),e.set(d?"":"light"),i.setToggled(!!e.get())},{jslogContext:"prefer-light-color-scheme"}),r.defaultSection().appendItem(g,()=>{t.set(!1),e.set(c?"":"dark"),i.setToggled(!!e.get())},{jslogContext:"prefer-dark-color-scheme"}),r.defaultSection().appendItem(f,()=>{t.set(!h),i.setToggled(!!e.get())},{jslogContext:"emulate-auto-dark-mode"}),r.show(),s.stopPropagation()},{capture:!0}),i}createCopyAllChangesButton(){const e=new On(X(Y.copyAllCSSChanges),"copy");e.element.setAttribute("data-content",X(Y.copiedToClipboard));let t;return e.addEventListener("Click",async()=>{const n=await this.getFormattedChanges();U.copyText(n),L.styleTextCopied(2),t&&(clearTimeout(t),t=void 0),e.element.classList.add("copied-to-clipboard"),t=window.setTimeout(()=>{e.element.classList.remove("copied-to-clipboard"),t=void 0},2e3)}),e}}const Ld=23;class W{titleElementInternal;sections;#e=!1;#t;constructor(e,t,n){this.titleElementInternal=e,this.sections=[],this.#e=n??!1,t&&e instanceof HTMLElement&&(this.#t=Mn(this.#e?"triangle-down":"triangle-right","section-block-expand-icon"),e.classList.toggle("empty-section",!this.#e),Oi(e,this.#e),e.appendChild(this.#t),e.tabIndex=-1,e.addEventListener("click",()=>this.expand(!this.#e),!1))}expand(e){!this.titleElementInternal||!this.#t||(this.titleElementInternal.classList.toggle("empty-section",!e),this.#t.name=e?"triangle-down":"triangle-right",Oi(this.titleElementInternal,e),this.#e=e,this.sections.forEach(t=>t.element.classList.toggle("hidden",!e)))}static createPseudoTypeBlock(e,t){const n=document.createElement("div");n.className="sidebar-separator",n.setAttribute("jslog",`${Ke("pseudotype")}`);const i=t?`(${t})`:"",s=`${e}${i}`;return n.textContent=X(Y.pseudoSElement,{PH1:s}),new W(n)}static async createInheritedPseudoTypeBlock(e,t,n){const i=document.createElement("div");i.className="sidebar-separator",i.setAttribute("jslog",`${Ke("inherited-pseudotype")}`);const s=t?`(${t})`:"",o=`${e}${s}`;w(i,X(Y.inheritedFromSPseudoOf,{PH1:o}));const r=await Rn.linkify(n,{preventKeyboardFocus:!0,tooltip:void 0});return i.appendChild(r),new W(i)}static createRegisteredPropertiesBlock(e){const t=document.createElement("div"),n=new W(t,!0,e);return t.className="sidebar-separator",t.appendChild(document.createTextNode(ot)),n}static createKeyframesBlock(e){const t=document.createElement("div");return t.className="sidebar-separator",t.setAttribute("jslog",`${Ke("keyframes")}`),t.textContent=`@keyframes ${e}`,new W(t)}static createFontPaletteValuesRuleBlock(e){const t=document.createElement("div");return t.className="sidebar-separator",t.textContent=`@font-palette-values ${e}`,new W(t)}static createPositionTryBlock(e){const t=document.createElement("div");return t.className="sidebar-separator",t.setAttribute("jslog",`${Ke("position-try")}`),t.textContent=`@position-try ${e}`,new W(t)}static async createInheritedNodeBlock(e){const t=document.createElement("div");t.className="sidebar-separator",t.setAttribute("jslog",`${Ke("inherited")}`),w(t,X(Y.inheritedFroms));const n=await Rn.linkify(e,{preventKeyboardFocus:!0,tooltip:void 0});return t.appendChild(n),new W(t)}static createLayerBlock(e){const t=document.createElement("div");t.className="sidebar-separator layer-separator",t.setAttribute("jslog",`${Ke("layer")}`),w(t.createChild("div"),X(Y.layer));const n=e.layers;if(!n.length&&e.origin==="user-agent"){const o=e.origin==="user-agent"?" user agent stylesheet":" implicit outer layer";return w(t.createChild("div"),o),new W(t)}const i=t.createChild("button");i.className="link",i.title=X(Y.clickToRevealLayer);const s=n.map(o=>ps.readableLayerName(o.text)).join(".");return i.textContent=s,i.onclick=()=>rt.instance().revealLayer(s),new W(t)}updateFilter(){let e=!1,t=0;for(const n of this.sections)t+=n.updateFilter()?1:0,e=n.updateFilter()||e;return this.titleElementInternal&&this.titleElementInternal.classList.toggle("hidden",!e),t}titleElement(){return this.titleElementInternal}}class Jo{discarded;promises;queue;constructor(){this.discarded=!1,this.promises=[],this.queue=[]}discard(){this.discarded=!0}schedule(e){if(this.discarded)return;const t=new Promise((n,i)=>{this.queue.push({fn:e,resolve:n,reject:i})});this.promises.push(t),this.scheduleIdleCallback(100)}scheduleIdleCallback(e){window.requestIdleCallback(()=>{const t=this.queue.shift();Ea(t);try{this.discarded||t.fn(),t.resolve()}catch(n){t.reject(n)}},{timeout:e})}awaitDone(){return Promise.all(this.promises)}}function Zo(l){return`'${l.replaceAll("'","\\'")}'`}class er extends ws{isColorAware;cssCompletions;selectedNodeComputedStyles;parentNodeComputedStyles;treeElement;isEditingName;cssVariables;constructor(e,t,n=[]){super(),this.initialize(this.buildPropertyCompletions.bind(this),Ca);const i=N();this.isColorAware=N().isColorAwareProperty(e.property.name),this.cssCompletions=[];const s=e.node();if(t)this.cssCompletions=i.allProperties(),s&&!s.isSVGNode()&&(this.cssCompletions=this.cssCompletions.filter(o=>!i.isSVGProperty(o)));else if(this.cssCompletions=[...n,...i.getPropertyValues(e.property.name)],s&&i.isFontFamilyProperty(e.property.name)){const o=s.domModel().cssModel().fontFaces().map(r=>Zo(r.getFontFamily()));this.cssCompletions.unshift(...o)}if(this.selectedNodeComputedStyles=null,this.parentNodeComputedStyles=null,this.treeElement=e,this.isEditingName=t,this.cssVariables=e.matchedStyles().availableCSSVariables(e.property.ownerStyle),this.cssVariables.length<1e3?this.cssVariables.sort(Ss):this.cssVariables.sort(),!t&&(this.disableDefaultSuggestionForEmptyInput(),e&&e.valueElement)){const o=e.valueElement.textContent,r=Ri()?"Cmd":"Ctrl",a=Ri()?"Option":"Alt";o!==null&&(o.match(/#[\da-f]{3,6}$/i)?this.setTitle(X(Y.incrementdecrementWithMousewheelOne,{PH1:r,PH2:a})):o.match(/\d+/)&&this.setTitle(X(Y.incrementdecrementWithMousewheelHundred,{PH1:r,PH2:a})))}}onKeyDown(e){const t=e;switch(t.key){case"ArrowUp":case"ArrowDown":case"PageUp":case"PageDown":if(!this.isSuggestBoxVisible()&&this.handleNameOrValueUpDown(t)){t.preventDefault();return}break;case"Enter":if(t.shiftKey)return;this.tabKeyPressed(),t.preventDefault();return;case" ":if(this.isEditingName){this.tabKeyPressed(),t.preventDefault();return}}super.onKeyDown(t)}onMouseWheel(e){if(this.handleNameOrValueUpDown(e)){e.consume(!0);return}super.onMouseWheel(e)}tabKeyPressed(){return this.acceptAutoComplete(),!1}handleNameOrValueUpDown(e){function t(i,s){this.treeElement.nameElement&&this.treeElement.valueElement&&this.treeElement.applyStyleText(this.treeElement.nameElement.textContent+": "+this.treeElement.valueElement.textContent,!1)}function n(i,s,o){return s!==0&&!o.length&&N().isLengthProperty(this.treeElement.property.name)&&!this.treeElement.property.value.toLowerCase().startsWith("calc(")&&(o="px"),i+s+o}return!!(!this.isEditingName&&this.treeElement.valueElement&&ui(e,this.treeElement.valueElement,t.bind(this),this.isValueSuggestion.bind(this),n.bind(this)))}isValueSuggestion(e){return e?(e=e.toLowerCase(),this.cssCompletions.indexOf(e)!==-1||e.startsWith("--")):!1}async buildPropertyCompletions(e,t,n){const i=t.toLowerCase(),s=!this.isEditingName&&e.trim().endsWith("var(");if(!t&&!n&&!s&&(this.isEditingName||e))return Promise.resolve([]);const o=[],r=[];s||(this.cssCompletions.forEach(u=>p.call(this,u,!1)),this.isEditingName&&N().aliasesFor().forEach((u,m)=>{if(m.toLowerCase().indexOf(i)!==0)return;const b={text:m,priority:N().propertyUsageWeight(m),isCSSVariableColor:!1},C={text:u,priority:N().propertyUsageWeight(u),subtitle:`= ${m}`,isCSSVariableColor:!1};o.push(b,C)}));const a=this.treeElement.node();this.isEditingName&&a&&N().nameValuePresets(a.isSVGNode()).forEach(m=>p.call(this,m,!1,!0)),(this.isEditingName||s)&&this.cssVariables.forEach(u=>p.call(this,u,!0));const d=o.concat(r);!this.isEditingName&&!d.length&&t.length>1&&"!important".startsWith(i)&&d.push({text:"!important",title:void 0,subtitle:void 0,priority:void 0,isSecondary:void 0,subtitleRenderer:void 0,selectionRange:void 0,hideGhostText:void 0,iconElement:void 0});const c=t.replace("-","");if(c&&c===c.toUpperCase())for(let u=0;u<d.length;++u)d[u].text.startsWith("--")||(d[u].text=d[u].text.toUpperCase());for(const u of d){if(s){u.title=u.text,u.text+=")";continue}const m=N().getValuePreset(this.treeElement.name,u.text);!this.isEditingName&&m&&(u.title=u.text,u.text=m.text,u.selectionRange={startColumn:m.startColumn,endColumn:m.endColumn})}const h=async()=>{if(!a||this.selectedNodeComputedStyles)return;this.selectedNodeComputedStyles=await a.domModel().cssModel().getComputedStyle(a.id);const u=a.parentNode;u&&(this.parentNodeComputedStyles=await u.domModel().cssModel().getComputedStyle(u.id))};for(const u of d){await h();const m=Nl(this.isEditingName?u.text:`${this.treeElement.property.name}: ${u.text}`,this.selectedNodeComputedStyles,this.parentNodeComputedStyles);if(!m)continue;const y=new Le,b="12.5px",C="12.5px";y.data={iconName:m.iconName,width:b,height:C,color:"var(--icon-default)"},y.style.transform=`rotate(${m.rotate}deg) scale(${m.scaleX*1.1}, ${m.scaleY*1.1})`,y.style.maxHeight=C,y.style.maxWidth=b,u.iconElement=y}return this.isColorAware&&!this.isEditingName&&d.sort((u,m)=>u.isCSSVariableColor&&m.isCSSVariableColor?0:u.isCSSVariableColor?-1:1),Promise.resolve(d);function p(u,m,y){const b=u.toLowerCase().indexOf(i),C={text:u,title:void 0,subtitle:void 0,priority:void 0,isSecondary:void 0,subtitleRenderer:void 0,selectionRange:void 0,hideGhostText:void 0,iconElement:void 0,isCSSVariableColor:!1};if(m){const S=this.treeElement.matchedStyles().computeCSSVariable(this.treeElement.property.ownerStyle,u);if(S){const I=Ce(S.value);I?(C.subtitleRenderer=g.bind(null,I),C.isCSSVariableColor=!0):C.subtitleRenderer=f.bind(null,S.value)}}y&&(C.hideGhostText=!0),b===0?(C.priority=this.isEditingName?N().propertyUsageWeight(u):1,o.push(C)):b>-1&&r.push(C)}function g(u){const m=new nt;return m.renderColor(u),m.style.pointerEvents="none",m}function f(u){const m=document.createElement("span");return m.className="suggestion-subtitle",m.textContent=`${u}`,m.style.maxWidth="100px",m.title=`${u}`,m}}}function xi(l){const e=/(?<!\\)\\(?:([a-fA-F0-9]{1,6})|(.))[\n\t\x20]?/gs;return l.replace(e,(t,n,i)=>{if(i)return i;const s=parseInt(n,16);return 55296<=s&&s<=57343||s===0||s>1114111?"�":String.fromCodePoint(s)})}function tr(l){const e=new URL(l);return e.search?`${e.origin}${e.pathname}${e.search.replaceAll("*/","*%2F")}${e.hash}`:e.toString()}let Ad=class{handleAction(e,t){switch(t){case"elements.new-style-rule":return L.actionTaken(We.NewStyleRuleAdded),ce.instance().createNewRuleInViaInspectorStyleSheet(),!0}return!1}},Cn,kd=class nr{button;constructor(){this.button=Ge.createActionButtonForId("elements.new-style-rule"),this.button.setLongClickable(!0),new Sa(this.button.element,this.longClicked.bind(this)),T.instance().addFlavorChangeListener(A,e.bind(this)),e.call(this);function e(){let t=T.instance().flavor(A);t=t?t.enclosingElementOrSelf():null,this.button.setEnabled(!!t)}}static instance(e={forceNew:null}){const{forceNew:t}=e;return(!Cn||t)&&(Cn=new nr),Cn}longClicked(e){ce.instance().onAddButtonLongClick(e)}item(){return this.button}};const jc=Object.freeze(Object.defineProperty({__proto__:null,ActionDelegate:Ad,ButtonProvider:kd,CSSPropertyPrompt:er,IdleCallbackManager:Jo,REGISTERED_PROPERTY_SECTION_NAME:ot,SectionBlock:W,StylesSidebarPane:ce,escapeUrlAsCssComment:tr,quoteFamilyName:Zo,unescapeCssString:xi},Symbol.toStringTag,{value:"Module"})),Jn={cssPropertyName:"`CSS` property name: {PH1}",cssPropertyValue:"`CSS` property value: {PH1}"},Md=G("panels/elements/PropertyRenderer.ts",Jn),Ji=q.bind(void 0,Md);function Zi(l,e){const t=[...l];return vs(l,e)&&t.push(document.createTextNode(" ")),t.push(...e),t}class Qt{ast;renderers;matchedResult;cssControls;options;constructor(e,t,n,i,s={readonly:!1}){this.ast=e,this.renderers=t,this.matchedResult=n,this.cssControls=i,this.options=s}addControl(e,t){if(this.cssControls){const n=this.cssControls.get(e);n?n.push(t):this.cssControls.set(e,[t])}}}let B=class ir extends wa{#e;#t=[];#n;constructor(e,t,n,i,s){super(e),this.#e=n,this.#n=new Qt(this.ast,t,this.#e,i,s)}static render(e,t){if(!Array.isArray(e))return this.render([e],t);const n=new Ta;return{nodes:e.map(o=>this.walkExcludingSuccessors(t.ast.subtree(o),t.renderers,t.matchedResult,n,t.options)).map(o=>o.#t).reduce(Zi),cssControls:n}}static renderInto(e,t,n){const{nodes:i,cssControls:s}=this.render(e,t);return n.lastChild&&vs([n.lastChild],i)&&n.appendChild(document.createTextNode(" ")),i.map(o=>n.appendChild(o)),{nodes:i,cssControls:s}}renderedMatchForTest(e,t){}enter({node:e}){const t=this.#e.getMatch(e),n=t&&this.#n.renderers.get(t.constructor);if(n||t instanceof va){const i=n?n.render(t,this.#n):t.render();return this.renderedMatchForTest(i,t),this.#t=Zi(this.#t,i),!1}return!0}static renderNameElement(e){const t=document.createElement("span");return t.setAttribute("jslog",`${xa().track({change:!0,keydown:"ArrowLeft|ArrowUp|PageUp|Home|PageDown|ArrowRight|ArrowDown|End|Space|Tab|Enter|Escape"})}`),ue(t,Ji(Jn.cssPropertyName,{PH1:e})),t.className="webkit-css-property",t.textContent=e,t.normalize(),t}static renderValueElement(e,t,n){const i=document.createElement("span");i.setAttribute("jslog",`${ye().track({change:!0,keydown:"ArrowLeft|ArrowUp|PageUp|Home|PageDown|ArrowRight|ArrowDown|End|Space|Tab|Enter|Escape"})}`),ue(i,Ji(Jn.cssPropertyValue,{PH1:t})),i.className="value";const s=yt(e,t);if(!s)return i.appendChild(document.createTextNode(t)),i;const o=[],r=new Map;for(const c of n){const h=c.matcher();o.push(h),r.set(h.matchType,c)}const a=ri.walk(s,o);s.trailingNodes.forEach(c=>a.matchText(c));const d=new Qt(s,r,a);return ir.render([s.tree,...s.trailingNodes],d).nodes.forEach(c=>i.appendChild(c)),i.normalize(),i}};class rn{rule;node;constructor(e,t){this.rule=e,this.node=t}render(e){const t=xi(e.url),n=document.createDocumentFragment();w(n,"url(");let i=null;this.rule&&this.rule.resourceURL()?i=xs.completeURL(this.rule.resourceURL(),t):this.node&&(i=this.node.resolveURL(t));const s=st.setImageUrl(tt.linkifyURL(i||t,{text:t,preventClick:!1,bypassURLTrimming:!0,showColumnNumber:!1,inlineFrameIndex:0}),i||t);return n.appendChild(s),w(n,")"),[n]}matcher(){return new Ks}}class an{render(e){const t=document.createElement("span");return t.innerText=e.text,de.install(t,xi(e.text)),[t]}matcher(){return new Qs}}const $c=Object.freeze(Object.defineProperty({__proto__:null,Renderer:B,RenderingContext:Qt,StringRenderer:an,URLRenderer:rn},Symbol.toStringTag,{value:"Module"})),{html:Zn}=ds,qe={showAll:"Show all",group:"Group",noMatchingProperty:"No matching property",navigateToSelectorSource:"Navigate to selector source",navigateToStyle:"Navigate to style"},Od=G("panels/elements/ComputedStyleWidget.ts",qe),lt=q.bind(void 0,Od),es=new Map;function Rd(l,e,t){const n=e+":"+t,i=es.get(n);if(i)return i;const s=B.renderNameElement(e);s.slot="name";const o=B.renderValueElement(e,t,[new sr,new rn(null,l),new an]);return o.slot="value",es.set(n,{name:s,value:o}),{name:s,value:o}}const Dd=(l,e,t,n,i,s,o)=>{const{name:r,value:a}=Rd(l,e,t);return Zn`<devtools-computed-style-property
        .traceable=${n}
        .inherited=${i}
        @oncontextmenu=${o}
        @onnavigatetosource=${d=>{s&&or(s,d)}}>
          ${r}
          ${a}
      </devtools-computed-style-property>`},Fd=(l,e,t,n,i)=>{const s=new Pl,o=B.renderValueElement(e.name,e.value,[new sr,new rn(null,l),new an]);o.slot="trace-value",s.appendChild(o);const r=e.ownerStyle.parentRule;let a;return r&&(a=z.createRuleOriginNode(n,i,r)),s.data={selector:r?r.selectorText():"element.style",active:!t,onNavigateToSource:or.bind(null,e),ruleOriginNode:a},s};class sr{render(e,t){const n=Ce(e.text);if(!n)return[document.createTextNode(e.text)];const i=new nt;i.setReadonly(!0),i.renderColor(n);const s=document.createElement("span");return s.textContent=e.text,i.append(s),i.addEventListener(vt.eventName,o=>{const{data:{color:r}}=o;s.textContent=r.getAuthoredText()??r.asString()}),t.addControl("color",i),[i]}matcher(){return new sn}}const or=(l,e)=>{e&&(ee(l),e.consume(!0))},Bd=(l,e)=>{if(l.startsWith("--")!==e.startsWith("--"))return l.startsWith("--")?1:-1;if(l.startsWith("-webkit")!==e.startsWith("-webkit"))return l.startsWith("-webkit")?1:-1;const t=N().canonicalPropertyName(l),n=N().canonicalPropertyName(e);return Na(t,n)};class rr extends wt{computedStyleModel;showInheritedComputedStylePropertiesSetting;groupComputedStylesSetting;input;filterRegex;noMatchesElement;linkifier;imagePreviewPopover;#e=new pi;#t;constructor(){super(!0),this.contentElement.classList.add("styles-sidebar-computed-style-widget"),this.computedStyleModel=new nn,this.computedStyleModel.addEventListener("ComputedStyleChanged",this.update,this),this.showInheritedComputedStylePropertiesSetting=O.instance().createSetting("show-inherited-computed-style-properties",!1),this.showInheritedComputedStylePropertiesSetting.addChangeListener(this.update.bind(this)),this.groupComputedStylesSetting=O.instance().createSetting("group-computed-styles",!1),this.groupComputedStylesSetting.addChangeListener(()=>{this.update()});const e=this.contentElement.createChild("div","hbox styles-sidebar-pane-toolbar"),t=new Ge("styles-pane-toolbar",e),n=new hi(void 0,1,1,void 0,void 0,!1);n.addEventListener("TextChanged",this.onFilterChanged,this),t.appendToolbarItem(n),this.input=n,this.filterRegex=null,t.appendToolbarItem(new bt(this.showInheritedComputedStylePropertiesSetting,void 0,lt(qe.showAll))),t.appendToolbarItem(new bt(this.groupComputedStylesSetting,void 0,lt(qe.group))),this.noMatchesElement=this.contentElement.createChild("div","gray-info-message"),this.noMatchesElement.textContent=lt(qe.noMatchingProperty),this.contentElement.appendChild(this.#e),this.linkifier=new tt(Vd),this.imagePreviewPopover=new st(this.contentElement,s=>{const o=s.composedPath()[0];return o instanceof Element?o:null},()=>this.computedStyleModel.node()),new Ws(this.computedStyleModel).show(this.contentElement)}onResize(){const e=this.contentElement.offsetWidth<260;this.#e.classList.toggle("computed-narrow",e)}wasShown(){super.wasShown(),this.registerCSSFiles([js])}async doUpdate(){const[e,t]=await Promise.all([this.computedStyleModel.fetchComputedStyle(),this.fetchMatchedCascade()]);if(!e||!t){this.noMatchesElement.classList.remove("hidden");return}this.groupComputedStylesSetting.get()?await this.rebuildGroupedList(e,t):await this.rebuildAlphabeticalList(e,t)}async fetchMatchedCascade(){const e=this.computedStyleModel.node();if(!e||!this.computedStyleModel.cssModel())return null;const t=this.computedStyleModel.cssModel();if(!t)return null;return t.cachedMatchedCascadeForNode(e).then(n.bind(this));function n(i){return i&&i.node()===this.computedStyleModel.node()?i:null}}async rebuildAlphabeticalList(e,t){if(this.imagePreviewPopover.hide(),this.linkifier.reset(),!this.computedStyleModel.cssModel())return;const i=[...e.computedStyle.keys()];i.sort(Bd);const s=e.node,o=this.computePropertyTraces(t),r=this.computeNonInheritedProperties(t),a=this.showInheritedComputedStylePropertiesSetting.get(),d=[];for(const h of i){const p=e.computedStyle.get(h)||"",g=N().canonicalPropertyName(h),f=!r.has(g);!a&&f&&!ts.has(h)||!a&&h.startsWith("--")||h!==g&&p===e.computedStyle.get(g)||d.push(this.buildTreeNode(o,h,p,f))}const c=this.createTreeNodeRenderer(o,s,t);this.#t={tree:d,compact:!0,defaultRenderer:c},this.filterAlphabeticalList()}async rebuildGroupedList(e,t){this.imagePreviewPopover.hide(),this.linkifier.reset();const n=this.computedStyleModel.cssModel();if(!e||!t||!n){this.noMatchesElement.classList.remove("hidden");return}const i=e.node,s=this.computePropertyTraces(t),o=this.computeNonInheritedProperties(t),r=this.showInheritedComputedStylePropertiesSetting.get(),a=new Map,d=[];for(const[h,p]of e.computedStyle){const g=N().canonicalPropertyName(h),f=!o.has(g);if(!r&&f&&!ts.has(h)||!r&&h.startsWith("--")||h!==g&&p===e.computedStyle.get(g))continue;const u=od(h);for(const m of u)a.has(m)||a.set(m,[]),a.get(m)?.push(h)}this.#e.removeChildren();for(const h of id){const p=a.get(h);if(p&&p.length>0){const g=[];for(const f of p){const u=e.computedStyle.get(f)||"",m=N().canonicalPropertyName(f),y=!o.has(m);g.push(this.buildTreeNode(s,f,u,y))}d.push({id:h,treeNodeData:{tag:"category",name:h},children:async()=>g})}}const c=this.createTreeNodeRenderer(s,i,t);return this.#t={tree:d,compact:!0,defaultRenderer:c},this.filterGroupLists()}buildTraceNode(e){const t=e.ownerStyle.parentRule;return{treeNodeData:{tag:"traceElement",property:e,rule:t},id:(t?.origin||"")+": "+e.ownerStyle.styleSheetId+(e.range||e.name)}}createTreeNodeRenderer(e,t,n){return i=>{const s=i.treeNodeData;if(s.tag==="property"){const r=e.get(s.propertyName)?.find(d=>n.propertyState(d)==="Active");return Dd(t,s.propertyName,s.propertyValue,e.has(s.propertyName),s.inherited,r,d=>{r&&this.handleContextMenuEvent(n,r,d)})}if(s.tag==="traceElement"){const o=n.propertyState(s.property)==="Overloaded",r=Fd(t,s.property,o,n,this.linkifier);return r.addEventListener("contextmenu",this.handleContextMenuEvent.bind(this,n,s.property)),Zn`${r}`}return Zn`<span style="cursor: text; color: var(--sys-color-token-subtle);">${s.name}</span>`}}buildTreeNode(e,t,n,i){const s={tag:"property",propertyName:t,propertyValue:n,inherited:i},o=e.get(t);return o?{treeNodeData:s,jslogContext:t,id:t,children:async()=>o.map(this.buildTraceNode)}:{treeNodeData:s,jslogContext:t,id:t}}handleContextMenuEvent(e,t,n){const i=new ze(n),s=t.ownerStyle.parentRule;if(s){const o=s.styleSheetId?e.cssModel().styleSheetHeaderForId(s.styleSheetId):null;o&&!o.isAnonymousInlineStyleSheet()&&i.defaultSection().appendItem(lt(qe.navigateToSelectorSource),()=>{z.tryNavigateToRuleLocation(e,s)},{jslogContext:"navigate-to-selector-source"})}i.defaultSection().appendItem(lt(qe.navigateToStyle),()=>ee(t),{jslogContext:"navigate-to-style"}),i.show()}computePropertyTraces(e){const t=new Map;for(const n of e.nodeStyles()){const i=n.allProperties();for(const s of i)!s.activeInStyle()||!e.propertyState(s)||(t.has(s.name)||t.set(s.name,[]),t.get(s.name).push(s))}return t}computeNonInheritedProperties(e){const t=new Set;for(const n of e.nodeStyles())for(const i of n.allProperties())e.propertyState(i)&&t.add(N().canonicalPropertyName(i.name));return t}onFilterChanged(e){this.filterComputedStyles(e.data?new RegExp(ci(e.data),"i"):null)}async filterComputedStyles(e){return this.filterRegex=e,this.groupComputedStylesSetting.get()?this.filterGroupLists():this.filterAlphabeticalList()}nodeFilter(e){const t=this.filterRegex,n=e.treeNodeData;return n.tag==="property"?!t||t.test(n.propertyName)||t.test(n.propertyValue):!0}filterAlphabeticalList(){if(!this.#t)return;const e=this.#t.tree.filter(this.nodeFilter.bind(this));this.#e.data={tree:e,defaultRenderer:this.#t.defaultRenderer,compact:this.#t.compact},this.noMatchesElement.classList.toggle("hidden",!!e.length)}async filterGroupLists(){if(!this.#t)return;const e=[];for(const t of this.#t.tree){const n=t.treeNodeData;if(n.tag!=="category"||!t.children)continue;const s=(await t.children()).filter(this.nodeFilter.bind(this));s.length&&e.push({id:n.name,treeNodeData:{tag:"category",name:n.name},children:async()=>s})}this.#e.data={tree:e,defaultRenderer:this.#t.defaultRenderer,compact:this.#t.compact},await this.#e.expandRecursively(0),this.noMatchesElement.classList.toggle("hidden",!!e.length)}}const Vd=30,ts=new Set(["display","height","width"]),Wc=Object.freeze(Object.defineProperty({__proto__:null,ComputedStyleWidget:rr},Symbol.toStringTag,{value:"Module"})),ar=new CSSStyleSheet;ar.replaceSync(`/*
 * Copyright (C) 2006, 2007, 2008 Apple Inc.  All rights reserved.
 * Copyright (C) 2009 Anthony Ricaud <rik@webkit.org>
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions
 * are met:
 *
 * 1.  Redistributions of source code must retain the above copyright
 *     notice, this list of conditions and the following disclaimer.
 * 2.  Redistributions in binary form must reproduce the above copyright
 *     notice, this list of conditions and the following disclaimer in the
 *     documentation and/or other materials provided with the distribution.
 * 3.  Neither the name of Apple Computer, Inc. ("Apple") nor the names of
 *     its contributors may be used to endorse or promote products derived
 *     from this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY APPLE AND ITS CONTRIBUTORS "AS IS" AND ANY
 * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL APPLE OR ITS CONTRIBUTORS BE LIABLE FOR ANY
 * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
 * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
 * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
 * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF
 * THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

#main-content {
  position: relative;
  flex: 1 1;
}

#elements-content {
  overflow: auto;
  padding: 2px 0 0;
  height: 100%;
}

.style-panes-wrapper {
  overflow: hidden scroll;
  background-color: var(--sys-color-cdt-base-container);

  & > div:not(:last-child) {
    border-bottom: 1px solid var(--sys-color-divider);
  }
}

#elements-content:not(.elements-wrap) > div {
  display: inline-block;
  min-width: 100%;
}

#elements-crumbs {
  background-color: var(--sys-color-cdt-base-container);
  border-top: 1px solid var(--sys-color-divider);
  overflow: hidden;
  width: 100%;
}

devtools-adorner-settings-pane {
  margin-bottom: 10px;
  border-bottom: 1px solid var(--sys-color-divider);
  overflow: auto;
}

devtools-tree-outline {
  overflow: auto;
}

.axtree-button {
  position: absolute;
  top: 16px;
  right: 20px;
  background-color: var(--sys-color-cdt-base-container);
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 1;
  border: 1px solid var(--sys-color-neutral-outline);
  border-radius: 3px;
}

/*# sourceURL=elementsPanel.css */
`);const lr=new CSSStyleSheet;lr.replaceSync(`/*
 * Copyright 2023 The Chromium Authors. All rights reserved.
 * Use of this source code is governed by a BSD-style license that can be
 * found in the LICENSE file.
 */

/* stylelint-disable-next-line selector-pseudo-element-no-unknown,selector-type-no-unknown */
:root::highlight(search-highlight) {
  background-color: var(--sys-color-yellow-outline);
}

/*# sourceURL=highlighting.css */
`);class _d{root;#e=0;#t;#n;constructor(e){this.root=e,this.#t=document.createTreeWalker(e,NodeFilter.SHOW_TEXT),this.#n=!this.#t.firstChild()}#s(){return this.#e+=this.#t.currentNode.textContent?.length??0,this.#n=!this.#t.nextNode(),!this.#n}#i(e){if(e<this.#e||this.#n)return null;for(;e>this.#e+(this.#t.currentNode.textContent?.length??0);)if(!this.#s())return null;return this.#t.currentNode}nextRange(e,t){if(t<=0||this.#n)return null;const n=this.#i(e);if(!n)return null;const i=e-this.#e,s=this.#i(e+t);if(!s)return null;const o=e+t-this.#e,r=new Range;return r.setStart(n,i),r.setEnd(s,o),r}}const Hd="search-highlight";let Sn;class Jt{#e=new Highlight;constructor(){document.adoptedStyleSheets.push(lr),CSS.highlights.set(Hd,this.#e)}static instance(e={forceNew:null}){const{forceNew:t}=e;return(!Sn||t)&&(Sn=new Jt),Sn}addHighlights(e){e.forEach(this.addHighlight.bind(this))}removeHighlights(e){e.forEach(this.removeHighlight.bind(this))}addHighlight(e){this.#e.add(e)}removeHighlight(e){this.#e.delete(e)}highlightOrderedTextRanges(e,t){const n=new _d(e),i=t.map(s=>n.nextRange(s.offset,s.length)).filter(s=>s!==null&&!s.collapsed);return this.addHighlights(i),i}}const Ud=function(l,e){return l.nodeType()!==Node.ELEMENT_NODE?l.localName()||l.nodeName().toLowerCase():ln(l,e)},ln=function(l,e){if(l.nodeType()!==Node.ELEMENT_NODE)return"";const t=[];let n=l;for(;n;){const i=jd(n,!!e,n===l);if(!i||(t.push(i),i.optimized))break;n=n.parentNode}return t.reverse(),t.join(" > ")},dr=function(l){let e=l;for(;e;){const t=e.ancestorShadowRoot();if(t&&t.shadowRootType()!==A.ShadowRootTypes.Open)return!1;e=e.ancestorShadowHost()}return!0},cr=function(l,e){if(l.nodeType()!==Node.ELEMENT_NODE)return"";const t=[];let n=l;for(;n;)t.push(ln(n,e)),n=n.ancestorShadowHost();t.reverse();let i="";for(let s=0;s<t.length;++s){const o=JSON.stringify(t[s]);s?i+=`.shadowRoot.querySelector(${o})`:i+=`document.querySelector(${o})`}return i},jd=function(l,e,t){if(l.nodeType()!==Node.ELEMENT_NODE)return null;const n=l.getAttribute("id");if(e){if(n)return new Ie(r(n),!0);const u=l.nodeName().toLowerCase();if(u==="body"||u==="head"||u==="html")return new Ie(l.nodeNameInCorrectCase(),!0)}const i=l.nodeNameInCorrectCase();if(n)return new Ie(i+r(n),!0);const s=l.parentNode;if(!s||s.nodeType()===Node.DOCUMENT_NODE)return new Ie(i,!0);function o(u){const m=u.getAttribute("class");return m?m.split(/\s+/g).filter(Boolean).map(function(y){return"$"+y}):[]}function r(u){return"#"+CSS.escape(u)}const a=o(l);let d=!1,c=!1,h=-1,p=-1;const g=s.children();for(let u=0;g&&(h===-1||!c)&&u<g.length;++u){const m=g[u];if(m.nodeType()!==Node.ELEMENT_NODE)continue;if(p+=1,m===l){h=p;continue}if(c||m.nodeNameInCorrectCase()!==i)continue;d=!0;const y=new Set(a);if(!y.size){c=!0;continue}const b=o(m);for(let C=0;C<b.length;++C){const S=b[C];if(y.has(S)&&(y.delete(S),!y.size)){c=!0;break}}}let f=i;if(t&&i.toLowerCase()==="input"&&l.getAttribute("type")&&!l.getAttribute("id")&&!l.getAttribute("class")&&(f+="[type="+CSS.escape(l.getAttribute("type")||"")+"]"),c)f+=":nth-child("+(h+1)+")";else if(d)for(const u of a)f+="."+CSS.escape(u.slice(1));return new Ie(f,!1)},ei=function(l,e){if(l.nodeType()===Node.DOCUMENT_NODE)return"/";const t=[];let n=l;for(;n;){const i=$d(n,e);if(!i||(t.push(i),i.optimized))break;n=n.parentNode}return t.reverse(),(t.length&&t[0].optimized?"":"/")+t.join("/")},$d=function(l,e){let t;const n=Wd(l);if(n===-1)return null;switch(l.nodeType()){case Node.ELEMENT_NODE:if(e&&l.getAttribute("id"))return new Ie('//*[@id="'+l.getAttribute("id")+'"]',!0);t=l.localName();break;case Node.ATTRIBUTE_NODE:t="@"+l.nodeName();break;case Node.TEXT_NODE:case Node.CDATA_SECTION_NODE:t="text()";break;case Node.PROCESSING_INSTRUCTION_NODE:t="processing-instruction()";break;case Node.COMMENT_NODE:t="comment()";break;case Node.DOCUMENT_NODE:t="";break;default:t="";break}return n>0&&(t+="["+n+"]"),new Ie(t,l.nodeType()===Node.DOCUMENT_NODE)},Wd=function(l){function e(s,o){if(s===o)return!0;if(s.nodeType()===Node.ELEMENT_NODE&&o.nodeType()===Node.ELEMENT_NODE)return s.localName()===o.localName();if(s.nodeType()===o.nodeType())return!0;const r=s.nodeType()===Node.CDATA_SECTION_NODE?Node.TEXT_NODE:s.nodeType(),a=o.nodeType()===Node.CDATA_SECTION_NODE?Node.TEXT_NODE:o.nodeType();return r===a}const t=l.parentNode?l.parentNode.children():null;if(!t)return 0;let n;for(let s=0;s<t.length;++s)if(e(l,t[s])&&t[s]!==l){n=!0;break}if(!n)return 0;let i=1;for(let s=0;s<t.length;++s)if(e(l,t[s])){if(t[s]===l)return i;++i}return-1};class Ie{value;optimized;constructor(e,t){this.value=e,this.optimized=t||!1}toString(){return this.value}}const zc=Object.freeze(Object.defineProperty({__proto__:null,Step:Ie,canGetJSPath:dr,cssPath:ln,fullQualifiedSelector:Ud,jsPath:cr,xPath:ei},Symbol.toStringTag,{value:"Module"})),hr=new CSSStyleSheet;hr.replaceSync(`/*
 * Copyright (c) 2014 The Chromium Authors. All rights reserved.
 * Use of this source code is governed by a BSD-style license that can be
 * found in the LICENSE file.
 */

.editing {
  box-shadow: var(--drop-shadow);
  background-color: var(--sys-color-cdt-base-container);
  text-overflow: clip !important; /* stylelint-disable-line declaration-no-important */
  padding-left: 2px;
  margin-left: -2px;
  padding-right: 2px;
  margin-right: -2px;
  margin-bottom: -1px;
  padding-bottom: 1px;
  opacity: 100% !important; /* stylelint-disable-line declaration-no-important */
}

.editing,
.editing * {
  color: var(--sys-color-on-surface) !important; /* stylelint-disable-line declaration-no-important */
  text-decoration: none !important; /* stylelint-disable-line declaration-no-important */
}

.editing br {
  display: none;
}

.adorner-reveal {
  margin: 0 3px;
}

.adorner-with-icon {
  display: flex;
  justify-content: center;
  align-items: center;
  overflow: hidden;
  height: 100%;

  devtools-icon {
    width: var(--sys-size-6);
    height: var(--sys-size-6);
    color: var(--icon-primary);
  }
}

.adorner-with-icon *:not(:last-child) {
  margin-right: 2px;
}

.elements-disclosure {
  width: 100%;
  display: inline-block;
  line-height: normal;
}

.elements-disclosure li {
  /** Keep margin-left & padding-left in sync with ElementsTreeElements.updateDecorations **/
  padding: 1px 0 0 14px;
  margin-left: -2px;
  word-break: normal;
  position: relative;
  min-height: 15px;
  line-height: 1.36;
  min-width: 200px;
}

.elements-disclosure li::after {
  content: "";
  position: absolute;
  inset: 0;
  left: calc(var(--indent) * -1);
  width: var(--indent);
}

.elements-disclosure li.parent {
  display: flex;
}

.elements-disclosure li.parent:not(.always-parent) {
  /** Keep it in sync with ElementsTreeElements.updateDecorations **/
  margin-left: -12px;
}

.elements-disclosure li .ai-button-container {
  display: none;
  margin-left: 1ch;
  overflow: visible;
  max-height: var(--sys-size-6);
  vertical-align: top;
  margin-top: -1px;
  position: absolute;
  right: var(--sys-size-3);
  bottom: 5px;
  z-index: 999;
}

.elements-disclosure .elements-tree-outline:not(.hide-selection-when-blurred) li.hovered .ai-button-container {
  display: inline-flex;
}

.elements-disclosure li .selected-hint::before {
  font-style: italic;
  content: " == $0";
  opacity: 0%;
  position: absolute;
  white-space: pre;
}

.elements-disclosure .elements-tree-outline:not(.hide-selection-when-blurred) li.selected .selected-hint::before {
  position: static;
  opacity: 60%;
}

.elements-disclosure li.parent:not(.always-parent)::before {
  box-sizing: border-box;
  user-select: none;
  mask-image: var(--image-file-triangle-right);
  height: 14px;
  width: 14px;
  content: "\\A0\\A0";
  color: transparent;
  text-shadow: none;
  margin-left: -3px;
  background-color: var(--icon-default);
  transition: transform 200ms;
}

.elements-disclosure li.parent.expanded::before {
  transform: rotate(90deg);
  margin-top: -2px;
}

.elements-disclosure li .selection {
  display: none;
  z-index: -1;
}

.elements-disclosure li.selected .selection {
  display: block;
}

.elements-disclosure li.elements-drag-over .selection {
  display: block;
  margin-top: -2px;
  border-top: 2px solid var(--sys-color-primary);
}

.elements-disclosure .elements-tree-outline:not(.hide-selection-when-blurred) .selection {
  background-color: var(--sys-color-neutral-container);
}

.elements-disclosure li.hovered:not(.selected) .selection {
  display: block;
  left: 3px;
  right: 3px;
  background-color: var(--sys-color-state-hover-on-subtle);
  border-radius: 5px;
}

.elements-disclosure li .webkit-html-tag.close {
  margin-left: -12px;
}

.elements-disclosure .elements-tree-outline.hide-selection-when-blurred .selected:focus-visible .highlight > * {
  background: var(--sys-color-state-focus-highlight);
  border-radius: 2px;
  outline: 2px solid var(--sys-color-state-focus-ring);
}

.elements-disclosure .elements-tree-outline:not(.hide-selection-when-blurred) li.selected:focus .selection {
  background-color: var(--sys-color-tonal-container);
}

.elements-disclosure ol {
  list-style-type: none;
  /** Keep it in sync with ElementsTreeElements.updateDecorations **/
  padding-inline-start: 12px;
  margin: 0;
}

.elements-disclosure ol.children {
  display: none;
  min-width: 100%;
}

.elements-disclosure ol.children.expanded {
  display: inline-block;
}

.elements-disclosure > ol {
  position: relative;
  margin: 0;
  min-width: 100%;
  min-height: 100%;
  padding-left: 2px;
}

.elements-disclosure li.in-clipboard .highlight {
  outline: 1px dotted var(--sys-color-divider);
}

.elements-tree-outline ol.shadow-root-deep {
  background-color: transparent;
}

.elements-tree-editor {
  box-shadow: var(--drop-shadow);
  margin-right: 4px;
}

button,
input,
select {
  font-family: inherit;
  font-size: inherit;
}

.elements-gutter-decoration {
  position: absolute;
  top: 3px;
  left: 2px;
  height: 9px;
  width: 9px;
  border-radius: 5px;
  border: 1px solid var(--sys-color-orange-bright);
  background-color: var(--sys-color-orange-bright);
}

.elements-gutter-decoration.elements-has-decorated-children {
  opacity: 50%;
}

.add-attribute {
  margin-left: 1px;
  margin-right: 1px;
  white-space: nowrap;
}

.elements-tree-nowrap,
.elements-tree-nowrap .li {
  white-space: pre !important; /* stylelint-disable-line declaration-no-important */
}

.elements-disclosure .elements-tree-nowrap li {
  word-wrap: normal;
}
/* DOM update highlight */
@keyframes dom-update-highlight-animation {
  from {
    background-color: var(--sys-color-token-tag);
    color: var(--sys-color-cdt-base-container);
  }

  80% {
    background-color: var(--sys-color-token-meta);
  }

  to {
    background-color: inherit;
  }
}

@keyframes dom-update-highlight-animation-dark {
  from {
    background-color: var(--sys-color-token-tag);
    color: var(--sys-color-cdt-base-container);
  }

  80% {
    background-color: var(--sys-color-cdt-base-container);
    color: inherit;
  }

  to {
    background-color: inherit;
  }
}

.dom-update-highlight {
  animation: dom-update-highlight-animation 1.4s 1 cubic-bezier(0, 0, 0.2, 1);
  border-radius: 2px;
}

:host-context(.theme-with-dark-background) .dom-update-highlight {
  animation: dom-update-highlight-animation-dark 1.4s 1 cubic-bezier(0, 0, 0.2, 1);
}

.elements-disclosure.single-node li {
  padding-left: 2px;
}

.elements-tree-shortcut-title,
.elements-tree-shortcut-link {
  color: var(--sys-color-token-subtle);
}

.elements-disclosure .gutter-container {
  position: absolute;
  top: 0;
  left: 0;
  width: 15px;
  height: 15px;
  z-index: 1;
}

.elements-hide-gutter .gutter-container {
  display: none;
}

.gutter-container > devtools-icon {
  display: block;
  visibility: hidden;
  position: relative;
  left: -1px;
}

.elements-disclosure li.selected .gutter-container:not(.has-decorations) > devtools-icon {
  visibility: visible;
}
/** Guide line */

li.hovered:not(.always-parent) + ol.children,
.elements-tree-outline ol.shadow-root,
li.selected:not(.always-parent) + ol.children {
  background: linear-gradient(to right, var(--override-indentation-level-border-color), var(--override-indentation-level-border-color) 0.5px, transparent 0);
  background-position-x: 5px;
  background-size: 0.5px 100%;
  background-repeat: no-repeat;
}

li.selected:not(.always-parent) + ol.children {
  --override-indentation-level-border-color: var(--sys-color-divider) !important; /* stylelint-disable-line declaration-no-important */
}

li.hovered:not(.always-parent) + ol.children:not(.shadow-root) {
  --override-indentation-level-border-color: color-mix(in sRGB, var(--ref-palette-neutral0) 10%, transparent);
}

.elements-tree-outline ol.shadow-root {
  --override-indentation-level-border-color: var(--ref-palette-orange95);
}

@media (forced-colors: active) {
  .elements-disclosure li.parent::before {
    forced-color-adjust: none;
    background-color: ButtonText !important; /* stylelint-disable-line declaration-no-important */
  }

  .elements-disclosure .elements-tree-outline:not(.hide-selection-when-blurred) li.selected .selected-hint::before {
    opacity: unset;
  }

  .elements-disclosure .elements-tree-outline:not(.hide-selection-when-blurred) .selection,
  .elements-disclosure li.hovered:not(.selected) .selection,
  .elements-disclosure .elements-tree-outline:not(.hide-selection-when-blurred) li.selected:focus .selection {
    forced-color-adjust: none;
    background: canvas !important; /* stylelint-disable-line declaration-no-important */
    border: 1px solid Highlight !important; /* stylelint-disable-line declaration-no-important */
  }

  .gutter-container > devtools-icon {
    forced-color-adjust: none;
  }
}

.violating-element {
  background-image: var(--image-file-errorWave);
  background-repeat: repeat-x;
  background-position: bottom;
  padding-bottom: 1px;
}

/*# sourceURL=elementsTreeOutline.css */
`);const ti={reveal:"reveal"},zd=G("panels/elements/TopLayerContainer.ts",ti),ns=q.bind(void 0,zd);class ur extends Oe{tree;document;currentTopLayerDOMNodes=new Set;topLayerUpdateThrottler;constructor(e,t){super("#top-layer"),this.tree=e,this.document=t,this.topLayerUpdateThrottler=new xe(1)}async throttledUpdateTopLayerElements(){await this.topLayerUpdateThrottler.schedule(()=>this.updateTopLayerElements())}async updateTopLayerElements(){this.removeChildren(),this.removeCurrentTopLayerElementsAdorners(),this.currentTopLayerDOMNodes=new Set;const e=this.document.domModel(),t=await e.getTopLayerElements();if(!t||t.length===0)return;let n=0;for(let i=0;i<t.length;i++){const s=e.idToDOMNode.get(t[i]);if(!(!s||s.ownerDocument!==this.document)&&s.nodeName()!=="::backdrop"){const o=new Di(e.target(),s.backendNodeId(),0,s.nodeName()),r=new St(o);this.appendChild(r),this.currentTopLayerDOMNodes.add(s);const a=i>0?e.idToDOMNode.get(t[i-1]):void 0;if(a&&a.nodeName()==="::backdrop"){const c=new Di(e.target(),a.backendNodeId(),0,a.nodeName()),h=new St(c);r.appendChild(h)}const d=this.tree.treeElementByNode.get(s);d&&this.addTopLayerAdorner(d,r,++n)}}}removeCurrentTopLayerElementsAdorners(){for(const e of this.currentTopLayerDOMNodes)this.tree.treeElementByNode.get(e)?.removeAllAdorners()}addTopLayerAdorner(e,t,n){const i=Ee(pe.TOP_LAYER),s=document.createElement("span");s.classList.add("adorner-with-icon");const o=new Le;o.name="select-element";const r=document.createElement("span");r.textContent=`top-layer (${n})`,s.append(o),s.append(r);const a=e?.adorn(i,s);if(a){const d=()=>{t.revealAndSelect()};a.addInteraction(d,{isToggle:!1,shouldPropagateOnKeydown:!1,ariaLabelDefault:ns(ti.reveal),ariaLabelActive:ns(ti.reveal)}),a.addEventListener("mousedown",c=>c.consume(),!1)}}}const Gc=Object.freeze(Object.defineProperty({__proto__:null,TopLayerContainer:ur},Symbol.toStringTag,{value:"Module"})),Ue={pageDom:"Page DOM",storeAsGlobalVariable:"Store as global variable",showAllNodesDMore:"Show all nodes ({PH1} more)",reveal:"reveal",adornerSettings:"Badge settings…"},Gd=G("panels/elements/ElementsTreeOutline.ts",Ue),Xe=q.bind(void 0,Gd),wn=new WeakMap,is=new Set;class V extends Cs(Ma){treeElementByNode;shadowRoot;elementInternal;includeRootDOMNode;selectEnabled;rootDOMNodeInternal;selectedDOMNodeInternal;visible;imagePreviewPopover;updateRecords;treeElementsBeingUpdated;decoratorExtensions;showHTMLCommentsSetting;multilineEditing;visibleWidthInternal;clipboardNodeData;isXMLMimeTypeInternal;suppressRevealAndSelect=!1;previousHoveredElement;treeElementBeingDragged;dragOverTreeElement;updateModifiedNodesTimeout;#e=[];#t=new Map;#n;#s;#i=new Map;constructor(e,t,n){if(super(),ve.isEnabled("highlight-errors-elements-panel")){this.#n=Pa.instance(),this.#n.addEventListener("IssueAdded",this.#r,this);for(const o of this.#n.issues())o instanceof Fi&&this.#a(o)}this.treeElementByNode=new WeakMap;const i=document.createElement("div");this.shadowRoot=di(i,{cssFile:[hr,Ia],delegatesFocus:void 0});const s=this.shadowRoot.createChild("div","elements-disclosure");this.elementInternal=this.element,this.elementInternal.classList.add("elements-tree-outline","source-code"),n&&this.elementInternal.classList.add("elements-hide-gutter"),ue(this.elementInternal,Xe(Ue.pageDom)),this.elementInternal.addEventListener("focusout",this.onfocusout.bind(this),!1),this.elementInternal.addEventListener("mousedown",this.onmousedown.bind(this),!1),this.elementInternal.addEventListener("mousemove",this.onmousemove.bind(this),!1),this.elementInternal.addEventListener("mouseleave",this.onmouseleave.bind(this),!1),this.elementInternal.addEventListener("dragstart",this.ondragstart.bind(this),!1),this.elementInternal.addEventListener("dragover",this.ondragover.bind(this),!1),this.elementInternal.addEventListener("dragleave",this.ondragleave.bind(this),!1),this.elementInternal.addEventListener("drop",this.ondrop.bind(this),!1),this.elementInternal.addEventListener("dragend",this.ondragend.bind(this),!1),this.elementInternal.addEventListener("contextmenu",this.contextMenuEventFired.bind(this),!1),this.elementInternal.addEventListener("clipboard-beforecopy",this.onBeforeCopy.bind(this),!1),this.elementInternal.addEventListener("clipboard-copy",this.onCopyOrCut.bind(this,!1),!1),this.elementInternal.addEventListener("clipboard-cut",this.onCopyOrCut.bind(this,!0),!1),this.elementInternal.addEventListener("clipboard-paste",this.onPaste.bind(this),!1),this.elementInternal.addEventListener("keydown",this.onKeyDown.bind(this),!1),s.appendChild(this.elementInternal),this.element=i,this.contentElement.setAttribute("jslog",`${hs("elements")}`),this.includeRootDOMNode=!e,this.selectEnabled=t,this.rootDOMNodeInternal=null,this.selectedDOMNodeInternal=null,this.visible=!1,this.imagePreviewPopover=new st(this.contentElement,o=>{let r=o.target;for(;r&&!st.getImageURL(r);)r=r.parentElementOrShadowHost();return r},o=>{const r=La(o,"li");if(!r)return null;const a=Oe.getTreeElementBylistItemNode(r);return a?a.node():null}),this.updateRecords=new Map,this.treeElementsBeingUpdated=new Set,this.decoratorExtensions=null,this.showHTMLCommentsSetting=O.instance().moduleSetting("show-html-comments"),this.showHTMLCommentsSetting.addChangeListener(this.onShowHTMLCommentsChange.bind(this)),this.setUseLightSelectionColor(!0),ve.isEnabled("highlight-errors-elements-panel")&&(this.#s=new Kt(this.elementInternal,o=>{const r=o.composedPath()[0];if(!r||!r.matches(".violating-element"))return null;const a=this.#i.get(r);if(!a)return null;const d=a.details(),c=this.#o(d.errorType),h=new Le;h.data=Aa(a.getKind()),h.style.cursor="pointer";const p=document.createElement("a");p.href="#",p.textContent="View issue:";const g=document.createElement("span");g.textContent=c;const f=document.createElement("div");return f.appendChild(h),f.appendChild(p),f.appendChild(g),f.style.display="flex",f.style.alignItems="center",f.style.gap="5px",{box:r.boxInWindow(),show:async u=>{u.setIgnoreLeftMargin(!0);const m=()=>ee(a);return p.addEventListener("click",()=>m()),h.addEventListener("click",()=>m()),u.contentElement.appendChild(f),!0}}},"elements.issue"),this.#s.setTimeout(300),this.#s.setHasPadding(!0))}#o(e){switch(e){case"FormLabelForNameError":return"Incorrect use of <label for=FORM_ELEMENT>";case"FormDuplicateIdForInputError":return"Duplicate form field id in the same form";case"FormInputWithNoLabelError":return"Form field without valid aria-labelledby attribute or associated label";case"FormAutocompleteAttributeEmptyError":return"Incorrect use of autocomplete attribute";case"FormEmptyIdAndNameAttributesForInputError":return"A form field element should have an id or name attribute";case"FormAriaLabelledByToNonExistingId":return"An aria-labelledby attribute doesn't match any element id";case"FormInputAssignedAutocompleteValueToIdOrNameAttributeError":return"An element doesn't have an autocomplete attribute";case"FormLabelHasNeitherForNorNestedInput":return"No label associated with a form field";case"FormLabelForMatchesNonExistingIdError":return"Incorrect use of <label for=FORM_ELEMENT>";case"FormInputHasWrongButWellIntendedAutocompleteValueError":return"Non-standard autocomplete attribute value";default:return""}}static forDOMModel(e){return wn.get(e)||null}async#r(e){e.data.issue instanceof Fi&&(this.#a(e.data.issue),await this.#d(e.data.issue))}#a(e){this.#e.push(e)}#l(){for(const e of this.#e)this.#d(e)}async#d(e){const t=e.details();if(!this.#o(t.errorType)||!this.rootDOMNode||!t.violatingNodeId)return;const s=await new tn(this.rootDOMNode.domModel().target(),t.violatingNodeId).resolvePromise();if(!s)return;const o=this.findTreeElement(s);if(o){o.addIssue(e);const r=o.issuesByNodeElement;for(const[a,d]of r)this.#i.set(a,d)}}onShowHTMLCommentsChange(){const e=this.selectedDOMNode();e&&e.nodeType()===Node.COMMENT_NODE&&!this.showHTMLCommentsSetting.get()&&this.selectDOMNode(e.parentNode),this.update()}setWordWrap(e){this.elementInternal.classList.toggle("elements-tree-nowrap",!e)}setMultilineEditing(e){this.multilineEditing=e}visibleWidth(){return this.visibleWidthInternal||0}setVisibleWidth(e){this.visibleWidthInternal=e,this.multilineEditing&&this.multilineEditing.resize()}setClipboardData(e){if(this.clipboardNodeData){const t=this.findTreeElement(this.clipboardNodeData.node);t&&t.setInClipboard(!1),delete this.clipboardNodeData}if(e){const t=this.findTreeElement(e.node);t&&t.setInClipboard(!0),this.clipboardNodeData=e}}resetClipboardIfNeeded(e){this.clipboardNodeData&&this.clipboardNodeData.node===e&&this.setClipboardData(null)}onBeforeCopy(e){e.handled=!0}onCopyOrCut(e,t){this.setClipboardData(null);const n=t.original;if(!n||!n.target||n.target instanceof Node&&n.target.hasSelection()||dt())return;const i=this.selectedDOMNode();i&&n.clipboardData&&(n.clipboardData.clearData(),t.handled=!0,this.performCopyOrCut(e,i))}performCopyOrCut(e,t){t&&(e&&(t.isShadowRoot()||t.ancestorUserAgentShadowRoot())||(t.copyNode(),this.setClipboardData({node:t,isCut:e})))}canPaste(e){if(e.isShadowRoot()||e.ancestorUserAgentShadowRoot()||!this.clipboardNodeData)return!1;const t=this.clipboardNodeData.node;return!(this.clipboardNodeData.isCut&&(t===e||t.isAncestor(e))||e.domModel()!==t.domModel())}pasteNode(e){this.canPaste(e)&&this.performPaste(e)}duplicateNode(e){this.performDuplicate(e)}onPaste(e){if(dt())return;const t=this.selectedDOMNode();!t||!this.canPaste(t)||(e.handled=!0,this.performPaste(t))}performPaste(e){if(!this.clipboardNodeData)return;this.clipboardNodeData.isCut?(this.clipboardNodeData.node.moveTo(e,null,t.bind(this)),this.setClipboardData(null)):this.clipboardNodeData.node.copyTo(e,null,t.bind(this));function t(n,i){n||!i||this.selectDOMNode(i)}}performDuplicate(e){if(e.isInShadowTree())return;const t=e.parentNode?e.parentNode:e;t.nodeName()!=="#document"&&e.copyTo(t,e.nextSibling)}setVisible(e){if(e!==this.visible){if(this.visible=e,!this.visible){this.imagePreviewPopover.hide(),this.multilineEditing&&this.multilineEditing.cancel();return}this.runPendingUpdates(),this.selectedDOMNodeInternal&&this.revealAndSelectNode(this.selectedDOMNodeInternal,!1)}}get rootDOMNode(){return this.rootDOMNodeInternal}set rootDOMNode(e){this.rootDOMNodeInternal!==e&&(this.rootDOMNodeInternal=e,this.isXMLMimeTypeInternal=e&&e.isXMLNode(),this.update())}get isXMLMimeType(){return!!this.isXMLMimeTypeInternal}selectedDOMNode(){return this.selectedDOMNodeInternal}selectDOMNode(e,t){if(this.selectedDOMNodeInternal===e){this.revealAndSelectNode(e,!t);return}this.selectedDOMNodeInternal=e,this.revealAndSelectNode(e,!t),this.selectedDOMNodeInternal===e&&this.selectedNodeChanged(!!t)}editing(){const e=this.selectedDOMNode();if(!e)return!1;const t=this.findTreeElement(e);return t&&t.isEditing()||!1}update(){const e=this.selectedDOMNode();if(this.removeChildren(),!!this.rootDOMNode){if(this.includeRootDOMNode){const t=this.createElementTreeElement(this.rootDOMNode);this.appendChild(t)}else{const t=this.visibleChildren(this.rootDOMNode);for(const n of t){const i=this.createElementTreeElement(n);this.appendChild(i)}}this.rootDOMNode instanceof ft&&this.createTopLayerContainer(this.rootElement(),this.rootDOMNode),e&&this.revealAndSelectNode(e,!0)}}selectedNodeChanged(e){this.dispatchEventToListeners(V.Events.SelectedNodeChanged,{node:this.selectedDOMNodeInternal,focus:e})}fireElementsTreeUpdated(e){this.dispatchEventToListeners(V.Events.ElementsTreeUpdated,e)}findTreeElement(e){let t=this.lookUpTreeElement(e);return!t&&e.nodeType()===Node.TEXT_NODE&&(t=this.lookUpTreeElement(e.parentNode)),t}lookUpTreeElement(e){if(!e)return null;const t=this.treeElementByNode.get(e);if(t)return t;const n=[];let i;for(i=e.parentNode;i&&(n.push(i),!this.treeElementByNode.has(i));i=i.parentNode);if(!i)return null;for(let s=n.length-1;s>=0;--s){const o=n[s-1]||e,r=this.treeElementByNode.get(n[s]);r&&(r.onpopulate(),o.index&&o.index>=r.expandedChildrenLimit()&&this.setExpandedChildrenLimit(r,o.index+1))}return this.treeElementByNode.get(e)||null}createTreeElementFor(e){let t=this.findTreeElement(e);return t||(e.parentNode?(t=this.createTreeElementFor(e.parentNode),t?this.showChild(t,e):null):null)}revealAndSelectNode(e,t){if(this.suppressRevealAndSelect||(!this.includeRootDOMNode&&e===this.rootDOMNode&&this.rootDOMNode&&(e=this.rootDOMNode.firstChild),!e))return;const n=this.createTreeElementFor(e);n&&n.revealAndSelect(t)}treeElementFromEventInternal(e){if(!this.element.parentElement)return null;const n=e.pageX,i=e.pageY,s=this.treeElementFromPoint(n,i),o=this.treeElementFromPoint(n,i-2);let r;return s===o?r=s:r=this.treeElementFromPoint(n,i+2),r}onfocusout(e){se.hideDOMNodeHighlight()}onmousedown(e){const t=this.treeElementFromEventInternal(e);t&&t.select()}setHoverEffect(e){this.previousHoveredElement!==e&&(this.previousHoveredElement instanceof K&&(this.previousHoveredElement.hovered=!1,delete this.previousHoveredElement),e instanceof K&&(e.hovered=!0,this.previousHoveredElement=e))}onmousemove(e){const t=this.treeElementFromEventInternal(e);t&&this.previousHoveredElement===t||(this.setHoverEffect(t),this.highlightTreeElement(t,!je.eventHasEitherCtrlOrMeta(e)))}highlightTreeElement(e,t){if(e instanceof K){e.node().domModel().overlayModel().highlightInOverlay({node:e.node(),selectorList:void 0},"all",t);return}e instanceof St&&e.domModel().overlayModel().highlightInOverlay({deferredNode:e.deferredNode(),selectorList:void 0},"all",t)}onmouseleave(e){this.setHoverEffect(null),se.hideDOMNodeHighlight()}ondragstart(e){const t=e.target;if(!t||t.hasSelection()||t.nodeName==="A")return!1;const n=this.validDragSourceOrTarget(this.treeElementFromEventInternal(e));if(!n||n.node().nodeName()==="BODY"||n.node().nodeName()==="HEAD")return!1;if(!(!e.dataTransfer||!n.listItemElement.textContent))return e.dataTransfer.setData("text/plain",n.listItemElement.textContent.replace(/\u200b/g,"")),e.dataTransfer.effectAllowed="copyMove",this.treeElementBeingDragged=n,se.hideDOMNodeHighlight(),!0}ondragover(e){if(!this.treeElementBeingDragged)return!1;const t=this.validDragSourceOrTarget(this.treeElementFromEventInternal(e));if(!t)return!1;let n=t.node();for(;n;){if(n===this.treeElementBeingDragged.nodeInternal)return!1;n=n.parentNode}return t.listItemElement.classList.add("elements-drag-over"),this.dragOverTreeElement=t,e.preventDefault(),e.dataTransfer&&(e.dataTransfer.dropEffect="move"),!1}ondragleave(e){return this.clearDragOverTreeElementMarker(),e.preventDefault(),!1}validDragSourceOrTarget(e){if(!e||!(e instanceof K))return null;const t=e,n=t.node();return!n.parentNode||n.parentNode.nodeType()!==Node.ELEMENT_NODE?null:t}ondrop(e){e.preventDefault();const t=this.treeElementFromEventInternal(e);t instanceof K&&this.doMove(t)}doMove(e){if(!this.treeElementBeingDragged)return;let t,n;if(e.isClosingTag())t=e.node(),n=null;else{const s=e.node();t=s.parentNode,n=s}if(!t)return;const i=this.treeElementBeingDragged.expanded;this.treeElementBeingDragged.nodeInternal.moveTo(t,n,this.selectNodeAfterEdit.bind(this,i)),delete this.treeElementBeingDragged}ondragend(e){e.preventDefault(),this.clearDragOverTreeElementMarker(),delete this.treeElementBeingDragged}clearDragOverTreeElementMarker(){this.dragOverTreeElement&&(this.dragOverTreeElement.listItemElement.classList.remove("elements-drag-over"),delete this.dragOverTreeElement)}contextMenuEventFired(e){const t=this.treeElementFromEventInternal(e);t instanceof K&&this.showContextMenu(t,e)}showContextMenu(e,t){if(dt())return;const n=new ze(t),i=!!e.node().pseudoType(),s=e.node().nodeType()===Node.ELEMENT_NODE&&!i,o=t.target;if(!o)return;let r=o.enclosingNodeOrSelfWithClass("webkit-html-text-node");r&&r.classList.contains("bogus")&&(r=null);const a=o.enclosingNodeOrSelfWithClass("webkit-html-comment");n.saveSection().appendItem(Xe(Ue.storeAsGlobalVariable),this.saveNodeToTempVariable.bind(this,e.node()),{jslogContext:"store-as-global-variable"}),r?e.populateTextContextMenu(n,r):s?e.populateTagContextMenu(n,t):a?e.populateNodeContextMenu(n):i&&e.populatePseudoElementContextMenu(n),n.viewSection().appendItem(Xe(Ue.adornerSettings),()=>{k.instance().showAdornerSettingsPane()},{jslogContext:"show-adorner-settings"}),n.appendApplicableItems(e.node()),n.show()}async saveNodeToTempVariable(e){const t=await e.resolveToObject();await t?.runtimeModel().target()?.model(ka)?.saveToTempVariable(T.instance().flavor(Ts),t)}runPendingUpdates(){this.updateModifiedNodes()}onKeyDown(e){const t=e;if(dt())return;const n=this.selectedDOMNode();if(!n)return;const i=this.treeElementByNode.get(n);if(i&&je.eventHasCtrlEquivalentKey(t)&&n.parentNode){if(t.key==="ArrowUp"&&n.previousSibling){n.moveTo(n.parentNode,n.previousSibling,this.selectNodeAfterEdit.bind(this,i.expanded)),t.consume(!0);return}if(t.key==="ArrowDown"&&n.nextSibling){n.moveTo(n.parentNode,n.nextSibling.nextSibling,this.selectNodeAfterEdit.bind(this,i.expanded)),t.consume(!0);return}}}toggleEditAsHTML(e,t,n){const i=this.treeElementByNode.get(e);if(!i||!i.hasEditableNode()||e.pseudoType())return;const s=e.parentNode,o=e.index,r=i.expanded;i.toggleEditAsHTML(a.bind(this),t);function a(d){if(n&&n(),!d||(this.runPendingUpdates(),!o))return;const c=s&&s.children(),h=c&&c[o]||s;if(h&&(this.selectDOMNode(h,!0),r)){const p=this.findTreeElement(h);p&&p.expand()}}}selectNodeAfterEdit(e,t,n){if(t||(this.runPendingUpdates(),!n))return null;this.selectDOMNode(n,!0);const i=this.findTreeElement(n);return e&&i&&i.expand(),i}async toggleHideElement(e){const t=e.pseudoType(),n=t?e.parentNode:e;if(!n)return;const i=e.marker("hidden-marker"),s=await n.resolveToObject("");if(!s)return;await s.callFunction(o,[{value:t},{value:!i}]),s.release(),e.setMarker("hidden-marker",i?null:!0);function o(r,a){const d="__web-inspector-hide",c="-shortcut__",h="__web-inspector-hide-shortcut-style__",p=[];p.push(".__web-inspector-hide-shortcut__"),p.push(".__web-inspector-hide-shortcut__ *"),p.push(".__web-inspector-hidebefore-shortcut__::before"),p.push(".__web-inspector-hideafter-shortcut__::after");const u=`
`+p.join(", ")+`
{
`+"    visibility: hidden !important;"+`
}
`,m=d+(r||"")+c;this.classList.toggle(m,a);let y=this;for(;y.parentNode;)y=y.parentNode;y.nodeType===Node.DOCUMENT_NODE&&(y=document.head);let b=y.querySelector("style#"+h);b||(b=document.createElement("style"),b.id=h,b.textContent=u,y.appendChild(b))}}isToggledToHidden(e){return!!e.marker("hidden-marker")}reset(){this.rootDOMNode=null,this.selectDOMNode(null,!1),this.imagePreviewPopover.hide(),delete this.clipboardNodeData,se.hideDOMNodeHighlight(),this.updateRecords.clear()}wireToDOMModel(e){wn.set(e,this),e.addEventListener(P.MarkersChanged,this.markersChanged,this),e.addEventListener(P.NodeInserted,this.nodeInserted,this),e.addEventListener(P.NodeRemoved,this.nodeRemoved,this),e.addEventListener(P.AttrModified,this.attributeModified,this),e.addEventListener(P.AttrRemoved,this.attributeRemoved,this),e.addEventListener(P.CharacterDataModified,this.characterDataModified,this),e.addEventListener(P.DocumentUpdated,this.documentUpdated,this),e.addEventListener(P.ChildNodeCountUpdated,this.childNodeCountUpdated,this),e.addEventListener(P.DistributedNodesChanged,this.distributedNodesChanged,this),e.addEventListener(P.TopLayerElementsChanged,this.topLayerElementsChanged,this),e.addEventListener(P.ScrollableFlagUpdated,this.scrollableFlagUpdated,this)}unwireFromDOMModel(e){e.removeEventListener(P.MarkersChanged,this.markersChanged,this),e.removeEventListener(P.NodeInserted,this.nodeInserted,this),e.removeEventListener(P.NodeRemoved,this.nodeRemoved,this),e.removeEventListener(P.AttrModified,this.attributeModified,this),e.removeEventListener(P.AttrRemoved,this.attributeRemoved,this),e.removeEventListener(P.CharacterDataModified,this.characterDataModified,this),e.removeEventListener(P.DocumentUpdated,this.documentUpdated,this),e.removeEventListener(P.ChildNodeCountUpdated,this.childNodeCountUpdated,this),e.removeEventListener(P.DistributedNodesChanged,this.distributedNodesChanged,this),e.removeEventListener(P.TopLayerElementsChanged,this.topLayerElementsChanged,this),e.removeEventListener(P.ScrollableFlagUpdated,this.scrollableFlagUpdated,this),wn.delete(e)}addUpdateRecord(e){let t=this.updateRecords.get(e);return t||(t=new mr,this.updateRecords.set(e,t)),t}updateRecordForHighlight(e){return this.visible&&this.updateRecords.get(e)||null}documentUpdated(e){const t=e.data;this.reset(),t.existingDocument()&&(this.rootDOMNode=t.existingDocument(),ve.isEnabled("highlight-errors-elements-panel")&&this.#l())}attributeModified(e){const{node:t}=e.data;this.addUpdateRecord(t).attributeModified(e.data.name),this.updateModifiedNodesSoon()}attributeRemoved(e){const{node:t}=e.data;this.addUpdateRecord(t).attributeRemoved(e.data.name),this.updateModifiedNodesSoon()}characterDataModified(e){const t=e.data;this.addUpdateRecord(t).charDataModified(),t.parentNode&&t.parentNode.firstChild===t.parentNode.lastChild&&this.addUpdateRecord(t.parentNode).childrenModified(),this.updateModifiedNodesSoon()}nodeInserted(e){const t=e.data;this.addUpdateRecord(t.parentNode).nodeInserted(t),this.updateModifiedNodesSoon()}nodeRemoved(e){const{node:t,parent:n}=e.data;this.resetClipboardIfNeeded(t),this.addUpdateRecord(n).nodeRemoved(t),this.updateModifiedNodesSoon()}childNodeCountUpdated(e){const t=e.data;this.addUpdateRecord(t).childrenModified(),this.updateModifiedNodesSoon()}distributedNodesChanged(e){const t=e.data;this.addUpdateRecord(t).childrenModified(),this.updateModifiedNodesSoon()}updateModifiedNodesSoon(){this.updateRecords.size&&(this.updateModifiedNodesTimeout||(this.updateModifiedNodesTimeout=window.setTimeout(this.updateModifiedNodes.bind(this),50)))}updateModifiedNodes(){this.updateModifiedNodesTimeout&&(clearTimeout(this.updateModifiedNodesTimeout),delete this.updateModifiedNodesTimeout);const e=[...this.updateRecords.keys()],t=e.length>10;let n,i;t&&(n=this.element.parentNode,i=n?n.scrollTop:0,this.elementInternal.classList.add("hidden"));const s=this.rootDOMNodeInternal&&this.updateRecords.get(this.rootDOMNodeInternal);if(s&&s.hasChangedChildren())this.update();else for(const[o,r]of this.updateRecords)r.hasChangedChildren()?this.updateModifiedParentNode(o):this.updateModifiedNode(o);t&&(this.elementInternal.classList.remove("hidden"),n&&i&&(n.scrollTop=i)),this.updateRecords.clear(),this.fireElementsTreeUpdated(e)}updateModifiedNode(e){const t=this.findTreeElement(e);t&&t.updateTitle(this.updateRecordForHighlight(e))}updateModifiedParentNode(e){const t=this.findTreeElement(e);t&&(t.setExpandable(this.hasVisibleChildren(e)),t.updateTitle(this.updateRecordForHighlight(e)),is.has(t)&&this.updateChildren(t))}populateTreeElement(e){return e.childCount()||!e.isExpandable()?Promise.resolve():new Promise(t=>{e.node().getChildNodes(()=>{is.add(e),this.updateModifiedParentNode(e.node()),t()})})}async createTopLayerContainer(e,t){if(!e.treeOutline||!(e.treeOutline instanceof V))return;const n=new ur(e.treeOutline,t);await n.throttledUpdateTopLayerElements(),n.currentTopLayerDOMNodes.size>0&&e.appendChild(n),this.#t.set(e,n)}createElementTreeElement(e,t){const n=new K(e,t);return n.setExpandable(!t&&this.hasVisibleChildren(e)),e.nodeType()===Node.ELEMENT_NODE&&e.parentNode&&e.parentNode.nodeType()===Node.DOCUMENT_NODE&&!e.parentNode.parentNode&&n.setCollapsible(!1),e.hasAssignedSlot()&&n.createSlotLink(e.assignedSlot),n.selectable=!!this.selectEnabled,n}showChild(e,t){if(e.isClosingTag())return null;const n=this.visibleChildren(e.node()).indexOf(t);return n===-1?null:(n>=e.expandedChildrenLimit()&&this.setExpandedChildrenLimit(e,n+1),e.childAt(n))}visibleChildren(e){let t=K.visibleShadowRoots(e);const n=e.contentDocument();n&&t.push(n);const i=e.templateContent();i&&t.push(i),t.push(...e.viewTransitionPseudoElements());const s=e.markerPseudoElement();s&&t.push(s);const o=e.beforePseudoElement();if(o&&t.push(o),e.childNodeCount()){let d=e.children()||[];this.showHTMLCommentsSetting.get()||(d=d.filter(c=>c.nodeType()!==Node.COMMENT_NODE)),t=t.concat(d)}const r=e.afterPseudoElement();r&&t.push(r);const a=e.backdropPseudoElement();return a&&t.push(a),t}hasVisibleChildren(e){return e.isIframe()||e.contentDocument()||e.templateContent()||K.visibleShadowRoots(e).length||e.hasPseudoElements()||e.isInsertionPoint()?!0:!!e.childNodeCount()&&!K.canShowInlineText(e)}createExpandAllButtonTreeElement(e){const t=bs("",i.bind(this));t.value="";const n=new Oe(t);return n.selectable=!1,n.button=t,n;function i(s){const o=this.visibleChildren(e.node()).length;this.setExpandedChildrenLimit(e,Math.max(o,e.expandedChildrenLimit()+Pi)),s.consume()}}setExpandedChildrenLimit(e,t){e.expandedChildrenLimit()!==t&&(e.setExpandedChildrenLimit(t),e.treeOutline&&!this.treeElementsBeingUpdated.has(e)&&this.updateModifiedParentNode(e.node()))}updateChildren(e){if(!e.isExpandable()){if(!e.treeOutline)return;const t=e.treeOutline.selectedTreeElement;t&&t.hasAncestor(e)&&e.select(!0),e.removeChildren();return}console.assert(!e.isClosingTag()),this.innerUpdateChildren(e)}insertChildElement(e,t,n,i){const s=this.createElementTreeElement(t,i);return e.insertChild(s,n),t instanceof ft&&this.createTopLayerContainer(s,t),s}moveChild(e,t,n){if(e.indexOfChild(t)===n)return;const i=t.selected;t.parent&&t.parent.removeChild(t),e.insertChild(t,n),i&&t.select()}innerUpdateChildren(e){if(this.treeElementsBeingUpdated.has(e))return;this.treeElementsBeingUpdated.add(e);const t=e.node(),n=this.visibleChildren(t),i=new Set(n),s=new Map;for(let r=e.childCount()-1;r>=0;--r){const a=e.childAt(r);if(!(a instanceof K)){e.removeChildAtIndex(r);continue}const c=a.node();if(i.has(c)){s.set(c,a);continue}e.removeChildAtIndex(r)}for(let r=0;r<n.length&&r<e.expandedChildrenLimit();++r){const a=n[r],d=s.get(a)||this.findTreeElement(a);if(d&&d!==e)this.moveChild(e,d,r);else{const c=this.insertChildElement(e,a,r);this.updateRecordForHighlight(t)&&e.expanded&&K.animateOnDOMUpdate(c),e.childCount()>e.expandedChildrenLimit()&&this.setExpandedChildrenLimit(e,e.expandedChildrenLimit()+1)}}const o=e.childCount();if(n.length>o){const r=o;e.expandAllButtonElement||(e.expandAllButtonElement=this.createExpandAllButtonTreeElement(e)),e.insertChild(e.expandAllButtonElement,r),e.expandAllButtonElement.title=Xe(Ue.showAllNodesDMore,{PH1:n.length-o})}else e.expandAllButtonElement&&(e.expandAllButtonElement=null);if(t.isInsertionPoint())for(const r of t.distributedNodes())e.appendChild(new St(r));t.nodeType()===Node.ELEMENT_NODE&&!t.pseudoType()&&e.isExpandable()&&this.insertChildElement(e,t,e.childCount(),!0),this.treeElementsBeingUpdated.delete(e)}markersChanged(e){const t=e.data,n=this.treeElementByNode.get(t);n&&n.updateDecorations()}async topLayerElementsChanged(){for(const[e,t]of this.#t)await t.throttledUpdateTopLayerElements(),t.currentTopLayerDOMNodes.size>0&&t.parent!==e&&e.appendChild(t),t.hidden=t.currentTopLayerDOMNodes.size===0}scrollableFlagUpdated(e){let{node:t}=e.data;if(t.nodeName()==="#document"){if(!t.ownerDocument?.documentElement)return;t=t.ownerDocument.documentElement}const n=this.treeElementByNode.get(t);n&&me(n.tagTypeContext)&&n.tagTypeContext.adornersThrottler.schedule(async()=>n.updateScrollAdorner())}static treeOutlineSymbol=Symbol("treeOutline")}(function(l){(function(e){e.SelectedNodeChanged="SelectedNodeChanged",e.ElementsTreeUpdated="ElementsTreeUpdated"})(l.Events||(l.Events={}))})(V||(V={}));const pr=new Map([[" ","nbsp"],["­","shy"],[" ","ensp"],[" ","emsp"],[" ","thinsp"],[" ","hairsp"],["​","ZeroWidthSpace"],["‌","zwnj"],["‍","zwj"],["‎","lrm"],["‏","rlm"],["‪","#x202A"],["‫","#x202B"],["‬","#x202C"],["‭","#x202D"],["‮","#x202E"],["⁠","NoBreak"],["\uFEFF","#xFEFF"]]);class mr{modifiedAttributes;removedAttributes;hasChangedChildrenInternal;hasRemovedChildrenInternal;charDataModifiedInternal;attributeModified(e){this.removedAttributes&&this.removedAttributes.has(e)&&this.removedAttributes.delete(e),this.modifiedAttributes||(this.modifiedAttributes=new Set),this.modifiedAttributes.add(e)}attributeRemoved(e){this.modifiedAttributes&&this.modifiedAttributes.has(e)&&this.modifiedAttributes.delete(e),this.removedAttributes||(this.removedAttributes=new Set),this.removedAttributes.add(e)}nodeInserted(e){this.hasChangedChildrenInternal=!0}nodeRemoved(e){this.hasChangedChildrenInternal=!0,this.hasRemovedChildrenInternal=!0}charDataModified(){this.charDataModifiedInternal=!0}childrenModified(){this.hasChangedChildrenInternal=!0}isAttributeModified(e){return this.modifiedAttributes!==null&&this.modifiedAttributes!==void 0&&this.modifiedAttributes.has(e)}hasRemovedAttributes(){return this.removedAttributes!==null&&this.removedAttributes!==void 0&&!!this.removedAttributes.size}isCharDataModified(){return!!this.charDataModifiedInternal}hasChangedChildren(){return!!this.hasChangedChildrenInternal}hasRemovedChildren(){return!!this.hasRemovedChildrenInternal}}let vn;class Ti{static instance(e={forceNew:null}){const{forceNew:t}=e;return(!vn||t)&&(vn=new Ti),vn}async render(e){let t=null;if(e instanceof A?t=e:e instanceof tn&&(t=await e.resolvePromise()),!t)return null;const n=new V(!1,!0,!0);n.rootDOMNode=t;const i=n.firstChild();return i&&!i.isExpandable()&&n.element.classList.add("single-node"),n.setVisible(!0),n.element.treeElementForTest=i,n.setShowSelectionOnKeyboardFocus(!0,!0),{node:n.element,tree:n}}}class St extends Oe{nodeShortcut;hoveredInternal;constructor(e){super(""),this.listItemElement.createChild("div","selection fill");const t=this.listItemElement.createChild("span","elements-tree-shortcut-title");let n=e.nodeName.toLowerCase();e.nodeType===Node.ELEMENT_NODE&&(n="<"+n+">"),t.textContent="↪ "+n,this.nodeShortcut=e,this.addRevealAdorner()}addRevealAdorner(){const e=new Ft;e.classList.add("adorner-reveal");const n=Ee(pe.REVEAL).name,i=document.createElement("span"),s=new Le;s.name="select-element";const o=document.createElement("span");o.textContent=n,i.append(s),i.append(o),i.classList.add("adorner-with-icon"),e.data={name:n,content:i,jslogContext:"reveal"},this.listItemElement.appendChild(e);const r=()=>{this.nodeShortcut.deferredNode.resolve(a=>{ee(a)})};e.addInteraction(r,{isToggle:!1,shouldPropagateOnKeydown:!1,ariaLabelDefault:Xe(Ue.reveal),ariaLabelActive:Xe(Ue.reveal)}),e.addEventListener("mousedown",a=>a.consume(),!1),k.instance().registerAdorner(e)}get hovered(){return!!this.hoveredInternal}set hovered(e){this.hoveredInternal!==e&&(this.hoveredInternal=e,this.listItemElement.classList.toggle("hovered",e))}deferredNode(){return this.nodeShortcut.deferredNode}domModel(){return this.nodeShortcut.deferredNode.domModel()}setLeftIndentOverlay(){let e=24;if(this.parent&&this.parent instanceof K){const t=parseFloat(this.parent.listItemElement.style.getPropertyValue("--indent"))||0;e+=t}this.listItemElement.style.setProperty("--indent",e+"px")}onattach(){this.setLeftIndentOverlay()}onselect(e){if(!e)return!0;this.nodeShortcut.deferredNode.highlight(),this.nodeShortcut.deferredNode.resolve(t.bind(this));function t(n){n&&this.treeOutline instanceof V&&(this.treeOutline.selectedDOMNodeInternal=n,this.treeOutline.selectedNodeChanged(!1))}return!0}}const Kc=Object.freeze(Object.defineProperty({__proto__:null,get ElementsTreeOutline(){return V},MappedCharToEntity:pr,Renderer:Ti,ShortcutTreeElement:St,UpdateRecord:mr},Symbol.toStringTag,{value:"Module"})),Ni={domBreakpoint:"DOM Breakpoint",elementIsHidden:"Element is hidden"},Kd=G("panels/elements/MarkerDecorator.ts",Ni),fr=Oa.bind(void 0,Kd);class ni{title;color;constructor(e){if(!e.title||!e.color)throw new Error(`Generic decorator requires a color and a title: ${e.marker}`);this.title=e.title(),this.color=e.color}decorate(e){return{title:this.title,color:this.color}}}const ss={marker:"breakpoint-marker",title:fr(Ni.domBreakpoint),color:"var(--sys-color-primary-bright)"},os={marker:"hidden-marker",title:fr(Ni.elementIsHidden),color:"var(--sys-color-neutral-bright)"};function gr(){return[{...ss,decorator:()=>new ni(ss)},{...os,decorator:()=>new ni(os)},{decorator:dn.instance,marker:"pseudo-state-marker",title:void 0,color:void 0}]}const Yc=Object.freeze(Object.defineProperty({__proto__:null,GenericDecorator:ni,getRegisteredDecorators:gr},Symbol.toStringTag,{value:"Module"})),v={thisFrameWasIdentifiedAsAnAd:"This frame was identified as an ad frame",forceState:"Force state",useSInTheConsoleToReferToThis:"Use {PH1} in the console to refer to this element.",addAttribute:"Add attribute",editAttribute:"Edit attribute",focus:"Focus",scrollIntoView:"Scroll into view",editText:"Edit text",editAsHtml:"Edit as HTML",cut:"Cut",copy:"Copy",paste:"Paste",copyOuterhtml:"Copy outerHTML",copySelector:"Copy `selector`",copyJsPath:"Copy JS path",copyStyles:"Copy styles",copyXpath:"Copy XPath",copyFullXpath:"Copy full XPath",copyElement:"Copy element",duplicateElement:"Duplicate element",hideElement:"Hide element",deleteElement:"Delete element",expandRecursively:"Expand recursively",collapseChildren:"Collapse children",captureNodeScreenshot:"Capture node screenshot",showFrameDetails:"Show `iframe` details",valueIsTooLargeToEdit:"<value is too large to edit>",children:"Children:",enableGridMode:"Enable grid mode",disableGridMode:"Disable grid mode",enableFlexMode:"Enable flex mode",disableFlexMode:"Disable flex mode",enableScrollSnap:"Enable scroll-snap overlay",disableScrollSnap:"Disable scroll-snap overlay",openMediaPanel:"Jump to Media panel",showPopoverTarget:"Show popover target",elementHasScrollableOverflow:"This element has a scrollable overflow"},Yd=G("panels/elements/ElementsTreeElement.ts",v),x=q.bind(void 0,Yd);function me(l){return l.tagType==="OPENING_TAG"}class K extends Oe{nodeInternal;treeOutline;gutterContainer;decorationsElement;searchQuery;expandedChildrenLimitInternal;decorationsThrottler;inClipboard;hoveredInternal;editing;htmlEditElement;expandAllButtonElement;selectionElement;hintElement;aiButtonContainer;contentElement;#e=new Map;#t=new Map;#n=[];tagTypeContext;constructor(e,t){super(),this.nodeInternal=e,this.treeOutline=null,this.listItemElement.setAttribute("jslog",`${Ra().parent("elementsTreeOutline").track({keydown:"ArrowUp|ArrowDown|ArrowLeft|ArrowRight|Backspace|Delete|Enter|Space|Home|End",drag:!0,click:!0})}`),this.contentElement=this.listItemElement.createChild("div"),this.gutterContainer=this.contentElement.createChild("div","gutter-container"),this.gutterContainer.addEventListener("click",this.showContextMenu.bind(this));const n=new Le;if(n.data={color:"var(--icon-default)",iconName:"dots-horizontal",height:"16px",width:"16px"},this.gutterContainer.append(n),this.decorationsElement=this.gutterContainer.createChild("div","hidden"),this.searchQuery=null,this.expandedChildrenLimitInternal=Pi,this.decorationsThrottler=new xe(100),this.inClipboard=!1,this.hoveredInternal=!1,this.editing=null,t)this.tagTypeContext={tagType:"CLOSING_TAG"};else{if(this.tagTypeContext={tagType:"OPENING_TAG",adornerContainer:this.contentElement.createChild("div","adorner-container hidden"),adorners:[],styleAdorners:[],adornersThrottler:new xe(100),canAddAttributes:this.nodeInternal.nodeType()===Node.ELEMENT_NODE},this.updateStyleAdorners(),e.isAdFrameNode()){const i=Ee(pe.AD),s=this.adorn(i);de.install(s,x(v.thisFrameWasIdentifiedAsAnAd))}this.updateScrollAdorner()}this.expandAllButtonElement=null}static animateOnDOMUpdate(e){const t=e.listItemElement.querySelector(".webkit-html-tag-name");Ye(t||e.listItemElement,"dom-update-highlight")}static visibleShadowRoots(e){let t=e.shadowRoots();t.length&&!O.instance().moduleSetting("show-ua-shadow-dom").get()&&(t=t.filter(n));function n(i){return i.shadowRootType()!==A.ShadowRootTypes.UserAgent}return t}static canShowInlineText(e){return e.contentDocument()||e.templateContent()||K.visibleShadowRoots(e).length||e.hasPseudoElements()||e.nodeType()!==Node.ELEMENT_NODE||!e.firstChild||e.firstChild!==e.lastChild||e.firstChild.nodeType()!==Node.TEXT_NODE?!1:e.firstChild.nodeValue().length<80}static populateForcedPseudoStateItems(e,t){const n=["active","hover","focus","visited","focus-within","focus-visible"],i=t.domModel().cssModel().pseudoState(t),s=e.debugSection().appendSubMenuItem(x(v.forceState),!1,"force-state");for(const r of n){const a=i?i.indexOf(r)>=0:!1;s.defaultSection().appendCheckboxItem(":"+r,o.bind(null,r,!a),{checked:a,jslogContext:r})}function o(r,a){t.domModel().cssModel().forcePseudoState(t,r,a)}}isClosingTag(){return!me(this.tagTypeContext)}node(){return this.nodeInternal}isEditing(){return!!this.editing}highlightSearchResults(e){this.searchQuery=e,this.editing||this.highlightSearchResultsInternal()}hideSearchHighlights(){Jt.instance().removeHighlights(this.#n),this.#n=[]}setInClipboard(e){this.inClipboard!==e&&(this.inClipboard=e,this.listItemElement.classList.toggle("in-clipboard",e))}get hovered(){return this.hoveredInternal}set hovered(e){this.hoveredInternal!==e&&(e&&!this.aiButtonContainer?this.createAiButton():!e&&this.aiButtonContainer&&(this.aiButtonContainer.remove(),delete this.aiButtonContainer),this.hoveredInternal=e,this.listItemElement&&(e?(this.createSelection(),this.listItemElement.classList.add("hovered")):this.listItemElement.classList.remove("hovered")))}addIssue(e){this.#e.has(e.primaryKey())||(this.#e.set(e.primaryKey(),e),this.#s(e))}#s(e){const t=e.details();t.violatingNodeAttribute?this.#i(t.violatingNodeAttribute,e):this.#o(e)}get issuesByNodeElement(){return this.#t}#i(e,t){const i=this.listItemElement.getElementsByClassName("webkit-html-tag")[0].getElementsByClassName("webkit-html-attribute");for(const s of i)if(s.getElementsByClassName("webkit-html-attribute-name")[0].textContent===e){const o=s.getElementsByClassName("webkit-html-attribute-name")[0];o.classList.add("violating-element"),this.#t.set(o,t)}}#o(e){const t=this.listItemElement.getElementsByClassName("webkit-html-tag-name")[0];t.classList.add("violating-element"),this.#t.set(t,e)}expandedChildrenLimit(){return this.expandedChildrenLimitInternal}setExpandedChildrenLimit(e){this.expandedChildrenLimitInternal=e}createSlotLink(e){if(me(this.tagTypeContext)&&e){const t=Ee(pe.SLOT);this.tagTypeContext.slot=this.adornSlot(t,this.tagTypeContext);const n=e.deferredNode;this.tagTypeContext.slot.addEventListener("click",()=>{n.resolve(i=>{ee(i)})}),this.tagTypeContext.slot.addEventListener("mousedown",i=>i.consume(),!1)}}createSelection(){const e=this.contentElement;e&&(this.selectionElement||(this.selectionElement=document.createElement("div"),this.selectionElement.className="selection fill",this.selectionElement.style.setProperty("margin-left",-this.computeLeftIndent()+"px"),e.prepend(this.selectionElement)))}createHint(){this.contentElement&&!this.hintElement&&(this.hintElement=this.contentElement.createChild("span","selected-hint"),de.install(this.hintElement,x(v.useSInTheConsoleToReferToThis,{PH1:"$0"})),Es(this.hintElement))}createAiButton(){if(!(this.node().nodeType()===Node.ELEMENT_NODE)||!Pt.instance().hasAction("freestyler.elements-floating-button"))return;const t=Pt.instance().getAction("freestyler.elements-floating-button");if(this.contentElement&&!this.aiButtonContainer){this.aiButtonContainer=this.contentElement.createChild("span","ai-button-container");const n=new Vl({iconName:"smart-assistant"});n.addEventListener("click",i=>{i.stopPropagation(),this.select(!0,!1),t.execute()},{capture:!0}),n.addEventListener("mousedown",i=>{i.stopPropagation()},{capture:!0}),this.aiButtonContainer.appendChild(n)}}onbind(){this.treeOutline&&!this.isClosingTag()&&this.treeOutline.treeElementByNode.set(this.nodeInternal,this)}onunbind(){this.editing&&this.editing.cancel(),this.treeOutline&&this.treeOutline.treeElementByNode.get(this.nodeInternal)===this&&this.treeOutline.treeElementByNode.delete(this.nodeInternal)}onattach(){this.hoveredInternal&&(this.createSelection(),this.listItemElement.classList.add("hovered")),this.updateTitle(),this.listItemElement.draggable=!0}async onpopulate(){if(this.treeOutline)return this.treeOutline.populateTreeElement(this)}async expandRecursively(){await this.nodeInternal.getSubtree(-1,!0),await super.expandRecursively(Number.MAX_VALUE)}onexpand(){this.isClosingTag()||this.updateTitle()}oncollapse(){this.isClosingTag()||this.updateTitle()}select(e,t){return this.editing?!1:super.select(e,t)}onselect(e){return this.treeOutline?(this.treeOutline.suppressRevealAndSelect=!0,this.treeOutline.selectDOMNode(this.nodeInternal,e),e&&(this.nodeInternal.highlight(),L.actionTaken(We.ChangeInspectedNodeInElementsPanel)),this.createSelection(),this.createHint(),this.treeOutline.suppressRevealAndSelect=!1,!0):!1}ondelete(){if(!this.treeOutline)return!1;const e=this.treeOutline.findTreeElement(this.nodeInternal);return e?e.remove():this.remove(),!0}onenter(){return this.editing?!1:(this.startEditing(),!0)}selectOnMouseDown(e){super.selectOnMouseDown(e),!this.editing&&e.detail>=2&&e.preventDefault()}ondblclick(e){return this.editing||this.isClosingTag()||this.startEditingTarget(e.target)||this.isExpandable()&&!this.expanded&&this.expand(),!1}hasEditableNode(){return!this.nodeInternal.isShadowRoot()&&!this.nodeInternal.ancestorUserAgentShadowRoot()}insertInLastAttributePosition(e,t){if(e.getElementsByClassName("webkit-html-attribute").length>0)e.insertBefore(t,e.lastChild);else if(e.textContent!==null){const n=e.textContent.match(/^<(.*?)>$/);if(!n)return;const i=n[1];e.textContent="",w(e,"<"+i),e.appendChild(t),w(e,">")}}startEditingTarget(e){if(!this.treeOutline||this.treeOutline.selectedDOMNode()!==this.nodeInternal||this.nodeInternal.nodeType()!==Node.ELEMENT_NODE&&this.nodeInternal.nodeType()!==Node.TEXT_NODE)return!1;const t=e.enclosingNodeOrSelfWithClass("webkit-html-text-node");if(t)return this.startEditingTextNode(t);const n=e.enclosingNodeOrSelfWithClass("webkit-html-attribute");if(n)return this.startEditingAttribute(n,e);const i=e.enclosingNodeOrSelfWithClass("webkit-html-tag-name");return i?this.startEditingTagName(i):e.enclosingNodeOrSelfWithClass("add-attribute")?this.addNewAttribute():!1}showContextMenu(e){this.treeOutline&&this.treeOutline.showContextMenu(this,e)}populateTagContextMenu(e,t){const n=this.isClosingTag()&&this.treeOutline?this.treeOutline.findTreeElement(this.nodeInternal):this;if(!n)return;e.editSection().appendItem(x(v.addAttribute),n.addNewAttribute.bind(n),{jslogContext:"add-attribute"});const i=t.target,s=i.enclosingNodeOrSelfWithClass("webkit-html-attribute"),o=i.enclosingNodeOrSelfWithClass("add-attribute");s&&!o&&e.editSection().appendItem(x(v.editAttribute),this.startEditingAttribute.bind(this,s,i),{jslogContext:"edit-attribute"}),this.populateNodeContextMenu(e),K.populateForcedPseudoStateItems(e,n.node()),this.populateScrollIntoView(e),e.viewSection().appendItem(x(v.focus),async()=>{await this.nodeInternal.focus()},{jslogContext:"focus"})}populatePseudoElementContextMenu(e){this.childCount()!==0&&this.populateExpandRecursively(e),this.populateScrollIntoView(e)}populateExpandRecursively(e){e.viewSection().appendItem(x(v.expandRecursively),this.expandRecursively.bind(this),{jslogContext:"expand-recursively"})}populateScrollIntoView(e){e.viewSection().appendItem(x(v.scrollIntoView),()=>this.nodeInternal.scrollIntoView(),{jslogContext:"scroll-into-view"})}populateTextContextMenu(e,t){this.editing||e.editSection().appendItem(x(v.editText),this.startEditingTextNode.bind(this,t),{jslogContext:"edit-text"}),this.populateNodeContextMenu(e)}populateNodeContextMenu(e){const t=this.hasEditableNode();t&&!this.editing&&e.editSection().appendItem(x(v.editAsHtml),this.editAsHTML.bind(this),{jslogContext:"elements.edit-as-html"});const n=this.nodeInternal.isShadowRoot(),i=je.shortcutToString.bind(null),s=Ka.CtrlOrMeta,o=this.treeOutline;if(!o)return;let r;Pt.instance().hasAction("freestyler.element-panel-context")&&e.headerSection().appendAction("freestyler.element-panel-context"),r=e.clipboardSection().appendItem(x(v.cut),o.performCopyOrCut.bind(o,!0,this.nodeInternal),{disabled:!this.hasEditableNode(),jslogContext:"cut"}),r.setShortcut(i("X",s));const a=e.clipboardSection().appendSubMenuItem(x(v.copy),!1,"copy"),d=a.section();if(n||(r=d.appendItem(x(v.copyOuterhtml),o.performCopyOrCut.bind(o,!1,this.nodeInternal),{jslogContext:"copy-outer-html"}),r.setShortcut(i("V",s))),this.nodeInternal.nodeType()===Node.ELEMENT_NODE&&(d.appendItem(x(v.copySelector),this.copyCSSPath.bind(this),{jslogContext:"copy-selector"}),d.appendItem(x(v.copyJsPath),this.copyJSPath.bind(this),{disabled:!dr(this.nodeInternal),jslogContext:"copy-js-path"}),d.appendItem(x(v.copyStyles),this.copyStyles.bind(this),{jslogContext:"elements.copy-styles"})),n||(d.appendItem(x(v.copyXpath),this.copyXPath.bind(this),{jslogContext:"copy-xpath"}),d.appendItem(x(v.copyFullXpath),this.copyFullXPath.bind(this),{jslogContext:"copy-full-xpath"})),!n){r=a.clipboardSection().appendItem(x(v.copyElement),o.performCopyOrCut.bind(o,!1,this.nodeInternal),{jslogContext:"copy-element"}),r.setShortcut(i("C",s));const h=!this.nodeInternal.parentNode||this.nodeInternal.parentNode.nodeName()==="#document";r=e.editSection().appendItem(x(v.duplicateElement),o.duplicateNode.bind(o,this.nodeInternal),{disabled:this.nodeInternal.isInShadowTree()||h,jslogContext:"elements.duplicate-element"})}r=e.clipboardSection().appendItem(x(v.paste),o.pasteNode.bind(o,this.nodeInternal),{disabled:!o.canPaste(this.nodeInternal),jslogContext:"paste"}),r.setShortcut(i("V",s)),r=e.debugSection().appendCheckboxItem(x(v.hideElement),o.toggleHideElement.bind(o,this.nodeInternal),{checked:o.isToggledToHidden(this.nodeInternal),jslogContext:"elements.hide-element"}),r.setShortcut(Da.instance().shortcutTitleForAction("elements.hide-element")||""),t&&e.editSection().appendItem(x(v.deleteElement),this.remove.bind(this),{jslogContext:"delete-element"}),this.populateExpandRecursively(e),e.viewSection().appendItem(x(v.collapseChildren),this.collapseChildren.bind(this),{jslogContext:"collapse-children"});const c=new Xl;e.viewSection().appendItem(x(v.captureNodeScreenshot),c.handleAction.bind(null,T.instance(),"emulation.capture-node-screenshot"),{jslogContext:"emulation.capture-node-screenshot"}),this.nodeInternal.frameOwnerFrameId()&&e.viewSection().appendItem(x(v.showFrameDetails),()=>{const h=this.nodeInternal.frameOwnerFrameId();if(h){const p=et.instance().getFrame(h);ee(p)}},{jslogContext:"show-frame-details"})}startEditing(){if(!this.treeOutline||this.treeOutline.selectedDOMNode()!==this.nodeInternal)return;const e=this.listItemElement;if(me(this.tagTypeContext)&&this.tagTypeContext.canAddAttributes){const t=e.getElementsByClassName("webkit-html-attribute")[0];return t?this.startEditingAttribute(t,t.getElementsByClassName("webkit-html-attribute-value")[0]):this.addNewAttribute()}if(this.nodeInternal.nodeType()===Node.TEXT_NODE){const t=e.getElementsByClassName("webkit-html-text-node")[0];if(t)return this.startEditingTextNode(t)}}addNewAttribute(){const e=document.createElement("span"),t=this.buildAttributeDOM(e," ","",null);t.style.marginLeft="2px",t.style.marginRight="2px",t.setAttribute("jslog",`${ye("new-attribute").track({change:!0,resize:!0})}`);const n=this.listItemElement.getElementsByClassName("webkit-html-tag")[0];return this.insertInLastAttributePosition(n,t),t.scrollIntoViewIfNeeded(!0),this.startEditingAttribute(t,t)}triggerEditAttribute(e){const t=this.listItemElement.getElementsByClassName("webkit-html-attribute-name");for(let n=0,i=t.length;n<i;++n)if(t[n].textContent===e){for(let s=t[n].nextSibling;s;s=s.nextSibling)if(s.nodeType===Node.ELEMENT_NODE&&s.classList.contains("webkit-html-attribute-value"))return this.startEditingAttribute(s.parentElement,s)}}startEditingAttribute(e,t){if(console.assert(this.listItemElement.isAncestor(e)),Ae(e))return!0;const n=e.getElementsByClassName("webkit-html-attribute-name")[0];if(!n)return!1;const i=n.textContent,s=e.getElementsByClassName("webkit-html-attribute-value")[0];t=s.isAncestor(t)?s:t;function o(h){if(h.nodeType===Node.TEXT_NODE){h.nodeValue=h.nodeValue?h.nodeValue.replace(/\u200B/g,""):"";return}if(h.nodeType===Node.ELEMENT_NODE)for(let p=h.firstChild;p;p=p.nextSibling)o(p)}const r=i&&s?this.nodeInternal.getAttribute(i)?.replaceAll('"',"&quot;"):void 0;r!==void 0&&s.setTextContentTruncatedIfNeeded(r,x(v.valueIsTooLargeToEdit)),o(e);const a=new Je(this.attributeEditingCommitted.bind(this),this.editingCancelled.bind(this),i||void 0);function d(h){return ui(h,e),""}xs.fromString(s.textContent||"")||a.setPostKeydownFinishHandler(d),this.updateEditorHandles(e,a);const c=this.listItemElement.getComponentSelection();return c&&c.selectAllChildren(t),!0}startEditingTextNode(e){if(Ae(e))return!0;let t=this.nodeInternal;t.nodeType()===Node.ELEMENT_NODE&&t.firstChild&&(t=t.firstChild);const n=e.enclosingNodeOrSelfWithClass("webkit-html-text-node");n&&(n.textContent=t.nodeValue());const i=new Je(this.textNodeEditingCommitted.bind(this,t),this.editingCancelled.bind(this));this.updateEditorHandles(e,i);const s=this.listItemElement.getComponentSelection();return s&&s.selectAllChildren(e),!0}startEditingTagName(e){if(!e&&(e=this.listItemElement.getElementsByClassName("webkit-html-tag-name")[0],!e))return!1;const t=e.textContent;if(t!==null&&br.has(t.toLowerCase()))return!1;if(Ae(e))return!0;const n=this.distinctClosingTagElement();function i(){n&&e&&(n.textContent="</"+e.textContent+">")}const s=c=>{c.key===" "&&(this.editing&&this.editing.commit(),c.consume(!0))};function o(c,h,p,g,f){e&&(e.removeEventListener("keyup",i,!1),e.removeEventListener("keydown",s,!1),this.tagNameEditingCommitted(c,h,p,g,f))}function r(c,h){e&&(e.removeEventListener("keyup",i,!1),e.removeEventListener("keydown",s,!1),this.editingCancelled(c,h))}e.addEventListener("keyup",i,!1),e.addEventListener("keydown",s,!1);const a=new Je(o.bind(this),r.bind(this),t);this.updateEditorHandles(e,a);const d=this.listItemElement.getComponentSelection();return d&&d.selectAllChildren(e),!0}updateEditorHandles(e,t){const n=Gt.startEditing(e,t);n?this.editing={commit:n.commit,cancel:n.cancel,editor:void 0,resize:()=>{}}:this.editing=null}async startEditingAsHTML(e,t,n){if(n===null||this.editing)return;const i=this.convertWhitespaceToEntities(n).text;this.htmlEditElement=document.createElement("div"),this.htmlEditElement.className="source-code elements-tree-editor";let s=this.listItemElement.firstChild;for(;s;)s.style.display="none",s=s.nextSibling;this.childrenListElement&&(this.childrenListElement.style.display="none"),this.listItemElement.append(this.htmlEditElement),this.htmlEditElement.addEventListener("keydown",c=>{c.key==="Escape"&&c.consume(!0)});const o=new Fa(Ba.create({doc:i,extensions:[Va.of([{key:"Mod-Enter",run:()=>(this.editing?.commit(),!0)},{key:"Escape",run:()=>(this.editing?.cancel(),!0)}]),_a(i),Ha.instance(),Ua.instance(),ja.html({autoCloseTags:!1,selfClosingTags:!0}),$a.instance(),Bi.theme({"&.cm-editor":{maxHeight:"300px"},".cm-scroller":{overflowY:"auto"}}),Bi.domEventHandlers({focusout:c=>{const h=c.relatedTarget;h&&!h.isSelfOrDescendant(o)&&this.editing&&this.editing.commit()}})]}));this.editing={commit:a.bind(this),cancel:d.bind(this),editor:o,resize:r.bind(this)},r.call(this),this.htmlEditElement.appendChild(o),o.editor.focus(),this.treeOutline&&this.treeOutline.setMultilineEditing(this.editing);function r(){this.treeOutline&&this.htmlEditElement&&(this.htmlEditElement.style.width=this.treeOutline.visibleWidth()-this.computeLeftIndent()-30+"px")}function a(){this.editing&&this.editing.editor&&e(i,this.editing.editor.state.doc.toString()),d.call(this)}function d(){if(!this.editing||!this.editing.editor)return;this.editing=null,this.htmlEditElement&&this.listItemElement.removeChild(this.htmlEditElement),this.htmlEditElement=void 0,this.childrenListElement&&this.childrenListElement.style.removeProperty("display");let c=this.listItemElement.firstChild;for(;c;)c.style.removeProperty("display"),c=c.nextSibling;this.treeOutline&&(this.treeOutline.setMultilineEditing(null),this.treeOutline.focus()),t()}}attributeEditingCommitted(e,t,n,i,s){this.editing=null;const o=this.treeOutline;function r(a){if(a&&this.editingCancelled(e,i),!s)return;o&&(o.runPendingUpdates(),o.focus());const d=this.nodeInternal.attributes();for(let c=0;c<d.length;++c)if(d[c].name===i){s==="backward"?c===0?this.startEditingTagName():this.triggerEditAttribute(d[c-1].name):c===d.length-1?this.addNewAttribute():this.triggerEditAttribute(d[c+1].name);return}s==="backward"?t===" "?d.length>0&&this.triggerEditAttribute(d[d.length-1].name):d.length>1&&this.triggerEditAttribute(d[d.length-2].name):s==="forward"&&(Wt(t)?this.startEditingTagName():this.addNewAttribute())}if((i.trim()||t.trim())&&n!==t){this.nodeInternal.setAttribute(i,t,r.bind(this));return}this.updateTitle(),r.call(this)}tagNameEditingCommitted(e,t,n,i,s){this.editing=null;const o=this;function r(){const h=o.distinctClosingTagElement();h&&(h.textContent="</"+i+">"),o.editingCancelled(e,i),a.call(o)}function a(){if(s!=="forward"){this.addNewAttribute();return}const h=this.nodeInternal.attributes();h.length>0?this.triggerEditAttribute(h[0].name):this.addNewAttribute()}if(t=t.trim(),t===n){r();return}const d=this.treeOutline,c=this.expanded;this.nodeInternal.setNodeName(t,(h,p)=>{if(h||!p){r();return}if(!d)return;const g=d.selectNodeAfterEdit(c,h,p);a.call(g)})}textNodeEditingCommitted(e,t,n){this.editing=null;function i(){this.updateTitle()}e.setNodeValue(n,i.bind(this))}editingCancelled(e,t){this.editing=null,this.updateTitle()}distinctClosingTagElement(){if(this.expanded){const t=this.childrenListElement.querySelectorAll(".close");return t[t.length-1]}const e=this.listItemElement.getElementsByClassName("webkit-html-tag");return e.length===1?null:e[e.length-1]}updateTitle(e){if(this.editing)return;const t=this.nodeTitleInfo(e||null);if(this.nodeInternal.nodeType()===Node.DOCUMENT_FRAGMENT_NODE&&this.nodeInternal.isInShadowTree()&&this.nodeInternal.shadowRootType()){this.childrenListElement.classList.add("shadow-root");let i=4;for(let s=this.nodeInternal;i&&s;s=s.parentNode)s.nodeType()===Node.DOCUMENT_FRAGMENT_NODE&&i--;i?this.childrenListElement.classList.add("shadow-root-depth-"+i):this.childrenListElement.classList.add("shadow-root-deep")}this.contentElement.removeChildren(),this.contentElement.createChild("span","highlight").append(t),this.title=this.contentElement,this.updateDecorations(),this.contentElement.prepend(this.gutterContainer),me(this.tagTypeContext)&&(this.contentElement.append(this.tagTypeContext.adornerContainer),this.tagTypeContext.slot&&this.contentElement.append(this.tagTypeContext.slot)),delete this.selectionElement,delete this.hintElement,delete this.aiButtonContainer,this.selected&&(this.createSelection(),this.createHint());for(const i of this.#e.values())this.#s(i);this.highlightSearchResultsInternal()}computeLeftIndent(){let e=this.parent,t=0;for(;e!==null;)t++,e=e.parent;return 12*(t-2)+(this.isExpandable()&&this.isCollapsible()?1:12)}updateDecorations(){const e=this.computeLeftIndent();this.gutterContainer.style.left=-e+"px",this.listItemElement.style.setProperty("--indent",e+"px"),!this.isClosingTag()&&this.nodeInternal.nodeType()===Node.ELEMENT_NODE&&this.decorationsThrottler.schedule(this.updateDecorationsInternal.bind(this))}updateDecorationsInternal(){if(!this.treeOutline)return Promise.resolve();const e=this.nodeInternal;this.treeOutline.decoratorExtensions||(this.treeOutline.decoratorExtensions=gr());const t=new Map;for(const d of this.treeOutline.decoratorExtensions)t.set(d.marker,d);const n=[],i=[],s=[];e.traverseMarkers(o);function o(d,c){const h=t.get(c);h&&n.push(Promise.resolve(h.decorator()).then(r.bind(null,d)))}function r(d,c){const h=c.decorate(d);h&&(d===e?i:s).push(h)}return Promise.all(n).then(a.bind(this));function a(){if(this.decorationsElement.removeChildren(),this.decorationsElement.classList.add("hidden"),this.gutterContainer.classList.toggle("has-decorations",!!(i.length||s.length)),ue(this.decorationsElement,""),!i.length&&!s.length)return;const d=new Set,c=document.createElement("div");for(const f of i){const u=c.createChild("div");u.textContent=f.title,d.add(f.color)}if(this.expanded&&!i.length)return;const h=new Set;if(s.length){let f=c.createChild("div");f.textContent=x(v.children);for(const u of s)f=c.createChild("div"),f.style.marginLeft="15px",f.textContent=u.title,h.add(u.color)}let p=0;g.call(this,d,"elements-gutter-decoration"),this.expanded||g.call(this,h,"elements-gutter-decoration elements-has-decorated-children"),de.install(this.decorationsElement,c.textContent),ue(this.decorationsElement,c.textContent||"");function g(f,u){for(const m of f){const y=this.decorationsElement.createChild("div",u);this.decorationsElement.classList.remove("hidden"),y.style.backgroundColor=m,y.style.borderColor=m,p&&(y.style.marginLeft=p+"px"),p+=3}}}}buildAttributeDOM(e,t,n,i,s,o){const r=/[\/;:\)\]\}]/g;let a=0,d=0,c=0;function h(C,S){const I=this.convertWhitespaceToEntities(S);for(d=I.entityRanges.length,S=I.text.replace(r,(F,re)=>{for(;a<d&&I.entityRanges[a].offset<re;)I.entityRanges[a].offset+=c,++a;return c+=1,F+"​"});a<d;)I.entityRanges[a].offset+=c,++a;C.setTextContentTruncatedIfNeeded(S),un(C,I.entityRanges,"webkit-html-entity-value")}const p=s||n.length>0,g=e.createChild("span","webkit-html-attribute");g.setAttribute("jslog",`${ye(t==="style"?"style-attribute":"attribute").track({change:!0,dblclick:!0})}`);const f=g.createChild("span","webkit-html-attribute-name");f.textContent=t,p&&w(g,'=​"');const u=g.createChild("span","webkit-html-attribute-value");i&&i.isAttributeModified(t)&&Ye(p?u:f,"dom-update-highlight");function m(C){const S=o?o.resolveURL(C):null;if(S===null){const F=document.createElement("span");return h.call(this,F,C),F}C=C.replace(r,"$&​"),C.startsWith("data:")&&(C=Ya(C,60));const I=o&&o.nodeName().toLowerCase()==="a"?qa.create(S,C,"",!0,"image-url"):tt.linkifyURL(S,{text:C,preventClick:!0,showColumnNumber:!1,inlineFrameIndex:0});return st.setImageUrl(I,S)}const y=o?o.nodeName().toLowerCase():"";if(y&&(t==="src"||t==="href")&&n?u.appendChild(m.call(this,n)):(y==="img"||y==="source")&&t==="srcset"?u.appendChild(b.call(this,n)):y==="image"&&(t==="xlink:href"||t==="href")?u.appendChild(b.call(this,n)):h.call(this,u,n),t==="popovertarget"){const C=n?u:f;this.linkifyElementByRelation(C,"PopoverTarget",x(v.showPopoverTarget))}p&&w(g,'"');function b(C){const S=document.createDocumentFragment();let I=0;for(;C.length;){I++>0&&w(S," "),C=C.trim();let F="",re="";const Te=C.search(/\s/);if(Te===-1)F=C;else if(Te>0&&C[Te-1]===",")F=C.substring(0,Te);else{F=C.substring(0,Te);const Ii=C.indexOf(",",Te);Ii!==-1?re=C.substring(Te,Ii+1):re=C.substring(Te)}F&&(F.endsWith(",")?(S.appendChild(m.call(this,F.substring(0,F.length-1))),w(S,",")):S.appendChild(m.call(this,F))),re&&w(S,re),C=C.substring(F.length+re.length)}return S}return g}async linkifyElementByRelation(e,t,n){const i=await this.nodeInternal.domModel().getElementByRelation(this.nodeInternal.id,t),s=this.nodeInternal.domModel().nodeForId(i);if(!s)return;const o=await Rn.linkify(s,{preventKeyboardFocus:!0,tooltip:n,textContent:e.textContent||void 0,isDynamicLink:!0});e.removeChildren(),e.append(o)}buildPseudoElementDOM(e,t){const n=e.createChild("span","webkit-html-pseudo-element");n.textContent="::"+t,w(e,"​")}buildTagDOM(e,t,n,i,s){const o=this.nodeInternal,r=["webkit-html-tag"];n&&i&&r.push("close");const a=e.createChild("span",r.join(" "));w(a,"<");const d=a.createChild("span",n?"webkit-html-close-tag-name":"webkit-html-tag-name");if(n||d.setAttribute("jslog",`${ye("tag-name").track({change:!0,dblclick:!0})}`),d.textContent=(n?"/":"")+t,!n){if(o.hasAttributes()){const c=o.attributes();for(let h=0;h<c.length;++h){const p=c[h];w(a," "),this.buildAttributeDOM(a,p.name,p.value,s,!1,o)}}if(s){let c=s.hasRemovedAttributes()||s.hasRemovedChildren();c=c||!this.expanded&&s.hasChangedChildren(),c&&Ye(d,"dom-update-highlight")}}w(a,">"),w(e,"​"),a.textContent&&ue(a,a.textContent)}convertWhitespaceToEntities(e){let t="",n=0;const i=[],s=pr;for(let o=0,r=e.length;o<r;++o){const a=e.charAt(o);if(s.has(a)){t+=e.substring(n,o);const d="&"+s.get(a)+";";i.push(new hn(t.length,d.length)),t+=d,n=o+1}}return t&&(t+=e.substring(n)),{text:t||e,entityRanges:i}}nodeTitleInfo(e){const t=this.nodeInternal,n=document.createDocumentFragment(),i=()=>{this.highlightSearchResultsInternal()};switch(t.nodeType()){case Node.ATTRIBUTE_NODE:this.buildAttributeDOM(n,t.name,t.value,e,!0);break;case Node.ELEMENT_NODE:{let s=t.pseudoType();if(s){const r=t.pseudoIdentifier();r&&(s+=`(${r})`),this.buildPseudoElementDOM(n,s);break}const o=t.nodeNameInCorrectCase();if(this.isClosingTag()){this.buildTagDOM(n,o,!0,!0,e);break}if(this.buildTagDOM(n,o,!1,!1,e),this.isExpandable()){if(!this.expanded){const r=new Il;r.data={clickHandler:()=>this.expand()},n.appendChild(r);const a=document.createElement("span");a.textContent="…",a.style.fontSize="0",n.appendChild(a),w(n,"​"),this.buildTagDOM(n,o,!0,!1,e)}break}if(K.canShowInlineText(t)){const r=n.createChild("span","webkit-html-text-node");r.setAttribute("jslog",`${ye("text-node").track({change:!0,dblclick:!0})}`);const a=t.firstChild;if(!a)throw new Error("ElementsTreeElement._nodeTitleInfo expects node.firstChild to be defined.");const d=this.convertWhitespaceToEntities(a.nodeValue());r.textContent=It(d.text),un(r,d.entityRanges,"webkit-html-entity-value"),w(n,"​"),this.buildTagDOM(n,o,!0,!1,e),e&&e.hasChangedChildren()&&Ye(r,"dom-update-highlight"),e&&e.isCharDataModified()&&Ye(r,"dom-update-highlight");break}(this.treeOutline&&this.treeOutline.isXMLMimeType||!yr.has(o))&&this.buildTagDOM(n,o,!0,!1,e);break}case Node.TEXT_NODE:if(t.parentNode&&t.parentNode.nodeName().toLowerCase()==="script"){const s=n.createChild("span","webkit-html-text-node webkit-html-js-node");s.setAttribute("jslog",`${ye("script-text-node").track({change:!0,dblclick:!0})}`);const o=t.nodeValue();s.textContent=o.replace(/^[\n\r]+|\s+$/g,""),Vi(s,"text/javascript").then(i)}else if(t.parentNode&&t.parentNode.nodeName().toLowerCase()==="style"){const s=n.createChild("span","webkit-html-text-node webkit-html-css-node");s.setAttribute("jslog",`${ye("css-text-node").track({change:!0,dblclick:!0})}`);const o=t.nodeValue();s.textContent=o.replace(/^[\n\r]+|\s+$/g,""),Vi(s,"text/css").then(i)}else{w(n,'"');const s=n.createChild("span","webkit-html-text-node");s.setAttribute("jslog",`${ye("text-node").track({change:!0,dblclick:!0})}`);const o=this.convertWhitespaceToEntities(t.nodeValue());s.textContent=It(o.text),un(s,o.entityRanges,"webkit-html-entity-value"),w(n,'"'),e&&e.isCharDataModified()&&Ye(s,"dom-update-highlight")}break;case Node.COMMENT_NODE:{const s=n.createChild("span","webkit-html-comment");w(s,"<!--"+t.nodeValue()+"-->");break}case Node.DOCUMENT_TYPE_NODE:{const s=n.createChild("span","webkit-html-doctype");w(s,"<!DOCTYPE "+t.nodeName()),t.publicId?(w(s,' PUBLIC "'+t.publicId+'"'),t.systemId&&w(s,' "'+t.systemId+'"')):t.systemId&&w(s,' SYSTEM "'+t.systemId+'"'),t.internalSubset&&w(s," ["+t.internalSubset+"]"),w(s,">");break}case Node.CDATA_SECTION_NODE:{const s=n.createChild("span","webkit-html-text-node");w(s,"<![CDATA["+t.nodeValue()+"]]>");break}case Node.DOCUMENT_NODE:{const s=n.createChild("span");w(s,"#document (");const o=t.documentURL;s.appendChild(tt.linkifyURL(o,{text:o,preventClick:!0,showColumnNumber:!1,inlineFrameIndex:0})),w(s,")");break}case Node.DOCUMENT_FRAGMENT_NODE:{const s=n.createChild("span","webkit-html-fragment");s.textContent=It(t.nodeNameInCorrectCase());break}default:{const s=It(t.nodeNameInCorrectCase());w(n,s)}}return n}remove(){this.nodeInternal.pseudoType()||!this.parent||!this.nodeInternal.parentNode||this.nodeInternal.parentNode.nodeType()===Node.DOCUMENT_NODE||this.nodeInternal.removeNode()}toggleEditAsHTML(e,t){if(this.editing&&this.htmlEditElement){this.editing.commit();return}if(t===!1)return;function n(r){e&&e(!r)}function i(r,a){r!==a&&o.setOuterHTML(a,n)}function s(){e&&e(!1)}const o=this.nodeInternal;o.getOuterHTML().then(this.startEditingAsHTML.bind(this,i,s))}copyCSSPath(){U.copyText(ln(this.nodeInternal,!0))}copyJSPath(){U.copyText(cr(this.nodeInternal,!0))}copyXPath(){U.copyText(ei(this.nodeInternal,!0))}copyFullXPath(){U.copyText(ei(this.nodeInternal,!1))}async copyStyles(){const e=this.nodeInternal,n=await e.domModel().cssModel().cachedMatchedCascadeForNode(e);if(!n)return;const i=O.instance().moduleSetting("text-editor-indent").get(),s=[];for(const o of n.nodeStyles().reverse())for(const r of o.leadingProperties())!r.parsedOk||r.disabled||!r.activeInStyle()||r.implicit||n.isInherited(o)&&!N().isPropertyInherited(r.name)||o.parentRule&&o.parentRule.isUserAgent()||n.propertyState(r)==="Active"&&s.push(`${i}${r.name}: ${r.value};`);U.copyText(s.join(`
`))}highlightSearchResultsInternal(){if(this.hideSearchHighlights(),!this.searchQuery)return;const e=this.listItemElement.textContent||"",t=Wa(this.searchQuery,"gi"),n=[];let i=t.exec(e);for(;i;)n.push(new hn(i.index,i[0].length)),i=t.exec(e);n.length||n.push(new hn(0,e.length)),this.#n=Jt.instance().highlightOrderedTextRanges(this.listItemElement,n)}editAsHTML(){ee(this.node()).then(()=>Pt.instance().getAction("elements.edit-as-html").execute())}adorn({name:e},t){let n=t;n||(n=document.createElement("span"),n.textContent=e);const i=new Ft;return i.data={name:e,content:n,jslogContext:e},me(this.tagTypeContext)&&(this.tagTypeContext.adorners.push(i),k.instance().registerAdorner(i),this.updateAdorners(this.tagTypeContext)),i}adornSlot({name:e},t){const n=new Le;n.name="select-element";const i=document.createElement("span");i.textContent=e;const s=document.createElement("span");s.append(n),s.append(i),s.classList.add("adorner-with-icon");const o=new Ft;return o.data={name:e,content:s,jslogContext:"slot"},t.adorners.push(o),k.instance().registerAdorner(o),this.updateAdorners(t),o}adornMedia({name:e}){const t=document.createElement("span");t.textContent=e,t.classList.add("adorner-with-icon");const n=new Le;n.name="select-element",t.append(n);const i=new Ft;return i.data={name:e,content:t,jslogContext:"media"},me(this.tagTypeContext)&&(this.tagTypeContext.adorners.push(i),k.instance().registerAdorner(i),this.updateAdorners(this.tagTypeContext)),i}removeAdorner(e,t){const n=t.adorners;k.instance().deregisterAdorner(e),e.remove();for(let i=0;i<n.length;++i)if(n[i]===e){n.splice(i,1),this.updateAdorners(t);return}}removeAllAdorners(){if(me(this.tagTypeContext)){for(const e of this.tagTypeContext.adorners)k.instance().deregisterAdorner(e),e.remove();this.tagTypeContext.adorners=[],this.updateAdorners(this.tagTypeContext)}}updateAdorners(e){e.adornersThrottler.schedule(this.updateAdornersInternal.bind(null,e))}updateAdornersInternal(e){const t=e.adornerContainer;if(!t)return Promise.resolve();const n=e.adorners;if(n.length===0)return t.classList.add("hidden"),Promise.resolve();n.sort(Er),t.removeChildren();for(const i of n)t.appendChild(i);return t.classList.remove("hidden"),Promise.resolve()}async updateStyleAdorners(){if(!me(this.tagTypeContext))return;const e=this.node(),t=e.id;if(e.nodeType()===Node.COMMENT_NODE||e.nodeType()===Node.DOCUMENT_FRAGMENT_NODE||e.nodeType()===Node.TEXT_NODE||t===void 0)return;const n=await e.domModel().cssModel().getComputedStyle(t);for(const h of this.tagTypeContext.styleAdorners)this.removeAdorner(h,this.tagTypeContext);if(this.tagTypeContext.styleAdorners=[],!n)return;const i=n.get("display"),s=i==="grid"||i==="inline-grid",o=i==="flex"||i==="inline-flex",r=(s&&(n.get("grid-template-columns")?.startsWith("subgrid")||n.get("grid-template-rows")?.startsWith("subgrid")))??!1,a=n.get("container-type"),d=n.get("contain"),c=za(`${a} ${d}`)!=="";s&&this.pushGridAdorner(this.tagTypeContext,r),o&&this.pushFlexAdorner(this.tagTypeContext),n.get("scroll-snap-type")&&n.get("scroll-snap-type")!=="none"&&this.pushScrollSnapAdorner(this.tagTypeContext),c&&this.pushContainerAdorner(this.tagTypeContext),e.isMediaNode()&&this.pushMediaAdorner(this.tagTypeContext)}pushGridAdorner(e,t){const n=this.node(),i=n.id;if(!i)return;const s=Ee(t?pe.SUBGRID:pe.GRID),o=this.adorn(s);o.classList.add("grid");const r=()=>{o.isActive()?n.domModel().overlayModel().highlightGridInPersistentOverlay(i):n.domModel().overlayModel().hideGridInPersistentOverlay(i)};o.addInteraction(r,{isToggle:!0,shouldPropagateOnKeydown:!1,ariaLabelDefault:x(v.enableGridMode),ariaLabelActive:x(v.disableGridMode)}),n.domModel().overlayModel().addEventListener("PersistentGridOverlayStateChanged",a=>{const{nodeId:d,enabled:c}=a.data;d===i&&o.toggle(c)}),e.styleAdorners.push(o),n.domModel().overlayModel().isHighlightedGridInPersistentOverlay(i)&&o.toggle(!0)}pushScrollSnapAdorner(e){const t=this.node(),n=t.id;if(!n)return;const i=Ee(pe.SCROLL_SNAP),s=this.adorn(i);s.classList.add("scroll-snap");const o=()=>{const r=t.domModel().overlayModel();s.isActive()?r.highlightScrollSnapInPersistentOverlay(n):r.hideScrollSnapInPersistentOverlay(n)};s.addInteraction(o,{isToggle:!0,shouldPropagateOnKeydown:!1,ariaLabelDefault:x(v.enableScrollSnap),ariaLabelActive:x(v.disableScrollSnap)}),t.domModel().overlayModel().addEventListener("PersistentScrollSnapOverlayStateChanged",r=>{const{nodeId:a,enabled:d}=r.data;a===n&&s.toggle(d)}),e.styleAdorners.push(s),t.domModel().overlayModel().isHighlightedScrollSnapInPersistentOverlay(n)&&s.toggle(!0)}pushFlexAdorner(e){const t=this.node(),n=t.id;if(!n)return;const i=Ee(pe.FLEX),s=this.adorn(i);s.classList.add("flex");const o=()=>{const r=t.domModel().overlayModel();s.isActive()?r.highlightFlexContainerInPersistentOverlay(n):r.hideFlexContainerInPersistentOverlay(n)};s.addInteraction(o,{isToggle:!0,shouldPropagateOnKeydown:!1,ariaLabelDefault:x(v.enableFlexMode),ariaLabelActive:x(v.disableFlexMode)}),t.domModel().overlayModel().addEventListener("PersistentFlexContainerOverlayStateChanged",r=>{const{nodeId:a,enabled:d}=r.data;a===n&&s.toggle(d)}),e.styleAdorners.push(s),t.domModel().overlayModel().isHighlightedFlexContainerInPersistentOverlay(n)&&s.toggle(!0)}pushContainerAdorner(e){const t=this.node(),n=t.id;if(!n)return;const i=Ee(pe.CONTAINER),s=this.adorn(i);s.classList.add("container");const o=()=>{const r=t.domModel().overlayModel();s.isActive()?r.highlightContainerQueryInPersistentOverlay(n):r.hideContainerQueryInPersistentOverlay(n)};s.addInteraction(o,{isToggle:!0,shouldPropagateOnKeydown:!1,ariaLabelDefault:x(v.enableScrollSnap),ariaLabelActive:x(v.disableScrollSnap)}),t.domModel().overlayModel().addEventListener("PersistentContainerQueryOverlayStateChanged",r=>{const{nodeId:a,enabled:d}=r.data;a===n&&s.toggle(d)}),e.styleAdorners.push(s),t.domModel().overlayModel().isHighlightedContainerQueryInPersistentOverlay(n)&&s.toggle(!0)}pushMediaAdorner(e){if(!this.node().id)return;const i=Ee(pe.MEDIA),s=this.adornMedia(i);s.classList.add("media");const o=()=>{Ve.instance().showView("medias")};s.addInteraction(o,{isToggle:!1,shouldPropagateOnKeydown:!1,ariaLabelDefault:x(v.openMediaPanel),ariaLabelActive:x(v.openMediaPanel)}),e.styleAdorners.push(s)}updateScrollAdorner(){if(!me(this.tagTypeContext))return;const e=this.tagTypeContext.adorners.find(n=>n.name==="scroll"),t=this.node().nodeName()==="HTML"&&this.node().ownerDocument?.isScrollable()||this.node().nodeName()!=="#document"&&this.node().isScrollable();t&&!e?this.pushScrollAdorner():!t&&e&&this.removeAdorner(e,this.tagTypeContext)}pushScrollAdorner(){const e=Ee(pe.SCROLL),t=this.adorn(e);de.install(t,x(v.elementHasScrollableOverflow)),t.classList.add("scroll")}}const Pi=500,yr=new Set(["area","base","basefont","br","canvas","col","command","embed","frame","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr"]),br=new Set(["html","head","body"]);function Er(l,e){const t=Ll(e.name,e.name);return t===0?l.name.localeCompare(e.name):t}function qd(l){return Oe.getTreeElementBylistItemNode(l)?.treeOutline?.contentElement}Ga("elementsTreeOutline",qd);const qc=Object.freeze(Object.defineProperty({__proto__:null,EditTagBlocklist:br,ElementsTreeElement:K,ForbiddenClosingTagElements:yr,InitialChildrenLimit:Pi,adornerComparator:Er,isOpeningTag:me},Symbol.toStringTag,{value:"Module"}));class Cr{throttler;treeOutline;currentHighlightedElement;alreadyExpandedParentElement;pendingHighlightNode;isModifyingTreeOutline;constructor(e,t){this.throttler=t,this.treeOutline=e,this.treeOutline.addEventListener(Dn.ElementExpanded,this.clearState,this),this.treeOutline.addEventListener(Dn.ElementCollapsed,this.clearState,this),this.treeOutline.addEventListener(V.Events.SelectedNodeChanged,this.clearState,this),he.instance().addModelListener(se,"HighlightNodeRequested",this.highlightNode,this,{scoped:!0}),he.instance().addModelListener(se,"InspectModeWillBeToggled",this.clearState,this,{scoped:!0}),this.currentHighlightedElement=null,this.alreadyExpandedParentElement=null,this.pendingHighlightNode=null,this.isModifyingTreeOutline=!1}highlightNode(e){if(!O.instance().moduleSetting("highlight-node-on-hover-in-overlay").get())return;const t=e.data;this.throttler.schedule(async()=>{this.highlightNodeInternal(this.pendingHighlightNode),this.pendingHighlightNode=null}),this.pendingHighlightNode=this.treeOutline===V.forDOMModel(t.domModel())?t:null}highlightNodeInternal(e){this.isModifyingTreeOutline=!0;let t=null;if(this.currentHighlightedElement){let n=this.currentHighlightedElement;for(;n&&n!==this.alreadyExpandedParentElement;){n.expanded&&n.collapse();const i=n.parent;n=i instanceof K?i:null}}if(this.currentHighlightedElement=null,this.alreadyExpandedParentElement=null,e){let n=e;const i=this.treeOutline.treeElementByNode,s=o=>{const r=i.get(o);return r?!r.expanded:!0};for(;n&&s(n);)n=n.parentNode;this.alreadyExpandedParentElement=n?i.get(n):this.treeOutline.rootElement(),t=this.treeOutline.createTreeElementFor(e)}this.currentHighlightedElement=t,this.treeOutline.setHoverEffect(t),t&&t.reveal(!0),this.isModifyingTreeOutline=!1}clearState(){this.isModifyingTreeOutline||(this.currentHighlightedElement=null,this.alreadyExpandedParentElement=null,this.pendingHighlightNode=null)}}const Xc=Object.freeze(Object.defineProperty({__proto__:null,ElementsTreeElementHighlighter:Cr},Symbol.toStringTag,{value:"Module"})),Sr=new CSSStyleSheet;Sr.replaceSync(`/**
 * Copyright 2017 The Chromium Authors. All rights reserved.
 * Use of this source code is governed by a BSD-style license that can be
 * found in the LICENSE file.
 */
.metrics {
  padding: 8px;
  font-size: 10px;
  text-align: center;
  white-space: nowrap;
  min-height: var(--metrics-height);
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;

  /* Colors in the metrics panel need special treatment. The color of the
  various box-model regions (margin, border, padding, content) are set in JS
  by using the ones from the in-page overlay. They, therefore, do not depend on
  the theme.
  To ensure proper contrast between those colors and the 1px borders between
  them, we use these local variables, not theme variables. */
  --override-box-model-separator-color: var(--ref-palette-neutral0);
  --override-box-model-text-color: var(--ref-palette-neutral10);
}

:host {
  --metrics-height: 190px;

  height: var(--metrics-height);
  contain: strict;
}

:host(.invisible) {
  visibility: hidden;
  height: 0;
}

:host(.collapsed) {
  visibility: collapse;
  height: 0;
}
/* The font we use on Windows takes up more vertical space, so adjust
 * the height of the metrics sidebar pane accordingly.
 */
:host-context(.platform-windows) {
  --metrics-height: 214px;
}

.metrics .label {
  position: absolute;
  font-size: 10px;
  left: 4px;
}

.metrics .position {
  /* This border is different from the ones displayed between the box-moodel
  regions because it is displayed against the pane background, so needs to be
  visible in both light and dark theme. We therefore use a theme variable. */
  border: 1px var(--sys-color-token-subtle) dotted;
  background-color: var(--sys-color-cdt-base-container);
  display: inline-block;
  text-align: center;
  padding: 3px;
  margin: 3px;
  position: relative;
}

.metrics .margin {
  border: 1px dashed var(--override-box-model-separator-color);
  background-color: var(--sys-color-cdt-base-container);
  display: inline-block;
  text-align: center;
  vertical-align: middle;
  padding: 3px 6px;
  margin: 3px;
  position: relative;
}

.metrics .border {
  border: 1px solid var(--override-box-model-separator-color);
  background-color: var(--sys-color-cdt-base-container);
  display: inline-block;
  text-align: center;
  vertical-align: middle;
  padding: 3px 6px;
  margin: 3px;
  position: relative;
}

.metrics .padding {
  border: 1px dashed var(--override-box-model-separator-color);
  background-color: var(--sys-color-cdt-base-container);
  display: inline-block;
  text-align: center;
  vertical-align: middle;
  padding: 3px 6px;
  margin: 3px;
  position: relative;
  min-width: 120px;
}

.metrics .content {
  position: static;
  border: 1px solid var(--override-box-model-separator-color);
  background-color: var(--sys-color-cdt-base-container);
  display: inline-block;
  text-align: center;
  vertical-align: middle;
  padding: 3px;
  margin: 3px;
  min-width: 80px;
  overflow: visible;
}

.metrics .content span {
  display: inline-block;
}

.metrics .editing {
  position: relative;
  z-index: 100;
  cursor: text;
}

.metrics .left {
  display: inline-block;
  vertical-align: middle;
}

.metrics .right {
  display: inline-block;
  vertical-align: middle;
}

.metrics .top {
  display: inline-block;
}

.metrics .bottom {
  display: inline-block;
}

/* In dark theme, when a specific box-model region is hovered, the other regions
lose their background colors, so we need to give them a lighter border color so
that region separators remain visible against the dark panel background. */
:host-context(.theme-with-dark-background) .margin:hover,
:host-context(.theme-with-dark-background) .margin:hover * {
  border-color: var(--sys-color-token-subtle);
}

/* With the exception of the position labels, labels are displayed on top of
the box-model region colors, so need to use the following color to remain
visible. */
.metrics .highlighted:not(.position) > *:not(.border):not(.padding):not(.content) {
  color: var(--override-box-model-text-color);
}

/*# sourceURL=metricsSidebarPane.css */
`);class wr extends Ei{originalPropertyData;previousPropertyDataCandidate;inlineStyle;highlightMode;boxElements;isEditingMetrics;constructor(){super(),this.originalPropertyData=null,this.previousPropertyDataCandidate=null,this.inlineStyle=null,this.highlightMode="",this.boxElements=[],this.contentElement.setAttribute("jslog",`${Me("styles-metrics")}`)}doUpdate(){if(this.isEditingMetrics)return Promise.resolve();const e=this.node(),t=this.cssModel();if(!e||e.nodeType()!==Node.ELEMENT_NODE||!t)return this.contentElement.removeChildren(),this.element.classList.add("collapsed"),Promise.resolve();function n(s){!s||this.node()!==e||this.updateMetrics(s)}if(!e.id)return Promise.resolve();const i=[t.getComputedStyle(e.id).then(n.bind(this)),t.getInlineStyles(e.id).then(s=>{s&&this.node()===e&&(this.inlineStyle=s.inlineStyle)})];return Promise.all(i)}onCSSModelChanged(){this.update()}toggleVisibility(e){this.element.classList.toggle("invisible",!e)}getPropertyValueAsPx(e,t){const n=e.get(t);return n?Number(n.replace(/px$/,"")||0):0}getBox(e,t){const n=t==="border"?"-width":"",i=this.getPropertyValueAsPx(e,t+"-left"+n),s=this.getPropertyValueAsPx(e,t+"-top"+n),o=this.getPropertyValueAsPx(e,t+"-right"+n),r=this.getPropertyValueAsPx(e,t+"-bottom"+n);return{left:i,top:s,right:o,bottom:r}}highlightDOMNode(e,t,n){n.consume();const i=this.node();if(e&&i){if(this.highlightMode===t)return;this.highlightMode=t,i.highlight(t)}else this.highlightMode="",se.hideDOMNodeHighlight();for(const{element:s,name:o,backgroundColor:r}of this.boxElements){const a=!i||t==="all"||o===t;s.style.backgroundColor=a?r:"",s.classList.toggle("highlighted",a)}}updateMetrics(e){const t=document.createElement("div");t.className="metrics";const n=this;function i(f,u,m,y){const b=document.createElement("div");b.className=m;const C=(u!=="position"?u+"-":"")+m+y;let S=f.get(C);return S===void 0||((S===""||u!=="position"&&S==="0px"||u==="position"&&S==="auto")&&(S="‒"),S=S.replace(/px$/,""),S=pn(S),b.textContent=S,b.setAttribute("jslog",`${ye(C).track({dblclick:!0,keydown:"Enter|Escape|ArrowUp|ArrowDown|PageUp|PageDown",change:!0})}`),b.addEventListener("dblclick",this.startEditing.bind(this,b,u,C,f),!1)),b}function s(f){let u=f.get("width");if(!u)return"";u=u.replace(/px$/,"");const m=Number(u);if(!isNaN(m)&&f.get("box-sizing")==="border-box"){const y=n.getBox(f,"border"),b=n.getBox(f,"padding");u=(m-y.left-y.right-b.left-b.right).toString()}return pn(u)}function o(f){let u=f.get("height");if(!u)return"";u=u.replace(/px$/,"");const m=Number(u);if(!isNaN(m)&&f.get("box-sizing")==="border-box"){const y=n.getBox(f,"border"),b=n.getBox(f,"padding");u=(m-y.top-y.bottom-b.top-b.bottom).toString()}return pn(u)}const r=new Set(["table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row","table-row-group"]),a=new Set(["table-column","table-column-group","table-footer-group","table-header-group","table-row","table-row-group"]),d=new Set(["static"]),c=["content","padding","border","margin","position"],h=[Lt.Content,Lt.Padding,Lt.Border,Lt.Margin,Xa.fromRGBA([0,0,0,0])],p=["content","padding","border","margin","position"];let g=null;this.boxElements=[];for(let f=0;f<c.length;++f){const u=c[f],m=e.get("display"),y=e.get("position");if(!m||!y||u==="margin"&&r.has(m)||u==="padding"&&a.has(m)||u==="position"&&d.has(y))continue;const b=document.createElement("div");b.className=`${u} highlighted`;const C=h[f].asString("rgba")||"";if(b.style.backgroundColor=C,b.setAttribute("jslog",`${Qa().context(u).track({hover:!0})}`),b.addEventListener("mouseover",this.highlightDOMNode.bind(this,!0,u==="position"?"all":u),!1),this.boxElements.push({element:b,name:u,backgroundColor:C}),u==="content"){const S=document.createElement("span");S.textContent=s(e),S.addEventListener("dblclick",this.startEditing.bind(this,S,"width","width",e),!1),S.setAttribute("jslog",`${ye("width").track({dblclick:!0,keydown:"Enter|Escape|ArrowUp|ArrowDown|PageUp|PageDown",change:!0})}`);const I=document.createElement("span");I.textContent=o(e),I.addEventListener("dblclick",this.startEditing.bind(this,I,"height","height",e),!1),I.setAttribute("jslog",`${ye("height").track({dblclick:!0,keydown:"Enter|Escape|ArrowUp|ArrowDown|PageUp|PageDown",change:!0})}`);const F=document.createElement("span");F.textContent=" × ",b.appendChild(S),b.appendChild(F),b.appendChild(I)}else{const S=u==="border"?"-width":"",I=document.createElement("div");I.className="label",I.textContent=p[f],b.appendChild(I),b.appendChild(i.call(this,e,u,"top",S)),b.appendChild(document.createElement("br")),b.appendChild(i.call(this,e,u,"left",S)),g&&b.appendChild(g),b.appendChild(i.call(this,e,u,"right",S)),b.appendChild(document.createElement("br")),b.appendChild(i.call(this,e,u,"bottom",S))}g=b}t.appendChild(g),t.addEventListener("mouseover",this.highlightDOMNode.bind(this,!1,"all"),!1),t.addEventListener("mouseleave",this.highlightDOMNode.bind(this,!1,"all"),!1),this.contentElement.removeChildren(),this.contentElement.appendChild(t),this.element.classList.remove("collapsed")}startEditing(e,t,n,i){if(Ae(e))return;const s={box:t,styleProperty:n,computedStyle:i,keyDownHandler:()=>{}},o=this.handleKeyDown.bind(this,s);s.keyDownHandler=o,e.addEventListener("keydown",o,!1),this.isEditingMetrics=!0;const r=new Je(this.editingCommitted.bind(this),this.editingCancelled.bind(this),s);Gt.startEditing(e,r);const a=e.getComponentSelection();a&&a.selectAllChildren(e)}handleKeyDown(e,t){const n=t.currentTarget;function i(o,r){this.applyUserInput(n,r,o,e,!1)}function s(o,r,a){return e.styleProperty!=="margin"&&r<0&&(r=0),o+r+a}ui(t,n,i.bind(this),void 0,s)}editingEnded(e,t){this.originalPropertyData=null,this.previousPropertyDataCandidate=null,e.removeEventListener("keydown",t.keyDownHandler,!1),delete this.isEditingMetrics}editingCancelled(e,t){if(this.inlineStyle)if(this.originalPropertyData)this.inlineStyle.allProperties()[this.originalPropertyData.index].setText(this.originalPropertyData.propertyText||"",!1);else{const n=this.inlineStyle.pastLastSourcePropertyIndex();n&&this.inlineStyle.allProperties()[n-1].setText("",!1)}this.editingEnded(e,t),this.update()}applyUserInput(e,t,n,i,s){if(!this.inlineStyle)return this.editingCancelled(e,i);if(s&&t===n)return this.editingCancelled(e,i);i.box!=="position"&&(!t||t==="‒")?t="0px":i.box==="position"&&(!t||t==="‒")&&(t="auto"),t=t.toLowerCase(),/^\d+$/.test(t)&&(t+="px");const o=i.styleProperty,r=i.computedStyle;if(r.get("box-sizing")==="border-box"&&(o==="width"||o==="height")){if(!t.match(/px$/)){Ns.instance().error("For elements with box-sizing: border-box, only absolute content area dimensions can be applied");return}const c=this.getBox(r,"border"),h=this.getBox(r,"padding");let p=Number(t.replace(/px$/,""));if(isNaN(p))return;o==="width"?p+=c.left+c.right+h.left+h.right:p+=c.top+c.bottom+h.top+h.bottom,t=p+"px"}this.previousPropertyDataCandidate=null;const a=this.inlineStyle.allProperties();for(let c=0;c<a.length;++c){const h=a[c];if(!(h.name!==i.styleProperty||!h.activeInStyle())){this.previousPropertyDataCandidate=h,h.setValue(t,s,!0,d.bind(this));return}}this.inlineStyle.appendProperty(i.styleProperty,t,d.bind(this));function d(c){if(c){if(this.originalPropertyData||(this.originalPropertyData=this.previousPropertyDataCandidate),this.highlightMode){const h=this.node();if(!h)return;h.highlight(this.highlightMode)}s&&this.update()}}}editingCommitted(e,t,n,i){this.editingEnded(e,i),this.applyUserInput(e,t,n,i,!0)}wasShown(){super.wasShown(),this.registerCSSFiles([Sr])}}const Qc=Object.freeze(Object.defineProperty({__proto__:null,MetricsSidebarPane:wr},Symbol.toStringTag,{value:"Module"})),H={findByStringSelectorOrXpath:"Find by string, selector, or `XPath`",switchToAccessibilityTreeView:"Switch to Accessibility Tree view",switchToDomTreeView:"Switch to DOM Tree view",showComputedStylesSidebar:"Show Computed Styles sidebar",hideComputedStylesSidebar:"Hide Computed Styles sidebar",computedStylesShown:"Computed Styles sidebar shown",computedStylesHidden:"Computed Styles sidebar hidden",computed:"Computed",styles:"Styles",revealInElementsPanel:"Reveal in Elements panel",nodeCannotBeFoundInTheCurrent:"Node cannot be found in the current page.",theRemoteObjectCouldNotBe:"The remote object could not be resolved to a valid node.",theDeferredDomNodeCouldNotBe:"The deferred `DOM` Node could not be resolved to a valid node.",elementStateS:"Element state: {PH1}",sidePanelToolbar:"Side panel toolbar",sidePanelContent:"Side panel content",domTreeExplorer:"DOM tree explorer"},Xd=G("panels/elements/ElementsPanel.ts",H),$=q.bind(void 0,Xd),rs=l=>{const e=new li,t=$(l?H.switchToDomTreeView:H.switchToAccessibilityTreeView);return e.data={active:l,variant:"toolbar",iconUrl:new URL("data:image/svg+xml,%3csvg%20width='20'%20height='20'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M9.995%205.5c-.483%200-.894-.172-1.235-.516a1.699%201.699%200%200%201-.51-1.24c0-.482.172-.893.516-1.234.343-.34.757-.51%201.24-.51.482%200%20.893.172%201.234.516.34.343.51.756.51%201.24%200%20.482-.172.893-.516%201.234-.343.34-.757.51-1.24.51ZM7.5%2017.75V8.104a15.427%2015.427%200%200%201-2.26-.333A69.766%2069.766%200%200%201%203%207.229l.375-1.396c1.083.292%202.177.518%203.281.677a23.327%2023.327%200%200%200%206.688%200%2028.068%2028.068%200%200%200%203.281-.677L17%207.23c-.75.195-1.496.375-2.24.542-.743.167-1.496.28-2.26.343v9.636H11l-.188-4.625H9.209L9%2017.75H7.5Z'%20fill='%23000'/%3e%3c/svg%3e",import.meta.url).toString(),title:t,jslogContext:"toggle-accessibility-tree"},e.tabIndex=0,e.classList.add("axtree-button"),l&&e.classList.add("active"),e};let xn;class k extends Ja{splitWidget;searchableViewInternal;mainContainer;domTreeContainer;splitMode;accessibilityTreeView;breadcrumbs;stylesWidget;computedStyleWidget;metricsWidget;treeOutlines=new Set;searchResults;currentSearchResultIndex;pendingNodeReveal;adornerManager;adornerSettingsPane;adornersByName;accessibilityTreeButton;domTreeButton;selectedNodeOnReset;hasNonDefaultSelectedNode;searchConfig;omitDefaultSelection;notFirstInspectElement;sidebarPaneView;stylesViewToReveal;nodeInsertedTaskRunner={queue:Promise.resolve(),run(e){this.queue=this.queue.then(e)}};cssStyleTrackerByCSSModel;constructor(){super("elements"),this.splitWidget=new _i(!0,!0,"elements-panel-split-view-state",325,325),this.splitWidget.addEventListener("SidebarSizeChanged",this.updateTreeOutlineVisibleWidth.bind(this)),this.splitWidget.show(this.element),this.searchableViewInternal=new Za(this,null),this.searchableViewInternal.setMinimalSearchQuerySize(0),this.searchableViewInternal.setMinimumSize(25,28),this.searchableViewInternal.setPlaceholder($(H.findByStringSelectorOrXpath));const e=this.searchableViewInternal.element;this.mainContainer=document.createElement("div"),this.domTreeContainer=document.createElement("div");const t=document.createElement("div");ve.isEnabled("full-accessibility-tree")&&this.initializeFullAccessibilityTreeView(),this.mainContainer.appendChild(this.domTreeContainer),e.appendChild(this.mainContainer),e.appendChild(t),el(this.domTreeContainer),ue(this.domTreeContainer,$(H.domTreeExplorer)),this.splitWidget.setMainWidget(this.searchableViewInternal),this.splitMode=null,this.mainContainer.id="main-content",this.domTreeContainer.id="elements-content",this.domTreeContainer.tabIndex=-1,O.instance().moduleSetting("dom-word-wrap").get()&&this.domTreeContainer.classList.add("elements-wrap"),O.instance().moduleSetting("dom-word-wrap").addChangeListener(this.domWordWrapSettingChanged.bind(this)),t.id="elements-crumbs",this.domTreeButton&&(this.accessibilityTreeView=new Fs(this.domTreeButton,new pi)),this.breadcrumbs=new Al,this.breadcrumbs.addEventListener("breadcrumbsnodeselected",n=>{this.crumbNodeSelected(n)}),t.appendChild(this.breadcrumbs),this.stylesWidget=ce.instance(),this.computedStyleWidget=new rr,this.metricsWidget=new wr,O.instance().moduleSetting("sidebar-position").addChangeListener(this.updateSidebarPosition.bind(this)),this.updateSidebarPosition(),this.cssStyleTrackerByCSSModel=new Map,he.instance().observeModels(be,this,{scoped:!0}),he.instance().addEventListener("NameChanged",n=>this.targetNameChanged(n.data)),O.instance().moduleSetting("show-ua-shadow-dom").addChangeListener(this.showUAShadowDOMChanged.bind(this)),Hi.instance().addEventListener("SidebarPaneAdded",this.extensionSidebarPaneAdded,this),this.currentSearchResultIndex=-1,this.pendingNodeReveal=!1,this.adornerManager=new kl(O.instance().moduleSetting("adorner-settings")),this.adornerSettingsPane=null,this.adornersByName=new Map}initializeFullAccessibilityTreeView(){this.accessibilityTreeButton=rs(!1),this.accessibilityTreeButton.addEventListener("click",this.showAccessibilityTree.bind(this)),this.domTreeButton=rs(!0),this.domTreeButton.addEventListener("click",this.showDOMTree.bind(this)),this.mainContainer.appendChild(this.accessibilityTreeButton)}showAccessibilityTree(){this.accessibilityTreeView&&this.splitWidget.setMainWidget(this.accessibilityTreeView)}showDOMTree(){this.splitWidget.setMainWidget(this.searchableViewInternal);const e=this.selectedDOMNode();if(!e)return;const t=this.treeElementForNode(e);t&&t.select()}static instance(e={forceNew:null}){const{forceNew:t}=e;return(!xn||t)&&(xn=new k),xn}revealProperty(e){return!this.sidebarPaneView||!this.stylesViewToReveal?Promise.resolve():this.sidebarPaneView.showView(this.stylesViewToReveal).then(()=>{this.stylesWidget.revealProperty(e)})}resolveLocation(e){return this.sidebarPaneView||null}showToolbarPane(e,t){this.stylesWidget.showToolbarPane(e,t)}modelAdded(e){const t=e.parentModel();let n=t?V.forDOMModel(t):null;n||(n=new V(!0,!0),n.setWordWrap(O.instance().moduleSetting("dom-word-wrap").get()),n.addEventListener(V.Events.SelectedNodeChanged,this.selectedNodeChanged,this),n.addEventListener(V.Events.ElementsTreeUpdated,this.updateBreadcrumbIfNeeded,this),new Cr(n,new xe(100)),this.treeOutlines.add(n)),n.wireToDOMModel(e),this.setupStyleTracking(e.cssModel()),this.isShowing()&&this.wasShown(),this.domTreeContainer.hasFocus()&&n.focus(),e.addEventListener(P.DocumentUpdated,this.documentUpdatedEvent,this),e.addEventListener(P.NodeInserted,this.handleNodeInserted,this)}handleNodeInserted(e){this.nodeInsertedTaskRunner.run(async()=>{const t=e.data;if(!t.isViewTransitionPseudoNode())return;const n=t.domModel().cssModel(),i=await n.requestViaInspectorStylesheet(t.frameId());if(!i)return;const s=await n.getStyleSheetText(i.id);s?.includes(`${t.simpleSelector()} {`)||await n.setStyleSheetText(i.id,`${s}
${t.simpleSelector()} {}`,!1)})}modelRemoved(e){e.removeEventListener(P.DocumentUpdated,this.documentUpdatedEvent,this),e.removeEventListener(P.NodeInserted,this.handleNodeInserted,this);const t=V.forDOMModel(e);t&&(t.unwireFromDOMModel(e),!e.parentModel()&&(this.treeOutlines.delete(t),t.element.remove(),this.removeStyleTracking(e.cssModel())))}targetNameChanged(e){const t=e.model(be);!t||V.forDOMModel(t)}updateTreeOutlineVisibleWidth(){if(!this.treeOutlines.size)return;let e=this.splitWidget.element.offsetWidth;this.splitWidget.isVertical()&&(e-=this.splitWidget.sidebarSize());for(const t of this.treeOutlines)t.setVisibleWidth(e)}focus(){const e=this.treeOutlines.values().next();e.done?this.domTreeContainer.focus():e.value.focus()}searchableView(){return this.searchableViewInternal}wasShown(){super.wasShown(),T.instance().setFlavor(k,this),this.registerCSSFiles([ar]);for(const t of this.treeOutlines)t.element.parentElement!==this.domTreeContainer&&this.domTreeContainer.appendChild(t.element);const e=he.instance().models(be,{scoped:!0});for(const t of e){if(t.parentModel())continue;const n=V.forDOMModel(t);n&&(n.setVisible(!0),n.rootDOMNode||(t.existingDocument()?(n.rootDOMNode=t.existingDocument(),this.documentUpdated(t)):t.requestDocument()))}}willHide(){se.hideDOMNodeHighlight();for(const e of this.treeOutlines)e.setVisible(!1),this.domTreeContainer.removeChild(e.element);super.willHide(),T.instance().setFlavor(k,null)}onResize(){this.element.window().requestAnimationFrame(this.updateSidebarPosition.bind(this)),this.updateTreeOutlineVisibleWidth()}selectedNodeChanged(e){let t=e.data.node;t&&t.pseudoType()&&!t.parentNode&&(t=null);const{focus:n}=e.data;for(const o of this.treeOutlines)(!t||V.forDOMModel(t.domModel())!==o)&&o.selectDOMNode(null);if(t){const r=[Be(t)];for(let a=t.parentNode;a;a=a.parentNode)r.push(Be(a));this.breadcrumbs.data={crumbs:r,selectedNode:Be(t)},this.accessibilityTreeView&&this.accessibilityTreeView.selectedNodeChanged(t)}else this.breadcrumbs.data={crumbs:[],selectedNode:null};if(T.instance().setFlavor(A,t),!t)return;t.setAsInspectedNode(),n&&(this.selectedNodeOnReset=t,this.hasNonDefaultSelectedNode=!0);const i=t.domModel().runtimeModel().executionContexts(),s=t.frameId();for(const o of i)if(o.frameId===s){T.instance().setFlavor(Ts,o);break}}documentUpdatedEvent(e){const t=e.data;this.documentUpdated(t),this.removeStyleTracking(t.cssModel()),this.setupStyleTracking(t.cssModel())}documentUpdated(e){if(this.searchableViewInternal.cancelSearch(),!e.existingDocument()){this.isShowing()&&e.requestDocument();return}if(this.hasNonDefaultSelectedNode=!1,this.omitDefaultSelection)return;const t=this.selectedNodeOnReset;n.call(this,e,this.selectedNodeOnReset||null);async function n(i,s){const o=s?s.path():null,r=o?await i.pushNodeByPathToFrontend(o):null;if(t!==this.selectedNodeOnReset)return;let a=r?i.nodeForId(r):null;if(!a){const d=i.existingDocument();a=d?d.body||d.documentElement:null}a&&(this.setDefaultSelectedNode(a),this.lastSelectedNodeSelectedForTest())}}lastSelectedNodeSelectedForTest(){}setDefaultSelectedNode(e){if(!e||this.hasNonDefaultSelectedNode||this.pendingNodeReveal)return;const t=V.forDOMModel(e.domModel());t&&(this.selectDOMNode(e),t.selectedTreeElement&&t.selectedTreeElement.expand())}onSearchClosed(){const e=this.selectedDOMNode();if(!e)return;const t=this.treeElementForNode(e);t&&t.select()}onSearchCanceled(){this.searchConfig=void 0,this.hideSearchHighlights(),this.searchableViewInternal.updateSearchMatchesCount(0),this.currentSearchResultIndex=-1,delete this.searchResults,be.cancelSearch()}performSearch(e,t,n){const i=e.query,s=i.trim();if(!s.length)return;!this.searchConfig||this.searchConfig.query!==i?this.onSearchCanceled():this.hideSearchHighlights(),this.searchConfig=e;const o=O.instance().moduleSetting("show-ua-shadow-dom").get(),r=he.instance().models(be,{scoped:!0}),a=r.map(d=>d.performSearch(s,o));Promise.all(a).then(d=>{this.searchResults=[];for(let h=0;h<d.length;++h){const p=d[h];for(let g=0;g<p;++g)this.searchResults.push({domModel:r[h],index:g,node:void 0})}if(this.searchableViewInternal.updateSearchMatchesCount(this.searchResults.length),!this.searchResults.length)return;this.currentSearchResultIndex>=this.searchResults.length&&(this.currentSearchResultIndex=-1);let c=this.currentSearchResultIndex;t&&(this.currentSearchResultIndex===-1?c=n?-1:0:c=n?c-1:c+1,this.jumpToSearchResult(c))})}domWordWrapSettingChanged(e){this.domTreeContainer.classList.toggle("elements-wrap",e.data);for(const t of this.treeOutlines)t.setWordWrap(e.data)}switchToAndFocus(e){this.searchableViewInternal.cancelSearch(),Ve.instance().showView("elements").then(()=>this.selectDOMNode(e,!0))}jumpToSearchResult(e){this.searchResults&&(this.currentSearchResultIndex=(e+this.searchResults.length)%this.searchResults.length,this.highlightCurrentSearchResult())}jumpToNextSearchResult(){!this.searchResults||!this.searchConfig||this.performSearch(this.searchConfig,!0)}jumpToPreviousSearchResult(){!this.searchResults||!this.searchConfig||this.performSearch(this.searchConfig,!0,!0)}supportsCaseSensitiveSearch(){return!1}supportsRegexSearch(){return!1}highlightCurrentSearchResult(){const e=this.currentSearchResultIndex,t=this.searchResults;if(!t)return;const n=t[e];if(this.searchableViewInternal.updateCurrentMatchIndex(e),n.node===null)return;if(typeof n.node>"u"){n.domModel.searchResult(n.index).then(s=>{n.node=s,this.searchConfig&&this.searchResults&&this.currentSearchResultIndex!==-1&&this.highlightCurrentSearchResult()});return}const i=this.treeElementForNode(n.node);if(n.node.scrollIntoView(),i){this.searchConfig&&i.highlightSearchResults(this.searchConfig.query),i.reveal();const s=i.listItemElement.getElementsByClassName(tl);s.length&&s[0].scrollIntoViewIfNeeded(!1),i.select(!0)}}hideSearchHighlights(){if(!this.searchResults||!this.searchResults.length||this.currentSearchResultIndex===-1)return;const e=this.searchResults[this.currentSearchResultIndex];if(!e.node)return;const t=this.treeElementForNode(e.node);t&&t.hideSearchHighlights()}selectedDOMNode(){for(const e of this.treeOutlines)if(e.selectedDOMNode())return e.selectedDOMNode();return null}selectDOMNode(e,t){for(const n of this.treeOutlines)V.forDOMModel(e.domModel())===n?n.selectDOMNode(e,t):n.selectDOMNode(null)}selectAndShowSidebarTab(e){this.sidebarPaneView&&(this.sidebarPaneView.tabbedPane().selectTab(e),this.isShowing()||Ve.instance().showView("elements"))}updateBreadcrumbIfNeeded(e){const t=e.data,n=this.selectedDOMNode();if(!n){this.breadcrumbs.data={crumbs:[],selectedNode:null};return}const i=Be(n),s=[i];for(let d=n.parentNode;d;d=d.parentNode)s.push(Be(d));const o=t.map(Be),r=new Map;o.forEach(d=>r.set(d.id,d));const a=s.map(d=>r.get(d.id)||d);this.breadcrumbs.data={crumbs:a,selectedNode:i}}crumbNodeSelected(e){this.selectDOMNode(e.legacyDomNode,!0)}treeOutlineForNode(e){return e?V.forDOMModel(e.domModel()):null}treeElementForNode(e){const t=this.treeOutlineForNode(e);return t?t.findTreeElement(e):null}leaveUserAgentShadowDOM(e){let t;for(;(t=e.ancestorUserAgentShadowRoot())&&t.parentNode;)e=t.parentNode;return e}async revealAndSelectNode(e,t,n){this.omitDefaultSelection=!0;const i=O.instance().moduleSetting("show-ua-shadow-dom").get()?e:this.leaveUserAgentShadowDOM(e);n||i.highlightForTwoSeconds(),this.accessibilityTreeView&&this.accessibilityTreeView.revealAndSelectNode(e),await Ve.instance().showView("elements",!1,!t),this.selectDOMNode(i,t),delete this.omitDefaultSelection,this.notFirstInspectElement||(k.firstInspectElementNodeNameForTest=i.nodeName(),k.firstInspectElementCompletedForTest(),U.inspectElementCompleted()),this.notFirstInspectElement=!0}showUAShadowDOMChanged(){for(const e of this.treeOutlines)e.update()}setupTextSelectionHack(e){const t=i.bind(this),n=s=>{s.buttons===0&&i.call(this)};e.addEventListener("mousedown",s=>{if(s.button!==0)return;this.splitWidget.element.classList.add("disable-resizer-for-elements-hack"),e.style.setProperty("height",`${e.offsetHeight}px`);const o=1e6;e.style.setProperty("left",`${-1*o}px`),e.style.setProperty("padding-left",`${o}px`),e.style.setProperty("width",`calc(100% + ${o}px)`),e.style.setProperty("position","fixed"),e.window().addEventListener("blur",t),e.window().addEventListener("contextmenu",t,!0),e.window().addEventListener("dragstart",t,!0),e.window().addEventListener("mousemove",n,!0),e.window().addEventListener("mouseup",t,!0),e.window().addEventListener("visibilitychange",t)},!0);function i(){this.splitWidget.element.classList.remove("disable-resizer-for-elements-hack"),e.style.removeProperty("left"),e.style.removeProperty("padding-left"),e.style.removeProperty("width"),e.style.removeProperty("position"),e.window().removeEventListener("blur",t),e.window().removeEventListener("contextmenu",t,!0),e.window().removeEventListener("dragstart",t,!0),e.window().removeEventListener("mousemove",n,!0),e.window().removeEventListener("mouseup",t,!0),e.window().removeEventListener("visibilitychange",t)}}initializeSidebarPanes(e){this.splitWidget.setVertical(e==="Vertical"),this.showToolbarPane(null,null);const t=new gt;t.element.classList.add("style-panes-wrapper"),t.element.setAttribute("jslog",`${Me("styles").track({resize:!0})}`),this.stylesWidget.show(t.element),this.setupTextSelectionHack(t.element);const n=new gt;n.element.classList.add("style-panes-wrapper"),n.element.setAttribute("jslog",`${Me("computed").track({resize:!0})}`),this.computedStyleWidget.show(n.element);const i=new _i(!0,!0,"elements.styles.sidebar.width",100);i.setMainWidget(t),i.hideSidebar(),i.enableShowModeSaving(),i.addEventListener("ShowModeChanged",()=>{o()}),this.stylesWidget.addEventListener("InitialUpdateCompleted",()=>{this.stylesWidget.appendToolbarItem(i.createShowHideSidebarButton($(H.showComputedStylesSidebar),$(H.hideComputedStylesSidebar),$(H.computedStylesShown),$(H.computedStylesHidden),"computed-styles"))});const s=()=>{this.metricsWidget.show(n.element,this.computedStyleWidget.element),this.metricsWidget.toggleVisibility(!0),this.stylesWidget.removeEventListener("StylesUpdateCompleted",r)},o=()=>{i.showMode()==="Both"?s():(this.metricsWidget.show(t.element),this.stylesWidget.hasMatchedStyles||this.metricsWidget.toggleVisibility(!1),this.stylesWidget.addEventListener("StylesUpdateCompleted",r))},r=u=>{this.metricsWidget.toggleVisibility(u.data.hasMatchedStyles)},a=u=>{const{tabId:m}=u.data;m==="computed"?(n.show(g.element),s()):m==="styles"&&(i.setSidebarWidget(n),o())};this.sidebarPaneView=Ve.instance().createTabbedLocation(()=>Ve.instance().showView("elements"),"styles-pane-sidebar",!0,!0);const d=this.sidebarPaneView.tabbedPane();d.headerElement().setAttribute("jslog",`${nl("sidebar").track({keydown:"ArrowUp|ArrowLeft|ArrowDown|ArrowRight|Enter|Space"})}`),this.splitMode!=="Vertical"&&this.splitWidget.installResizer(d.headerElement());const c=d.headerElement();il(c),ue(c,$(H.sidePanelToolbar));const h=d.tabbedPaneContentElement();sl(h),ue(h,$(H.sidePanelContent));const p=new Ui($(H.styles),void 0,"styles");this.sidebarPaneView.appendView(p),p.element.classList.add("flex-auto"),i.show(p.element);const g=new Ui($(H.computed),void 0,"computed");g.element.classList.add("composite","fill"),d.addEventListener(ol.TabSelected,a,this),this.sidebarPaneView.appendView(g),this.stylesViewToReveal=p,this.sidebarPaneView.appendApplicableItems("elements-sidebar");const f=Hi.instance().sidebarPanes();for(let u=0;u<f.length;++u)this.addExtensionSidebarPane(f[u]);this.splitWidget.setSidebarWidget(this.sidebarPaneView.tabbedPane())}updateSidebarPosition(){if(this.sidebarPaneView&&this.sidebarPaneView.tabbedPane().shouldHideOnDetach())return;const e=O.instance().moduleSetting("sidebar-position").get();let t="Horizontal";if((e==="right"||e==="auto"&&rl.instance().element.offsetWidth>680)&&(t="Vertical"),!this.sidebarPaneView){this.initializeSidebarPanes(t);return}if(t===this.splitMode)return;this.splitMode=t;const n=this.sidebarPaneView.tabbedPane();this.splitWidget.uninstallResizer(n.headerElement()),this.splitWidget.setVertical(this.splitMode==="Vertical"),this.showToolbarPane(null,null),this.splitMode!=="Vertical"&&this.splitWidget.installResizer(n.headerElement())}extensionSidebarPaneAdded(e){this.addExtensionSidebarPane(e.data)}addExtensionSidebarPane(e){this.sidebarPaneView&&e.panelName()===this.name&&this.sidebarPaneView.appendView(e)}getComputedStyleWidget(){return this.computedStyleWidget}setupStyleTracking(e){const t=e.createCSSPropertyTracker(Qd);t.start(),this.cssStyleTrackerByCSSModel.set(e,t),t.addEventListener("TrackedCSSPropertiesUpdated",this.trackedCSSPropertiesUpdated,this)}removeStyleTracking(e){const t=this.cssStyleTrackerByCSSModel.get(e);t&&(t.stop(),this.cssStyleTrackerByCSSModel.delete(e),t.removeEventListener("TrackedCSSPropertiesUpdated",this.trackedCSSPropertiesUpdated,this))}trackedCSSPropertiesUpdated({data:e}){for(const t of e){if(!t)continue;const n=this.treeElementForNode(t);n&&n.updateStyleAdorners(),Ml.instance().render()}}showAdornerSettingsPane(){this.adornerSettingsPane||(this.adornerSettingsPane=new Ol,this.adornerSettingsPane.addEventListener("adornersettingupdated",t=>{const{adornerName:n,isEnabledNow:i,newSettings:s}=t.data,o=this.adornersByName.get(n);if(o)for(const r of o)i?r.show():r.hide();this.adornerManager.updateSettings(s)}),this.searchableViewInternal.element.prepend(this.adornerSettingsPane));const e=this.adornerManager.getSettings();this.adornerSettingsPane.data={settings:e},this.adornerSettingsPane.show()}isAdornerEnabled(e){return this.adornerManager.isAdornerEnabled(e)}registerAdorner(e){let t=this.adornersByName.get(e.name);t||(t=new Set,this.adornersByName.set(e.name,t)),t.add(e),this.isAdornerEnabled(e.name)||e.hide()}deregisterAdorner(e){const t=this.adornersByName.get(e.name);t&&t.delete(e)}static firstInspectElementCompletedForTest=function(){};static firstInspectElementNodeNameForTest=""}globalThis.Elements=globalThis.Elements||{};globalThis.Elements.ElementsPanel=k;const Qd=[{name:"display",value:"grid"},{name:"display",value:"inline-grid"},{name:"display",value:"flex"},{name:"display",value:"inline-flex"},{name:"container-type",value:"inline-size"},{name:"container-type",value:"block-size"},{name:"container-type",value:"size"}];class Jd{appendApplicableItems(e,t,n){n instanceof Ps&&!n.isNode()||k.instance().element.isAncestor(e.target)||t.revealSection().appendItem($(H.revealInElementsPanel),()=>ee(n),{jslogContext:"elements.reveal-node"})}}class Zd{reveal(e,t){const n=k.instance();return n.pendingNodeReveal=!0,new Promise(i).catch(s=>{let o;throw gl(s)?o=s.message:o=$(H.nodeCannotBeFoundInTheCurrent),Ns.instance().warn(o),s});function i(s,o){if(e instanceof A)r(e);else if(e instanceof tn)e.resolve(d);else{const c=e.runtimeModel().target().model(be);if(c)c.pushObjectAsNodeToFrontend(e).then(a);else{const h=$(H.nodeCannotBeFoundInTheCurrent);o(new at(h))}}function r(c){n.pendingNodeReveal=!1;let h=c;for(;h.parentNode;)h=h.parentNode;const p=!(h instanceof ft);if(!(e instanceof ft)&&p){const u=$(H.nodeCannotBeFoundInTheCurrent);o(new at(u));return}if(c){n.revealAndSelectNode(c,!t).then(s);return}const f=$(H.nodeCannotBeFoundInTheCurrent);o(new at(f))}function a(c){if(!c){const h=$(H.theRemoteObjectCouldNotBe);o(new at(h));return}r(c)}function d(c){if(!c){const h=$(H.theDeferredDomNodeCouldNotBe);o(new at(h));return}r(c)}}}}class ec{reveal(e){return k.instance().revealProperty(e)}}class tc{handleAction(e,t){const n=e.flavor(A);if(!n)return!0;const i=V.forDOMModel(n.domModel());if(!i)return!0;switch(t){case"elements.hide-element":return i.toggleHideElement(n),!0;case"elements.edit-as-html":return i.toggleEditAsHTML(n),!0;case"elements.duplicate-element":return i.duplicateNode(n),!0;case"elements.copy-styles":return i.findTreeElement(n)?.copyStyles(),!0;case"elements.undo":return ji.instance().undo(),k.instance().stylesWidget.forceUpdate(),!0;case"elements.redo":return ji.instance().redo(),k.instance().stylesWidget.forceUpdate(),!0;case"elements.show-styles":return k.instance().selectAndShowSidebarTab("styles"),!0;case"elements.show-computed":return k.instance().selectAndShowSidebarTab("computed"),!0;case"elements.toggle-eye-dropper":{const s=T.instance().flavor(it);if(!s)return!1;s.toggleEyeDropper()}}return!1}}let Tn;class dn{static instance(e={forceNew:null}){const{forceNew:t}=e;return(!Tn||t)&&(Tn=new dn),Tn}decorate(e){const t=e.domModel().cssModel().pseudoState(e);return t?{color:"--sys-color-orange-bright",title:$(H.elementStateS,{PH1:":"+t.join(", :")})}:null}}const Jc=Object.freeze(Object.defineProperty({__proto__:null,CSSPropertyRevealer:ec,ContextMenuProvider:Jd,DOMNodeRevealer:Zd,ElementsActionDelegate:tc,ElementsPanel:k,PseudoStateMarkerDecorator:dn},Symbol.toStringTag,{value:"Module"})),Se={frameworkListeners:"`Framework` listeners",showListenersOnTheAncestors:"Show listeners on the ancestors",ancestors:"Ancestors",eventListenersCategory:"Event listeners category",all:"All",passive:"Passive",blocking:"Blocking",resolveEventListenersBoundWith:"Resolve event listeners bound with framework"},nc=G("panels/elements/EventListenersWidget.ts",Se),Ne=q.bind(void 0,nc);let Nn;class Ze extends wt{toolbarItemsInternal;showForAncestorsSetting;dispatchFilterBySetting;showFrameworkListenersSetting;eventListenersView;lastRequestedNode;constructor(){super(),this.toolbarItemsInternal=[],this.showForAncestorsSetting=O.instance().moduleSetting("show-event-listeners-for-ancestors"),this.showForAncestorsSetting.addChangeListener(this.update.bind(this)),this.dispatchFilterBySetting=O.instance().createSetting("event-listener-dispatch-filter-type",we.All),this.dispatchFilterBySetting.addChangeListener(this.update.bind(this)),this.showFrameworkListenersSetting=O.instance().createSetting("show-frameowkr-listeners",!0),this.showFrameworkListenersSetting.setTitle(Ne(Se.frameworkListeners)),this.showFrameworkListenersSetting.addChangeListener(this.showFrameworkListenersChanged.bind(this)),this.eventListenersView=new fl(this.update.bind(this)),this.eventListenersView.show(this.element),this.element.setAttribute("jslog",`${Me("elements.event-listeners").track({resize:!0})}`),this.toolbarItemsInternal.push(Ge.createActionButtonForId("elements.refresh-event-listeners")),this.toolbarItemsInternal.push(new bt(this.showForAncestorsSetting,Ne(Se.showListenersOnTheAncestors),Ne(Se.ancestors)));const e=new al(this.onDispatchFilterTypeChanged.bind(this),Ne(Se.eventListenersCategory));e.element.setAttribute("jslog",`${ll().track({change:!0})}`);function t(n,i){const s=e.createOption(n,i);i===this.dispatchFilterBySetting.get()&&e.select(s)}t.call(this,Ne(Se.all),we.All),t.call(this,Ne(Se.passive),we.Passive),t.call(this,Ne(Se.blocking),we.Blocking),e.setMaxWidth(200),this.toolbarItemsInternal.push(e),this.toolbarItemsInternal.push(new bt(this.showFrameworkListenersSetting,Ne(Se.resolveEventListenersBoundWith))),T.instance().addFlavorChangeListener(A,this.update,this),this.update()}static instance(e={forceNew:null}){const{forceNew:t}=e;return(!Nn||t)&&(Nn=new Ze),Nn}doUpdate(){this.lastRequestedNode&&(this.lastRequestedNode.domModel().runtimeModel().releaseObjectGroup(Rt),delete this.lastRequestedNode);const e=T.instance().flavor(A);if(!e)return this.eventListenersView.reset(),this.eventListenersView.addEmptyHolderIfNeeded(),Promise.resolve();this.lastRequestedNode=e;const t=!this.showForAncestorsSetting.get(),n=[];if(n.push(e.resolveToObject(Rt)),!t){let i=e.parentNode;for(;i;)n.push(i.resolveToObject(Rt)),i=i.parentNode;n.push(this.windowObjectInNodeContext(e))}return Promise.all(n).then(this.eventListenersView.addObjects.bind(this.eventListenersView)).then(this.showFrameworkListenersChanged.bind(this))}wasShown(){T.instance().setFlavor(Ze,this),super.wasShown()}willHide(){super.willHide(),T.instance().setFlavor(Ze,null)}toolbarItems(){return this.toolbarItemsInternal}onDispatchFilterTypeChanged(e){const t=e.target;this.dispatchFilterBySetting.set(t.value)}showFrameworkListenersChanged(){const e=this.dispatchFilterBySetting.get(),t=e===we.All||e===we.Passive,n=e===we.All||e===we.Blocking;this.eventListenersView.showFrameworkListeners(this.showFrameworkListenersSetting.get(),t,n)}windowObjectInNodeContext(e){const t=e.domModel().runtimeModel().executionContexts();let n=t[0];if(e.frameId())for(let i=0;i<t.length;++i){const s=t[i];s.frameId===e.frameId()&&s.isDefault&&(n=s)}return n.evaluate({expression:"self",objectGroup:Rt,includeCommandLineAPI:!1,silent:!0,returnByValue:!1,generatePreview:!1},!1,!1).then(i=>"object"in i?i.object:null)}eventListenersArrivedForTest(){}}const we={All:"All",Blocking:"Blocking",Passive:"Passive"},Rt="event-listeners-panel";class ic{handleAction(e,t){switch(t){case"elements.refresh-event-listeners":return Ze.instance().update(),!0}return!1}}const Zc=Object.freeze(Object.defineProperty({__proto__:null,ActionDelegate:ic,DispatchFilterBy:we,EventListenersWidget:Ze},Symbol.toStringTag,{value:"Module"})),vr=new CSSStyleSheet;vr.replaceSync(`/*
 * Copyright (c) 2017 The Chromium Authors. All rights reserved.
 * Use of this source code is governed by a BSD-style license that can be
 * found in the LICENSE file.
 */

.properties-widget-section {
  padding: 2px 0 2px 5px;
  flex: none;
}

.properties-widget-toolbar {
  border-bottom: 1px solid var(--sys-color-divider);
  flex-shrink: 0;
}

.styles-pane-toolbar {
  width: 100%;
}

/*# sourceURL=propertiesWidget.css */
`);const as="properties-sidebar-pane",Ut={showAll:"Show all",showAllTooltip:"When unchecked, only properties whose values are neither null nor undefined will be shown",noMatchingProperty:"No matching property"},sc=G("panels/elements/PropertiesWidget.ts",Ut),Pn=q.bind(void 0,sc);class oc extends wt{node;showAllPropertiesSetting;filterRegex=null;noMatchesElement;treeOutline;expandController;lastRequestedNode;constructor(e){super(!0,e),this.showAllPropertiesSetting=O.instance().createSetting("show-all-properties",!1),this.showAllPropertiesSetting.addChangeListener(this.filterList.bind(this)),he.instance().addModelListener(be,P.AttrModified,this.onNodeChange,this,{scoped:!0}),he.instance().addModelListener(be,P.AttrRemoved,this.onNodeChange,this,{scoped:!0}),he.instance().addModelListener(be,P.CharacterDataModified,this.onNodeChange,this,{scoped:!0}),he.instance().addModelListener(be,P.ChildNodeCountUpdated,this.onNodeChange,this,{scoped:!0}),T.instance().addFlavorChangeListener(A,this.setNode,this),this.node=T.instance().flavor(A);const t=this.contentElement.createChild("div","hbox properties-widget-toolbar"),n=new Ge("styles-pane-toolbar",t),i=new hi(void 0,1,1,void 0,void 0,!1);i.addEventListener("TextChanged",this.onFilterChanged,this),n.appendToolbarItem(i),n.appendToolbarItem(new bt(this.showAllPropertiesSetting,Pn(Ut.showAllTooltip),Pn(Ut.showAll))),this.contentElement.setAttribute("jslog",`${Me("element-properties").track({resize:!0})}`),this.noMatchesElement=this.contentElement.createChild("div","gray-info-message hidden"),this.noMatchesElement.textContent=Pn(Ut.noMatchingProperty),this.treeOutline=new dl({readOnly:!0}),this.treeOutline.setShowSelectionOnKeyboardFocus(!0,!1),this.expandController=new cl(this.treeOutline),this.contentElement.appendChild(this.treeOutline.element),this.treeOutline.addEventListener(Dn.ElementExpanded,()=>{L.actionTaken(We.DOMPropertiesExpanded)}),this.update()}onFilterChanged(e){this.filterRegex=e.data?new RegExp(ci(e.data),"i"):null,this.filterList()}filterList(){let e=!0;for(const t of this.treeOutline.rootElement().children()){const{property:n}=t,i=!n?.match({includeNullOrUndefinedValues:this.showAllPropertiesSetting.get(),regex:this.filterRegex});i||(e=!1),t.hidden=i}this.noMatchesElement.classList.toggle("hidden",!e)}setNode(e){this.node=e.data,this.update()}async doUpdate(){if(this.lastRequestedNode&&(this.lastRequestedNode.domModel().runtimeModel().releaseObjectGroup(as),delete this.lastRequestedNode),!this.node){this.treeOutline.removeChildren();return}this.lastRequestedNode=this.node;const e=await this.node.resolveToObject(as);if(!e)return;const t=this.treeOutline.rootElement();let{properties:n}=await Ps.loadFromObjectPerProto(e,!0);t.removeChildren(),n===null&&(n=[]),hl.populateWithProperties(t,n,null,!0,!0,e),this.filterList()}onNodeChange(e){if(!this.node)return;const t=e.data,n=t instanceof A?t:t.node;this.node===n&&this.update()}wasShown(){super.wasShown(),this.registerCSSFiles([vr])}}const eh=Object.freeze(Object.defineProperty({__proto__:null,PropertiesWidget:oc},Symbol.toStringTag,{value:"Module"})),xr=new CSSStyleSheet;xr.replaceSync(`/*
 * Copyright 2019 The Chromium Authors. All rights reserved.
 * Use of this source code is governed by a BSD-style license that can be
 * found in the LICENSE file.
 */

.stack-trace {
  font-size: 11px !important; /* stylelint-disable-line declaration-no-important */
  font-family: Menlo, monospace;
}

/*# sourceURL=nodeStackTraceWidget.css */
`);const Tr={noStackTraceAvailable:"No stack trace available"},rc=G("panels/elements/NodeStackTraceWidget.ts",Tr),ac=q.bind(void 0,rc);class lc extends wt{noStackTraceElement;creationStackTraceElement;linkifier;constructor(){super(!0),this.noStackTraceElement=this.contentElement.createChild("div","gray-info-message"),this.noStackTraceElement.textContent=ac(Tr.noStackTraceAvailable),this.creationStackTraceElement=this.contentElement.createChild("div","stack-trace"),this.linkifier=new tt(Nr)}wasShown(){super.wasShown(),T.instance().addFlavorChangeListener(A,this.update,this),this.registerCSSFiles([xr]),this.update()}willHide(){T.instance().removeFlavorChangeListener(A,this.update,this)}async doUpdate(){const e=T.instance().flavor(A);if(!e){this.noStackTraceElement.classList.remove("hidden"),this.creationStackTraceElement.classList.add("hidden");return}const t=await e.creationStackTrace();if(t){this.noStackTraceElement.classList.add("hidden"),this.creationStackTraceElement.classList.remove("hidden");const n=ul(e.domModel().target(),this.linkifier,{stackTrace:t,tabStops:void 0});this.creationStackTraceElement.removeChildren(),this.creationStackTraceElement.appendChild(n.element)}else this.noStackTraceElement.classList.remove("hidden"),this.creationStackTraceElement.classList.add("hidden")}}const Nr=40,th=Object.freeze(Object.defineProperty({__proto__:null,MaxLengthForLinks:Nr,NodeStackTraceWidget:lc},Symbol.toStringTag,{value:"Module"})),Pr=new CSSStyleSheet;Pr.replaceSync(`/**
 * Copyright 2017 The Chromium Authors. All rights reserved.
 * Use of this source code is governed by a BSD-style license that can be
 * found in the LICENSE file.
 */

.styles-element-classes-pane {
  background-color: var(--sys-color-cdt-base-container);
  border-bottom: 1px solid var(--sys-color-divider);
  padding: 6px 2px 2px;
}

.styles-element-classes-container {
  display: flex;
  flex-wrap: wrap;
  justify-content: flex-start;
}

.styles-element-classes-pane [is="dt-checkbox"] {
  margin-right: 15px;
}

.styles-element-classes-pane .title-container {
  padding-bottom: 2px;
}

.styles-element-classes-pane .new-class-input {
  padding-left: 3px;
  padding-right: 3px;
  overflow: hidden;
  border: 1px solid var(--sys-color-neutral-outline);
  border-radius: 4px;
  line-height: 15px;
  margin-left: 3px;
  width: calc(100% - 7px);
  background-color: var(--sys-color-cdt-base-container);
  cursor: text;

  &:hover {
    box-shadow: 0 0 0 1px var(--ref-palette-neutral90);
  }
}

/*# sourceURL=classesPaneWidget.css */
`);const mt={addNewClass:"Add new class",classesSAdded:"Classes {PH1} added",classSAdded:"Class {PH1} added",elementClasses:"Element Classes"},dc=G("panels/elements/ClassesPaneWidget.ts",mt),jt=q.bind(void 0,dc);class Ir extends ii{input;classesContainer;prompt;mutatingNodes;pendingNodeClasses;updateNodeThrottler;previousTarget;constructor(){super(!0),this.contentElement.className="styles-element-classes-pane",this.contentElement.setAttribute("jslog",`${Me("elements-classes")}`);const e=this.contentElement.createChild("div","title-container");this.input=e.createChild("div","new-class-input monospace"),this.setDefaultFocusedElement(this.input),this.classesContainer=this.contentElement.createChild("div","source-code"),this.classesContainer.classList.add("styles-element-classes-container"),this.prompt=new kr(this.nodeClasses.bind(this)),this.prompt.setAutocompletionTimeout(0),this.prompt.renderAsBlock();const t=this.prompt.attach(this.input);this.prompt.setPlaceholder(jt(mt.addNewClass)),this.prompt.addEventListener("TextChanged",this.onTextChanged,this),t.addEventListener("keydown",this.onKeyDown.bind(this),!1),he.instance().addModelListener(be,P.DOMMutated,this.onDOMMutated,this,{scoped:!0}),this.mutatingNodes=new Set,this.pendingNodeClasses=new Map,this.updateNodeThrottler=new xe(0),this.previousTarget=null,T.instance().addFlavorChangeListener(A,this.onSelectedNodeChanged,this)}splitTextIntoClasses(e){return e.split(/[,\s]/).map(t=>t.trim()).filter(t=>t.length)}onKeyDown(e){if(e.key!=="Enter"&&!$i(e)||e.key==="Enter"&&(e.consume(),this.prompt.acceptAutoComplete()))return;const t=e.target;let n=t.textContent;$i(e)&&(Wt(n)||e.consume(!0),n=""),this.prompt.clearAutocomplete(),t.textContent="";const i=T.instance().flavor(A);if(!i)return;const s=this.splitTextIntoClasses(n);if(!s.length){this.installNodeClasses(i);return}for(const a of s)this.toggleClass(i,a,!0);const o=s.join(" "),r=s.length>1?jt(mt.classesSAdded,{PH1:o}):jt(mt.classSAdded,{PH1:o});ai(r),this.installNodeClasses(i),this.update()}onTextChanged(){const e=T.instance().flavor(A);e&&this.installNodeClasses(e)}onDOMMutated(e){const t=e.data;this.mutatingNodes.has(t)||(In.delete(t),this.update())}onSelectedNodeChanged(e){this.previousTarget&&this.prompt.text()&&(this.input.textContent="",this.installNodeClasses(this.previousTarget)),this.previousTarget=e.data,this.update()}wasShown(){super.wasShown(),this.update(),this.registerCSSFiles([Pr])}update(){if(!this.isShowing())return;let e=T.instance().flavor(A);if(e&&(e=e.enclosingElementOrSelf()),this.classesContainer.removeChildren(),this.input.disabled=!e,!e)return;const t=this.nodeClasses(e),n=[...t.keys()];n.sort(pl);for(const i of n){const s=Fn.create(i,t.get(i),void 0,"element-class",!0);s.classList.add("monospace"),s.checkboxElement.addEventListener("click",this.onClick.bind(this,i),!1),this.classesContainer.appendChild(s)}}onClick(e,t){const n=T.instance().flavor(A);if(!n)return;const i=t.target.checked;this.toggleClass(n,e,i),this.installNodeClasses(n)}nodeClasses(e){let t=In.get(e);if(!t){const i=(e.getAttribute("class")||"").split(/\s/);t=new Map;for(let s=0;s<i.length;++s){const o=i[s].trim();o.length&&t.set(o,!0)}In.set(e,t)}return t}toggleClass(e,t,n){const i=this.nodeClasses(e);i.set(t,n),Lr.instance().item().setChecked([...i.values()].includes(!0))}installNodeClasses(e){const t=this.nodeClasses(e),n=new Set;for(const o of t.keys())t.get(o)&&n.add(o);const i=this.splitTextIntoClasses(this.prompt.textWithCurrentSuggestion());for(const o of i)n.add(o);const s=[...n.values()].sort();this.pendingNodeClasses.set(e,s.join(" ")),this.updateNodeThrottler.schedule(this.flushPendingClasses.bind(this))}async flushPendingClasses(){const e=[];for(const n of this.pendingNodeClasses.keys()){this.mutatingNodes.add(n);const i=n.setAttributeValuePromise("class",this.pendingNodeClasses.get(n)).then(t.bind(this,n));e.push(i)}this.pendingNodeClasses.clear(),await Promise.all(e);function t(n){this.mutatingNodes.delete(n)}}}const In=new WeakMap;let Ln,Lr=class Ar{button;view;constructor(){this.button=new en(jt(mt.elementClasses),"class"),this.button.element.style.setProperty("--dot-toggle-top","12px"),this.button.element.style.setProperty("--dot-toggle-left","18px"),this.button.element.setAttribute("jslog",`${si("elements-classes").track({click:!0})}`),this.button.addEventListener("Click",this.clicked,this),this.view=new Ir}static instance(e={forceNew:null}){const{forceNew:t}=e;return(!Ln||t)&&(Ln=new Ar),Ln}clicked(){k.instance().showToolbarPane(this.view.isShowing()?null:this.view,this.button)}item(){return this.button}};class kr extends ws{nodeClasses;selectedFrameId;classNamesPromise;constructor(e){super(),this.nodeClasses=e,this.initialize(this.buildClassNameCompletions.bind(this)," "),this.disableDefaultSuggestionForEmptyInput(),this.selectedFrameId="",this.classNamesPromise=null}async getClassNames(e){const t=[],n=new Set;this.selectedFrameId=e.frameId();const i=e.domModel().cssModel(),s=i.allStyleSheets();for(const a of s){if(a.frameId!==this.selectedFrameId)continue;const d=i.getClassNames(a.id).then(c=>{for(const h of c)n.add(h)});t.push(d)}const o=e.ownerDocument.id,r=e.domModel().classNamesPromise(o).then(a=>{for(const d of a)n.add(d)});return t.push(r),await Promise.all(t),[...n]}async buildClassNameCompletions(e,t,n){(!t||n)&&(this.classNamesPromise=null);const i=T.instance().flavor(A);if(!i||!t&&!n&&!e.trim())return[];(!this.classNamesPromise||this.selectedFrameId!==i.frameId())&&(this.classNamesPromise=this.getClassNames(i));let s=await this.classNamesPromise;const o=this.nodeClasses(i);return s=s.filter(r=>!o.get(r)),t[0]==="."&&(s=s.map(r=>"."+r)),s.filter(r=>r.startsWith(t)).sort().map(r=>({text:r,title:void 0,subtitle:void 0,priority:void 0,isSecondary:void 0,subtitleRenderer:void 0,selectionRange:void 0,hideGhostText:void 0,iconElement:void 0}))}}const nh=Object.freeze(Object.defineProperty({__proto__:null,ButtonProvider:Lr,ClassNamePrompt:kr,ClassesPaneWidget:Ir},Symbol.toStringTag,{value:"Module"})),Mr=new CSSStyleSheet;Mr.replaceSync(`/**
 * Copyright 2017 The Chromium Authors. All rights reserved.
 * Use of this source code is governed by a BSD-style license that can be
 * found in the LICENSE file.
 */

.styles-element-state-pane {
  overflow: hidden;
  padding-left: 2px;
  background-color: var(--sys-color-cdt-base-container);
  border-bottom: 1px solid var(--sys-color-divider);
  margin-top: 0;
  padding-bottom: 2px;
}

.styles-element-state-pane > .page-state-checkbox {
  margin-block: 6px;
  display: flex;
  align-items: center;
  gap: 2px;
}

.styles-element-state-pane .section-header {
  margin: 8px 4px 6px;
  color: var(--color-text-secondary);
}

.styles-element-state-pane > table {
  width: 100%;
  border-spacing: 0;
}

.styles-element-state-pane td {
  padding: 0;
}

.pseudo-states-container {
  display: grid;
  column-gap: 12px;
  grid-template-columns: repeat(2, 1fr);
  grid-auto-flow: row;
}

.pseudo-states-container.specific-pseudo-states {
  grid-template-columns: repeat(2, 1fr);
  margin-bottom: 4px;
}

/*# sourceURL=elementStatePaneWidget.css */
`);const Qe={forceElementState:"Force element state",toggleElementState:"Toggle Element State",emulateFocusedPage:"Emulate a focused page",emulatesAFocusedPage:"Keep page focused. Commonly used for debugging disappearing elements.",forceElementSpecificStates:"Force specific element state"},cc=G("panels/elements/ElementStatePaneWidget.ts",Qe),ht=q.bind(void 0,cc);var E;(function(l){l.ENABLED="enabled",l.DISABLED="disabled",l.VALID="valid",l.INVALID="invalid",l.USER_VALID="user-valid",l.USER_INVALID="user-invalid",l.REQUIRED="required",l.OPTIONAL="optional",l.READ_ONLY="read-only",l.READ_WRITE="read-write",l.IN_RANGE="in-range",l.OUT_OF_RANGE="out-of-range",l.VISITED="visited",l.CHECKED="checked",l.INDETERMINATE="indeterminate",l.PLACEHOLDER_SHOWN="placeholder-shown",l.AUTOFILL="autofill"})(E||(E={}));class Or extends ii{inputs;inputStates;cssModel;specificPseudoStateDivs;specificHeader;throttler;constructor(){super(!0),this.contentElement.className="styles-element-state-pane",this.contentElement.setAttribute("jslog",`${Me("element-states")}`);const e=[];this.inputs=e,this.inputStates=new WeakMap;const t=c=>{const h=document.createElement("div");return h.classList.add("section-header"),w(h.createChild("span"),c),h},n=c=>{const h=T.instance().flavor(A);if(!h||!(c.target instanceof HTMLInputElement))return;const p=this.inputStates.get(c.target);p&&h.domModel().cssModel().forcePseudoState(h,p,c.target.checked)},i=c=>{const h=document.createElement("div");h.id=c;const p=Fn.create(":"+c,void 0,void 0,void 0,!0),g=p.checkboxElement;return this.inputStates.set(g,c),g.addEventListener("click",n,!1),g.setAttribute("jslog",`${gs().track({change:!0}).context(c)}`),e.push(g),h.appendChild(p),h},s=()=>{const c=document.createElement("div");c.classList.add("page-state-checkbox");const h=Fn.create(ht(Qe.emulateFocusedPage),void 0,void 0,"emulate-page-focus",!0);ml(h.checkboxElement,O.instance().moduleSetting("emulate-page-focus"),{enable:We.ToggleEmulateFocusedPageFromStylesPaneOn,disable:We.ToggleEmulateFocusedPageFromStylesPaneOff}),de.install(h.textElement,ht(Qe.emulatesAFocusedPage));const p=new li;return p.data={variant:"icon",iconName:"help",size:"SMALL",jslogContext:"learn-more"},p.addEventListener("click",()=>U.openInNewTab("https://goo.gle/devtools-emulate-focused-page")),c.appendChild(h),c.appendChild(p),c};this.contentElement.className="styles-element-state-pane";const o=s();this.contentElement.appendChild(o),this.contentElement.appendChild(t(ht(Qe.forceElementState)));const r=document.createElement("div");r.classList.add("source-code"),r.classList.add("pseudo-states-container"),Wi(r),r.appendChild(i("active")),r.appendChild(i("hover")),r.appendChild(i("focus")),r.appendChild(i("focus-within")),r.appendChild(i("focus-visible")),r.appendChild(i("target")),this.contentElement.appendChild(r);const a=document.createElement("div");a.classList.add("source-code"),a.classList.add("pseudo-states-container"),a.classList.add("specific-pseudo-states"),Wi(a),this.specificPseudoStateDivs=new Map,this.specificPseudoStateDivs.set(E.ENABLED,i(E.ENABLED)),this.specificPseudoStateDivs.set(E.DISABLED,i(E.DISABLED)),this.specificPseudoStateDivs.set(E.VALID,i(E.VALID)),this.specificPseudoStateDivs.set(E.INVALID,i(E.INVALID)),this.specificPseudoStateDivs.set(E.USER_VALID,i(E.USER_VALID)),this.specificPseudoStateDivs.set(E.USER_INVALID,i(E.USER_INVALID)),this.specificPseudoStateDivs.set(E.REQUIRED,i(E.REQUIRED)),this.specificPseudoStateDivs.set(E.OPTIONAL,i(E.OPTIONAL)),this.specificPseudoStateDivs.set(E.READ_ONLY,i(E.READ_ONLY)),this.specificPseudoStateDivs.set(E.READ_WRITE,i(E.READ_WRITE)),this.specificPseudoStateDivs.set(E.IN_RANGE,i(E.IN_RANGE)),this.specificPseudoStateDivs.set(E.OUT_OF_RANGE,i(E.OUT_OF_RANGE)),this.specificPseudoStateDivs.set(E.VISITED,i(E.VISITED)),this.specificPseudoStateDivs.set(E.CHECKED,i(E.CHECKED)),this.specificPseudoStateDivs.set(E.INDETERMINATE,i(E.INDETERMINATE)),this.specificPseudoStateDivs.set(E.PLACEHOLDER_SHOWN,i(E.PLACEHOLDER_SHOWN)),this.specificPseudoStateDivs.set(E.AUTOFILL,i(E.AUTOFILL)),this.specificPseudoStateDivs.forEach(c=>{a.appendChild(c)}),this.specificHeader=document.createElement("details"),this.specificHeader.classList.add("specific-details");const d=document.createElement("summary");d.classList.add("force-specific-element-header"),d.classList.add("section-header"),w(d.createChild("span"),ht(Qe.forceElementSpecificStates)),this.specificHeader.appendChild(d),this.specificHeader.appendChild(a),this.contentElement.appendChild(this.specificHeader),this.throttler=new xe(100),T.instance().addFlavorChangeListener(A,this.update,this)}updateModel(e){this.cssModel!==e&&(this.cssModel&&this.cssModel.removeEventListener(fe.PseudoStateForced,this.update,this),this.cssModel=e,this.cssModel&&this.cssModel.addEventListener(fe.PseudoStateForced,this.update,this))}wasShown(){super.wasShown(),this.registerCSSFiles([Mr]),this.update()}update(){let e=T.instance().flavor(A);if(e&&(e=e.enclosingElementOrSelf()),this.updateModel(e?e.domModel().cssModel():null),e){const t=e.domModel().cssModel().pseudoState(e);for(const n of this.inputs){n.disabled=!!e.pseudoType();const i=this.inputStates.get(n);n.checked=t&&i!==void 0?t.indexOf(i)>=0:!1}}else for(const t of this.inputs)t.disabled=!0,t.checked=!1;this.throttler.schedule(this.updateElementSpecificStatesTable.bind(this,e)),cn.instance().item().setToggled(this.inputs.some(t=>t.checked))}async updateElementSpecificStatesTable(e=null){if(!e||e.nodeType()!==Node.ELEMENT_NODE){this.specificHeader.hidden=!0,this.updateElementSpecificStatesTableForTest();return}let t=!1;const n=(a,d)=>{const c=this.specificPseudoStateDivs.get(a);c&&(c.hidden=d),t=t||!d},i=(a,d)=>d.includes(a.nodeName()?.toLowerCase()),s=a=>i(a,["input"])&&(a.getAttribute("type")==="checkbox"||a.getAttribute("type")==="radio"),r=await(async a=>{function d(){return"formAssociated"in this.constructor&&this.constructor.formAssociated===!0}const c=await a.callFunction(d);return c?c.value:!1})(e);i(e,["button","input","select","textarea","optgroup","option","fieldset"])||r?(n(E.ENABLED,!1),n(E.DISABLED,!1)):(n(E.ENABLED,!0),n(E.DISABLED,!0)),i(e,["button","fieldset","input","object","output","select","textarea","img"])||r?(n(E.VALID,!1),n(E.INVALID,!1)):(n(E.VALID,!0),n(E.INVALID,!0)),i(e,["input","select","textarea"])?(n(E.USER_VALID,!1),n(E.USER_INVALID,!1),n(E.REQUIRED,!1),n(E.OPTIONAL,!1)):(n(E.USER_VALID,!0),n(E.USER_INVALID,!0),n(E.REQUIRED,!0),n(E.OPTIONAL,!0)),i(e,["input","textarea"])?n(E.READ_WRITE,!1):n(E.READ_WRITE,!0),i(e,["button","datalist","fieldset","label","legend","meter","optgroup","option","output","progress","select"])?n(E.READ_ONLY,!1):n(E.READ_ONLY,!0),i(e,["input"])&&(e.getAttribute("min")!==void 0||e.getAttribute("max")!==void 0)?(n(E.IN_RANGE,!1),n(E.OUT_OF_RANGE,!1)):(n(E.IN_RANGE,!0),n(E.OUT_OF_RANGE,!0)),i(e,["a","area"])&&e.getAttribute("href")!==void 0?n(E.VISITED,!1):n(E.VISITED,!0),s(e)||i(e,["option"])?n(E.CHECKED,!1):n(E.CHECKED,!0),s(e)||i(e,["progress"])?n(E.INDETERMINATE,!1):n(E.INDETERMINATE,!0),i(e,["input","textarea"])?n(E.PLACEHOLDER_SHOWN,!1):n(E.PLACEHOLDER_SHOWN,!0),i(e,["input"])?n(E.AUTOFILL,!1):n(E.AUTOFILL,!0),this.specificHeader.hidden=!t,this.updateElementSpecificStatesTableForTest()}updateElementSpecificStatesTableForTest(){}}let An;class cn{button;view;constructor(){this.button=new en(ht(Qe.toggleElementState),"hover"),this.button.addEventListener("Click",this.clicked,this),this.button.element.classList.add("element-state"),this.button.element.setAttribute("jslog",`${si("element-states").track({click:!0})}`),this.button.element.style.setProperty("--dot-toggle-top","12px"),this.button.element.style.setProperty("--dot-toggle-left","18px"),this.view=new Or}static instance(e={forceNew:null}){const{forceNew:t}=e;return(!An||t)&&(An=new cn),An}clicked(){k.instance().showToolbarPane(this.view.isShowing()?null:this.view,this.button)}item(){return this.button}}const ih=Object.freeze(Object.defineProperty({__proto__:null,ButtonProvider:cn,ElementStatePaneWidget:Or},Symbol.toStringTag,{value:"Module"}));export{xc as A,nh as C,Bc as D,k as E,kc as L,Yc as M,th as N,Ic as P,Fc as S,Gc as T,Hc as W,Tc as a,Nc as b,Pc as c,Wc as d,Mc as e,zc as f,Jc as g,Ac as h,ih as i,qc as j,Xc as k,Kc as l,Zc as m,Qc as n,eh as o,Lc as p,$c as q,Vc as r,_c as s,Dc as t,Oc as u,jc as v,V as w};
//# sourceMappingURL=ElementStatePaneWidget-6aoZ4Fwh.js.map
